var PY=Object.defineProperty;var IY=(t,e,n)=>e in t?PY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var PC=(t,e,n)=>IY(t,typeof e!="symbol"?e+"":e,n);function MY(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function In(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kR(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}var AR={exports:{}},f2={},DR={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv=Symbol.for("react.element"),OY=Symbol.for("react.portal"),RY=Symbol.for("react.fragment"),LY=Symbol.for("react.strict_mode"),BY=Symbol.for("react.profiler"),FY=Symbol.for("react.provider"),$Y=Symbol.for("react.context"),UY=Symbol.for("react.forward_ref"),VY=Symbol.for("react.suspense"),zY=Symbol.for("react.memo"),HY=Symbol.for("react.lazy"),r5=Symbol.iterator;function qY(t){return t===null||typeof t!="object"?null:(t=r5&&t[r5]||t["@@iterator"],typeof t=="function"?t:null)}var PR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IR=Object.assign,MR={};function om(t,e,n){this.props=t,this.context=e,this.refs=MR,this.updater=n||PR}om.prototype.isReactComponent={};om.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};om.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OR(){}OR.prototype=om.prototype;function c3(t,e,n){this.props=t,this.context=e,this.refs=MR,this.updater=n||PR}var u3=c3.prototype=new OR;u3.constructor=c3;IR(u3,om.prototype);u3.isPureReactComponent=!0;var i5=Array.isArray,RR=Object.prototype.hasOwnProperty,d3={current:null},LR={key:!0,ref:!0,__self:!0,__source:!0};function BR(t,e,n){var s,i={},a=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)RR.call(e,s)&&!LR.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:Wv,type:t,key:a,ref:o,props:i,_owner:d3.current}}function WY(t,e){return{$$typeof:Wv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function h3(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wv}function GY(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var a5=/\/+/g;function IC(t,e){return typeof t=="object"&&t!==null&&t.key!=null?GY(""+t.key):e.toString(36)}function v1(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wv:case OY:o=!0}}if(o)return o=t,i=i(o),t=s===""?"."+IC(o,0):s,i5(i)?(n="",t!=null&&(n=t.replace(a5,"$&/")+"/"),v1(i,e,n,"",function(u){return u})):i!=null&&(h3(i)&&(i=WY(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(a5,"$&/")+"/")+t)),e.push(i)),1;if(o=0,s=s===""?".":s+":",i5(t))for(var l=0;l<t.length;l++){a=t[l];var c=s+IC(a,l);o+=v1(a,e,n,c,i)}else if(c=qY(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=s+IC(a,l++),o+=v1(a,e,n,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ox(t,e,n){if(t==null)return t;var s=[],i=0;return v1(t,s,"","",function(a){return e.call(n,a,i++)}),s}function YY(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _i={current:null},y1={transition:null},XY={ReactCurrentDispatcher:_i,ReactCurrentBatchConfig:y1,ReactCurrentOwner:d3};function FR(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:ox,forEach:function(t,e,n){ox(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ox(t,function(){e++}),e},toArray:function(t){return ox(t,function(e){return e})||[]},only:function(t){if(!h3(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qt.Component=om;Qt.Fragment=RY;Qt.Profiler=BY;Qt.PureComponent=c3;Qt.StrictMode=LY;Qt.Suspense=VY;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XY;Qt.act=FR;Qt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=IR({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=d3.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)RR.call(e,c)&&!LR.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Wv,type:t.type,key:i,ref:a,props:s,_owner:o}};Qt.createContext=function(t){return t={$$typeof:$Y,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FY,_context:t},t.Consumer=t};Qt.createElement=BR;Qt.createFactory=function(t){var e=BR.bind(null,t);return e.type=t,e};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(t){return{$$typeof:UY,render:t}};Qt.isValidElement=h3;Qt.lazy=function(t){return{$$typeof:HY,_payload:{_status:-1,_result:t},_init:YY}};Qt.memo=function(t,e){return{$$typeof:zY,type:t,compare:e===void 0?null:e}};Qt.startTransition=function(t){var e=y1.transition;y1.transition={};try{t()}finally{y1.transition=e}};Qt.unstable_act=FR;Qt.useCallback=function(t,e){return _i.current.useCallback(t,e)};Qt.useContext=function(t){return _i.current.useContext(t)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(t){return _i.current.useDeferredValue(t)};Qt.useEffect=function(t,e){return _i.current.useEffect(t,e)};Qt.useId=function(){return _i.current.useId()};Qt.useImperativeHandle=function(t,e,n){return _i.current.useImperativeHandle(t,e,n)};Qt.useInsertionEffect=function(t,e){return _i.current.useInsertionEffect(t,e)};Qt.useLayoutEffect=function(t,e){return _i.current.useLayoutEffect(t,e)};Qt.useMemo=function(t,e){return _i.current.useMemo(t,e)};Qt.useReducer=function(t,e,n){return _i.current.useReducer(t,e,n)};Qt.useRef=function(t){return _i.current.useRef(t)};Qt.useState=function(t){return _i.current.useState(t)};Qt.useSyncExternalStore=function(t,e,n){return _i.current.useSyncExternalStore(t,e,n)};Qt.useTransition=function(){return _i.current.useTransition()};Qt.version="18.3.1";DR.exports=Qt;var v=DR.exports;const Xe=In(v),aT=MY({__proto__:null,default:Xe},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KY=v,QY=Symbol.for("react.element"),ZY=Symbol.for("react.fragment"),JY=Object.prototype.hasOwnProperty,eX=KY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tX={key:!0,ref:!0,__self:!0,__source:!0};function $R(t,e,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)JY.call(e,s)&&!tX.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:QY,type:t,key:a,ref:o,props:i,_owner:eX.current}}f2.Fragment=ZY;f2.jsx=$R;f2.jsxs=$R;AR.exports=f2;var r=AR.exports,Cp={},UR={exports:{}},Ea={},VR={exports:{}},zR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,Y){var oe=Q.length;Q.push(Y);e:for(;0<oe;){var he=oe-1>>>1,me=Q[he];if(0<i(me,Y))Q[he]=Y,Q[oe]=me,oe=he;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var Y=Q[0],oe=Q.pop();if(oe!==Y){Q[0]=oe;e:for(var he=0,me=Q.length,Oe=me>>>1;he<Oe;){var xe=2*(he+1)-1,Pe=Q[xe],qe=xe+1,Ie=Q[qe];if(0>i(Pe,oe))qe<me&&0>i(Ie,Pe)?(Q[he]=Ie,Q[qe]=oe,he=qe):(Q[he]=Pe,Q[xe]=oe,he=xe);else if(qe<me&&0>i(Ie,oe))Q[he]=Ie,Q[qe]=oe,he=qe;else break e}}return Y}function i(Q,Y){var oe=Q.sortIndex-Y.sortIndex;return oe!==0?oe:Q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Q){for(var Y=n(u);Y!==null;){if(Y.callback===null)s(u);else if(Y.startTime<=Q)s(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function w(Q){if(m=!1,b(Q),!g)if(n(c)!==null)g=!0,V(C);else{var Y=n(u);Y!==null&&J(w,Y.startTime-Q)}}function C(Q,Y){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var oe=f;try{for(b(Y),h=n(c);h!==null&&(!(h.expirationTime>Y)||Q&&!I());){var he=h.callback;if(typeof he=="function"){h.callback=null,f=h.priorityLevel;var me=he(h.expirationTime<=Y);Y=t.unstable_now(),typeof me=="function"?h.callback=me:h===n(c)&&s(c),b(Y)}else s(c);h=n(c)}if(h!==null)var Oe=!0;else{var xe=n(u);xe!==null&&J(w,xe.startTime-Y),Oe=!1}return Oe}finally{h=null,f=oe,p=!1}}var j=!1,E=null,T=-1,N=5,P=-1;function I(){return!(t.unstable_now()-P<N)}function B(){if(E!==null){var Q=t.unstable_now();P=Q;var Y=!0;try{Y=E(!0,Q)}finally{Y?U():(j=!1,E=null)}}else j=!1}var U;if(typeof x=="function")U=function(){x(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,G=z.port2;z.port1.onmessage=B,U=function(){G.postMessage(null)}}else U=function(){_(B,0)};function V(Q){E=Q,j||(j=!0,U())}function J(Q,Y){T=_(function(){Q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,V(C))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Q){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var oe=f;f=Y;try{return Q()}finally{f=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,Y){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var oe=f;f=Q;try{return Y()}finally{f=oe}},t.unstable_scheduleCallback=function(Q,Y,oe){var he=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?he+oe:he):oe=he,Q){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=oe+me,Q={id:d++,callback:Y,priorityLevel:Q,startTime:oe,expirationTime:me,sortIndex:-1},oe>he?(Q.sortIndex=oe,e(u,Q),n(c)===null&&Q===n(u)&&(m?(y(T),T=-1):m=!0,J(w,oe-he))):(Q.sortIndex=me,e(c,Q),g||p||(g=!0,V(C))),Q},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(Q){var Y=f;return function(){var oe=f;f=Y;try{return Q.apply(this,arguments)}finally{f=oe}}}})(zR);VR.exports=zR;var nX=VR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sX=v,xa=nX;function nt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HR=new Set,L0={};function Bh(t,e){Sp(t,e),Sp(t+"Capture",e)}function Sp(t,e){for(L0[t]=e,t=0;t<e.length;t++)HR.add(e[t])}var wc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oT=Object.prototype.hasOwnProperty,rX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o5={},l5={};function iX(t){return oT.call(l5,t)?!0:oT.call(o5,t)?!1:rX.test(t)?l5[t]=!0:(o5[t]=!0,!1)}function aX(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oX(t,e,n,s){if(e===null||typeof e>"u"||aX(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wi(t,e,n,s,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dr[t]=new wi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dr[e]=new wi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dr[t]=new wi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dr[t]=new wi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dr[t]=new wi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dr[t]=new wi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dr[t]=new wi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dr[t]=new wi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dr[t]=new wi(t,5,!1,t.toLowerCase(),null,!1,!1)});var f3=/[\-:]([a-z])/g;function p3(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(f3,p3);Dr[e]=new wi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(f3,p3);Dr[e]=new wi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(f3,p3);Dr[e]=new wi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dr[t]=new wi(t,1,!1,t.toLowerCase(),null,!1,!1)});Dr.xlinkHref=new wi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dr[t]=new wi(t,1,!1,t.toLowerCase(),null,!0,!0)});function m3(t,e,n,s){var i=Dr.hasOwnProperty(e)?Dr[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oX(e,n,i,s)&&(n=null),s||i===null?iX(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,s=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Oc=sX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lx=Symbol.for("react.element"),Lf=Symbol.for("react.portal"),Bf=Symbol.for("react.fragment"),g3=Symbol.for("react.strict_mode"),lT=Symbol.for("react.profiler"),qR=Symbol.for("react.provider"),WR=Symbol.for("react.context"),v3=Symbol.for("react.forward_ref"),cT=Symbol.for("react.suspense"),uT=Symbol.for("react.suspense_list"),y3=Symbol.for("react.memo"),hu=Symbol.for("react.lazy"),GR=Symbol.for("react.offscreen"),c5=Symbol.iterator;function fg(t){return t===null||typeof t!="object"?null:(t=c5&&t[c5]||t["@@iterator"],typeof t=="function"?t:null)}var ms=Object.assign,MC;function Yg(t){if(MC===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);MC=e&&e[1]||""}return`
`+MC+t}var OC=!1;function RC(t,e){if(!t||OC)return"";OC=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{OC=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yg(t):""}function lX(t){switch(t.tag){case 5:return Yg(t.type);case 16:return Yg("Lazy");case 13:return Yg("Suspense");case 19:return Yg("SuspenseList");case 0:case 2:case 15:return t=RC(t.type,!1),t;case 11:return t=RC(t.type.render,!1),t;case 1:return t=RC(t.type,!0),t;default:return""}}function dT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bf:return"Fragment";case Lf:return"Portal";case lT:return"Profiler";case g3:return"StrictMode";case cT:return"Suspense";case uT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WR:return(t.displayName||"Context")+".Consumer";case qR:return(t._context.displayName||"Context")+".Provider";case v3:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case y3:return e=t.displayName||null,e!==null?e:dT(t.type)||"Memo";case hu:e=t._payload,t=t._init;try{return dT(t(e))}catch{}}return null}function cX(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dT(e);case 8:return e===g3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function YR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uX(t){var e=YR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cx(t){t._valueTracker||(t._valueTracker=uX(t))}function XR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=YR(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function sb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hT(t,e){var n=e.checked;return ms({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function u5(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Hu(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KR(t,e){e=e.checked,e!=null&&m3(t,"checked",e,!1)}function fT(t,e){KR(t,e);var n=Hu(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pT(t,e.type,n):e.hasOwnProperty("defaultValue")&&pT(t,e.type,Hu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function d5(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pT(t,e,n){(e!=="number"||sb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xg=Array.isArray;function sp(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Hu(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function mT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(nt(91));return ms({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function h5(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(nt(92));if(Xg(n)){if(1<n.length)throw Error(nt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hu(n)}}function QR(t,e){var n=Hu(e.value),s=Hu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function f5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ux,JR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ux=ux||document.createElement("div"),ux.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ux.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function B0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var o0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dX=["Webkit","ms","Moz","O"];Object.keys(o0).forEach(function(t){dX.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),o0[e]=o0[t]})});function eL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||o0.hasOwnProperty(t)&&o0[t]?(""+e).trim():e+"px"}function tL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=eL(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}var hX=ms({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vT(t,e){if(e){if(hX[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(nt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(nt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(nt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(nt(62))}}function yT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xT=null;function x3(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bT=null,rp=null,ip=null;function p5(t){if(t=Xv(t)){if(typeof bT!="function")throw Error(nt(280));var e=t.stateNode;e&&(e=y2(e),bT(t.stateNode,t.type,e))}}function nL(t){rp?ip?ip.push(t):ip=[t]:rp=t}function sL(){if(rp){var t=rp,e=ip;if(ip=rp=null,p5(t),e)for(t=0;t<e.length;t++)p5(e[t])}}function rL(t,e){return t(e)}function iL(){}var LC=!1;function aL(t,e,n){if(LC)return t(e,n);LC=!0;try{return rL(t,e,n)}finally{LC=!1,(rp!==null||ip!==null)&&(iL(),sL())}}function F0(t,e){var n=t.stateNode;if(n===null)return null;var s=y2(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(nt(231,e,typeof n));return n}var _T=!1;if(wc)try{var pg={};Object.defineProperty(pg,"passive",{get:function(){_T=!0}}),window.addEventListener("test",pg,pg),window.removeEventListener("test",pg,pg)}catch{_T=!1}function fX(t,e,n,s,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var l0=!1,rb=null,ib=!1,wT=null,pX={onError:function(t){l0=!0,rb=t}};function mX(t,e,n,s,i,a,o,l,c){l0=!1,rb=null,fX.apply(pX,arguments)}function gX(t,e,n,s,i,a,o,l,c){if(mX.apply(this,arguments),l0){if(l0){var u=rb;l0=!1,rb=null}else throw Error(nt(198));ib||(ib=!0,wT=u)}}function Fh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function m5(t){if(Fh(t)!==t)throw Error(nt(188))}function vX(t){var e=t.alternate;if(!e){if(e=Fh(t),e===null)throw Error(nt(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return m5(i),t;if(a===s)return m5(i),e;a=a.sibling}throw Error(nt(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o)throw Error(nt(189))}}if(n.alternate!==s)throw Error(nt(190))}if(n.tag!==3)throw Error(nt(188));return n.stateNode.current===n?t:e}function lL(t){return t=vX(t),t!==null?cL(t):null}function cL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cL(t);if(e!==null)return e;t=t.sibling}return null}var uL=xa.unstable_scheduleCallback,g5=xa.unstable_cancelCallback,yX=xa.unstable_shouldYield,xX=xa.unstable_requestPaint,Rs=xa.unstable_now,bX=xa.unstable_getCurrentPriorityLevel,b3=xa.unstable_ImmediatePriority,dL=xa.unstable_UserBlockingPriority,ab=xa.unstable_NormalPriority,_X=xa.unstable_LowPriority,hL=xa.unstable_IdlePriority,p2=null,ml=null;function wX(t){if(ml&&typeof ml.onCommitFiberRoot=="function")try{ml.onCommitFiberRoot(p2,t,void 0,(t.current.flags&128)===128)}catch{}}var Ao=Math.clz32?Math.clz32:jX,CX=Math.log,SX=Math.LN2;function jX(t){return t>>>=0,t===0?32:31-(CX(t)/SX|0)|0}var dx=64,hx=4194304;function Kg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ob(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?s=Kg(l):(a&=o,a!==0&&(s=Kg(a)))}else o=n&~i,o!==0?s=Kg(o):a!==0&&(s=Kg(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Ao(e),i=1<<n,s|=t[n],e&=~i;return s}function TX(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EX(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Ao(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&s)&&(i[o]=TX(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function CT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fL(){var t=dx;return dx<<=1,!(dx&4194240)&&(dx=64),t}function BC(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ao(e),t[e]=n}function NX(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ao(n),a=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~a}}function _3(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Ao(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var En=0;function pL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mL,w3,gL,vL,yL,ST=!1,fx=[],Mu=null,Ou=null,Ru=null,$0=new Map,U0=new Map,bu=[],kX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v5(t,e){switch(t){case"focusin":case"focusout":Mu=null;break;case"dragenter":case"dragleave":Ou=null;break;case"mouseover":case"mouseout":Ru=null;break;case"pointerover":case"pointerout":$0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":U0.delete(e.pointerId)}}function mg(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Xv(e),e!==null&&w3(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AX(t,e,n,s,i){switch(e){case"focusin":return Mu=mg(Mu,t,e,n,s,i),!0;case"dragenter":return Ou=mg(Ou,t,e,n,s,i),!0;case"mouseover":return Ru=mg(Ru,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return $0.set(a,mg($0.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,U0.set(a,mg(U0.get(a)||null,t,e,n,s,i)),!0}return!1}function xL(t){var e=Xd(t.target);if(e!==null){var n=Fh(e);if(n!==null){if(e=n.tag,e===13){if(e=oL(n),e!==null){t.blockedOn=e,yL(t.priority,function(){gL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function x1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);xT=s,n.target.dispatchEvent(s),xT=null}else return e=Xv(n),e!==null&&w3(e),t.blockedOn=n,!1;e.shift()}return!0}function y5(t,e,n){x1(t)&&n.delete(e)}function DX(){ST=!1,Mu!==null&&x1(Mu)&&(Mu=null),Ou!==null&&x1(Ou)&&(Ou=null),Ru!==null&&x1(Ru)&&(Ru=null),$0.forEach(y5),U0.forEach(y5)}function gg(t,e){t.blockedOn===e&&(t.blockedOn=null,ST||(ST=!0,xa.unstable_scheduleCallback(xa.unstable_NormalPriority,DX)))}function V0(t){function e(i){return gg(i,t)}if(0<fx.length){gg(fx[0],t);for(var n=1;n<fx.length;n++){var s=fx[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Mu!==null&&gg(Mu,t),Ou!==null&&gg(Ou,t),Ru!==null&&gg(Ru,t),$0.forEach(e),U0.forEach(e),n=0;n<bu.length;n++)s=bu[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<bu.length&&(n=bu[0],n.blockedOn===null);)xL(n),n.blockedOn===null&&bu.shift()}var ap=Oc.ReactCurrentBatchConfig,lb=!0;function PX(t,e,n,s){var i=En,a=ap.transition;ap.transition=null;try{En=1,C3(t,e,n,s)}finally{En=i,ap.transition=a}}function IX(t,e,n,s){var i=En,a=ap.transition;ap.transition=null;try{En=4,C3(t,e,n,s)}finally{En=i,ap.transition=a}}function C3(t,e,n,s){if(lb){var i=jT(t,e,n,s);if(i===null)YC(t,e,s,cb,n),v5(t,s);else if(AX(i,t,e,n,s))s.stopPropagation();else if(v5(t,s),e&4&&-1<kX.indexOf(t)){for(;i!==null;){var a=Xv(i);if(a!==null&&mL(a),a=jT(t,e,n,s),a===null&&YC(t,e,s,cb,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else YC(t,e,s,null,n)}}var cb=null;function jT(t,e,n,s){if(cb=null,t=x3(s),t=Xd(t),t!==null)if(e=Fh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cb=t,null}function bL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bX()){case b3:return 1;case dL:return 4;case ab:case _X:return 16;case hL:return 536870912;default:return 16}default:return 16}}var ju=null,S3=null,b1=null;function _L(){if(b1)return b1;var t,e=S3,n=e.length,s,i="value"in ju?ju.value:ju.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===i[a-s];s++);return b1=i.slice(t,1<s?1-s:void 0)}function _1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function px(){return!0}function x5(){return!1}function Na(t){function e(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?px:x5,this.isPropagationStopped=x5,this}return ms(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=px)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=px)},persist:function(){},isPersistent:px}),e}var lm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j3=Na(lm),Yv=ms({},lm,{view:0,detail:0}),MX=Na(Yv),FC,$C,vg,m2=ms({},Yv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T3,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vg&&(vg&&t.type==="mousemove"?(FC=t.screenX-vg.screenX,$C=t.screenY-vg.screenY):$C=FC=0,vg=t),FC)},movementY:function(t){return"movementY"in t?t.movementY:$C}}),b5=Na(m2),OX=ms({},m2,{dataTransfer:0}),RX=Na(OX),LX=ms({},Yv,{relatedTarget:0}),UC=Na(LX),BX=ms({},lm,{animationName:0,elapsedTime:0,pseudoElement:0}),FX=Na(BX),$X=ms({},lm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UX=Na($X),VX=ms({},lm,{data:0}),_5=Na(VX),zX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WX(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qX[t])?!!e[t]:!1}function T3(){return WX}var GX=ms({},Yv,{key:function(t){if(t.key){var e=zX[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HX[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T3,charCode:function(t){return t.type==="keypress"?_1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YX=Na(GX),XX=ms({},m2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w5=Na(XX),KX=ms({},Yv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T3}),QX=Na(KX),ZX=ms({},lm,{propertyName:0,elapsedTime:0,pseudoElement:0}),JX=Na(ZX),eK=ms({},m2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tK=Na(eK),nK=[9,13,27,32],E3=wc&&"CompositionEvent"in window,c0=null;wc&&"documentMode"in document&&(c0=document.documentMode);var sK=wc&&"TextEvent"in window&&!c0,wL=wc&&(!E3||c0&&8<c0&&11>=c0),C5=" ",S5=!1;function CL(t,e){switch(t){case"keyup":return nK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ff=!1;function rK(t,e){switch(t){case"compositionend":return SL(e);case"keypress":return e.which!==32?null:(S5=!0,C5);case"textInput":return t=e.data,t===C5&&S5?null:t;default:return null}}function iK(t,e){if(Ff)return t==="compositionend"||!E3&&CL(t,e)?(t=_L(),b1=S3=ju=null,Ff=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wL&&e.locale!=="ko"?null:e.data;default:return null}}var aK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aK[t.type]:e==="textarea"}function jL(t,e,n,s){nL(s),e=ub(e,"onChange"),0<e.length&&(n=new j3("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var u0=null,z0=null;function oK(t){RL(t,0)}function g2(t){var e=Vf(t);if(XR(e))return t}function lK(t,e){if(t==="change")return e}var TL=!1;if(wc){var VC;if(wc){var zC="oninput"in document;if(!zC){var T5=document.createElement("div");T5.setAttribute("oninput","return;"),zC=typeof T5.oninput=="function"}VC=zC}else VC=!1;TL=VC&&(!document.documentMode||9<document.documentMode)}function E5(){u0&&(u0.detachEvent("onpropertychange",EL),z0=u0=null)}function EL(t){if(t.propertyName==="value"&&g2(z0)){var e=[];jL(e,z0,t,x3(t)),aL(oK,e)}}function cK(t,e,n){t==="focusin"?(E5(),u0=e,z0=n,u0.attachEvent("onpropertychange",EL)):t==="focusout"&&E5()}function uK(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return g2(z0)}function dK(t,e){if(t==="click")return g2(e)}function hK(t,e){if(t==="input"||t==="change")return g2(e)}function fK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Oo=typeof Object.is=="function"?Object.is:fK;function H0(t,e){if(Oo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!oT.call(e,i)||!Oo(t[i],e[i]))return!1}return!0}function N5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function k5(t,e){var n=N5(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N5(n)}}function NL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kL(){for(var t=window,e=sb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sb(t.document)}return e}function N3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pK(t){var e=kL(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NL(n.ownerDocument.documentElement,n)){if(s!==null&&N3(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!t.extend&&a>s&&(i=s,s=a,a=i),i=k5(n,a);var o=k5(n,s);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mK=wc&&"documentMode"in document&&11>=document.documentMode,$f=null,TT=null,d0=null,ET=!1;function A5(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ET||$f==null||$f!==sb(s)||(s=$f,"selectionStart"in s&&N3(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),d0&&H0(d0,s)||(d0=s,s=ub(TT,"onSelect"),0<s.length&&(e=new j3("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=$f)))}function mx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Uf={animationend:mx("Animation","AnimationEnd"),animationiteration:mx("Animation","AnimationIteration"),animationstart:mx("Animation","AnimationStart"),transitionend:mx("Transition","TransitionEnd")},HC={},AL={};wc&&(AL=document.createElement("div").style,"AnimationEvent"in window||(delete Uf.animationend.animation,delete Uf.animationiteration.animation,delete Uf.animationstart.animation),"TransitionEvent"in window||delete Uf.transitionend.transition);function v2(t){if(HC[t])return HC[t];if(!Uf[t])return t;var e=Uf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in AL)return HC[t]=e[n];return t}var DL=v2("animationend"),PL=v2("animationiteration"),IL=v2("animationstart"),ML=v2("transitionend"),OL=new Map,D5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sd(t,e){OL.set(t,e),Bh(e,[t])}for(var qC=0;qC<D5.length;qC++){var WC=D5[qC],gK=WC.toLowerCase(),vK=WC[0].toUpperCase()+WC.slice(1);sd(gK,"on"+vK)}sd(DL,"onAnimationEnd");sd(PL,"onAnimationIteration");sd(IL,"onAnimationStart");sd("dblclick","onDoubleClick");sd("focusin","onFocus");sd("focusout","onBlur");sd(ML,"onTransitionEnd");Sp("onMouseEnter",["mouseout","mouseover"]);Sp("onMouseLeave",["mouseout","mouseover"]);Sp("onPointerEnter",["pointerout","pointerover"]);Sp("onPointerLeave",["pointerout","pointerover"]);Bh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yK=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qg));function P5(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,gX(s,e,void 0,t),t.currentTarget=null}function RL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;P5(i,l,u),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;P5(i,l,u),a=c}}}if(ib)throw t=wT,ib=!1,wT=null,t}function qn(t,e){var n=e[PT];n===void 0&&(n=e[PT]=new Set);var s=t+"__bubble";n.has(s)||(LL(e,t,2,!1),n.add(s))}function GC(t,e,n){var s=0;e&&(s|=4),LL(n,t,s,e)}var gx="_reactListening"+Math.random().toString(36).slice(2);function q0(t){if(!t[gx]){t[gx]=!0,HR.forEach(function(n){n!=="selectionchange"&&(yK.has(n)||GC(n,!1,t),GC(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gx]||(e[gx]=!0,GC("selectionchange",!1,e))}}function LL(t,e,n,s){switch(bL(e)){case 1:var i=PX;break;case 4:i=IX;break;default:i=C3}n=i.bind(null,e,n,t),i=void 0,!_T||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function YC(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Xd(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}aL(function(){var u=a,d=x3(n),h=[];e:{var f=OL.get(t);if(f!==void 0){var p=j3,g=t;switch(t){case"keypress":if(_1(n)===0)break e;case"keydown":case"keyup":p=YX;break;case"focusin":g="focus",p=UC;break;case"focusout":g="blur",p=UC;break;case"beforeblur":case"afterblur":p=UC;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=b5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=RX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=QX;break;case DL:case PL:case IL:p=FX;break;case ML:p=JX;break;case"scroll":p=MX;break;case"wheel":p=tK;break;case"copy":case"cut":case"paste":p=UX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=w5}var m=(e&4)!==0,_=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var x=u,b;x!==null;){b=x;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=F0(x,y),w!=null&&m.push(W0(x,w,b)))),_)break;x=x.return}0<m.length&&(f=new p(f,g,null,n,d),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==xT&&(g=n.relatedTarget||n.fromElement)&&(Xd(g)||g[Cc]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?Xd(g):null,g!==null&&(_=Fh(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(m=b5,w="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=w5,w="onPointerLeave",y="onPointerEnter",x="pointer"),_=p==null?f:Vf(p),b=g==null?f:Vf(g),f=new m(w,x+"leave",p,n,d),f.target=_,f.relatedTarget=b,w=null,Xd(d)===u&&(m=new m(y,x+"enter",g,n,d),m.target=b,m.relatedTarget=_,w=m),_=w,p&&g)t:{for(m=p,y=g,x=0,b=m;b;b=df(b))x++;for(b=0,w=y;w;w=df(w))b++;for(;0<x-b;)m=df(m),x--;for(;0<b-x;)y=df(y),b--;for(;x--;){if(m===y||y!==null&&m===y.alternate)break t;m=df(m),y=df(y)}m=null}else m=null;p!==null&&I5(h,f,p,m,!1),g!==null&&_!==null&&I5(h,_,g,m,!0)}}e:{if(f=u?Vf(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=lK;else if(j5(f))if(TL)C=hK;else{C=uK;var j=cK}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=dK);if(C&&(C=C(t,u))){jL(h,C,n,d);break e}j&&j(t,f,u),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&pT(f,"number",f.value)}switch(j=u?Vf(u):window,t){case"focusin":(j5(j)||j.contentEditable==="true")&&($f=j,TT=u,d0=null);break;case"focusout":d0=TT=$f=null;break;case"mousedown":ET=!0;break;case"contextmenu":case"mouseup":case"dragend":ET=!1,A5(h,n,d);break;case"selectionchange":if(mK)break;case"keydown":case"keyup":A5(h,n,d)}var E;if(E3)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ff?CL(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(wL&&n.locale!=="ko"&&(Ff||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ff&&(E=_L()):(ju=d,S3="value"in ju?ju.value:ju.textContent,Ff=!0)),j=ub(u,T),0<j.length&&(T=new _5(T,t,null,n,d),h.push({event:T,listeners:j}),E?T.data=E:(E=SL(n),E!==null&&(T.data=E)))),(E=sK?rK(t,n):iK(t,n))&&(u=ub(u,"onBeforeInput"),0<u.length&&(d=new _5("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}RL(h,e)})}function W0(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ub(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=F0(t,n),a!=null&&s.unshift(W0(t,a,i)),a=F0(t,e),a!=null&&s.push(W0(t,a,i))),t=t.return}return s}function df(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function I5(t,e,n,s,i){for(var a=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,i?(c=F0(n,a),c!=null&&o.unshift(W0(n,c,l))):i||(c=F0(n,a),c!=null&&o.push(W0(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xK=/\r\n?/g,bK=/\u0000|\uFFFD/g;function M5(t){return(typeof t=="string"?t:""+t).replace(xK,`
`).replace(bK,"")}function vx(t,e,n){if(e=M5(e),M5(t)!==e&&n)throw Error(nt(425))}function db(){}var NT=null,kT=null;function AT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var DT=typeof setTimeout=="function"?setTimeout:void 0,_K=typeof clearTimeout=="function"?clearTimeout:void 0,O5=typeof Promise=="function"?Promise:void 0,wK=typeof queueMicrotask=="function"?queueMicrotask:typeof O5<"u"?function(t){return O5.resolve(null).then(t).catch(CK)}:DT;function CK(t){setTimeout(function(){throw t})}function XC(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){t.removeChild(i),V0(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);V0(e)}function Lu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function R5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cm=Math.random().toString(36).slice(2),il="__reactFiber$"+cm,G0="__reactProps$"+cm,Cc="__reactContainer$"+cm,PT="__reactEvents$"+cm,SK="__reactListeners$"+cm,jK="__reactHandles$"+cm;function Xd(t){var e=t[il];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cc]||n[il]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=R5(t);t!==null;){if(n=t[il])return n;t=R5(t)}return e}t=n,n=t.parentNode}return null}function Xv(t){return t=t[il]||t[Cc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(nt(33))}function y2(t){return t[G0]||null}var IT=[],zf=-1;function rd(t){return{current:t}}function Gn(t){0>zf||(t.current=IT[zf],IT[zf]=null,zf--)}function $n(t,e){zf++,IT[zf]=t.current,t.current=e}var qu={},Gr=rd(qu),Vi=rd(!1),bh=qu;function jp(t,e){var n=t.type.contextTypes;if(!n)return qu;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zi(t){return t=t.childContextTypes,t!=null}function hb(){Gn(Vi),Gn(Gr)}function L5(t,e,n){if(Gr.current!==qu)throw Error(nt(168));$n(Gr,e),$n(Vi,n)}function BL(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(nt(108,cX(t)||"Unknown",i));return ms({},n,s)}function fb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qu,bh=Gr.current,$n(Gr,t),$n(Vi,Vi.current),!0}function B5(t,e,n){var s=t.stateNode;if(!s)throw Error(nt(169));n?(t=BL(t,e,bh),s.__reactInternalMemoizedMergedChildContext=t,Gn(Vi),Gn(Gr),$n(Gr,t)):Gn(Vi),$n(Vi,n)}var oc=null,x2=!1,KC=!1;function FL(t){oc===null?oc=[t]:oc.push(t)}function TK(t){x2=!0,FL(t)}function id(){if(!KC&&oc!==null){KC=!0;var t=0,e=En;try{var n=oc;for(En=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}oc=null,x2=!1}catch(i){throw oc!==null&&(oc=oc.slice(t+1)),uL(b3,id),i}finally{En=e,KC=!1}}return null}var Hf=[],qf=0,pb=null,mb=0,Va=[],za=0,_h=null,fc=1,pc="";function Bd(t,e){Hf[qf++]=mb,Hf[qf++]=pb,pb=t,mb=e}function $L(t,e,n){Va[za++]=fc,Va[za++]=pc,Va[za++]=_h,_h=t;var s=fc;t=pc;var i=32-Ao(s)-1;s&=~(1<<i),n+=1;var a=32-Ao(e)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,fc=1<<32-Ao(e)+i|n<<i|s,pc=a+t}else fc=1<<a|n<<i|s,pc=t}function k3(t){t.return!==null&&(Bd(t,1),$L(t,1,0))}function A3(t){for(;t===pb;)pb=Hf[--qf],Hf[qf]=null,mb=Hf[--qf],Hf[qf]=null;for(;t===_h;)_h=Va[--za],Va[za]=null,pc=Va[--za],Va[za]=null,fc=Va[--za],Va[za]=null}var va=null,ma=null,Jn=!1,Co=null;function UL(t,e){var n=qa(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function F5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,va=t,ma=Lu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,va=t,ma=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_h!==null?{id:fc,overflow:pc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qa(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,va=t,ma=null,!0):!1;default:return!1}}function MT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function OT(t){if(Jn){var e=ma;if(e){var n=e;if(!F5(t,e)){if(MT(t))throw Error(nt(418));e=Lu(n.nextSibling);var s=va;e&&F5(t,e)?UL(s,n):(t.flags=t.flags&-4097|2,Jn=!1,va=t)}}else{if(MT(t))throw Error(nt(418));t.flags=t.flags&-4097|2,Jn=!1,va=t}}}function $5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;va=t}function yx(t){if(t!==va)return!1;if(!Jn)return $5(t),Jn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!AT(t.type,t.memoizedProps)),e&&(e=ma)){if(MT(t))throw VL(),Error(nt(418));for(;e;)UL(t,e),e=Lu(e.nextSibling)}if($5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(nt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ma=Lu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ma=null}}else ma=va?Lu(t.stateNode.nextSibling):null;return!0}function VL(){for(var t=ma;t;)t=Lu(t.nextSibling)}function Tp(){ma=va=null,Jn=!1}function D3(t){Co===null?Co=[t]:Co.push(t)}var EK=Oc.ReactCurrentBatchConfig;function yg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(nt(309));var s=n.stateNode}if(!s)throw Error(nt(147,t));var i=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(nt(284));if(!n._owner)throw Error(nt(290,t))}return t}function xx(t,e){throw t=Object.prototype.toString.call(e),Error(nt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function U5(t){var e=t._init;return e(t._payload)}function zL(t){function e(y,x){if(t){var b=y.deletions;b===null?(y.deletions=[x],y.flags|=16):b.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function s(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=Uu(y,x),y.index=0,y.sibling=null,y}function a(y,x,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<x?(y.flags|=2,x):b):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,x,b,w){return x===null||x.tag!==6?(x=sS(b,y.mode,w),x.return=y,x):(x=i(x,b),x.return=y,x)}function c(y,x,b,w){var C=b.type;return C===Bf?d(y,x,b.props.children,w,b.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===hu&&U5(C)===x.type)?(w=i(x,b.props),w.ref=yg(y,x,b),w.return=y,w):(w=N1(b.type,b.key,b.props,null,y.mode,w),w.ref=yg(y,x,b),w.return=y,w)}function u(y,x,b,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=rS(b,y.mode,w),x.return=y,x):(x=i(x,b.children||[]),x.return=y,x)}function d(y,x,b,w,C){return x===null||x.tag!==7?(x=oh(b,y.mode,w,C),x.return=y,x):(x=i(x,b),x.return=y,x)}function h(y,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=sS(""+x,y.mode,b),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case lx:return b=N1(x.type,x.key,x.props,null,y.mode,b),b.ref=yg(y,null,x),b.return=y,b;case Lf:return x=rS(x,y.mode,b),x.return=y,x;case hu:var w=x._init;return h(y,w(x._payload),b)}if(Xg(x)||fg(x))return x=oh(x,y.mode,b,null),x.return=y,x;xx(y,x)}return null}function f(y,x,b,w){var C=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:l(y,x,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lx:return b.key===C?c(y,x,b,w):null;case Lf:return b.key===C?u(y,x,b,w):null;case hu:return C=b._init,f(y,x,C(b._payload),w)}if(Xg(b)||fg(b))return C!==null?null:d(y,x,b,w,null);xx(y,b)}return null}function p(y,x,b,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,l(x,y,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lx:return y=y.get(w.key===null?b:w.key)||null,c(x,y,w,C);case Lf:return y=y.get(w.key===null?b:w.key)||null,u(x,y,w,C);case hu:var j=w._init;return p(y,x,b,j(w._payload),C)}if(Xg(w)||fg(w))return y=y.get(b)||null,d(x,y,w,C,null);xx(x,w)}return null}function g(y,x,b,w){for(var C=null,j=null,E=x,T=x=0,N=null;E!==null&&T<b.length;T++){E.index>T?(N=E,E=null):N=E.sibling;var P=f(y,E,b[T],w);if(P===null){E===null&&(E=N);break}t&&E&&P.alternate===null&&e(y,E),x=a(P,x,T),j===null?C=P:j.sibling=P,j=P,E=N}if(T===b.length)return n(y,E),Jn&&Bd(y,T),C;if(E===null){for(;T<b.length;T++)E=h(y,b[T],w),E!==null&&(x=a(E,x,T),j===null?C=E:j.sibling=E,j=E);return Jn&&Bd(y,T),C}for(E=s(y,E);T<b.length;T++)N=p(E,y,T,b[T],w),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?T:N.key),x=a(N,x,T),j===null?C=N:j.sibling=N,j=N);return t&&E.forEach(function(I){return e(y,I)}),Jn&&Bd(y,T),C}function m(y,x,b,w){var C=fg(b);if(typeof C!="function")throw Error(nt(150));if(b=C.call(b),b==null)throw Error(nt(151));for(var j=C=null,E=x,T=x=0,N=null,P=b.next();E!==null&&!P.done;T++,P=b.next()){E.index>T?(N=E,E=null):N=E.sibling;var I=f(y,E,P.value,w);if(I===null){E===null&&(E=N);break}t&&E&&I.alternate===null&&e(y,E),x=a(I,x,T),j===null?C=I:j.sibling=I,j=I,E=N}if(P.done)return n(y,E),Jn&&Bd(y,T),C;if(E===null){for(;!P.done;T++,P=b.next())P=h(y,P.value,w),P!==null&&(x=a(P,x,T),j===null?C=P:j.sibling=P,j=P);return Jn&&Bd(y,T),C}for(E=s(y,E);!P.done;T++,P=b.next())P=p(E,y,T,P.value,w),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?T:P.key),x=a(P,x,T),j===null?C=P:j.sibling=P,j=P);return t&&E.forEach(function(B){return e(y,B)}),Jn&&Bd(y,T),C}function _(y,x,b,w){if(typeof b=="object"&&b!==null&&b.type===Bf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case lx:e:{for(var C=b.key,j=x;j!==null;){if(j.key===C){if(C=b.type,C===Bf){if(j.tag===7){n(y,j.sibling),x=i(j,b.props.children),x.return=y,y=x;break e}}else if(j.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===hu&&U5(C)===j.type){n(y,j.sibling),x=i(j,b.props),x.ref=yg(y,j,b),x.return=y,y=x;break e}n(y,j);break}else e(y,j);j=j.sibling}b.type===Bf?(x=oh(b.props.children,y.mode,w,b.key),x.return=y,y=x):(w=N1(b.type,b.key,b.props,null,y.mode,w),w.ref=yg(y,x,b),w.return=y,y=w)}return o(y);case Lf:e:{for(j=b.key;x!==null;){if(x.key===j)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(y,x.sibling),x=i(x,b.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=rS(b,y.mode,w),x.return=y,y=x}return o(y);case hu:return j=b._init,_(y,x,j(b._payload),w)}if(Xg(b))return g(y,x,b,w);if(fg(b))return m(y,x,b,w);xx(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,b),x.return=y,y=x):(n(y,x),x=sS(b,y.mode,w),x.return=y,y=x),o(y)):n(y,x)}return _}var Ep=zL(!0),HL=zL(!1),gb=rd(null),vb=null,Wf=null,P3=null;function I3(){P3=Wf=vb=null}function M3(t){var e=gb.current;Gn(gb),t._currentValue=e}function RT(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function op(t,e){vb=t,P3=Wf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ui=!0),t.firstContext=null)}function Qa(t){var e=t._currentValue;if(P3!==t)if(t={context:t,memoizedValue:e,next:null},Wf===null){if(vb===null)throw Error(nt(308));Wf=t,vb.dependencies={lanes:0,firstContext:t}}else Wf=Wf.next=t;return e}var Kd=null;function O3(t){Kd===null?Kd=[t]:Kd.push(t)}function qL(t,e,n,s){var i=e.interleaved;return i===null?(n.next=n,O3(e)):(n.next=i.next,i.next=n),e.interleaved=n,Sc(t,s)}function Sc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fu=!1;function R3(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bu(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,cn&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Sc(t,n)}return i=s.interleaved,i===null?(e.next=e,O3(s)):(e.next=i.next,i.next=e),s.interleaved=e,Sc(t,n)}function w1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,_3(t,n)}}function V5(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yb(t,e,n,s){var i=t.updateQueue;fu=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,p=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,m=l;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=ms({},h,f);break e;case 2:fu=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Ch|=o,t.lanes=o,t.memoizedState=h}}function z5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(nt(191,i));i.call(s)}}}var Kv={},gl=rd(Kv),Y0=rd(Kv),X0=rd(Kv);function Qd(t){if(t===Kv)throw Error(nt(174));return t}function L3(t,e){switch($n(X0,e),$n(Y0,t),$n(gl,Kv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gT(e,t)}Gn(gl),$n(gl,e)}function Np(){Gn(gl),Gn(Y0),Gn(X0)}function GL(t){Qd(X0.current);var e=Qd(gl.current),n=gT(e,t.type);e!==n&&($n(Y0,t),$n(gl,n))}function B3(t){Y0.current===t&&(Gn(gl),Gn(Y0))}var us=rd(0);function xb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var QC=[];function F3(){for(var t=0;t<QC.length;t++)QC[t]._workInProgressVersionPrimary=null;QC.length=0}var C1=Oc.ReactCurrentDispatcher,ZC=Oc.ReactCurrentBatchConfig,wh=0,fs=null,nr=null,fr=null,bb=!1,h0=!1,K0=0,NK=0;function Fr(){throw Error(nt(321))}function $3(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Oo(t[n],e[n]))return!1;return!0}function U3(t,e,n,s,i,a){if(wh=a,fs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,C1.current=t===null||t.memoizedState===null?PK:IK,t=n(s,i),h0){a=0;do{if(h0=!1,K0=0,25<=a)throw Error(nt(301));a+=1,fr=nr=null,e.updateQueue=null,C1.current=MK,t=n(s,i)}while(h0)}if(C1.current=_b,e=nr!==null&&nr.next!==null,wh=0,fr=nr=fs=null,bb=!1,e)throw Error(nt(300));return t}function V3(){var t=K0!==0;return K0=0,t}function Qo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?fs.memoizedState=fr=t:fr=fr.next=t,fr}function Za(){if(nr===null){var t=fs.alternate;t=t!==null?t.memoizedState:null}else t=nr.next;var e=fr===null?fs.memoizedState:fr.next;if(e!==null)fr=e,nr=t;else{if(t===null)throw Error(nt(310));nr=t,t={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},fr===null?fs.memoizedState=fr=t:fr=fr.next=t}return fr}function Q0(t,e){return typeof e=="function"?e(t):e}function JC(t){var e=Za(),n=e.queue;if(n===null)throw Error(nt(311));n.lastRenderedReducer=t;var s=nr,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((wh&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,fs.lanes|=d,Ch|=d}u=u.next}while(u!==null&&u!==a);c===null?o=s:c.next=l,Oo(s,e.memoizedState)||(Ui=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){i=t;do a=i.lane,fs.lanes|=a,Ch|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function eS(t){var e=Za(),n=e.queue;if(n===null)throw Error(nt(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Oo(a,e.memoizedState)||(Ui=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function YL(){}function XL(t,e){var n=fs,s=Za(),i=e(),a=!Oo(s.memoizedState,i);if(a&&(s.memoizedState=i,Ui=!0),s=s.queue,z3(ZL.bind(null,n,s,t),[t]),s.getSnapshot!==e||a||fr!==null&&fr.memoizedState.tag&1){if(n.flags|=2048,Z0(9,QL.bind(null,n,s,i,e),void 0,null),yr===null)throw Error(nt(349));wh&30||KL(n,e,i)}return i}function KL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fs.updateQueue,e===null?(e={lastEffect:null,stores:null},fs.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QL(t,e,n,s){e.value=n,e.getSnapshot=s,JL(e)&&eB(t)}function ZL(t,e,n){return n(function(){JL(e)&&eB(t)})}function JL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Oo(t,n)}catch{return!0}}function eB(t){var e=Sc(t,1);e!==null&&Do(e,t,1,-1)}function H5(t){var e=Qo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Q0,lastRenderedState:t},e.queue=t,t=t.dispatch=DK.bind(null,fs,t),[e.memoizedState,t]}function Z0(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=fs.updateQueue,e===null?(e={lastEffect:null,stores:null},fs.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function tB(){return Za().memoizedState}function S1(t,e,n,s){var i=Qo();fs.flags|=t,i.memoizedState=Z0(1|e,n,void 0,s===void 0?null:s)}function b2(t,e,n,s){var i=Za();s=s===void 0?null:s;var a=void 0;if(nr!==null){var o=nr.memoizedState;if(a=o.destroy,s!==null&&$3(s,o.deps)){i.memoizedState=Z0(e,n,a,s);return}}fs.flags|=t,i.memoizedState=Z0(1|e,n,a,s)}function q5(t,e){return S1(8390656,8,t,e)}function z3(t,e){return b2(2048,8,t,e)}function nB(t,e){return b2(4,2,t,e)}function sB(t,e){return b2(4,4,t,e)}function rB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iB(t,e,n){return n=n!=null?n.concat([t]):null,b2(4,4,rB.bind(null,e,t),n)}function H3(){}function aB(t,e){var n=Za();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&$3(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function oB(t,e){var n=Za();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&$3(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function lB(t,e,n){return wh&21?(Oo(n,e)||(n=fL(),fs.lanes|=n,Ch|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ui=!0),t.memoizedState=n)}function kK(t,e){var n=En;En=n!==0&&4>n?n:4,t(!0);var s=ZC.transition;ZC.transition={};try{t(!1),e()}finally{En=n,ZC.transition=s}}function cB(){return Za().memoizedState}function AK(t,e,n){var s=$u(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},uB(t))dB(e,n);else if(n=qL(t,e,n,s),n!==null){var i=pi();Do(n,t,s,i),hB(n,e,s)}}function DK(t,e,n){var s=$u(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(uB(t))dB(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,Oo(l,o)){var c=e.interleaved;c===null?(i.next=i,O3(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=qL(t,e,i,s),n!==null&&(i=pi(),Do(n,t,s,i),hB(n,e,s))}}function uB(t){var e=t.alternate;return t===fs||e!==null&&e===fs}function dB(t,e){h0=bb=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hB(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,_3(t,n)}}var _b={readContext:Qa,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},PK={readContext:Qa,useCallback:function(t,e){return Qo().memoizedState=[t,e===void 0?null:e],t},useContext:Qa,useEffect:q5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,S1(4194308,4,rB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return S1(4194308,4,t,e)},useInsertionEffect:function(t,e){return S1(4,2,t,e)},useMemo:function(t,e){var n=Qo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Qo();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=AK.bind(null,fs,t),[s.memoizedState,t]},useRef:function(t){var e=Qo();return t={current:t},e.memoizedState=t},useState:H5,useDebugValue:H3,useDeferredValue:function(t){return Qo().memoizedState=t},useTransition:function(){var t=H5(!1),e=t[0];return t=kK.bind(null,t[1]),Qo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=fs,i=Qo();if(Jn){if(n===void 0)throw Error(nt(407));n=n()}else{if(n=e(),yr===null)throw Error(nt(349));wh&30||KL(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,q5(ZL.bind(null,s,a,t),[t]),s.flags|=2048,Z0(9,QL.bind(null,s,a,n,e),void 0,null),n},useId:function(){var t=Qo(),e=yr.identifierPrefix;if(Jn){var n=pc,s=fc;n=(s&~(1<<32-Ao(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=K0++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NK++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IK={readContext:Qa,useCallback:aB,useContext:Qa,useEffect:z3,useImperativeHandle:iB,useInsertionEffect:nB,useLayoutEffect:sB,useMemo:oB,useReducer:JC,useRef:tB,useState:function(){return JC(Q0)},useDebugValue:H3,useDeferredValue:function(t){var e=Za();return lB(e,nr.memoizedState,t)},useTransition:function(){var t=JC(Q0)[0],e=Za().memoizedState;return[t,e]},useMutableSource:YL,useSyncExternalStore:XL,useId:cB,unstable_isNewReconciler:!1},MK={readContext:Qa,useCallback:aB,useContext:Qa,useEffect:z3,useImperativeHandle:iB,useInsertionEffect:nB,useLayoutEffect:sB,useMemo:oB,useReducer:eS,useRef:tB,useState:function(){return eS(Q0)},useDebugValue:H3,useDeferredValue:function(t){var e=Za();return nr===null?e.memoizedState=t:lB(e,nr.memoizedState,t)},useTransition:function(){var t=eS(Q0)[0],e=Za().memoizedState;return[t,e]},useMutableSource:YL,useSyncExternalStore:XL,useId:cB,unstable_isNewReconciler:!1};function bo(t,e){if(t&&t.defaultProps){e=ms({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function LT(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ms({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _2={isMounted:function(t){return(t=t._reactInternals)?Fh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=pi(),i=$u(t),a=gc(s,i);a.payload=e,n!=null&&(a.callback=n),e=Bu(t,a,i),e!==null&&(Do(e,t,i,s),w1(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=pi(),i=$u(t),a=gc(s,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Bu(t,a,i),e!==null&&(Do(e,t,i,s),w1(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pi(),s=$u(t),i=gc(n,s);i.tag=2,e!=null&&(i.callback=e),e=Bu(t,i,s),e!==null&&(Do(e,t,s,n),w1(e,t,s))}};function W5(t,e,n,s,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,o):e.prototype&&e.prototype.isPureReactComponent?!H0(n,s)||!H0(i,a):!0}function fB(t,e,n){var s=!1,i=qu,a=e.contextType;return typeof a=="object"&&a!==null?a=Qa(a):(i=zi(e)?bh:Gr.current,s=e.contextTypes,a=(s=s!=null)?jp(t,i):qu),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_2,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function G5(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&_2.enqueueReplaceState(e,e.state,null)}function BT(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},R3(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Qa(a):(a=zi(e)?bh:Gr.current,i.context=jp(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(LT(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_2.enqueueReplaceState(i,i.state,null),yb(t,n,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function kp(t,e){try{var n="",s=e;do n+=lX(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function tS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function FT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OK=typeof WeakMap=="function"?WeakMap:Map;function pB(t,e,n){n=gc(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Cb||(Cb=!0,XT=s),FT(t,e)},n}function mB(t,e,n){n=gc(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){FT(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){FT(t,e),typeof s!="function"&&(Fu===null?Fu=new Set([this]):Fu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Y5(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new OK;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=XK.bind(null,t,e,n),e.then(t,t))}function X5(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function K5(t,e,n,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gc(-1,1),e.tag=2,Bu(n,e,1))),n.lanes|=1),t)}var RK=Oc.ReactCurrentOwner,Ui=!1;function oi(t,e,n,s){e.child=t===null?HL(e,null,n,s):Ep(e,t.child,n,s)}function Q5(t,e,n,s,i){n=n.render;var a=e.ref;return op(e,i),s=U3(t,e,n,s,a,i),n=V3(),t!==null&&!Ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jc(t,e,i)):(Jn&&n&&k3(e),e.flags|=1,oi(t,e,s,i),e.child)}function Z5(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!Z3(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,gB(t,e,a,s,i)):(t=N1(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:H0,n(o,s)&&t.ref===e.ref)return jc(t,e,i)}return e.flags|=1,t=Uu(a,s),t.ref=e.ref,t.return=e,e.child=t}function gB(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(H0(a,s)&&t.ref===e.ref)if(Ui=!1,e.pendingProps=s=a,(t.lanes&i)!==0)t.flags&131072&&(Ui=!0);else return e.lanes=t.lanes,jc(t,e,i)}return $T(t,e,n,s,i)}function vB(t,e,n){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Yf,ha),ha|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$n(Yf,ha),ha|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,$n(Yf,ha),ha|=s}else a!==null?(s=a.baseLanes|n,e.memoizedState=null):s=n,$n(Yf,ha),ha|=s;return oi(t,e,i,n),e.child}function yB(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $T(t,e,n,s,i){var a=zi(n)?bh:Gr.current;return a=jp(e,a),op(e,i),n=U3(t,e,n,s,a,i),s=V3(),t!==null&&!Ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jc(t,e,i)):(Jn&&s&&k3(e),e.flags|=1,oi(t,e,n,i),e.child)}function J5(t,e,n,s,i){if(zi(n)){var a=!0;fb(e)}else a=!1;if(op(e,i),e.stateNode===null)j1(t,e),fB(e,n,s),BT(e,n,s,i),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qa(u):(u=zi(n)?bh:Gr.current,u=jp(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&G5(e,o,s,u),fu=!1;var f=e.memoizedState;o.state=f,yb(e,s,o,i),c=e.memoizedState,l!==s||f!==c||Vi.current||fu?(typeof d=="function"&&(LT(e,n,d,s),c=e.memoizedState),(l=fu||W5(e,n,l,s,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,WL(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:bo(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qa(c):(c=zi(n)?bh:Gr.current,c=jp(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&G5(e,o,s,c),fu=!1,f=e.memoizedState,o.state=f,yb(e,s,o,i);var g=e.memoizedState;l!==h||f!==g||Vi.current||fu?(typeof p=="function"&&(LT(e,n,p,s),g=e.memoizedState),(u=fu||W5(e,n,u,s,f,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,g,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=g),o.props=s,o.state=g,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return UT(t,e,n,s,a,i)}function UT(t,e,n,s,i,a){yB(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&B5(e,n,!1),jc(t,e,a);s=e.stateNode,RK.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Ep(e,t.child,null,a),e.child=Ep(e,null,l,a)):oi(t,e,l,a),e.memoizedState=s.state,i&&B5(e,n,!0),e.child}function xB(t){var e=t.stateNode;e.pendingContext?L5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&L5(t,e.context,!1),L3(t,e.containerInfo)}function eP(t,e,n,s,i){return Tp(),D3(i),e.flags|=256,oi(t,e,n,s),e.child}var VT={dehydrated:null,treeContext:null,retryLane:0};function zT(t){return{baseLanes:t,cachePool:null,transitions:null}}function bB(t,e,n){var s=e.pendingProps,i=us.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$n(us,i&1),t===null)return OT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,a?(s=e.mode,a=e.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=S2(o,s,0,null),t=oh(t,s,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=zT(n),e.memoizedState=VT,t):q3(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return LK(t,e,o,s,l,i,n);if(a){a=s.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Uu(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Uu(l,a):(a=oh(a,o,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,o=t.child.memoizedState,o=o===null?zT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=VT,s}return a=t.child,t=a.sibling,s=Uu(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function q3(t,e){return e=S2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bx(t,e,n,s){return s!==null&&D3(s),Ep(e,t.child,null,n),t=q3(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LK(t,e,n,s,i,a,o){if(n)return e.flags&256?(e.flags&=-257,s=tS(Error(nt(422))),bx(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,i=e.mode,s=S2({mode:"visible",children:s.children},i,0,null),a=oh(a,i,o,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&Ep(e,t.child,null,o),e.child.memoizedState=zT(o),e.memoizedState=VT,a);if(!(e.mode&1))return bx(t,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(nt(419)),s=tS(a,s,void 0),bx(t,e,o,s)}if(l=(o&t.childLanes)!==0,Ui||l){if(s=yr,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Sc(t,i),Do(s,t,i,-1))}return Q3(),s=tS(Error(nt(421))),bx(t,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=KK.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ma=Lu(i.nextSibling),va=e,Jn=!0,Co=null,t!==null&&(Va[za++]=fc,Va[za++]=pc,Va[za++]=_h,fc=t.id,pc=t.overflow,_h=e),e=q3(e,s.children),e.flags|=4096,e)}function tP(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),RT(t.return,e,n)}function nS(t,e,n,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function _B(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(oi(t,e,s.children,n),s=us.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tP(t,n,e);else if(t.tag===19)tP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if($n(us,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&xb(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),nS(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xb(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}nS(e,!0,n,null,a);break;case"together":nS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function j1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ch|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(nt(153));if(e.child!==null){for(t=e.child,n=Uu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Uu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BK(t,e,n){switch(e.tag){case 3:xB(e),Tp();break;case 5:GL(e);break;case 1:zi(e.type)&&fb(e);break;case 4:L3(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;$n(gb,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?($n(us,us.current&1),e.flags|=128,null):n&e.child.childLanes?bB(t,e,n):($n(us,us.current&1),t=jc(t,e,n),t!==null?t.sibling:null);$n(us,us.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return _B(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$n(us,us.current),s)break;return null;case 22:case 23:return e.lanes=0,vB(t,e,n)}return jc(t,e,n)}var wB,HT,CB,SB;wB=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};HT=function(){};CB=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,Qd(gl.current);var a=null;switch(n){case"input":i=hT(t,i),s=hT(t,s),a=[];break;case"select":i=ms({},i,{value:void 0}),s=ms({},s,{value:void 0}),a=[];break;case"textarea":i=mT(t,i),s=mT(t,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=db)}vT(n,s);var o;n=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(L0.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(l=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(L0.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&qn("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};SB=function(t,e,n,s){n!==s&&(e.flags|=4)};function xg(t,e){if(!Jn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function $r(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function FK(t,e,n){var s=e.pendingProps;switch(A3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $r(e),null;case 1:return zi(e.type)&&hb(),$r(e),null;case 3:return s=e.stateNode,Np(),Gn(Vi),Gn(Gr),F3(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(yx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Co!==null&&(ZT(Co),Co=null))),HT(t,e),$r(e),null;case 5:B3(e);var i=Qd(X0.current);if(n=e.type,t!==null&&e.stateNode!=null)CB(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(nt(166));return $r(e),null}if(t=Qd(gl.current),yx(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[il]=e,s[G0]=a,t=(e.mode&1)!==0,n){case"dialog":qn("cancel",s),qn("close",s);break;case"iframe":case"object":case"embed":qn("load",s);break;case"video":case"audio":for(i=0;i<Qg.length;i++)qn(Qg[i],s);break;case"source":qn("error",s);break;case"img":case"image":case"link":qn("error",s),qn("load",s);break;case"details":qn("toggle",s);break;case"input":u5(s,a),qn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},qn("invalid",s);break;case"textarea":h5(s,a),qn("invalid",s)}vT(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&vx(s.textContent,l,t),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&vx(s.textContent,l,t),i=["children",""+l]):L0.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&qn("scroll",s)}switch(n){case"input":cx(s),d5(s,a,!0);break;case"textarea":cx(s),f5(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=db)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[il]=e,t[G0]=s,wB(t,e,!1,!1),e.stateNode=t;e:{switch(o=yT(n,s),n){case"dialog":qn("cancel",t),qn("close",t),i=s;break;case"iframe":case"object":case"embed":qn("load",t),i=s;break;case"video":case"audio":for(i=0;i<Qg.length;i++)qn(Qg[i],t);i=s;break;case"source":qn("error",t),i=s;break;case"img":case"image":case"link":qn("error",t),qn("load",t),i=s;break;case"details":qn("toggle",t),i=s;break;case"input":u5(t,s),i=hT(t,s),qn("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=ms({},s,{value:void 0}),qn("invalid",t);break;case"textarea":h5(t,s),i=mT(t,s),qn("invalid",t);break;default:i=s}vT(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?tL(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&JR(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&B0(t,c):typeof c=="number"&&B0(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(L0.hasOwnProperty(a)?c!=null&&a==="onScroll"&&qn("scroll",t):c!=null&&m3(t,a,c,o))}switch(n){case"input":cx(t),d5(t,s,!1);break;case"textarea":cx(t),f5(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Hu(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?sp(t,!!s.multiple,a,!1):s.defaultValue!=null&&sp(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=db)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $r(e),null;case 6:if(t&&e.stateNode!=null)SB(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(nt(166));if(n=Qd(X0.current),Qd(gl.current),yx(e)){if(s=e.stateNode,n=e.memoizedProps,s[il]=e,(a=s.nodeValue!==n)&&(t=va,t!==null))switch(t.tag){case 3:vx(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vx(s.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[il]=e,e.stateNode=s}return $r(e),null;case 13:if(Gn(us),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jn&&ma!==null&&e.mode&1&&!(e.flags&128))VL(),Tp(),e.flags|=98560,a=!1;else if(a=yx(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(nt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(nt(317));a[il]=e}else Tp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$r(e),a=!1}else Co!==null&&(ZT(Co),Co=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||us.current&1?ar===0&&(ar=3):Q3())),e.updateQueue!==null&&(e.flags|=4),$r(e),null);case 4:return Np(),HT(t,e),t===null&&q0(e.stateNode.containerInfo),$r(e),null;case 10:return M3(e.type._context),$r(e),null;case 17:return zi(e.type)&&hb(),$r(e),null;case 19:if(Gn(us),a=e.memoizedState,a===null)return $r(e),null;if(s=(e.flags&128)!==0,o=a.rendering,o===null)if(s)xg(a,!1);else{if(ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xb(t),o!==null){for(e.flags|=128,xg(a,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)a=n,t=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $n(us,us.current&1|2),e.child}t=t.sibling}a.tail!==null&&Rs()>Ap&&(e.flags|=128,s=!0,xg(a,!1),e.lanes=4194304)}else{if(!s)if(t=xb(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xg(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Jn)return $r(e),null}else 2*Rs()-a.renderingStartTime>Ap&&n!==1073741824&&(e.flags|=128,s=!0,xg(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Rs(),e.sibling=null,n=us.current,$n(us,s?n&1|2:n&1),e):($r(e),null);case 22:case 23:return K3(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ha&1073741824&&($r(e),e.subtreeFlags&6&&(e.flags|=8192)):$r(e),null;case 24:return null;case 25:return null}throw Error(nt(156,e.tag))}function $K(t,e){switch(A3(e),e.tag){case 1:return zi(e.type)&&hb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Np(),Gn(Vi),Gn(Gr),F3(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return B3(e),null;case 13:if(Gn(us),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(nt(340));Tp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gn(us),null;case 4:return Np(),null;case 10:return M3(e.type._context),null;case 22:case 23:return K3(),null;case 24:return null;default:return null}}var _x=!1,zr=!1,UK=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Gf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Cs(t,e,s)}else n.current=null}function qT(t,e,n){try{n()}catch(s){Cs(t,e,s)}}var nP=!1;function VK(t,e){if(NT=lb,t=kL(),N3(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===s&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kT={focusedElem:t,selectionRange:n},lb=!1,vt=e;vt!==null;)if(e=vt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,vt=t;else for(;vt!==null;){e=vt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,_=g.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:bo(e.type,m),_);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(nt(163))}}catch(w){Cs(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,vt=t;break}vt=e.return}return g=nP,nP=!1,g}function f0(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&qT(e,n,a)}i=i.next}while(i!==s)}}function w2(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function WT(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jB(t){var e=t.alternate;e!==null&&(t.alternate=null,jB(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[il],delete e[G0],delete e[PT],delete e[SK],delete e[jK])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TB(t){return t.tag===5||t.tag===3||t.tag===4}function sP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TB(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function GT(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=db));else if(s!==4&&(t=t.child,t!==null))for(GT(t,e,n),t=t.sibling;t!==null;)GT(t,e,n),t=t.sibling}function YT(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(YT(t,e,n),t=t.sibling;t!==null;)YT(t,e,n),t=t.sibling}var Er=null,wo=!1;function Qc(t,e,n){for(n=n.child;n!==null;)EB(t,e,n),n=n.sibling}function EB(t,e,n){if(ml&&typeof ml.onCommitFiberUnmount=="function")try{ml.onCommitFiberUnmount(p2,n)}catch{}switch(n.tag){case 5:zr||Gf(n,e);case 6:var s=Er,i=wo;Er=null,Qc(t,e,n),Er=s,wo=i,Er!==null&&(wo?(t=Er,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Er.removeChild(n.stateNode));break;case 18:Er!==null&&(wo?(t=Er,n=n.stateNode,t.nodeType===8?XC(t.parentNode,n):t.nodeType===1&&XC(t,n),V0(t)):XC(Er,n.stateNode));break;case 4:s=Er,i=wo,Er=n.stateNode.containerInfo,wo=!0,Qc(t,e,n),Er=s,wo=i;break;case 0:case 11:case 14:case 15:if(!zr&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&qT(n,e,o),i=i.next}while(i!==s)}Qc(t,e,n);break;case 1:if(!zr&&(Gf(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Cs(n,e,l)}Qc(t,e,n);break;case 21:Qc(t,e,n);break;case 22:n.mode&1?(zr=(s=zr)||n.memoizedState!==null,Qc(t,e,n),zr=s):Qc(t,e,n);break;default:Qc(t,e,n)}}function rP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UK),e.forEach(function(s){var i=QK.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}}function vo(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Er=l.stateNode,wo=!1;break e;case 3:Er=l.stateNode.containerInfo,wo=!0;break e;case 4:Er=l.stateNode.containerInfo,wo=!0;break e}l=l.return}if(Er===null)throw Error(nt(160));EB(a,o,i),Er=null,wo=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Cs(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NB(e,t),e=e.sibling}function NB(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vo(e,t),Yo(t),s&4){try{f0(3,t,t.return),w2(3,t)}catch(m){Cs(t,t.return,m)}try{f0(5,t,t.return)}catch(m){Cs(t,t.return,m)}}break;case 1:vo(e,t),Yo(t),s&512&&n!==null&&Gf(n,n.return);break;case 5:if(vo(e,t),Yo(t),s&512&&n!==null&&Gf(n,n.return),t.flags&32){var i=t.stateNode;try{B0(i,"")}catch(m){Cs(t,t.return,m)}}if(s&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&KR(i,a),yT(l,o);var u=yT(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?tL(i,h):d==="dangerouslySetInnerHTML"?JR(i,h):d==="children"?B0(i,h):m3(i,d,h,u)}switch(l){case"input":fT(i,a);break;case"textarea":QR(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?sp(i,!!a.multiple,p,!1):f!==!!a.multiple&&(a.defaultValue!=null?sp(i,!!a.multiple,a.defaultValue,!0):sp(i,!!a.multiple,a.multiple?[]:"",!1))}i[G0]=a}catch(m){Cs(t,t.return,m)}}break;case 6:if(vo(e,t),Yo(t),s&4){if(t.stateNode===null)throw Error(nt(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(m){Cs(t,t.return,m)}}break;case 3:if(vo(e,t),Yo(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{V0(e.containerInfo)}catch(m){Cs(t,t.return,m)}break;case 4:vo(e,t),Yo(t);break;case 13:vo(e,t),Yo(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Y3=Rs())),s&4&&rP(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(zr=(u=zr)||d,vo(e,t),zr=u):vo(e,t),Yo(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(vt=t,d=t.child;d!==null;){for(h=vt=d;vt!==null;){switch(f=vt,p=f.child,f.tag){case 0:case 11:case 14:case 15:f0(4,f,f.return);break;case 1:Gf(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Cs(s,n,m)}}break;case 5:Gf(f,f.return);break;case 22:if(f.memoizedState!==null){aP(h);continue}}p!==null?(p.return=f,vt=p):aP(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=eL("display",o))}catch(m){Cs(t,t.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Cs(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vo(e,t),Yo(t),s&4&&rP(t);break;case 21:break;default:vo(e,t),Yo(t)}}function Yo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(TB(n)){var s=n;break e}n=n.return}throw Error(nt(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(B0(i,""),s.flags&=-33);var a=sP(t);YT(t,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=sP(t);GT(t,l,o);break;default:throw Error(nt(161))}}catch(c){Cs(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zK(t,e,n){vt=t,kB(t)}function kB(t,e,n){for(var s=(t.mode&1)!==0;vt!==null;){var i=vt,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||_x;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||zr;l=_x;var u=zr;if(_x=o,(zr=c)&&!u)for(vt=i;vt!==null;)o=vt,c=o.child,o.tag===22&&o.memoizedState!==null?oP(i):c!==null?(c.return=o,vt=c):oP(i);for(;a!==null;)vt=a,kB(a),a=a.sibling;vt=i,_x=l,zr=u}iP(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,vt=a):iP(t)}}function iP(t){for(;vt!==null;){var e=vt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zr||w2(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!zr)if(n===null)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:bo(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&z5(e,a,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}z5(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&V0(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(nt(163))}zr||e.flags&512&&WT(e)}catch(f){Cs(e,e.return,f)}}if(e===t){vt=null;break}if(n=e.sibling,n!==null){n.return=e.return,vt=n;break}vt=e.return}}function aP(t){for(;vt!==null;){var e=vt;if(e===t){vt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,vt=n;break}vt=e.return}}function oP(t){for(;vt!==null;){var e=vt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{w2(4,e)}catch(c){Cs(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){Cs(e,i,c)}}var a=e.return;try{WT(e)}catch(c){Cs(e,a,c)}break;case 5:var o=e.return;try{WT(e)}catch(c){Cs(e,o,c)}}}catch(c){Cs(e,e.return,c)}if(e===t){vt=null;break}var l=e.sibling;if(l!==null){l.return=e.return,vt=l;break}vt=e.return}}var HK=Math.ceil,wb=Oc.ReactCurrentDispatcher,W3=Oc.ReactCurrentOwner,Ga=Oc.ReactCurrentBatchConfig,cn=0,yr=null,Ys=null,Ar=0,ha=0,Yf=rd(0),ar=0,J0=null,Ch=0,C2=0,G3=0,p0=null,Ri=null,Y3=0,Ap=1/0,ac=null,Cb=!1,XT=null,Fu=null,wx=!1,Tu=null,Sb=0,m0=0,KT=null,T1=-1,E1=0;function pi(){return cn&6?Rs():T1!==-1?T1:T1=Rs()}function $u(t){return t.mode&1?cn&2&&Ar!==0?Ar&-Ar:EK.transition!==null?(E1===0&&(E1=fL()),E1):(t=En,t!==0||(t=window.event,t=t===void 0?16:bL(t.type)),t):1}function Do(t,e,n,s){if(50<m0)throw m0=0,KT=null,Error(nt(185));Gv(t,n,s),(!(cn&2)||t!==yr)&&(t===yr&&(!(cn&2)&&(C2|=n),ar===4&&_u(t,Ar)),Hi(t,s),n===1&&cn===0&&!(e.mode&1)&&(Ap=Rs()+500,x2&&id()))}function Hi(t,e){var n=t.callbackNode;EX(t,e);var s=ob(t,t===yr?Ar:0);if(s===0)n!==null&&g5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&g5(n),e===1)t.tag===0?TK(lP.bind(null,t)):FL(lP.bind(null,t)),wK(function(){!(cn&6)&&id()}),n=null;else{switch(pL(s)){case 1:n=b3;break;case 4:n=dL;break;case 16:n=ab;break;case 536870912:n=hL;break;default:n=ab}n=LB(n,AB.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function AB(t,e){if(T1=-1,E1=0,cn&6)throw Error(nt(327));var n=t.callbackNode;if(lp()&&t.callbackNode!==n)return null;var s=ob(t,t===yr?Ar:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=jb(t,s);else{e=s;var i=cn;cn|=2;var a=PB();(yr!==t||Ar!==e)&&(ac=null,Ap=Rs()+500,ah(t,e));do try{GK();break}catch(l){DB(t,l)}while(!0);I3(),wb.current=a,cn=i,Ys!==null?e=0:(yr=null,Ar=0,e=ar)}if(e!==0){if(e===2&&(i=CT(t),i!==0&&(s=i,e=QT(t,i))),e===1)throw n=J0,ah(t,0),_u(t,s),Hi(t,Rs()),n;if(e===6)_u(t,s);else{if(i=t.current.alternate,!(s&30)&&!qK(i)&&(e=jb(t,s),e===2&&(a=CT(t),a!==0&&(s=a,e=QT(t,a))),e===1))throw n=J0,ah(t,0),_u(t,s),Hi(t,Rs()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(nt(345));case 2:Fd(t,Ri,ac);break;case 3:if(_u(t,s),(s&130023424)===s&&(e=Y3+500-Rs(),10<e)){if(ob(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){pi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=DT(Fd.bind(null,t,Ri,ac),e);break}Fd(t,Ri,ac);break;case 4:if(_u(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-Ao(s);a=1<<o,o=e[o],o>i&&(i=o),s&=~a}if(s=i,s=Rs()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*HK(s/1960))-s,10<s){t.timeoutHandle=DT(Fd.bind(null,t,Ri,ac),s);break}Fd(t,Ri,ac);break;case 5:Fd(t,Ri,ac);break;default:throw Error(nt(329))}}}return Hi(t,Rs()),t.callbackNode===n?AB.bind(null,t):null}function QT(t,e){var n=p0;return t.current.memoizedState.isDehydrated&&(ah(t,e).flags|=256),t=jb(t,e),t!==2&&(e=Ri,Ri=n,e!==null&&ZT(e)),t}function ZT(t){Ri===null?Ri=t:Ri.push.apply(Ri,t)}function qK(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!Oo(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _u(t,e){for(e&=~G3,e&=~C2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ao(e),s=1<<n;t[n]=-1,e&=~s}}function lP(t){if(cn&6)throw Error(nt(327));lp();var e=ob(t,0);if(!(e&1))return Hi(t,Rs()),null;var n=jb(t,e);if(t.tag!==0&&n===2){var s=CT(t);s!==0&&(e=s,n=QT(t,s))}if(n===1)throw n=J0,ah(t,0),_u(t,e),Hi(t,Rs()),n;if(n===6)throw Error(nt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fd(t,Ri,ac),Hi(t,Rs()),null}function X3(t,e){var n=cn;cn|=1;try{return t(e)}finally{cn=n,cn===0&&(Ap=Rs()+500,x2&&id())}}function Sh(t){Tu!==null&&Tu.tag===0&&!(cn&6)&&lp();var e=cn;cn|=1;var n=Ga.transition,s=En;try{if(Ga.transition=null,En=1,t)return t()}finally{En=s,Ga.transition=n,cn=e,!(cn&6)&&id()}}function K3(){ha=Yf.current,Gn(Yf)}function ah(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_K(n)),Ys!==null)for(n=Ys.return;n!==null;){var s=n;switch(A3(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&hb();break;case 3:Np(),Gn(Vi),Gn(Gr),F3();break;case 5:B3(s);break;case 4:Np();break;case 13:Gn(us);break;case 19:Gn(us);break;case 10:M3(s.type._context);break;case 22:case 23:K3()}n=n.return}if(yr=t,Ys=t=Uu(t.current,null),Ar=ha=e,ar=0,J0=null,G3=C2=Ch=0,Ri=p0=null,Kd!==null){for(e=0;e<Kd.length;e++)if(n=Kd[e],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}Kd=null}return t}function DB(t,e){do{var n=Ys;try{if(I3(),C1.current=_b,bb){for(var s=fs.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}bb=!1}if(wh=0,fr=nr=fs=null,h0=!1,K0=0,W3.current=null,n===null||n.return===null){ar=1,J0=e,Ys=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=Ar,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=X5(o);if(p!==null){p.flags&=-257,K5(p,o,l,a,e),p.mode&1&&Y5(a,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break e}else{if(!(e&1)){Y5(a,u,e),Q3();break e}c=Error(nt(426))}}else if(Jn&&l.mode&1){var _=X5(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),K5(_,o,l,a,e),D3(kp(c,l));break e}}a=c=kp(c,l),ar!==4&&(ar=2),p0===null?p0=[a]:p0.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=pB(a,c,e);V5(a,y);break e;case 1:l=c;var x=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Fu===null||!Fu.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=mB(a,l,e);V5(a,w);break e}}a=a.return}while(a!==null)}MB(n)}catch(C){e=C,Ys===n&&n!==null&&(Ys=n=n.return);continue}break}while(!0)}function PB(){var t=wb.current;return wb.current=_b,t===null?_b:t}function Q3(){(ar===0||ar===3||ar===2)&&(ar=4),yr===null||!(Ch&268435455)&&!(C2&268435455)||_u(yr,Ar)}function jb(t,e){var n=cn;cn|=2;var s=PB();(yr!==t||Ar!==e)&&(ac=null,ah(t,e));do try{WK();break}catch(i){DB(t,i)}while(!0);if(I3(),cn=n,wb.current=s,Ys!==null)throw Error(nt(261));return yr=null,Ar=0,ar}function WK(){for(;Ys!==null;)IB(Ys)}function GK(){for(;Ys!==null&&!yX();)IB(Ys)}function IB(t){var e=RB(t.alternate,t,ha);t.memoizedProps=t.pendingProps,e===null?MB(t):Ys=e,W3.current=null}function MB(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$K(n,e),n!==null){n.flags&=32767,Ys=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ar=6,Ys=null;return}}else if(n=FK(n,e,ha),n!==null){Ys=n;return}if(e=e.sibling,e!==null){Ys=e;return}Ys=e=t}while(e!==null);ar===0&&(ar=5)}function Fd(t,e,n){var s=En,i=Ga.transition;try{Ga.transition=null,En=1,YK(t,e,n,s)}finally{Ga.transition=i,En=s}return null}function YK(t,e,n,s){do lp();while(Tu!==null);if(cn&6)throw Error(nt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(nt(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(NX(t,a),t===yr&&(Ys=yr=null,Ar=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wx||(wx=!0,LB(ab,function(){return lp(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ga.transition,Ga.transition=null;var o=En;En=1;var l=cn;cn|=4,W3.current=null,VK(t,n),NB(n,t),pK(kT),lb=!!NT,kT=NT=null,t.current=n,zK(n),xX(),cn=l,En=o,Ga.transition=a}else t.current=n;if(wx&&(wx=!1,Tu=t,Sb=i),a=t.pendingLanes,a===0&&(Fu=null),wX(n.stateNode),Hi(t,Rs()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Cb)throw Cb=!1,t=XT,XT=null,t;return Sb&1&&t.tag!==0&&lp(),a=t.pendingLanes,a&1?t===KT?m0++:(m0=0,KT=t):m0=0,id(),null}function lp(){if(Tu!==null){var t=pL(Sb),e=Ga.transition,n=En;try{if(Ga.transition=null,En=16>t?16:t,Tu===null)var s=!1;else{if(t=Tu,Tu=null,Sb=0,cn&6)throw Error(nt(331));var i=cn;for(cn|=4,vt=t.current;vt!==null;){var a=vt,o=a.child;if(vt.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(vt=u;vt!==null;){var d=vt;switch(d.tag){case 0:case 11:case 15:f0(8,d,a)}var h=d.child;if(h!==null)h.return=d,vt=h;else for(;vt!==null;){d=vt;var f=d.sibling,p=d.return;if(jB(d),d===u){vt=null;break}if(f!==null){f.return=p,vt=f;break}vt=p}}}var g=a.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(m!==null)}}vt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,vt=o;else e:for(;vt!==null;){if(a=vt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:f0(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,vt=y;break e}vt=a.return}}var x=t.current;for(vt=x;vt!==null;){o=vt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,vt=b;else e:for(o=x;vt!==null;){if(l=vt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:w2(9,l)}}catch(C){Cs(l,l.return,C)}if(l===o){vt=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,vt=w;break e}vt=l.return}}if(cn=i,id(),ml&&typeof ml.onPostCommitFiberRoot=="function")try{ml.onPostCommitFiberRoot(p2,t)}catch{}s=!0}return s}finally{En=n,Ga.transition=e}}return!1}function cP(t,e,n){e=kp(n,e),e=pB(t,e,1),t=Bu(t,e,1),e=pi(),t!==null&&(Gv(t,1,e),Hi(t,e))}function Cs(t,e,n){if(t.tag===3)cP(t,t,n);else for(;e!==null;){if(e.tag===3){cP(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Fu===null||!Fu.has(s))){t=kp(n,t),t=mB(e,t,1),e=Bu(e,t,1),t=pi(),e!==null&&(Gv(e,1,t),Hi(e,t));break}}e=e.return}}function XK(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=pi(),t.pingedLanes|=t.suspendedLanes&n,yr===t&&(Ar&n)===n&&(ar===4||ar===3&&(Ar&130023424)===Ar&&500>Rs()-Y3?ah(t,0):G3|=n),Hi(t,e)}function OB(t,e){e===0&&(t.mode&1?(e=hx,hx<<=1,!(hx&130023424)&&(hx=4194304)):e=1);var n=pi();t=Sc(t,e),t!==null&&(Gv(t,e,n),Hi(t,n))}function KK(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OB(t,n)}function QK(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(nt(314))}s!==null&&s.delete(e),OB(t,n)}var RB;RB=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vi.current)Ui=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ui=!1,BK(t,e,n);Ui=!!(t.flags&131072)}else Ui=!1,Jn&&e.flags&1048576&&$L(e,mb,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;j1(t,e),t=e.pendingProps;var i=jp(e,Gr.current);op(e,n),i=U3(null,e,s,t,i,n);var a=V3();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zi(s)?(a=!0,fb(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,R3(e),i.updater=_2,e.stateNode=i,i._reactInternals=e,BT(e,s,t,n),e=UT(null,e,s,!0,a,n)):(e.tag=0,Jn&&a&&k3(e),oi(null,e,i,n),e=e.child),e;case 16:s=e.elementType;e:{switch(j1(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=JK(s),t=bo(s,t),i){case 0:e=$T(null,e,s,t,n);break e;case 1:e=J5(null,e,s,t,n);break e;case 11:e=Q5(null,e,s,t,n);break e;case 14:e=Z5(null,e,s,bo(s.type,t),n);break e}throw Error(nt(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:bo(s,i),$T(t,e,s,i,n);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:bo(s,i),J5(t,e,s,i,n);case 3:e:{if(xB(e),t===null)throw Error(nt(387));s=e.pendingProps,a=e.memoizedState,i=a.element,WL(t,e),yb(e,s,null,n);var o=e.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=kp(Error(nt(423)),e),e=eP(t,e,s,n,i);break e}else if(s!==i){i=kp(Error(nt(424)),e),e=eP(t,e,s,n,i);break e}else for(ma=Lu(e.stateNode.containerInfo.firstChild),va=e,Jn=!0,Co=null,n=HL(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tp(),s===i){e=jc(t,e,n);break e}oi(t,e,s,n)}e=e.child}return e;case 5:return GL(e),t===null&&OT(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,AT(s,i)?o=null:a!==null&&AT(s,a)&&(e.flags|=32),yB(t,e),oi(t,e,o,n),e.child;case 6:return t===null&&OT(e),null;case 13:return bB(t,e,n);case 4:return L3(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ep(e,null,s,n):oi(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:bo(s,i),Q5(t,e,s,i,n);case 7:return oi(t,e,e.pendingProps,n),e.child;case 8:return oi(t,e,e.pendingProps.children,n),e.child;case 12:return oi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,$n(gb,s._currentValue),s._currentValue=o,a!==null)if(Oo(a.value,o)){if(a.children===i.children&&!Vi.current){e=jc(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=gc(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),RT(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(nt(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),RT(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}oi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,op(e,n),i=Qa(i),s=s(i),e.flags|=1,oi(t,e,s,n),e.child;case 14:return s=e.type,i=bo(s,e.pendingProps),i=bo(s.type,i),Z5(t,e,s,i,n);case 15:return gB(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:bo(s,i),j1(t,e),e.tag=1,zi(s)?(t=!0,fb(e)):t=!1,op(e,n),fB(e,s,i),BT(e,s,i,n),UT(null,e,s,!0,t,n);case 19:return _B(t,e,n);case 22:return vB(t,e,n)}throw Error(nt(156,e.tag))};function LB(t,e){return uL(t,e)}function ZK(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(t,e,n,s){return new ZK(t,e,n,s)}function Z3(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JK(t){if(typeof t=="function")return Z3(t)?1:0;if(t!=null){if(t=t.$$typeof,t===v3)return 11;if(t===y3)return 14}return 2}function Uu(t,e){var n=t.alternate;return n===null?(n=qa(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function N1(t,e,n,s,i,a){var o=2;if(s=t,typeof t=="function")Z3(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bf:return oh(n.children,i,a,e);case g3:o=8,i|=8;break;case lT:return t=qa(12,n,e,i|2),t.elementType=lT,t.lanes=a,t;case cT:return t=qa(13,n,e,i),t.elementType=cT,t.lanes=a,t;case uT:return t=qa(19,n,e,i),t.elementType=uT,t.lanes=a,t;case GR:return S2(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qR:o=10;break e;case WR:o=9;break e;case v3:o=11;break e;case y3:o=14;break e;case hu:o=16,s=null;break e}throw Error(nt(130,t==null?t:typeof t,""))}return e=qa(o,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function oh(t,e,n,s){return t=qa(7,t,s,e),t.lanes=n,t}function S2(t,e,n,s){return t=qa(22,t,s,e),t.elementType=GR,t.lanes=n,t.stateNode={isHidden:!1},t}function sS(t,e,n){return t=qa(6,t,null,e),t.lanes=n,t}function rS(t,e,n){return e=qa(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eQ(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=BC(0),this.expirationTimes=BC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=BC(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function J3(t,e,n,s,i,a,o,l,c){return t=new eQ(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=qa(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},R3(a),t}function tQ(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lf,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function BB(t){if(!t)return qu;t=t._reactInternals;e:{if(Fh(t)!==t||t.tag!==1)throw Error(nt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(nt(171))}if(t.tag===1){var n=t.type;if(zi(n))return BL(t,n,e)}return e}function FB(t,e,n,s,i,a,o,l,c){return t=J3(n,s,!0,t,i,a,o,l,c),t.context=BB(null),n=t.current,s=pi(),i=$u(n),a=gc(s,i),a.callback=e??null,Bu(n,a,i),t.current.lanes=i,Gv(t,i,s),Hi(t,s),t}function j2(t,e,n,s){var i=e.current,a=pi(),o=$u(i);return n=BB(n),e.context===null?e.context=n:e.pendingContext=n,e=gc(a,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Bu(i,e,o),t!==null&&(Do(t,i,o,a),w1(t,i,o)),o}function Tb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ek(t,e){uP(t,e),(t=t.alternate)&&uP(t,e)}function nQ(){return null}var $B=typeof reportError=="function"?reportError:function(t){console.error(t)};function tk(t){this._internalRoot=t}T2.prototype.render=tk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(nt(409));j2(t,e,null,null)};T2.prototype.unmount=tk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sh(function(){j2(null,t,null,null)}),e[Cc]=null}};function T2(t){this._internalRoot=t}T2.prototype.unstable_scheduleHydration=function(t){if(t){var e=vL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bu.length&&e!==0&&e<bu[n].priority;n++);bu.splice(n,0,t),n===0&&xL(t)}};function nk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function E2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dP(){}function sQ(t,e,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var u=Tb(o);a.call(u)}}var o=FB(e,s,t,0,null,!1,!1,"",dP);return t._reactRootContainer=o,t[Cc]=o.current,q0(t.nodeType===8?t.parentNode:t),Sh(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var u=Tb(c);l.call(u)}}var c=J3(t,0,!1,null,null,!1,!1,"",dP);return t._reactRootContainer=c,t[Cc]=c.current,q0(t.nodeType===8?t.parentNode:t),Sh(function(){j2(e,c,n,s)}),c}function N2(t,e,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Tb(o);l.call(c)}}j2(e,o,t,i)}else o=sQ(n,e,t,i,s);return Tb(o)}mL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kg(e.pendingLanes);n!==0&&(_3(e,n|1),Hi(e,Rs()),!(cn&6)&&(Ap=Rs()+500,id()))}break;case 13:Sh(function(){var s=Sc(t,1);if(s!==null){var i=pi();Do(s,t,1,i)}}),ek(t,1)}};w3=function(t){if(t.tag===13){var e=Sc(t,134217728);if(e!==null){var n=pi();Do(e,t,134217728,n)}ek(t,134217728)}};gL=function(t){if(t.tag===13){var e=$u(t),n=Sc(t,e);if(n!==null){var s=pi();Do(n,t,e,s)}ek(t,e)}};vL=function(){return En};yL=function(t,e){var n=En;try{return En=t,e()}finally{En=n}};bT=function(t,e,n){switch(e){case"input":if(fT(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=y2(s);if(!i)throw Error(nt(90));XR(s),fT(s,i)}}}break;case"textarea":QR(t,n);break;case"select":e=n.value,e!=null&&sp(t,!!n.multiple,e,!1)}};rL=X3;iL=Sh;var rQ={usingClientEntryPoint:!1,Events:[Xv,Vf,y2,nL,sL,X3]},bg={findFiberByHostInstance:Xd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iQ={bundleType:bg.bundleType,version:bg.version,rendererPackageName:bg.rendererPackageName,rendererConfig:bg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lL(t),t===null?null:t.stateNode},findFiberByHostInstance:bg.findFiberByHostInstance||nQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cx.isDisabled&&Cx.supportsFiber)try{p2=Cx.inject(iQ),ml=Cx}catch{}}Ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rQ;Ea.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nk(e))throw Error(nt(200));return tQ(t,e,null,n)};Ea.createRoot=function(t,e){if(!nk(t))throw Error(nt(299));var n=!1,s="",i=$B;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=J3(t,1,!1,null,null,n,!1,s,i),t[Cc]=e.current,q0(t.nodeType===8?t.parentNode:t),new tk(e)};Ea.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(nt(188)):(t=Object.keys(t).join(","),Error(nt(268,t)));return t=lL(e),t=t===null?null:t.stateNode,t};Ea.flushSync=function(t){return Sh(t)};Ea.hydrate=function(t,e,n){if(!E2(e))throw Error(nt(200));return N2(null,t,e,!0,n)};Ea.hydrateRoot=function(t,e,n){if(!nk(t))throw Error(nt(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=$B;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=FB(e,null,t,1,n??null,i,!1,a,o),t[Cc]=e.current,q0(t),s)for(t=0;t<s.length;t++)n=s[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new T2(e)};Ea.render=function(t,e,n){if(!E2(e))throw Error(nt(200));return N2(null,t,e,!1,n)};Ea.unmountComponentAtNode=function(t){if(!E2(t))throw Error(nt(40));return t._reactRootContainer?(Sh(function(){N2(null,null,t,!1,function(){t._reactRootContainer=null,t[Cc]=null})}),!0):!1};Ea.unstable_batchedUpdates=X3;Ea.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!E2(n))throw Error(nt(200));if(t==null||t._reactInternals===void 0)throw Error(nt(38));return N2(t,e,n,!1,s)};Ea.version="18.3.1-next-f1338f8080-20240426";function UB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UB)}catch(t){console.error(t)}}UB(),UR.exports=Ea;var on=UR.exports;const Sx=In(on);var hP=on;Cp.createRoot=hP.createRoot,Cp.hydrateRoot=hP.hydrateRoot;var VB={exports:{}},zB={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv=v;function aQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oQ=typeof Object.is=="function"?Object.is:aQ,lQ=Qv.useSyncExternalStore,cQ=Qv.useRef,uQ=Qv.useEffect,dQ=Qv.useMemo,hQ=Qv.useDebugValue;zB.useSyncExternalStoreWithSelector=function(t,e,n,s,i){var a=cQ(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=dQ(function(){function c(p){if(!u){if(u=!0,d=p,p=s(p),i!==void 0&&o.hasValue){var g=o.value;if(i(g,p))return h=g}return h=p}if(g=h,oQ(d,p))return g;var m=s(p);return i!==void 0&&i(g,m)?g:(d=p,h=m)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,n,s,i]);var l=lQ(t,a[0],a[1]);return uQ(function(){o.hasValue=!0,o.value=l},[l]),hQ(l),l};VB.exports=zB;var fQ=VB.exports,ga="default"in aT?Xe:aT,fP=Symbol.for("react-redux-context"),pP=typeof globalThis<"u"?globalThis:{};function pQ(){if(!ga.createContext)return{};const t=pP[fP]??(pP[fP]=new Map);let e=t.get(ga.createContext);return e||(e=ga.createContext(null),t.set(ga.createContext,e)),e}var Wu=pQ(),mQ=()=>{throw new Error("uSES not initialized!")};function sk(t=Wu){return function(){return ga.useContext(t)}}var HB=sk(),qB=mQ,gQ=t=>{qB=t},vQ=(t,e)=>t===e;function yQ(t=Wu){const e=t===Wu?HB:sk(t),n=(s,i={})=>{const{equalityFn:a=vQ,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:c,getServerState:u,stabilityCheck:d,identityFunctionCheck:h}=e();ga.useRef(!0);const f=ga.useCallback({[s.name](g){return s(g)}}[s.name],[s,d,o.stabilityCheck]),p=qB(c.addNestedSub,l.getState,u||l.getState,f,a);return ga.useDebugValue(p),p};return Object.assign(n,{withTypes:()=>n}),n}var ue=yQ();function xQ(t){t()}function bQ(){let t=null,e=null;return{clear(){t=null,e=null},notify(){xQ(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!s||t===null||(s=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var mP={notify(){},get:()=>[]};function _Q(t,e){let n,s=mP,i=0,a=!1;function o(m){d();const _=s.subscribe(m);let y=!1;return()=>{y||(y=!0,_(),h())}}function l(){s.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return a}function d(){i++,n||(n=t.subscribe(c),s=bQ())}function h(){i--,n&&i===0&&(n(),n=void 0,s.clear(),s=mP)}function f(){a||(a=!0,d())}function p(){a&&(a=!1,h())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>s};return g}var wQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CQ=typeof navigator<"u"&&navigator.product==="ReactNative",SQ=wQ||CQ?ga.useLayoutEffect:ga.useEffect;function jQ({store:t,context:e,children:n,serverState:s,stabilityCheck:i="once",identityFunctionCheck:a="once"}){const o=ga.useMemo(()=>{const u=_Q(t);return{store:t,subscription:u,getServerState:s?()=>s:void 0,stabilityCheck:i,identityFunctionCheck:a}},[t,s,i,a]),l=ga.useMemo(()=>t.getState(),[t]);SQ(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),l!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,l]);const c=e||Wu;return ga.createElement(c.Provider,{value:o},n)}var TQ=jQ;function WB(t=Wu){const e=t===Wu?HB:sk(t),n=()=>{const{store:s}=e();return s};return Object.assign(n,{withTypes:()=>n}),n}var EQ=WB();function NQ(t=Wu){const e=t===Wu?EQ:WB(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Dt=NQ();gQ(fQ.useSyncExternalStoreWithSelector);function kQ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var GB={exports:{}},zs=GB.exports={},Zo,Jo;function JT(){throw new Error("setTimeout has not been defined")}function eE(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Zo=setTimeout:Zo=JT}catch{Zo=JT}try{typeof clearTimeout=="function"?Jo=clearTimeout:Jo=eE}catch{Jo=eE}})();function YB(t){if(Zo===setTimeout)return setTimeout(t,0);if((Zo===JT||!Zo)&&setTimeout)return Zo=setTimeout,setTimeout(t,0);try{return Zo(t,0)}catch{try{return Zo.call(null,t,0)}catch{return Zo.call(this,t,0)}}}function AQ(t){if(Jo===clearTimeout)return clearTimeout(t);if((Jo===eE||!Jo)&&clearTimeout)return Jo=clearTimeout,clearTimeout(t);try{return Jo(t)}catch{try{return Jo.call(null,t)}catch{return Jo.call(this,t)}}}var mc=[],cp=!1,Zd,k1=-1;function DQ(){!cp||!Zd||(cp=!1,Zd.length?mc=Zd.concat(mc):k1=-1,mc.length&&XB())}function XB(){if(!cp){var t=YB(DQ);cp=!0;for(var e=mc.length;e;){for(Zd=mc,mc=[];++k1<e;)Zd&&Zd[k1].run();k1=-1,e=mc.length}Zd=null,cp=!1,AQ(t)}}zs.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];mc.push(new KB(t,e)),mc.length===1&&!cp&&YB(XB)};function KB(t,e){this.fun=t,this.array=e}KB.prototype.run=function(){this.fun.apply(null,this.array)};zs.title="browser";zs.browser=!0;zs.env={};zs.argv=[];zs.version="";zs.versions={};function Rc(){}zs.on=Rc;zs.addListener=Rc;zs.once=Rc;zs.off=Rc;zs.removeListener=Rc;zs.removeAllListeners=Rc;zs.emit=Rc;zs.prependListener=Rc;zs.prependOnceListener=Rc;zs.listeners=function(t){return[]};zs.binding=function(t){throw new Error("process.binding is not supported")};zs.cwd=function(){return"/"};zs.chdir=function(t){throw new Error("process.chdir is not supported")};zs.umask=function(){return 0};var PQ=GB.exports;const Tc=kQ(PQ);function Tr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var IQ=typeof Symbol=="function"&&Symbol.observable||"@@observable",gP=IQ,iS=()=>Math.random().toString(36).substring(7).split("").join("."),MQ={INIT:`@@redux/INIT${iS()}`,REPLACE:`@@redux/REPLACE${iS()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${iS()}`},Eb=MQ;function rk(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function QB(t,e,n){if(typeof t!="function")throw new Error(Tr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Tr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Tr(1));return n(QB)(t,e)}let s=t,i=e,a=new Map,o=a,l=0,c=!1;function u(){o===a&&(o=new Map,a.forEach((_,y)=>{o.set(y,_)}))}function d(){if(c)throw new Error(Tr(3));return i}function h(_){if(typeof _!="function")throw new Error(Tr(4));if(c)throw new Error(Tr(5));let y=!0;u();const x=l++;return o.set(x,_),function(){if(y){if(c)throw new Error(Tr(6));y=!1,u(),o.delete(x),a=null}}}function f(_){if(!rk(_))throw new Error(Tr(7));if(typeof _.type>"u")throw new Error(Tr(8));if(typeof _.type!="string")throw new Error(Tr(17));if(c)throw new Error(Tr(9));try{c=!0,i=s(i,_)}finally{c=!1}return(a=o).forEach(x=>{x()}),_}function p(_){if(typeof _!="function")throw new Error(Tr(10));s=_,f({type:Eb.REPLACE})}function g(){const _=h;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Tr(11));function x(){const w=y;w.next&&w.next(d())}return x(),{unsubscribe:_(x)}},[gP](){return this}}}return f({type:Eb.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:p,[gP]:g}}function OQ(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Eb.INIT})>"u")throw new Error(Tr(12));if(typeof n(void 0,{type:Eb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tr(13))})}function RQ(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(n[o]=t[o])}const s=Object.keys(n);let i;try{OQ(n)}catch(a){i=a}return function(o={},l){if(i)throw i;let c=!1;const u={};for(let d=0;d<s.length;d++){const h=s[d],f=n[h],p=o[h],g=f(p,l);if(typeof g>"u")throw l&&l.type,new Error(Tr(14));u[h]=g,c=c||g!==p}return c=c||s.length!==Object.keys(o).length,c?u:o}}function Nb(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...s)=>e(n(...s)))}function LQ(...t){return e=>(n,s)=>{const i=e(n,s);let a=()=>{throw new Error(Tr(15))};const o={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},l=t.map(c=>c(o));return a=Nb(...l)(i.dispatch),{...i,dispatch:a}}}function BQ(t){return rk(t)&&"type"in t&&typeof t.type=="string"}var ZB=Symbol.for("immer-nothing"),vP=Symbol.for("immer-draftable"),ba=Symbol.for("immer-state");function So(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Dp=Object.getPrototypeOf;function Gu(t){return!!t&&!!t[ba]}function Ec(t){var e;return t?JB(t)||Array.isArray(t)||!!t[vP]||!!((e=t.constructor)!=null&&e[vP])||A2(t)||D2(t):!1}var FQ=Object.prototype.constructor.toString();function JB(t){if(!t||typeof t!="object")return!1;const e=Dp(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===FQ}function kb(t,e){k2(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,s)=>e(s,n,t))}function k2(t){const e=t[ba];return e?e.type_:Array.isArray(t)?1:A2(t)?2:D2(t)?3:0}function tE(t,e){return k2(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function eF(t,e,n){const s=k2(t);s===2?t.set(e,n):s===3?t.add(n):t[e]=n}function $Q(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function A2(t){return t instanceof Map}function D2(t){return t instanceof Set}function $d(t){return t.copy_||t.base_}function nE(t,e){if(A2(t))return new Map(t);if(D2(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=JB(t);if(e===!0||e==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(t);delete s[ba];let i=Reflect.ownKeys(s);for(let a=0;a<i.length;a++){const o=i[a],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(Dp(t),s)}else{const s=Dp(t);if(s!==null&&n)return{...t};const i=Object.create(s);return Object.assign(i,t)}}function ik(t,e=!1){return P2(t)||Gu(t)||!Ec(t)||(k2(t)>1&&(t.set=t.add=t.clear=t.delete=UQ),Object.freeze(t),e&&Object.entries(t).forEach(([n,s])=>ik(s,!0))),t}function UQ(){So(2)}function P2(t){return Object.isFrozen(t)}var VQ={};function jh(t){const e=VQ[t];return e||So(0,t),e}var ev;function tF(){return ev}function zQ(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yP(t,e){e&&(jh("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function sE(t){rE(t),t.drafts_.forEach(HQ),t.drafts_=null}function rE(t){t===ev&&(ev=t.parent_)}function xP(t){return ev=zQ(ev,t)}function HQ(t){const e=t[ba];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function bP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ba].modified_&&(sE(e),So(4)),Ec(t)&&(t=Ab(e,t),e.parent_||Db(e,t)),e.patches_&&jh("Patches").generateReplacementPatches_(n[ba].base_,t,e.patches_,e.inversePatches_)):t=Ab(e,n,[]),sE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==ZB?t:void 0}function Ab(t,e,n){if(P2(e))return e;const s=e[ba];if(!s)return kb(e,(i,a)=>_P(t,s,e,i,a,n)),e;if(s.scope_!==t)return e;if(!s.modified_)return Db(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let a=i,o=!1;s.type_===3&&(a=new Set(i),i.clear(),o=!0),kb(a,(l,c)=>_P(t,s,i,l,c,n,o)),Db(t,i,!1),n&&t.patches_&&jh("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function _P(t,e,n,s,i,a,o){if(Gu(i)){const l=a&&e&&e.type_!==3&&!tE(e.assigned_,s)?a.concat(s):void 0,c=Ab(t,i,l);if(eF(n,s,c),Gu(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Ec(i)&&!P2(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ab(t,i),(!e||!e.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&Db(t,i)}}function Db(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ik(e,n)}function qQ(t,e){const n=Array.isArray(t),s={type_:n?1:0,scope_:e?e.scope_:tF(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=s,a=ak;n&&(i=[s],a=tv);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return s.draft_=l,s.revoke_=o,l}var ak={get(t,e){if(e===ba)return t;const n=$d(t);if(!tE(n,e))return WQ(t,n,e);const s=n[e];return t.finalized_||!Ec(s)?s:s===aS(t.base_,e)?(oS(t),t.copy_[e]=aE(s,t)):s},has(t,e){return e in $d(t)},ownKeys(t){return Reflect.ownKeys($d(t))},set(t,e,n){const s=nF($d(t),e);if(s!=null&&s.set)return s.set.call(t.draft_,n),!0;if(!t.modified_){const i=aS($d(t),e),a=i==null?void 0:i[ba];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if($Q(n,i)&&(n!==void 0||tE(t.base_,e)))return!0;oS(t),iE(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return aS(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,oS(t),iE(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=$d(t),s=Reflect.getOwnPropertyDescriptor(n,e);return s&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:s.enumerable,value:n[e]}},defineProperty(){So(11)},getPrototypeOf(t){return Dp(t.base_)},setPrototypeOf(){So(12)}},tv={};kb(ak,(t,e)=>{tv[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});tv.deleteProperty=function(t,e){return tv.set.call(this,t,e,void 0)};tv.set=function(t,e,n){return ak.set.call(this,t[0],e,n,t[0])};function aS(t,e){const n=t[ba];return(n?$d(n):t)[e]}function WQ(t,e,n){var i;const s=nF(e,n);return s?"value"in s?s.value:(i=s.get)==null?void 0:i.call(t.draft_):void 0}function nF(t,e){if(!(e in t))return;let n=Dp(t);for(;n;){const s=Object.getOwnPropertyDescriptor(n,e);if(s)return s;n=Dp(n)}}function iE(t){t.modified_||(t.modified_=!0,t.parent_&&iE(t.parent_))}function oS(t){t.copy_||(t.copy_=nE(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var GQ=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,s)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const o=this;return function(c=a,...u){return o.produce(c,d=>n.call(this,d,...u))}}typeof n!="function"&&So(6),s!==void 0&&typeof s!="function"&&So(7);let i;if(Ec(e)){const a=xP(this),o=aE(e,void 0);let l=!0;try{i=n(o),l=!1}finally{l?sE(a):rE(a)}return yP(a,s),bP(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===ZB&&(i=void 0),this.autoFreeze_&&ik(i,!0),s){const a=[],o=[];jh("Patches").generateReplacementPatches_(e,i,a,o),s(a,o)}return i}else So(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let s,i;return[this.produce(e,n,(o,l)=>{s=o,i=l}),s,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ec(t)||So(8),Gu(t)&&(t=sF(t));const e=xP(this),n=aE(t,void 0);return n[ba].isManual_=!0,rE(e),n}finishDraft(t,e){const n=t&&t[ba];(!n||!n.isManual_)&&So(9);const{scope_:s}=n;return yP(s,e),bP(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const s=jh("Patches").applyPatches_;return Gu(t)?s(t,e):this.produce(t,i=>s(i,e))}};function aE(t,e){const n=A2(t)?jh("MapSet").proxyMap_(t,e):D2(t)?jh("MapSet").proxySet_(t,e):qQ(t,e);return(e?e.scope_:tF()).drafts_.push(n),n}function sF(t){return Gu(t)||So(10,t),rF(t)}function rF(t){if(!Ec(t)||P2(t))return t;const e=t[ba];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=nE(t,e.scope_.immer_.useStrictShallowCopy_)}else n=nE(t,!0);return kb(n,(s,i)=>{eF(n,s,rF(i))}),e&&(e.finalized_=!1),n}var _a=new GQ,iF=_a.produce;_a.produceWithPatches.bind(_a);_a.setAutoFreeze.bind(_a);_a.setUseStrictShallowCopy.bind(_a);_a.applyPatches.bind(_a);_a.createDraft.bind(_a);_a.finishDraft.bind(_a);function YQ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function XQ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function KQ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${e}[${n}]`)}}var wP=t=>Array.isArray(t)?t:[t];function QQ(t){const e=Array.isArray(t[0])?t[0]:t;return KQ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ZQ(t,e){const n=[],{length:s}=t;for(let i=0;i<s;i++)n.push(t[i].apply(null,e));return n}var JQ=class{constructor(t){this.value=t}deref(){return this.value}},eZ=typeof WeakRef<"u"?WeakRef:JQ,tZ=0,CP=1;function jx(){return{s:tZ,v:void 0,o:null,p:null}}function ok(t,e={}){let n=jx();const{resultEqualityCheck:s}=e;let i,a=0;function o(){var h;let l=n;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let m=l.o;m===null&&(l.o=m=new WeakMap);const _=m.get(g);_===void 0?(l=jx(),m.set(g,l)):l=_}else{let m=l.p;m===null&&(l.p=m=new Map);const _=m.get(g);_===void 0?(l=jx(),m.set(g,l)):l=_}}const u=l;let d;if(l.s===CP)d=l.v;else if(d=t.apply(null,arguments),a++,s){const f=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;f!=null&&s(f,d)&&(d=f,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new eZ(d):d}return u.s=CP,u.v=d,d}return o.clearCache=()=>{n=jx(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function aF(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,s=(...i)=>{let a=0,o=0,l,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),YQ(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...n,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:p=ok,argsMemoizeOptions:g=[],devModeChecks:m={}}=d,_=wP(f),y=wP(g),x=QQ(i),b=h(function(){return a++,u.apply(null,arguments)},..._),w=p(function(){o++;const j=ZQ(x,arguments);return l=b.apply(null,j),l},...y);return Object.assign(w,{resultFunc:u,memoizedResultFunc:b,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:p})};return Object.assign(s,{withTypes:()=>s}),s}var I2=aF(ok),nZ=Object.assign((t,e=I2)=>{XQ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),s=n.map(a=>t[a]);return e(s,(...a)=>a.reduce((o,l,c)=>(o[n[c]]=l,o),{}))},{withTypes:()=>nZ});function oF(t){return({dispatch:n,getState:s})=>i=>a=>typeof a=="function"?a(n,s,t):i(a)}var sZ=oF(),rZ=oF,iZ=(...t)=>{const e=aF(...t),n=Object.assign((...s)=>{const i=e(...s),a=(o,...l)=>i(Gu(o)?sF(o):o,...l);return Object.assign(a,i),a},{withTypes:()=>n});return n};iZ(ok);var aZ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Nb:Nb.apply(null,arguments)},oZ=t=>t&&typeof t.match=="function";function vc(t,e){function n(...s){if(e){let i=e(...s);if(!i)throw new Error(qi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:s[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=s=>BQ(s)&&s.type===t,n}var lF=class Zg extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Zg.prototype)}static get[Symbol.species](){return Zg}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Zg(...e[0].concat(this)):new Zg(...e.concat(this))}};function SP(t){return Ec(t)?iF(t,()=>{}):t}function jP(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(qi(10));const s=n.insert(e,t);return t.set(e,s),s}function lZ(t){return typeof t=="boolean"}var cZ=()=>function(e){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new lF;return n&&(lZ(n)?o.push(sZ):o.push(rZ(n.extraArgument))),o},uZ="RTK_autoBatch",cF=t=>e=>{setTimeout(e,t)},dZ=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:cF(10),hZ=(t={type:"raf"})=>e=>(...n)=>{const s=e(...n);let i=!0,a=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?dZ:t.type==="callback"?t.queueNotification:cF(t.timeout),u=()=>{o=!1,a&&(a=!1,l.forEach(d=>d()))};return Object.assign({},s,{subscribe(d){const h=()=>i&&d(),f=s.subscribe(h);return l.add(d),()=>{f(),l.delete(d)}},dispatch(d){var h;try{return i=!((h=d==null?void 0:d.meta)!=null&&h[uZ]),a=!i,a&&(o||(o=!0,c(u))),s.dispatch(d)}finally{i=!0}}})},fZ=t=>function(n){const{autoBatch:s=!0}=n??{};let i=new lF(t);return s&&i.push(hZ(typeof s=="object"?s:void 0)),i},pZ=!0;function mZ(t){const e=cZ(),{reducer:n=void 0,middleware:s,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(rk(n))l=RQ(n);else throw new Error(qi(1));let c;typeof s=="function"?c=s(e):c=e();let u=Nb;i&&(u=aZ({trace:!pZ,...typeof i=="object"&&i}));const d=LQ(...c),h=fZ(d);let f=typeof o=="function"?o(h):h();const p=u(...f);return QB(l,a,p)}function uF(t){const e={},n=[];let s;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(qi(28));if(l in e)throw new Error(qi(29));return e[l]=o,i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return s=a,i}};return t(i),[e,n,s]}function gZ(t){return typeof t=="function"}function vZ(t,e){let[n,s,i]=uF(e),a;if(gZ(t))a=()=>SP(t());else{const l=SP(t);a=()=>l}function o(l=a(),c){let u=[n[c.type],...s.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[i]),u.reduce((d,h)=>{if(h)if(Gu(d)){const p=h(d,c);return p===void 0?d:p}else{if(Ec(d))return iF(d,f=>h(f,c));{const f=h(d,c);if(f===void 0){if(d===null)return d;throw new Error(qi(9))}return f}}return d},l)}return o.getInitialState=a,o}var yZ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dF=(t=21)=>{let e="",n=t;for(;n--;)e+=yZ[Math.random()*64|0];return e},xZ=(t,e)=>oZ(t)?t.match(e):t(e);function bZ(...t){return e=>t.some(n=>xZ(n,e))}var _Z=["name","message","stack","code"],lS=class{constructor(t,e){PC(this,"_type");this.payload=t,this.meta=e}},TP=class{constructor(t,e){PC(this,"_type");this.payload=t,this.meta=e}},wZ=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of _Z)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},CZ=(()=>{function t(e,n,s){const i=vc(e+"/fulfilled",(c,u,d,h)=>({payload:c,meta:{...h||{},arg:d,requestId:u,requestStatus:"fulfilled"}})),a=vc(e+"/pending",(c,u,d)=>({payload:void 0,meta:{...d||{},arg:u,requestId:c,requestStatus:"pending"}})),o=vc(e+"/rejected",(c,u,d,h,f)=>({payload:h,error:(s&&s.serializeError||wZ)(c||"Rejected"),meta:{...f||{},arg:d,requestId:u,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c){return(u,d,h)=>{const f=s!=null&&s.idGenerator?s.idGenerator(c):dF(),p=new AbortController;let g,m;function _(x){m=x,p.abort()}const y=async function(){var w,C;let x;try{let j=(w=s==null?void 0:s.condition)==null?void 0:w.call(s,c,{getState:d,extra:h});if(jZ(j)&&(j=await j),j===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const E=new Promise((T,N)=>{g=()=>{N({name:"AbortError",message:m||"Aborted"})},p.signal.addEventListener("abort",g)});u(a(f,c,(C=s==null?void 0:s.getPendingMeta)==null?void 0:C.call(s,{requestId:f,arg:c},{getState:d,extra:h}))),x=await Promise.race([E,Promise.resolve(n(c,{dispatch:u,getState:d,extra:h,requestId:f,signal:p.signal,abort:_,rejectWithValue:(T,N)=>new lS(T,N),fulfillWithValue:(T,N)=>new TP(T,N)})).then(T=>{if(T instanceof lS)throw T;return T instanceof TP?i(T.payload,f,c,T.meta):i(T,f,c)})])}catch(j){x=j instanceof lS?o(null,f,c,j.payload,j.meta):o(j,f,c)}finally{g&&p.signal.removeEventListener("abort",g)}return s&&!s.dispatchConditionRejection&&o.match(x)&&x.meta.condition||u(x),x}();return Object.assign(y,{abort:_,requestId:f,arg:c,unwrap(){return y.then(SZ)}})}}return Object.assign(l,{pending:a,rejected:o,fulfilled:i,settled:bZ(o,i),typePrefix:e})}return t.withTypes=()=>t,t})();function SZ(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function jZ(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var TZ=Symbol.for("rtk-slice-createasyncthunk");function EZ(t,e){return`${t}/${e}`}function NZ({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[TZ];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(qi(11));typeof Tc<"u";const l=(typeof i.reducers=="function"?i.reducers(AZ()):i.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(b,w){const C=typeof b=="string"?b:b.type;if(!C)throw new Error(qi(12));if(C in u.sliceCaseReducersByType)throw new Error(qi(13));return u.sliceCaseReducersByType[C]=w,d},addMatcher(b,w){return u.sliceMatchers.push({matcher:b,reducer:w}),d},exposeAction(b,w){return u.actionCreators[b]=w,d},exposeCaseReducer(b,w){return u.sliceCaseReducersByName[b]=w,d}};c.forEach(b=>{const w=l[b],C={reducerName:b,type:EZ(a,b),createNotation:typeof i.reducers=="function"};PZ(w)?MZ(C,w,d,e):DZ(C,w,d)});function h(){const[b={},w=[],C=void 0]=typeof i.extraReducers=="function"?uF(i.extraReducers):[i.extraReducers],j={...b,...u.sliceCaseReducersByType};return vZ(i.initialState,E=>{for(let T in j)E.addCase(T,j[T]);for(let T of u.sliceMatchers)E.addMatcher(T.matcher,T.reducer);for(let T of w)E.addMatcher(T.matcher,T.reducer);C&&E.addDefaultCase(C)})}const f=b=>b,p=new Map;let g;function m(b,w){return g||(g=h()),g(b,w)}function _(){return g||(g=h()),g.getInitialState()}function y(b,w=!1){function C(E){let T=E[b];return typeof T>"u"&&w&&(T=_()),T}function j(E=f){const T=jP(p,w,{insert:()=>new WeakMap});return jP(T,E,{insert:()=>{const N={};for(const[P,I]of Object.entries(i.selectors??{}))N[P]=kZ(I,E,_,w);return N}})}return{reducerPath:b,getSelectors:j,get selectors(){return j(C)},selectSlice:C}}const x={name:a,reducer:m,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:_,...y(o),injectInto(b,{reducerPath:w,...C}={}){const j=w??o;return b.inject({reducerPath:j,reducer:m},C),{...x,...y(j,!0)}}};return x}}function kZ(t,e,n,s){function i(a,...o){let l=e(a);return typeof l>"u"&&s&&(l=n()),t(l,...o)}return i.unwrapped=t,i}var ad=NZ();function AZ(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function DZ({type:t,reducerName:e,createNotation:n},s,i){let a,o;if("reducer"in s){if(n&&!IZ(s))throw new Error(qi(17));a=s.reducer,o=s.prepare}else a=s;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?vc(t,o):vc(t))}function PZ(t){return t._reducerDefinitionType==="asyncThunk"}function IZ(t){return t._reducerDefinitionType==="reducerWithPrepare"}function MZ({type:t,reducerName:e},n,s,i){if(!i)throw new Error(qi(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=n,h=i(t,a,d);s.exposeAction(e,h),o&&s.addCase(h.fulfilled,o),l&&s.addCase(h.pending,l),c&&s.addCase(h.rejected,c),u&&s.addMatcher(h.settled,u),s.exposeCaseReducer(e,{fulfilled:o||Tx,pending:l||Tx,rejected:c||Tx,settled:u||Tx})}function Tx(){}var OZ=(t,e)=>{if(typeof t!="function")throw new Error(qi(32))},lk="listenerMiddleware",RZ=t=>{let{type:e,actionCreator:n,matcher:s,predicate:i,effect:a}=t;if(e)i=vc(e).match;else if(n)e=n.type,i=n.match;else if(s)i=s;else if(!i)throw new Error(qi(21));return OZ(a),{predicate:i,type:e,effect:a}},LZ=Object.assign(t=>{const{type:e,predicate:n,effect:s}=RZ(t);return{id:dF(),effect:s,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qi(22))}}},{withTypes:()=>LZ}),BZ=Object.assign(vc(`${lk}/add`),{withTypes:()=>BZ});vc(`${lk}/removeAll`);var FZ=Object.assign(vc(`${lk}/remove`),{withTypes:()=>FZ});function qi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const hF=ad({name:"windowSize",initialState:{width:window.innerWidth,isDesktop:window.innerWidth>1222,viewportHeight:window.innerHeight},reducers:{setWindowSize:(t,e)=>{t.width=e.payload.width,t.isDesktop=e.payload.width>1222,t.viewportHeight=e.payload.height}}}),{setWindowSize:$Z}=hF.actions,UZ=hF.reducer,VZ={cities:[],userInfo:{},authLoading:!0,likes:[],city:{id:null,name:"",data:[]}},fF=ad({name:"mainInfo",initialState:VZ,reducers:{updateMainInfo(t,e){t.city=e.payload},setCities(t,e){t.cities=e.payload},setUserInfo(t,e){t.userInfo=e.payload,t.authLoading=!1},setLikes(t,e){t.likes=e.payload}}}),{updateMainInfo:oE,setCities:A1,setUserInfo:Pb,setLikes:Ib}=fF.actions,zZ=fF.reducer;var HZ=Object,qZ=Error,WZ=EvalError,GZ=RangeError,YZ=ReferenceError,pF=SyntaxError,um=TypeError,XZ=URIError,KZ=Math.abs,QZ=Math.floor,ZZ=Math.max,JZ=Math.min,eJ=Math.pow,tJ=Object.getOwnPropertyDescriptor,D1=tJ;if(D1)try{D1([],"length")}catch{D1=null}var M2=D1,P1=Object.defineProperty||!1;if(P1)try{P1({},"a",{value:1})}catch{P1=!1}var O2=P1,cS,EP;function nJ(){return EP||(EP=1,cS=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),s=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==i||l.enumerable!==!0)return!1}return!0}),cS}var uS,NP;function sJ(){if(NP)return uS;NP=1;var t=typeof Symbol<"u"&&Symbol,e=nJ();return uS=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},uS}var dS,kP;function rJ(){if(kP)return dS;kP=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,s="[object Function]",i=function(c,u){for(var d=[],h=0;h<c.length;h+=1)d[h]=c[h];for(var f=0;f<u.length;f+=1)d[f+c.length]=u[f];return d},a=function(c,u){for(var d=[],h=u,f=0;h<c.length;h+=1,f+=1)d[f]=c[h];return d},o=function(l,c){for(var u="",d=0;d<l.length;d+=1)u+=l[d],d+1<l.length&&(u+=c);return u};return dS=function(c){var u=this;if(typeof u!="function"||e.apply(u)!==s)throw new TypeError(t+u);for(var d=a(arguments,1),h,f=function(){if(this instanceof h){var y=u.apply(this,i(d,arguments));return Object(y)===y?y:this}return u.apply(c,i(d,arguments))},p=n(0,u.length-d.length),g=[],m=0;m<p;m++)g[m]="$"+m;if(h=Function("binder","return function ("+o(g,",")+"){ return binder.apply(this,arguments); }")(f),u.prototype){var _=function(){};_.prototype=u.prototype,h.prototype=new _,_.prototype=null}return h},dS}var hS,AP;function Zv(){if(AP)return hS;AP=1;var t=rJ();return hS=Function.prototype.bind||t,hS}var fS,DP;function ck(){return DP||(DP=1,fS=Function.prototype.call),fS}var pS,PP;function mF(){return PP||(PP=1,pS=Function.prototype.apply),pS}var mS,IP;function iJ(){return IP||(IP=1,mS=typeof Reflect<"u"&&Reflect&&Reflect.apply),mS}var gS,MP;function aJ(){if(MP)return gS;MP=1;var t=Zv(),e=mF(),n=ck(),s=iJ();return gS=s||t.call(n,e),gS}var vS,OP;function oJ(){if(OP)return vS;OP=1;var t=Zv(),e=um,n=ck(),s=aJ();return vS=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return s(t,n,a)},vS}var yS,RP;function lJ(){if(RP)return yS;RP=1;var t=oJ(),e=M2,n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var s=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,a=i.getPrototypeOf;return yS=s&&typeof s.get=="function"?t([s.get]):typeof a=="function"?function(l){return a(l==null?l:i(l))}:!1,yS}var xS,LP;function cJ(){if(LP)return xS;LP=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=Zv();return xS=n.call(t,e),xS}var Zt,gF=HZ,uJ=qZ,dJ=WZ,hJ=GZ,fJ=YZ,Pp=pF,up=um,pJ=XZ,mJ=KZ,gJ=QZ,vJ=ZZ,yJ=JZ,xJ=eJ,vF=Function,bS=function(t){try{return vF('"use strict"; return ('+t+").constructor;")()}catch{}},nv=M2,bJ=O2,_S=function(){throw new up},_J=nv?function(){try{return arguments.callee,_S}catch{try{return nv(arguments,"callee").get}catch{return _S}}}():_S,hf=sJ()(),wJ=lJ(),hr=typeof Reflect=="function"&&Reflect.getPrototypeOf||gF.getPrototypeOf||wJ,yF=mF(),Jv=ck(),Mf={},CJ=typeof Uint8Array>"u"||!hr?Zt:hr(Uint8Array),lh={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Zt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Zt:ArrayBuffer,"%ArrayIteratorPrototype%":hf&&hr?hr([][Symbol.iterator]()):Zt,"%AsyncFromSyncIteratorPrototype%":Zt,"%AsyncFunction%":Mf,"%AsyncGenerator%":Mf,"%AsyncGeneratorFunction%":Mf,"%AsyncIteratorPrototype%":Mf,"%Atomics%":typeof Atomics>"u"?Zt:Atomics,"%BigInt%":typeof BigInt>"u"?Zt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Zt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Zt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Zt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":uJ,"%eval%":eval,"%EvalError%":dJ,"%Float32Array%":typeof Float32Array>"u"?Zt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Zt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Zt:FinalizationRegistry,"%Function%":vF,"%GeneratorFunction%":Mf,"%Int8Array%":typeof Int8Array>"u"?Zt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Zt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Zt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hf&&hr?hr(hr([][Symbol.iterator]())):Zt,"%JSON%":typeof JSON=="object"?JSON:Zt,"%Map%":typeof Map>"u"?Zt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hf||!hr?Zt:hr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":gF,"%Object.getOwnPropertyDescriptor%":nv,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Zt:Promise,"%Proxy%":typeof Proxy>"u"?Zt:Proxy,"%RangeError%":hJ,"%ReferenceError%":fJ,"%Reflect%":typeof Reflect>"u"?Zt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Zt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hf||!hr?Zt:hr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Zt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hf&&hr?hr(""[Symbol.iterator]()):Zt,"%Symbol%":hf?Symbol:Zt,"%SyntaxError%":Pp,"%ThrowTypeError%":_J,"%TypedArray%":CJ,"%TypeError%":up,"%Uint8Array%":typeof Uint8Array>"u"?Zt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Zt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Zt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Zt:Uint32Array,"%URIError%":pJ,"%WeakMap%":typeof WeakMap>"u"?Zt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Zt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Zt:WeakSet,"%Function.prototype.call%":Jv,"%Function.prototype.apply%":yF,"%Object.defineProperty%":bJ,"%Math.abs%":mJ,"%Math.floor%":gJ,"%Math.max%":vJ,"%Math.min%":yJ,"%Math.pow%":xJ};if(hr)try{null.error}catch(t){var SJ=hr(hr(t));lh["%Error.prototype%"]=SJ}var jJ=function t(e){var n;if(e==="%AsyncFunction%")n=bS("async function () {}");else if(e==="%GeneratorFunction%")n=bS("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=bS("async function* () {}");else if(e==="%AsyncGenerator%"){var s=t("%AsyncGeneratorFunction%");s&&(n=s.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&hr&&(n=hr(i.prototype))}return lh[e]=n,n},BP={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ey=Zv(),Mb=cJ(),TJ=ey.call(Jv,Array.prototype.concat),EJ=ey.call(yF,Array.prototype.splice),FP=ey.call(Jv,String.prototype.replace),Ob=ey.call(Jv,String.prototype.slice),NJ=ey.call(Jv,RegExp.prototype.exec),kJ=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,AJ=/\\(\\)?/g,DJ=function(e){var n=Ob(e,0,1),s=Ob(e,-1);if(n==="%"&&s!=="%")throw new Pp("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&n!=="%")throw new Pp("invalid intrinsic syntax, expected opening `%`");var i=[];return FP(e,kJ,function(a,o,l,c){i[i.length]=l?FP(c,AJ,"$1"):o||a}),i},PJ=function(e,n){var s=e,i;if(Mb(BP,s)&&(i=BP[s],s="%"+i[0]+"%"),Mb(lh,s)){var a=lh[s];if(a===Mf&&(a=jJ(s)),typeof a>"u"&&!n)throw new up("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:s,value:a}}throw new Pp("intrinsic "+e+" does not exist!")},R2=function(e,n){if(typeof e!="string"||e.length===0)throw new up("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new up('"allowMissing" argument must be a boolean');if(NJ(/^%?[^%]*%?$/,e)===null)throw new Pp("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=DJ(e),i=s.length>0?s[0]:"",a=PJ("%"+i+"%",n),o=a.name,l=a.value,c=!1,u=a.alias;u&&(i=u[0],EJ(s,TJ([0,1],u)));for(var d=1,h=!0;d<s.length;d+=1){var f=s[d],p=Ob(f,0,1),g=Ob(f,-1);if((p==='"'||p==="'"||p==="`"||g==='"'||g==="'"||g==="`")&&p!==g)throw new Pp("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(c=!0),i+="."+f,o="%"+i+"%",Mb(lh,o))l=lh[o];else if(l!=null){if(!(f in l)){if(!n)throw new up("base intrinsic for "+e+" exists, but the property is not available.");return}if(nv&&d+1>=s.length){var m=nv(l,f);h=!!m,h&&"get"in m&&!("originalValue"in m.get)?l=m.get:l=l[f]}else h=Mb(l,f),l=l[f];h&&!c&&(lh[o]=l)}}return l},xF={exports:{}},$P=O2,IJ=pF,ff=um,UP=M2,MJ=function(e,n,s){if(!e||typeof e!="object"&&typeof e!="function")throw new ff("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new ff("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ff("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ff("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ff("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ff("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,c=!!UP&&UP(e,n);if($P)$P(e,n,{configurable:o===null&&c?c.configurable:!o,enumerable:i===null&&c?c.enumerable:!i,value:s,writable:a===null&&c?c.writable:!a});else if(l||!i&&!a&&!o)e[n]=s;else throw new IJ("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},lE=O2,bF=function(){return!!lE};bF.hasArrayLengthDefineBug=function(){if(!lE)return null;try{return lE([],"length",{value:1}).length!==1}catch{return!0}};var OJ=bF,RJ=R2,VP=MJ,LJ=OJ(),zP=M2,HP=um,BJ=RJ("%Math.floor%"),FJ=function(e,n){if(typeof e!="function")throw new HP("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||BJ(n)!==n)throw new HP("`length` must be a positive 32-bit integer");var s=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in e&&zP){var o=zP(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(a=!1)}return(i||a||!s)&&(LJ?VP(e,"length",n,!0,!0):VP(e,"length",n)),e};(function(t){var e=Zv(),n=R2,s=FJ,i=um,a=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||e.call(o,a),c=O2,u=n("%Math.max%");t.exports=function(f){if(typeof f!="function")throw new i("a function is required");var p=l(e,o,arguments);return s(p,1+u(0,f.length-(arguments.length-1)),!0)};var d=function(){return l(e,a,arguments)};c?c(t.exports,"apply",{value:d}):t.exports.apply=d})(xF);var $J=xF.exports,_F=R2,wF=$J,UJ=wF(_F("String.prototype.indexOf")),VJ=function(e,n){var s=_F(e,!!n);return typeof s=="function"&&UJ(e,".prototype.")>-1?wF(s):s};const zJ={},HJ=Object.freeze(Object.defineProperty({__proto__:null,default:zJ},Symbol.toStringTag,{value:"Module"})),uk=kR(HJ);var dk=typeof Map=="function"&&Map.prototype,wS=Object.getOwnPropertyDescriptor&&dk?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Rb=dk&&wS&&typeof wS.get=="function"?wS.get:null,qP=dk&&Map.prototype.forEach,hk=typeof Set=="function"&&Set.prototype,CS=Object.getOwnPropertyDescriptor&&hk?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Lb=hk&&CS&&typeof CS.get=="function"?CS.get:null,WP=hk&&Set.prototype.forEach,qJ=typeof WeakMap=="function"&&WeakMap.prototype,g0=qJ?WeakMap.prototype.has:null,WJ=typeof WeakSet=="function"&&WeakSet.prototype,v0=WJ?WeakSet.prototype.has:null,GJ=typeof WeakRef=="function"&&WeakRef.prototype,GP=GJ?WeakRef.prototype.deref:null,YJ=Boolean.prototype.valueOf,XJ=Object.prototype.toString,KJ=Function.prototype.toString,QJ=String.prototype.match,fk=String.prototype.slice,Eu=String.prototype.replace,ZJ=String.prototype.toUpperCase,YP=String.prototype.toLowerCase,CF=RegExp.prototype.test,XP=Array.prototype.concat,nl=Array.prototype.join,JJ=Array.prototype.slice,KP=Math.floor,cE=typeof BigInt=="function"?BigInt.prototype.valueOf:null,SS=Object.getOwnPropertySymbols,uE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Yr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ip||!0)?Symbol.toStringTag:null,SF=Object.prototype.propertyIsEnumerable,QP=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function ZP(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||CF.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var s=t<0?-KP(-t):KP(t);if(s!==t){var i=String(s),a=fk.call(e,i.length+1);return Eu.call(i,n,"$&_")+"."+Eu.call(Eu.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Eu.call(e,n,"$&_")}var dE=uk,JP=dE.custom,eI=TF(JP)?JP:null,eee=function t(e,n,s,i){var a=n||{};if(pu(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(pu(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=pu(a,"customInspect")?a.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(pu(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(pu(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=a.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return NF(e,a);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return l?ZP(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return l?ZP(e,u):u}var d=typeof a.depth>"u"?5:a.depth;if(typeof s>"u"&&(s=0),s>=d&&d>0&&typeof e=="object")return hE(e)?"[Array]":"[Object]";var h=yee(a,s);if(typeof i>"u")i=[];else if(EF(i,e)>=0)return"[Circular]";function f(U,z,G){if(z&&(i=JJ.call(i),i.push(z)),G){var V={depth:a.depth};return pu(a,"quoteStyle")&&(V.quoteStyle=a.quoteStyle),t(U,V,s+1,i)}return t(U,a,s+1,i)}if(typeof e=="function"&&!tI(e)){var p=cee(e),g=Ex(e,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(g.length>0?" { "+nl.call(g,", ")+" }":"")}if(TF(e)){var m=Ip?Eu.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):uE.call(e);return typeof e=="object"&&!Ip?_g(m):m}if(mee(e)){for(var _="<"+YP.call(String(e.nodeName)),y=e.attributes||[],x=0;x<y.length;x++)_+=" "+y[x].name+"="+jF(tee(y[x].value),"double",a);return _+=">",e.childNodes&&e.childNodes.length&&(_+="..."),_+="</"+YP.call(String(e.nodeName))+">",_}if(hE(e)){if(e.length===0)return"[]";var b=Ex(e,f);return h&&!vee(b)?"["+fE(b,h)+"]":"[ "+nl.call(b,", ")+" ]"}if(see(e)){var w=Ex(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!SF.call(e,"cause")?"{ ["+String(e)+"] "+nl.call(XP.call("[cause]: "+f(e.cause),w),", ")+" }":w.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+nl.call(w,", ")+" }"}if(typeof e=="object"&&o){if(eI&&typeof e[eI]=="function"&&dE)return dE(e,{depth:d-s});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(uee(e)){var C=[];return qP&&qP.call(e,function(U,z){C.push(f(z,e,!0)+" => "+f(U,e))}),nI("Map",Rb.call(e),C,h)}if(fee(e)){var j=[];return WP&&WP.call(e,function(U){j.push(f(U,e))}),nI("Set",Lb.call(e),j,h)}if(dee(e))return jS("WeakMap");if(pee(e))return jS("WeakSet");if(hee(e))return jS("WeakRef");if(iee(e))return _g(f(Number(e)));if(oee(e))return _g(f(cE.call(e)));if(aee(e))return _g(YJ.call(e));if(ree(e))return _g(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof hn<"u"&&e===hn)return"{ [object globalThis] }";if(!nee(e)&&!tI(e)){var E=Ex(e,f),T=QP?QP(e)===Object.prototype:e instanceof Object||e.constructor===Object,N=e instanceof Object?"":"null prototype",P=!T&&Yr&&Object(e)===e&&Yr in e?fk.call(od(e),8,-1):N?"Object":"",I=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",B=I+(P||N?"["+nl.call(XP.call([],P||[],N||[]),": ")+"] ":"");return E.length===0?B+"{}":h?B+"{"+fE(E,h)+"}":B+"{ "+nl.call(E,", ")+" }"}return String(e)};function jF(t,e,n){var s=(n.quoteStyle||e)==="double"?'"':"'";return s+t+s}function tee(t){return Eu.call(String(t),/"/g,"&quot;")}function hE(t){return od(t)==="[object Array]"&&(!Yr||!(typeof t=="object"&&Yr in t))}function nee(t){return od(t)==="[object Date]"&&(!Yr||!(typeof t=="object"&&Yr in t))}function tI(t){return od(t)==="[object RegExp]"&&(!Yr||!(typeof t=="object"&&Yr in t))}function see(t){return od(t)==="[object Error]"&&(!Yr||!(typeof t=="object"&&Yr in t))}function ree(t){return od(t)==="[object String]"&&(!Yr||!(typeof t=="object"&&Yr in t))}function iee(t){return od(t)==="[object Number]"&&(!Yr||!(typeof t=="object"&&Yr in t))}function aee(t){return od(t)==="[object Boolean]"&&(!Yr||!(typeof t=="object"&&Yr in t))}function TF(t){if(Ip)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!uE)return!1;try{return uE.call(t),!0}catch{}return!1}function oee(t){if(!t||typeof t!="object"||!cE)return!1;try{return cE.call(t),!0}catch{}return!1}var lee=Object.prototype.hasOwnProperty||function(t){return t in this};function pu(t,e){return lee.call(t,e)}function od(t){return XJ.call(t)}function cee(t){if(t.name)return t.name;var e=QJ.call(KJ.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function EF(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,s=t.length;n<s;n++)if(t[n]===e)return n;return-1}function uee(t){if(!Rb||!t||typeof t!="object")return!1;try{Rb.call(t);try{Lb.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function dee(t){if(!g0||!t||typeof t!="object")return!1;try{g0.call(t,g0);try{v0.call(t,v0)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function hee(t){if(!GP||!t||typeof t!="object")return!1;try{return GP.call(t),!0}catch{}return!1}function fee(t){if(!Lb||!t||typeof t!="object")return!1;try{Lb.call(t);try{Rb.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function pee(t){if(!v0||!t||typeof t!="object")return!1;try{v0.call(t,v0);try{g0.call(t,g0)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function mee(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function NF(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,s="... "+n+" more character"+(n>1?"s":"");return NF(fk.call(t,0,e.maxStringLength),e)+s}var i=Eu.call(Eu.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,gee);return jF(i,"single",e)}function gee(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+ZJ.call(e.toString(16))}function _g(t){return"Object("+t+")"}function jS(t){return t+" { ? }"}function nI(t,e,n,s){var i=s?fE(n,s):nl.call(n,", ");return t+" ("+e+") {"+i+"}"}function vee(t){for(var e=0;e<t.length;e++)if(EF(t[e],`
`)>=0)return!1;return!0}function yee(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=nl.call(Array(t.indent+1)," ");else return null;return{base:n,prev:nl.call(Array(e+1),n)}}function fE(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+nl.call(t,","+n)+`
`+e.prev}function Ex(t,e){var n=hE(t),s=[];if(n){s.length=t.length;for(var i=0;i<t.length;i++)s[i]=pu(t,i)?e(t[i],t):""}var a=typeof SS=="function"?SS(t):[],o;if(Ip){o={};for(var l=0;l<a.length;l++)o["$"+a[l]]=a[l]}for(var c in t)pu(t,c)&&(n&&String(Number(c))===c&&c<t.length||Ip&&o["$"+c]instanceof Symbol||(CF.call(/[^\w$]/,c)?s.push(e(c,t)+": "+e(t[c],t)):s.push(c+": "+e(t[c],t))));if(typeof SS=="function")for(var u=0;u<a.length;u++)SF.call(t,a[u])&&s.push("["+e(a[u])+"]: "+e(t[a[u]],t));return s}var kF=R2,dm=VJ,xee=eee,bee=um,Nx=kF("%WeakMap%",!0),kx=kF("%Map%",!0),_ee=dm("WeakMap.prototype.get",!0),wee=dm("WeakMap.prototype.set",!0),Cee=dm("WeakMap.prototype.has",!0),See=dm("Map.prototype.get",!0),jee=dm("Map.prototype.set",!0),Tee=dm("Map.prototype.has",!0),pk=function(t,e){for(var n=t,s;(s=n.next)!==null;n=s)if(s.key===e)return n.next=s.next,s.next=t.next,t.next=s,s},Eee=function(t,e){var n=pk(t,e);return n&&n.value},Nee=function(t,e,n){var s=pk(t,e);s?s.value=n:t.next={key:e,next:t.next,value:n}},kee=function(t,e){return!!pk(t,e)},Aee=function(){var e,n,s,i={assert:function(a){if(!i.has(a))throw new bee("Side channel does not contain "+xee(a))},get:function(a){if(Nx&&a&&(typeof a=="object"||typeof a=="function")){if(e)return _ee(e,a)}else if(kx){if(n)return See(n,a)}else if(s)return Eee(s,a)},has:function(a){if(Nx&&a&&(typeof a=="object"||typeof a=="function")){if(e)return Cee(e,a)}else if(kx){if(n)return Tee(n,a)}else if(s)return kee(s,a);return!1},set:function(a,o){Nx&&a&&(typeof a=="object"||typeof a=="function")?(e||(e=new Nx),wee(e,a,o)):kx?(n||(n=new kx),jee(n,a,o)):(s||(s={key:{},next:null}),Nee(s,a,o))}};return i},Dee=String.prototype.replace,Pee=/%20/g,TS={RFC1738:"RFC1738",RFC3986:"RFC3986"},mk={default:TS.RFC3986,formatters:{RFC1738:function(t){return Dee.call(t,Pee,"+")},RFC3986:function(t){return String(t)}},RFC1738:TS.RFC1738,RFC3986:TS.RFC3986},Iee=mk,ES=Object.prototype.hasOwnProperty,qd=Array.isArray,Xo=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Mee=function(e){for(;e.length>1;){var n=e.pop(),s=n.obj[n.prop];if(qd(s)){for(var i=[],a=0;a<s.length;++a)typeof s[a]<"u"&&i.push(s[a]);n.obj[n.prop]=i}}},AF=function(e,n){for(var s=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(s[i]=e[i]);return s},Oee=function t(e,n,s){if(!n)return e;if(typeof n!="object"){if(qd(e))e.push(n);else if(e&&typeof e=="object")(s&&(s.plainObjects||s.allowPrototypes)||!ES.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return qd(e)&&!qd(n)&&(i=AF(e,s)),qd(e)&&qd(n)?(n.forEach(function(a,o){if(ES.call(e,o)){var l=e[o];l&&typeof l=="object"&&a&&typeof a=="object"?e[o]=t(l,a,s):e.push(a)}else e[o]=a}),e):Object.keys(n).reduce(function(a,o){var l=n[o];return ES.call(a,o)?a[o]=t(a[o],l,s):a[o]=l,a},i)},Ree=function(e,n){return Object.keys(n).reduce(function(s,i){return s[i]=n[i],s},e)},Lee=function(t,e,n){var s=t.replace(/\+/g," ");if(n==="iso-8859-1")return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch{return s}},NS=1024,Bee=function(e,n,s,i,a){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),s==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});for(var l="",c=0;c<o.length;c+=NS){for(var u=o.length>=NS?o.slice(c,c+NS):o,d=[],h=0;h<u.length;++h){var f=u.charCodeAt(h);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||a===Iee.RFC1738&&(f===40||f===41)){d[d.length]=u.charAt(h);continue}if(f<128){d[d.length]=Xo[f];continue}if(f<2048){d[d.length]=Xo[192|f>>6]+Xo[128|f&63];continue}if(f<55296||f>=57344){d[d.length]=Xo[224|f>>12]+Xo[128|f>>6&63]+Xo[128|f&63];continue}h+=1,f=65536+((f&1023)<<10|u.charCodeAt(h)&1023),d[d.length]=Xo[240|f>>18]+Xo[128|f>>12&63]+Xo[128|f>>6&63]+Xo[128|f&63]}l+=d.join("")}return l},Fee=function(e){for(var n=[{obj:{o:e},prop:"o"}],s=[],i=0;i<n.length;++i)for(var a=n[i],o=a.obj[a.prop],l=Object.keys(o),c=0;c<l.length;++c){var u=l[c],d=o[u];typeof d=="object"&&d!==null&&s.indexOf(d)===-1&&(n.push({obj:o,prop:u}),s.push(d))}return Mee(n),e},$ee=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Uee=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Vee=function(e,n){return[].concat(e,n)},zee=function(e,n){if(qd(e)){for(var s=[],i=0;i<e.length;i+=1)s.push(n(e[i]));return s}return n(e)},DF={arrayToObject:AF,assign:Ree,combine:Vee,compact:Fee,decode:Lee,encode:Bee,isBuffer:Uee,isRegExp:$ee,maybeMap:zee,merge:Oee},PF=Aee,I1=DF,y0=mk,Hee=Object.prototype.hasOwnProperty,IF={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},el=Array.isArray,qee=Array.prototype.push,MF=function(t,e){qee.apply(t,el(e)?e:[e])},Wee=Date.prototype.toISOString,sI=y0.default,tr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:I1.encode,encodeValuesOnly:!1,format:sI,formatter:y0.formatters[sI],indices:!1,serializeDate:function(e){return Wee.call(e)},skipNulls:!1,strictNullHandling:!1},Gee=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},kS={},Yee=function t(e,n,s,i,a,o,l,c,u,d,h,f,p,g,m,_,y,x){for(var b=e,w=x,C=0,j=!1;(w=w.get(kS))!==void 0&&!j;){var E=w.get(e);if(C+=1,typeof E<"u"){if(E===C)throw new RangeError("Cyclic object value");j=!0}typeof w.get(kS)>"u"&&(C=0)}if(typeof d=="function"?b=d(n,b):b instanceof Date?b=p(b):s==="comma"&&el(b)&&(b=I1.maybeMap(b,function(oe){return oe instanceof Date?p(oe):oe})),b===null){if(o)return u&&!_?u(n,tr.encoder,y,"key",g):n;b=""}if(Gee(b)||I1.isBuffer(b)){if(u){var T=_?n:u(n,tr.encoder,y,"key",g);return[m(T)+"="+m(u(b,tr.encoder,y,"value",g))]}return[m(n)+"="+m(String(b))]}var N=[];if(typeof b>"u")return N;var P;if(s==="comma"&&el(b))_&&u&&(b=I1.maybeMap(b,u)),P=[{value:b.length>0?b.join(",")||null:void 0}];else if(el(d))P=d;else{var I=Object.keys(b);P=h?I.sort(h):I}var B=c?n.replace(/\./g,"%2E"):n,U=i&&el(b)&&b.length===1?B+"[]":B;if(a&&el(b)&&b.length===0)return U+"[]";for(var z=0;z<P.length;++z){var G=P[z],V=typeof G=="object"&&typeof G.value<"u"?G.value:b[G];if(!(l&&V===null)){var J=f&&c?G.replace(/\./g,"%2E"):G,Q=el(b)?typeof s=="function"?s(U,J):U:U+(f?"."+J:"["+J+"]");x.set(e,C);var Y=PF();Y.set(kS,x),MF(N,t(V,Q,s,i,a,o,l,c,s==="comma"&&_&&el(b)?null:u,d,h,f,p,g,m,_,y,Y))}}return N},Xee=function(e){if(!e)return tr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||tr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=y0.default;if(typeof e.format<"u"){if(!Hee.call(y0.formatters,e.format))throw new TypeError("Unknown format option provided.");s=e.format}var i=y0.formatters[s],a=tr.filter;(typeof e.filter=="function"||el(e.filter))&&(a=e.filter);var o;if(e.arrayFormat in IF?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=tr.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:tr.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:tr.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:tr.allowEmptyArrays,arrayFormat:o,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:tr.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?tr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:tr.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:tr.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:tr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:tr.encodeValuesOnly,filter:a,format:s,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:tr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:tr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:tr.strictNullHandling}},Kee=function(t,e){var n=t,s=Xee(e),i,a;typeof s.filter=="function"?(a=s.filter,n=a("",n)):el(s.filter)&&(a=s.filter,i=a);var o=[];if(typeof n!="object"||n===null)return"";var l=IF[s.arrayFormat],c=l==="comma"&&s.commaRoundTrip;i||(i=Object.keys(n)),s.sort&&i.sort(s.sort);for(var u=PF(),d=0;d<i.length;++d){var h=i[d];s.skipNulls&&n[h]===null||MF(o,Yee(n[h],h,l,c,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,u))}var f=o.join(s.delimiter),p=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},Mp=DF,pE=Object.prototype.hasOwnProperty,Qee=Array.isArray,Ms={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Mp.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Zee=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},OF=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Jee="utf8=%26%2310003%3B",ete="utf8=%E2%9C%93",tte=function(e,n){var s={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var a=n.parameterLimit===1/0?void 0:n.parameterLimit,o=i.split(n.delimiter,a),l=-1,c,u=n.charset;if(n.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===ete?u="utf-8":o[c]===Jee&&(u="iso-8859-1"),l=c,c=o.length);for(c=0;c<o.length;++c)if(c!==l){var d=o[c],h=d.indexOf("]="),f=h===-1?d.indexOf("="):h+1,p,g;f===-1?(p=n.decoder(d,Ms.decoder,u,"key"),g=n.strictNullHandling?null:""):(p=n.decoder(d.slice(0,f),Ms.decoder,u,"key"),g=Mp.maybeMap(OF(d.slice(f+1),n),function(_){return n.decoder(_,Ms.decoder,u,"value")})),g&&n.interpretNumericEntities&&u==="iso-8859-1"&&(g=Zee(g)),d.indexOf("[]=")>-1&&(g=Qee(g)?[g]:g);var m=pE.call(s,p);m&&n.duplicates==="combine"?s[p]=Mp.combine(s[p],g):(!m||n.duplicates==="last")&&(s[p]=g)}return s},nte=function(t,e,n,s){for(var i=s?e:OF(e,n),a=t.length-1;a>=0;--a){var o,l=t[a];if(l==="[]"&&n.parseArrays)o=n.allowEmptyArrays&&(i===""||n.strictNullHandling&&i===null)?[]:[].concat(i);else{o=n.plainObjects?Object.create(null):{};var c=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,u=n.decodeDotInKeys?c.replace(/%2E/g,"."):c,d=parseInt(u,10);!n.parseArrays&&u===""?o={0:i}:!isNaN(d)&&l!==u&&String(d)===u&&d>=0&&n.parseArrays&&d<=n.arrayLimit?(o=[],o[d]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},ste=function(e,n,s,i){if(e){var a=s.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,c=s.depth>0&&o.exec(a),u=c?a.slice(0,c.index):a,d=[];if(u){if(!s.plainObjects&&pE.call(Object.prototype,u)&&!s.allowPrototypes)return;d.push(u)}for(var h=0;s.depth>0&&(c=l.exec(a))!==null&&h<s.depth;){if(h+=1,!s.plainObjects&&pE.call(Object.prototype,c[1].slice(1,-1))&&!s.allowPrototypes)return;d.push(c[1])}return c&&d.push("["+a.slice(c.index)+"]"),nte(d,n,s,i)}},rte=function(e){if(!e)return Ms;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Ms.charset:e.charset,s=typeof e.duplicates>"u"?Ms.duplicates:e.duplicates;if(s!=="combine"&&s!=="first"&&s!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ms.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ms.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ms.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ms.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ms.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ms.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ms.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ms.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ms.decoder,delimiter:typeof e.delimiter=="string"||Mp.isRegExp(e.delimiter)?e.delimiter:Ms.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ms.depth,duplicates:s,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ms.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ms.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ms.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ms.strictNullHandling}},ite=function(t,e){var n=rte(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var s=typeof t=="string"?tte(t,n):t,i=n.plainObjects?Object.create(null):{},a=Object.keys(s),o=0;o<a.length;++o){var l=a[o],c=ste(l,s[l],n,typeof t=="string");i=Mp.merge(i,c,n)}return n.allowSparse===!0?i:Mp.compact(i)},ate=Kee,ote=ite,lte=mk,cte={formats:lte,parse:ote,stringify:ate};const L2=In(cte);var Bb={exports:{}};Bb.exports;(function(t,e){var n=200,s="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",o="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",h="[object GeneratorFunction]",f="[object Map]",p="[object Number]",g="[object Object]",m="[object Promise]",_="[object RegExp]",y="[object Set]",x="[object String]",b="[object Symbol]",w="[object WeakMap]",C="[object ArrayBuffer]",j="[object DataView]",E="[object Float32Array]",T="[object Float64Array]",N="[object Int8Array]",P="[object Int16Array]",I="[object Int32Array]",B="[object Uint8Array]",U="[object Uint8ClampedArray]",z="[object Uint16Array]",G="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,J=/\w*$/,Q=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,oe={};oe[a]=oe[o]=oe[C]=oe[j]=oe[l]=oe[c]=oe[E]=oe[T]=oe[N]=oe[P]=oe[I]=oe[f]=oe[p]=oe[g]=oe[_]=oe[y]=oe[x]=oe[b]=oe[B]=oe[U]=oe[z]=oe[G]=!0,oe[u]=oe[d]=oe[w]=!1;var he=typeof hn=="object"&&hn&&hn.Object===Object&&hn,me=typeof self=="object"&&self&&self.Object===Object&&self,Oe=he||me||Function("return this")(),xe=e&&!e.nodeType&&e,Pe=xe&&!0&&t&&!t.nodeType&&t,qe=Pe&&Pe.exports===xe;function Ie(L,K){return L.set(K[0],K[1]),L}function Ve(L,K){return L.add(K),L}function ot(L,K){for(var ve=-1,ze=L?L.length:0;++ve<ze&&K(L[ve],ve,L)!==!1;);return L}function fe(L,K){for(var ve=-1,ze=K.length,Mt=L.length;++ve<ze;)L[Mt+ve]=K[ve];return L}function $(L,K,ve,ze){for(var Mt=-1,bt=L?L.length:0;++Mt<bt;)ve=K(ve,L[Mt],Mt,L);return ve}function X(L,K){for(var ve=-1,ze=Array(L);++ve<L;)ze[ve]=K(ve);return ze}function W(L,K){return L==null?void 0:L[K]}function ce(L){var K=!1;if(L!=null&&typeof L.toString!="function")try{K=!!(L+"")}catch{}return K}function ne(L){var K=-1,ve=Array(L.size);return L.forEach(function(ze,Mt){ve[++K]=[Mt,ze]}),ve}function ee(L,K){return function(ve){return L(K(ve))}}function ge(L){var K=-1,ve=Array(L.size);return L.forEach(function(ze){ve[++K]=ze}),ve}var q=Array.prototype,re=Function.prototype,ie=Object.prototype,Ee=Oe["__core-js_shared__"],Ne=function(){var L=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||"");return L?"Symbol(src)_1."+L:""}(),Ae=re.toString,Se=ie.hasOwnProperty,Le=ie.toString,tt=RegExp("^"+Ae.call(Se).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=qe?Oe.Buffer:void 0,it=Oe.Symbol,Pt=Oe.Uint8Array,H=ee(Object.getPrototypeOf,Object),M=Object.create,R=ie.propertyIsEnumerable,te=q.splice,ye=Object.getOwnPropertySymbols,Te=lt?lt.isBuffer:void 0,$e=ee(Object.keys,Object),wt=Rr(Oe,"DataView"),Ut=Rr(Oe,"Map"),Rt=Rr(Oe,"Promise"),tn=Rr(Oe,"Set"),_t=Rr(Oe,"WeakMap"),Hn=Rr(Object,"create"),rs=qs(wt),is=qs(Ut),ae=qs(Rt),be=qs(tn),Ce=qs(_t),We=it?it.prototype:void 0,Je=We?We.valueOf:void 0;function et(L){var K=-1,ve=L?L.length:0;for(this.clear();++K<ve;){var ze=L[K];this.set(ze[0],ze[1])}}function yt(){this.__data__=Hn?Hn(null):{}}function ut(L){return this.has(L)&&delete this.__data__[L]}function Vt(L){var K=this.__data__;if(Hn){var ve=K[L];return ve===s?void 0:ve}return Se.call(K,L)?K[L]:void 0}function zt(L){var K=this.__data__;return Hn?K[L]!==void 0:Se.call(K,L)}function Tt(L,K){var ve=this.__data__;return ve[L]=Hn&&K===void 0?s:K,this}et.prototype.clear=yt,et.prototype.delete=ut,et.prototype.get=Vt,et.prototype.has=zt,et.prototype.set=Tt;function Et(L){var K=-1,ve=L?L.length:0;for(this.clear();++K<ve;){var ze=L[K];this.set(ze[0],ze[1])}}function Ht(){this.__data__=[]}function Sn(L){var K=this.__data__,ve=$l(K,L);if(ve<0)return!1;var ze=K.length-1;return ve==ze?K.pop():te.call(K,ve,1),!0}function xn(L){var K=this.__data__,ve=$l(K,L);return ve<0?void 0:K[ve][1]}function On(L){return $l(this.__data__,L)>-1}function Nt(L,K){var ve=this.__data__,ze=$l(ve,L);return ze<0?ve.push([L,K]):ve[ze][1]=K,this}Et.prototype.clear=Ht,Et.prototype.delete=Sn,Et.prototype.get=xn,Et.prototype.has=On,Et.prototype.set=Nt;function ys(L){var K=-1,ve=L?L.length:0;for(this.clear();++K<ve;){var ze=L[K];this.set(ze[0],ze[1])}}function Aa(){this.__data__={hash:new et,map:new(Ut||Et),string:new et}}function Da(L){return ql(this,L).delete(L)}function zc(L){return ql(this,L).get(L)}function Qr(L){return ql(this,L).has(L)}function gn(L,K){return ql(this,L).set(L,K),this}ys.prototype.clear=Aa,ys.prototype.delete=Da,ys.prototype.get=zc,ys.prototype.has=Qr,ys.prototype.set=gn;function Hs(L){this.__data__=new Et(L)}function Hc(){this.__data__=new Et}function eg(L){return this.__data__.delete(L)}function tg(L){return this.__data__.get(L)}function ng(L){return this.__data__.has(L)}function Jh(L,K){var ve=this.__data__;if(ve instanceof Et){var ze=ve.__data__;if(!Ut||ze.length<n-1)return ze.push([L,K]),this;ve=this.__data__=new ys(ze)}return ve.set(L,K),this}Hs.prototype.clear=Hc,Hs.prototype.delete=eg,Hs.prototype.get=tg,Hs.prototype.has=ng,Hs.prototype.set=Jh;function Ho(L,K){var ve=jd(L)||Wl(L)?X(L.length,String):[],ze=ve.length,Mt=!!ze;for(var bt in L)Se.call(L,bt)&&!(Mt&&(bt=="length"||Cd(bt,ze)))&&ve.push(bt);return ve}function qc(L,K,ve){var ze=L[K];(!(Se.call(L,K)&&rf(ze,ve))||ve===void 0&&!(K in L))&&(L[K]=ve)}function $l(L,K){for(var ve=L.length;ve--;)if(rf(L[ve][0],K))return ve;return-1}function Pa(L,K){return L&&Hl(K,Xc(K),L)}function bd(L,K,ve,ze,Mt,bt,an){var Xt;if(ze&&(Xt=bt?ze(L,Mt,bt,an):ze(L)),Xt!==void 0)return Xt;if(!Oa(L))return L;var xs=jd(L);if(xs){if(Xt=qo(L),!K)return rg(L,Xt)}else{var ln=Ti(L),As=ln==d||ln==h;if(Yl(L))return Ia(L,K);if(ln==g||ln==a||As&&!bt){if(ce(L))return bt?L:{};if(Xt=Ei(As?{}:L),!K)return wd(L,Pa(Xt,L))}else{if(!oe[ln])return bt?L:{};Xt=nf(L,ln,bd,K)}}an||(an=new Hs);var Lr=an.get(L);if(Lr)return Lr;if(an.set(L,Xt),!xs)var Ds=ve?Zr(L):Xc(L);return ot(Ds||L,function(dr,Zs){Ds&&(Zs=dr,dr=L[Zs]),qc(Xt,Zs,bd(dr,K,ve,ze,Zs,L,an))}),Xt}function Wc(L){return Oa(L)?M(L):{}}function Gc(L,K,ve){var ze=K(L);return jd(L)?ze:fe(ze,ve(L))}function ef(L){return Le.call(L)}function Ul(L){if(!Oa(L)||ag(L))return!1;var K=go(L)||ce(L)?tt:Q;return K.test(qs(L))}function Vl(L){if(!sf(L))return $e(L);var K=[];for(var ve in Object(L))Se.call(L,ve)&&ve!="constructor"&&K.push(ve);return K}function Ia(L,K){if(K)return L.slice();var ve=new L.constructor(L.length);return L.copy(ve),ve}function mo(L){var K=new L.constructor(L.byteLength);return new Pt(K).set(new Pt(L)),K}function zl(L,K){var ve=K?mo(L.buffer):L.buffer;return new L.constructor(ve,L.byteOffset,L.byteLength)}function _d(L,K,ve){var ze=K?ve(ne(L),!0):ne(L);return $(ze,Ie,new L.constructor)}function tf(L){var K=new L.constructor(L.source,J.exec(L));return K.lastIndex=L.lastIndex,K}function sg(L,K,ve){var ze=K?ve(ge(L),!0):ge(L);return $(ze,Ve,new L.constructor)}function Ma(L){return Je?Object(Je.call(L)):{}}function Yc(L,K){var ve=K?mo(L.buffer):L.buffer;return new L.constructor(ve,L.byteOffset,L.length)}function rg(L,K){var ve=-1,ze=L.length;for(K||(K=Array(ze));++ve<ze;)K[ve]=L[ve];return K}function Hl(L,K,ve,ze){ve||(ve={});for(var Mt=-1,bt=K.length;++Mt<bt;){var an=K[Mt],Xt=void 0;qc(ve,an,Xt===void 0?L[an]:Xt)}return ve}function wd(L,K){return Hl(L,Jr(L),K)}function Zr(L){return Gc(L,Xc,Jr)}function ql(L,K){var ve=L.__data__;return ig(K)?ve[typeof K=="string"?"string":"hash"]:ve.map}function Rr(L,K){var ve=W(L,K);return Ul(ve)?ve:void 0}var Jr=ye?ee(ye,Object):of,Ti=ef;(wt&&Ti(new wt(new ArrayBuffer(1)))!=j||Ut&&Ti(new Ut)!=f||Rt&&Ti(Rt.resolve())!=m||tn&&Ti(new tn)!=y||_t&&Ti(new _t)!=w)&&(Ti=function(L){var K=Le.call(L),ve=K==g?L.constructor:void 0,ze=ve?qs(ve):void 0;if(ze)switch(ze){case rs:return j;case is:return f;case ae:return m;case be:return y;case Ce:return w}return K});function qo(L){var K=L.length,ve=L.constructor(K);return K&&typeof L[0]=="string"&&Se.call(L,"index")&&(ve.index=L.index,ve.input=L.input),ve}function Ei(L){return typeof L.constructor=="function"&&!sf(L)?Wc(H(L)):{}}function nf(L,K,ve,ze){var Mt=L.constructor;switch(K){case C:return mo(L);case l:case c:return new Mt(+L);case j:return zl(L,ze);case E:case T:case N:case P:case I:case B:case U:case z:case G:return Yc(L,ze);case f:return _d(L,ze,ve);case p:case x:return new Mt(L);case _:return tf(L);case y:return sg(L,ze,ve);case b:return Ma(L)}}function Cd(L,K){return K=K??i,!!K&&(typeof L=="number"||Y.test(L))&&L>-1&&L%1==0&&L<K}function ig(L){var K=typeof L;return K=="string"||K=="number"||K=="symbol"||K=="boolean"?L!=="__proto__":L===null}function ag(L){return!!Ne&&Ne in L}function sf(L){var K=L&&L.constructor,ve=typeof K=="function"&&K.prototype||ie;return L===ve}function qs(L){if(L!=null){try{return Ae.call(L)}catch{}try{return L+""}catch{}}return""}function Sd(L){return bd(L,!0,!0)}function rf(L,K){return L===K||L!==L&&K!==K}function Wl(L){return og(L)&&Se.call(L,"callee")&&(!R.call(L,"callee")||Le.call(L)==a)}var jd=Array.isArray;function Gl(L){return L!=null&&Td(L.length)&&!go(L)}function og(L){return af(L)&&Gl(L)}var Yl=Te||lg;function go(L){var K=Oa(L)?Le.call(L):"";return K==d||K==h}function Td(L){return typeof L=="number"&&L>-1&&L%1==0&&L<=i}function Oa(L){var K=typeof L;return!!L&&(K=="object"||K=="function")}function af(L){return!!L&&typeof L=="object"}function Xc(L){return Gl(L)?Ho(L):Vl(L)}function of(){return[]}function lg(){return!1}t.exports=Sd})(Bb,Bb.exports);var ute=Bb.exports;const Th=In(ute),yc=t=>{const e=Th(t);let n={};return e.forEach(s=>{n[s.name]={...s}}),n},dte={name:"price",type:"field-fromTo",postfix:"₽",from:{name:"priceFrom",label:"Цена от"},to:{name:"priceTo",label:"До"},value:{}},hte={name:"rooms",type:"rooms",options:[{value:0,label:"Студия"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4+"}],value:[]},gk=(t,e,n="multiple")=>{n==="single"&&(t.filtersMain.rooms.value=e.payload.value?[e.payload.id]:[]),n==="multiple"&&(e.payload.value?t.filtersMain.rooms.value.push(e.payload.id):t.filtersMain.rooms.value=t.filtersMain.rooms.value.filter(s=>s!==e.payload.id))};function AS(t,e){return e.split(".").reduce((n,s)=>n===void 0?void 0:n[s],t)}function vk(t,e){const{value:n,name:s,path:i}=e.payload;n===""?delete AS(t,i).value[s]:AS(t,i).value={...AS(t,i).value,[s]:n}}function RF(t){Array.isArray(t)?t.length=0:typeof t=="object"&&t!==null&&Object.keys(t).forEach(e=>{typeof t[e]=="object"&&t[e]!==null?RF(t[e]):delete t[e]})}const Wi="https://api.inrut.ru",fte="b8815fe4-e76e-41b1-a0f7-6611267b535d&lang=ru_RU&suggest_apikey=9bfc622e-dd22-4a1c-ae5c-604d6dbe8bf4",hm=`https://api-maps.yandex.ru/2.1/?apikey=${fte}`,ir=globalThis||void 0||self;function LF(t,e){return function(){return t.apply(e,arguments)}}const{toString:pte}=Object.prototype,{getPrototypeOf:yk}=Object,B2=(t=>e=>{const n=pte.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fo=t=>(t=t.toLowerCase(),e=>B2(e)===t),F2=t=>e=>typeof e===t,{isArray:fm}=Array,sv=F2("undefined");function mte(t){return t!==null&&!sv(t)&&t.constructor!==null&&!sv(t.constructor)&&ya(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const BF=Fo("ArrayBuffer");function gte(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&BF(t.buffer),e}const vte=F2("string"),ya=F2("function"),FF=F2("number"),$2=t=>t!==null&&typeof t=="object",yte=t=>t===!0||t===!1,M1=t=>{if(B2(t)!=="object")return!1;const e=yk(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},xte=Fo("Date"),bte=Fo("File"),_te=Fo("Blob"),wte=Fo("FileList"),Cte=t=>$2(t)&&ya(t.pipe),Ste=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ya(t.append)&&((e=B2(t))==="formdata"||e==="object"&&ya(t.toString)&&t.toString()==="[object FormData]"))},jte=Fo("URLSearchParams"),[Tte,Ete,Nte,kte]=["ReadableStream","Request","Response","Headers"].map(Fo),Ate=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ty(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,i;if(typeof t!="object"&&(t=[t]),fm(t))for(s=0,i=t.length;s<i;s++)e.call(null,t[s],s,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let l;for(s=0;s<o;s++)l=a[s],e.call(null,t[l],l,t)}}function $F(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,i;for(;s-- >0;)if(i=n[s],e===i.toLowerCase())return i;return null}const Jd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ir,UF=t=>!sv(t)&&t!==Jd;function mE(){const{caseless:t}=UF(this)&&this||{},e={},n=(s,i)=>{const a=t&&$F(e,i)||i;M1(e[a])&&M1(s)?e[a]=mE(e[a],s):M1(s)?e[a]=mE({},s):fm(s)?e[a]=s.slice():e[a]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&ty(arguments[s],n);return e}const Dte=(t,e,n,{allOwnKeys:s}={})=>(ty(e,(i,a)=>{n&&ya(i)?t[a]=LF(i,n):t[a]=i},{allOwnKeys:s}),t),Pte=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ite=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Mte=(t,e,n,s)=>{let i,a,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!s||s(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&yk(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Ote=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},Rte=t=>{if(!t)return null;if(fm(t))return t;let e=t.length;if(!FF(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Lte=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&yk(Uint8Array)),Bte=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=s.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},Fte=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},$te=Fo("HTMLFormElement"),Ute=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),rI=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Vte=Fo("RegExp"),VF=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};ty(n,(i,a)=>{let o;(o=e(i,a,t))!==!1&&(s[a]=o||i)}),Object.defineProperties(t,s)},zte=t=>{VF(t,(e,n)=>{if(ya(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(ya(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Hte=(t,e)=>{const n={},s=i=>{i.forEach(a=>{n[a]=!0})};return fm(t)?s(t):s(String(t).split(e)),n},qte=()=>{},Wte=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,DS="abcdefghijklmnopqrstuvwxyz",iI="0123456789",zF={DIGIT:iI,ALPHA:DS,ALPHA_DIGIT:DS+DS.toUpperCase()+iI},Gte=(t=16,e=zF.ALPHA_DIGIT)=>{let n="";const{length:s}=e;for(;t--;)n+=e[Math.random()*s|0];return n};function Yte(t){return!!(t&&ya(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Xte=t=>{const e=new Array(10),n=(s,i)=>{if($2(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[i]=s;const a=fm(s)?[]:{};return ty(s,(o,l)=>{const c=n(o,i+1);!sv(c)&&(a[l]=c)}),e[i]=void 0,a}}return s};return n(t,0)},Kte=Fo("AsyncFunction"),Qte=t=>t&&($2(t)||ya(t))&&ya(t.then)&&ya(t.catch),HF=((t,e)=>t?setImmediate:e?((n,s)=>(Jd.addEventListener("message",({source:i,data:a})=>{i===Jd&&a===n&&s.length&&s.shift()()},!1),i=>{s.push(i),Jd.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ya(Jd.postMessage)),Zte=typeof queueMicrotask<"u"?queueMicrotask.bind(Jd):typeof Tc<"u"&&Tc.nextTick||HF,Re={isArray:fm,isArrayBuffer:BF,isBuffer:mte,isFormData:Ste,isArrayBufferView:gte,isString:vte,isNumber:FF,isBoolean:yte,isObject:$2,isPlainObject:M1,isReadableStream:Tte,isRequest:Ete,isResponse:Nte,isHeaders:kte,isUndefined:sv,isDate:xte,isFile:bte,isBlob:_te,isRegExp:Vte,isFunction:ya,isStream:Cte,isURLSearchParams:jte,isTypedArray:Lte,isFileList:wte,forEach:ty,merge:mE,extend:Dte,trim:Ate,stripBOM:Pte,inherits:Ite,toFlatObject:Mte,kindOf:B2,kindOfTest:Fo,endsWith:Ote,toArray:Rte,forEachEntry:Bte,matchAll:Fte,isHTMLForm:$te,hasOwnProperty:rI,hasOwnProp:rI,reduceDescriptors:VF,freezeMethods:zte,toObjectSet:Hte,toCamelCase:Ute,noop:qte,toFiniteNumber:Wte,findKey:$F,global:Jd,isContextDefined:UF,ALPHABET:zF,generateString:Gte,isSpecCompliantForm:Yte,toJSONObject:Xte,isAsyncFn:Kte,isThenable:Qte,setImmediate:HF,asap:Zte};var qF={},U2={};U2.byteLength=tne;U2.toByteArray=sne;U2.fromByteArray=ane;var al=[],$a=[],Jte=typeof Uint8Array<"u"?Uint8Array:Array,PS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pf=0,ene=PS.length;pf<ene;++pf)al[pf]=PS[pf],$a[PS.charCodeAt(pf)]=pf;$a[45]=62;$a[95]=63;function WF(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var s=n===e?0:4-n%4;return[n,s]}function tne(t){var e=WF(t),n=e[0],s=e[1];return(n+s)*3/4-s}function nne(t,e,n){return(e+n)*3/4-n}function sne(t){var e,n=WF(t),s=n[0],i=n[1],a=new Jte(nne(t,s,i)),o=0,l=i>0?s-4:s,c;for(c=0;c<l;c+=4)e=$a[t.charCodeAt(c)]<<18|$a[t.charCodeAt(c+1)]<<12|$a[t.charCodeAt(c+2)]<<6|$a[t.charCodeAt(c+3)],a[o++]=e>>16&255,a[o++]=e>>8&255,a[o++]=e&255;return i===2&&(e=$a[t.charCodeAt(c)]<<2|$a[t.charCodeAt(c+1)]>>4,a[o++]=e&255),i===1&&(e=$a[t.charCodeAt(c)]<<10|$a[t.charCodeAt(c+1)]<<4|$a[t.charCodeAt(c+2)]>>2,a[o++]=e>>8&255,a[o++]=e&255),a}function rne(t){return al[t>>18&63]+al[t>>12&63]+al[t>>6&63]+al[t&63]}function ine(t,e,n){for(var s,i=[],a=e;a<n;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(rne(s));return i.join("")}function ane(t){for(var e,n=t.length,s=n%3,i=[],a=16383,o=0,l=n-s;o<l;o+=a)i.push(ine(t,o,o+a>l?l:o+a));return s===1?(e=t[n-1],i.push(al[e>>2]+al[e<<4&63]+"==")):s===2&&(e=(t[n-2]<<8)+t[n-1],i.push(al[e>>10]+al[e>>4&63]+al[e<<2&63]+"=")),i.join("")}var xk={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */xk.read=function(t,e,n,s,i){var a,o,l=i*8-s-1,c=(1<<l)-1,u=c>>1,d=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,a=p&(1<<-d)-1,p>>=-d,d+=l;d>0;a=a*256+t[e+h],h+=f,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=s;d>0;o=o*256+t[e+h],h+=f,d-=8);if(a===0)a=1-u;else{if(a===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,s),a=a-u}return(p?-1:1)*o*Math.pow(2,a-s)};xk.write=function(t,e,n,s,i,a){var o,l,c,u=a*8-i-1,d=(1<<u)-1,h=d>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=s?0:a-1,g=s?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=f/c:e+=f*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=d?(l=0,o=d):o+h>=1?(l=(e*c-1)*Math.pow(2,i),o=o+h):(l=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=l&255,p+=g,l/=256,i-=8);for(o=o<<i|l,u+=i;u>0;t[n+p]=o&255,p+=g,o/=256,u-=8);t[n+p-g]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=U2,n=xk,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=C,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:a,ArrayBuffer:o,SharedArrayBuffer:l}=globalThis;d.TYPED_ARRAY_SUPPORT=c(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const H=new a(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,a.prototype),Object.setPrototypeOf(H,M),H.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(H){if(H>i)throw new RangeError('The value "'+H+'" is invalid for option "size"');const M=new a(H);return Object.setPrototypeOf(M,d.prototype),M}function d(H,M,R){if(typeof H=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(H)}return h(H,M,R)}d.poolSize=8192;function h(H,M,R){if(typeof H=="string")return m(H,M);if(o.isView(H))return y(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(Le(H,o)||H&&Le(H.buffer,o)||typeof l<"u"&&(Le(H,l)||H&&Le(H.buffer,l)))return x(H,M,R);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const te=H.valueOf&&H.valueOf();if(te!=null&&te!==H)return d.from(te,M,R);const ye=b(H);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return d.from(H[Symbol.toPrimitive]("string"),M,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}d.from=function(H,M,R){return h(H,M,R)},Object.setPrototypeOf(d.prototype,a.prototype),Object.setPrototypeOf(d,a);function f(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function p(H,M,R){return f(H),H<=0?u(H):M!==void 0?typeof R=="string"?u(H).fill(M,R):u(H).fill(M):u(H)}d.alloc=function(H,M,R){return p(H,M,R)};function g(H){return f(H),u(H<0?0:w(H)|0)}d.allocUnsafe=function(H){return g(H)},d.allocUnsafeSlow=function(H){return g(H)};function m(H,M){if((typeof M!="string"||M==="")&&(M="utf8"),!d.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const R=j(H,M)|0;let te=u(R);const ye=te.write(H,M);return ye!==R&&(te=te.slice(0,ye)),te}function _(H){const M=H.length<0?0:w(H.length)|0,R=u(M);for(let te=0;te<M;te+=1)R[te]=H[te]&255;return R}function y(H){if(Le(H,a)){const M=new a(H);return x(M.buffer,M.byteOffset,M.byteLength)}return _(H)}function x(H,M,R){if(M<0||H.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<M+(R||0))throw new RangeError('"length" is outside of buffer bounds');let te;return M===void 0&&R===void 0?te=new a(H):R===void 0?te=new a(H,M):te=new a(H,M,R),Object.setPrototypeOf(te,d.prototype),te}function b(H){if(d.isBuffer(H)){const M=w(H.length)|0,R=u(M);return R.length===0||H.copy(R,0,0,M),R}if(H.length!==void 0)return typeof H.length!="number"||tt(H.length)?u(0):_(H);if(H.type==="Buffer"&&Array.isArray(H.data))return _(H.data)}function w(H){if(H>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return H|0}function C(H){return+H!=H&&(H=0),d.alloc(+H)}d.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==d.prototype},d.compare=function(M,R){if(Le(M,a)&&(M=d.from(M,M.offset,M.byteLength)),Le(R,a)&&(R=d.from(R,R.offset,R.byteLength)),!d.isBuffer(M)||!d.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===R)return 0;let te=M.length,ye=R.length;for(let Te=0,$e=Math.min(te,ye);Te<$e;++Te)if(M[Te]!==R[Te]){te=M[Te],ye=R[Te];break}return te<ye?-1:ye<te?1:0},d.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(M,R){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return d.alloc(0);let te;if(R===void 0)for(R=0,te=0;te<M.length;++te)R+=M[te].length;const ye=d.allocUnsafe(R);let Te=0;for(te=0;te<M.length;++te){let $e=M[te];if(Le($e,a))Te+$e.length>ye.length?(d.isBuffer($e)||($e=d.from($e)),$e.copy(ye,Te)):a.prototype.set.call(ye,$e,Te);else if(d.isBuffer($e))$e.copy(ye,Te);else throw new TypeError('"list" argument must be an Array of Buffers');Te+=$e.length}return ye};function j(H,M){if(d.isBuffer(H))return H.length;if(o.isView(H)||Le(H,o))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const R=H.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&R===0)return 0;let ye=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return ie(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return Ae(H).length;default:if(ye)return te?-1:ie(H).length;M=(""+M).toLowerCase(),ye=!0}}d.byteLength=j;function E(H,M,R){let te=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,M>>>=0,R<=M))return"";for(H||(H="utf8");;)switch(H){case"hex":return me(this,M,R);case"utf8":case"utf-8":return J(this,M,R);case"ascii":return oe(this,M,R);case"latin1":case"binary":return he(this,M,R);case"base64":return V(this,M,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,M,R);default:if(te)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),te=!0}}d.prototype._isBuffer=!0;function T(H,M,R){const te=H[M];H[M]=H[R],H[R]=te}d.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<M;R+=2)T(this,R,R+1);return this},d.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<M;R+=4)T(this,R,R+3),T(this,R+1,R+2);return this},d.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<M;R+=8)T(this,R,R+7),T(this,R+1,R+6),T(this,R+2,R+5),T(this,R+3,R+4);return this},d.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?J(this,0,M):E.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(M){if(!d.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:d.compare(this,M)===0},d.prototype.inspect=function(){let M="";const R=t.INSPECT_MAX_BYTES;return M=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(M+=" ... "),"<Buffer "+M+">"},s&&(d.prototype[s]=d.prototype.inspect),d.prototype.compare=function(M,R,te,ye,Te){if(Le(M,a)&&(M=d.from(M,M.offset,M.byteLength)),!d.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(R===void 0&&(R=0),te===void 0&&(te=M?M.length:0),ye===void 0&&(ye=0),Te===void 0&&(Te=this.length),R<0||te>M.length||ye<0||Te>this.length)throw new RangeError("out of range index");if(ye>=Te&&R>=te)return 0;if(ye>=Te)return-1;if(R>=te)return 1;if(R>>>=0,te>>>=0,ye>>>=0,Te>>>=0,this===M)return 0;let $e=Te-ye,wt=te-R;const Ut=Math.min($e,wt),Rt=this.slice(ye,Te),tn=M.slice(R,te);for(let _t=0;_t<Ut;++_t)if(Rt[_t]!==tn[_t]){$e=Rt[_t],wt=tn[_t];break}return $e<wt?-1:wt<$e?1:0};function N(H,M,R,te,ye){if(H.length===0)return-1;if(typeof R=="string"?(te=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,tt(R)&&(R=ye?0:H.length-1),R<0&&(R=H.length+R),R>=H.length){if(ye)return-1;R=H.length-1}else if(R<0)if(ye)R=0;else return-1;if(typeof M=="string"&&(M=d.from(M,te)),d.isBuffer(M))return M.length===0?-1:P(H,M,R,te,ye);if(typeof M=="number")return M=M&255,typeof a.prototype.indexOf=="function"?ye?a.prototype.indexOf.call(H,M,R):a.prototype.lastIndexOf.call(H,M,R):P(H,[M],R,te,ye);throw new TypeError("val must be string, number or Buffer")}function P(H,M,R,te,ye){let Te=1,$e=H.length,wt=M.length;if(te!==void 0&&(te=String(te).toLowerCase(),te==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(H.length<2||M.length<2)return-1;Te=2,$e/=2,wt/=2,R/=2}function Ut(tn,_t){return Te===1?tn[_t]:tn.readUInt16BE(_t*Te)}let Rt;if(ye){let tn=-1;for(Rt=R;Rt<$e;Rt++)if(Ut(H,Rt)===Ut(M,tn===-1?0:Rt-tn)){if(tn===-1&&(tn=Rt),Rt-tn+1===wt)return tn*Te}else tn!==-1&&(Rt-=Rt-tn),tn=-1}else for(R+wt>$e&&(R=$e-wt),Rt=R;Rt>=0;Rt--){let tn=!0;for(let _t=0;_t<wt;_t++)if(Ut(H,Rt+_t)!==Ut(M,_t)){tn=!1;break}if(tn)return Rt}return-1}d.prototype.includes=function(M,R,te){return this.indexOf(M,R,te)!==-1},d.prototype.indexOf=function(M,R,te){return N(this,M,R,te,!0)},d.prototype.lastIndexOf=function(M,R,te){return N(this,M,R,te,!1)};function I(H,M,R,te){R=Number(R)||0;const ye=H.length-R;te?(te=Number(te),te>ye&&(te=ye)):te=ye;const Te=M.length;te>Te/2&&(te=Te/2);let $e;for($e=0;$e<te;++$e){const wt=parseInt(M.substr($e*2,2),16);if(tt(wt))return $e;H[R+$e]=wt}return $e}function B(H,M,R,te){return Se(ie(M,H.length-R),H,R,te)}function U(H,M,R,te){return Se(Ee(M),H,R,te)}function z(H,M,R,te){return Se(Ae(M),H,R,te)}function G(H,M,R,te){return Se(Ne(M,H.length-R),H,R,te)}d.prototype.write=function(M,R,te,ye){if(R===void 0)ye="utf8",te=this.length,R=0;else if(te===void 0&&typeof R=="string")ye=R,te=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(te)?(te=te>>>0,ye===void 0&&(ye="utf8")):(ye=te,te=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Te=this.length-R;if((te===void 0||te>Te)&&(te=Te),M.length>0&&(te<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");let $e=!1;for(;;)switch(ye){case"hex":return I(this,M,R,te);case"utf8":case"utf-8":return B(this,M,R,te);case"ascii":case"latin1":case"binary":return U(this,M,R,te);case"base64":return z(this,M,R,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,M,R,te);default:if($e)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),$e=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(H,M,R){return M===0&&R===H.length?e.fromByteArray(H):e.fromByteArray(H.slice(M,R))}function J(H,M,R){R=Math.min(H.length,R);const te=[];let ye=M;for(;ye<R;){const Te=H[ye];let $e=null,wt=Te>239?4:Te>223?3:Te>191?2:1;if(ye+wt<=R){let Ut,Rt,tn,_t;switch(wt){case 1:Te<128&&($e=Te);break;case 2:Ut=H[ye+1],(Ut&192)===128&&(_t=(Te&31)<<6|Ut&63,_t>127&&($e=_t));break;case 3:Ut=H[ye+1],Rt=H[ye+2],(Ut&192)===128&&(Rt&192)===128&&(_t=(Te&15)<<12|(Ut&63)<<6|Rt&63,_t>2047&&(_t<55296||_t>57343)&&($e=_t));break;case 4:Ut=H[ye+1],Rt=H[ye+2],tn=H[ye+3],(Ut&192)===128&&(Rt&192)===128&&(tn&192)===128&&(_t=(Te&15)<<18|(Ut&63)<<12|(Rt&63)<<6|tn&63,_t>65535&&_t<1114112&&($e=_t))}}$e===null?($e=65533,wt=1):$e>65535&&($e-=65536,te.push($e>>>10&1023|55296),$e=56320|$e&1023),te.push($e),ye+=wt}return Y(te)}const Q=4096;function Y(H){const M=H.length;if(M<=Q)return String.fromCharCode.apply(String,H);let R="",te=0;for(;te<M;)R+=String.fromCharCode.apply(String,H.slice(te,te+=Q));return R}function oe(H,M,R){let te="";R=Math.min(H.length,R);for(let ye=M;ye<R;++ye)te+=String.fromCharCode(H[ye]&127);return te}function he(H,M,R){let te="";R=Math.min(H.length,R);for(let ye=M;ye<R;++ye)te+=String.fromCharCode(H[ye]);return te}function me(H,M,R){const te=H.length;(!M||M<0)&&(M=0),(!R||R<0||R>te)&&(R=te);let ye="";for(let Te=M;Te<R;++Te)ye+=lt[H[Te]];return ye}function Oe(H,M,R){const te=H.slice(M,R);let ye="";for(let Te=0;Te<te.length-1;Te+=2)ye+=String.fromCharCode(te[Te]+te[Te+1]*256);return ye}d.prototype.slice=function(M,R){const te=this.length;M=~~M,R=R===void 0?te:~~R,M<0?(M+=te,M<0&&(M=0)):M>te&&(M=te),R<0?(R+=te,R<0&&(R=0)):R>te&&(R=te),R<M&&(R=M);const ye=this.subarray(M,R);return Object.setPrototypeOf(ye,d.prototype),ye};function xe(H,M,R){if(H%1!==0||H<0)throw new RangeError("offset is not uint");if(H+M>R)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(M,R,te){M=M>>>0,R=R>>>0,te||xe(M,R,this.length);let ye=this[M],Te=1,$e=0;for(;++$e<R&&(Te*=256);)ye+=this[M+$e]*Te;return ye},d.prototype.readUintBE=d.prototype.readUIntBE=function(M,R,te){M=M>>>0,R=R>>>0,te||xe(M,R,this.length);let ye=this[M+--R],Te=1;for(;R>0&&(Te*=256);)ye+=this[M+--R]*Te;return ye},d.prototype.readUint8=d.prototype.readUInt8=function(M,R){return M=M>>>0,R||xe(M,1,this.length),this[M]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(M,R){return M=M>>>0,R||xe(M,2,this.length),this[M]|this[M+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(M,R){return M=M>>>0,R||xe(M,2,this.length),this[M]<<8|this[M+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(M,R){return M=M>>>0,R||xe(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(M,R){return M=M>>>0,R||xe(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},d.prototype.readBigUInt64LE=it(function(M){M=M>>>0,ee(M,"offset");const R=this[M],te=this[M+7];(R===void 0||te===void 0)&&ge(M,this.length-8);const ye=R+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,Te=this[++M]+this[++M]*2**8+this[++M]*2**16+te*2**24;return BigInt(ye)+(BigInt(Te)<<BigInt(32))}),d.prototype.readBigUInt64BE=it(function(M){M=M>>>0,ee(M,"offset");const R=this[M],te=this[M+7];(R===void 0||te===void 0)&&ge(M,this.length-8);const ye=R*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],Te=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+te;return(BigInt(ye)<<BigInt(32))+BigInt(Te)}),d.prototype.readIntLE=function(M,R,te){M=M>>>0,R=R>>>0,te||xe(M,R,this.length);let ye=this[M],Te=1,$e=0;for(;++$e<R&&(Te*=256);)ye+=this[M+$e]*Te;return Te*=128,ye>=Te&&(ye-=Math.pow(2,8*R)),ye},d.prototype.readIntBE=function(M,R,te){M=M>>>0,R=R>>>0,te||xe(M,R,this.length);let ye=R,Te=1,$e=this[M+--ye];for(;ye>0&&(Te*=256);)$e+=this[M+--ye]*Te;return Te*=128,$e>=Te&&($e-=Math.pow(2,8*R)),$e},d.prototype.readInt8=function(M,R){return M=M>>>0,R||xe(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},d.prototype.readInt16LE=function(M,R){M=M>>>0,R||xe(M,2,this.length);const te=this[M]|this[M+1]<<8;return te&32768?te|4294901760:te},d.prototype.readInt16BE=function(M,R){M=M>>>0,R||xe(M,2,this.length);const te=this[M+1]|this[M]<<8;return te&32768?te|4294901760:te},d.prototype.readInt32LE=function(M,R){return M=M>>>0,R||xe(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},d.prototype.readInt32BE=function(M,R){return M=M>>>0,R||xe(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},d.prototype.readBigInt64LE=it(function(M){M=M>>>0,ee(M,"offset");const R=this[M],te=this[M+7];(R===void 0||te===void 0)&&ge(M,this.length-8);const ye=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+(te<<24);return(BigInt(ye)<<BigInt(32))+BigInt(R+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24)}),d.prototype.readBigInt64BE=it(function(M){M=M>>>0,ee(M,"offset");const R=this[M],te=this[M+7];(R===void 0||te===void 0)&&ge(M,this.length-8);const ye=(R<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(ye)<<BigInt(32))+BigInt(this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+te)}),d.prototype.readFloatLE=function(M,R){return M=M>>>0,R||xe(M,4,this.length),n.read(this,M,!0,23,4)},d.prototype.readFloatBE=function(M,R){return M=M>>>0,R||xe(M,4,this.length),n.read(this,M,!1,23,4)},d.prototype.readDoubleLE=function(M,R){return M=M>>>0,R||xe(M,8,this.length),n.read(this,M,!0,52,8)},d.prototype.readDoubleBE=function(M,R){return M=M>>>0,R||xe(M,8,this.length),n.read(this,M,!1,52,8)};function Pe(H,M,R,te,ye,Te){if(!d.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>ye||M<Te)throw new RangeError('"value" argument is out of bounds');if(R+te>H.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(M,R,te,ye){if(M=+M,R=R>>>0,te=te>>>0,!ye){const wt=Math.pow(2,8*te)-1;Pe(this,M,R,te,wt,0)}let Te=1,$e=0;for(this[R]=M&255;++$e<te&&(Te*=256);)this[R+$e]=M/Te&255;return R+te},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(M,R,te,ye){if(M=+M,R=R>>>0,te=te>>>0,!ye){const wt=Math.pow(2,8*te)-1;Pe(this,M,R,te,wt,0)}let Te=te-1,$e=1;for(this[R+Te]=M&255;--Te>=0&&($e*=256);)this[R+Te]=M/$e&255;return R+te},d.prototype.writeUint8=d.prototype.writeUInt8=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,1,255,0),this[R]=M&255,R+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,2,65535,0),this[R]=M&255,this[R+1]=M>>>8,R+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,2,65535,0),this[R]=M>>>8,this[R+1]=M&255,R+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,4,4294967295,0),this[R+3]=M>>>24,this[R+2]=M>>>16,this[R+1]=M>>>8,this[R]=M&255,R+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,4,4294967295,0),this[R]=M>>>24,this[R+1]=M>>>16,this[R+2]=M>>>8,this[R+3]=M&255,R+4};function qe(H,M,R,te,ye){ne(M,te,ye,H,R,7);let Te=Number(M&BigInt(4294967295));H[R++]=Te,Te=Te>>8,H[R++]=Te,Te=Te>>8,H[R++]=Te,Te=Te>>8,H[R++]=Te;let $e=Number(M>>BigInt(32)&BigInt(4294967295));return H[R++]=$e,$e=$e>>8,H[R++]=$e,$e=$e>>8,H[R++]=$e,$e=$e>>8,H[R++]=$e,R}function Ie(H,M,R,te,ye){ne(M,te,ye,H,R,7);let Te=Number(M&BigInt(4294967295));H[R+7]=Te,Te=Te>>8,H[R+6]=Te,Te=Te>>8,H[R+5]=Te,Te=Te>>8,H[R+4]=Te;let $e=Number(M>>BigInt(32)&BigInt(4294967295));return H[R+3]=$e,$e=$e>>8,H[R+2]=$e,$e=$e>>8,H[R+1]=$e,$e=$e>>8,H[R]=$e,R+8}d.prototype.writeBigUInt64LE=it(function(M,R=0){return qe(this,M,R,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=it(function(M,R=0){return Ie(this,M,R,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(M,R,te,ye){if(M=+M,R=R>>>0,!ye){const Ut=Math.pow(2,8*te-1);Pe(this,M,R,te,Ut-1,-Ut)}let Te=0,$e=1,wt=0;for(this[R]=M&255;++Te<te&&($e*=256);)M<0&&wt===0&&this[R+Te-1]!==0&&(wt=1),this[R+Te]=(M/$e>>0)-wt&255;return R+te},d.prototype.writeIntBE=function(M,R,te,ye){if(M=+M,R=R>>>0,!ye){const Ut=Math.pow(2,8*te-1);Pe(this,M,R,te,Ut-1,-Ut)}let Te=te-1,$e=1,wt=0;for(this[R+Te]=M&255;--Te>=0&&($e*=256);)M<0&&wt===0&&this[R+Te+1]!==0&&(wt=1),this[R+Te]=(M/$e>>0)-wt&255;return R+te},d.prototype.writeInt8=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,1,127,-128),M<0&&(M=255+M+1),this[R]=M&255,R+1},d.prototype.writeInt16LE=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,2,32767,-32768),this[R]=M&255,this[R+1]=M>>>8,R+2},d.prototype.writeInt16BE=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,2,32767,-32768),this[R]=M>>>8,this[R+1]=M&255,R+2},d.prototype.writeInt32LE=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,4,2147483647,-2147483648),this[R]=M&255,this[R+1]=M>>>8,this[R+2]=M>>>16,this[R+3]=M>>>24,R+4},d.prototype.writeInt32BE=function(M,R,te){return M=+M,R=R>>>0,te||Pe(this,M,R,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[R]=M>>>24,this[R+1]=M>>>16,this[R+2]=M>>>8,this[R+3]=M&255,R+4},d.prototype.writeBigInt64LE=it(function(M,R=0){return qe(this,M,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=it(function(M,R=0){return Ie(this,M,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ve(H,M,R,te,ye,Te){if(R+te>H.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ot(H,M,R,te,ye){return M=+M,R=R>>>0,ye||Ve(H,M,R,4),n.write(H,M,R,te,23,4),R+4}d.prototype.writeFloatLE=function(M,R,te){return ot(this,M,R,!0,te)},d.prototype.writeFloatBE=function(M,R,te){return ot(this,M,R,!1,te)};function fe(H,M,R,te,ye){return M=+M,R=R>>>0,ye||Ve(H,M,R,8),n.write(H,M,R,te,52,8),R+8}d.prototype.writeDoubleLE=function(M,R,te){return fe(this,M,R,!0,te)},d.prototype.writeDoubleBE=function(M,R,te){return fe(this,M,R,!1,te)},d.prototype.copy=function(M,R,te,ye){if(!d.isBuffer(M))throw new TypeError("argument should be a Buffer");if(te||(te=0),!ye&&ye!==0&&(ye=this.length),R>=M.length&&(R=M.length),R||(R=0),ye>0&&ye<te&&(ye=te),ye===te||M.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(te<0||te>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),M.length-R<ye-te&&(ye=M.length-R+te);const Te=ye-te;return this===M&&typeof a.prototype.copyWithin=="function"?this.copyWithin(R,te,ye):a.prototype.set.call(M,this.subarray(te,ye),R),Te},d.prototype.fill=function(M,R,te,ye){if(typeof M=="string"){if(typeof R=="string"?(ye=R,R=0,te=this.length):typeof te=="string"&&(ye=te,te=this.length),ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!d.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);if(M.length===1){const $e=M.charCodeAt(0);(ye==="utf8"&&$e<128||ye==="latin1")&&(M=$e)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(R<0||this.length<R||this.length<te)throw new RangeError("Out of range index");if(te<=R)return this;R=R>>>0,te=te===void 0?this.length:te>>>0,M||(M=0);let Te;if(typeof M=="number")for(Te=R;Te<te;++Te)this[Te]=M;else{const $e=d.isBuffer(M)?M:d.from(M,ye),wt=$e.length;if(wt===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(Te=0;Te<te-R;++Te)this[Te+R]=$e[Te%wt]}return this};const $={};function X(H,M,R){$[H]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ye,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}X("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),X("ERR_INVALID_ARG_TYPE",function(H,M){return`The "${H}" argument must be of type number. Received type ${typeof M}`},TypeError),X("ERR_OUT_OF_RANGE",function(H,M,R){let te=`The value of "${H}" is out of range.`,ye=R;return Number.isInteger(R)&&Math.abs(R)>2**32?ye=W(String(R)):typeof R=="bigint"&&(ye=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(ye=W(ye)),ye+="n"),te+=` It must be ${M}. Received ${ye}`,te},RangeError);function W(H){let M="",R=H.length;const te=H[0]==="-"?1:0;for(;R>=te+4;R-=3)M=`_${H.slice(R-3,R)}${M}`;return`${H.slice(0,R)}${M}`}function ce(H,M,R){ee(M,"offset"),(H[M]===void 0||H[M+R]===void 0)&&ge(M,H.length-(R+1))}function ne(H,M,R,te,ye,Te){if(H>R||H<M){const $e=typeof M=="bigint"?"n":"";let wt;throw M===0||M===BigInt(0)?wt=`>= 0${$e} and < 2${$e} ** ${(Te+1)*8}${$e}`:wt=`>= -(2${$e} ** ${(Te+1)*8-1}${$e}) and < 2 ** ${(Te+1)*8-1}${$e}`,new $.ERR_OUT_OF_RANGE("value",wt,H)}ce(te,ye,Te)}function ee(H,M){if(typeof H!="number")throw new $.ERR_INVALID_ARG_TYPE(M,"number",H)}function ge(H,M,R){throw Math.floor(H)!==H?(ee(H,R),new $.ERR_OUT_OF_RANGE("offset","an integer",H)):M<0?new $.ERR_BUFFER_OUT_OF_BOUNDS:new $.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${M}`,H)}const q=/[^+/0-9A-Za-z-_]/g;function re(H){if(H=H.split("=")[0],H=H.trim().replace(q,""),H.length<2)return"";for(;H.length%4!==0;)H=H+"=";return H}function ie(H,M){M=M||1/0;let R;const te=H.length;let ye=null;const Te=[];for(let $e=0;$e<te;++$e){if(R=H.charCodeAt($e),R>55295&&R<57344){if(!ye){if(R>56319){(M-=3)>-1&&Te.push(239,191,189);continue}else if($e+1===te){(M-=3)>-1&&Te.push(239,191,189);continue}ye=R;continue}if(R<56320){(M-=3)>-1&&Te.push(239,191,189),ye=R;continue}R=(ye-55296<<10|R-56320)+65536}else ye&&(M-=3)>-1&&Te.push(239,191,189);if(ye=null,R<128){if((M-=1)<0)break;Te.push(R)}else if(R<2048){if((M-=2)<0)break;Te.push(R>>6|192,R&63|128)}else if(R<65536){if((M-=3)<0)break;Te.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((M-=4)<0)break;Te.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return Te}function Ee(H){const M=[];for(let R=0;R<H.length;++R)M.push(H.charCodeAt(R)&255);return M}function Ne(H,M){let R,te,ye;const Te=[];for(let $e=0;$e<H.length&&!((M-=2)<0);++$e)R=H.charCodeAt($e),te=R>>8,ye=R%256,Te.push(ye),Te.push(te);return Te}function Ae(H){return e.toByteArray(re(H))}function Se(H,M,R,te){let ye;for(ye=0;ye<te&&!(ye+R>=M.length||ye>=H.length);++ye)M[ye+R]=H[ye];return ye}function Le(H,M){return H instanceof M||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===M.name}function tt(H){return H!==H}const lt=function(){const H="0123456789abcdef",M=new Array(256);for(let R=0;R<16;++R){const te=R*16;for(let ye=0;ye<16;++ye)M[te+ye]=H[R]+H[ye]}return M}();function it(H){return typeof BigInt>"u"?Pt:H}function Pt(){throw new Error("BigInt not supported")}})(qF);const vl=qF.Buffer;function Ft(t,e,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}Re.inherits(Ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Re.toJSONObject(this.config),code:this.code,status:this.status}}});const GF=Ft.prototype,YF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{YF[t]={value:t}});Object.defineProperties(Ft,YF);Object.defineProperty(GF,"isAxiosError",{value:!0});Ft.from=(t,e,n,s,i,a)=>{const o=Object.create(GF);return Re.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ft.call(o,t.message,e,n,s,i),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};const one=null;function gE(t){return Re.isPlainObject(t)||Re.isArray(t)}function XF(t){return Re.endsWith(t,"[]")?t.slice(0,-2):t}function aI(t,e,n){return t?t.concat(e).map(function(i,a){return i=XF(i),!n&&a?"["+i+"]":i}).join(n?".":""):e}function lne(t){return Re.isArray(t)&&!t.some(gE)}const cne=Re.toFlatObject(Re,{},null,function(e){return/^is[A-Z]/.test(e)});function V2(t,e,n){if(!Re.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Re.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,_){return!Re.isUndefined(_[m])});const s=n.metaTokens,i=n.visitor||d,a=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Re.isSpecCompliantForm(e);if(!Re.isFunction(i))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(Re.isDate(g))return g.toISOString();if(!c&&Re.isBlob(g))throw new Ft("Blob is not supported. Use a Buffer instead.");return Re.isArrayBuffer(g)||Re.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):vl.from(g):g}function d(g,m,_){let y=g;if(g&&!_&&typeof g=="object"){if(Re.endsWith(m,"{}"))m=s?m:m.slice(0,-2),g=JSON.stringify(g);else if(Re.isArray(g)&&lne(g)||(Re.isFileList(g)||Re.endsWith(m,"[]"))&&(y=Re.toArray(g)))return m=XF(m),y.forEach(function(b,w){!(Re.isUndefined(b)||b===null)&&e.append(o===!0?aI([m],w,a):o===null?m:m+"[]",u(b))}),!1}return gE(g)?!0:(e.append(aI(_,m,a),u(g)),!1)}const h=[],f=Object.assign(cne,{defaultVisitor:d,convertValue:u,isVisitable:gE});function p(g,m){if(!Re.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(g),Re.forEach(g,function(y,x){(!(Re.isUndefined(y)||y===null)&&i.call(e,y,Re.isString(x)?x.trim():x,m,f))===!0&&p(y,m?m.concat(x):[x])}),h.pop()}}if(!Re.isObject(t))throw new TypeError("data must be an object");return p(t),e}function oI(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function bk(t,e){this._pairs=[],t&&V2(t,this,e)}const KF=bk.prototype;KF.append=function(e,n){this._pairs.push([e,n])};KF.toString=function(e){const n=e?function(s){return e.call(this,s,oI)}:oI;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function une(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function QF(t,e,n){if(!e)return t;const s=n&&n.encode||une,i=n&&n.serialize;let a;if(i?a=i(e,n):a=Re.isURLSearchParams(e)?e.toString():new bk(e,n).toString(s),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class lI{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Re.forEach(this.handlers,function(s){s!==null&&e(s)})}}const ZF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dne=typeof URLSearchParams<"u"?URLSearchParams:bk,hne=typeof FormData<"u"?FormData:null,fne=typeof Blob<"u"?Blob:null,pne={isBrowser:!0,classes:{URLSearchParams:dne,FormData:hne,Blob:fne},protocols:["http","https","file","blob","url","data"]},_k=typeof window<"u"&&typeof document<"u",vE=typeof navigator=="object"&&navigator||void 0,mne=_k&&(!vE||["ReactNative","NativeScript","NS"].indexOf(vE.product)<0),gne=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vne=_k&&window.location.href||"http://localhost",yne=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_k,hasStandardBrowserEnv:mne,hasStandardBrowserWebWorkerEnv:gne,navigator:vE,origin:vne},Symbol.toStringTag,{value:"Module"})),Gi={...yne,...pne};function xne(t,e){return V2(t,new Gi.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,a){return Gi.isNode&&Re.isBuffer(n)?(this.append(s,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function bne(t){return Re.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _ne(t){const e={},n=Object.keys(t);let s;const i=n.length;let a;for(s=0;s<i;s++)a=n[s],e[a]=t[a];return e}function JF(t){function e(n,s,i,a){let o=n[a++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=a>=n.length;return o=!o&&Re.isArray(i)?i.length:o,c?(Re.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!l):((!i[o]||!Re.isObject(i[o]))&&(i[o]=[]),e(n,s,i[o],a)&&Re.isArray(i[o])&&(i[o]=_ne(i[o])),!l)}if(Re.isFormData(t)&&Re.isFunction(t.entries)){const n={};return Re.forEachEntry(t,(s,i)=>{e(bne(s),i,n,0)}),n}return null}function wne(t,e,n){if(Re.isString(t))try{return(e||JSON.parse)(t),Re.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(0,JSON.stringify)(t)}const ny={transitional:ZF,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,a=Re.isObject(e);if(a&&Re.isHTMLForm(e)&&(e=new FormData(e)),Re.isFormData(e))return i?JSON.stringify(JF(e)):e;if(Re.isArrayBuffer(e)||Re.isBuffer(e)||Re.isStream(e)||Re.isFile(e)||Re.isBlob(e)||Re.isReadableStream(e))return e;if(Re.isArrayBufferView(e))return e.buffer;if(Re.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return xne(e,this.formSerializer).toString();if((l=Re.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return V2(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),wne(e)):e}],transformResponse:[function(e){const n=this.transitional||ny.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Re.isResponse(e)||Re.isReadableStream(e))return e;if(e&&Re.isString(e)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?Ft.from(l,Ft.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gi.classes.FormData,Blob:Gi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Re.forEach(["delete","get","head","post","put","patch"],t=>{ny.headers[t]={}});const Cne=Re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sne=t=>{const e={};let n,s,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||e[n]&&Cne[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},cI=Symbol("internals");function wg(t){return t&&String(t).trim().toLowerCase()}function O1(t){return t===!1||t==null?t:Re.isArray(t)?t.map(O1):String(t)}function jne(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const Tne=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function IS(t,e,n,s,i){if(Re.isFunction(s))return s.call(this,e,n);if(i&&(e=n),!!Re.isString(e)){if(Re.isString(s))return e.indexOf(s)!==-1;if(Re.isRegExp(s))return s.test(e)}}function Ene(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function Nne(t,e){const n=Re.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(i,a,o){return this[s].call(this,e,i,a,o)},configurable:!0})})}class Yi{constructor(e){e&&this.set(e)}set(e,n,s){const i=this;function a(l,c,u){const d=wg(c);if(!d)throw new Error("header name must be a non-empty string");const h=Re.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||c]=O1(l))}const o=(l,c)=>Re.forEach(l,(u,d)=>a(u,d,c));if(Re.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Re.isString(e)&&(e=e.trim())&&!Tne(e))o(Sne(e),n);else if(Re.isHeaders(e))for(const[l,c]of e.entries())a(c,l,s);else e!=null&&a(n,e,s);return this}get(e,n){if(e=wg(e),e){const s=Re.findKey(this,e);if(s){const i=this[s];if(!n)return i;if(n===!0)return jne(i);if(Re.isFunction(n))return n.call(this,i,s);if(Re.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=wg(e),e){const s=Re.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||IS(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let i=!1;function a(o){if(o=wg(o),o){const l=Re.findKey(s,o);l&&(!n||IS(s,s[l],l,n))&&(delete s[l],i=!0)}}return Re.isArray(e)?e.forEach(a):a(e),i}clear(e){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const a=n[s];(!e||IS(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const n=this,s={};return Re.forEach(this,(i,a)=>{const o=Re.findKey(s,a);if(o){n[o]=O1(i),delete n[a];return}const l=e?Ene(a):String(a).trim();l!==a&&delete n[a],n[l]=O1(i),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Re.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=e&&Re.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[cI]=this[cI]={accessors:{}}).accessors,i=this.prototype;function a(o){const l=wg(o);s[l]||(Nne(i,o),s[l]=!0)}return Re.isArray(e)?e.forEach(a):a(e),this}}Yi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Re.reduceDescriptors(Yi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});Re.freezeMethods(Yi);function MS(t,e){const n=this||ny,s=e||n,i=Yi.from(s.headers);let a=s.data;return Re.forEach(t,function(l){a=l.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function e7(t){return!!(t&&t.__CANCEL__)}function pm(t,e,n){Ft.call(this,t??"canceled",Ft.ERR_CANCELED,e,n),this.name="CanceledError"}Re.inherits(pm,Ft,{__CANCEL__:!0});function t7(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new Ft("Request failed with status code "+n.status,[Ft.ERR_BAD_REQUEST,Ft.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function kne(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Ane(t,e){t=t||10;const n=new Array(t),s=new Array(t);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=s[a];o||(o=u),n[i]=c,s[i]=u;let h=a,f=0;for(;h!==i;)f+=n[h++],h=h%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),u-o<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function Dne(t,e){let n=0,s=1e3/e,i,a;const o=(u,d=Date.now())=>{n=d,i=null,a&&(clearTimeout(a),a=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=s?o(u,d):(i=u,a||(a=setTimeout(()=>{a=null,o(i)},s-h)))},()=>i&&o(i)]}const Fb=(t,e,n=3)=>{let s=0;const i=Ane(50,250);return Dne(a=>{const o=a.loaded,l=a.lengthComputable?a.total:void 0,c=o-s,u=i(c),d=o<=l;s=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:a,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},uI=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},dI=t=>(...e)=>Re.asap(()=>t(...e)),Pne=Gi.hasStandardBrowserEnv?function(){const e=Gi.navigator&&/(msie|trident)/i.test(Gi.navigator.userAgent),n=document.createElement("a");let s;function i(a){let o=a;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=i(window.location.href),function(o){const l=Re.isString(o)?i(o):o;return l.protocol===s.protocol&&l.host===s.host}}():function(){return function(){return!0}}(),Ine=Gi.hasStandardBrowserEnv?{write(t,e,n,s,i,a){const o=[t+"="+encodeURIComponent(e)];Re.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Re.isString(s)&&o.push("path="+s),Re.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Mne(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function One(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function n7(t,e){return t&&!Mne(e)?One(t,e):e}const hI=t=>t instanceof Yi?{...t}:t;function Eh(t,e){e=e||{};const n={};function s(u,d,h){return Re.isPlainObject(u)&&Re.isPlainObject(d)?Re.merge.call({caseless:h},u,d):Re.isPlainObject(d)?Re.merge({},d):Re.isArray(d)?d.slice():d}function i(u,d,h){if(Re.isUndefined(d)){if(!Re.isUndefined(u))return s(void 0,u,h)}else return s(u,d,h)}function a(u,d){if(!Re.isUndefined(d))return s(void 0,d)}function o(u,d){if(Re.isUndefined(d)){if(!Re.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function l(u,d,h){if(h in e)return s(u,d);if(h in t)return s(void 0,u)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d)=>i(hI(u),hI(d),!0)};return Re.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=c[d]||i,f=h(t[d],e[d],d);Re.isUndefined(f)&&h!==l||(n[d]=f)}),n}const s7=t=>{const e=Eh({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=e;e.headers=o=Yi.from(o),e.url=QF(n7(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Re.isFormData(n)){if(Gi.hasStandardBrowserEnv||Gi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...d]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Gi.hasStandardBrowserEnv&&(s&&Re.isFunction(s)&&(s=s(e)),s||s!==!1&&Pne(e.url))){const u=i&&a&&Ine.read(a);u&&o.set(i,u)}return e},Rne=typeof XMLHttpRequest<"u",Lne=Rne&&function(t){return new Promise(function(n,s){const i=s7(t);let a=i.data;const o=Yi.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=i,d,h,f,p,g;function m(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function y(){if(!_)return;const b=Yi.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),C={data:!l||l==="text"||l==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:b,config:t,request:_};t7(function(E){n(E),m()},function(E){s(E),m()},C),_=null}"onloadend"in _?_.onloadend=y:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(y)},_.onabort=function(){_&&(s(new Ft("Request aborted",Ft.ECONNABORTED,t,_)),_=null)},_.onerror=function(){s(new Ft("Network Error",Ft.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let w=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||ZF;i.timeoutErrorMessage&&(w=i.timeoutErrorMessage),s(new Ft(w,C.clarifyTimeoutError?Ft.ETIMEDOUT:Ft.ECONNABORTED,t,_)),_=null},a===void 0&&o.setContentType(null),"setRequestHeader"in _&&Re.forEach(o.toJSON(),function(w,C){_.setRequestHeader(C,w)}),Re.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),l&&l!=="json"&&(_.responseType=i.responseType),u&&([f,g]=Fb(u,!0),_.addEventListener("progress",f)),c&&_.upload&&([h,p]=Fb(c),_.upload.addEventListener("progress",h),_.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=b=>{_&&(s(!b||b.type?new pm(null,t,_):b),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const x=kne(i.url);if(x&&Gi.protocols.indexOf(x)===-1){s(new Ft("Unsupported protocol "+x+":",Ft.ERR_BAD_REQUEST,t));return}_.send(a||null)})},Bne=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,i;const a=function(u){if(!i){i=!0,l();const d=u instanceof Error?u:this.reason;s.abort(d instanceof Ft?d:new pm(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,a(new Ft(`timeout ${e} of ms exceeded`,Ft.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),t=null)};t.forEach(u=>u.addEventListener("abort",a));const{signal:c}=s;return c.unsubscribe=()=>Re.asap(l),c}},Fne=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,i;for(;s<n;)i=s+e,yield t.slice(s,i),s=i},$ne=async function*(t,e){for await(const n of Une(t))yield*Fne(n,e)},Une=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},fI=(t,e,n,s)=>{const i=$ne(t,e);let a=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await i.next();if(u){l(),c.close();return}let h=d.byteLength;if(n){let f=a+=h;n(f)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},z2=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",r7=z2&&typeof ReadableStream=="function",Vne=z2&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),i7=(t,...e)=>{try{return!!t(...e)}catch{return!1}},zne=r7&&i7(()=>{let t=!1;const e=new Request(Gi.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),pI=64*1024,yE=r7&&i7(()=>Re.isReadableStream(new Response("").body)),$b={stream:yE&&(t=>t.body)};z2&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!$b[e]&&($b[e]=Re.isFunction(t[e])?n=>n[e]():(n,s)=>{throw new Ft(`Response type '${e}' is not supported`,Ft.ERR_NOT_SUPPORT,s)})})})(new Response);const Hne=async t=>{if(t==null)return 0;if(Re.isBlob(t))return t.size;if(Re.isSpecCompliantForm(t))return(await new Request(Gi.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Re.isArrayBufferView(t)||Re.isArrayBuffer(t))return t.byteLength;if(Re.isURLSearchParams(t)&&(t=t+""),Re.isString(t))return(await Vne(t)).byteLength},qne=async(t,e)=>{const n=Re.toFiniteNumber(t.getContentLength());return n??Hne(e)},Wne=z2&&(async t=>{let{url:e,method:n,data:s,signal:i,cancelToken:a,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:f}=s7(t);u=u?(u+"").toLowerCase():"text";let p=Bne([i,a&&a.toAbortSignal()],o),g;const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let _;try{if(c&&zne&&n!=="get"&&n!=="head"&&(_=await qne(d,s))!==0){let C=new Request(e,{method:"POST",body:s,duplex:"half"}),j;if(Re.isFormData(s)&&(j=C.headers.get("content-type"))&&d.setContentType(j),C.body){const[E,T]=uI(_,Fb(dI(c)));s=fI(C.body,pI,E,T)}}Re.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;g=new Request(e,{...f,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:y?h:void 0});let x=await fetch(g);const b=yE&&(u==="stream"||u==="response");if(yE&&(l||b&&m)){const C={};["status","statusText","headers"].forEach(N=>{C[N]=x[N]});const j=Re.toFiniteNumber(x.headers.get("content-length")),[E,T]=l&&uI(j,Fb(dI(l),!0))||[];x=new Response(fI(x.body,pI,E,()=>{T&&T(),m&&m()}),C)}u=u||"text";let w=await $b[Re.findKey($b,u)||"text"](x,t);return!b&&m&&m(),await new Promise((C,j)=>{t7(C,j,{data:w,headers:Yi.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:g})})}catch(y){throw m&&m(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new Ft("Network Error",Ft.ERR_NETWORK,t,g),{cause:y.cause||y}):Ft.from(y,y&&y.code,t,g)}}),xE={http:one,xhr:Lne,fetch:Wne};Re.forEach(xE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const mI=t=>`- ${t}`,Gne=t=>Re.isFunction(t)||t===null||t===!1,a7={getAdapter:t=>{t=Re.isArray(t)?t:[t];const{length:e}=t;let n,s;const i={};for(let a=0;a<e;a++){n=t[a];let o;if(s=n,!Gne(n)&&(s=xE[(o=String(n)).toLowerCase()],s===void 0))throw new Ft(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+a]=s}if(!s){const a=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?a.length>1?`since :
`+a.map(mI).join(`
`):" "+mI(a[0]):"as no adapter specified";throw new Ft("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:xE};function OS(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new pm(null,t)}function gI(t){return OS(t),t.headers=Yi.from(t.headers),t.data=MS.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),a7.getAdapter(t.adapter||ny.adapter)(t).then(function(s){return OS(t),s.data=MS.call(t,t.transformResponse,s),s.headers=Yi.from(s.headers),s},function(s){return e7(s)||(OS(t),s&&s.response&&(s.response.data=MS.call(t,t.transformResponse,s.response),s.response.headers=Yi.from(s.response.headers))),Promise.reject(s)})}const o7="1.7.7",wk={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{wk[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const vI={};wk.transitional=function(e,n,s){function i(a,o){return"[Axios v"+o7+"] Transitional option '"+a+"'"+o+(s?". "+s:"")}return(a,o,l)=>{if(e===!1)throw new Ft(i(o," has been removed"+(n?" in "+n:"")),Ft.ERR_DEPRECATED);return n&&!vI[o]&&(vI[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,o,l):!0}};function Yne(t,e,n){if(typeof t!="object")throw new Ft("options must be an object",Ft.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const a=s[i],o=e[a];if(o){const l=t[a],c=l===void 0||o(l,a,t);if(c!==!0)throw new Ft("option "+a+" must be "+c,Ft.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ft("Unknown option "+a,Ft.ERR_BAD_OPTION)}}const bE={assertOptions:Yne,validators:wk},Zc=bE.validators;class ch{constructor(e){this.defaults=e,this.interceptors={request:new lI,response:new lI}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Eh(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:a}=n;s!==void 0&&bE.assertOptions(s,{silentJSONParsing:Zc.transitional(Zc.boolean),forcedJSONParsing:Zc.transitional(Zc.boolean),clarifyTimeoutError:Zc.transitional(Zc.boolean)},!1),i!=null&&(Re.isFunction(i)?n.paramsSerializer={serialize:i}:bE.assertOptions(i,{encode:Zc.function,serialize:Zc.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&Re.merge(a.common,a[n.method]);a&&Re.forEach(["delete","get","head","post","put","patch","common"],g=>{delete a[g]}),n.headers=Yi.concat(o,a);const l=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let d,h=0,f;if(!c){const g=[gI.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,u),f=g.length,d=Promise.resolve(n);h<f;)d=d.then(g[h++],g[h++]);return d}f=l.length;let p=n;for(h=0;h<f;){const g=l[h++],m=l[h++];try{p=g(p)}catch(_){m.call(this,_);break}}try{d=gI.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Eh(this.defaults,e);const n=n7(e.baseURL,e.url);return QF(n,e.params,e.paramsSerializer)}}Re.forEach(["delete","get","head","options"],function(e){ch.prototype[e]=function(n,s){return this.request(Eh(s||{},{method:e,url:n,data:(s||{}).data}))}});Re.forEach(["post","put","patch"],function(e){function n(s){return function(a,o,l){return this.request(Eh(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}ch.prototype[e]=n(),ch.prototype[e+"Form"]=n(!0)});class Ck{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const s=this;this.promise.then(i=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](i);s._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(l=>{s.subscribe(l),a=l}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},e(function(a,o,l){s.reason||(s.reason=new pm(a,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Ck(function(i){e=i}),cancel:e}}}function Xne(t){return function(n){return t.apply(null,n)}}function Kne(t){return Re.isObject(t)&&t.isAxiosError===!0}const _E={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_E).forEach(([t,e])=>{_E[e]=t});function l7(t){const e=new ch(t),n=LF(ch.prototype.request,e);return Re.extend(n,ch.prototype,e,{allOwnKeys:!0}),Re.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return l7(Eh(t,i))},n}const Us=l7(ny);Us.Axios=ch;Us.CanceledError=pm;Us.CancelToken=Ck;Us.isCancel=e7;Us.VERSION=o7;Us.toFormData=V2;Us.AxiosError=Ft;Us.Cancel=Us.CanceledError;Us.all=function(e){return Promise.all(e)};Us.spread=Xne;Us.isAxiosError=Kne;Us.mergeConfig=Eh;Us.AxiosHeaders=Yi;Us.formToJSON=t=>JF(Re.isHTMLForm(t)?new FormData(t):t);Us.getAdapter=a7.getAdapter;Us.HttpStatusCode=_E;Us.default=Us;var Ax={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var yI;function Qne(){if(yI)return Ax;yI=1,Ax.parse=o,Ax.serialize=u;var t=Object.prototype.toString,e=Object.prototype.hasOwnProperty,n=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,s=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/;function o(p,g){if(typeof p!="string")throw new TypeError("argument str must be a string");var m={},_=p.length;if(_<2)return m;var y=g&&g.decode||d,x=0,b=0,w=0;do{if(b=p.indexOf("=",x),b===-1)break;if(w=p.indexOf(";",x),w===-1)w=_;else if(b>w){x=p.lastIndexOf(";",b-1)+1;continue}var C=l(p,x,b),j=c(p,b,C),E=p.slice(C,j);if(!e.call(m,E)){var T=l(p,b+1,w),N=c(p,w,T);p.charCodeAt(T)===34&&p.charCodeAt(N-1)===34&&(T++,N--);var P=p.slice(T,N);m[E]=f(P,y)}x=w+1}while(x<_);return m}function l(p,g,m){do{var _=p.charCodeAt(g);if(_!==32&&_!==9)return g}while(++g<m);return m}function c(p,g,m){for(;g>m;){var _=p.charCodeAt(--g);if(_!==32&&_!==9)return g+1}return m}function u(p,g,m){var _=m&&m.encode||encodeURIComponent;if(typeof _!="function")throw new TypeError("option encode is invalid");if(!n.test(p))throw new TypeError("argument name is invalid");var y=_(g);if(!s.test(y))throw new TypeError("argument val is invalid");var x=p+"="+y;if(!m)return x;if(m.maxAge!=null){var b=Math.floor(m.maxAge);if(!isFinite(b))throw new TypeError("option maxAge is invalid");x+="; Max-Age="+b}if(m.domain){if(!i.test(m.domain))throw new TypeError("option domain is invalid");x+="; Domain="+m.domain}if(m.path){if(!a.test(m.path))throw new TypeError("option path is invalid");x+="; Path="+m.path}if(m.expires){var w=m.expires;if(!h(w)||isNaN(w.valueOf()))throw new TypeError("option expires is invalid");x+="; Expires="+w.toUTCString()}if(m.httpOnly&&(x+="; HttpOnly"),m.secure&&(x+="; Secure"),m.partitioned&&(x+="; Partitioned"),m.priority){var C=typeof m.priority=="string"?m.priority.toLowerCase():m.priority;switch(C){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(m.sameSite){var j=typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite;switch(j){case!0:x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"strict":x+="; SameSite=Strict";break;case"none":x+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return x}function d(p){return p.indexOf("%")!==-1?decodeURIComponent(p):p}function h(p){return t.call(p)==="[object Date]"}function f(p,g){try{return g(p)}catch{return p}}return Ax}var R1=Qne();function Zne(){const t=typeof ir>"u"?void 0:ir.TEST_HAS_DOCUMENT_COOKIE;return typeof t=="boolean"?t:typeof document=="object"&&typeof document.cookie=="string"}function Jne(t){return typeof t=="string"?R1.parse(t):typeof t=="object"&&t!==null?t:{}}function RS(t,e={}){const n=ese(t);if(!e.doNotParse)try{return JSON.parse(n)}catch{}return t}function ese(t){return t&&t[0]==="j"&&t[1]===":"?t.substr(2):t}class c7{constructor(e,n={}){this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const i=this.cookies;this.cookies=R1.parse(document.cookie),this._checkChanges(i)};const s=typeof document>"u"?"":document.cookie;this.cookies=Jne(e||s),this.defaultSetOptions=n,this.HAS_DOCUMENT_COOKIE=Zne()}_emitChange(e){for(let n=0;n<this.changeListeners.length;++n)this.changeListeners[n](e)}_checkChanges(e){new Set(Object.keys(e).concat(Object.keys(this.cookies))).forEach(s=>{e[s]!==this.cookies[s]&&this._emitChange({name:s,value:RS(this.cookies[s])})})}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(e,n={}){return n.doNotUpdate||this.update(),RS(this.cookies[e],n)}getAll(e={}){e.doNotUpdate||this.update();const n={};for(let s in this.cookies)n[s]=RS(this.cookies[s],e);return n}set(e,n,s){s?s=Object.assign(Object.assign({},this.defaultSetOptions),s):s=this.defaultSetOptions;const i=typeof n=="string"?n:JSON.stringify(n);this.cookies=Object.assign(Object.assign({},this.cookies),{[e]:i}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=R1.serialize(e,i,s)),this._emitChange({name:e,value:n,options:s})}remove(e,n){const s=n=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),n),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=R1.serialize(e,"",s)),this._emitChange({name:e,value:void 0,options:n})}addChangeListener(e){this.changeListeners.push(e),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===1&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(e){const n=this.changeListeners.indexOf(e);n>=0&&this.changeListeners.splice(n,1),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===0&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}const tse=v.createContext(new c7);var u7={exports:{}},bn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI;function nse(){if(xI)return bn;xI=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,f=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,m=t?Symbol.for("react.block"):60121,_=t?Symbol.for("react.fundamental"):60117,y=t?Symbol.for("react.responder"):60118,x=t?Symbol.for("react.scope"):60119;function b(C){if(typeof C=="object"&&C!==null){var j=C.$$typeof;switch(j){case e:switch(C=C.type,C){case c:case u:case s:case a:case i:case h:return C;default:switch(C=C&&C.$$typeof,C){case l:case d:case g:case p:case o:return C;default:return j}}case n:return j}}}function w(C){return b(C)===u}return bn.AsyncMode=c,bn.ConcurrentMode=u,bn.ContextConsumer=l,bn.ContextProvider=o,bn.Element=e,bn.ForwardRef=d,bn.Fragment=s,bn.Lazy=g,bn.Memo=p,bn.Portal=n,bn.Profiler=a,bn.StrictMode=i,bn.Suspense=h,bn.isAsyncMode=function(C){return w(C)||b(C)===c},bn.isConcurrentMode=w,bn.isContextConsumer=function(C){return b(C)===l},bn.isContextProvider=function(C){return b(C)===o},bn.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===e},bn.isForwardRef=function(C){return b(C)===d},bn.isFragment=function(C){return b(C)===s},bn.isLazy=function(C){return b(C)===g},bn.isMemo=function(C){return b(C)===p},bn.isPortal=function(C){return b(C)===n},bn.isProfiler=function(C){return b(C)===a},bn.isStrictMode=function(C){return b(C)===i},bn.isSuspense=function(C){return b(C)===h},bn.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===s||C===u||C===a||C===i||C===h||C===f||typeof C=="object"&&C!==null&&(C.$$typeof===g||C.$$typeof===p||C.$$typeof===o||C.$$typeof===l||C.$$typeof===d||C.$$typeof===_||C.$$typeof===y||C.$$typeof===x||C.$$typeof===m)},bn.typeOf=b,bn}u7.exports=nse();var sse=u7.exports,d7=sse,rse={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ise={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},h7={};h7[d7.ForwardRef]=rse;h7[d7.Memo]=ise;function ase(){return typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"}function ur(t,e){const n=v.useContext(tse);if(!n)throw new Error("Missing <CookiesProvider>");const i=Object.assign(Object.assign({},{doNotUpdate:!0}),e),[a,o]=v.useState(()=>n.getAll(i));ase()&&v.useLayoutEffect(()=>{function d(){const h=n.getAll(i);ose()&&o(h)}return n.addChangeListener(d),()=>{n.removeChangeListener(d)}},[n,a]);const l=v.useMemo(()=>n.set.bind(n),[n]),c=v.useMemo(()=>n.remove.bind(n),[n]),u=v.useMemo(()=>n.update.bind(n),[n]);return[a,l,c,u]}function ose(t,e,n){return!0}const H2=new c7,q2=Us.create({withCredentials:!0,baseURL:Wi,headers:{"Content-Type":"application/json"}}),Me=async(t,e={},n={})=>{try{const s=H2.get("access_token")||"";return await q2.post(t,e,{headers:{Accept:"application/json",Authorization:`Bearer ${s}`,...n}})}catch(s){throw s}},lse=async(t,e,n={})=>{try{const s=H2.get("access_token")||"";return await q2.put(t,e,{headers:{Authorization:`Bearer ${s}`,...n}})}catch(s){throw s}},Sk=async t=>{try{const e=H2.get("access_token")||"";return await q2.delete(t,{headers:{Authorization:`Bearer ${e}`}})}catch(e){throw e}},Ue=async(t,e="")=>{try{const n=H2.get("access_token")||"";return await q2.get(t,{params:e,headers:{Accept:"application/json",Authorization:`Bearer ${n}`}})}catch(n){throw n}},L1=CZ("listing/fetchFilters",async t=>{const{data:e}=await Ue("/api/catalog/filters",t);return e}),wE={type:"list",page:1,mapVisiblePlacemarks:[],mapPlacemarks:[],resultFilters:{},startIsLoading:!0,isInitMap:!1,lastTrigger:"filter",sortBy:"price_asc",mapLocationCoordinates:[],filtersOther:{tags:[],advantages:[],stickers:[],is_video:!1,is_gift:!1},filtersMain:{price:yc([dte]).price,rooms:yc([hte]).rooms},filtersAdditional:{}},cse=()=>{const t=Th(wE);if(window.location.search){const e=L2.parse(window.location.search.substring(1));e.type&&(t.type=e.type)}return t},f7=ad({name:"listing",initialState:cse(),reducers:{roomsToggle(t,e){gk(t,e,"single")},changeType(t,e){t.type=e.payload},changeFieldInput(t,e){vk(t,e)},changeFieldAdditional(t,e){const n=t.filtersAdditional[e.payload.name];n&&(n.value=e.payload.selectedOptions)},resetFilters(t){t.filtersMain=Th(wE.filtersMain),t.filtersOther=Th(wE.filtersOther),Object.keys(t.filtersAdditional).forEach(e=>{RF(t.filtersAdditional[e].value)}),t.type==="list"&&(t.mapVisiblePlacemarks=null,t.mapLocationCoordinates=[])},setVisiblePlacemarks(t,e){t.mapVisiblePlacemarks=[...e.payload]},setVisiblePlacemarksNull(t){t.mapVisiblePlacemarks=null},setMapPlacemarks(t,e){t.mapPlacemarks=e.payload},tagsToggle(t,e){e.payload.value?t.filtersOther[e.payload.type]=[...t.filtersOther[e.payload.type],e.payload.option.value]:t.filtersOther[e.payload.type]=t.filtersOther[e.payload.type].filter(n=>n!==e.payload.option.value)},additionalParametersToggle(t,e){t.filtersOther[e.payload.option.value]=e.payload.value},setResultFilters(t,e){t.resultFilters=e.payload},setSort(t,e){t.sortBy=e.payload},startIsLoading(t,e){t.startIsLoading=!1},setCurrentPage(t,e){t.page=e.payload},lastTriggerFn(t,e){t.lastTrigger=e.payload},setMapInit(t,e){t.isInitMap=e.payload},setMapLocationCoordinates(t,e){t.mapLocationCoordinates=e.payload,e.payload.length===0&&t.type==="list"&&(t.mapVisiblePlacemarks=null,t.mapLocationCoordinates=[])}},extraReducers:t=>{t.addCase(L1.pending,e=>{e.filtersAdditional={}}).addCase(L1.fulfilled,(e,n)=>{const s=n.payload.map(i=>i.type==="field-fromTo"?{...i,value:{}}:i);e.filtersAdditional=yc(s)}).addCase(L1.rejected,e=>{e.filtersAdditional={}})}}),{roomsToggle:p7,changeType:use,changeFieldInput:CE,resetFilters:dse,changeFieldAdditional:hse,setVisiblePlacemarks:jk,setResultFilters:fse,startIsLoading:pse,setCurrentPage:LS,lastTriggerFn:BS,setVisiblePlacemarksNull:mse,setSort:gse,tagsToggle:x0,additionalParametersToggle:vse,setMapPlacemarks:yse,setMapInit:xse,setMapLocationCoordinates:B1}=f7.actions,bse=f7.reducer,m7={name:"rooms",type:"rooms",options:[{value:0,label:"Студия"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4+"}],value:[]},g7={name:"price",type:"field-fromTo",postfix:"₽",from:{name:"priceFrom",label:"Цена от"},to:{name:"priceTo",label:"До"},value:{}},v7=[{name:"area",nameLabel:"Площадь",type:"field-fromTo",postfix:"м²",from:{name:"areaFrom",label:"От"},to:{name:"areaTo",label:"До"},value:{}}],Ub=t=>{let e={};for(const n in t){const s=t[n];s&&(Array.isArray(s.value)?e={...e,[n]:{...s,value:[]}}:typeof s.value=="object"&&s.value!==null&&(e={...e,[n]:{...s,value:{}}}))}return e},ti=new URLSearchParams(window.location.search),_se={lastTrigger:"filter",page:1,filters:{sortBy:ti.get("sort")||"priceAsc",tags:ti.getAll("tags").map(t=>+t),advantages:ti.getAll("advantages").map(t=>+t),is_gift:ti.get("is_gift")||!1,is_video:ti.get("is_video")||!1,filtersMain:{price:{...yc([g7]).price,value:{...ti.get("price_from")?{priceFrom:ti.get("price_from")}:{},...ti.get("price_to")?{priceTo:ti.get("price_to")}:{}}},rooms:{...yc([m7]).rooms,value:ti.getAll("rooms").map(t=>+t)},area:ti.get("area")||null},filtersAdditional:{area:{...yc([...v7]).area,value:{...ti.get("area_from")?{areaFrom:ti.get("area_from")}:{},...ti.get("area_to")?{areaTo:ti.get("area_to")}:{}}}}}},y7=ad({name:"listingFlats",initialState:Th(_se),reducers:{addFilterAdditional(t,e){t.filters.filtersAdditional={...e.payload,...t.filters.filtersAdditional}},roomsToggle(t,e){gk(t.filters,e)},changeFieldInput(t,e){vk(t.filters,e)},changeFieldAdditional(t,e){const n=t.filters.filtersAdditional[e.payload.name];n&&(n.value=e.payload.selectedOptions)},resetFilters(t){t.filters.filtersMain=Ub(t.filters.filtersMain),t.filters.filtersAdditional=Ub(t.filters.filtersAdditional),t.filters.tags=[],t.filters.advantages=[],t.filters.is_gift=!1,t.filters.is_video=!1},setSort(t,e){t.filters.sortBy=e.payload},filterToggle(t,e){t.filters[e.payload.name]=e.payload.value},tagsToggle(t,e){e.payload.value?t.filters[e.payload.type]=[...t.filters[e.payload.type],e.payload.option.value]:t.filters[e.payload.type]=t.filters[e.payload.type].filter(n=>n!==e.payload.option.value)},lastTriggerFn(t,e){t.lastTrigger=e.payload},setCurrentPage(t,e){t.page=e.payload}}}),{roomsToggle:x7,changeFieldInput:SE,resetFilters:wse,changeFieldAdditional:Cse,addFilterAdditional:Sse,setSort:b7,tagsToggle:jE,filterToggle:jse,lastTriggerFn:bI,setCurrentPage:_I}=y7.actions,Tse=y7.reducer,Ese=new URLSearchParams(window.location.search),Nse={page:1,type:"",values:{city:{},developers:[],complexes:[],authors:[],tags:Ese.getAll("tags").map(t=>+t)},filters:{developers:[],complexes:[],authors:[]}},_7=ad({name:"feed",initialState:Th(Nse),reducers:{setFiltersFeed(t,e){t.filters[e.payload.name]=e.payload.value},setValueFeed(t,e){t.values[e.payload.name]=e.payload.value},setTagsFeed(t,e){e.payload.value?t.values.tags=[...t.values.tags,e.payload.option.value]:t.values.tags=t.values.tags.filter(n=>n!==e.payload.option.value)},setCurrentPage(t,e){t.page=e.payload},setType(t,e){t.type=e.payload},resetFiltersFeed(t){t.values.city={},t.values.developers=[],t.values.complexes=[],t.values.authors=[],t.values.tags=[],t.filters.developers=[],t.filters.complexes=[],t.filters.authors=[]}}}),{setFiltersFeed:FS,setValueFeed:cc,setTagsFeed:kse,resetFiltersFeed:w7,setCurrentPage:$S,setType:Tk}=_7.actions,Ase=_7.reducer,Dse={sortBy:"priceAsc",tags:[],advantages:[],is_gift:!1,is_video:!1,filtersMain:{price:yc([g7]).price,rooms:yc([m7]).rooms},filtersAdditional:yc(v7),data:{currentLayout:null,currentPlanning:null}},Pse=()=>Th(Dse),C7=ad({name:"buildingApartFilter",initialState:Pse(),reducers:{addFilterAdditional(t,e){t.filtersAdditional={...e.payload,...t.filtersAdditional}},roomsToggle(t,e){gk(t,e)},changeFieldInput(t,e){vk(t,e)},changeFieldAdditional(t,e){const n=t.filtersAdditional[e.payload.name];n&&(n.value=e.payload.selectedOptions)},resetFilters(t){t.filtersMain=Ub(t.filtersMain),t.filtersAdditional=Ub(t.filtersAdditional),t.tags=[],t.advantages=[],t.is_gift=!1,t.is_video=!1},setSort(t,e){t.sortBy=e.payload},filterToggle(t,e){t[e.payload.name]=e.payload.value},tagsToggle(t,e){e.payload.value?t[e.payload.type]=[...t[e.payload.type],e.payload.option.value]:t[e.payload.type]=t[e.payload.type].filter(n=>n!==e.payload.option.value)}}}),{roomsToggle:S7,changeFieldInput:TE,resetFilters:Ise,changeFieldAdditional:Mse,addFilterAdditional:Ose,setSort:wI,tagsToggle:CI,filterToggle:Rse}=C7.actions,Lse=C7.reducer,Bse={info:{type:null},defaultPresents:[],selectedPresents:[]},j7=ad({name:"apartment",initialState:Bse,reducers:{initPresents(t,e){t.info=e.payload},setMainPresents(t,e){t.defaultPresents=[...e.payload]},addPresent(t,e){const n=t.info.maxAmount-SI([...t.selectedPresents,e.payload]);n>=0&&(t.selectedPresents.push(e.payload),t.info.leftPrice=n)},deletePresent(t,e){const n=t.selectedPresents.findLastIndex(s=>s.id===e.payload);n!==-1&&(t.selectedPresents=t.selectedPresents.filter((s,i)=>i!==n)),t.info.leftPrice=t.info.maxAmount-SI(t.selectedPresents)}}});function SI(t){return t.reduce((e,n)=>n.newPrice!==null&&n.newPrice>0&&n.newPrice<n.oldPrice?e+=n.oldPrice:n.newPrice!==null&&n.newPrice>n.oldPrice?e+=n.newPrice:e+=n.oldPrice-n.newPrice,0)}const{initPresents:Fse,addPresent:$se,setMainPresents:Use,deletePresent:Vse}=j7.actions,zse=j7.reducer,Hse={initApp:!1,notification:!1,notificationLogout:!1,notificationCall:!1,selectAccLogModalOpen:!1},T7=ad({name:"helpSlice",initialState:Hse,reducers:{toggleNotificationLogout(t,e){t.notificationLogout=e.payload},toggleNotificationCall(t,e){t.notificationCall=e.payload},setInitApp(t,e){t.initApp=e.payload},setSelectAccLogModalOpen(t,e){t.selectAccLogModalOpen=e.payload}}}),{toggleNotificationLogout:qse,toggleNotificationCall:b0,setInitApp:Wse,setSelectAccLogModalOpen:Bs}=T7.actions,Gse=T7.reducer,Yse=mZ({reducer:{windowSize:UZ,mainInfo:zZ,listing:bse,buildingApartFilter:Lse,apartment:zse,helpSlice:Gse,listingFlats:Tse,feed:Ase}});/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rv(){return rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},rv.apply(this,arguments)}var Nu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nu||(Nu={}));const jI="popstate";function Xse(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:o,hash:l}=s.location;return EE("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:Vb(i)}return Qse(e,n,null,t)}function Fs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function E7(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kse(){return Math.random().toString(36).substr(2,8)}function TI(t,e){return{usr:t.state,key:t.key,idx:e}}function EE(t,e,n,s){return n===void 0&&(n=null),rv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?mm(e):e,{state:n,key:e&&e.key||s||Kse()})}function Vb(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function mm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Qse(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l=Nu.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(rv({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Nu.Pop;let _=d(),y=_==null?null:_-u;u=_,c&&c({action:l,location:m.location,delta:y})}function f(_,y){l=Nu.Push;let x=EE(m.location,_,y);u=d()+1;let b=TI(x,u),w=m.createHref(x);try{o.pushState(b,"",w)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(w)}a&&c&&c({action:l,location:m.location,delta:1})}function p(_,y){l=Nu.Replace;let x=EE(m.location,_,y);u=d();let b=TI(x,u),w=m.createHref(x);o.replaceState(b,"",w),a&&c&&c({action:l,location:m.location,delta:0})}function g(_){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof _=="string"?_:Vb(_);return x=x.replace(/ $/,"%20"),Fs(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let m={get action(){return l},get location(){return t(i,o)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(jI,h),c=_,()=>{i.removeEventListener(jI,h),c=null}},createHref(_){return e(i,_)},createURL:g,encodeLocation(_){let y=g(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(_){return o.go(_)}};return m}var EI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(EI||(EI={}));function Zse(t,e,n){return n===void 0&&(n="/"),Jse(t,e,n,!1)}function Jse(t,e,n,s){let i=typeof e=="string"?mm(e):e,a=Ek(i.pathname||"/",n);if(a==null)return null;let o=N7(t);ere(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=dre(a);l=cre(o[c],u,s)}return l}function N7(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Fs(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=Vu([s,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(Fs(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),N7(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:ore(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of k7(a.path))i(a,o,c)}),e}function k7(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=k7(s.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function ere(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lre(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const tre=/^:[\w-]+$/,nre=3,sre=2,rre=1,ire=10,are=-2,NI=t=>t==="*";function ore(t,e){let n=t.split("/"),s=n.length;return n.some(NI)&&(s+=are),e&&(s+=sre),n.filter(i=>!NI(i)).reduce((i,a)=>i+(tre.test(a)?nre:a===""?rre:ire),s)}function lre(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function cre(t,e,n){let{routesMeta:s}=t,i={},a="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=kI({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!s[s.length-1].route.index&&(h=kI({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Vu([a,h.pathname]),pathnameBase:mre(Vu([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=Vu([a,h.pathnameBase]))}return o}function kI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=ure(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let m=l[h]||"";o=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const g=l[h];return p&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function ure(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),E7(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function dre(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return E7(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ek(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function hre(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?mm(t):t;return{pathname:n?n.startsWith("/")?n:fre(n,e):e,search:gre(s),hash:vre(i)}}function fre(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function US(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pre(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Nk(t,e){let n=pre(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function kk(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=mm(t):(i=rv({},t),Fs(!i.pathname||!i.pathname.includes("?"),US("?","pathname","search",i)),Fs(!i.pathname||!i.pathname.includes("#"),US("#","pathname","hash",i)),Fs(!i.search||!i.search.includes("#"),US("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=hre(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Vu=t=>t.join("/").replace(/\/\/+/g,"/"),mre=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gre=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vre=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yre(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const A7=["post","put","patch","delete"];new Set(A7);const xre=["get",...A7];new Set(xre);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iv(){return iv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},iv.apply(this,arguments)}const Ak=v.createContext(null),bre=v.createContext(null),ld=v.createContext(null),W2=v.createContext(null),Lc=v.createContext({outlet:null,matches:[],isDataRoute:!1}),D7=v.createContext(null);function _re(t,e){let{relative:n}=e===void 0?{}:e;gm()||Fs(!1);let{basename:s,navigator:i}=v.useContext(ld),{hash:a,pathname:o,search:l}=I7(t,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:Vu([s,o])),i.createHref({pathname:c,search:l,hash:a})}function gm(){return v.useContext(W2)!=null}function Xr(){return gm()||Fs(!1),v.useContext(W2).location}function P7(t){v.useContext(ld).static||v.useLayoutEffect(t)}function Mr(){let{isDataRoute:t}=v.useContext(Lc);return t?Mre():wre()}function wre(){gm()||Fs(!1);let t=v.useContext(Ak),{basename:e,future:n,navigator:s}=v.useContext(ld),{matches:i}=v.useContext(Lc),{pathname:a}=Xr(),o=JSON.stringify(Nk(i,n.v7_relativeSplatPath)),l=v.useRef(!1);return P7(()=>{l.current=!0}),v.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=kk(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Vu([e,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[e,s,o,a,t])}function Mn(){let{matches:t}=v.useContext(Lc),e=t[t.length-1];return e?e.params:{}}function I7(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=v.useContext(ld),{matches:i}=v.useContext(Lc),{pathname:a}=Xr(),o=JSON.stringify(Nk(i,s.v7_relativeSplatPath));return v.useMemo(()=>kk(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function Cre(t,e){return Sre(t,e)}function Sre(t,e,n,s){gm()||Fs(!1);let{navigator:i}=v.useContext(ld),{matches:a}=v.useContext(Lc),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Xr(),d;if(e){var h;let _=typeof e=="string"?mm(e):e;c==="/"||(h=_.pathname)!=null&&h.startsWith(c)||Fs(!1),d=_}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let _=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=Zse(t,{pathname:p}),m=kre(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Vu([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Vu([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,n,s);return e&&m?v.createElement(W2.Provider,{value:{location:iv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Nu.Pop}},m):m}function jre(){let t=Ire(),e=yre(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,null)}const Tre=v.createElement(jre,null);class Ere extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?v.createElement(Lc.Provider,{value:this.props.routeContext},v.createElement(D7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nre(t){let{routeContext:e,match:n,children:s}=t,i=v.useContext(Ak);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(Lc.Provider,{value:e},s)}function kre(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if((a=n)!=null&&a.errors)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Fs(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,g=!1,m=null,_=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,m=h.route.errorElement||Tre,c&&(u<0&&f===0?(g=!0,_=null):u===f&&(g=!0,_=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),x=()=>{let b;return p?b=m:g?b=_:h.route.Component?b=v.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,v.createElement(Nre,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?v.createElement(Ere,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var M7=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(M7||{}),zb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zb||{});function Are(t){let e=v.useContext(Ak);return e||Fs(!1),e}function Dre(t){let e=v.useContext(bre);return e||Fs(!1),e}function Pre(t){let e=v.useContext(Lc);return e||Fs(!1),e}function O7(t){let e=Pre(),n=e.matches[e.matches.length-1];return n.route.id||Fs(!1),n.route.id}function Ire(){var t;let e=v.useContext(D7),n=Dre(zb.UseRouteError),s=O7(zb.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function Mre(){let{router:t}=Are(M7.UseNavigateStable),e=O7(zb.UseNavigateStable),n=v.useRef(!1);return P7(()=>{n.current=!0}),v.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,iv({fromRouteId:e},a)))},[t,e])}function Xf(t){let{to:e,replace:n,state:s,relative:i}=t;gm()||Fs(!1);let{future:a,static:o}=v.useContext(ld),{matches:l}=v.useContext(Lc),{pathname:c}=Xr(),u=Mr(),d=kk(e,Nk(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(d);return v.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:i}),[u,h,i,n,s]),null}function rc(t){Fs(!1)}function Ore(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Nu.Pop,navigator:a,static:o=!1,future:l}=t;gm()&&Fs(!1);let c=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:c,navigator:a,static:o,future:iv({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof s=="string"&&(s=mm(s));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:g="default"}=s,m=v.useMemo(()=>{let _=Ek(d,c);return _==null?null:{location:{pathname:_,search:h,hash:f,state:p,key:g},navigationType:i}},[c,d,h,f,p,g,i]);return m==null?null:v.createElement(ld.Provider,{value:u},v.createElement(W2.Provider,{children:n,value:m}))}function Rre(t){let{children:e,location:n}=t;return Cre(NE(e),n)}new Promise(()=>{});function NE(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(s,i)=>{if(!v.isValidElement(s))return;let a=[...e,i];if(s.type===v.Fragment){n.push.apply(n,NE(s.props.children,a));return}s.type!==rc&&Fs(!1),!s.props.index||!s.props.children||Fs(!1);let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=NE(s.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kE(){return kE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},kE.apply(this,arguments)}function Lre(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Bre(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Fre(t,e){return t.button===0&&(!e||e==="_self")&&!Bre(t)}function AE(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function $re(t,e){let n=AE(t);return e&&e.forEach((s,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const Ure=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Vre="6";try{window.__reactRouterVersion=Vre}catch{}const zre="startTransition",AI=aT[zre];function Hre(t){let{basename:e,children:n,future:s,window:i}=t,a=v.useRef();a.current==null&&(a.current=Xse({window:i,v5Compat:!0}));let o=a.current,[l,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=v.useCallback(h=>{u&&AI?AI(()=>c(h)):c(h)},[c,u]);return v.useLayoutEffect(()=>o.listen(d),[o,d]),v.createElement(Ore,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:s})}const qre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wre=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ke=v.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,unstable_viewTransition:h}=e,f=Lre(e,Ure),{basename:p}=v.useContext(ld),g,m=!1;if(typeof u=="string"&&Wre.test(u)&&(g=u,qre))try{let b=new URL(window.location.href),w=u.startsWith("//")?new URL(b.protocol+u):new URL(u),C=Ek(w.pathname,p);w.origin===b.origin&&C!=null?u=C+w.search+w.hash:m=!0}catch{}let _=_re(u,{relative:i}),y=Gre(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,unstable_viewTransition:h});function x(b){s&&s(b),b.defaultPrevented||y(b)}return v.createElement("a",kE({},f,{href:g||_,onClick:m||a?s:x,ref:n,target:c}))});var DI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DI||(DI={}));var PI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(PI||(PI={}));function Gre(t,e){let{target:n,replace:s,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l}=e===void 0?{}:e,c=Mr(),u=Xr(),d=I7(t,{relative:o});return v.useCallback(h=>{if(Fre(h,n)){h.preventDefault();let f=s!==void 0?s:Vb(u)===Vb(d);c(t,{replace:f,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l})}},[u,c,d,s,i,n,t,a,o,l])}function _r(t){let e=v.useRef(AE(t)),n=v.useRef(!1),s=Xr(),i=v.useMemo(()=>$re(s.search,n.current?null:e.current),[s.search]),a=Mr(),o=v.useCallback((l,c)=>{const u=AE(typeof l=="function"?l(i):l);n.current=!0,a("?"+u,c)},[a,i]);return[i,o]}const G2=[{id:1,name:"ADMIN",labels:["Администратор","Админ"]},{id:2,name:"SELLER",labels:["Продавец","Менеджер"]},{id:3,name:"BUYER",labels:"Покупатель"}],pn=G2[0],Wt=G2[1],sn=G2[2],ke={home:"/",listing:"/buy",listingFlats:"/flats",building:"/building/",apartment:"/apartment/",loginPhone:"/login/phone",purchase:{list:"/purchase/list",inner:"/purchase/"},feed:"/feed",feedPromos:"/feed/promos",feedVideos:"/feed/videos",comparison:"/comparison",favorites:"/favorites",promo:"/promo/",privacyPolicy:"/privacy-policy/",cashbackConditions:"/cashback-conditions/",empty:"/404",specialists:{list:"/specialists/list",inner:"/specialists/"},developers:{list:"/developers/list",inner:"/developers/"},videosPage:{videoPage:"/videos/",shortPage:"/shorts/"}},At={home:"/seller",object:{list:"/seller/objects"},buyer:"/buyer/",view:"/seller/view",specialists:"/seller/specialists",objects_developer:"/seller/developer-objects",purchase:{list_all:"/seller/purchase/list-all",list_buyers:"/seller/purchase/list-buyers",inner:"/seller/purchase/"},wallet:"/seller/wallet",calendar_view:"/seller/calendar-view"},Fn={purchase:{create:"/purchase/create",list:"/cabinet/purchase/list",inner:"/cabinet/purchase/",edit:"/cabinet/purchase/edit/"},view:"/cabinet/view",walletPage:"/wallet"},Ji={profile:{edit:"/profile/edit"},chat:"/chat"},ht={dashboardAdmin:"/admin",login:"/admin/login",types:{list:"/admin/types/list",create:"/admin/types/create",show:"/admin/types/show/",createChars:"/admin/type/:typeId/add/attribute/:attributeId",createCharsApart:"/admin/type/:typeId/add/innerattribute",editChar:"/admin/type/:typeId/edit/attribute",editCharApart:"/admin/type/:typeId/edit/innerattribute"},objects:{create:"/admin/object/create",edit:"/admin/object/edit/"},listingFlats:"/admin/flats",apartment:{create:"/admin/apartment/create/",edit:"/admin/apartment/edit/"},cities:{list:"/admin/cities/list/",create:"/admin/cities/create/",edit:"/admin/cities/edit/"},tags:{list:"/admin/tags/list/",createTag:"/admin/tags/create/tag/",createSticker:"/admin/tags/create/sticker/",createAdvantage:"/admin/tags/create/advantage/",editTag:"/admin/tags/edit/tag/",editSticker:"/admin/tags/edit/sticker/",editAdvantage:"/admin/tags/edit/advantage/"},roles:{list:"/admin/roles/list",create:"/admin/roles/create"},specialists:{create:"/admin/specialists/create",edit:"/admin/specialists/edit/"},developers:{create:"/admin/developers/create",edit:"/admin/developers/edit/"}},Yre="_BodyAndSidebarRoot_nd9h3_2",Xre={BodyAndSidebarRoot:Yre},ea=v.memo(({children:t,className:e=""})=>r.jsx("div",{className:`${Xre.BodyAndSidebarRoot} ${e}`,children:t}));var R7={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(hn,function(){var n=1e3,s=6e4,i=36e5,a="millisecond",o="second",l="minute",c="hour",u="day",d="week",h="month",f="quarter",p="year",g="date",m="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var G=["th","st","nd","rd"],V=z%100;return"["+z+(G[(V-20)%10]||G[V]||G[0])+"]"}},b=function(z,G,V){var J=String(z);return!J||J.length>=G?z:""+Array(G+1-J.length).join(V)+z},w={s:b,z:function(z){var G=-z.utcOffset(),V=Math.abs(G),J=Math.floor(V/60),Q=V%60;return(G<=0?"+":"-")+b(J,2,"0")+":"+b(Q,2,"0")},m:function z(G,V){if(G.date()<V.date())return-z(V,G);var J=12*(V.year()-G.year())+(V.month()-G.month()),Q=G.clone().add(J,h),Y=V-Q<0,oe=G.clone().add(J+(Y?-1:1),h);return+(-(J+(V-Q)/(Y?Q-oe:oe-Q))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:h,y:p,w:d,d:u,D:g,h:c,m:l,s:o,ms:a,Q:f}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return z===void 0}},C="en",j={};j[C]=x;var E="$isDayjsObject",T=function(z){return z instanceof B||!(!z||!z[E])},N=function z(G,V,J){var Q;if(!G)return C;if(typeof G=="string"){var Y=G.toLowerCase();j[Y]&&(Q=Y),V&&(j[Y]=V,Q=Y);var oe=G.split("-");if(!Q&&oe.length>1)return z(oe[0])}else{var he=G.name;j[he]=G,Q=he}return!J&&Q&&(C=Q),Q||!J&&C},P=function(z,G){if(T(z))return z.clone();var V=typeof G=="object"?G:{};return V.date=z,V.args=arguments,new B(V)},I=w;I.l=N,I.i=T,I.w=function(z,G){return P(z,{locale:G.$L,utc:G.$u,x:G.$x,$offset:G.$offset})};var B=function(){function z(V){this.$L=N(V.locale,null,!0),this.parse(V),this.$x=this.$x||V.x||{},this[E]=!0}var G=z.prototype;return G.parse=function(V){this.$d=function(J){var Q=J.date,Y=J.utc;if(Q===null)return new Date(NaN);if(I.u(Q))return new Date;if(Q instanceof Date)return new Date(Q);if(typeof Q=="string"&&!/Z$/i.test(Q)){var oe=Q.match(_);if(oe){var he=oe[2]-1||0,me=(oe[7]||"0").substring(0,3);return Y?new Date(Date.UTC(oe[1],he,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,me)):new Date(oe[1],he,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,me)}}return new Date(Q)}(V),this.init()},G.init=function(){var V=this.$d;this.$y=V.getFullYear(),this.$M=V.getMonth(),this.$D=V.getDate(),this.$W=V.getDay(),this.$H=V.getHours(),this.$m=V.getMinutes(),this.$s=V.getSeconds(),this.$ms=V.getMilliseconds()},G.$utils=function(){return I},G.isValid=function(){return this.$d.toString()!==m},G.isSame=function(V,J){var Q=P(V);return this.startOf(J)<=Q&&Q<=this.endOf(J)},G.isAfter=function(V,J){return P(V)<this.startOf(J)},G.isBefore=function(V,J){return this.endOf(J)<P(V)},G.$g=function(V,J,Q){return I.u(V)?this[J]:this.set(Q,V)},G.unix=function(){return Math.floor(this.valueOf()/1e3)},G.valueOf=function(){return this.$d.getTime()},G.startOf=function(V,J){var Q=this,Y=!!I.u(J)||J,oe=I.p(V),he=function(ot,fe){var $=I.w(Q.$u?Date.UTC(Q.$y,fe,ot):new Date(Q.$y,fe,ot),Q);return Y?$:$.endOf(u)},me=function(ot,fe){return I.w(Q.toDate()[ot].apply(Q.toDate("s"),(Y?[0,0,0,0]:[23,59,59,999]).slice(fe)),Q)},Oe=this.$W,xe=this.$M,Pe=this.$D,qe="set"+(this.$u?"UTC":"");switch(oe){case p:return Y?he(1,0):he(31,11);case h:return Y?he(1,xe):he(0,xe+1);case d:var Ie=this.$locale().weekStart||0,Ve=(Oe<Ie?Oe+7:Oe)-Ie;return he(Y?Pe-Ve:Pe+(6-Ve),xe);case u:case g:return me(qe+"Hours",0);case c:return me(qe+"Minutes",1);case l:return me(qe+"Seconds",2);case o:return me(qe+"Milliseconds",3);default:return this.clone()}},G.endOf=function(V){return this.startOf(V,!1)},G.$set=function(V,J){var Q,Y=I.p(V),oe="set"+(this.$u?"UTC":""),he=(Q={},Q[u]=oe+"Date",Q[g]=oe+"Date",Q[h]=oe+"Month",Q[p]=oe+"FullYear",Q[c]=oe+"Hours",Q[l]=oe+"Minutes",Q[o]=oe+"Seconds",Q[a]=oe+"Milliseconds",Q)[Y],me=Y===u?this.$D+(J-this.$W):J;if(Y===h||Y===p){var Oe=this.clone().set(g,1);Oe.$d[he](me),Oe.init(),this.$d=Oe.set(g,Math.min(this.$D,Oe.daysInMonth())).$d}else he&&this.$d[he](me);return this.init(),this},G.set=function(V,J){return this.clone().$set(V,J)},G.get=function(V){return this[I.p(V)]()},G.add=function(V,J){var Q,Y=this;V=Number(V);var oe=I.p(J),he=function(xe){var Pe=P(Y);return I.w(Pe.date(Pe.date()+Math.round(xe*V)),Y)};if(oe===h)return this.set(h,this.$M+V);if(oe===p)return this.set(p,this.$y+V);if(oe===u)return he(1);if(oe===d)return he(7);var me=(Q={},Q[l]=s,Q[c]=i,Q[o]=n,Q)[oe]||1,Oe=this.$d.getTime()+V*me;return I.w(Oe,this)},G.subtract=function(V,J){return this.add(-1*V,J)},G.format=function(V){var J=this,Q=this.$locale();if(!this.isValid())return Q.invalidDate||m;var Y=V||"YYYY-MM-DDTHH:mm:ssZ",oe=I.z(this),he=this.$H,me=this.$m,Oe=this.$M,xe=Q.weekdays,Pe=Q.months,qe=Q.meridiem,Ie=function(fe,$,X,W){return fe&&(fe[$]||fe(J,Y))||X[$].slice(0,W)},Ve=function(fe){return I.s(he%12||12,fe,"0")},ot=qe||function(fe,$,X){var W=fe<12?"AM":"PM";return X?W.toLowerCase():W};return Y.replace(y,function(fe,$){return $||function(X){switch(X){case"YY":return String(J.$y).slice(-2);case"YYYY":return I.s(J.$y,4,"0");case"M":return Oe+1;case"MM":return I.s(Oe+1,2,"0");case"MMM":return Ie(Q.monthsShort,Oe,Pe,3);case"MMMM":return Ie(Pe,Oe);case"D":return J.$D;case"DD":return I.s(J.$D,2,"0");case"d":return String(J.$W);case"dd":return Ie(Q.weekdaysMin,J.$W,xe,2);case"ddd":return Ie(Q.weekdaysShort,J.$W,xe,3);case"dddd":return xe[J.$W];case"H":return String(he);case"HH":return I.s(he,2,"0");case"h":return Ve(1);case"hh":return Ve(2);case"a":return ot(he,me,!0);case"A":return ot(he,me,!1);case"m":return String(me);case"mm":return I.s(me,2,"0");case"s":return String(J.$s);case"ss":return I.s(J.$s,2,"0");case"SSS":return I.s(J.$ms,3,"0");case"Z":return oe}return null}(fe)||oe.replace(":","")})},G.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},G.diff=function(V,J,Q){var Y,oe=this,he=I.p(J),me=P(V),Oe=(me.utcOffset()-this.utcOffset())*s,xe=this-me,Pe=function(){return I.m(oe,me)};switch(he){case p:Y=Pe()/12;break;case h:Y=Pe();break;case f:Y=Pe()/3;break;case d:Y=(xe-Oe)/6048e5;break;case u:Y=(xe-Oe)/864e5;break;case c:Y=xe/i;break;case l:Y=xe/s;break;case o:Y=xe/n;break;default:Y=xe}return Q?Y:I.a(Y)},G.daysInMonth=function(){return this.endOf(h).$D},G.$locale=function(){return j[this.$L]},G.locale=function(V,J){if(!V)return this.$L;var Q=this.clone(),Y=N(V,J,!0);return Y&&(Q.$L=Y),Q},G.clone=function(){return I.w(this.$d,this)},G.toDate=function(){return new Date(this.valueOf())},G.toJSON=function(){return this.isValid()?this.toISOString():null},G.toISOString=function(){return this.$d.toISOString()},G.toString=function(){return this.$d.toUTCString()},z}(),U=B.prototype;return P.prototype=U,[["$ms",a],["$s",o],["$m",l],["$H",c],["$W",u],["$M",h],["$y",p],["$D",g]].forEach(function(z){U[z[1]]=function(G){return this.$g(G,z[0],z[1])}}),P.extend=function(z,G){return z.$i||(z(G,B,P),z.$i=!0),P},P.locale=N,P.isDayjs=T,P.unix=function(z){return P(1e3*z)},P.en=j[C],P.Ls=j,P.p={},P})})(R7);var L7=R7.exports;const ct=In(L7),Kre="_SidebarRoot_yygvb_1",Qre={SidebarRoot:Kre};var B7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=i(a,s(l)))}return a}function s(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=i(o,l));return o}function i(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(B7);var Zre=B7.exports;const He=In(Zre),lo=({children:t,className:e=""})=>r.jsx("div",{children:r.jsx("div",{className:He(Qre.SidebarRoot,e),children:t})}),Jre=({block:t,targets:e,children:n})=>{const[s,i]=v.useState(!0);return v.useEffect(()=>{if(!t)return;const a={root:null,rootMargin:"0px",threshold:0},o=new IntersectionObserver(l=>{l.forEach(c=>{c.target===t&&i(u=>!u)})},a);return o.observe(t),()=>{o.unobserve(t)}},[t]),v.useEffect(()=>{var o,l,c,u;const a=e.map(d=>document.querySelector(`.${d}`));s?((o=a[0])==null||o.classList.add("opacity-0"),(l=a[1])==null||l.classList.remove("opacity-0")):((c=a[0])==null||c.classList.remove("opacity-0"),(u=a[1])==null||u.classList.add("opacity-0"))},[s]),n},eie="_ButtonMain_ecuzd_1",tie="_ButtonLoading_ecuzd_22",nie="_rotation_ecuzd_1",sie="_primary_ecuzd_40",rie="_secondary_ecuzd_55",iie="_ButtonActive_ecuzd_70",aie="_dark_ecuzd_76",oie="_gray_ecuzd_83",lie="_third_ecuzd_90",cie="_red_ecuzd_99",uie="_sizeBig_ecuzd_110",die="_sizeSmall_ecuzd_115",hie="_size34_ecuzd_121",fie="_size28_ecuzd_128",pie="_size26_ecuzd_135",Cg={ButtonMain:eie,ButtonLoading:tie,rotation:nie,primary:sie,secondary:rie,ButtonActive:iie,dark:aie,gray:oie,third:lie,red:cie,sizeBig:uie,sizeSmall:die,size34:hie,size28:fie,size26:pie},_e=t=>{const{children:e,className:n="",variant:s="primary",size:i="",onClick:a=()=>{},Selector:o="button",href:l,active:c,type:u,disabled:d,linkBlank:h=!1,isLoading:f=!1,style:p={}}=t,g=`${Cg.ButtonMain} ${i?Cg[`size${i}`]:""} ${Cg[s]} ${n} ${c?Cg.ButtonActive:""}`;return o==="a"?r.jsx("a",{href:l,className:g,target:h?"_blank":"",children:e}):r.jsx(o,{type:u,disabled:d||f,onClick:a,className:g,style:p,children:f?r.jsx("div",{className:Cg.ButtonLoading}):r.jsx(r.Fragment,{children:e})})},mie="_Avatar_u0n2o_1",gie="_AvatarOnlineStatus_u0n2o_12",vie="_AvatarBg_u0n2o_24",yie="_AvatarBgBig_u0n2o_38",DE={Avatar:mie,AvatarOnlineStatus:gie,AvatarBg:vie,AvatarBgBig:yie},qt=t=>{if(t)return typeof t!="string"?"":t.includes("/uploads/images/")?`${Wi}${t}`:t},F7=t=>{if(!t)return;t=t.toUpperCase();const e=t.charCodeAt(0),n=e*13%256,s=e*17%256,i=e*19%256;return`rgba(${n}, ${s}, ${i}, ${.8})`},Nn=t=>{const{className:e="",size:n=40,src:s="",title:i="",textAvatar:a="",online:o=!1}=t,l=n/4/2-2;return r.jsxs("div",{style:{width:`${n}px`,height:`${n}px`,flex:`0 0 ${n}px`},className:He(DE.Avatar,s&&"border border-[#aecbda]",e),children:[o&&r.jsx("span",{className:DE.AvatarOnlineStatus,style:{bottom:l,right:l}}),s?r.jsx("img",{loading:"lazy",src:qt(s),alt:i}):r.jsx($7,{...t}),t.children]})},$7=t=>{const{title:e="",textAvatar:n="",size:s=40}=t,i=n?n[0]:e[0];return r.jsx("div",{className:DE.AvatarBg,style:{backgroundColor:F7(i),color:"white",fontSize:`${s*(s<80?.45:.4)}px`},children:i})},xie="_userInfo_tknri_1",bie="_userInfoName_tknri_6",_ie="_userInfoPos_tknri_14",Dx={userInfo:xie,userInfoName:bie,userInfoPos:_ie},Vs=({avatar:t="",textAvatar:e="",name:n,pos:s,posChildren:i,beforeChildren:a,posBeforeChildren:o,children:l,className:c="",classNameContent:u="",sizeAvatar:d=40,centered:h,classListName:f="",nameHref:p="",classListUser:g="",online:m=!1,onClick:_})=>r.jsxs("div",{className:He(Dx.userInfo,c),onClick:_,children:[r.jsx(Nn,{src:t,title:n,textAvatar:e,size:d,online:m}),r.jsxs("div",{className:`flex flex-col overflow-hidden ${u}`,children:[r.jsxs("div",{className:`h-full flex flex-col overflow-hidden ${s?"":"justify-center"} ${h?"justify-center":""}`,style:{minHeight:d},children:[!!a&&a,p?r.jsx(Ke,{to:p,className:`${Dx.userInfoName} ${f} blue-link-hover`,children:n}):r.jsx("span",{className:`${Dx.userInfoName} ${f}`,children:n}),!!o&&o,s&&r.jsx("span",{className:`${Dx.userInfoPos} ${g}`,children:s}),!!i&&i]}),l]})]}),pt=t=>{t=typeof t=="number"?String(t):t.replace(/ /g,"");const e=t.match(/^(.*?)((?:[,.]\d+)?|)$/)[1].replace(/\B(?=(?:\d{3})*$)/g," ");return e===" "?"":e},wie="_ElementOldPrice_y0bn1_1",Cie="_ElementTitleSubtitle_y0bn1_14",Sie="_ElementTitleSubtitleSecond_y0bn1_20",jie="_ElementNavBtn_y0bn1_31",Tie="_ElementNavBtnActive_y0bn1_59",av={ElementOldPrice:wie,ElementTitleSubtitle:Cie,ElementTitleSubtitleSecond:Sie,ElementNavBtn:jie,ElementNavBtnActive:Tie},cd=t=>{const{Selector:e="div",className:n=""}=t;return r.jsx(e,{...t,className:`${av.ElementOldPrice} ${n}`,children:t.children})},Pl=t=>{const{className:e=""}=t;return r.jsx("h1",{...t,className:`${av.ElementTitleSubtitle} ${e} title-2`,children:t.children})},U7=t=>{const{className:e=""}=t;return r.jsx("div",{...t,className:`${av.ElementTitleSubtitleSecond} ${e}`,children:t.children})},Gt=t=>{const{Selector:e="div",className:n="",active:s=!1}=t;return r.jsx(e,{className:He(av.ElementNavBtn,n,s&&av.ElementNavBtnActive),children:t.children})},uu=({className:t="",children:e,active:n=!1})=>r.jsx("div",{className:He("ml-auto bg-count _blue w-12 group-hover:!bg-white transition-all duration-300",t,n?"!bg-white":"!bg-primary700"),children:e}),Eie="_Chars_ycbzt_1",Nie="_CharsHidden_ycbzt_32",kie="_CharsBetween_ycbzt_36",Aie="_CharsBlue_ycbzt_45",Die="_CharsPrimary400_ycbzt_50",Pie="_CharsFlat_ycbzt_57",eh={Chars:Eie,CharsHidden:Nie,CharsBetween:kie,CharsBlue:Aie,CharsPrimary400:Die,CharsFlat:Pie},Y2=t=>{const{justifyBetween:e=!1,className:n="",color:s="",isActive:i=!0}=t;return r.jsx("div",{className:`${eh.CharsFlat} ${e?eh.CharsFlatBetween:""} ${i?"":eh.CharsPrimary400} ${n}`,children:t.children})},vn=t=>{const{justifyBetween:e=!1,className:n="",color:s="",hiddenAfter:i=!1}=t,a=()=>{switch(s){case"":return"";case"blue":return eh.CharsBlue;default:return""}};return r.jsx("div",{className:He(eh.Chars,e&&eh.CharsBetween,i&&eh.CharsHidden,n,a()),children:t.children})},Dk=({className:t="",data:e=[],classNameCol:n="",classNameName:s,classNameValue:i})=>r.jsx("ul",{className:`flex flex-wrap gap-x-11 gap-y-6 ${t}`,children:e.map((a,o)=>{if(a.value)return r.jsx("li",{className:`${n}`,children:r.jsx(Iie,{data:a,className:He("!flex-row",a.className),classNameName:s,classNameValue:i})},o)})}),Iie=({data:t,className:e="",classNameName:n,classNameValue:s})=>r.jsxs("div",{className:`flex flex-col gap-2 text-small ${e}`,children:[r.jsx("span",{className:He("text-primary400",n),children:t.name}),r.jsx("span",{className:He("font-medium",s),children:t.value})]});function wl({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",id:"Isolation_Mode",viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M12,.021A10.077,10.077,0,0,0,1.935,10.087c0,5.274,8.166,12.329,9.1,13.117l.967.817.967-.817c.932-.788,9.1-7.843,9.1-13.117A10.077,10.077,0,0,0,12,.021Zm0,20.043c-3.065-2.792-7.067-7.328-7.067-9.977a7.067,7.067,0,1,1,14.134,0C19.067,12.731,15.064,17.269,12,20.064Z"}),r.jsx("circle",{cx:"12",cy:"10.002",r:"2.997"})]})}function Mie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:r.jsx("path",{d:"M8 1a1 1 0 0 0-1 1v.12a4.17 4.17 0 0 0-3.15 3.6L3.5 9l-.87 1.74A1.21 1.21 0 0 0 3.7 12.5h8.58a1.21 1.21 0 0 0 1.08-1.76L12.5 9l-.35-3.27A4.17 4.17 0 0 0 9 2.13V2a1 1 0 0 0-1-1zm0 14.5c1 0 1.5-.95 1.5-1.5v-.5h-3v.5c0 .55.5 1.5 1.5 1.5z"})})}function Oie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("g",{children:r.jsx("path",{d:"M23.259,16.2l-2.6-9.371A9.321,9.321,0,0,0,2.576,7.3L.565,16.35A3,3,0,0,0,3.493,20H7.1a5,5,0,0,0,9.8,0h3.47a3,3,0,0,0,2.89-3.8ZM12,22a3,3,0,0,1-2.816-2h5.632A3,3,0,0,1,12,22Zm9.165-4.395a.993.993,0,0,1-.8.395H3.493a1,1,0,0,1-.976-1.217l2.011-9.05a7.321,7.321,0,0,1,14.2-.372l2.6,9.371A.993.993,0,0,1,21.165,17.605Z"})})})}function Rie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",children:r.jsx("path",{d:"M1 7C.5 3.5 2.7 2 4.8 2 6.82 2 8 4 8 4s1.17-2 3.2-2c2.1 0 4.3 1.5 3.8 5s-5.83 7-7 7-6.5-3.5-7-7z",clipRule:"evenodd"})})}function ku({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Bold",viewBox:"0 0 24 24",width:t,height:e,className:n,children:r.jsx("path",{d:"M17.25,1.851A6.568,6.568,0,0,0,12,4.558,6.568,6.568,0,0,0,6.75,1.851,7.035,7.035,0,0,0,0,9.126c0,4.552,4.674,9.425,8.6,12.712a5.29,5.29,0,0,0,6.809,0c3.922-3.287,8.6-8.16,8.6-12.712A7.035,7.035,0,0,0,17.25,1.851ZM13.477,19.539a2.294,2.294,0,0,1-2.955,0C5.742,15.531,3,11.736,3,9.126A4.043,4.043,0,0,1,6.75,4.851,4.043,4.043,0,0,1,10.5,9.126a1.5,1.5,0,0,0,3,0,4.043,4.043,0,0,1,3.75-4.275A4.043,4.043,0,0,1,21,9.126C21,11.736,18.258,15.531,13.477,19.539Z"})})}function ov({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,children:r.jsx("path",{d:"M0 1a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1m1 4a1 1 0 0 0 0 2h5a1 1 0 0 0 0-2zm0 5a1 1 0 1 0 0 2h3a1 1 0 1 0 0-2zm7-1a1 1 0 0 1 1-1h2V6a1 1 0 1 1 2 0v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 1 1-2 0v-2H9a1 1 0 0 1-1-1"})})}function II({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,children:r.jsx("path",{d:"M0 1a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1m1 4a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zm-1 6a1 1 0 0 1 1-1h2a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1m9.707.707 4-4a1 1 0 0 0-1.414-1.414L9 9.586 7.707 8.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0Z"})})}function Lie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:e,className:n,children:r.jsx("path",{d:"M19,2h-1V1c0-.55-.45-1-1-1s-1,.45-1,1v1H8V1c0-.55-.45-1-1-1s-1,.45-1,1v1h-1C2.24,2,0,4.24,0,7v12c0,2.76,2.24,5,5,5h14c2.76,0,5-2.24,5-5V7c0-2.76-2.24-5-5-5Zm-8,7v3h-3v-3h3Zm5,0v3h-3v-3h3Zm6,0v3h-4v-3h4ZM6,12H2v-3H6v3Zm-4,2H6v3H2v-3Zm6,0h3v3h-3v-3Zm3,5v3h-3v-3h3Zm2,0h3v3h-3v-3Zm0-2v-3h3v3h-3Zm5-3h4v3h-4v-3ZM5,4h14c1.65,0,3,1.35,3,3H2c0-1.65,1.35-3,3-3Zm-3,15H6v3h-1c-1.65,0-3-1.35-3-3Zm17,3h-1v-3h4c0,1.65-1.35,3-3,3Z"})})}function Xi({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",children:r.jsx("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zM8 4a1 1 0 0 0-1 1v2H5a1 1 0 0 0 0 2h2v2a1 1 0 1 0 2 0V9h2a1 1 0 1 0 0-2H9V5a1 1 0 0 0-1-1z",clipRule:"evenodd"})})}function Bie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:e,className:n,children:r.jsx("path",{d:"M22.5,21h-1.5V6.5c0-2.481-2.019-4.5-4.5-4.5h-1.258c-.243-.363-.541-.694-.889-.979C13.307,.163,11.946-.179,10.617,.089l-3.598,.72c-2.329,.466-4.02,2.527-4.02,4.902v15.289H1.5c-.829,0-1.5,.672-1.5,1.5s.671,1.5,1.5,1.5H22.5c.829,0,1.5-.672,1.5-1.5s-.671-1.5-1.5-1.5Zm-4.5-14.5v14.5h-2V5h.5c.827,0,1.5,.673,1.5,1.5Zm-12-.789c0-.95,.676-1.774,1.608-1.961l3.598-.72c.444-.087,.897,.025,1.246,.312,.349,.285,.549,.708,.549,1.159V21H6V5.711Zm6,6.789c0,.828-.672,1.5-1.5,1.5s-1.5-.672-1.5-1.5,.672-1.5,1.5-1.5,1.5,.672,1.5,1.5Z"})})}function Pr({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:t,height:e,className:n,children:r.jsx("path",{d:"M18,6h0a1,1,0,0,0-1.414,0L12,10.586,7.414,6A1,1,0,0,0,6,6H6A1,1,0,0,0,6,7.414L10.586,12,6,16.586A1,1,0,0,0,6,18H6a1,1,0,0,0,1.414,0L12,13.414,16.586,18A1,1,0,0,0,18,18h0a1,1,0,0,0,0-1.414L13.414,12,18,7.414A1,1,0,0,0,18,6Z"})})}function Hb({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:e,className:n,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zM7.293 7.293a1 1 0 0 1 1.414 0L12 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414L13.414 12l3.293 3.293a1 1 0 1 1-1.414 1.414L12 13.414l-3.293 3.293a1 1 0 1 1-1.414-1.414L10.586 12 7.293 8.707a1 1 0 0 1 0-1.414z",fill:"currentColor"})})}function wa({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M7.14258 13.6805L10.6774 9.85547L7.14258 6.03047L8.23615 4.85547L12.8569 9.85547L8.23615 14.8555L7.14258 13.6805Z"})})}function Fie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 32 32",children:r.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M21.626 11.72c1.56 1.296 3.16 2.625 3.964 4.717 1.49 3.565.48 7.662-2.288 10.229-2.513 2.301-6.012 2.9-9.244 2.487-2.261-.292-8.553-2.58-9.058-10.029 0-.835.085-1.538.226-2.146.399-1.812 1.249-3.074 1.918-4.067q.15-.223.286-.429c.386-.572 1.29-.24 1.21.453l-.022.193c-.211 1.837-.463 4.023 1.862 5.783.519.4 1.237-.173.998-.785-2.913-7.475.558-13.181 5.387-16.028.505-.305 1.13.147.997.732-1.103 4.847 1.279 6.826 3.764 8.89m-5.473 1.778c.23 1.132 1.205 2.04 2.189 2.956 1.145 1.066 2.3 2.14 2.3 3.588a4.53 4.53 0 0 1-.633 2.459c-1.022 1.582-3.098 2.142-4.868 1.434l.22-.22c.87-.862 1.408-1.394 1.504-2.78.1-1.46-.356-2.31-.778-3.096-.173-.322-.34-.633-.46-.97a4.1 4.1 0 0 1-.173-1.294c.038-.466.177-1.007.464-1.666q.104-.2.235-.41",clipRule:"evenodd"})})}function $ie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 10 5",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M1.175 0L5 3.09299L8.825 0L10 0.956873L5 5L0 0.956873L1.175 0Z"})})}function Uie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0.61 0.27 13.05 7.72",children:r.jsx("path",{d:"m10.233 7.433.96-.96L7.94 3.22 5.746 5.413c-.26.26-.68.26-.94 0l-4-4.006a.664.664 0 1 1 .94-.94L5.273 4l2.193-2.193c.26-.26.68-.26.94 0l3.727 3.72.96-.96a.333.333 0 0 1 .567.233v2.86a.33.33 0 0 1-.334.333h-2.86c-.293.007-.44-.353-.233-.56z",fill:"#53B375"})})}function Vie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0.61 0 13.05 7.73",children:r.jsx("path",{d:"m10.233.567.96.96L7.94 4.78 5.746 2.587a.664.664 0 0 0-.94 0l-4 4.006a.664.664 0 1 0 .94.94L5.273 4l2.193 2.193c.26.26.68.26.94 0l3.727-3.72.96.96c.207.207.567.06.567-.233V.333A.32.32 0 0 0 13.333 0h-2.86c-.3 0-.447.36-.24.567z",fill:"#FF6A59"})})}function zie({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,viewBox:"0 0 25 26",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M13.1693 0.934432L16.5523 8.12416C16.5964 8.22434 16.692 8.29369 16.795 8.30911L24.3626 9.46501C24.973 9.55748 25.2157 10.3435 24.7745 10.7982L19.4572 16.2232C19.2807 16.4004 19.1998 16.6624 19.244 16.9167L20.5016 24.5842C20.6045 25.2239 19.9647 25.7093 19.4205 25.4088L12.6471 21.6791C12.5515 21.6251 12.4412 21.6251 12.3456 21.6791L5.57217 25.4088C5.02795 25.7093 4.38811 25.2239 4.49108 24.5842L5.7928 16.6856C5.80751 16.5777 5.77809 16.4621 5.69719 16.385L0.225532 10.7904C-0.215731 10.3358 0.026964 9.54978 0.637378 9.4573L8.20504 8.3014C8.308 8.28599 8.40361 8.21663 8.44773 8.11646L11.8308 0.926726C12.1029 0.35648 12.8971 0.35648 13.1693 0.934432Z"}),r.jsx("defs",{children:r.jsxs("radialGradient",{id:"paint0_radial_1452_25206",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(11.8783 10.3944) scale(12.2181 12.8023)",children:[r.jsx("stop",{}),r.jsx("stop",{offset:"0.5492"}),r.jsx("stop",{offset:"0.7469"}),r.jsx("stop",{offset:"0.8874"}),r.jsx("stop",{offset:"1"})]})})]})}function Hie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M12.5634 13.0129H12.0132L12.4504 12.2937L12.7015 13.0129H12.5634ZM10.4765 15.5407L12.0037 13.0286V13.5726V15.1307V15.6904H12.5634H18.75H19.3097V15.1307V13.5726V13.0129H18.75H17.9269L13.9717 3.01133L13.5431 1.92757L12.9652 2.93959L9.99849 8.13432L7.03494 2.9398L6.45732 1.92734L6.02834 3.01118L2.06969 13.0129H1.25H0.69028V13.5726V15.1307V15.6904H1.25H7.43658H7.9963V15.1307V13.5726V13.0309L9.51979 15.5404L9.99792 16.328L10.4765 15.5407ZM7.43658 13.0129H7.29848L7.5493 12.2946L7.98536 13.0129H7.43658Z",fill:"#4FB04F",stroke:"white",strokeWidth:"1.4"})})}function MI({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,viewBox:"0 0 21 20",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M12.0625 13.4375H3.625",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M17.375 13.4375H15.1875",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M13.625 15C14.4879 15 15.1875 14.3004 15.1875 13.4375C15.1875 12.5746 14.4879 11.875 13.625 11.875C12.7621 11.875 12.0625 12.5746 12.0625 13.4375C12.0625 14.3004 12.7621 15 13.625 15Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M7.0625 6.5625H3.625",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M17.375 6.5625H10.1875",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M8.625 8.125C9.48794 8.125 10.1875 7.42544 10.1875 6.5625C10.1875 5.69956 9.48794 5 8.625 5C7.76206 5 7.0625 5.69956 7.0625 6.5625C7.0625 7.42544 7.76206 8.125 8.625 8.125Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Op({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 9 7",fill:"none",children:r.jsx("path",{d:"M1 3.27778L3.5 5.5L8 1.5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function qie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M480 128c0 8.188-3.125 16.38-9.375 22.62l-256 256C208.4 412.9 200.2 416 192 416s-16.38-3.125-22.62-9.375l-128-128C35.13 272.4 32 264.2 32 256c0-18.28 14.95-32 32-32c8.188 0 16.38 3.125 22.62 9.375L192 338.8l233.4-233.4C431.6 99.13 439.8 96 448 96C465.1 96 480 109.7 480 128z"})})}function Yu({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M6.675 7L10.5 10.5348L14.325 7L15.5 8.09357L10.5 12.7143L5.5 8.09357L6.675 7Z"})})}function X2({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",xmlSpace:"preserve",children:r.jsx("path",{d:"M512 230.431 283.498 44.621v94.807C60.776 141.244-21.842 307.324 4.826 467.379c48.696-99.493 149.915-138.677 278.672-143.14v92.003L512 230.431z"})})}function Wie({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 32 32",children:[r.jsx("path",{fillRule:"evenodd",d:"M11.75 22.42a8.08 8.08 0 0 0 4.43 1.32 8.03 8.03 0 0 0 8.04-8c0-4.4-3.6-7.98-8.05-7.98a8.03 8.03 0 0 0-8.05 7.99c0 1.75.57 3.37 1.54 4.68l-1 2.97 3.09-.98zm1.67-11c.23.01.35.03.51.4l.2.47.52 1.26c.06.11.12.27.04.43-.07.15-.14.22-.24.34l-.02.02-.15.17a3.42 3.42 0 0 0-.2.22c-.12.13-.23.27-.1.5.14.23.61 1 1.3 1.6.83.74 1.52 1.01 1.82 1.13l.08.03c.19.08.42.06.56-.09.16-.16.34-.42.54-.69l.1-.13c.15-.23.36-.26.57-.18.22.08 1.37.64 1.6.76l.14.07c.16.07.27.12.31.2.06.1.06.57-.13 1.11-.2.55-.97 1-1.58 1.13-.42.09-.97.16-2.82-.6-2.2-.9-3.66-3.02-3.96-3.45l-.05-.07-.01-.01a4.5 4.5 0 0 1-.95-2.4c0-1.1.56-1.67.8-1.92l.03-.02c.19-.2.51-.28.82-.28h.27z",clipRule:"evenodd"}),r.jsx("path",{fillRule:"evenodd",d:"M3.53 5.66C3 6.7 3 8.07 3 10.8v10.4c0 2.73 0 4.1.53 5.14a4.88 4.88 0 0 0 2.13 2.13c1.05.53 2.41.53 5.14.53h10.4c2.73 0 4.1 0 5.14-.53a4.88 4.88 0 0 0 2.13-2.13c.53-1.05.53-2.41.53-5.14V10.8c0-2.73 0-4.1-.53-5.14a4.88 4.88 0 0 0-2.13-2.13C25.29 3 23.93 3 21.2 3H10.8c-2.73 0-4.1 0-5.14.53a4.88 4.88 0 0 0-2.13 2.13zm3.08 10.09c0-5.25 4.28-9.5 9.57-9.5a9.54 9.54 0 0 1 9.57 9.5c0 5.24-4.29 9.5-9.57 9.5a9.6 9.6 0 0 1-4.63-1.19l-5.3 1.69 1.73-5.1a9.42 9.42 0 0 1-1.37-4.9z",clipRule:"evenodd"})]})}function Gie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 32 32",children:r.jsx("path",{fillRule:"evenodd",d:"M3.53 5.66C3 6.7 3 8.07 3 10.8v10.4c0 2.73 0 4.1.53 5.14a4.88 4.88 0 0 0 2.13 2.13c1.05.53 2.41.53 5.14.53h10.4c2.73 0 4.1 0 5.14-.53a4.88 4.88 0 0 0 2.13-2.13c.53-1.05.53-2.41.53-5.14V10.8c0-2.73 0-4.1-.53-5.14a4.88 4.88 0 0 0-2.13-2.13C25.29 3 23.93 3 21.2 3H10.8c-2.73 0-4.1 0-5.14.53a4.88 4.88 0 0 0-2.13 2.13zM22.1 21.55H24c.52 0 .8-.28.61-.8a8.21 8.21 0 0 0-1.6-2.23c-.22-.26-.5-.53-.74-.77s-.46-.45-.55-.58c-.28-.37-.2-.52 0-.85 0 0 2.3-3.27 2.55-4.37.12-.4 0-.7-.57-.7h-1.9c-.47 0-.7.26-.82.54 0 0-.97 2.35-2.33 3.87-.44.44-.64.59-.88.59-.11 0-.3-.15-.3-.55v-3.77c0-.47-.14-.7-.54-.7h-2.98a.46.46 0 0 0-.47.45c0 .17.1.3.22.46.2.25.48.6.53 1.4v2.78c0 .6-.11.72-.35.72-.64 0-2.2-2.37-3.14-5.07-.18-.51-.37-.73-.84-.73H8c-.52 0-.63.26-.63.53 0 .51.64 3 2.99 6.3 1.56 2.25 3.78 3.46 5.78 3.46 1.2 0 1.35-.27 1.35-.73v-1.7c0-.54.11-.65.5-.65.28 0 .77.15 1.9 1.23.36.37.64.69.87.95.57.63.83.92 1.34.92z",clipRule:"evenodd"})})}function Yie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 32 32",children:r.jsx("path",{fillRule:"evenodd",d:"M8 3h16a5 5 0 0 1 5 5v16a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5V8a5 5 0 0 1 5-5zM6.09 15.52l17.38-6.78a.9.9 0 0 1 1.2 1.02L21.7 23.95a.94.94 0 0 1-1.46.56l-4.49-3.29-2.28 2.33a.76.76 0 0 1-1.27-.3l-1.65-5.23-4.41-1.3a.63.63 0 0 1-.05-1.2zm7.13 3.51 8.07-7.14c.2-.17-.03-.47-.25-.34l-9.54 5.92a.43.43 0 0 0-.18.5l1.28 4.12c.03.08.15.07.16-.02l.31-2.76a.43.43 0 0 1 .15-.28z",clipRule:"evenodd"})})}function Xie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 32 32",children:r.jsx("path",{fillRule:"evenodd",d:"M3 10.8c0-2.73 0-4.1.53-5.14a4.88 4.88 0 0 1 2.13-2.13C6.71 3 8.07 3 10.8 3h10.4c2.73 0 4.1 0 5.14.53a4.88 4.88 0 0 1 2.13 2.13C29 6.71 29 8.07 29 10.8v10.4c0 2.73 0 4.1-.53 5.14a4.88 4.88 0 0 1-2.13 2.13c-1.05.53-2.41.53-5.14.53H10.8c-2.73 0-4.1 0-5.14-.53a4.88 4.88 0 0 1-2.13-2.13C3 25.29 3 23.93 3 21.2V10.8zm13 5.46a4.18 4.18 0 0 0 4.15-4.19c0-2.31-1.86-4.2-4.15-4.2a4.18 4.18 0 0 0-4.15 4.2 4.18 4.18 0 0 0 4.15 4.2zm1.72-4.19A1.73 1.73 0 0 0 16 10.33a1.73 1.73 0 0 0-1.72 1.74A1.73 1.73 0 0 0 16 13.81a1.73 1.73 0 0 0 1.72-1.74zm2.37 6.6a7.72 7.72 0 0 1-2.41 1.01L20 22.03c.45.48.45 1.23 0 1.7a1.2 1.2 0 0 1-1.72.04L16 21.47l-2.3 2.3c-.22.24-.53.35-.84.35-.32 0-.63-.12-.86-.35l-.02-.02a1.23 1.23 0 0 1 .02-1.72l2.32-2.35a7.68 7.68 0 0 1-2.4-1 1.24 1.24 0 0 1-.39-1.7 1.2 1.2 0 0 1 1.68-.39 5.22 5.22 0 0 0 5.58 0 1.2 1.2 0 0 1 1.63.38 1.24 1.24 0 0 1-.33 1.7z",clipRule:"evenodd"})})}function $h({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M12.5 3.75H16.25V7.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M11.875 8.125L16.25 3.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M7.5 16.25H3.75V12.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M8.125 11.875L3.75 16.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Ja({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 20 20",children:[r.jsx("path",{d:"M3.125 10H16.875",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M10 3.125V16.875",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Uh({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 20 20",fill:"none",children:r.jsx("path",{d:"M3.125 10H16.875",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function Rp({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 20 20",children:r.jsx("path",{d:"m9.58 6.692-.013.008a.869.869 0 0 0-.42.486c-.294-.275-.72-.36-1.07-.177a.883.883 0 0 0-.434.551c-.287-.215-.663-.265-.978-.1l-.015.008a.822.822 0 0 0-.382.407L5.195 5.833c-.26-.494-.84-.7-1.292-.464-.45.237-.608.832-.35 1.325l2.125 4.054-.367-.163a1.248 1.248 0 0 0-1.014-.015 1.214 1.214 0 0 0-.664.734l-.106.266a.205.205 0 0 0 .072.241l3.83 2.745c.7.502 1.574.585 2.28.214l2.11-1.107-.002-.002c1.07-.562 1.432-1.98.813-3.16-.278-.53-.486-.922-.654-1.241-.447-.855-.614-1.17-1.11-2.11-.26-.491-.835-.694-1.285-.458zM8.135 2.824c1.158 0 2.145.33 2.804.792.096.068.116.086.184.15l.007.006c.057.053.137.128.28.253a.91.91 0 0 0 1.59-.61.91.91 0 0 0-.274-.652C11.722 1.68 10.022 1 8.135 1s-3.587.68-4.59 1.763a.91.91 0 0 0 .637 1.564.91.91 0 0 0 .678-.302c.143-.125.223-.2.28-.253l.007-.006c.068-.064.088-.082.184-.15.66-.461 1.647-.792 2.804-.792z"})})}function un({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 512 512",xmlSpace:"preserve",children:r.jsxs("g",{children:[r.jsx("path",{d:"M490.667,96c0-17.673-14.327-32-32-32h-80.555C364.632,25.757,328.549,0.13,288,0h-64   c-40.549,0.13-76.632,25.757-90.112,64H53.333c-17.673,0-32,14.327-32,32l0,0c0,17.673,14.327,32,32,32H64v266.667   C64,459.468,116.532,512,181.333,512h149.333C395.468,512,448,459.468,448,394.667V128h10.667   C476.34,128,490.667,113.673,490.667,96z M384,394.667C384,424.122,360.122,448,330.667,448H181.333   C151.878,448,128,424.122,128,394.667V128h256V394.667z"}),r.jsx("path",{d:"M202.667,384c17.673,0,32-14.327,32-32V224c0-17.673-14.327-32-32-32s-32,14.327-32,32v128   C170.667,369.673,184.994,384,202.667,384z"}),r.jsx("path",{d:"M309.333,384c17.673,0,32-14.327,32-32V224c0-17.673-14.327-32-32-32s-32,14.327-32,32v128   C277.333,369.673,291.66,384,309.333,384z"})]})})}function ci({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M7.00043 9.33289C8.28861 9.33289 9.33289 8.28861 9.33289 7.00043C9.33289 5.71225 8.28861 4.66797 7.00043 4.66797C5.71225 4.66797 4.66797 5.71225 4.66797 7.00043C4.66797 8.28861 5.71225 9.33289 7.00043 9.33289Z"}),r.jsx("path",{d:"M13.5723 5.49499C12.6679 4.02204 10.6106 1.55078 6.99999 1.55078C3.38933 1.55078 1.33209 4.02204 0.427675 5.49499C-0.142558 6.41731 -0.142558 7.58271 0.427675 8.50505C1.33209 9.978 3.38933 12.4493 6.99999 12.4493C10.6106 12.4493 12.6679 9.978 13.5723 8.50505C14.1425 7.58271 14.1425 6.41731 13.5723 5.49499ZM6.99999 10.4987C5.06772 10.4987 3.50129 8.93228 3.50129 7.00001C3.50129 5.06774 5.06772 3.50131 6.99999 3.50131C8.93226 3.50131 10.4987 5.06774 10.4987 7.00001C10.4967 8.93148 8.93146 10.4968 6.99999 10.4987Z"})]})}function Ns({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M7.242 16.876H3.75a.625.625 0 0 1-.625-.625v-3.492a.617.617 0 0 1 .18-.438l9.375-9.375a.625.625 0 0 1 .89 0l3.485 3.485a.627.627 0 0 1 0 .89L7.68 16.696a.616.616 0 0 1-.438.18ZM10.625 5 15 9.375M12.813 7.188l-7.5 7.5M7.46 16.836l-4.296-4.297"})})}function Kie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z"})})}function V7({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{fill:"none",d:"M0 0h20v20H0z"}),r.jsx("path",{d:"M18 12h-2.18c-.17.7-.44 1.35-.81 1.93l1.54 1.54-2.1 2.1-1.54-1.54c-.58.36-1.23.63-1.91.79V19H8v-2.18c-.68-.16-1.33-.43-1.91-.79l-1.54 1.54-2.12-2.12 1.54-1.54c-.36-.58-.63-1.23-.79-1.91H1V9.03h2.17c.16-.7.44-1.35.8-1.94L2.43 5.55l2.1-2.1 1.54 1.54c.58-.37 1.24-.64 1.93-.81V2h3v2.18c.68.16 1.33.43 1.91.79l1.54-1.54 2.12 2.12-1.54 1.54c.36.59.64 1.24.8 1.94H18V12zm-8.5 1.5c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3z"})]})}function Qie({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M11.5 16a1.5 1.5 0 0 0-1.5 1.5v.8A2.7 2.7 0 0 1 7.3 21H5.7A2.7 2.7 0 0 1 3 18.3V5.7A2.7 2.7 0 0 1 5.7 3h1.6A2.7 2.7 0 0 1 10 5.7v.8a1.5 1.5 0 0 0 3 0v-.8A5.706 5.706 0 0 0 7.3 0H5.7A5.706 5.706 0 0 0 0 5.7v12.6A5.706 5.706 0 0 0 5.7 24h1.6a5.706 5.706 0 0 0 5.7-5.7v-.8a1.5 1.5 0 0 0-1.5-1.5Z"}),r.jsx("path",{d:"m22.561 9.525-4.586-4.586a1.5 1.5 0 0 0-2.121 2.122l3.411 3.411L7 10.5a1.5 1.5 0 0 0 0 3l12.318-.028-3.467 3.467a1.5 1.5 0 0 0 2.121 2.122l4.586-4.586a3.505 3.505 0 0 0 .003-4.95Z"})]})}function Pk({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:e,className:n,children:r.jsx("path",{d:"M24 18.957H4.707l1.9 1.9-2.125 2.118-3.75-3.75a2.5 2.5 0 0 1 0-3.536l3.75-3.75L6.6 14.061l-1.9 1.9H24ZM17.4 9.9l2.122 2.122 3.75-3.75a2.5 2.5 0 0 0 0-3.536L19.518.982 17.4 3.1 19.3 5H0v3h19.293Z"})})}function Ik({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:t,height:e,className:n,children:r.jsx("path",{d:"M9.167 10.832v-5c0-.458.375-.833.833-.833.458 0 .833.375.833.833v5a.836.836 0 0 1-.833.833.836.836 0 0 1-.833-.833ZM10 12.499c-.692 0-1.25.558-1.25 1.25 0 .691.558 1.25 1.25 1.25.691 0 1.25-.559 1.25-1.25 0-.692-.559-1.25-1.25-1.25Zm9.65 4.066c-.583 1.125-1.808 1.767-3.342 1.767H3.7c-1.542 0-2.758-.642-3.342-1.767-.591-1.133-.425-2.583.417-3.8l6.7-10.6A3.06 3.06 0 0 1 10 .832c1 0 1.933.483 2.5 1.308l6.733 10.642c.842 1.217 1 2.658.409 3.783h.008Zm-1.792-2.85s-.017-.016-.017-.033L11.117 3.057A1.366 1.366 0 0 0 10 2.499c-.458 0-.875.216-1.133.591L2.158 13.682c-.516.733-.633 1.533-.333 2.108.292.567.958.875 1.867.875h12.6c.908 0 1.574-.308 1.866-.875.3-.575.183-1.375-.308-2.075h.008Z"})})}function Lp({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{viewBox:"0 0 20 20",width:t,height:e,className:`stroke-primary400 ${n}`,fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M10 17.5a7.5 7.5 0 100-15 7.5 7.5 0 000 15z"}),r.jsx("path",{d:"M9.375 9.375H10v4.375h.625M9.844 7.344a.781.781 0 100-1.563.781.781 0 000 1.563z"})]})}function z7({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:He("fill-[#8593A5]",n),viewBox:"0 0 16 16",children:r.jsx("path",{fillRule:"evenodd",d:"M10 6.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0zm-.38 4.53a5.5 5.5 0 1 1 1.41-1.41l2.92 2.92a1 1 0 0 1-1.41 1.41l-2.92-2.92z",clipRule:"evenodd"})})}function H7({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 16 16",children:[r.jsx("path",{d:"M7.036 6a1 1 0 0 1 2 0v1.739l1.2.841a1 1 0 1 1-1.146 1.64L7.455 9.074a1 1 0 0 1-.415-.976A1.013 1.013 0 0 1 7.036 8V6z"}),r.jsx("path",{fillRule:"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-2 0A6 6 0 1 1 2 8a6 6 0 0 1 12 0z",clipRule:"evenodd"})]})}function PE({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:r.jsxs("g",{"data-name":"1",children:[r.jsx("path",{d:"M397.78 316H192.65A15 15 0 0 1 178 304.33l-34.54-150.48a15 15 0 0 1 14.62-18.36h274.27A15 15 0 0 1 447 153.85l-34.6 150.48A15 15 0 0 1 397.78 316Zm-193.19-30h181.25l27.67-120.48h-236.6ZM222 450a57.48 57.48 0 1 1 57.48-57.48A57.54 57.54 0 0 1 222 450Zm0-84.95a27.48 27.48 0 1 0 27.48 27.47A27.5 27.5 0 0 0 222 365.05ZM368.42 450a57.48 57.48 0 1 1 57.48-57.48A57.54 57.54 0 0 1 368.42 450Zm0-84.95a27.48 27.48 0 1 0 27.48 27.47 27.5 27.5 0 0 0-27.48-27.47Z"}),r.jsx("path",{d:"M158.08 165.49a15 15 0 0 1-14.23-10.26L118.14 78H70.7a15 15 0 1 1 0-30H129a15 15 0 0 1 14.23 10.26l29.13 87.49a15 15 0 0 1-14.23 19.74Z"})]})})}function ls({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M23 18.77V14.5c0-2.48-2.02-4.5-4.5-4.5h-7C9.02 10 7 12.02 7 14.5v4.27c-.61.55-1 1.35-1 2.23 0 1.65 1.35 3 3 3h12c1.65 0 3-1.35 3-3 0-.89-.39-1.68-1-2.23ZM9 14.5a2.5 2.5 0 0 1 2.5-2.5h7a2.5 2.5 0 0 1 2.5 2.5V18h-2.59c-.53 0-1.04.21-1.41.59l-.41.41h-3.17l-.41-.41c-.37-.37-.89-.59-1.41-.59H9.01v-3.5ZM21 22H9c-.55 0-1-.45-1-1s.45-1 1-1h2.59l.41.41c.37.37.89.59 1.41.59h3.17c.53 0 1.04-.21 1.41-.59l.41-.41h2.59c.55 0 1 .45 1 1s-.45 1-1 1ZM4 16c-1.1 0-2-.9-2-2V8.13c0-.93.42-1.79 1.15-2.36l4-3.13c1.09-.85 2.61-.85 3.7 0l4 3.13c.5.39.85.91 1.03 1.51.16.53.71.84 1.24.68.53-.16.83-.71.68-1.24a4.972 4.972 0 0 0-1.71-2.53l-.08-.06V1c0-.55-.45-1-1-1s-1 .45-1 1v1.56l-1.92-1.5a5 5 0 0 0-6.17 0l-4 3.13A4.965 4.965 0 0 0 0 8.13V14c0 2.21 1.79 4 4 4 .55 0 1-.45 1-1s-.45-1-1-1ZM15.99 4.12Z"})})}function OI({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M23.32 6.35A3.467 3.467 0 0 0 20.56 5H8.48l-.26-1.96A3.512 3.512 0 0 0 4.75 0H4.5C3.67 0 3 .67 3 1.5S3.67 3 4.5 3h.25c.25 0 .46.19.5.43l1.54 11.53A3.512 3.512 0 0 0 10.26 18h7.25c2.53 0 4.72-1.71 5.34-4.17l1.12-4.49c.26-1.05.03-2.15-.64-3Zm-2.27 2.27-1.12 4.49A2.504 2.504 0 0 1 17.5 15h-7.25c-.25 0-.46-.19-.5-.43L8.87 8h11.68c.21 0 .34.12.39.19.06.07.14.22.09.43ZM0 7.5C0 6.67.67 6 1.5 6h1C3.33 6 4 6.67 4 7.5S3.33 9 2.5 9h-1C.67 9 0 8.33 0 7.5Zm5 8c0 .83-.67 1.5-1.5 1.5h-2C.67 17 0 16.33 0 15.5S.67 14 1.5 14h2c.83 0 1.5.67 1.5 1.5Zm6 6.5c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2Zm9 0c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2ZM0 11.5c0-.83.67-1.5 1.5-1.5h1.46c.83 0 1.5.67 1.5 1.5S3.79 13 2.96 13H1.5C.67 13 0 12.33 0 11.5Z"})})}function IE({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),r.jsx("path",{d:"M21 15v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2zm.008-12c.548 0 .992.445.992.993v9.349A5.99 5.99 0 0 0 20 13V5H4l.001 14 9.292-9.293a.999.999 0 0 1 1.32-.084l.093.085 3.546 3.55a6.003 6.003 0 0 0-3.91 7.743L2.992 21A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016zM8 7a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"})]})}function Zie({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M19,0H5A5.006,5.006,0,0,0,0,5V19a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V5A5.006,5.006,0,0,0,19,0ZM5,2H19a3,3,0,0,1,3,3V19a2.951,2.951,0,0,1-.3,1.285l-9.163-9.163a5,5,0,0,0-7.072,0L2,14.586V5A3,3,0,0,1,5,2ZM5,22a3,3,0,0,1-3-3V17.414l4.878-4.878a3,3,0,0,1,4.244,0L20.285,21.7A2.951,2.951,0,0,1,19,22Z"}),r.jsx("path",{d:"M16,10.5A3.5,3.5,0,1,0,12.5,7,3.5,3.5,0,0,0,16,10.5Zm0-5A1.5,1.5,0,1,1,14.5,7,1.5,1.5,0,0,1,16,5.5Z"})]})}function lv({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 512 512",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M405.2,232.9L126.8,67.2c-3.4-2-6.9-3.2-10.9-3.2c-10.9,0-19.8,9-19.8,20H96v344h0.1c0,11,8.9,20,19.8,20  c4.1,0,7.5-1.4,11.2-3.4l278.1-165.5c6.6-5.5,10.8-13.8,10.8-23.1C416,246.7,411.8,238.5,405.2,232.9z"})})}function Mk({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 512 512",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",children:r.jsxs("g",{children:[r.jsx("path",{d:"M224,435.8V76.1c0-6.7-5.4-12.1-12.2-12.1h-71.6c-6.8,0-12.2,5.4-12.2,12.1v359.7c0,6.7,5.4,12.2,12.2,12.2h71.6   C218.6,448,224,442.6,224,435.8z"}),r.jsx("path",{d:"M371.8,64h-71.6c-6.7,0-12.2,5.4-12.2,12.1v359.7c0,6.7,5.4,12.2,12.2,12.2h71.6c6.7,0,12.2-5.4,12.2-12.2V76.1   C384,69.4,378.6,64,371.8,64z"})]})})}function K2({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M16.43 2.806 1.867 6.908a.625.625 0 0 0-.093 1.171l6.687 3.165c.131.06.236.165.297.296l3.164 6.688a.625.625 0 0 0 1.172-.094l4.101-14.562a.617.617 0 0 0-.765-.766v0ZM8.664 11.336l3.531-3.531",stroke:"#006CEE",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function RI({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"})})}function Jie({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})})}function Q2({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("title",{}),r.jsx("circle",{cx:"256",cy:"256",r:"48"}),r.jsx("circle",{cx:"416",cy:"256",r:"48"}),r.jsx("circle",{cx:"96",cy:"256",r:"48"})]})}function eae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"})})}function tae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"})})}function nae({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M0 0h48v48H0z",fill:"none"}),r.jsx("path",{d:"M13.25 21.59c2.88 5.66 7.51 10.29 13.18 13.17l4.4-4.41c.55-.55 1.34-.71 2.03-.49C35.1 30.6 37.51 31 40 31c1.11 0 2 .89 2 2v7c0 1.11-.89 2-2 2C21.22 42 6 26.78 6 8c0-1.11.9-2 2-2h7c1.11 0 2 .89 2 2 0 2.49.4 4.9 1.14 7.14.22.69.06 1.48-.49 2.03l-4.4 4.42z"})]})}function sae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M21,6H5c-.859,0-1.672-.372-2.235-.999,.55-.614,1.349-1.001,2.235-1.001H23c.553,0,1-.448,1-1s-.447-1-1-1H5C2.239,2,0,4.239,0,7v10c0,2.761,2.239,5,5,5H21c1.657,0,3-1.343,3-3V9c0-1.657-1.343-3-3-3Zm1,13c0,.551-.448,1-1,1H5c-1.654,0-3-1.346-3-3V6.998c.854,.639,1.904,1.002,3,1.002H21c.552,0,1,.449,1,1v10Zm-2-5c0,.552-.448,1-1,1s-1-.448-1-1,.448-1,1-1,1,.448,1,1Z"})})}function vm({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:r.jsx("path",{d:"M2.67 1.33h10.66c.74 0 1.34.6 1.34 1.34v8c0 .73-.6 1.33-1.34 1.33H4l-2.67 2.67.01-12c0-.74.6-1.34 1.33-1.34zM4.83 7.5a.83.83 0 1 0 0-1.67.83.83 0 0 0 0 1.67zm4-.83a.83.83 0 1 1-1.66 0 .83.83 0 0 1 1.66 0zm2.34.83a.83.83 0 0 0 0-1.67.83.83 0 1 0 0 1.67z"})})}function LI({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),r.jsx("line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}),r.jsx("line",{x1:"15",x2:"15.01",y1:"9",y2:"9"})]})}function sy({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{width:t,height:e,className:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M12.5579 1.96142V11.373H14.4696C14.9369 11.373 15.1812 11.8922 14.8413 12.1902L11.8782 14.863C11.6658 15.0457 11.3365 15.0457 11.1241 14.863L8.16094 12.1902C7.82108 11.8922 8.05473 11.373 8.53266 11.373H10.4338V1.96142C10.4338 1.43264 10.9117 1 11.4958 1C12.08 1 12.5579 1.43264 12.5579 1.96142Z",fill:"#262626"}),r.jsx("path",{d:"M4.12783 1.13691L1.16113 3.81744C0.820865 4.11527 1.0548 4.63408 1.5333 4.63408H3.43667V14.0392C3.43667 14.5677 3.91517 15 4.5 15C5.08483 15 5.56333 14.5677 5.56333 14.0392V4.63408H7.4667C7.9452 4.63408 8.17914 4.11527 7.83887 3.81744L4.87217 1.13691C4.67013 0.954364 4.32987 0.954364 4.12783 1.13691Z",fill:"#262626"})]})}function rae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"m19 0h-14a5.006 5.006 0 0 0 -5 5v14a5.006 5.006 0 0 0 5 5h14a5.006 5.006 0 0 0 5-5v-14a5.006 5.006 0 0 0 -5-5zm1 11h2v2h-2zm0-2v-2h2v2zm-2 2h-12v-9h12zm-14 2h-2v-2h2zm0-4h-2v-2h2zm-2 6h2v2h-2zm4-2h12v9h-12zm14 2h2v2h-2zm2-10h-2v-2.816a3 3 0 0 1 2 2.816zm-18-2.816v2.816h-2a3 3 0 0 1 2-2.816zm-2 16.816h2v2.816a3 3 0 0 1 -2-2.816zm18 2.816v-2.816h2a3 3 0 0 1 -2 2.816z"})})}function iae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{width:t,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12,24c-1.626,0-3.16-.714-4.208-1.959-1.54,.177-3.127-.406-4.277-1.555-1.149-1.15-1.729-2.74-1.59-4.362-1.211-.964-1.925-2.498-1.925-4.124s.714-3.16,1.96-4.208c-.175-1.537,.405-3.127,1.555-4.277,1.15-1.151,2.737-1.73,4.361-1.59,.964-1.21,2.498-1.925,4.124-1.925s3.16,.714,4.208,1.959c1.542-.176,3.127,.406,4.277,1.555,1.149,1.15,1.729,2.74,1.59,4.362,1.211,.964,1.925,2.498,1.925,4.124s-.714,3.16-1.96,4.208c.175,1.537-.405,3.127-1.555,4.277-1.151,1.15-2.741,1.729-4.361,1.59-.964,1.21-2.498,1.925-4.124,1.925Zm-4.127-3.924c.561,0,1.081,.241,1.448,.676,.668,.793,1.644,1.248,2.679,1.248s2.011-.455,2.679-1.248c.403-.479,.99-.721,1.616-.67,1.034,.087,2.044-.28,2.776-1.012,.731-.731,1.1-1.743,1.012-2.776-.054-.624,.19-1.213,.67-1.617,.792-.667,1.247-1.644,1.247-2.678s-.455-2.011-1.247-2.678c-.479-.403-.724-.993-.67-1.617,.088-1.033-.28-2.045-1.012-2.776s-1.748-1.096-2.775-1.012c-.626,.057-1.214-.191-1.617-.669-.668-.793-1.644-1.248-2.679-1.248s-2.011,.455-2.679,1.248c-.404,.479-.993,.719-1.616,.67-1.039-.09-2.044,.28-2.776,1.012-.731,.731-1.1,1.743-1.012,2.776,.054,.624-.19,1.213-.67,1.617-.792,.667-1.247,1.644-1.247,2.678s.455,2.011,1.247,2.678c.479,.403,.724,.993,.67,1.617-.088,1.033,.28,2.045,1.012,2.776,.732,.732,1.753,1.098,2.775,1.012,.057-.005,.113-.007,.169-.007Zm1.127-12.076c-.552,0-1,.448-1,1s.448,1,1,1,1-.448,1-1-.448-1-1-1Zm6,6c-.552,0-1,.448-1,1s.448,1,1,1,1-.448,1-1-.448-1-1-1Zm-4.168,1.555l4-6c.307-.459,.183-1.081-.277-1.387-.461-.308-1.081-.182-1.387,.277l-4,6c-.307,.459-.183,1.081,.277,1.387,.171,.114,.363,.168,.554,.168,.323,0,.641-.156,.833-.445Z"})})}function F1({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 122.88 74.46",children:r.jsx("path",{d:"M1.87,47.2a6.33,6.33,0,1,1,8.92-9c8.88,8.85,17.53,17.66,26.53,26.45l-3.76,4.45-.35.37a6.33,6.33,0,0,1-8.95,0L1.87,47.2ZM30,43.55a6.33,6.33,0,1,1,8.82-9.07l25,24.38L111.64,2.29c5.37-6.35,15,1.84,9.66,8.18L69.07,72.22l-.3.33a6.33,6.33,0,0,1-8.95.12L30,43.55Zm28.76-4.21-.31.33-9.07-8.85L71.67,4.42c5.37-6.35,15,1.83,9.67,8.18L58.74,39.34Z"})})}function aae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,version:"1.1",viewBox:"0 0 464.628 464.628",children:r.jsx("path",{d:"m394.33,105.596h-76.136c22.944-22.372 37.216-53.596 37.216-88.096 0-9.665-7.835-17.5-17.5-17.5-44.786,0-84.057,24.045-105.596,59.9-21.539-35.855-60.81-59.9-105.595-59.9-9.665,0-17.5,7.835-17.5,17.5 0,34.5 14.273,65.724 37.216,88.096h-76.137c-9.665,0-17.5,7.835-17.5,17.5v324.033c0,9.665 7.835,17.5 17.5,17.5h324.032c9.665,0 17.5-7.835 17.5-17.5v-324.033c0-9.665-7.835-17.5-17.5-17.5zm-17.5,162.016h-127.016v-127.016h127.016v127.016zm-58.646-230.385c-7.525,32.765-33.378,58.618-66.144,66.143 7.526-32.766 33.379-58.619 66.144-66.143zm-105.596,66.142c-32.765-7.525-58.618-33.378-66.143-66.143 32.765,7.525 58.618,33.378 66.143,66.143zm2.226,37.227v127.016h-127.016v-127.016h127.016zm-127.016,162.016h127.016v127.017h-127.016v-127.017zm162.016,127.016v-127.016h127.016v127.017h-127.016z"})})}function Px({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),r.jsx("path",{d:"M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 1 0 0 4h2a2 2 0 1 1 0 4h-2a2 2 0 0 1 -1.8 -1"}),r.jsx("path",{d:"M12 7v10"})]})}function oae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:e,className:n,children:r.jsx("path",{d:"M 12 1 C 8.6761905 1 6 3.6761905 6 7 L 6 8 C 4.9069372 8 4 8.9069372 4 10 L 4 20 C 4 21.093063 4.9069372 22 6 22 L 18 22 C 19.093063 22 20 21.093063 20 20 L 20 10 C 20 8.9069372 19.093063 8 18 8 L 18 7 C 18 3.6761905 15.32381 1 12 1 z M 12 3 C 14.27619 3 16 4.7238095 16 7 L 16 8 L 8 8 L 8 7 C 8 4.7238095 9.7238095 3 12 3 z M 6 10 L 18 10 L 18 20 L 6 20 L 6 10 z M 12 13 C 10.9 13 10 13.9 10 15 C 10 16.1 10.9 17 12 17 C 13.1 17 14 16.1 14 15 C 14 13.9 13.1 13 12 13 z"})})}function lae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{viewBox:"0 0 24 24",width:t,height:e,className:n,children:r.jsx("path",{d:"M16 11L18 13V15H13V21L12 22L11 21V15H6V13L8 11V4H7V2H17V4H16V11Z"})})}function cae({width:t=20,height:e=20,className:n=""}){return r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2"}),r.jsx("path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2"}),r.jsx("path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8"}),r.jsx("path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"})]})}function uae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",children:r.jsx("path",{d:"M15,24A12,12,0,1,1,19.058.71a2.93,2.93,0,0,1,.814,5.067c-5.1,3.92-5.088,8.539,0,12.446a2.93,2.93,0,0,1-.816,5.067A12.2,12.2,0,0,1,15,24ZM15,3a9,9,0,1,0,2.925,17.508c-6.511-5.065-6.489-11.969,0-17.016A9.322,9.322,0,0,0,15,3Z"})})}function dae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",children:r.jsx("path",{d:"m12 0a12 12 0 1 0 12 12 12.013 12.013 0 0 0 -12-12zm0 21a9 9 0 1 1 9-9 9.01 9.01 0 0 1 -9 9zm3-11a2.993 2.993 0 0 1 -1.5 2.583v2.917a1.5 1.5 0 0 1 -3 0v-2.917a2.994 2.994 0 1 1 4.5-2.583z"})})}function Z2({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",children:r.jsx("path",{d:"m7.5 13a4.5 4.5 0 1 1 4.5-4.5 4.505 4.505 0 0 1 -4.5 4.5zm0-6a1.5 1.5 0 1 0 1.5 1.5 1.5 1.5 0 0 0 -1.5-1.5zm7.5 15.5a7.5 7.5 0 0 0 -15 0 1.5 1.5 0 0 0 3 0 4.5 4.5 0 0 1 9 0 1.5 1.5 0 0 0 3 0zm9-4.5a7 7 0 0 0 -11.455-5.4 1.5 1.5 0 1 0 1.91 2.314 3.951 3.951 0 0 1 2.545-.914 4 4 0 0 1 4 4 1.5 1.5 0 0 0 3 0zm-6.5-9a4.5 4.5 0 1 1 4.5-4.5 4.505 4.505 0 0 1 -4.5 4.5zm0-6a1.5 1.5 0 1 0 1.5 1.5 1.5 1.5 0 0 0 -1.5-1.5z"})})}function hae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",children:r.jsx("path",{d:"m7,8.5c0,1.381-1.119,2.5-2.5,2.5s-2.5-1.119-2.5-2.5,1.119-2.5,2.5-2.5,2.5,1.119,2.5,2.5Zm-2,9.5h-1.5c-.827,0-1.5-.673-1.5-1.5v-1c0-.827.673-1.5,1.5-1.5h.5c.552,0,1-.448,1-1s-.448-1-1-1h-.5c-1.93,0-3.5,1.57-3.5,3.5v1c0,1.391.822,2.585,2,3.149v3.351c0,.552.448,1,1,1s1-.448,1-1v-3h1c.552,0,1-.448,1-1s-.448-1-1-1ZM11.5,3c-1.381,0-2.5,1.119-2.5,2.5s1.119,2.5,2.5,2.5,2.5-1.119,2.5-2.5-1.119-2.5-2.5-2.5Zm.5,14h-1c-1.103,0-2-.897-2-2v-2c0-1.103.897-2,2-2,.552,0,1-.448,1-1s-.448-1-1-1c-2.206,0-4,1.794-4,4v2c0,1.474.81,2.75,2,3.444v4.556c0,.552.448,1,1,1s1-.448,1-1v-4h1c.552,0,1-.448,1-1s-.448-1-1-1Zm6.5-12c1.381,0,2.5-1.119,2.5-2.5s-1.119-2.5-2.5-2.5-2.5,1.119-2.5,2.5,1.119,2.5,2.5,2.5Zm4.5,5v4c0,1.474-.81,2.75-2,3.444v5.556c0,.552-.448,1-1,1s-1-.448-1-1v-5h-1v5c0,.552-.448,1-1,1s-1-.448-1-1v-5.556c-1.19-.694-2-1.97-2-3.444v-4c0-2.206,1.794-4,4-4h1c2.206,0,4,1.794,4,4Zm-2,0c0-1.103-.897-2-2-2h-1c-1.103,0-2,.897-2,2v4c0,1.103.897,2,2,2h1c1.103,0,2-.897,2-2v-4Z"})})}function Ok({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",children:r.jsx("path",{d:"M15.932,1.664c-.344-.973-1.797-.782-1.926,.225-.18,1.615-.85,3.11-4.506,3.11H4C1.794,5,0,6.794,0,9v2c0,1.529,.872,2.844,2.135,3.517l2.941,6.627c.5,1.127,1.619,1.855,2.853,1.855,1.056,0,2.032-.527,2.61-1.411s.672-1.988,.25-2.957l-1.582-3.633h.292c3.656,0,4.326,1.495,4.506,3.11,.157,1.215,1.964,1.107,1.994-.11V2c-.021-.112-.036-.226-.068-.336Zm-6.976,17.767c.154,.353,.121,.74-.09,1.062-.452,.693-1.625,.598-1.961-.16l-2.367-5.333h2.488l1.93,4.432Zm.544-6.432H4c-1.103,0-2-.897-2-2v-2c0-1.103,.897-2,2-2h5.5c1.923,0,3.421-.397,4.5-1.173V14.173c-1.079-.776-2.577-1.173-4.5-1.173Zm12.157,2.657c-.195,.195-.451,.293-.707,.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414,2.339-2.339,2.339-6.146,0-8.485-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0c3.119,3.119,3.119,8.194,0,11.313Zm-2.94-2.536c-.195,.195-.451,.293-.707,.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414,.941-.941,.941-2.473,0-3.414-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0c1.721,1.721,1.721,4.521,0,6.242Z"})})}function fae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12,8c-.552,0-1-.448-1-1v-1c0-.552,.448-1,1-1h1c.552,0,1,.448,1,1v1c0,.552-.448,1-1,1h-1Zm5,0h1c.552,0,1-.448,1-1v-1c0-.552-.448-1-1-1h-1c-.552,0-1,.448-1,1v1c0,.552,.448,1,1,1Zm-1,4c0,.552,.448,1,1,1h1c.552,0,1-.448,1-1v-1c0-.552-.448-1-1-1h-1c-.552,0-1,.448-1,1v1ZM18.5,0h-7c-3.032,0-5.5,2.468-5.5,5.5,0,.828,.672,1.5,1.5,1.5s1.5-.672,1.5-1.5c0-1.379,1.121-2.5,2.5-2.5h7c1.379,0,2.5,1.121,2.5,2.5v13c0,1.379-1.121,2.5-2.5,2.5h-1c-.828,0-1.5,.672-1.5,1.5s.672,1.5,1.5,1.5h1c3.032,0,5.5-2.468,5.5-5.5V5.5c0-3.032-2.468-5.5-5.5-5.5Zm-3.5,15.94v3.56c0,2.481-2.019,4.5-4.5,4.5H4.5c-2.481,0-4.5-2.019-4.5-4.5v-3.56c0-1.525,.689-2.939,1.891-3.881l2.572-2.013c1.787-1.398,4.286-1.399,6.075,0l2.57,2.011c1.202,.942,1.892,2.356,1.892,3.882Zm-3,0c0-.597-.27-1.15-.74-1.52l-2.57-2.011c-.351-.274-.771-.411-1.189-.411s-.839,.137-1.188,.41l-2.572,2.013c-.47,.368-.739,.922-.739,1.519v3.56c0,.827,.673,1.5,1.5,1.5h6c.827,0,1.5-.673,1.5-1.5v-3.56Zm-4,.06h-1c-.552,0-1,.448-1,1v1c0,.552,.448,1,1,1h1c.552,0,1-.448,1-1v-1c0-.552-.448-1-1-1Z"})})}function pae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{viewBox:"0 0 32 32",fill:"none",width:t,height:e,className:n,children:r.jsx("g",{children:r.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.247 2h-.93l-.414.835-6.831 13.802L6 18.802h5.517l-3.912 9.67 2.537 1.53L23.92 13.668l2.081-2.467h-6.358l4.183-6.926L25.2 2zm-4.415 13.802L16.18 5h3.705L15.7 11.926l-1.374 2.276h5.22l-5.632 6.675 1.219-3.012.834-2.063z",clipRule:"evenodd"})})})}function mae({width:t=20,height:e=20,className:n=""}){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:n,viewBox:"0 0 24 24",children:r.jsx("path",{d:"m18.5 0h-13a5.506 5.506 0 0 0 -5.5 5.5v13a5.506 5.506 0 0 0 5.5 5.5h13a5.506 5.506 0 0 0 5.5-5.5v-13a5.506 5.506 0 0 0 -5.5-5.5zm-15.5 10h2v4h-2zm13 .5h-8v-7.5h8zm-8 3h8v7.5h-8zm11-3.5h2v4h-2zm2-4.5v1.5h-2v-3.949a2.5 2.5 0 0 1 2 2.449zm-16-2.449v3.949h-2v-1.5a2.5 2.5 0 0 1 2-2.449zm-2 15.449v-1.5h2v3.949a2.5 2.5 0 0 1 -2-2.449zm16 2.449v-3.949h2v1.5a2.5 2.5 0 0 1 -2 2.449z"})})}const gae="_BtnAction_a742g_1",vae="_BtnActionText_a742g_13",yae="_BtnActionBg_a742g_27",xae="_BtnActionCircle_a742g_49",cv={BtnAction:gae,BtnActionText:vae,BtnActionBg:yae,BtnActionCircle:xae};var BI=function(e){return e.reduce(function(n,s){var i=s[0],a=s[1];return n[i]=a,n},{})},FI=typeof window<"u"&&window.document&&window.document.createElement?v.useLayoutEffect:v.useEffect,Ki="top",eo="bottom",to="right",Qi="left",Rk="auto",ry=[Ki,eo,to,Qi],Bp="start",uv="end",bae="clippingParents",q7="viewport",Sg="popper",_ae="reference",$I=ry.reduce(function(t,e){return t.concat([e+"-"+Bp,e+"-"+uv])},[]),W7=[].concat(ry,[Rk]).reduce(function(t,e){return t.concat([e,e+"-"+Bp,e+"-"+uv])},[]),wae="beforeRead",Cae="read",Sae="afterRead",jae="beforeMain",Tae="main",Eae="afterMain",Nae="beforeWrite",kae="write",Aae="afterWrite",Dae=[wae,Cae,Sae,jae,Tae,Eae,Nae,kae,Aae];function Cl(t){return t?(t.nodeName||"").toLowerCase():null}function Ca(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Nh(t){var e=Ca(t).Element;return t instanceof e||t instanceof Element}function Ya(t){var e=Ca(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Lk(t){if(typeof ShadowRoot>"u")return!1;var e=Ca(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Pae(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var s=e.styles[n]||{},i=e.attributes[n]||{},a=e.elements[n];!Ya(a)||!Cl(a)||(Object.assign(a.style,s),Object.keys(i).forEach(function(o){var l=i[o];l===!1?a.removeAttribute(o):a.setAttribute(o,l===!0?"":l)}))})}function Iae(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(s){var i=e.elements[s],a=e.attributes[s]||{},o=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:n[s]),l=o.reduce(function(c,u){return c[u]="",c},{});!Ya(i)||!Cl(i)||(Object.assign(i.style,l),Object.keys(a).forEach(function(c){i.removeAttribute(c)}))})}}const Mae={name:"applyStyles",enabled:!0,phase:"write",fn:Pae,effect:Iae,requires:["computeStyles"]};function yl(t){return t.split("-")[0]}var uh=Math.max,qb=Math.min,Fp=Math.round;function ME(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function G7(){return!/^((?!chrome|android).)*safari/i.test(ME())}function $p(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),i=1,a=1;e&&Ya(t)&&(i=t.offsetWidth>0&&Fp(s.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Fp(s.height)/t.offsetHeight||1);var o=Nh(t)?Ca(t):window,l=o.visualViewport,c=!G7()&&n,u=(s.left+(c&&l?l.offsetLeft:0))/i,d=(s.top+(c&&l?l.offsetTop:0))/a,h=s.width/i,f=s.height/a;return{width:h,height:f,top:d,right:u+h,bottom:d+f,left:u,x:u,y:d}}function Bk(t){var e=$p(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function Y7(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Lk(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Nc(t){return Ca(t).getComputedStyle(t)}function Oae(t){return["table","td","th"].indexOf(Cl(t))>=0}function ud(t){return((Nh(t)?t.ownerDocument:t.document)||window.document).documentElement}function J2(t){return Cl(t)==="html"?t:t.assignedSlot||t.parentNode||(Lk(t)?t.host:null)||ud(t)}function UI(t){return!Ya(t)||Nc(t).position==="fixed"?null:t.offsetParent}function Rae(t){var e=/firefox/i.test(ME()),n=/Trident/i.test(ME());if(n&&Ya(t)){var s=Nc(t);if(s.position==="fixed")return null}var i=J2(t);for(Lk(i)&&(i=i.host);Ya(i)&&["html","body"].indexOf(Cl(i))<0;){var a=Nc(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function iy(t){for(var e=Ca(t),n=UI(t);n&&Oae(n)&&Nc(n).position==="static";)n=UI(n);return n&&(Cl(n)==="html"||Cl(n)==="body"&&Nc(n).position==="static")?e:n||Rae(t)||e}function Fk(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function _0(t,e,n){return uh(t,qb(e,n))}function Lae(t,e,n){var s=_0(t,e,n);return s>n?n:s}function X7(){return{top:0,right:0,bottom:0,left:0}}function K7(t){return Object.assign({},X7(),t)}function Q7(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var Bae=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,K7(typeof e!="number"?e:Q7(e,ry))};function Fae(t){var e,n=t.state,s=t.name,i=t.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,l=yl(n.placement),c=Fk(l),u=[Qi,to].indexOf(l)>=0,d=u?"height":"width";if(!(!a||!o)){var h=Bae(i.padding,n),f=Bk(a),p=c==="y"?Ki:Qi,g=c==="y"?eo:to,m=n.rects.reference[d]+n.rects.reference[c]-o[c]-n.rects.popper[d],_=o[c]-n.rects.reference[c],y=iy(a),x=y?c==="y"?y.clientHeight||0:y.clientWidth||0:0,b=m/2-_/2,w=h[p],C=x-f[d]-h[g],j=x/2-f[d]/2+b,E=_0(w,j,C),T=c;n.modifiersData[s]=(e={},e[T]=E,e.centerOffset=E-j,e)}}function $ae(t){var e=t.state,n=t.options,s=n.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Y7(e.elements.popper,i)&&(e.elements.arrow=i))}const Uae={name:"arrow",enabled:!0,phase:"main",fn:Fae,effect:$ae,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Up(t){return t.split("-")[1]}var Vae={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zae(t,e){var n=t.x,s=t.y,i=e.devicePixelRatio||1;return{x:Fp(n*i)/i||0,y:Fp(s*i)/i||0}}function VI(t){var e,n=t.popper,s=t.popperRect,i=t.placement,a=t.variation,o=t.offsets,l=t.position,c=t.gpuAcceleration,u=t.adaptive,d=t.roundOffsets,h=t.isFixed,f=o.x,p=f===void 0?0:f,g=o.y,m=g===void 0?0:g,_=typeof d=="function"?d({x:p,y:m}):{x:p,y:m};p=_.x,m=_.y;var y=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),b=Qi,w=Ki,C=window;if(u){var j=iy(n),E="clientHeight",T="clientWidth";if(j===Ca(n)&&(j=ud(n),Nc(j).position!=="static"&&l==="absolute"&&(E="scrollHeight",T="scrollWidth")),j=j,i===Ki||(i===Qi||i===to)&&a===uv){w=eo;var N=h&&j===C&&C.visualViewport?C.visualViewport.height:j[E];m-=N-s.height,m*=c?1:-1}if(i===Qi||(i===Ki||i===eo)&&a===uv){b=to;var P=h&&j===C&&C.visualViewport?C.visualViewport.width:j[T];p-=P-s.width,p*=c?1:-1}}var I=Object.assign({position:l},u&&Vae),B=d===!0?zae({x:p,y:m},Ca(n)):{x:p,y:m};if(p=B.x,m=B.y,c){var U;return Object.assign({},I,(U={},U[w]=x?"0":"",U[b]=y?"0":"",U.transform=(C.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",U))}return Object.assign({},I,(e={},e[w]=x?m+"px":"",e[b]=y?p+"px":"",e.transform="",e))}function Hae(t){var e=t.state,n=t.options,s=n.gpuAcceleration,i=s===void 0?!0:s,a=n.adaptive,o=a===void 0?!0:a,l=n.roundOffsets,c=l===void 0?!0:l,u={placement:yl(e.placement),variation:Up(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,VI(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,VI(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const qae={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Hae,data:{}};var Ix={passive:!0};function Wae(t){var e=t.state,n=t.instance,s=t.options,i=s.scroll,a=i===void 0?!0:i,o=s.resize,l=o===void 0?!0:o,c=Ca(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(d){d.addEventListener("scroll",n.update,Ix)}),l&&c.addEventListener("resize",n.update,Ix),function(){a&&u.forEach(function(d){d.removeEventListener("scroll",n.update,Ix)}),l&&c.removeEventListener("resize",n.update,Ix)}}const Gae={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Wae,data:{}};var Yae={left:"right",right:"left",bottom:"top",top:"bottom"};function $1(t){return t.replace(/left|right|bottom|top/g,function(e){return Yae[e]})}var Xae={start:"end",end:"start"};function zI(t){return t.replace(/start|end/g,function(e){return Xae[e]})}function $k(t){var e=Ca(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Uk(t){return $p(ud(t)).left+$k(t).scrollLeft}function Kae(t,e){var n=Ca(t),s=ud(t),i=n.visualViewport,a=s.clientWidth,o=s.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;var u=G7();(u||!u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l+Uk(t),y:c}}function Qae(t){var e,n=ud(t),s=$k(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=uh(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=uh(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-s.scrollLeft+Uk(t),c=-s.scrollTop;return Nc(i||n).direction==="rtl"&&(l+=uh(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:l,y:c}}function Vk(t){var e=Nc(t),n=e.overflow,s=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function Z7(t){return["html","body","#document"].indexOf(Cl(t))>=0?t.ownerDocument.body:Ya(t)&&Vk(t)?t:Z7(J2(t))}function w0(t,e){var n;e===void 0&&(e=[]);var s=Z7(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),a=Ca(s),o=i?[a].concat(a.visualViewport||[],Vk(s)?s:[]):s,l=e.concat(o);return i?l:l.concat(w0(J2(o)))}function OE(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Zae(t,e){var n=$p(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function HI(t,e,n){return e===q7?OE(Kae(t,n)):Nh(e)?Zae(e,n):OE(Qae(ud(t)))}function Jae(t){var e=w0(J2(t)),n=["absolute","fixed"].indexOf(Nc(t).position)>=0,s=n&&Ya(t)?iy(t):t;return Nh(s)?e.filter(function(i){return Nh(i)&&Y7(i,s)&&Cl(i)!=="body"}):[]}function eoe(t,e,n,s){var i=e==="clippingParents"?Jae(t):[].concat(e),a=[].concat(i,[n]),o=a[0],l=a.reduce(function(c,u){var d=HI(t,u,s);return c.top=uh(d.top,c.top),c.right=qb(d.right,c.right),c.bottom=qb(d.bottom,c.bottom),c.left=uh(d.left,c.left),c},HI(t,o,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function J7(t){var e=t.reference,n=t.element,s=t.placement,i=s?yl(s):null,a=s?Up(s):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,c;switch(i){case Ki:c={x:o,y:e.y-n.height};break;case eo:c={x:o,y:e.y+e.height};break;case to:c={x:e.x+e.width,y:l};break;case Qi:c={x:e.x-n.width,y:l};break;default:c={x:e.x,y:e.y}}var u=i?Fk(i):null;if(u!=null){var d=u==="y"?"height":"width";switch(a){case Bp:c[u]=c[u]-(e[d]/2-n[d]/2);break;case uv:c[u]=c[u]+(e[d]/2-n[d]/2);break}}return c}function dv(t,e){e===void 0&&(e={});var n=e,s=n.placement,i=s===void 0?t.placement:s,a=n.strategy,o=a===void 0?t.strategy:a,l=n.boundary,c=l===void 0?bae:l,u=n.rootBoundary,d=u===void 0?q7:u,h=n.elementContext,f=h===void 0?Sg:h,p=n.altBoundary,g=p===void 0?!1:p,m=n.padding,_=m===void 0?0:m,y=K7(typeof _!="number"?_:Q7(_,ry)),x=f===Sg?_ae:Sg,b=t.rects.popper,w=t.elements[g?x:f],C=eoe(Nh(w)?w:w.contextElement||ud(t.elements.popper),c,d,o),j=$p(t.elements.reference),E=J7({reference:j,element:b,strategy:"absolute",placement:i}),T=OE(Object.assign({},b,E)),N=f===Sg?T:j,P={top:C.top-N.top+y.top,bottom:N.bottom-C.bottom+y.bottom,left:C.left-N.left+y.left,right:N.right-C.right+y.right},I=t.modifiersData.offset;if(f===Sg&&I){var B=I[i];Object.keys(P).forEach(function(U){var z=[to,eo].indexOf(U)>=0?1:-1,G=[Ki,eo].indexOf(U)>=0?"y":"x";P[U]+=B[G]*z})}return P}function toe(t,e){e===void 0&&(e={});var n=e,s=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,u=c===void 0?W7:c,d=Up(s),h=d?l?$I:$I.filter(function(g){return Up(g)===d}):ry,f=h.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=h);var p=f.reduce(function(g,m){return g[m]=dv(t,{placement:m,boundary:i,rootBoundary:a,padding:o})[yl(m)],g},{});return Object.keys(p).sort(function(g,m){return p[g]-p[m]})}function noe(t){if(yl(t)===Rk)return[];var e=$1(t);return[zI(t),e,zI(e)]}function soe(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!0:o,c=n.fallbackPlacements,u=n.padding,d=n.boundary,h=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,g=p===void 0?!0:p,m=n.allowedAutoPlacements,_=e.options.placement,y=yl(_),x=y===_,b=c||(x||!g?[$1(_)]:noe(_)),w=[_].concat(b).reduce(function(xe,Pe){return xe.concat(yl(Pe)===Rk?toe(e,{placement:Pe,boundary:d,rootBoundary:h,padding:u,flipVariations:g,allowedAutoPlacements:m}):Pe)},[]),C=e.rects.reference,j=e.rects.popper,E=new Map,T=!0,N=w[0],P=0;P<w.length;P++){var I=w[P],B=yl(I),U=Up(I)===Bp,z=[Ki,eo].indexOf(B)>=0,G=z?"width":"height",V=dv(e,{placement:I,boundary:d,rootBoundary:h,altBoundary:f,padding:u}),J=z?U?to:Qi:U?eo:Ki;C[G]>j[G]&&(J=$1(J));var Q=$1(J),Y=[];if(a&&Y.push(V[B]<=0),l&&Y.push(V[J]<=0,V[Q]<=0),Y.every(function(xe){return xe})){N=I,T=!1;break}E.set(I,Y)}if(T)for(var oe=g?3:1,he=function(Pe){var qe=w.find(function(Ie){var Ve=E.get(Ie);if(Ve)return Ve.slice(0,Pe).every(function(ot){return ot})});if(qe)return N=qe,"break"},me=oe;me>0;me--){var Oe=he(me);if(Oe==="break")break}e.placement!==N&&(e.modifiersData[s]._skip=!0,e.placement=N,e.reset=!0)}}const roe={name:"flip",enabled:!0,phase:"main",fn:soe,requiresIfExists:["offset"],data:{_skip:!1}};function qI(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function WI(t){return[Ki,to,eo,Qi].some(function(e){return t[e]>=0})}function ioe(t){var e=t.state,n=t.name,s=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,o=dv(e,{elementContext:"reference"}),l=dv(e,{altBoundary:!0}),c=qI(o,s),u=qI(l,i,a),d=WI(c),h=WI(u);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}const aoe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ioe};function ooe(t,e,n){var s=yl(t),i=[Qi,Ki].indexOf(s)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=a[0],l=a[1];return o=o||0,l=(l||0)*i,[Qi,to].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}function loe(t){var e=t.state,n=t.options,s=t.name,i=n.offset,a=i===void 0?[0,0]:i,o=W7.reduce(function(d,h){return d[h]=ooe(h,e.rects,a),d},{}),l=o[e.placement],c=l.x,u=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[s]=o}const coe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:loe};function uoe(t){var e=t.state,n=t.name;e.modifiersData[n]=J7({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const doe={name:"popperOffsets",enabled:!0,phase:"read",fn:uoe,data:{}};function hoe(t){return t==="x"?"y":"x"}function foe(t){var e=t.state,n=t.options,s=t.name,i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!1:o,c=n.boundary,u=n.rootBoundary,d=n.altBoundary,h=n.padding,f=n.tether,p=f===void 0?!0:f,g=n.tetherOffset,m=g===void 0?0:g,_=dv(e,{boundary:c,rootBoundary:u,padding:h,altBoundary:d}),y=yl(e.placement),x=Up(e.placement),b=!x,w=Fk(y),C=hoe(w),j=e.modifiersData.popperOffsets,E=e.rects.reference,T=e.rects.popper,N=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,P=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,B={x:0,y:0};if(j){if(a){var U,z=w==="y"?Ki:Qi,G=w==="y"?eo:to,V=w==="y"?"height":"width",J=j[w],Q=J+_[z],Y=J-_[G],oe=p?-T[V]/2:0,he=x===Bp?E[V]:T[V],me=x===Bp?-T[V]:-E[V],Oe=e.elements.arrow,xe=p&&Oe?Bk(Oe):{width:0,height:0},Pe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:X7(),qe=Pe[z],Ie=Pe[G],Ve=_0(0,E[V],xe[V]),ot=b?E[V]/2-oe-Ve-qe-P.mainAxis:he-Ve-qe-P.mainAxis,fe=b?-E[V]/2+oe+Ve+Ie+P.mainAxis:me+Ve+Ie+P.mainAxis,$=e.elements.arrow&&iy(e.elements.arrow),X=$?w==="y"?$.clientTop||0:$.clientLeft||0:0,W=(U=I==null?void 0:I[w])!=null?U:0,ce=J+ot-W-X,ne=J+fe-W,ee=_0(p?qb(Q,ce):Q,J,p?uh(Y,ne):Y);j[w]=ee,B[w]=ee-J}if(l){var ge,q=w==="x"?Ki:Qi,re=w==="x"?eo:to,ie=j[C],Ee=C==="y"?"height":"width",Ne=ie+_[q],Ae=ie-_[re],Se=[Ki,Qi].indexOf(y)!==-1,Le=(ge=I==null?void 0:I[C])!=null?ge:0,tt=Se?Ne:ie-E[Ee]-T[Ee]-Le+P.altAxis,lt=Se?ie+E[Ee]+T[Ee]-Le-P.altAxis:Ae,it=p&&Se?Lae(tt,ie,lt):_0(p?tt:Ne,ie,p?lt:Ae);j[C]=it,B[C]=it-ie}e.modifiersData[s]=B}}const poe={name:"preventOverflow",enabled:!0,phase:"main",fn:foe,requiresIfExists:["offset"]};function moe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function goe(t){return t===Ca(t)||!Ya(t)?$k(t):moe(t)}function voe(t){var e=t.getBoundingClientRect(),n=Fp(e.width)/t.offsetWidth||1,s=Fp(e.height)/t.offsetHeight||1;return n!==1||s!==1}function yoe(t,e,n){n===void 0&&(n=!1);var s=Ya(e),i=Ya(e)&&voe(e),a=ud(e),o=$p(t,i,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!n)&&((Cl(e)!=="body"||Vk(a))&&(l=goe(e)),Ya(e)?(c=$p(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):a&&(c.x=Uk(a))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function xoe(t){var e=new Map,n=new Set,s=[];t.forEach(function(a){e.set(a.name,a)});function i(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var c=e.get(l);c&&i(c)}}),s.push(a)}return t.forEach(function(a){n.has(a.name)||i(a)}),s}function boe(t){var e=xoe(t);return Dae.reduce(function(n,s){return n.concat(e.filter(function(i){return i.phase===s}))},[])}function _oe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function woe(t){var e=t.reduce(function(n,s){var i=n[s.name];return n[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var GI={placement:"bottom",modifiers:[],strategy:"absolute"};function YI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Coe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,i=e.defaultOptions,a=i===void 0?GI:i;return function(l,c,u){u===void 0&&(u=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},GI,a),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],f=!1,p={state:d,setOptions:function(y){var x=typeof y=="function"?y(d.options):y;m(),d.options=Object.assign({},a,d.options,x),d.scrollParents={reference:Nh(l)?w0(l):l.contextElement?w0(l.contextElement):[],popper:w0(c)};var b=boe(woe([].concat(s,d.options.modifiers)));return d.orderedModifiers=b.filter(function(w){return w.enabled}),g(),p.update()},forceUpdate:function(){if(!f){var y=d.elements,x=y.reference,b=y.popper;if(YI(x,b)){d.rects={reference:yoe(x,iy(b),d.options.strategy==="fixed"),popper:Bk(b)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(P){return d.modifiersData[P.name]=Object.assign({},P.data)});for(var w=0;w<d.orderedModifiers.length;w++){if(d.reset===!0){d.reset=!1,w=-1;continue}var C=d.orderedModifiers[w],j=C.fn,E=C.options,T=E===void 0?{}:E,N=C.name;typeof j=="function"&&(d=j({state:d,options:T,name:N,instance:p})||d)}}}},update:_oe(function(){return new Promise(function(_){p.forceUpdate(),_(d)})}),destroy:function(){m(),f=!0}};if(!YI(l,c))return p;p.setOptions(u).then(function(_){!f&&u.onFirstUpdate&&u.onFirstUpdate(_)});function g(){d.orderedModifiers.forEach(function(_){var y=_.name,x=_.options,b=x===void 0?{}:x,w=_.effect;if(typeof w=="function"){var C=w({state:d,name:y,instance:p,options:b}),j=function(){};h.push(C||j)}})}function m(){h.forEach(function(_){return _()}),h=[]}return p}}var Soe=[Gae,doe,qae,Mae,coe,roe,poe,Uae,aoe],zk=Coe({defaultModifiers:Soe}),joe=typeof Element<"u",Toe=typeof Map=="function",Eoe=typeof Set=="function",Noe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function U1(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(s=n;s--!==0;)if(!U1(t[s],e[s]))return!1;return!0}var a;if(Toe&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(s=a.next()).done;)if(!e.has(s.value[0]))return!1;for(a=t.entries();!(s=a.next()).done;)if(!U1(s.value[1],e.get(s.value[0])))return!1;return!0}if(Eoe&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(s=a.next()).done;)if(!e.has(s.value[0]))return!1;return!0}if(Noe&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[s]))return!1;if(joe&&t instanceof Element)return!1;for(s=n;s--!==0;)if(!((i[s]==="_owner"||i[s]==="__v"||i[s]==="__o")&&t.$$typeof)&&!U1(t[i[s]],e[i[s]]))return!1;return!0}return t!==t&&e!==e}var koe=function(e,n){try{return U1(e,n)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const e9=In(koe);var Aoe=[],Hk=function(e,n,s){s===void 0&&(s={});var i=v.useRef(null),a={onFirstUpdate:s.onFirstUpdate,placement:s.placement||"bottom",strategy:s.strategy||"absolute",modifiers:s.modifiers||Aoe},o=v.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=o[0],c=o[1],u=v.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(p){var g=p.state,m=Object.keys(g.elements);on.flushSync(function(){c({styles:BI(m.map(function(_){return[_,g.styles[_]||{}]})),attributes:BI(m.map(function(_){return[_,g.attributes[_]]}))})})},requires:["computeStyles"]}},[]),d=v.useMemo(function(){var f={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[u,{name:"applyStyles",enabled:!1}])};return e9(i.current,f)?i.current||f:(i.current=f,f)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,u]),h=v.useRef();return FI(function(){h.current&&h.current.setOptions(d)},[d]),FI(function(){if(!(e==null||n==null)){var f=s.createPopper||zk,p=f(e,n,d);return h.current=p,function(){p.destroy(),h.current=null}}},[e,n,s.createPopper]),{state:h.current?h.current.state:null,styles:l.styles,attributes:l.attributes,update:h.current?h.current.update:null,forceUpdate:h.current?h.current.forceUpdate:null}};const Doe="_TooltipText_kxb2w_1",Poe="_TooltipElement_kxb2w_11",Ioe="_TooltipElementArrow_kxb2w_20",Moe="_NotificationTimer_kxb2w_33",Ooe="_NotificationTimerDark_kxb2w_41",Roe="_NotificationTimerWhite_kxb2w_46",Loe="_NotificationTimerProgressBar_kxb2w_52",Boe="_shrink_kxb2w_1",Foe="_TooltipElementDark_kxb2w_78",$oe="_TooltipRoot_kxb2w_97",Uoe="_TooltipRootDark_kxb2w_103",Voe="_TooltipRootWhite_kxb2w_109",th={TooltipText:Doe,TooltipElement:Poe,TooltipElementArrow:Ioe,NotificationTimer:Moe,NotificationTimerDark:Ooe,NotificationTimerWhite:Roe,NotificationTimerProgressBar:Loe,shrink:Boe,TooltipElementDark:Foe,TooltipRoot:$oe,TooltipRootDark:Uoe,TooltipRootWhite:Voe},Ye=t=>Array.isArray(t)?t.length===0:typeof t=="object"&&t!==null?Object.keys(t).length===0:!1,ew=t=>t!==null&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]",no=t=>Array.isArray(t),qk=t=>typeof t=="number"&&!isNaN(t)&&isFinite(t),zoe=t=>t.mainInfo,t9=t=>t.helpSlice,Ot=t=>{var e;return(e=t.mainInfo)==null?void 0:e.userInfo},Wk=I2(t=>{var e;return(e=t.mainInfo)==null?void 0:e.userInfo},t=>{var e;return((e=t==null?void 0:t.role)==null?void 0:e.id)===pn.id}),Ks=I2([Ot],t=>!Ye(t)),n9=t=>{var e;return(e=t.mainInfo)==null?void 0:e.authLoading},tw=t=>t.windowSize,rt=t=>{var e;return(e=t.windowSize)==null?void 0:e.isDesktop},Qs=t=>{var e;return((e=t.mainInfo)==null?void 0:e.cities)||[]},Vh=I2([Qs],t=>t.map(e=>({label:e.name,value:e.id}))),Ci=t=>{var e;return(e=t.mainInfo)==null?void 0:e.city},nw=t=>{var e,n;return(n=(e=t.mainInfo)==null?void 0:e.city)==null?void 0:n.name},s9=()=>{document.body.style.overflow="hidden",document.body.style.paddingRight=window.innerWidth>1212?"16px":"0"},r9=()=>{document.body.style.overflow="auto",document.body.style.paddingRight="0"},Ze=({condition:t,children:e})=>(v.useEffect(()=>{if(t)s9();else{const n=document.querySelectorAll(".modal-overlay"),s=Array.from(n).filter(a=>a.hasAttribute("data-modal-display")&&!a.dataset.modalDisplay),i=Array.from(n).filter(a=>!a.hasAttribute("data-modal-display"));[...s,...i].length===0&&r9()}},[t]),r.jsx(r.Fragment,{children:t?e:""}));function Hoe({children:t,usePortal:e}){return e?on.createPortal(t,document.getElementById("overlay-wrapper")):t}function gt({children:t,condition:e,set:n,options:s,style:i,closeBtn:a=!0,closeBtnWhite:o=!1,closeBtnDark:l=!1,ModalHeader:c,ModalFooter:u,ModalChildren:d,usePortal:h=!0}){return v.useEffect(()=>{const f=p=>{p.keyCode===27&&(document.querySelector("#ymap-fulscreen-active")||n(!1))};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[n]),e?r.jsx(Hoe,{usePortal:h,children:r.jsx("div",{onClick:()=>n(!1),style:i,className:`modal-overlay ${s&&s.overlayClassNames||""}`,children:r.jsxs("div",{onClick:f=>f.stopPropagation(),className:`modal ${s&&s.modalClassNames||""}`,children:[a&&r.jsxs("button",{onClick:()=>n(!1),className:`modal-close ${o?"modal-close-white":""} ${l?"modal-close-dark":""} ${s&&s.modalCloseClassNames||""}`,children:[r.jsx(Pr,{width:25,height:25}),r.jsx("div",{children:r.jsx("span",{})})]}),c?r.jsx(c,{}):"",r.jsx("div",{className:`modal-content scrollbarPrimary ${s&&s.modalContentClassNames||""}`,children:t}),u?r.jsx(u,{}):"",d?r.jsx(d,{}):""]})})}):""}function qoe({children:t,condition:e,set:n,options:s,style:i,closeBtn:a=!0,ModalHeader:o,ModalFooter:l,ModalChildren:c}){return v.useEffect(()=>{const u=d=>{d.keyCode===27&&n(!1)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[n]),on.createPortal(r.jsx("div",{onClick:()=>n(!1),style:i,className:`modal-overlay !z-[99999] ${s&&s.overlayClassNames||""} ${e?"":"!hidden"}`,"data-modal-display":!!e,children:r.jsxs("div",{onClick:u=>u.stopPropagation(),className:`modal ${s&&s.modalClassNames||""}`,children:[a&&r.jsxs("button",{onClick:()=>n(!1),className:"modal-close",children:[r.jsx(Pr,{width:25,height:25,className:"fill-blue"}),r.jsx("div",{children:r.jsx("span",{})})]}),o?r.jsx(o,{}):"",r.jsx("div",{className:`modal-content scrollbarPrimary ${s&&s.modalContentClassNames||""}`,children:t}),l?r.jsx(l,{}):"",c?r.jsx(c,{}):""]})}),document.getElementById("overlay-wrapper"))}const $t=({ElementTarget:t=()=>r.jsx(r.Fragment,{}),children:e,color:n="dark",offset:s=[0,5],placement:i="bottom",close:a=!1,classNameTarget:o="",classNameRoot:l="",classNameTargetActive:c="",classNameContent:u="",event:d="move",value:h=null,onChange:f=null,mobile:p=!1,mobileDefault:g=!1,onClose:m})=>{const _=ue(rt),[y,x]=v.useState(!1);if(!p&&!_&&y){x(!1);return}return r.jsx(Woe,{ElementTarget:t,children:e,color:n,offset:s,placement:i,close:a,classNameTarget:o,classNameRoot:l,classNameTargetActive:c,classNameContent:u,event:_?d:"click",showPopper:h!==null?h:y,setShowPopper:f!==null?f:x,mobile:p,mobileDefault:g,onClose:m})},Woe=({ElementTarget:t,children:e,color:n="dark",offset:s=[0,5],placement:i="bottom",close:a=!1,classNameTarget:o="",classNameRoot:l="",classNameTargetActive:c="",classNameContent:u="",event:d="move",showPopper:h=!1,setShowPopper:f=()=>{},mobile:p=!1,mobileDefault:g=!1,onClose:m})=>{const _=ue(rt),[y,x]=v.useState(null),[b,w]=v.useState(null),{styles:C,attributes:j}=Hk(y,b,{placement:i,modifiers:[{name:"offset",options:{offset:[0,0]}}]}),E=()=>{f(!0)},T=()=>{f(!1),m==null||m()};return v.useEffect(()=>{const N=P=>{h&&b&&!b.contains(P.target)&&y&&!y.contains(P.target)&&T()};return document.addEventListener("click",N,{capture:!0}),()=>{document.removeEventListener("click",N,{capture:!0})}},[h,b]),r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:x,onMouseEnter:d==="move"?E:null,onMouseLeave:d==="move"?T:null,onClick:d==="click"?()=>f(N=>!N):null,className:`${o} ${h?c:""}`,children:r.jsx(t,{})}),r.jsxs(r.Fragment,{children:[!!(!_&&p)&&r.jsx(Ze,{condition:h,children:r.jsx(gt,{condition:h,set:f,options:{overlayClassNames:"_full _bottom !z-[99999]",modalContentClassNames:"!px-5"},children:r.jsx("div",{className:`${u}`,children:e})})}),h&&(_||g)&&on.createPortal(r.jsx("div",{className:`z-[9999] ${l}`,ref:w,style:{...C.popper,padding:`${s[1]}px ${s[0]}px`},...j.popper,onMouseEnter:d==="move"?E:null,onMouseLeave:d==="move"?T:null,children:r.jsxs("div",{className:`${th.TooltipRoot} ${n==="dark"?th.TooltipRootDark:n==="white"?th.TooltipRootWhite:""} ${u}`,children:[!!a&&r.jsx("button",{className:"absolute top-4 right-4",onClick:T,children:r.jsx(Pr,{width:20,height:20,className:"fill-blue"})}),e]})}),document.getElementById("overlay-wrapper"))]})]})},yi=({show:t,set:e,onClose:n,classListRoot:s="",style:i={},children:a,time:o=5e3,visibleProgressBar:l=!0,position:c="top-right",color:u="dark"})=>{const d=u==="dark"?th.NotificationTimerDark:u==="white"?th.NotificationTimerWhite:"",h=c==="top-right"?"top-6 right-6":c==="bottom-right"?"bottom-6 right-6":"";return v.useEffect(()=>{if(t){const f=setTimeout(()=>{e?e(!1):n&&n()},o);return()=>clearTimeout(f)}},[t]),r.jsxs("div",{className:`${th.NotificationTimer} ${h} ${d} ${s}`,style:i,children:[a,!!l&&r.jsx("div",{className:th.NotificationTimerProgressBar,children:r.jsx("span",{style:{animationDuration:`${o/1e3}s`}})}),r.jsx("button",{onClick:n,className:"absolute top-4 right-4",children:r.jsx(Pr,{className:"fill-white"})})]})},Goe="_LoginPhoneDecorNumber_14jfj_1",Yoe={LoginPhoneDecorNumber:Goe};var ay=t=>t.type==="checkbox",Kf=t=>t instanceof Date,li=t=>t==null;const i9=t=>typeof t=="object";var lr=t=>!li(t)&&!Array.isArray(t)&&i9(t)&&!Kf(t),a9=t=>lr(t)&&t.target?ay(t.target)?t.target.checked:t.target.value:t,Xoe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,o9=(t,e)=>t.has(Xoe(e)),Koe=t=>{const e=t.constructor&&t.constructor.prototype;return lr(e)&&e.hasOwnProperty("isPrototypeOf")},Gk=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ii(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Gk&&(t instanceof Blob||t instanceof FileList))&&(n||lr(t)))if(e=n?[]:{},!n&&!Koe(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Ii(t[s]));else return t;return e}var sw=t=>Array.isArray(t)?t.filter(Boolean):[],Ss=t=>t===void 0,dt=(t,e,n)=>{if(!e||!lr(t))return n;const s=sw(e.split(/[,[\].]+?/)).reduce((i,a)=>li(i)?i:i[a],t);return Ss(s)||s===t?Ss(t[e])?n:t[e]:s},ol=t=>typeof t=="boolean",Yk=t=>/^\w*$/.test(t),l9=t=>sw(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Rn=(t,e,n)=>{let s=-1;const i=Yk(e)?[e]:l9(e),a=i.length,o=a-1;for(;++s<a;){const l=i[s];let c=n;if(s!==o){const u=t[l];c=lr(u)||Array.isArray(u)?u:isNaN(+i[s+1])?{}:[]}if(l==="__proto__")return;t[l]=c,t=t[l]}return t};const Wb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},jo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ql={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Qoe=Xe.createContext(null),Xk=()=>Xe.useContext(Qoe);var c9=(t,e,n,s=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==jo.all&&(e._proxyFormState[o]=!s||jo.all),n&&(n[o]=!0),t[o]}});return i},da=t=>lr(t)&&!Object.keys(t).length,u9=(t,e,n,s)=>{n(t);const{name:i,...a}=t;return da(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!s||jo.all))},C0=t=>Array.isArray(t)?t:[t],d9=(t,e,n)=>!t||!e||t===e||C0(t).some(s=>s&&(n?s===e:s.startsWith(e)||e.startsWith(s)));function Kk(t){const e=Xe.useRef(t);e.current=t,Xe.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function Zoe(t){const e=Xk(),{control:n=e.control,disabled:s,name:i,exact:a}=t||{},[o,l]=Xe.useState(n._formState),c=Xe.useRef(!0),u=Xe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=Xe.useRef(i);return d.current=i,Kk({disabled:s,next:h=>c.current&&d9(d.current,h.name,a)&&u9(h,u.current,n._updateFormState)&&l({...n._formState,...h}),subject:n._subjects.state}),Xe.useEffect(()=>(c.current=!0,u.current.isValid&&n._updateValid(!0),()=>{c.current=!1}),[n]),c9(o,n,u.current,!1)}var ll=t=>typeof t=="string",h9=(t,e,n,s,i)=>ll(t)?(s&&e.watch.add(t),dt(n,t,i)):Array.isArray(t)?t.map(a=>(s&&e.watch.add(a),dt(n,a))):(s&&(e.watchAll=!0),n);function oy(t){const e=Xk(),{control:n=e.control,name:s,defaultValue:i,disabled:a,exact:o}=t||{},l=Xe.useRef(s);l.current=s,Kk({disabled:a,subject:n._subjects.values,next:d=>{d9(l.current,d.name,o)&&u(Ii(h9(l.current,n._names,d.values||n._formValues,!1,i)))}});const[c,u]=Xe.useState(n._getWatch(s,i));return Xe.useEffect(()=>n._removeUnmounted()),c}function Joe(t){const e=Xk(),{name:n,disabled:s,control:i=e.control,shouldUnregister:a}=t,o=o9(i._names.array,n),l=oy({control:i,name:n,defaultValue:dt(i._formValues,n,dt(i._defaultValues,n,t.defaultValue)),exact:!0}),c=Zoe({control:i,name:n}),u=Xe.useRef(i.register(n,{...t.rules,value:l,...ol(t.disabled)?{disabled:t.disabled}:{}}));return Xe.useEffect(()=>{const d=i._options.shouldUnregister||a,h=(f,p)=>{const g=dt(i._fields,f);g&&g._f&&(g._f.mount=p)};if(h(n,!0),d){const f=Ii(dt(i._options.defaultValues,n));Rn(i._defaultValues,n,f),Ss(dt(i._formValues,n))&&Rn(i._formValues,n,f)}return()=>{(o?d&&!i._state.action:d)?i.unregister(n):h(n,!1)}},[n,i,o,a]),Xe.useEffect(()=>{dt(i._fields,n)&&i._updateDisabledField({disabled:s,fields:i._fields,name:n,value:dt(i._fields,n)._f.value})},[s,n,i]),{field:{name:n,value:l,...ol(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:Xe.useCallback(d=>u.current.onChange({target:{value:a9(d),name:n},type:Wb.CHANGE}),[n]),onBlur:Xe.useCallback(()=>u.current.onBlur({target:{value:dt(i._formValues,n),name:n},type:Wb.BLUR}),[n,i]),ref:d=>{const h=dt(i._fields,n);h&&d&&(h._f.ref={focus:()=>d.focus(),select:()=>d.select(),setCustomValidity:f=>d.setCustomValidity(f),reportValidity:()=>d.reportValidity()})}},formState:c,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!dt(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!dt(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!dt(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!dt(c.validatingFields,n)},error:{enumerable:!0,get:()=>dt(c.errors,n)}})}}const Ir=t=>t.render(Joe(t));var ele=(t,e,n,s,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[s]:i||!0}}:{},XI=t=>({isOnSubmit:!t||t===jo.onSubmit,isOnBlur:t===jo.onBlur,isOnChange:t===jo.onChange,isOnAll:t===jo.all,isOnTouch:t===jo.onTouched}),KI=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const S0=(t,e,n,s)=>{for(const i of n||Object.keys(t)){const a=dt(t,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!s)break;if(o.ref&&e(o.ref,o.name)&&!s)break;S0(l,e)}else lr(l)&&S0(l,e)}}};var tle=(t,e,n)=>{const s=C0(dt(t,n));return Rn(s,"root",e[n]),Rn(t,n,s),t},Qk=t=>t.type==="file",Au=t=>typeof t=="function",Gb=t=>{if(!Gk)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},V1=t=>ll(t),Zk=t=>t.type==="radio",Yb=t=>t instanceof RegExp;const QI={value:!1,isValid:!1},ZI={value:!0,isValid:!0};var f9=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ss(t[0].attributes.value)?Ss(t[0].value)||t[0].value===""?ZI:{value:t[0].value,isValid:!0}:ZI:QI}return QI};const JI={isValid:!1,value:null};var p9=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,JI):JI;function e6(t,e,n="validate"){if(V1(t)||Array.isArray(t)&&t.every(V1)||ol(t)&&!t)return{type:n,message:V1(t)?t:"",ref:e}}var mf=t=>lr(t)&&!Yb(t)?t:{value:t,message:""},t6=async(t,e,n,s,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:f,validate:p,name:g,valueAsNumber:m,mount:_,disabled:y}=t._f,x=dt(e,g);if(!_||y)return{};const b=o?o[0]:a,w=B=>{s&&b.reportValidity&&(b.setCustomValidity(ol(B)?"":B||""),b.reportValidity())},C={},j=Zk(a),E=ay(a),T=j||E,N=(m||Qk(a))&&Ss(a.value)&&Ss(x)||Gb(a)&&a.value===""||x===""||Array.isArray(x)&&!x.length,P=ele.bind(null,g,n,C),I=(B,U,z,G=Ql.maxLength,V=Ql.minLength)=>{const J=B?U:z;C[g]={type:B?G:V,message:J,ref:a,...P(B?G:V,J)}};if(i?!Array.isArray(x)||!x.length:l&&(!T&&(N||li(x))||ol(x)&&!x||E&&!f9(o).isValid||j&&!p9(o).isValid)){const{value:B,message:U}=V1(l)?{value:!!l,message:l}:mf(l);if(B&&(C[g]={type:Ql.required,message:U,ref:b,...P(Ql.required,U)},!n))return w(U),C}if(!N&&(!li(d)||!li(h))){let B,U;const z=mf(h),G=mf(d);if(!li(x)&&!isNaN(x)){const V=a.valueAsNumber||x&&+x;li(z.value)||(B=V>z.value),li(G.value)||(U=V<G.value)}else{const V=a.valueAsDate||new Date(x),J=oe=>new Date(new Date().toDateString()+" "+oe),Q=a.type=="time",Y=a.type=="week";ll(z.value)&&x&&(B=Q?J(x)>J(z.value):Y?x>z.value:V>new Date(z.value)),ll(G.value)&&x&&(U=Q?J(x)<J(G.value):Y?x<G.value:V<new Date(G.value))}if((B||U)&&(I(!!B,z.message,G.message,Ql.max,Ql.min),!n))return w(C[g].message),C}if((c||u)&&!N&&(ll(x)||i&&Array.isArray(x))){const B=mf(c),U=mf(u),z=!li(B.value)&&x.length>+B.value,G=!li(U.value)&&x.length<+U.value;if((z||G)&&(I(z,B.message,U.message),!n))return w(C[g].message),C}if(f&&!N&&ll(x)){const{value:B,message:U}=mf(f);if(Yb(B)&&!x.match(B)&&(C[g]={type:Ql.pattern,message:U,ref:a,...P(Ql.pattern,U)},!n))return w(U),C}if(p){if(Au(p)){const B=await p(x,e),U=e6(B,b);if(U&&(C[g]={...U,...P(Ql.validate,U.message)},!n))return w(U.message),C}else if(lr(p)){let B={};for(const U in p){if(!da(B)&&!n)break;const z=e6(await p[U](x,e),b,U);z&&(B={...z,...P(U,z.message)},w(z.message),n&&(C[g]=B))}if(!da(B)&&(C[g]={ref:b,...B},!n))return C}}return w(!0),C};function nle(t,e){const n=e.slice(0,-1).length;let s=0;for(;s<n;)t=Ss(t)?s++:t[e[s++]];return t}function sle(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ss(t[e]))return!1;return!0}function er(t,e){const n=Array.isArray(e)?e:Yk(e)?[e]:l9(e),s=n.length===1?t:nle(t,n),i=n.length-1,a=n[i];return s&&delete s[a],i!==0&&(lr(s)&&da(s)||Array.isArray(s)&&sle(s))&&er(t,n.slice(0,-1)),t}var VS=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Xb=t=>li(t)||!i9(t);function nh(t,e){if(Xb(t)||Xb(e))return t===e;if(Kf(t)&&Kf(e))return t.getTime()===e.getTime();const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const i of n){const a=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Kf(a)&&Kf(o)||lr(a)&&lr(o)||Array.isArray(a)&&Array.isArray(o)?!nh(a,o):a!==o)return!1}}return!0}var m9=t=>t.type==="select-multiple",rle=t=>Zk(t)||ay(t),zS=t=>Gb(t)&&t.isConnected,g9=t=>{for(const e in t)if(Au(t[e]))return!0;return!1};function Kb(t,e={}){const n=Array.isArray(t);if(lr(t)||n)for(const s in t)Array.isArray(t[s])||lr(t[s])&&!g9(t[s])?(e[s]=Array.isArray(t[s])?[]:{},Kb(t[s],e[s])):li(t[s])||(e[s]=!0);return e}function v9(t,e,n){const s=Array.isArray(t);if(lr(t)||s)for(const i in t)Array.isArray(t[i])||lr(t[i])&&!g9(t[i])?Ss(e)||Xb(n[i])?n[i]=Array.isArray(t[i])?Kb(t[i],[]):{...Kb(t[i])}:v9(t[i],li(e)?{}:e[i],n[i]):n[i]=!nh(t[i],e[i]);return n}var Mx=(t,e)=>v9(t,e,Kb(e)),y9=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:s})=>Ss(t)?t:e?t===""?NaN:t&&+t:n&&ll(t)?new Date(t):s?s(t):t;function HS(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return Qk(e)?e.files:Zk(e)?p9(t.refs).value:m9(e)?[...e.selectedOptions].map(({value:n})=>n):ay(e)?f9(t.refs).value:y9(Ss(e.value)?t.ref.value:e.value,t)}var ile=(t,e,n,s)=>{const i={};for(const a of t){const o=dt(e,a);o&&Rn(i,a,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:s}},jg=t=>Ss(t)?t:Yb(t)?t.source:lr(t)?Yb(t.value)?t.value.source:t.value:t,ale=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function n6(t,e,n){const s=dt(t,n);if(s||Yk(n))return{error:s,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=dt(e,a),l=dt(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var ole=(t,e,n,s,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?s.isOnBlur:i.isOnBlur)?!t:(n?s.isOnChange:i.isOnChange)?t:!0,lle=(t,e)=>!sw(dt(t,e)).length&&er(t,e);const cle={mode:jo.onSubmit,reValidateMode:jo.onChange,shouldFocusError:!0};function ule(t={}){let e={...cle,...t},n={submitCount:0,isDirty:!1,isLoading:Au(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},i=lr(e.defaultValues)||lr(e.values)?Ii(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Ii(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:VS(),array:VS(),state:VS()},f=XI(e.mode),p=XI(e.reValidateMode),g=e.criteriaMode===jo.all,m=q=>re=>{clearTimeout(u),u=setTimeout(q,re)},_=async q=>{if(d.isValid||q){const re=e.resolver?da((await T()).errors):await P(s,!0);re!==n.isValid&&h.state.next({isValid:re})}},y=(q,re)=>{(d.isValidating||d.validatingFields)&&((q||Array.from(l.mount)).forEach(ie=>{ie&&(re?Rn(n.validatingFields,ie,re):er(n.validatingFields,ie))}),h.state.next({validatingFields:n.validatingFields,isValidating:!da(n.validatingFields)}))},x=(q,re=[],ie,Ee,Ne=!0,Ae=!0)=>{if(Ee&&ie){if(o.action=!0,Ae&&Array.isArray(dt(s,q))){const Se=ie(dt(s,q),Ee.argA,Ee.argB);Ne&&Rn(s,q,Se)}if(Ae&&Array.isArray(dt(n.errors,q))){const Se=ie(dt(n.errors,q),Ee.argA,Ee.argB);Ne&&Rn(n.errors,q,Se),lle(n.errors,q)}if(d.touchedFields&&Ae&&Array.isArray(dt(n.touchedFields,q))){const Se=ie(dt(n.touchedFields,q),Ee.argA,Ee.argB);Ne&&Rn(n.touchedFields,q,Se)}d.dirtyFields&&(n.dirtyFields=Mx(i,a)),h.state.next({name:q,isDirty:B(q,re),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Rn(a,q,re)},b=(q,re)=>{Rn(n.errors,q,re),h.state.next({errors:n.errors})},w=q=>{n.errors=q,h.state.next({errors:n.errors,isValid:!1})},C=(q,re,ie,Ee)=>{const Ne=dt(s,q);if(Ne){const Ae=dt(a,q,Ss(ie)?dt(i,q):ie);Ss(Ae)||Ee&&Ee.defaultChecked||re?Rn(a,q,re?Ae:HS(Ne._f)):G(q,Ae),o.mount&&_()}},j=(q,re,ie,Ee,Ne)=>{let Ae=!1,Se=!1;const Le={name:q},tt=!!(dt(s,q)&&dt(s,q)._f&&dt(s,q)._f.disabled);if(!ie||Ee){d.isDirty&&(Se=n.isDirty,n.isDirty=Le.isDirty=B(),Ae=Se!==Le.isDirty);const lt=tt||nh(dt(i,q),re);Se=!!(!tt&&dt(n.dirtyFields,q)),lt||tt?er(n.dirtyFields,q):Rn(n.dirtyFields,q,!0),Le.dirtyFields=n.dirtyFields,Ae=Ae||d.dirtyFields&&Se!==!lt}if(ie){const lt=dt(n.touchedFields,q);lt||(Rn(n.touchedFields,q,ie),Le.touchedFields=n.touchedFields,Ae=Ae||d.touchedFields&&lt!==ie)}return Ae&&Ne&&h.state.next(Le),Ae?Le:{}},E=(q,re,ie,Ee)=>{const Ne=dt(n.errors,q),Ae=d.isValid&&ol(re)&&n.isValid!==re;if(t.delayError&&ie?(c=m(()=>b(q,ie)),c(t.delayError)):(clearTimeout(u),c=null,ie?Rn(n.errors,q,ie):er(n.errors,q)),(ie?!nh(Ne,ie):Ne)||!da(Ee)||Ae){const Se={...Ee,...Ae&&ol(re)?{isValid:re}:{},errors:n.errors,name:q};n={...n,...Se},h.state.next(Se)}},T=async q=>{y(q,!0);const re=await e.resolver(a,e.context,ile(q||l.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return y(q),re},N=async q=>{const{errors:re}=await T(q);if(q)for(const ie of q){const Ee=dt(re,ie);Ee?Rn(n.errors,ie,Ee):er(n.errors,ie)}else n.errors=re;return re},P=async(q,re,ie={valid:!0})=>{for(const Ee in q){const Ne=q[Ee];if(Ne){const{_f:Ae,...Se}=Ne;if(Ae){const Le=l.array.has(Ae.name);y([Ee],!0);const tt=await t6(Ne,a,g,e.shouldUseNativeValidation&&!re,Le);if(y([Ee]),tt[Ae.name]&&(ie.valid=!1,re))break;!re&&(dt(tt,Ae.name)?Le?tle(n.errors,tt,Ae.name):Rn(n.errors,Ae.name,tt[Ae.name]):er(n.errors,Ae.name))}Se&&await P(Se,re,ie)}}return ie.valid},I=()=>{for(const q of l.unMount){const re=dt(s,q);re&&(re._f.refs?re._f.refs.every(ie=>!zS(ie)):!zS(re._f.ref))&&qe(q)}l.unMount=new Set},B=(q,re)=>(q&&re&&Rn(a,q,re),!nh(he(),i)),U=(q,re,ie)=>h9(q,l,{...o.mount?a:Ss(re)?i:ll(q)?{[q]:re}:re},ie,re),z=q=>sw(dt(o.mount?a:i,q,t.shouldUnregister?dt(i,q,[]):[])),G=(q,re,ie={})=>{const Ee=dt(s,q);let Ne=re;if(Ee){const Ae=Ee._f;Ae&&(!Ae.disabled&&Rn(a,q,y9(re,Ae)),Ne=Gb(Ae.ref)&&li(re)?"":re,m9(Ae.ref)?[...Ae.ref.options].forEach(Se=>Se.selected=Ne.includes(Se.value)):Ae.refs?ay(Ae.ref)?Ae.refs.length>1?Ae.refs.forEach(Se=>(!Se.defaultChecked||!Se.disabled)&&(Se.checked=Array.isArray(Ne)?!!Ne.find(Le=>Le===Se.value):Ne===Se.value)):Ae.refs[0]&&(Ae.refs[0].checked=!!Ne):Ae.refs.forEach(Se=>Se.checked=Se.value===Ne):Qk(Ae.ref)?Ae.ref.value="":(Ae.ref.value=Ne,Ae.ref.type||h.values.next({name:q,values:{...a}})))}(ie.shouldDirty||ie.shouldTouch)&&j(q,Ne,ie.shouldTouch,ie.shouldDirty,!0),ie.shouldValidate&&oe(q)},V=(q,re,ie)=>{for(const Ee in re){const Ne=re[Ee],Ae=`${q}.${Ee}`,Se=dt(s,Ae);(l.array.has(q)||!Xb(Ne)||Se&&!Se._f)&&!Kf(Ne)?V(Ae,Ne,ie):G(Ae,Ne,ie)}},J=(q,re,ie={})=>{const Ee=dt(s,q),Ne=l.array.has(q),Ae=Ii(re);Rn(a,q,Ae),Ne?(h.array.next({name:q,values:{...a}}),(d.isDirty||d.dirtyFields)&&ie.shouldDirty&&h.state.next({name:q,dirtyFields:Mx(i,a),isDirty:B(q,Ae)})):Ee&&!Ee._f&&!li(Ae)?V(q,Ae,ie):G(q,Ae,ie),KI(q,l)&&h.state.next({...n}),h.values.next({name:o.mount?q:void 0,values:{...a}})},Q=async q=>{o.mount=!0;const re=q.target;let ie=re.name,Ee=!0;const Ne=dt(s,ie),Ae=()=>re.type?HS(Ne._f):a9(q),Se=Le=>{Ee=Number.isNaN(Le)||Le===dt(a,ie,Le)};if(Ne){let Le,tt;const lt=Ae(),it=q.type===Wb.BLUR||q.type===Wb.FOCUS_OUT,Pt=!ale(Ne._f)&&!e.resolver&&!dt(n.errors,ie)&&!Ne._f.deps||ole(it,dt(n.touchedFields,ie),n.isSubmitted,p,f),H=KI(ie,l,it);Rn(a,ie,lt),it?(Ne._f.onBlur&&Ne._f.onBlur(q),c&&c(0)):Ne._f.onChange&&Ne._f.onChange(q);const M=j(ie,lt,it,!1),R=!da(M)||H;if(!it&&h.values.next({name:ie,type:q.type,values:{...a}}),Pt)return d.isValid&&_(),R&&h.state.next({name:ie,...H?{}:M});if(!it&&H&&h.state.next({...n}),e.resolver){const{errors:te}=await T([ie]);if(Se(lt),Ee){const ye=n6(n.errors,s,ie),Te=n6(te,s,ye.name||ie);Le=Te.error,ie=Te.name,tt=da(te)}}else y([ie],!0),Le=(await t6(Ne,a,g,e.shouldUseNativeValidation))[ie],y([ie]),Se(lt),Ee&&(Le?tt=!1:d.isValid&&(tt=await P(s,!0)));Ee&&(Ne._f.deps&&oe(Ne._f.deps),E(ie,tt,Le,M))}},Y=(q,re)=>{if(dt(n.errors,re)&&q.focus)return q.focus(),1},oe=async(q,re={})=>{let ie,Ee;const Ne=C0(q);if(e.resolver){const Ae=await N(Ss(q)?q:Ne);ie=da(Ae),Ee=q?!Ne.some(Se=>dt(Ae,Se)):ie}else q?(Ee=(await Promise.all(Ne.map(async Ae=>{const Se=dt(s,Ae);return await P(Se&&Se._f?{[Ae]:Se}:Se)}))).every(Boolean),!(!Ee&&!n.isValid)&&_()):Ee=ie=await P(s);return h.state.next({...!ll(q)||d.isValid&&ie!==n.isValid?{}:{name:q},...e.resolver||!q?{isValid:ie}:{},errors:n.errors}),re.shouldFocus&&!Ee&&S0(s,Y,q?Ne:l.mount),Ee},he=q=>{const re={...o.mount?a:i};return Ss(q)?re:ll(q)?dt(re,q):q.map(ie=>dt(re,ie))},me=(q,re)=>({invalid:!!dt((re||n).errors,q),isDirty:!!dt((re||n).dirtyFields,q),error:dt((re||n).errors,q),isValidating:!!dt(n.validatingFields,q),isTouched:!!dt((re||n).touchedFields,q)}),Oe=q=>{q&&C0(q).forEach(re=>er(n.errors,re)),h.state.next({errors:q?n.errors:{}})},xe=(q,re,ie)=>{const Ee=(dt(s,q,{_f:{}})._f||{}).ref,Ne=dt(n.errors,q)||{},{ref:Ae,message:Se,type:Le,...tt}=Ne;Rn(n.errors,q,{...tt,...re,ref:Ee}),h.state.next({name:q,errors:n.errors,isValid:!1}),ie&&ie.shouldFocus&&Ee&&Ee.focus&&Ee.focus()},Pe=(q,re)=>Au(q)?h.values.subscribe({next:ie=>q(U(void 0,re),ie)}):U(q,re,!0),qe=(q,re={})=>{for(const ie of q?C0(q):l.mount)l.mount.delete(ie),l.array.delete(ie),re.keepValue||(er(s,ie),er(a,ie)),!re.keepError&&er(n.errors,ie),!re.keepDirty&&er(n.dirtyFields,ie),!re.keepTouched&&er(n.touchedFields,ie),!re.keepIsValidating&&er(n.validatingFields,ie),!e.shouldUnregister&&!re.keepDefaultValue&&er(i,ie);h.values.next({values:{...a}}),h.state.next({...n,...re.keepDirty?{isDirty:B()}:{}}),!re.keepIsValid&&_()},Ie=({disabled:q,name:re,field:ie,fields:Ee,value:Ne})=>{if(ol(q)&&o.mount||q){const Ae=q?void 0:Ss(Ne)?HS(ie?ie._f:dt(Ee,re)._f):Ne;Rn(a,re,Ae),j(re,Ae,!1,!1,!0)}},Ve=(q,re={})=>{let ie=dt(s,q);const Ee=ol(re.disabled);return Rn(s,q,{...ie||{},_f:{...ie&&ie._f?ie._f:{ref:{name:q}},name:q,mount:!0,...re}}),l.mount.add(q),ie?Ie({field:ie,disabled:re.disabled,name:q,value:re.value}):C(q,!0,re.value),{...Ee?{disabled:re.disabled}:{},...e.progressive?{required:!!re.required,min:jg(re.min),max:jg(re.max),minLength:jg(re.minLength),maxLength:jg(re.maxLength),pattern:jg(re.pattern)}:{},name:q,onChange:Q,onBlur:Q,ref:Ne=>{if(Ne){Ve(q,re),ie=dt(s,q);const Ae=Ss(Ne.value)&&Ne.querySelectorAll&&Ne.querySelectorAll("input,select,textarea")[0]||Ne,Se=rle(Ae),Le=ie._f.refs||[];if(Se?Le.find(tt=>tt===Ae):Ae===ie._f.ref)return;Rn(s,q,{_f:{...ie._f,...Se?{refs:[...Le.filter(zS),Ae,...Array.isArray(dt(i,q))?[{}]:[]],ref:{type:Ae.type,name:q}}:{ref:Ae}}}),C(q,!1,void 0,Ae)}else ie=dt(s,q,{}),ie._f&&(ie._f.mount=!1),(e.shouldUnregister||re.shouldUnregister)&&!(o9(l.array,q)&&o.action)&&l.unMount.add(q)}}},ot=()=>e.shouldFocusError&&S0(s,Y,l.mount),fe=q=>{ol(q)&&(h.state.next({disabled:q}),S0(s,(re,ie)=>{const Ee=dt(s,ie);Ee&&(re.disabled=Ee._f.disabled||q,Array.isArray(Ee._f.refs)&&Ee._f.refs.forEach(Ne=>{Ne.disabled=Ee._f.disabled||q}))},0,!1))},$=(q,re)=>async ie=>{let Ee;ie&&(ie.preventDefault&&ie.preventDefault(),ie.persist&&ie.persist());let Ne=Ii(a);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:Ae,values:Se}=await T();n.errors=Ae,Ne=Se}else await P(s);if(er(n.errors,"root"),da(n.errors)){h.state.next({errors:{}});try{await q(Ne,ie)}catch(Ae){Ee=Ae}}else re&&await re({...n.errors},ie),ot(),setTimeout(ot);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:da(n.errors)&&!Ee,submitCount:n.submitCount+1,errors:n.errors}),Ee)throw Ee},X=(q,re={})=>{dt(s,q)&&(Ss(re.defaultValue)?J(q,Ii(dt(i,q))):(J(q,re.defaultValue),Rn(i,q,Ii(re.defaultValue))),re.keepTouched||er(n.touchedFields,q),re.keepDirty||(er(n.dirtyFields,q),n.isDirty=re.defaultValue?B(q,Ii(dt(i,q))):B()),re.keepError||(er(n.errors,q),d.isValid&&_()),h.state.next({...n}))},W=(q,re={})=>{const ie=q?Ii(q):i,Ee=Ii(ie),Ne=da(q),Ae=Ne?i:Ee;if(re.keepDefaultValues||(i=ie),!re.keepValues){if(re.keepDirtyValues)for(const Se of l.mount)dt(n.dirtyFields,Se)?Rn(Ae,Se,dt(a,Se)):J(Se,dt(Ae,Se));else{if(Gk&&Ss(q))for(const Se of l.mount){const Le=dt(s,Se);if(Le&&Le._f){const tt=Array.isArray(Le._f.refs)?Le._f.refs[0]:Le._f.ref;if(Gb(tt)){const lt=tt.closest("form");if(lt){lt.reset();break}}}}s={}}a=t.shouldUnregister?re.keepDefaultValues?Ii(i):{}:Ii(Ae),h.array.next({values:{...Ae}}),h.values.next({values:{...Ae}})}l={mount:re.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!re.keepIsValid||!!re.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:re.keepSubmitCount?n.submitCount:0,isDirty:Ne?!1:re.keepDirty?n.isDirty:!!(re.keepDefaultValues&&!nh(q,i)),isSubmitted:re.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ne?{}:re.keepDirtyValues?re.keepDefaultValues&&a?Mx(i,a):n.dirtyFields:re.keepDefaultValues&&q?Mx(i,q):re.keepDirty?n.dirtyFields:{},touchedFields:re.keepTouched?n.touchedFields:{},errors:re.keepErrors?n.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ce=(q,re)=>W(Au(q)?q(a):q,re);return{control:{register:Ve,unregister:qe,getFieldState:me,handleSubmit:$,setError:xe,_executeSchema:T,_getWatch:U,_getDirty:B,_updateValid:_,_removeUnmounted:I,_updateFieldArray:x,_updateDisabledField:Ie,_getFieldArray:z,_reset:W,_resetDefaultValues:()=>Au(e.defaultValues)&&e.defaultValues().then(q=>{ce(q,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:q=>{n={...n,...q}},_disableForm:fe,_subjects:h,_proxyFormState:d,_setErrors:w,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state(q){o=q},get _defaultValues(){return i},get _names(){return l},set _names(q){l=q},get _formState(){return n},set _formState(q){n=q},get _options(){return e},set _options(q){e={...e,...q}}},trigger:oe,register:Ve,handleSubmit:$,watch:Pe,setValue:J,getValues:he,reset:ce,resetField:X,clearErrors:Oe,unregister:qe,setError:xe,setFocus:(q,re={})=>{const ie=dt(s,q),Ee=ie&&ie._f;if(Ee){const Ne=Ee.refs?Ee.refs[0]:Ee.ref;Ne.focus&&(Ne.focus(),re.shouldSelect&&Ne.select())}},getFieldState:me}}function en(t={}){const e=Xe.useRef(),n=Xe.useRef(),[s,i]=Xe.useState({isDirty:!1,isValidating:!1,isLoading:Au(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Au(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...ule(t),formState:s});const a=e.current.control;return a._options=t,Kk({subject:a._subjects.state,next:o=>{u9(o,a._proxyFormState,a._updateFormState,!0)&&i({...a._formState})}}),Xe.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Xe.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==s.isDirty&&a._subjects.state.next({isDirty:o})}},[a,s.isDirty]),Xe.useEffect(()=>{t.values&&!nh(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),Xe.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),Xe.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Xe.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=c9(s,a),e.current}var x9={exports:{}};(function(t,e){(function(n,s){t.exports=s(v)})(hn,function(n){return function(s){function i(o){if(a[o])return a[o].exports;var l=a[o]={exports:{},id:o,loaded:!1};return s[o].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}var a={};return i.m=s,i.c=a,i.p="",i(0)}([function(s,i,a){function o(j){return j&&j.__esModule?j:{default:j}}function l(j,E){var T={};for(var N in j)E.indexOf(N)>=0||Object.prototype.hasOwnProperty.call(j,N)&&(T[N]=j[N]);return T}function c(j,E){if(!(j instanceof E))throw new TypeError("Cannot call a class as a function")}function u(j,E){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||typeof E!="object"&&typeof E!="function"?j:E}function d(j,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);j.prototype=Object.create(E&&E.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(j,E):j.__proto__=E)}Object.defineProperty(i,"__esModule",{value:!0}),i.conformToMask=void 0;var h=Object.assign||function(j){for(var E=1;E<arguments.length;E++){var T=arguments[E];for(var N in T)Object.prototype.hasOwnProperty.call(T,N)&&(j[N]=T[N])}return j},f=function(){function j(E,T){for(var N=0;N<T.length;N++){var P=T[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(E,P.key,P)}}return function(E,T,N){return T&&j(E.prototype,T),N&&j(E,N),E}}(),p=a(3);Object.defineProperty(i,"conformToMask",{enumerable:!0,get:function(){return o(p).default}});var g=a(11),m=o(g),_=a(9),y=o(_),x=a(5),b=o(x),w=a(2),C=function(j){function E(){var T;c(this,E);for(var N=arguments.length,P=Array(N),I=0;I<N;I++)P[I]=arguments[I];var B=u(this,(T=E.__proto__||Object.getPrototypeOf(E)).call.apply(T,[this].concat(P)));return B.setRef=B.setRef.bind(B),B.onBlur=B.onBlur.bind(B),B.onChange=B.onChange.bind(B),B}return d(E,j),f(E,[{key:"setRef",value:function(T){this.inputElement=T}},{key:"initTextMask",value:function(){var T=this.props,N=this.props.value;this.textMaskInputElement=(0,b.default)(h({inputElement:this.inputElement},T)),this.textMaskInputElement.update(N)}},{key:"componentDidMount",value:function(){this.initTextMask()}},{key:"componentDidUpdate",value:function(T){var N=this.props,P=N.value,I=N.pipe,B=N.mask,U=N.guide,z=N.placeholderChar,G=N.showMask,V={guide:U,placeholderChar:z,showMask:G},J=typeof I=="function"&&typeof T.pipe=="function"?I.toString()!==T.pipe.toString():(0,w.isNil)(I)&&!(0,w.isNil)(T.pipe)||!(0,w.isNil)(I)&&(0,w.isNil)(T.pipe),Q=B.toString()!==T.mask.toString(),Y=Object.keys(V).some(function(he){return V[he]!==T[he]})||Q||J,oe=P!==this.inputElement.value;(oe||Y)&&this.initTextMask()}},{key:"render",value:function(){var N=this.props,P=N.render,I=l(N,["render"]);return delete I.mask,delete I.guide,delete I.pipe,delete I.placeholderChar,delete I.keepCharPositions,delete I.value,delete I.onBlur,delete I.onChange,delete I.showMask,P(this.setRef,h({onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value},I))}},{key:"onChange",value:function(T){this.textMaskInputElement.update(),typeof this.props.onChange=="function"&&this.props.onChange(T)}},{key:"onBlur",value:function(T){typeof this.props.onBlur=="function"&&this.props.onBlur(T)}}]),E}(m.default.PureComponent);i.default=C,C.propTypes={mask:y.default.oneOfType([y.default.array,y.default.func,y.default.bool,y.default.shape({mask:y.default.oneOfType([y.default.array,y.default.func]),pipe:y.default.func})]).isRequired,guide:y.default.bool,value:y.default.oneOfType([y.default.string,y.default.number]),pipe:y.default.func,placeholderChar:y.default.string,keepCharPositions:y.default.bool,showMask:y.default.bool},C.defaultProps={render:function(j,E){return m.default.createElement("input",h({ref:j},E))}}},function(s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.placeholderChar="_",i.strFunction="function"},function(s,i,a){function o(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.placeholderChar;if(!l(m))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(m.indexOf(_)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(_)+`

`)+("The mask that was received is: "+JSON.stringify(m)));return m.map(function(y){return y instanceof RegExp?_:y}).join("")}function l(m){return Array.isArray&&Array.isArray(m)||m instanceof Array}function c(m){return typeof m=="string"||m instanceof String}function u(m){return typeof m=="number"&&m.length===void 0&&!isNaN(m)}function d(m){return typeof m>"u"||m===null}function h(m){for(var _=[],y=void 0;y=m.indexOf(g),y!==-1;)_.push(y),m.splice(y,1);return{maskWithoutCaretTraps:m,indexes:_}}Object.defineProperty(i,"__esModule",{value:!0}),i.convertMaskToPlaceholder=o,i.isArray=l,i.isString=c,i.isNumber=u,i.isNil=d,i.processCaretTraps=h;var f=a(1),p=[],g="[]"},function(s,i,a){function o(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,c.isArray)(p)){if((typeof p>"u"?"undefined":l(p))!==u.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");p=p(f,g),p=(0,c.processCaretTraps)(p).maskWithoutCaretTraps}var m=g.guide,_=m===void 0||m,y=g.previousConformedValue,x=y===void 0?h:y,b=g.placeholderChar,w=b===void 0?u.placeholderChar:b,C=g.placeholder,j=C===void 0?(0,c.convertMaskToPlaceholder)(p,w):C,E=g.currentCaretPosition,T=g.keepCharPositions,N=_===!1&&x!==void 0,P=f.length,I=x.length,B=j.length,U=p.length,z=P-I,G=z>0,V=E+(G?-z:0),J=V+Math.abs(z);if(T===!0&&!G){for(var Q=h,Y=V;Y<J;Y++)j[Y]===w&&(Q+=w);f=f.slice(0,V)+Q+f.slice(V,P)}for(var oe=f.split(h).map(function(ge,q){return{char:ge,isNew:q>=V&&q<J}}),he=P-1;he>=0;he--){var me=oe[he].char;if(me!==w){var Oe=he>=V&&I===U;me===j[Oe?he-z:he]&&oe.splice(he,1)}}var xe=h,Pe=!1;e:for(var qe=0;qe<B;qe++){var Ie=j[qe];if(Ie===w){if(oe.length>0)for(;oe.length>0;){var Ve=oe.shift(),ot=Ve.char,fe=Ve.isNew;if(ot===w&&N!==!0){xe+=w;continue e}if(p[qe].test(ot)){if(T===!0&&fe!==!1&&x!==h&&_!==!1&&G){for(var $=oe.length,X=null,W=0;W<$;W++){var ce=oe[W];if(ce.char!==w&&ce.isNew===!1)break;if(ce.char===w){X=W;break}}X!==null?(xe+=ot,oe.splice(X,1)):qe--}else xe+=ot;continue e}Pe=!0}N===!1&&(xe+=j.substr(qe,B));break}xe+=Ie}if(N&&G===!1){for(var ne=null,ee=0;ee<xe.length;ee++)j[ee]===w&&(ne=ee);xe=ne!==null?xe.substr(0,ne+1):h}return{conformedValue:xe,meta:{someCharsRejected:Pe}}}Object.defineProperty(i,"__esModule",{value:!0});var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};i.default=o;var c=a(2),u=a(1),d=[],h=""},function(s,i){function a(c){var u=c.previousConformedValue,d=u===void 0?l:u,h=c.previousPlaceholder,f=h===void 0?l:h,p=c.currentCaretPosition,g=p===void 0?0:p,m=c.conformedValue,_=c.rawValue,y=c.placeholderChar,x=c.placeholder,b=c.indexesOfPipedChars,w=b===void 0?o:b,C=c.caretTrapIndexes,j=C===void 0?o:C;if(g===0||!_.length)return 0;var E=_.length,T=d.length,N=x.length,P=m.length,I=E-T,B=I>0,U=T===0,z=I>1&&!B&&!U;if(z)return g;var G=B&&(d===m||m===x),V=0,J=void 0,Q=void 0;if(G)V=g-I;else{var Y=m.toLowerCase(),oe=_.toLowerCase(),he=oe.substr(0,g).split(l),me=he.filter(function(re){return Y.indexOf(re)!==-1});Q=me[me.length-1];var Oe=f.substr(0,me.length).split(l).filter(function(re){return re!==y}).length,xe=x.substr(0,me.length).split(l).filter(function(re){return re!==y}).length,Pe=xe!==Oe,qe=f[me.length-1]!==void 0&&x[me.length-2]!==void 0&&f[me.length-1]!==y&&f[me.length-1]!==x[me.length-1]&&f[me.length-1]===x[me.length-2];!B&&(Pe||qe)&&Oe>0&&x.indexOf(Q)>-1&&_[g]!==void 0&&(J=!0,Q=_[g]);for(var Ie=w.map(function(re){return Y[re]}),Ve=Ie.filter(function(re){return re===Q}).length,ot=me.filter(function(re){return re===Q}).length,fe=x.substr(0,x.indexOf(y)).split(l).filter(function(re,ie){return re===Q&&_[ie]!==re}).length,$=fe+ot+Ve+(J?1:0),X=0,W=0;W<P;W++){var ce=Y[W];if(V=W+1,ce===Q&&X++,X>=$)break}}if(B){for(var ne=V,ee=V;ee<=N;ee++)if(x[ee]===y&&(ne=ee),x[ee]===y||j.indexOf(ee)!==-1||ee===N)return ne}else if(J){for(var ge=V-1;ge>=0;ge--)if(m[ge]===Q||j.indexOf(ge)!==-1||ge===0)return ge}else for(var q=V;q>=0;q--)if(x[q-1]===y||j.indexOf(q)!==-1||q===0)return q}Object.defineProperty(i,"__esModule",{value:!0}),i.default=a;var o=[],l=""},function(s,i,a){function o(E){return E&&E.__esModule?E:{default:E}}function l(E){var T={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:T,update:function(N){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:E,I=P.inputElement,B=P.mask,U=P.guide,z=P.pipe,G=P.placeholderChar,V=G===void 0?y.placeholderChar:G,J=P.keepCharPositions,Q=J!==void 0&&J,Y=P.showMask,oe=Y!==void 0&&Y;if(typeof N>"u"&&(N=I.value),N!==T.previousConformedValue){(typeof B>"u"?"undefined":h(B))===w&&B.pipe!==void 0&&B.mask!==void 0&&(z=B.pipe,B=B.mask);var he=void 0,me=void 0;if(B instanceof Array&&(he=(0,_.convertMaskToPlaceholder)(B,V)),B!==!1){var Oe=u(N),xe=I.selectionEnd,Pe=T.previousConformedValue,qe=T.previousPlaceholder,Ie=void 0;if((typeof B>"u"?"undefined":h(B))===y.strFunction){if(me=B(Oe,{currentCaretPosition:xe,previousConformedValue:Pe,placeholderChar:V}),me===!1)return;var Ve=(0,_.processCaretTraps)(me),ot=Ve.maskWithoutCaretTraps,fe=Ve.indexes;me=ot,Ie=fe,he=(0,_.convertMaskToPlaceholder)(me,V)}else me=B;var $={previousConformedValue:Pe,guide:U,placeholderChar:V,pipe:z,placeholder:he,currentCaretPosition:xe,keepCharPositions:Q},X=(0,m.default)(Oe,me,$),W=X.conformedValue,ce=(typeof z>"u"?"undefined":h(z))===y.strFunction,ne={};ce&&(ne=z(W,d({rawValue:Oe},$)),ne===!1?ne={value:Pe,rejected:!0}:(0,_.isString)(ne)&&(ne={value:ne}));var ee=ce?ne.value:W,ge=(0,p.default)({previousConformedValue:Pe,previousPlaceholder:qe,conformedValue:ee,placeholder:he,rawValue:Oe,currentCaretPosition:xe,placeholderChar:V,indexesOfPipedChars:ne.indexesOfPipedChars,caretTrapIndexes:Ie}),q=ee===he&&ge===0,re=oe?he:x,ie=q?re:ee;T.previousConformedValue=ie,T.previousPlaceholder=he,I.value!==ie&&(I.value=ie,c(I,ge))}}}}}function c(E,T){document.activeElement===E&&(C?j(function(){return E.setSelectionRange(T,T,b)},0):E.setSelectionRange(T,T,b))}function u(E){if((0,_.isString)(E))return E;if((0,_.isNumber)(E))return String(E);if(E==null)return x;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(E))}Object.defineProperty(i,"__esModule",{value:!0});var d=Object.assign||function(E){for(var T=1;T<arguments.length;T++){var N=arguments[T];for(var P in N)Object.prototype.hasOwnProperty.call(N,P)&&(E[P]=N[P])}return E},h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E};i.default=l;var f=a(4),p=o(f),g=a(3),m=o(g),_=a(2),y=a(1),x="",b="none",w="object",C=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),j=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout},function(s,i){function a(l){return function(){return l}}var o=function(){};o.thatReturns=a,o.thatReturnsFalse=a(!1),o.thatReturnsTrue=a(!0),o.thatReturnsNull=a(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(l){return l},s.exports=o},function(s,i,a){function o(l,c,u,d,h,f,p,g){if(!l){var m;if(c===void 0)m=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var _=[u,d,h,f,p,g],y=0;m=new Error(c.replace(/%s/g,function(){return _[y++]})),m.name="Invariant Violation"}throw m.framesToPop=1,m}}s.exports=o},function(s,i,a){var o=a(6),l=a(7),c=a(10);s.exports=function(){function u(f,p,g,m,_,y){y!==c&&l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function d(){return u}u.isRequired=u;var h={array:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:d,element:u,instanceOf:d,node:u,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d};return h.checkPropTypes=o,h.PropTypes=h,h}},function(s,i,a){s.exports=a(8)()},function(s,i){var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";s.exports=a},function(s,i){s.exports=n}])})})(x9);var dle=x9.exports;const hle=In(dle);var b9={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(hn,function(){return function(){var n={d:function(fe,$){for(var X in $)n.o($,X)&&!n.o(fe,X)&&Object.defineProperty(fe,X,{enumerable:!0,get:$[X]})},o:function(fe,$){return Object.prototype.hasOwnProperty.call(fe,$)}},s={};n.d(s,{default:function(){return Ve}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},a={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function o(fe){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof fe=="string"?$.querySelector(fe):fe}function l(){let{tagName:fe="div",className:$="",innerHtml:X="",id:W="",attrs:ce={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=document.createElement(fe);return $&&ne.classList.add(...$.split(" ")),W&&(ne.id=W),X&&(ne.innerHTML=X),ce&&c(ne,ce),ne}function c(fe,$){for(let[X,W]of Object.entries($))W!==void 0&&fe.setAttribute(X,W);return fe}function u(fe){return new Date(fe.getFullYear(),fe.getMonth()+1,0).getDate()}function d(fe){let $=fe.getHours(),{hours:X,dayPeriod:W}=h($);return{year:fe.getFullYear(),month:fe.getMonth(),fullMonth:fe.getMonth()+1<10?"0"+(fe.getMonth()+1):fe.getMonth()+1,date:fe.getDate(),fullDate:fe.getDate()<10?"0"+fe.getDate():fe.getDate(),day:fe.getDay(),hours:$,fullHours:f($),hours12:X,dayPeriod:W,fullHours12:f(X),minutes:fe.getMinutes(),fullMinutes:fe.getMinutes()<10?"0"+fe.getMinutes():fe.getMinutes()}}function h(fe){return{dayPeriod:fe>11?"pm":"am",hours:fe%12==0?12:fe%12}}function f(fe){return fe<10?"0"+fe:fe}function p(fe){let $=10*Math.floor(fe.getFullYear()/10);return[$,$+9]}function g(){let fe=[];for(var $=arguments.length,X=new Array($),W=0;W<$;W++)X[W]=arguments[W];return X.forEach(ce=>{if(typeof ce=="object")for(let ne in ce)ce[ne]&&fe.push(ne);else ce&&fe.push(ce)}),fe.join(" ")}function m(fe,$){let X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.days;if(!fe||!$)return!1;let W=d(fe),ce=d($);return{[i.days]:W.date===ce.date&&W.month===ce.month&&W.year===ce.year,[i.months]:W.month===ce.month&&W.year===ce.year,[i.years]:W.year===ce.year}[X]}function _(fe,$,X){let W=x(fe,!1).getTime(),ce=x($,!1).getTime();return X?W>=ce:W>ce}function y(fe,$){return!_(fe,$,!0)}function x(fe){let $=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],X=new Date(fe.getTime());return typeof $!="boolean"||$||function(W){W.setHours(0,0,0,0)}(X),X}function b(fe,$,X){fe.length?fe.forEach(W=>{W.addEventListener($,X)}):fe.addEventListener($,X)}function w(fe,$){return!(!fe||fe===document||fe instanceof DocumentFragment)&&(fe.matches($)?fe:w(fe.parentNode,$))}function C(fe,$,X){return fe>X?X:fe<$?$:fe}function j(fe){for(var $=arguments.length,X=new Array($>1?$-1:0),W=1;W<$;W++)X[W-1]=arguments[W];return X.filter(ce=>ce).forEach(ce=>{for(let[ne,ee]of Object.entries(ce))if(ee!==void 0&&ee.toString()==="[object Object]"){let ge=fe[ne]!==void 0?fe[ne].toString():void 0,q=ee.toString(),re=Array.isArray(ee)?[]:{};fe[ne]=fe[ne]?ge!==q?re:fe[ne]:re,j(fe[ne],ee)}else fe[ne]=ee}),fe}function E(fe){let $=fe;return fe instanceof Date||(typeof fe=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(fe)&&(fe+="T00:00:00"),$=new Date(fe)),isNaN($.getTime())&&(console.log(`Unable to convert value "${fe}" to Date object`),$=!1),$}function T(fe){let $="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+$+")("+fe+")($|<|"+$+")","g")}function N(fe,$,X){return($=function(W){var ce=function(ne,ee){if(typeof ne!="object"||ne===null)return ne;var ge=ne[Symbol.toPrimitive];if(ge!==void 0){var q=ge.call(ne,"string");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(W);return typeof ce=="symbol"?ce:String(ce)}($))in fe?Object.defineProperty(fe,$,{value:X,enumerable:!0,configurable:!0,writable:!0}):fe[$]=X,fe}class P{constructor(){let{type:$,date:X,dp:W,opts:ce,body:ne}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};N(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),N(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),N(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),N(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),N(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),N(this,"onChangeFocusDate",ee=>{if(!ee)return void(this.focused&&this.removeFocus());let ge=m(ee,this.date,this.type);ge?this.focus():!ge&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),N(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell)),this.type=$,this.singleType=this.type.slice(0,-1),this.date=X,this.dp=W,this.opts=ce,this.body=ne,this.customData=!1,this.init()}init(){var $;let{onRenderCell:X}=this.opts;X&&(this.customData=X({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),($=this.customData)!==null&&$!==void 0&&$.disabled&&this.dp.disableDate(this.date)}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var $;let{year:X,month:W,date:ce}=d(this.date),ne=(($=this.customData)===null||$===void 0?void 0:$.attrs)||{};this.$cell=l({attrs:{"data-year":X,"data-month":W,"data-date":ce,...ne}}),this.$cell.adpCell=this}_getClassName(){var $;let X=new Date,{selectOtherMonths:W,selectOtherYears:ce}=this.opts,{minDate:ne,maxDate:ee,isDateDisabled:ge}=this.dp,{day:q}=d(this.date),re=this._isOutOfMinMaxRange(),ie=ge(this.date),Ee=g("air-datepicker-cell",`-${this.singleType}-`,{"-current-":m(X,this.date,this.type),"-min-date-":ne&&m(ne,this.date,this.type),"-max-date-":ee&&m(ee,this.date,this.type)}),Ne="";switch(this.type){case i.days:Ne=g({"-weekend-":this.dp.isWeekend(q),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!W||re||ie});break;case i.months:Ne=g({"-disabled-":re});break;case i.years:Ne=g({"-other-decade-":this.isOtherDecade,"-disabled-":re||this.isOtherDecade&&!ce})}return g(Ee,Ne,($=this.customData)===null||$===void 0?void 0:$.classes).split(" ")}_getHtml(){var $;let{year:X,month:W,date:ce}=d(this.date),{showOtherMonths:ne,showOtherYears:ee}=this.opts;if(($=this.customData)!==null&&$!==void 0&&$.html)return this.customData.html;switch(this.type){case i.days:return!ne&&this.isOtherMonth?"":ce;case i.months:return this.dp.locale[this.opts.monthsField][W];case i.years:return!ee&&this.isOtherDecade?"":X}}_isOutOfMinMaxRange(){let{minDate:$,maxDate:X}=this.dp,{type:W,date:ce}=this,{month:ne,year:ee,date:ge}=d(ce),q=W===i.days,re=W===i.years,ie=!!$&&new Date(ee,re?$.getMonth():ne,q?ge:$.getDate()),Ee=!!X&&new Date(ee,re?X.getMonth():ne,q?ge:X.getDate());return $&&X?y(ie,$)||_(Ee,X):$?y(ie,$):X?_(Ee,X):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){const{selectedDates:$,focusDate:X,rangeDateTo:W,rangeDateFrom:ce}=this.dp,ne=$.length;if(!ne)return;let ee=ce,ge=W;if(ne===1&&X){const Ne=_(X,$[0]);ee=Ne?$[0]:X,ge=Ne?X:$[0]}let q=g({"-in-range-":ee&&ge&&(re=this.date,ie=ee,Ee=ge,_(re,ie)&&y(re,Ee)),"-range-from-":ee&&m(this.date,ee,this.type),"-range-to-":ge&&m(this.date,ge,this.type)});var re,ie,Ee;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),q&&this.$cell.classList.add(...q.split(" "))}_handleSelectedStatus(){let $=this.dp._checkIfDateIsSelected(this.date,this.type);$?this.select():!$&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){m(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function I(fe,$,X){return($=function(W){var ce=function(ne,ee){if(typeof ne!="object"||ne===null)return ne;var ge=ne[Symbol.toPrimitive];if(ge!==void 0){var q=ge.call(ne,"string");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(W);return typeof ce=="symbol"?ce:String(ce)}($))in fe?Object.defineProperty(fe,$,{value:X,enumerable:!0,configurable:!0,writable:!0}):fe[$]=X,fe}let B={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const U=".air-datepicker-cell";class z{constructor($){let{dp:X,type:W,opts:ce}=$;I(this,"handleClick",ne=>{let ee=ne.target.closest(U).adpCell;if(ee.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let ge=this.dp._checkIfDateIsSelected(ee.date,ee.type);ge?this.dp._handleAlreadySelectedDates(ge,ee.date):this.dp.selectDate(ee.date)}),I(this,"handleDayNameClick",ne=>{let ee=ne.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(ee),datepicker:this.dp})}),I(this,"onChangeCurrentView",ne=>{ne!==this.type?this.hide():(this.show(),this.render())}),I(this,"onMouseOverCell",ne=>{let ee=w(ne.target,U);this.dp.setFocusDate(!!ee&&ee.adpCell.date)}),I(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),I(this,"onClickBody",ne=>{let{onClickDayName:ee}=this.opts,ge=ne.target;ge.closest(U)&&this.handleClick(ne),ee&&ge.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(ne)}),I(this,"onMouseDown",ne=>{this.pressed=!0;let ee=w(ne.target,U),ge=ee&&ee.adpCell;m(ge.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),m(ge.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),I(this,"onMouseMove",ne=>{if(!this.pressed||!this.dp.isMinViewReached)return;ne.preventDefault();let ee=w(ne.target,U),ge=ee&&ee.adpCell,{selectedDates:q,rangeDateTo:re,rangeDateFrom:ie}=this.dp;if(!ge||ge.isDisabled)return;let{date:Ee}=ge;if(q.length===2){if(this.rangeFromFocused&&!_(Ee,re)){let{hours:Ne,minutes:Ae}=d(ie);Ee.setHours(Ne),Ee.setMinutes(Ae),this.dp.rangeDateFrom=Ee,this.dp.replaceDate(ie,Ee)}if(this.rangeToFocused&&!y(Ee,ie)){let{hours:Ne,minutes:Ae}=d(re);Ee.setHours(Ne),Ee.setMinutes(Ae),this.dp.rangeDateTo=Ee,this.dp.replaceDate(re,Ee)}}}),I(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),I(this,"onChangeViewDate",(ne,ee)=>{if(!this.isVisible)return;let ge=p(ne),q=p(ee);switch(this.dp.currentView){case i.days:if(m(ne,ee,i.months))return;break;case i.months:if(m(ne,ee,i.years))return;break;case i.years:if(ge[0]===q[0]&&ge[1]===q[1])return}this.render()}),I(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(ne=>{this.$cells.appendChild(ne.render())})}),this.dp=X,this.type=W,this.opts=ce,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:$,dynamicRange:X}=this.opts;b(this.$el,"mouseover",this.onMouseOverCell),b(this.$el,"mouseout",this.onMouseOutCell),b(this.$el,"click",this.onClickBody),$&&X&&(b(this.$el,"mousedown",this.onMouseDown),b(this.$el,"mousemove",this.onMouseMove),b(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=l({className:`air-datepicker-body -${this.type}-`,innerHtml:B[this.type]}),this.$names=o(".air-datepicker-body--day-names",this.$el),this.$cells=o(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,X="",W=this.dp.isWeekend,{onClickDayName:ce}=this.opts,ne=$,ee=0;for(;ee<7;){let ge=ne%7;X+=`<div class="${g("air-datepicker-body--day-name",{[i.cssClassWeekend]:W(ge),"-clickable-":!!ce})}" data-day-index='${ge}'>${this.dp.locale.daysMin[ge]}</div>`,ee++,ne++}return X}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell($){let{type:X,dp:W,opts:ce}=this;return new P({type:X,dp:W,opts:ce,date:$,body:this})}_generateCells(){z.getDatesFunction(this.type)(this.dp,$=>{this.cells.push(this._generateCell($))})}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach($=>$.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates($,X){let{viewDate:W,opts:{fixedHeight:ce},locale:{firstDay:ne}}=$,ee=u(W),{year:ge,month:q}=d(W),re=new Date(ge,q,1),ie=new Date(ge,q,ee),Ee=re.getDay()-ne,Ne=6-ie.getDay()+ne;Ee=Ee<0?Ee+7:Ee,Ne=Ne>6?Ne-7:Ne;let Ae=function(H,M){let{year:R,month:te,date:ye}=d(H);return new Date(R,te,ye-M)}(re,Ee),Se=ee+Ee+Ne,Le=Ae.getDate(),{year:tt,month:lt}=d(Ae),it=0;ce&&(Se=42);const Pt=[];for(;it<Se;){let H=new Date(tt,lt,Le+it);X&&X(H),Pt.push(H),it++}return Pt}static getMonthsDates($,X){let{year:W}=$.parsedViewDate,ce=0,ne=[];for(;ce<12;){const ee=new Date(W,ce);ne.push(ee),X&&X(ee),ce++}return ne}static getYearsDates($,X){let W=p($.viewDate),ce=W[0]-1,ne=W[1]+1,ee=ce,ge=[];for(;ee<=ne;){const q=new Date(ee,0);ge.push(q),X&&X(q),ee++}return ge}static getDatesFunction(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i.days;return{[i.days]:z.getDaysDates,[i.months]:z.getMonthsDates,[i.years]:z.getYearsDates}[$]}}function G(fe,$,X){return($=function(W){var ce=function(ne,ee){if(typeof ne!="object"||ne===null)return ne;var ge=ne[Symbol.toPrimitive];if(ge!==void 0){var q=ge.call(ne,"string");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(W);return typeof ce=="symbol"?ce:String(ce)}($))in fe?Object.defineProperty(fe,$,{value:X,enumerable:!0,configurable:!0,writable:!0}):fe[$]=X,fe}class V{constructor($){let{dp:X,opts:W}=$;G(this,"onClickNav",ce=>{let ne=w(ce.target,".air-datepicker-nav--action");if(!ne)return;let ee=ne.dataset.action;this.dp[ee]()}),G(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),G(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),G(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),G(this,"update",()=>{let{prevHtml:ce,nextHtml:ne}=this.opts;this.$prev.innerHTML=ce,this.$next.innerHTML=ne,this._resetNavStatus(),this.render(),this.handleNavStatus()}),G(this,"renderDelay",()=>{setTimeout(this.render)}),G(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(ce,ne){for(let ee in ne)ne[ee]?ce.classList.add(ee):ce.classList.remove(ee)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=X,this.opts=W,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=o(".air-datepicker-nav--title",this.$el),this.$prev=o('[data-action="prev"]',this.$el),this.$next=o('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=l({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:$,opts:X}=this,W=X.navTitles[$.currentView];return typeof W=="function"?W($):$.formatDate($.viewDate,W)}handleNavStatus(){let{disableNavWhenOutOfRange:$}=this.opts,{minDate:X,maxDate:W}=this.dp;if(!X&&!W||!$)return;let{year:ce,month:ne}=this.dp.parsedViewDate,ee=!!X&&d(X),ge=!!W&&d(W);switch(this.dp.currentView){case i.days:X&&ee.month>=ne&&ee.year>=ce&&this._disableNav("prev"),W&&ge.month<=ne&&ge.year<=ce&&this._disableNav("next");break;case i.months:X&&ee.year>=ce&&this._disableNav("prev"),W&&ge.year<=ce&&this._disableNav("next");break;case i.years:{let q=p(this.dp.viewDate);X&&ee.year>=q[0]&&this._disableNav("prev"),W&&ge.year<=q[1]&&this._disableNav("next");break}}}_disableNav($){o('[data-action="'+$+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function($){for(var X=arguments.length,W=new Array(X>1?X-1:0),ce=1;ce<X;ce++)W[ce-1]=arguments[ce];$.length?$.forEach(ne=>{ne.classList.remove(...W)}):$.classList.remove(...W)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:$,nextHtml:X}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${$}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${X}</div>`}get isNavIsFunction(){let{navTitles:$}=this.opts;return Object.keys($).find(X=>typeof $[X]=="function")}}var J={today:{content:fe=>fe.locale.today,onClick:fe=>fe.setViewDate(new Date)},clear:{content:fe=>fe.locale.clear,onClick:fe=>fe.clear()}};class Q{constructor($){let{dp:X,opts:W}=$;this.dp=X,this.opts=W,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=l({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:$}=this.opts;Array.isArray($)||($=[$]),$.forEach(X=>{let W=X;typeof X=="string"&&J[X]&&(W=J[X]);let ce=this.createButton(W);W.onClick&&this.attachEventToButton(ce,W.onClick),this.$el.appendChild(ce)})}attachEventToButton($,X){$.addEventListener("click",()=>{X(this.dp)})}createButton($){let{content:X,className:W,tagName:ce="button",attrs:ne={}}=$;return l({tagName:ce,innerHtml:`<span tabindex='-1'>${typeof X=="function"?X(this.dp):X}</span>`,className:g("air-datepicker-button",W),attrs:ne})}render(){this.generateButtons()}}function Y(fe,$,X){return($=function(W){var ce=function(ne,ee){if(typeof ne!="object"||ne===null)return ne;var ge=ne[Symbol.toPrimitive];if(ge!==void 0){var q=ge.call(ne,"string");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(W);return typeof ce=="symbol"?ce:String(ce)}($))in fe?Object.defineProperty(fe,$,{value:X,enumerable:!0,configurable:!0,writable:!0}):fe[$]=X,fe}class oe{constructor(){let{opts:$,dp:X}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Y(this,"toggleTimepickerIsActive",ce=>{this.dp.timepickerIsActive=ce}),Y(this,"onChangeSelectedDate",ce=>{let{date:ne,updateTime:ee=!1}=ce;ne&&(this.setMinMaxTime(ne),this.setCurrentTime(!!ee&&ne),this.addTimeToDate(ne))}),Y(this,"onChangeLastSelectedDate",ce=>{ce&&(this.setTime(ce),this.render())}),Y(this,"onChangeInputRange",ce=>{let ne=ce.target;this[ne.getAttribute("name")]=ne.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),Y(this,"onMouseEnterLeave",ce=>{let ne=ce.target.getAttribute("name"),ee=this.$minutesText;ne==="hours"&&(ee=this.$hoursText),ee.classList.toggle("-focus-")}),Y(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),Y(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=$,this.dp=X;let{timeFormat:W}=this.dp.locale;W&&(W.match(T("h"))||W.match(T("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let $="input";navigator.userAgent.match(/trident/gi)&&($="change"),b(this.$ranges,$,this.onChangeInputRange),b(this.$ranges,"mouseenter",this.onMouseEnterLeave),b(this.$ranges,"mouseleave",this.onMouseEnterLeave),b(this.$ranges,"focus",this.onFocus),b(this.$ranges,"mousedown",this.onFocus),b(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=l({className:g("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:$,hours:X,displayHours:W,minutes:ce,minHours:ne,minMinutes:ee,maxHours:ge,maxMinutes:q,dayPeriod:re,opts:{hoursStep:ie,minutesStep:Ee}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${f(W)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${f(ce)}</span>   `+($?`<span class='air-datepicker-time--current-ampm'>${re}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${X}" min="${ne}" max="${ge}" step="${ie}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${ce}" min="${ee}" max="${q}" step="${Ee}"/>   </div></div>`}defineDOM(){let $=X=>o(X,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=$('[name="hours"]'),this.$minutes=$('[name="minutes"]'),this.$hoursText=$(".air-datepicker-time--current-hours"),this.$minutesText=$(".air-datepicker-time--current-minutes"),this.$ampm=$(".air-datepicker-time--current-ampm")}setTime($){this.setMinMaxTime($),this.setCurrentTime($)}addTimeToDate($){$&&($.setHours(this.hours),$.setMinutes(this.minutes))}setMinMaxTime($){if(this.setMinMaxTimeFromOptions(),$){let{minDate:X,maxDate:W}=this.dp;X&&m($,X)&&this.setMinTimeFromMinDate(X),W&&m($,W)&&this.setMaxTimeFromMaxDate(W)}}setCurrentTime($){let{hours:X,minutes:W}=$?d($):this;this.hours=C(X,this.minHours,this.maxHours),this.minutes=C(W,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:$,minMinutes:X,maxHours:W,maxMinutes:ce}=this.opts;this.minHours=C($,0,23),this.minMinutes=C(X,0,59),this.maxHours=C(W,0,23),this.maxMinutes=C(ce,0,59)}setMinTimeFromMinDate($){let{lastSelectedDate:X}=this.dp;this.minHours=$.getHours(),X&&X.getHours()>$.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=$.getMinutes()}setMaxTimeFromMaxDate($){let{lastSelectedDate:X}=this.dp;this.maxHours=$.getHours(),X&&X.getHours()<$.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=$.getMinutes()}updateSliders(){c(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,c(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=f(this.displayHours),this.$minutesText.innerHTML=f(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours($){this._hours=$;let{hours:X,dayPeriod:W}=h($);this.displayHours=this.ampm?X:$,this.dayPeriod=W}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function he(fe,$,X){return($=function(W){var ce=function(ne,ee){if(typeof ne!="object"||ne===null)return ne;var ge=ne[Symbol.toPrimitive];if(ge!==void 0){var q=ge.call(ne,"string");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(W);return typeof ce=="symbol"?ce:String(ce)}($))in fe?Object.defineProperty(fe,$,{value:X,enumerable:!0,configurable:!0,writable:!0}):fe[$]=X,fe}class me{constructor($){let{dp:X,opts:W}=$;he(this,"pressedKeys",new Set),he(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],ce=>ce.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],ce=>ce.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],ce=>ce.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],ce=>ce.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],ce=>ce.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],ce=>ce.year-=10],[["Control","Shift","ArrowUp"],(ce,ne)=>ne.up()]])),he(this,"handleHotKey",ce=>{let ne=this.hotKeys.get(ce),ee=d(this.getInitialFocusDate());ne(ee,this.dp);let{year:ge,month:q,date:re}=ee,ie=u(new Date(ge,q));ie<re&&(re=ie);let Ee=this.dp.getClampedDate(new Date(ge,q,re));this.dp.setFocusDate(Ee,{viewDateTransition:!0})}),he(this,"isHotKeyPressed",()=>{let ce=!1,ne=this.pressedKeys.size,ee=ge=>this.pressedKeys.has(ge);for(let[ge]of this.hotKeys){if(ce)break;if(Array.isArray(ge[0]))ge.forEach(q=>{ce||ne!==q.length||(ce=q.every(ee)&&ge)});else{if(ne!==ge.length)continue;ce=ge.every(ee)&&ge}}return ce}),he(this,"isArrow",ce=>ce>=37&&ce<=40),he(this,"onKeyDown",ce=>{let{key:ne,which:ee}=ce,{dp:ge,dp:{focusDate:q},opts:re}=this;this.registerKey(ne);let ie=this.isHotKeyPressed();if(ie)return ce.preventDefault(),void this.handleHotKey(ie);if(this.isArrow(ee))return ce.preventDefault(),void this.focusNextCell(ne);if(ne==="Enter"){if(ge.currentView!==re.minView)return void ge.down();if(q){let Ee=ge._checkIfDateIsSelected(q);return void(Ee?ge._handleAlreadySelectedDates(Ee,q):ge.selectDate(q))}}ne==="Escape"&&this.dp.hide()}),he(this,"onKeyUp",ce=>{this.removeKey(ce.key)}),this.dp=X,this.opts=W,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:$}=this.dp;$.addEventListener("keydown",this.onKeyDown),$.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:$}=this.dp;$.removeEventListener("keydown",this.onKeyDown),$.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:$,currentView:X,selectedDates:W,parsedViewDate:{year:ce,month:ne}}=this.dp,ee=$||W[W.length-1];if(!ee)switch(X){case i.days:ee=new Date(ce,ne,new Date().getDate());break;case i.months:ee=new Date(ce,ne,1);break;case i.years:ee=new Date(ce,0,1)}return ee}focusNextCell($){let X=this.getInitialFocusDate(),{currentView:W}=this.dp,{days:ce,months:ne,years:ee}=i,ge=d(X),q=ge.year,re=ge.month,ie=ge.date;switch($){case"ArrowLeft":W===ce&&(ie-=1),W===ne&&(re-=1),W===ee&&(q-=1);break;case"ArrowUp":W===ce&&(ie-=7),W===ne&&(re-=3),W===ee&&(q-=4);break;case"ArrowRight":W===ce&&(ie+=1),W===ne&&(re+=1),W===ee&&(q+=1);break;case"ArrowDown":W===ce&&(ie+=7),W===ne&&(re+=3),W===ee&&(q+=4)}let Ee=this.dp.getClampedDate(new Date(q,re,ie));this.dp.setFocusDate(Ee,{viewDateTransition:!0})}registerKey($){this.pressedKeys.add($)}removeKey($){this.pressedKeys.delete($)}}let Oe={on(fe,$){this.__events||(this.__events={}),this.__events[fe]?this.__events[fe].push($):this.__events[fe]=[$]},off(fe,$){this.__events&&this.__events[fe]&&(this.__events[fe]=this.__events[fe].filter(X=>X!==$))},removeAllEvents(){this.__events={}},trigger(fe){for(var $=arguments.length,X=new Array($>1?$-1:0),W=1;W<$;W++)X[W-1]=arguments[W];this.__events&&this.__events[fe]&&this.__events[fe].forEach(ce=>{ce(...X)})}};function xe(fe,$,X){return($=function(W){var ce=function(ne,ee){if(typeof ne!="object"||ne===null)return ne;var ge=ne[Symbol.toPrimitive];if(ge!==void 0){var q=ge.call(ne,"string");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(W);return typeof ce=="symbol"?ce:String(ce)}($))in fe?Object.defineProperty(fe,$,{value:X,enumerable:!0,configurable:!0,writable:!0}):fe[$]=X,fe}let Pe="",qe="",Ie=!1;class Ve{static buildGlobalContainer($){Ie=!0,Pe=l({className:$,id:$}),o("body").appendChild(Pe)}constructor($,X){var W=this;if(xe(this,"viewIndexes",[i.days,i.months,i.years]),xe(this,"next",()=>{let{year:ee,month:ge}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(ee,ge+1,1));break;case i.months:this.setViewDate(new Date(ee+1,ge,1));break;case i.years:this.setViewDate(new Date(ee+10,0,1))}}),xe(this,"prev",()=>{let{year:ee,month:ge}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(ee,ge-1,1));break;case i.months:this.setViewDate(new Date(ee-1,ge,1));break;case i.years:this.setViewDate(new Date(ee-10,0,1))}}),xe(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),xe(this,"setPosition",function(ee){let ge=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(ee=ee||W.opts.position)=="function")return void(W.customHide=ee({$datepicker:W.$datepicker,$target:W.$el,$pointer:W.$pointer,isViewChange:ge,done:W._finishHide}));let q,re,{isMobile:ie}=W.opts,Ee=W.$el.getBoundingClientRect(),Ne=W.$el.getBoundingClientRect(),Ae=W.$datepicker.offsetParent,Se=W.$el.offsetParent,Le=W.$datepicker.getBoundingClientRect(),tt=ee.split(" "),lt=window.scrollY,it=window.scrollX,Pt=W.opts.offset,H=tt[0],M=tt[1];if(ie)W.$datepicker.style.cssText="left: 50%; top: 50%";else{if(Ae===Se&&Ae!==document.body&&(Ne={top:W.$el.offsetTop,left:W.$el.offsetLeft,width:Ee.width,height:W.$el.offsetHeight},lt=0,it=0),Ae!==Se&&Ae!==document.body){let R=Ae.getBoundingClientRect();Ne={top:Ee.top-R.top,left:Ee.left-R.left,width:Ee.width,height:Ee.height},lt=0,it=0}switch(H){case"top":q=Ne.top-Le.height-Pt;break;case"right":re=Ne.left+Ne.width+Pt;break;case"bottom":q=Ne.top+Ne.height+Pt;break;case"left":re=Ne.left-Le.width-Pt}switch(M){case"top":q=Ne.top;break;case"right":re=Ne.left+Ne.width-Le.width;break;case"bottom":q=Ne.top+Ne.height-Le.height;break;case"left":re=Ne.left;break;case"center":/left|right/.test(H)?q=Ne.top+Ne.height/2-Le.height/2:re=Ne.left+Ne.width/2-Le.width/2}W.$datepicker.style.cssText=`left: ${re+it}px; top: ${q+lt}px`}}),xe(this,"_setInputValue",()=>{let{opts:ee,$altField:ge,locale:{dateFormat:q}}=this,{altFieldDateFormat:re,altField:ie}=ee;ie&&ge&&(ge.value=this._getInputValue(re)),this.$el.value=this._getInputValue(q)}),xe(this,"_getInputValue",ee=>{let{selectedDates:ge,opts:q}=this,{multipleDates:re,multipleDatesSeparator:ie}=q;if(!ge.length)return"";let Ee=typeof ee=="function",Ne=Ee?ee(re?ge:ge[0]):ge.map(Ae=>this.formatDate(Ae,ee));return Ne=Ee?Ne:Ne.join(ie),Ne}),xe(this,"_checkIfDateIsSelected",function(ee){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.days,q=!1;return W.selectedDates.some(re=>{let ie=m(ee,re,ge);return q=ie&&re,ie}),q}),xe(this,"_scheduleCallAfterTransition",ee=>{this._cancelScheduledCall(),ee&&ee(!1),this._onTransitionEnd=()=>{ee&&ee(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),xe(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),xe(this,"setViewDate",ee=>{if(!((ee=E(ee))instanceof Date)||m(ee,this.viewDate))return;let ge=this.viewDate;this.viewDate=ee;let{onChangeViewDate:q}=this.opts;if(q){let{month:re,year:ie}=this.parsedViewDate;q({month:re,year:ie,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,ee,ge)}),xe(this,"setFocusDate",function(ee){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!ee||(ee=E(ee))instanceof Date)&&(W.focusDate=ee,W.trigger(i.eventChangeFocusDate,ee,ge))}),xe(this,"setCurrentView",function(ee){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(W.viewIndexes.includes(ee)){if(W.currentView=ee,W.elIsInput&&W.visible&&W.setPosition(void 0,!0),W.trigger(i.eventChangeCurrentView,ee),!W.views[ee]){let q=W.views[ee]=new z({dp:W,opts:W.opts,type:ee});W.shouldUpdateDOM&&W.$content.appendChild(q.$el)}W.opts.onChangeView&&!ge.silent&&W.opts.onChangeView(ee)}}),xe(this,"_updateLastSelectedDate",ee=>{this.lastSelectedDate=ee,this.trigger(i.eventChangeLastSelectedDate,ee)}),xe(this,"destroy",()=>{if(this.isDestroyed)return;let{showEvent:ee,isMobile:ge}=this.opts,q=this.$datepicker.parentNode;q&&q.removeChild(this.$datepicker),this.$el.removeEventListener(ee,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),ge&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0}),xe(this,"update",function(){let ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=j({},W.opts),{silent:re}=ge;j(W.opts,ee);let{timepicker:ie,buttons:Ee,range:Ne,selectedDates:Ae,isMobile:Se}=W.opts,Le=W.visible||W.treatAsInline;W._createMinMaxDates(),W._limitViewDateByMaxMinDates(),W._handleLocale(),Ae&&(W.selectedDates=[],W.selectDate(Ae,{silent:re})),ee.view&&W.setCurrentView(ee.view,{silent:re}),W._setInputValue(),q.range&&!Ne?(W.rangeDateTo=!1,W.rangeDateFrom=!1):!q.range&&Ne&&W.selectedDates.length&&(W.rangeDateFrom=W.selectedDates[0],W.rangeDateTo=W.selectedDates[1]),q.timepicker&&!ie?(Le&&W.timepicker.destroy(),W.timepicker=!1,W.$timepicker.parentNode.removeChild(W.$timepicker)):!q.timepicker&&ie&&W._addTimepicker(),!q.buttons&&Ee?W._addButtons():q.buttons&&!Ee?(W.buttons.destroy(),W.$buttons.parentNode.removeChild(W.$buttons)):Le&&q.buttons&&Ee&&W.buttons.clearHtml().render(),!q.isMobile&&Se?(W.treatAsInline||qe||W._createMobileOverlay(),W._addMobileAttributes(),W.visible&&W._showMobileOverlay()):q.isMobile&&!Se&&(W._removeMobileAttributes(),W.visible&&(qe.classList.remove("-active-"),typeof W.opts.position!="function"&&W.setPosition())),Le&&(W.nav.update(),W.views[W.currentView].render(),W.currentView===i.days&&W.views[W.currentView].renderDayNames())}),xe(this,"disableDate",(ee,ge)=>{(Array.isArray(ee)?ee:[ee]).forEach(q=>{let re=E(q);if(!re)return;let ie=ge?"delete":"add";this.disabledDates[ie](this.formatDate(re,"yyyy-MM-dd"));let Ee=this.getCell(re,this.currentViewSingular);Ee&&Ee.adpCell.render()},[])}),xe(this,"enableDate",ee=>{this.disableDate(ee,!0)}),xe(this,"isDateDisabled",ee=>{let ge=E(ee);return this.disabledDates.has(this.formatDate(ge,"yyyy-MM-dd"))}),xe(this,"isOtherMonth",ee=>{let{month:ge}=d(ee);return ge!==this.parsedViewDate.month}),xe(this,"isOtherYear",ee=>{let{year:ge}=d(ee);return ge!==this.parsedViewDate.year}),xe(this,"isOtherDecade",ee=>{let{year:ge}=d(ee),[q,re]=p(this.viewDate);return ge<q||ge>re}),xe(this,"_onChangeSelectedDate",ee=>{let{silent:ge}=ee;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!ge&&this._triggerOnSelect()})}),xe(this,"_onChangeFocusedDate",function(ee){let{viewDateTransition:ge}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ee)return;let q=!1;ge&&(q=W.isOtherMonth(ee)||W.isOtherYear(ee)||W.isOtherDecade(ee)),q&&W.setViewDate(ee),W.opts.onFocus&&W.opts.onFocus({datepicker:W,date:ee})}),xe(this,"_onChangeTime",ee=>{let{hours:ge,minutes:q}=ee,re=new Date,{lastSelectedDate:ie,opts:{onSelect:Ee}}=this,Ne=ie;ie||(Ne=re);let Ae=this.getCell(Ne,this.currentViewSingular),Se=Ae&&Ae.adpCell;Se&&Se.isDisabled||(Ne.setHours(ge),Ne.setMinutes(q),ie?(this._setInputValue(),Ee&&this._triggerOnSelect()):this.selectDate(Ne))}),xe(this,"_onFocus",ee=>{this.visible||this.show()}),xe(this,"_onBlur",ee=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),xe(this,"_onMouseDown",ee=>{this.inFocus=!0}),xe(this,"_onMouseUp",ee=>{this.inFocus=!1,this.$el.focus()}),xe(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),xe(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),xe(this,"getViewDates",function(){let ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i.days;return z.getDatesFunction(ee)(W)}),xe(this,"isWeekend",ee=>this.opts.weekends.includes(ee)),xe(this,"getClampedDate",ee=>{let{minDate:ge,maxDate:q}=this,re=ee;return q&&_(ee,q)?re=q:ge&&y(ee,ge)&&(re=ge),re}),this.$el=o($),!this.$el)return;this.$datepicker=l({className:"air-datepicker"}),this.opts=j({},a,X),this.$customContainer=!!this.opts.container&&o(this.opts.container),this.$altField=o(this.opts.altField||!1);let{view:ce,startDate:ne}=this.opts;ne||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=E(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=ce,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:$,treatAsInline:X,opts:{inline:W,isMobile:ce,selectedDates:ne,keyboardNav:ee,onlyTimepicker:ge}}=this,q=o("body");(!Ie||Ie&&Pe&&!q.contains(Pe))&&!W&&this.elIsInput&&!this.$customContainer&&Ve.buildGlobalContainer(Ve.defaultGlobalContainerId),!ce||qe||X||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(W||this._bindEvents(),ee&&!ge&&(this.keyboardNav=new me({dp:this,opts:$}))),ne&&this.selectDate(ne,{silent:!0}),this.opts.visible&&!X&&this.show(),ce&&!X&&this.$el.setAttribute("readonly",!0),X&&this._createComponents()}_createMobileOverlay(){qe=l({className:"air-datepicker-overlay"}),Pe.appendChild(qe)}_createComponents(){let{opts:$,treatAsInline:X,opts:{inline:W,buttons:ce,timepicker:ne,position:ee,classes:ge,onlyTimepicker:q,isMobile:re}}=this;this._buildBaseHtml(),this.elIsInput&&(W||this._setPositionClasses(ee)),!W&&this.elIsInput||this.$datepicker.classList.add("-inline-"),ge&&this.$datepicker.classList.add(...ge.split(" ")),q&&this.$datepicker.classList.add("-only-timepicker-"),re&&!X&&this._addMobileAttributes(),this.views[this.currentView]=new z({dp:this,type:this.currentView,opts:$}),this.nav=new V({dp:this,opts:$}),ne&&this._addTimepicker(),ce&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let $ in this.views)this.views[$].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){qe.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){qe.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:$,maxDate:X}=this.opts;this.minDate=!!$&&E($),this.maxDate=!!X&&E(X)}_addTimepicker(){this.$timepicker=l({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new oe({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=l({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new Q({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:$}=this.opts;var X,W;this.elIsInput?$?(X=this.$datepicker,(W=this.$el).parentNode.insertBefore(X,W.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=o(".air-datepicker--content",this.$datepicker),this.$pointer=o(".air-datepicker--pointer",this.$datepicker),this.$nav=o(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:$,dateFormat:X,firstDay:W,timepicker:ce,onlyTimepicker:ne,timeFormat:ee,dateTimeSeparator:ge}=this.opts;var q;this.locale=(q=$,JSON.parse(JSON.stringify(q))),X&&(this.locale.dateFormat=X),ee!==void 0&&ee!==""&&(this.locale.timeFormat=ee);let{timeFormat:re}=this.locale;if(W!==""&&(this.locale.firstDay=W),ce&&typeof X!="function"){let ie=re?ge:"";this.locale.dateFormat=[this.locale.dateFormat,re||""].join(ie)}ne&&typeof X!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses($){if(typeof $=="function")return void this.$datepicker.classList.add("-custom-position-");let X=($=$.split(" "))[0],W=`air-datepicker -${X}-${$[1]}- -from-${X}-`;this.$datepicker.classList.add(...W.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:$,minDate:X,maxDate:W}=this;W&&_($,W)&&this.setViewDate(W),X&&y($,X)&&this.setViewDate(X)}formatDate(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,X=arguments.length>1?arguments[1]:void 0;if($=E($),!($ instanceof Date))return;let W=X,ce=this.locale,ne=d($),ee=ne.dayPeriod,ge=p($),q=Ve.replacer,re={T:$.getTime(),m:ne.minutes,mm:ne.fullMinutes,h:ne.hours12,hh:ne.fullHours12,H:ne.hours,HH:ne.fullHours,aa:ee,AA:ee.toUpperCase(),E:ce.daysShort[ne.day],EEEE:ce.days[ne.day],d:ne.date,dd:ne.fullDate,M:ne.month+1,MM:ne.fullMonth,MMM:ce.monthsShort[ne.month],MMMM:ce.months[ne.month],yy:ne.year.toString().slice(-2),yyyy:ne.year,yyyy1:ge[0],yyyy2:ge[1]};for(let[ie,Ee]of Object.entries(re))W=q(W,T(ie),Ee);return W}down($){this._handleUpDownActions($,"down")}up($){this._handleUpDownActions($,"up")}selectDate($){let X,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:ce,parsedViewDate:ne,selectedDates:ee}=this,{updateTime:ge}=W,{moveToOtherMonthsOnSelect:q,moveToOtherYearsOnSelect:re,multipleDates:ie,range:Ee,autoClose:Ne,onBeforeSelect:Ae}=this.opts,Se=ee.length;if(Array.isArray($))return $.forEach(Le=>{this.selectDate(Le,W)}),new Promise(Le=>{setTimeout(Le)});if(($=E($))instanceof Date){if(Ae&&!Ae({date:$,datepicker:this}))return Promise.resolve();if(ce===i.days&&$.getMonth()!==ne.month&&q&&(X=new Date($.getFullYear(),$.getMonth(),1)),ce===i.years&&$.getFullYear()!==ne.year&&re&&(X=new Date($.getFullYear(),0,1)),X&&this.setViewDate(X),ie&&!Ee){if(Se===ie)return;this._checkIfDateIsSelected($)||ee.push($)}else if(Ee)switch(Se){case 1:ee.push($),this.rangeDateTo||(this.rangeDateTo=$),_(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=$),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[$],this.rangeDateFrom=$,this.rangeDateTo="";break;default:this.selectedDates=[$],this.rangeDateFrom=$}else this.selectedDates=[$];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:W==null?void 0:W.silent,date:$,updateTime:ge}),this._updateLastSelectedDate($),Ne&&!this.timepickerIsActive&&this.visible&&(ie||Ee?Ee&&Se===1&&this.hide():this.hide()),new Promise(Le=>{setTimeout(Le)})}}unselectDate($){let X=this.selectedDates,W=this;if(($=E($))instanceof Date)return X.some((ce,ne)=>{if(m(ce,$))return X.splice(ne,1),W.selectedDates.length?(W.rangeDateTo="",W.rangeDateFrom=X[0],W._updateLastSelectedDate(W.selectedDates[W.selectedDates.length-1])):(W.rangeDateFrom="",W.rangeDateTo="",W._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:$}),!0})}replaceDate($,X){let W=this.selectedDates.find(ne=>m(ne,$,this.currentView)),ce=this.selectedDates.indexOf(W);ce<0||m(this.selectedDates[ce],X,this.currentView)||(this.selectedDates[ce]=X,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:X,updateTime:!0}),this._updateLastSelectedDate(X))}clear(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:$.silent}),new Promise(X=>{setTimeout(X)})}show(){let{onShow:$,isMobile:X}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,$&&this._scheduleCallAfterTransition($),X&&this._showMobileOverlay()}hide(){let{onHide:$,isMobile:X}=this.opts,W=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(ce=>{!this.customHide&&(ce&&W||!ce&&!W)&&this._finishHide(),$&&$(ce)}),X&&qe.classList.remove("-active-")}_triggerOnSelect(){let $=[],X=[],{selectedDates:W,locale:ce,opts:{onSelect:ne,multipleDates:ee,range:ge}}=this,q=ee||ge,re=typeof ce.dateFormat=="function";W.length&&($=W.map(x),X=re?ee?ce.dateFormat($):$.map(ie=>ce.dateFormat(ie)):$.map(ie=>this.formatDate(ie,ce.dateFormat))),ne({date:q?$:$[0],formattedDate:q?X:X[0],datepicker:this})}_handleAlreadySelectedDates($,X){let{selectedDates:W,rangeDateFrom:ce,rangeDateTo:ne}=this,{range:ee,toggleSelected:ge}=this.opts,q=W.length,re=typeof ge=="function"?ge({datepicker:this,date:X}):ge,ie=!!(ee&&q===1&&$),Ee=ie?x(X):X;ee&&!re&&(q!==2&&this.selectDate(Ee),q===2&&m(ce,ne))||(re?this.unselectDate(Ee):this._updateLastSelectedDate(ie?Ee:$))}_handleUpDownActions($,X){if(!(($=E($||this.focusDate||this.viewDate))instanceof Date))return;let W=X==="up"?this.viewIndex+1:this.viewIndex-1;W>2&&(W=2),W<0&&(W=0),this.setViewDate(new Date($.getFullYear(),$.getMonth(),1)),this.setCurrentView(this.viewIndexes[W])}getCell($){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.day;if(!(($=E($))instanceof Date))return;let{year:W,month:ce,date:ne}=d($),ee=`[data-year="${W}"]`,ge=`[data-month="${ce}"]`,q={[i.day]:`${ee}${ge}[data-date="${ne}"]`,[i.month]:`${ee}${ge}`,[i.year]:`${ee}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(q[X]):void 0}_showMobileOverlay(){qe.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce(($,X)=>parseFloat(X)+$,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return d(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return p(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||Pe}static replacer($,X,W){return $.replace(X,function(ce,ne,ee,ge){return ne+W+ge})}}var ot;return xe(Ve,"defaults",a),xe(Ve,"version","3.5.3"),xe(Ve,"defaultGlobalContainerId","air-datepicker-global-container"),ot=Ve.prototype,Object.assign(ot,Oe),s.default}()})})(b9);var fle=b9.exports;const ple=In(fle),mle="_InputRoot_14suv_2",gle="_InputWrapper_14suv_22",vle="_InputSize48_14suv_31",yle="_InputSize60_14suv_35",xle="_InputLeft_14suv_39",ble="_InputRight_14suv_43",_le="_InputCode_14suv_47",wle="_InputBefore_14suv_53",Cle="_InputAfter_14suv_60",Sle="_InputRootActive_14suv_66",jle="_InputError_14suv_74",Tle="_InputDisabled_14suv_79",Ele="_InputRangeSlider_14suv_87",yo={InputRoot:mle,InputWrapper:gle,InputSize48:vle,InputSize60:yle,InputLeft:xle,InputRight:ble,InputCode:_le,InputBefore:wle,InputAfter:Cle,InputRootActive:Sle,InputError:jle,InputDisabled:Tle,InputRangeSlider:Ele};function rw(t){return typeof t=="string"}const _9=t=>{if(t)return t.replace(/[$,_\-\(\)]/g,"").replace(/\s+/g,"")},Nle=["+","7"," ","(",/[0-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,"-",/\d/,/\d/],kle=[/[0-9]/,/[0-9]/,"-",/[0-9]/,/[0-9]/],Ale=[/[0-9]/,/[0-9]/,":",/[0-6]/,/[0-9]/,":",/[0-6]/,/[0-9]/],Dle=[/[0-2]/,/[0-9]/,":",/[0-6]/,/[0-9]/],Ple=[/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/],Ile=[/[0-1]/,/[0-9]/,"/",/[2-9]/,/[0-9]/],Mle=[/\d/,/\d/,/\d/],kn=t=>{var Pe,qe;const{className:e="",before:n,after:s,placeholder:i,type:a="text",name:o,size:l="default",onChange:c=()=>{},value:u="",maxLength:d=null,convertNumber:h=!1,onlyNumber:f=!1,onlyNumberSemicolon:p=!1,mask:g=null,isValid:m,children:_,datePicker:y,disabled:x,readOnly:b=!1,maxValue:w,search:C=!1,variant:j,refInput:E,minDate:T=!1,maxDate:N=!1,selectionButtons:P=null}=t,[I,B]=v.useState(u),U=v.useRef(null),z=v.useRef(null),[G,V]=v.useState("password"),J=ue(rt),[Q,Y]=v.useState(!1);v.useEffect(()=>{B(u)},[u]),v.useEffect(()=>{let Ie=u;z.current&&E&&!E.current&&(E.current=z.current),f&&(Ie=Ie.toString().replace(/\D/g,"")),p&&(Ie=Ie.toString().replace(/[^\d.,]/g,"")),h&&!p&&(Ie=pt(Ie)),B(Ie),c(Ie)},[]);const oe=`${yo.InputRoot} ${e} ${j?yo[`Input${j}`]:""} 
   ${I.length>0?yo.InputRootActive:""}`,he=Ie=>{let Ve="";rw(Ie)?Ve=Ie:Ie&&(Ve=Ie.target.value),+Ve>+w&&(Ve=w),f&&(Ve=Ve.toString().replace(/\D/g,"")),p&&(Ve=Ve.toString().replace(/[^\d.,]/g,"")),h&&!p&&(Ve=pt(Ve)),g&&(Ve=_9(Ve)),B(Ve),c(Ve)},me={value:I,onChange:he,placeholder:i,disabled:x},Oe=Ie=>{Ie.current.removeAttribute("readonly")},xe=()=>{V(G==="password"?"text":"password")};return r.jsxs("div",{ref:U,"data-error":m?m.ref.name:void 0,onClick:()=>{var Ie;P&&((Ie=P.options)!=null&&Ie.length||P.emptyText)&&Y(Ve=>!Ve)},children:[r.jsxs("label",{className:`${oe} ${l!=="default"?yo["InputSize"+l]:""} ${m?yo.InputError:""} ${x?yo.InputDisabled:""}`,children:[n&&r.jsx("span",{className:yo.InputBefore,children:n}),!g&&!y&&r.jsxs(r.Fragment,{children:[C?r.jsx(z7,{}):"",r.jsx("input",{type:a==="password"?G:a,name:o,maxLength:d,className:yo.InputWrapper,value:I,onChange:he,placeholder:i,disabled:x,autoCapitalize:"off",autoCorrect:"off",autoComplete:a==="password"?"current-password":"off",readOnly:b,ref:z,onFocus:()=>Oe(z)})]}),y&&r.jsx(Ole,{value:I,onChange:he,minDate:T,maxDate:N}),g==="phone"&&r.jsx(Dd,{...me,mask:Nle,options:{autoComplete:"tel"},inputRef:z}),g==="numbers4"&&r.jsx(Dd,{...me,mask:kle,inputRef:z}),g==="hhmmssMask"&&r.jsx(Dd,{...me,mask:Ale,inputRef:z}),g==="hhmmMask"&&r.jsx(Dd,{...me,mask:Dle,inputRef:z}),g==="bankCardMask"&&r.jsx(Dd,{...me,mask:Ple,inputRef:z}),g==="expiryMask"&&r.jsx(Dd,{...me,mask:Ile,inputRef:z}),g==="cvvMask"&&r.jsx(Dd,{...me,mask:Mle,inputRef:z}),s&&r.jsx("span",{className:yo.InputAfter,children:s}),a==="password"&&r.jsx("button",{type:"button","aria-label":"Показать пароль",title:"Показать пароль",className:"w-4 h-4 shrink-0 flex items-center justify-center",onClick:xe,children:r.jsx(ci,{className:"fill-[#717171]",width:16,height:16})})]}),!!((Pe=P==null?void 0:P.options)!=null&&Pe.length&&Q||P!=null&&P.emptyText)&&r.jsx($t,{mobile:!0,color:"white",event:"click",placement:"bottom-start",value:Q,onChange:Y,children:r.jsxs("div",{style:{width:((qe=U==null?void 0:U.current)==null?void 0:qe.clientWidth)-40||0},children:[r.jsx("div",{className:`${P.className}`,children:P.options.map((Ie,Ve)=>r.jsx("button",{onClick:()=>{he(Ie),J||Y(!1)},className:`px-2 h-8 rounded-lg ${I===Ie?"bg-blue text-white":""}`,children:Ie},Ve))}),!P.options.length&&P.emptyText&&r.jsx("div",{className:"text-center",children:P.emptyText})]})}),_]})},Dd=({value:t,onChange:e,placeholder:n,mask:s,options:i,disabled:a,inputRef:o})=>r.jsx(hle,{mask:s,className:yo.InputWrapper,value:t,onChange:e,placeholder:n,guide:!0,showMask:!0,disabled:a,ref:o,...i}),Ole=({value:t,onChange:e,minDate:n=!1,maxDate:s=!1})=>{const i=v.useRef(null);return v.useEffect(()=>{if(i.current){const[a,o,l]=t.split("."),c=`${l}-${o}-${a}`,u=new Date(c);new ple(i.current,{autoClose:!0,isMobile:!0,selectedDates:ct(u).isValid()?u:"",onSelect:({date:d})=>{console.log(d),e(d?ct(d).format("DD.MM.YYYY"):null)},minDate:n,maxDate:s})}},[]),r.jsx("input",{ref:i,value:t,readOnly:!0,className:"bg-transparent"})},iw=({errors:t,field:e})=>r.jsx(r.Fragment,{children:t&&t[e]&&r.jsx(Rle,{children:t[e].message})}),Rle=({children:t,className:e=""})=>{if(t)return r.jsx("span",{className:`text-small text-red mt-1 ml-2 block ${e}`,children:t})};var mu;(function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"})(mu||(mu={}));var ai;(function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"})(ai||(ai={}));function Lle(t){return Qb(t)&&typeof t.from=="function"}function Qb(t){return typeof t=="object"&&typeof t.to=="function"}function s6(t){t.parentElement.removeChild(t)}function RE(t){return t!=null}function r6(t){t.preventDefault()}function Ble(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function Fle(t,e){return Math.round(t/e)*e}function $le(t,e){var n=t.getBoundingClientRect(),s=t.ownerDocument,i=s.documentElement,a=w9(s);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),e?n.top+a.y-i.clientTop:n.left+a.x-i.clientLeft}function Po(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function i6(t,e,n){n>0&&(Ur(t,e),setTimeout(function(){z1(t,e)},n))}function a6(t){return Math.max(Math.min(t,100),0)}function aw(t){return Array.isArray(t)?t:[t]}function Ule(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function Ur(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function z1(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function Vle(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function w9(t){var e=window.pageXOffset!==void 0,n=(t.compatMode||"")==="CSS1Compat",s=e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,i=e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop;return{x:s,y:i}}function zle(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function Hle(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch{}return t}function qle(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function Jk(t,e){return 100/(e-t)}function LE(t,e,n){return e*100/(t[n+1]-t[n])}function Wle(t,e){return LE(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function Gle(t,e){return e*(t[1]-t[0])/100+t[0]}function hv(t,e){for(var n=1;t>=e[n];)n+=1;return n}function Yle(t,e,n){if(n>=t.slice(-1)[0])return 100;var s=hv(n,t),i=t[s-1],a=t[s],o=e[s-1],l=e[s];return o+Wle([i,a],n)/Jk(o,l)}function Xle(t,e,n){if(n>=100)return t.slice(-1)[0];var s=hv(n,e),i=t[s-1],a=t[s],o=e[s-1],l=e[s];return Gle([i,a],(n-o)*Jk(o,l))}function Kle(t,e,n,s){if(s===100)return s;var i=hv(s,t),a=t[i-1],o=t[i];return n?s-a>(o-a)/2?o:a:e[i-1]?t[i-1]+Fle(s-t[i-1],e[i-1]):s}var C9=function(){function t(e,n,s){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[s||!1],this.xNumSteps=[!1],this.snap=n;var i,a=[];for(Object.keys(e).forEach(function(o){a.push([aw(e[o]),o])}),a.sort(function(o,l){return o[0][0]-l[0][0]}),i=0;i<a.length;i++)this.handleEntryPoint(a[i][1],a[i][0]);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)this.handleStepPoint(i,this.xNumSteps[i])}return t.prototype.getDistance=function(e){for(var n=[],s=0;s<this.xNumSteps.length-1;s++)n[s]=LE(this.xVal,e,s);return n},t.prototype.getAbsoluteDistance=function(e,n,s){var i=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[i+1];)i++;else e===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);!s&&e===this.xPct[i+1]&&i++,n===null&&(n=[]);var a,o=1,l=n[i],c=0,u=0,d=0,h=0;for(s?a=(e-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):a=(this.xPct[i+1]-e)/(this.xPct[i+1]-this.xPct[i]);l>0;)c=this.xPct[i+1+h]-this.xPct[i+h],n[i+h]*o+100-a*100>100?(u=c*a,o=(l-100*a)/n[i+h],a=1):(u=n[i+h]*c/100*o,o=0),s?(d=d-u,this.xPct.length+h>=1&&h--):(d=d+u,this.xPct.length-h>=1&&h++),l=n[i+h]*o;return e+d},t.prototype.toStepping=function(e){return e=Yle(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return Xle(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=Kle(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,n,s){var i=hv(e,this.xPct);return(e===100||n&&e===this.xPct[i-1])&&(i=Math.max(i-1,1)),(this.xVal[i]-this.xVal[i-1])/s},t.prototype.getNearbySteps=function(e){var n=hv(e,this.xPct);return{stepBefore:{startValue:this.xVal[n-2],step:this.xNumSteps[n-2],highestStep:this.xHighestCompleteStep[n-2]},thisStep:{startValue:this.xVal[n-1],step:this.xNumSteps[n-1],highestStep:this.xHighestCompleteStep[n-1]},stepAfter:{startValue:this.xVal[n],step:this.xNumSteps[n],highestStep:this.xHighestCompleteStep[n]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(Ule);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,n){var s;if(e==="min"?s=0:e==="max"?s=100:s=parseFloat(e),!Po(s)||!Po(n[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(s),this.xVal.push(n[0]);var i=Number(n[1]);s?this.xSteps.push(isNaN(i)?!1:i):isNaN(i)||(this.xSteps[0]=i),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,n){if(n){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=LE([this.xVal[e],this.xVal[e+1]],n,0)/Jk(this.xPct[e],this.xPct[e+1]);var s=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],i=Math.ceil(Number(s.toFixed(3))-1),a=this.xVal[e]+this.xNumSteps[e]*i;this.xHighestCompleteStep[e]=a}},t}(),o6={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},S9={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Jc={tooltips:".__tooltips",aria:".__aria"};function Qle(t,e){if(!Po(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function Zle(t,e){if(!Po(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function Jle(t,e){if(!Po(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function ece(t,e){if(!Po(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function tce(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new C9(e,t.snap||!1,t.singleStep)}function nce(t,e){if(e=aw(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function sce(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function rce(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function ice(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function j9(t,e){var n=[!1],s;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(s=1;s<t.handles;s++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");n=e}t.connect=n}function ace(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function T9(t,e){if(!Po(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function oce(t,e){if(!Po(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function lce(t,e){var n;if(!Po(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||Po(e[0])||Po(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],n=0;n<t.spectrum.xNumSteps.length-1;n++)if(t.padding[0][n]<0||t.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var s=e[0]+e[1],i=t.spectrum.xVal[0],a=t.spectrum.xVal[t.spectrum.xVal.length-1];if(s/(a-i)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function cce(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function uce(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,s=e.indexOf("drag")>=0,i=e.indexOf("fixed")>=0,a=e.indexOf("snap")>=0,o=e.indexOf("hover")>=0,l=e.indexOf("unconstrained")>=0,c=e.indexOf("invert-connects")>=0,u=e.indexOf("drag-all")>=0,d=e.indexOf("smooth-steps")>=0;if(i){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");T9(t,t.start[1]-t.start[0])}if(c&&t.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(l&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:n||a,drag:s,dragAll:u,smoothSteps:d,fixed:i,snap:a,hover:o,unconstrained:l,invertConnects:c}}function dce(t,e){if(e!==!1)if(e===!0||Qb(e)){t.tooltips=[];for(var n=0;n<t.handles;n++)t.tooltips.push(e)}else{if(e=aw(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(s){if(typeof s!="boolean"&&!Qb(s))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function hce(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function fce(t,e){if(!Qb(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function pce(t,e){if(!Lle(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function mce(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function gce(t,e){t.documentElement=e}function vce(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function yce(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(n){t.cssClasses[n]=t.cssPrefix+e[n]})):t.cssClasses=e}function E9(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:o6,format:o6},n={step:{r:!1,t:Qle},keyboardPageMultiplier:{r:!1,t:Zle},keyboardMultiplier:{r:!1,t:Jle},keyboardDefaultStep:{r:!1,t:ece},start:{r:!0,t:nce},connect:{r:!0,t:j9},direction:{r:!0,t:cce},snap:{r:!1,t:sce},animate:{r:!1,t:rce},animationDuration:{r:!1,t:ice},range:{r:!0,t:tce},orientation:{r:!1,t:ace},margin:{r:!1,t:T9},limit:{r:!1,t:oce},padding:{r:!1,t:lce},behaviour:{r:!0,t:uce},ariaFormat:{r:!1,t:fce},format:{r:!1,t:pce},tooltips:{r:!1,t:dce},keyboardSupport:{r:!0,t:mce},documentElement:{r:!1,t:gce},cssPrefix:{r:!0,t:vce},cssClasses:{r:!0,t:yce},handleAttributes:{r:!1,t:hce}},s={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:S9,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(n).forEach(function(c){if(!RE(t[c])&&s[c]===void 0){if(n[c].r)throw new Error("noUiSlider: '"+c+"' is required.");return}n[c].t(e,RE(t[c])?t[c]:s[c])}),e.pips=t.pips;var i=document.createElement("div"),a=i.style.msTransform!==void 0,o=i.style.transform!==void 0;e.transformRule=o?"transform":a?"msTransform":"webkitTransform";var l=[["left","top"],["right","bottom"]];return e.style=l[e.dir][e.ort],e}function xce(t,e,n){var s=zle(),i=qle(),a=i&&Hle(),o=t,l,c,u,d,h,f,p=e.spectrum,g=[],m=[],_=[],y=0,x={},b=!1,w=t.ownerDocument,C=e.documentElement||w.documentElement,j=w.body,E=w.dir==="rtl"||e.ort===1?0:100;function T(ae,be){var Ce=w.createElement("div");return be&&Ur(Ce,be),ae.appendChild(Ce),Ce}function N(ae,be){var Ce=T(ae,e.cssClasses.origin),We=T(Ce,e.cssClasses.handle);if(T(We,e.cssClasses.touchArea),We.setAttribute("data-handle",String(be)),e.keyboardSupport&&(We.setAttribute("tabindex","0"),We.addEventListener("keydown",function(et){return q(et,be)})),e.handleAttributes!==void 0){var Je=e.handleAttributes[be];Object.keys(Je).forEach(function(et){We.setAttribute(et,Je[et])})}return We.setAttribute("role","slider"),We.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),be===0?Ur(We,e.cssClasses.handleLower):be===e.handles-1&&Ur(We,e.cssClasses.handleUpper),Ce.handle=We,Ce}function P(ae,be){return be?T(ae,e.cssClasses.connect):!1}function I(ae,be){c=T(be,e.cssClasses.connects),u=[],d=[],d.push(P(c,ae[0]));for(var Ce=0;Ce<e.handles;Ce++)u.push(N(be,Ce)),_[Ce]=Ce,d.push(P(c,ae[Ce+1]))}function B(ae){Ur(ae,e.cssClasses.target),e.dir===0?Ur(ae,e.cssClasses.ltr):Ur(ae,e.cssClasses.rtl),e.ort===0?Ur(ae,e.cssClasses.horizontal):Ur(ae,e.cssClasses.vertical);var be=getComputedStyle(ae).direction;return be==="rtl"?Ur(ae,e.cssClasses.textDirectionRtl):Ur(ae,e.cssClasses.textDirectionLtr),T(ae,e.cssClasses.base)}function U(ae,be){return!e.tooltips||!e.tooltips[be]?!1:T(ae.firstChild,e.cssClasses.tooltip)}function z(){return o.hasAttribute("disabled")}function G(ae){var be=u[ae];return be.hasAttribute("disabled")}function V(ae){ae!=null?(u[ae].setAttribute("disabled",""),u[ae].handle.removeAttribute("tabindex")):(o.setAttribute("disabled",""),u.forEach(function(be){be.handle.removeAttribute("tabindex")}))}function J(ae){ae!=null?(u[ae].removeAttribute("disabled"),u[ae].handle.setAttribute("tabindex","0")):(o.removeAttribute("disabled"),u.forEach(function(be){be.removeAttribute("disabled"),be.handle.setAttribute("tabindex","0")}))}function Q(){f&&(Ne("update"+Jc.tooltips),f.forEach(function(ae){ae&&s6(ae)}),f=null)}function Y(){Q(),f=u.map(U),ie("update"+Jc.tooltips,function(ae,be,Ce){if(!(!f||!e.tooltips)&&f[be]!==!1){var We=ae[be];e.tooltips[be]!==!0&&(We=e.tooltips[be].to(Ce[be])),f[be].innerHTML=We}})}function oe(){Ne("update"+Jc.aria),ie("update"+Jc.aria,function(ae,be,Ce,We,Je){_.forEach(function(et){var yt=u[et],ut=Se(m,et,0,!0,!0,!0),Vt=Se(m,et,100,!0,!0,!0),zt=Je[et],Tt=String(e.ariaFormat.to(Ce[et]));ut=p.fromStepping(ut).toFixed(1),Vt=p.fromStepping(Vt).toFixed(1),zt=p.fromStepping(zt).toFixed(1),yt.children[0].setAttribute("aria-valuemin",ut),yt.children[0].setAttribute("aria-valuemax",Vt),yt.children[0].setAttribute("aria-valuenow",zt),yt.children[0].setAttribute("aria-valuetext",Tt)})})}function he(ae){if(ae.mode===mu.Range||ae.mode===mu.Steps)return p.xVal;if(ae.mode===mu.Count){if(ae.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var be=ae.values-1,Ce=100/be,We=[];be--;)We[be]=be*Ce;return We.push(100),me(We,ae.stepped)}return ae.mode===mu.Positions?me(ae.values,ae.stepped):ae.mode===mu.Values?ae.stepped?ae.values.map(function(Je){return p.fromStepping(p.getStep(p.toStepping(Je)))}):ae.values:[]}function me(ae,be){return ae.map(function(Ce){return p.fromStepping(be?p.getStep(Ce):Ce)})}function Oe(ae){function be(zt,Tt){return Number((zt+Tt).toFixed(7))}var Ce=he(ae),We={},Je=p.xVal[0],et=p.xVal[p.xVal.length-1],yt=!1,ut=!1,Vt=0;return Ce=Ble(Ce.slice().sort(function(zt,Tt){return zt-Tt})),Ce[0]!==Je&&(Ce.unshift(Je),yt=!0),Ce[Ce.length-1]!==et&&(Ce.push(et),ut=!0),Ce.forEach(function(zt,Tt){var Et,Ht,Sn,xn=zt,On=Ce[Tt+1],Nt,ys,Aa,Da,zc,Qr,gn,Hs=ae.mode===mu.Steps;for(Hs&&(Et=p.xNumSteps[Tt]),Et||(Et=On-xn),On===void 0&&(On=xn),Et=Math.max(Et,1e-7),Ht=xn;Ht<=On;Ht=be(Ht,Et)){for(Nt=p.toStepping(Ht),ys=Nt-Vt,zc=ys/(ae.density||1),Qr=Math.round(zc),gn=ys/Qr,Sn=1;Sn<=Qr;Sn+=1)Aa=Vt+Sn*gn,We[Aa.toFixed(5)]=[p.fromStepping(Aa),0];Da=Ce.indexOf(Ht)>-1?ai.LargeValue:Hs?ai.SmallValue:ai.NoValue,!Tt&&yt&&Ht!==On&&(Da=0),Ht===On&&ut||(We[Nt.toFixed(5)]=[Ht,Da]),Vt=Nt}}),We}function xe(ae,be,Ce){var We,Je,et=w.createElement("div"),yt=(We={},We[ai.None]="",We[ai.NoValue]=e.cssClasses.valueNormal,We[ai.LargeValue]=e.cssClasses.valueLarge,We[ai.SmallValue]=e.cssClasses.valueSub,We),ut=(Je={},Je[ai.None]="",Je[ai.NoValue]=e.cssClasses.markerNormal,Je[ai.LargeValue]=e.cssClasses.markerLarge,Je[ai.SmallValue]=e.cssClasses.markerSub,Je),Vt=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],zt=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];Ur(et,e.cssClasses.pips),Ur(et,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function Tt(Ht,Sn){var xn=Sn===e.cssClasses.value,On=xn?Vt:zt,Nt=xn?yt:ut;return Sn+" "+On[e.ort]+" "+Nt[Ht]}function Et(Ht,Sn,xn){if(xn=be?be(Sn,xn):xn,xn!==ai.None){var On=T(et,!1);On.className=Tt(xn,e.cssClasses.marker),On.style[e.style]=Ht+"%",xn>ai.NoValue&&(On=T(et,!1),On.className=Tt(xn,e.cssClasses.value),On.setAttribute("data-value",String(Sn)),On.style[e.style]=Ht+"%",On.innerHTML=String(Ce.to(Sn)))}}return Object.keys(ae).forEach(function(Ht){Et(Ht,ae[Ht][0],ae[Ht][1])}),et}function Pe(){h&&(s6(h),h=null)}function qe(ae){Pe();var be=Oe(ae),Ce=ae.filter,We=ae.format||{to:function(Je){return String(Math.round(Je))}};return h=o.appendChild(xe(be,Ce,We)),h}function Ie(){var ae=l.getBoundingClientRect(),be="offset"+["Width","Height"][e.ort];return e.ort===0?ae.width||l[be]:ae.height||l[be]}function Ve(ae,be,Ce,We){var Je=function(yt){var ut=ot(yt,We.pageOffset,We.target||be);if(!ut||z()&&!We.doNotReject||Vle(o,e.cssClasses.tap)&&!We.doNotReject||ae===s.start&&ut.buttons!==void 0&&ut.buttons>1||We.hover&&ut.buttons)return!1;a||ut.preventDefault(),ut.calcPoint=ut.points[e.ort],Ce(ut,We)},et=[];return ae.split(" ").forEach(function(yt){be.addEventListener(yt,Je,a?{passive:!0}:!1),et.push([yt,Je])}),et}function ot(ae,be,Ce){var We=ae.type.indexOf("touch")===0,Je=ae.type.indexOf("mouse")===0,et=ae.type.indexOf("pointer")===0,yt=0,ut=0;if(ae.type.indexOf("MSPointer")===0&&(et=!0),ae.type==="mousedown"&&!ae.buttons&&!ae.touches)return!1;if(We){var Vt=function(Et){var Ht=Et.target;return Ht===Ce||Ce.contains(Ht)||ae.composed&&ae.composedPath().shift()===Ce};if(ae.type==="touchstart"){var zt=Array.prototype.filter.call(ae.touches,Vt);if(zt.length>1)return!1;yt=zt[0].pageX,ut=zt[0].pageY}else{var Tt=Array.prototype.find.call(ae.changedTouches,Vt);if(!Tt)return!1;yt=Tt.pageX,ut=Tt.pageY}}return be=be||w9(w),(Je||et)&&(yt=ae.clientX+be.x,ut=ae.clientY+be.y),ae.pageOffset=be,ae.points=[yt,ut],ae.cursor=Je||et,ae}function fe(ae){var be=ae-$le(l,e.ort),Ce=be*100/Ie();return Ce=a6(Ce),e.dir?100-Ce:Ce}function $(ae){var be=100,Ce=!1;return u.forEach(function(We,Je){if(!G(Je)){var et=m[Je],yt=Math.abs(et-ae),ut=yt===100&&be===100,Vt=yt<be,zt=yt<=be&&ae>et;(Vt||zt||ut)&&(Ce=Je,be=yt)}}),Ce}function X(ae,be){ae.type==="mouseout"&&ae.target.nodeName==="HTML"&&ae.relatedTarget===null&&ce(ae,be)}function W(ae,be){if(navigator.appVersion.indexOf("MSIE 9")===-1&&ae.buttons===0&&be.buttonsProperty!==0)return ce(ae,be);var Ce=(e.dir?-1:1)*(ae.calcPoint-be.startCalcPoint),We=Ce*100/be.baseSize;tt(Ce>0,We,be.locations,be.handleNumbers,be.connect)}function ce(ae,be){be.handle&&(z1(be.handle,e.cssClasses.active),y-=1),be.listeners.forEach(function(Ce){C.removeEventListener(Ce[0],Ce[1])}),y===0&&(z1(o,e.cssClasses.drag),Pt(),ae.cursor&&(j.style.cursor="",j.removeEventListener("selectstart",r6))),e.events.smoothSteps&&(be.handleNumbers.forEach(function(Ce){H(Ce,m[Ce],!0,!0,!1,!1)}),be.handleNumbers.forEach(function(Ce){Ae("update",Ce)})),be.handleNumbers.forEach(function(Ce){Ae("change",Ce),Ae("set",Ce),Ae("end",Ce)})}function ne(ae,be){if(!be.handleNumbers.some(G)){var Ce;if(be.handleNumbers.length===1){var We=u[be.handleNumbers[0]];Ce=We.children[0],y+=1,Ur(Ce,e.cssClasses.active)}ae.stopPropagation();var Je=[],et=Ve(s.move,C,W,{target:ae.target,handle:Ce,connect:be.connect,listeners:Je,startCalcPoint:ae.calcPoint,baseSize:Ie(),pageOffset:ae.pageOffset,handleNumbers:be.handleNumbers,buttonsProperty:ae.buttons,locations:m.slice()}),yt=Ve(s.end,C,ce,{target:ae.target,handle:Ce,listeners:Je,doNotReject:!0,handleNumbers:be.handleNumbers}),ut=Ve("mouseout",C,X,{target:ae.target,handle:Ce,listeners:Je,doNotReject:!0,handleNumbers:be.handleNumbers});Je.push.apply(Je,et.concat(yt,ut)),ae.cursor&&(j.style.cursor=getComputedStyle(ae.target).cursor,u.length>1&&Ur(o,e.cssClasses.drag),j.addEventListener("selectstart",r6,!1)),be.handleNumbers.forEach(function(Vt){Ae("start",Vt)})}}function ee(ae){ae.stopPropagation();var be=fe(ae.calcPoint),Ce=$(be);Ce!==!1&&(e.events.snap||i6(o,e.cssClasses.tap,e.animationDuration),H(Ce,be,!0,!0),Pt(),Ae("slide",Ce,!0),Ae("update",Ce,!0),e.events.snap?ne(ae,{handleNumbers:[Ce]}):(Ae("change",Ce,!0),Ae("set",Ce,!0)))}function ge(ae){var be=fe(ae.calcPoint),Ce=p.getStep(be),We=p.fromStepping(Ce);Object.keys(x).forEach(function(Je){Je.split(".")[0]==="hover"&&x[Je].forEach(function(et){et.call(is,We)})})}function q(ae,be){if(z()||G(be))return!1;var Ce=["Left","Right"],We=["Down","Up"],Je=["PageDown","PageUp"],et=["Home","End"];e.dir&&!e.ort?Ce.reverse():e.ort&&!e.dir&&(We.reverse(),Je.reverse());var yt=ae.key.replace("Arrow",""),ut=yt===Je[0],Vt=yt===Je[1],zt=yt===We[0]||yt===Ce[0]||ut,Tt=yt===We[1]||yt===Ce[1]||Vt,Et=yt===et[0],Ht=yt===et[1];if(!zt&&!Tt&&!Et&&!Ht)return!0;ae.preventDefault();var Sn;if(Tt||zt){var xn=zt?0:1,On=Ut(be),Nt=On[xn];if(Nt===null)return!1;Nt===!1&&(Nt=p.getDefaultStep(m[be],zt,e.keyboardDefaultStep)),Vt||ut?Nt*=e.keyboardPageMultiplier:Nt*=e.keyboardMultiplier,Nt=Math.max(Nt,1e-7),Nt=(zt?-1:1)*Nt,Sn=g[be]+Nt}else Ht?Sn=e.spectrum.xVal[e.spectrum.xVal.length-1]:Sn=e.spectrum.xVal[0];return H(be,p.toStepping(Sn),!0,!0),Ae("slide",be),Ae("update",be),Ae("change",be),Ae("set",be),!1}function re(ae){ae.fixed||u.forEach(function(be,Ce){Ve(s.start,be.children[0],ne,{handleNumbers:[Ce]})}),ae.tap&&Ve(s.start,l,ee,{}),ae.hover&&Ve(s.move,l,ge,{hover:!0}),ae.drag&&d.forEach(function(be,Ce){if(!(be===!1||Ce===0||Ce===d.length-1)){var We=u[Ce-1],Je=u[Ce],et=[be],yt=[We,Je],ut=[Ce-1,Ce];Ur(be,e.cssClasses.draggable),ae.fixed&&(et.push(We.children[0]),et.push(Je.children[0])),ae.dragAll&&(yt=u,ut=_),et.forEach(function(Vt){Ve(s.start,Vt,ne,{handles:yt,handleNumbers:ut,connect:be})})}})}function ie(ae,be){x[ae]=x[ae]||[],x[ae].push(be),ae.split(".")[0]==="update"&&u.forEach(function(Ce,We){Ae("update",We)})}function Ee(ae){return ae===Jc.aria||ae===Jc.tooltips}function Ne(ae){var be=ae&&ae.split(".")[0],Ce=be?ae.substring(be.length):ae;Object.keys(x).forEach(function(We){var Je=We.split(".")[0],et=We.substring(Je.length);(!be||be===Je)&&(!Ce||Ce===et)&&(!Ee(et)||Ce===et)&&delete x[We]})}function Ae(ae,be,Ce){Object.keys(x).forEach(function(We){var Je=We.split(".")[0];ae===Je&&x[We].forEach(function(et){et.call(is,g.map(e.format.to),be,g.slice(),Ce||!1,m.slice(),is)})})}function Se(ae,be,Ce,We,Je,et,yt){var ut;return u.length>1&&!e.events.unconstrained&&(We&&be>0&&(ut=p.getAbsoluteDistance(ae[be-1],e.margin,!1),Ce=Math.max(Ce,ut)),Je&&be<u.length-1&&(ut=p.getAbsoluteDistance(ae[be+1],e.margin,!0),Ce=Math.min(Ce,ut))),u.length>1&&e.limit&&(We&&be>0&&(ut=p.getAbsoluteDistance(ae[be-1],e.limit,!1),Ce=Math.min(Ce,ut)),Je&&be<u.length-1&&(ut=p.getAbsoluteDistance(ae[be+1],e.limit,!0),Ce=Math.max(Ce,ut))),e.padding&&(be===0&&(ut=p.getAbsoluteDistance(0,e.padding[0],!1),Ce=Math.max(Ce,ut)),be===u.length-1&&(ut=p.getAbsoluteDistance(100,e.padding[1],!0),Ce=Math.min(Ce,ut))),yt||(Ce=p.getStep(Ce)),Ce=a6(Ce),Ce===ae[be]&&!et?!1:Ce}function Le(ae,be){var Ce=e.ort;return(Ce?be:ae)+", "+(Ce?ae:be)}function tt(ae,be,Ce,We,Je){var et=Ce.slice(),yt=We[0],ut=e.events.smoothSteps,Vt=[!ae,ae],zt=[ae,!ae];We=We.slice(),ae&&We.reverse(),We.length>1?We.forEach(function(Et,Ht){var Sn=Se(et,Et,et[Et]+be,Vt[Ht],zt[Ht],!1,ut);Sn===!1?be=0:(be=Sn-et[Et],et[Et]=Sn)}):Vt=zt=[!0];var Tt=!1;We.forEach(function(Et,Ht){Tt=H(Et,Ce[Et]+be,Vt[Ht],zt[Ht],!1,ut)||Tt}),Tt&&(We.forEach(function(Et){Ae("update",Et),Ae("slide",Et)}),Je!=null&&Ae("drag",yt))}function lt(ae,be){return e.dir?100-ae-be:ae}function it(ae,be){m[ae]=be,g[ae]=p.fromStepping(be);var Ce=lt(be,0)-E,We="translate("+Le(Ce+"%","0")+")";if(u[ae].style[e.transformRule]=We,e.events.invertConnects&&m.length>1){var Je=m.every(function(et,yt,ut){return yt===0||et>=ut[yt-1]});if(b!==!Je){Hn();return}}M(ae),M(ae+1),b&&(M(ae-1),M(ae+2))}function Pt(){_.forEach(function(ae){var be=m[ae]>50?-1:1,Ce=3+(u.length+be*ae);u[ae].style.zIndex=String(Ce)})}function H(ae,be,Ce,We,Je,et){return Je||(be=Se(m,ae,be,Ce,We,!1,et)),be===!1?!1:(it(ae,be),!0)}function M(ae){if(d[ae]){var be=m.slice();b&&be.sort(function(ut,Vt){return ut-Vt});var Ce=0,We=100;ae!==0&&(Ce=be[ae-1]),ae!==d.length-1&&(We=be[ae]);var Je=We-Ce,et="translate("+Le(lt(Ce,Je)+"%","0")+")",yt="scale("+Le(Je/100,"1")+")";d[ae].style[e.transformRule]=et+" "+yt}}function R(ae,be){return ae===null||ae===!1||ae===void 0||(typeof ae=="number"&&(ae=String(ae)),ae=e.format.from(ae),ae!==!1&&(ae=p.toStepping(ae)),ae===!1||isNaN(ae))?m[be]:ae}function te(ae,be,Ce){var We=aw(ae),Je=m[0]===void 0;be=be===void 0?!0:be,e.animate&&!Je&&i6(o,e.cssClasses.tap,e.animationDuration),_.forEach(function(ut){H(ut,R(We[ut],ut),!0,!1,Ce)});var et=_.length===1?0:1;if(Je&&p.hasNoSize()&&(Ce=!0,m[0]=0,_.length>1)){var yt=100/(_.length-1);_.forEach(function(ut){m[ut]=ut*yt})}for(;et<_.length;++et)_.forEach(function(ut){H(ut,m[ut],!0,!0,Ce)});Pt(),_.forEach(function(ut){Ae("update",ut),We[ut]!==null&&be&&Ae("set",ut)})}function ye(ae){te(e.start,ae)}function Te(ae,be,Ce,We){if(ae=Number(ae),!(ae>=0&&ae<_.length))throw new Error("noUiSlider: invalid handle number, got: "+ae);H(ae,R(be,ae),!0,!0,We),Ae("update",ae),Ce&&Ae("set",ae)}function $e(ae){if(ae===void 0&&(ae=!1),ae)return g.length===1?g[0]:g.slice(0);var be=g.map(e.format.to);return be.length===1?be[0]:be}function wt(){for(Ne(Jc.aria),Ne(Jc.tooltips),Object.keys(e.cssClasses).forEach(function(ae){z1(o,e.cssClasses[ae])});o.firstChild;)o.removeChild(o.firstChild);delete o.noUiSlider}function Ut(ae){var be=m[ae],Ce=p.getNearbySteps(be),We=g[ae],Je=Ce.thisStep.step,et=null;if(e.snap)return[We-Ce.stepBefore.startValue||null,Ce.stepAfter.startValue-We||null];Je!==!1&&We+Je>Ce.stepAfter.startValue&&(Je=Ce.stepAfter.startValue-We),We>Ce.thisStep.startValue?et=Ce.thisStep.step:Ce.stepBefore.step===!1?et=!1:et=We-Ce.stepBefore.highestStep,be===100?Je=null:be===0&&(et=null);var yt=p.countStepDecimals();return Je!==null&&Je!==!1&&(Je=Number(Je.toFixed(yt))),et!==null&&et!==!1&&(et=Number(et.toFixed(yt))),[et,Je]}function Rt(){return _.map(Ut)}function tn(ae,be){var Ce=$e(),We=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];We.forEach(function(et){ae[et]!==void 0&&(n[et]=ae[et])});var Je=E9(n);We.forEach(function(et){ae[et]!==void 0&&(e[et]=Je[et])}),p=Je.spectrum,e.margin=Je.margin,e.limit=Je.limit,e.padding=Je.padding,e.pips?qe(e.pips):Pe(),e.tooltips?Y():Q(),m=[],te(RE(ae.start)?ae.start:Ce,be),ae.connect&&_t()}function _t(){for(;c.firstChild;)c.removeChild(c.firstChild);for(var ae=0;ae<=e.handles;ae++)d[ae]=P(c,e.connect[ae]),M(ae);re({drag:e.events.drag,fixed:!0})}function Hn(){b=!b,j9(e,e.connect.map(function(ae){return!ae})),_t()}function rs(){l=B(o),I(e.connect,l),re(e.events),te(e.start),e.pips&&qe(e.pips),e.tooltips&&Y(),oe()}rs();var is={destroy:wt,steps:Rt,on:ie,off:Ne,get:$e,set:te,setHandle:Te,reset:ye,disable:V,enable:J,__moveHandles:function(ae,be,Ce){tt(ae,be,m,Ce)},options:n,updateOptions:tn,target:o,removePips:Pe,removeTooltips:Q,getPositions:function(){return m.slice()},getTooltips:function(){return f},getOrigins:function(){return u},pips:qe};return is}function bce(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var n=E9(e),s=xce(t,n,e);return t.noUiSlider=s,s}const _ce={__spectrum:C9,cssClasses:S9,create:bce};var N9={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){var n=["decimals","thousand","mark","prefix","suffix","encoder","decoder","negativeBefore","negative","edit","undo"];function s(g){return g.split("").reverse().join("")}function i(g,m){return g.substring(0,m.length)===m}function a(g,m){return g.slice(-1*m.length)===m}function o(g,m,_){if((g[m]||g[_])&&g[m]===g[_])throw new Error(m)}function l(g){return typeof g=="number"&&isFinite(g)}function c(g,m){return g=g.toString().split("e"),g=Math.round(+(g[0]+"e"+(g[1]?+g[1]+m:m))),g=g.toString().split("e"),(+(g[0]+"e"+(g[1]?+g[1]-m:-m))).toFixed(m)}function u(g,m,_,y,x,b,w,C,j,E,T,N){var P=N,I,B,U,z="",G="";return b&&(N=b(N)),l(N)?(g!==!1&&parseFloat(N.toFixed(g))===0&&(N=0),N<0&&(I=!0,N=Math.abs(N)),g!==!1&&(N=c(N,g)),N=N.toString(),N.indexOf(".")!==-1?(B=N.split("."),U=B[0],_&&(z=_+B[1])):U=N,m&&(U=s(U).match(/.{1,3}/g),U=s(U.join(s(m)))),I&&C&&(G+=C),y&&(G+=y),I&&j&&(G+=j),G+=U,G+=z,x&&(G+=x),E&&(G=E(G,P)),G):!1}function d(g,m,_,y,x,b,w,C,j,E,T,N){var P,I="";return T&&(N=T(N)),!N||typeof N!="string"||(C&&i(N,C)&&(N=N.replace(C,""),P=!0),y&&i(N,y)&&(N=N.replace(y,"")),j&&i(N,j)&&(N=N.replace(j,""),P=!0),x&&a(N,x)&&(N=N.slice(0,-1*x.length)),m&&(N=N.split(m).join("")),_&&(N=N.replace(_,".")),P&&(I+="-"),I+=N,I=I.replace(/[^0-9\.\-.]/g,""),I==="")||(I=Number(I),w&&(I=w(I)),!l(I))?!1:I}function h(g){var m,_,y,x={};for(g.suffix===void 0&&(g.suffix=g.postfix),m=0;m<n.length;m+=1)if(_=n[m],y=g[_],y===void 0)_==="negative"&&!x.negativeBefore?x[_]="-":_==="mark"&&x.thousand!=="."?x[_]=".":x[_]=!1;else if(_==="decimals")if(y>=0&&y<8)x[_]=y;else throw new Error(_);else if(_==="encoder"||_==="decoder"||_==="edit"||_==="undo")if(typeof y=="function")x[_]=y;else throw new Error(_);else if(typeof y=="string")x[_]=y;else throw new Error(_);return o(x,"mark","thousand"),o(x,"prefix","negative"),o(x,"prefix","negativeBefore"),x}function f(g,m,_){var y,x=[];for(y=0;y<n.length;y+=1)x.push(g[n[y]]);return x.push(_),m.apply("",x)}function p(g){if(!(this instanceof p))return new p(g);typeof g=="object"&&(g=h(g),this.to=function(m){return f(g,u,m)},this.from=function(m){return f(g,d,m)})}return p})})(N9);var wce=N9.exports;const Cce=In(wce),Sce=({range:t={min:0,max:100},step:e=1,beforeText:n,value:s,onChange:i=()=>{}})=>{const a=v.useRef(null),[o,l]=v.useState(s.toString());v.useEffect(()=>{if(a.current){const u=_ce.create(a.current,{start:s,connect:"lower",step:e,range:t,format:Cce({decimals:0})});return u.on("update",d=>{l(d),i(d[0])}),()=>{u.destroy()}}},[JSON.stringify(t)]);const c=u=>{let d=+u.toString().replace(/\D/g,"");d>t[1]&&(d=t[1]),l([d]),i(d),a.current&&a.current.noUiSlider&&a.current.noUiSlider.set(d)};return r.jsxs("div",{className:yo.InputRangeSlider,children:[r.jsx(kn,{before:n,value:pt(String(o)),maxValue:t[1],onlyNumber:!0,convertNumber:!0,onChange:c}),r.jsx("div",{ref:a})]})},Qe=({control:t,errors:e,requiredValue:n="",name:s="",beforeText:i="",afterText:a,size:o,type:l,defaultValue:c="",className:u="",onlyNumber:d,convertNumber:h,onlyNumberSemicolon:f,maxLength:p,datePicker:g,variant:m,mask:_,disabled:y,placeholder:x="",readOnly:b,refInput:w=null,minDate:C=!1,maxDate:j=!1,selectionButtons:E=null})=>r.jsx(Ir,{control:t,name:s,defaultValue:c,rules:{required:n,validate:T=>{var N;if(E&&((N=E.options)!=null&&N.length||E.required))return E.options.includes(T)}},render:({field:T})=>r.jsx(kn,{maxLength:p,type:l,before:i,after:a,size:o,variant:m,value:T.value,onlyNumber:d,convertNumber:h,datePicker:g,onlyNumberSemicolon:f,onChange:N=>T.onChange(N),className:u,mask:_,minDate:C,maxDate:j,placeholder:x,isValid:e?e[s]:!1,disabled:y,readOnly:b,refInput:w,selectionButtons:E,children:r.jsx(iw,{errors:e,field:s})})}),jce=({control:t,name:e="",beforeText:n="",start:s=0,range:i={min:0,max:100},step:a=1})=>r.jsx(Ir,{control:t,name:e,defaultValue:s,render:({field:o})=>r.jsx(Sce,{beforeText:n,value:o.value,onChange:l=>o.onChange(l),step:a,range:i})}),ow=({control:t,errors:e=null,name:n="phone",size:s,defaultValue:i="",disabled:a,refInput:o=null})=>r.jsx(Ir,{control:t,name:n,defaultValue:i,rules:e?{required:"Введите корректный номер телефона",minLength:{value:12,message:"Введите корректный номер телефона"}}:null,render:({field:l})=>r.jsx(kn,{before:"Телефон",mask:"phone",size:s,disabled:a,value:l.value,onChange:c=>l.onChange(_9(c)),refInput:o,isValid:e?e[n]:!1,children:r.jsx(iw,{errors:e,field:n})})});function Tce(t){const n=(""+t).replace(/\D/g,"").match(/^(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})$/);return n?`+${n[1]} (${n[2]}) ${n[3]}-${n[4]}-${n[5]}`:null}const Zb=60*60*24*3;var lw={exports:{}},k9=Array.prototype.slice;function A9(t){var e=k9.call(arguments,1),n;switch(e.length){case 1:throw new Error("Not enough forms");case 2:n=t>1?e[1]:e[0];break;default:n=e[kce(t)];break}return n.replace(/%d/g,t)}function Ece(t){var e=k9.call(arguments,1),n=e[Nce(t)];return n.replace(/%d/g,t)}function Nce(t){return t>1e6?2:(t>1e3&&t<1e6&&/000$/.test(t)&&(t/=1e3),t%10===1&&t%100!==11||/1000$/.test(t.toString())?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)}function kce(t){return t%10===1&&t%100!==11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2}lw.exports=A9;lw.exports.noun=A9;lw.exports.verb=Ece;var Ace=lw.exports;const fv=In(Ace),Dce="_CountdownTimerRoot_1616e_1",Pce="_CountdownTimerItem_1616e_10",Ice="_CountdownTimerValue_1616e_16",Mce="_CountdownTimerName_1616e_20",Oce="_CountdownTimerDot_1616e_25",oa={CountdownTimerRoot:Dce,CountdownTimerItem:Pce,CountdownTimerValue:Ice,CountdownTimerName:Mce,CountdownTimerDot:Oce};var Rce={exports:{}};(function(t,e){(function(n,s){t.exports=s(L7)})(hn,function(n){function s(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var i=s(n),a="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),o="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),l="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),c="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),u=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function d(g,m,_){var y,x;return _==="m"?m?"минута":"минуту":g+" "+(y=+g,x={mm:m?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[_].split("_"),y%10==1&&y%100!=11?x[0]:y%10>=2&&y%10<=4&&(y%100<10||y%100>=20)?x[1]:x[2])}var h=function(g,m){return u.test(m)?a[g.month()]:o[g.month()]};h.s=o,h.f=a;var f=function(g,m){return u.test(m)?l[g.month()]:c[g.month()]};f.s=c,f.f=l;var p={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:h,monthsShort:f,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:d,mm:d,h:"час",hh:d,d:"день",dd:d,M:"месяц",MM:d,y:"год",yy:d},ordinal:function(g){return g},meridiem:function(g){return g<4?"ночи":g<12?"утра":g<17?"дня":"вечера"}};return i.default.locale(p,null,!0),p})})(Rce);var D9={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(hn,function(){var n,s,i=1e3,a=6e4,o=36e5,l=864e5,c=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,d=2628e6,h=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f={years:u,months:d,days:l,hours:o,minutes:a,seconds:i,milliseconds:1,weeks:6048e5},p=function(j){return j instanceof w},g=function(j,E,T){return new w(j,T,E.$l)},m=function(j){return s.p(j)+"s"},_=function(j){return j<0},y=function(j){return _(j)?Math.ceil(j):Math.floor(j)},x=function(j){return Math.abs(j)},b=function(j,E){return j?_(j)?{negative:!0,format:""+x(j)+E}:{negative:!1,format:""+j+E}:{negative:!1,format:""}},w=function(){function j(T,N,P){var I=this;if(this.$d={},this.$l=P,T===void 0&&(this.$ms=0,this.parseFromMilliseconds()),N)return g(T*f[m(N)],this);if(typeof T=="number")return this.$ms=T,this.parseFromMilliseconds(),this;if(typeof T=="object")return Object.keys(T).forEach(function(z){I.$d[m(z)]=T[z]}),this.calMilliseconds(),this;if(typeof T=="string"){var B=T.match(h);if(B){var U=B.slice(2).map(function(z){return z!=null?Number(z):0});return this.$d.years=U[0],this.$d.months=U[1],this.$d.weeks=U[2],this.$d.days=U[3],this.$d.hours=U[4],this.$d.minutes=U[5],this.$d.seconds=U[6],this.calMilliseconds(),this}}return this}var E=j.prototype;return E.calMilliseconds=function(){var T=this;this.$ms=Object.keys(this.$d).reduce(function(N,P){return N+(T.$d[P]||0)*f[P]},0)},E.parseFromMilliseconds=function(){var T=this.$ms;this.$d.years=y(T/u),T%=u,this.$d.months=y(T/d),T%=d,this.$d.days=y(T/l),T%=l,this.$d.hours=y(T/o),T%=o,this.$d.minutes=y(T/a),T%=a,this.$d.seconds=y(T/i),T%=i,this.$d.milliseconds=T},E.toISOString=function(){var T=b(this.$d.years,"Y"),N=b(this.$d.months,"M"),P=+this.$d.days||0;this.$d.weeks&&(P+=7*this.$d.weeks);var I=b(P,"D"),B=b(this.$d.hours,"H"),U=b(this.$d.minutes,"M"),z=this.$d.seconds||0;this.$d.milliseconds&&(z+=this.$d.milliseconds/1e3,z=Math.round(1e3*z)/1e3);var G=b(z,"S"),V=T.negative||N.negative||I.negative||B.negative||U.negative||G.negative,J=B.format||U.format||G.format?"T":"",Q=(V?"-":"")+"P"+T.format+N.format+I.format+J+B.format+U.format+G.format;return Q==="P"||Q==="-P"?"P0D":Q},E.toJSON=function(){return this.toISOString()},E.format=function(T){var N=T||"YYYY-MM-DDTHH:mm:ss",P={Y:this.$d.years,YY:s.s(this.$d.years,2,"0"),YYYY:s.s(this.$d.years,4,"0"),M:this.$d.months,MM:s.s(this.$d.months,2,"0"),D:this.$d.days,DD:s.s(this.$d.days,2,"0"),H:this.$d.hours,HH:s.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,"0"),SSS:s.s(this.$d.milliseconds,3,"0")};return N.replace(c,function(I,B){return B||String(P[I])})},E.as=function(T){return this.$ms/f[m(T)]},E.get=function(T){var N=this.$ms,P=m(T);return P==="milliseconds"?N%=1e3:N=P==="weeks"?y(N/f[P]):this.$d[P],N||0},E.add=function(T,N,P){var I;return I=N?T*f[m(N)]:p(T)?T.$ms:g(T,this).$ms,g(this.$ms+I*(P?-1:1),this)},E.subtract=function(T,N){return this.add(T,N,!0)},E.locale=function(T){var N=this.clone();return N.$l=T,N},E.clone=function(){return g(this.$ms,this)},E.humanize=function(T){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!T)},E.valueOf=function(){return this.asMilliseconds()},E.milliseconds=function(){return this.get("milliseconds")},E.asMilliseconds=function(){return this.as("milliseconds")},E.seconds=function(){return this.get("seconds")},E.asSeconds=function(){return this.as("seconds")},E.minutes=function(){return this.get("minutes")},E.asMinutes=function(){return this.as("minutes")},E.hours=function(){return this.get("hours")},E.asHours=function(){return this.as("hours")},E.days=function(){return this.get("days")},E.asDays=function(){return this.as("days")},E.weeks=function(){return this.get("weeks")},E.asWeeks=function(){return this.as("weeks")},E.months=function(){return this.get("months")},E.asMonths=function(){return this.as("months")},E.years=function(){return this.get("years")},E.asYears=function(){return this.as("years")},j}(),C=function(j,E,T){return j.add(E.years()*T,"y").add(E.months()*T,"M").add(E.days()*T,"d").add(E.hours()*T,"h").add(E.minutes()*T,"m").add(E.seconds()*T,"s").add(E.milliseconds()*T,"ms")};return function(j,E,T){n=T,s=T().$utils(),T.duration=function(I,B){var U=T.locale();return g(I,{$l:U},B)},T.isDuration=p;var N=E.prototype.add,P=E.prototype.subtract;E.prototype.add=function(I,B){return p(I)?C(this,I,1):N.bind(this)(I,B)},E.prototype.subtract=function(I,B){return p(I)?C(this,I,-1):P.bind(this)(I,B)}}})})(D9);var Lce=D9.exports;const Bce=In(Lce);ct.extend(Bce);ct.locale("ru");const Fce=t=>{const[e,n]=v.useState(s());function s(){const i=ct(),a=ct(t).diff(i);return a<=0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(a/(1e3*60*60*24)),hours:Math.floor(a/(1e3*60*60)%24),minutes:Math.floor(a/1e3/60%60),seconds:Math.floor(a/1e3%60)}}return v.useEffect(()=>{const i=setTimeout(()=>{n(s())},1e3);return()=>clearTimeout(i)}),e},Ox=t=>t<10?`0${t}`:t,$ce=({date:t})=>{const e=Fce(new Date(t));return console.log(t),r.jsxs("div",{className:oa.CountdownTimerRoot,children:[r.jsxs("span",{className:"text-primary400 text-small",children:["До конца ",r.jsx("br",{})," скидки"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:oa.CountdownTimerItem,children:[r.jsx("span",{className:oa.CountdownTimerValue,children:Ox(e.days)}),r.jsx("span",{className:oa.CountdownTimerName,children:fv(e.days,"день","дня","дней")})]}),r.jsx("div",{className:"text-primary400 text-littleBig",children:":"}),r.jsxs("div",{className:oa.CountdownTimerItem,children:[r.jsx("span",{className:oa.CountdownTimerValue,children:Ox(e.hours)}),r.jsx("span",{className:oa.CountdownTimerName,children:fv(e.hours,"час","часа","часов")})]}),r.jsx("div",{className:"text-primary400 text-littleBig",children:":"}),r.jsxs("div",{className:oa.CountdownTimerItem,children:[r.jsx("span",{className:oa.CountdownTimerValue,children:Ox(e.minutes)}),r.jsx("span",{className:oa.CountdownTimerName,children:"мин."})]}),r.jsx("div",{className:"text-primary400 text-littleBig",children:":"}),r.jsxs("div",{className:oa.CountdownTimerItem,children:[r.jsx("span",{className:oa.CountdownTimerValue,children:Ox(e.seconds)}),r.jsx("span",{className:oa.CountdownTimerName,children:"сек."})]})]})]})},Uce=({initialTime:t=1,onComplete:e=()=>{},children:n})=>{const[s,i]=v.useState(t);return v.useEffect(()=>{if(s===0){e();return}const a=setInterval(()=>{i(o=>o-1)},1e3);return()=>clearInterval(a)},[s,e]),r.jsxs(r.Fragment,{children:[s,n]})},Vn=({children:t,helmet:e,className:n=""})=>r.jsxs(r.Fragment,{children:[e,r.jsxs("div",{className:He("site-container",n),children:[t,r.jsx("footer",{className:"visually-hidden",children:"Недвижимость на inrut.ru"})]})]});var P9={exports:{}},Vce="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zce=Vce,Hce=zce;function I9(){}function M9(){}M9.resetWarningCache=I9;var qce=function(){function t(s,i,a,o,l,c){if(c!==Hce){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:M9,resetWarningCache:I9};return n.PropTypes=n,n};P9.exports=qce();var ly=P9.exports;const jt=In(ly);function Wce(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var O9=v,Gce=Wce(O9);function l6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yce(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Xce=!!(typeof window<"u"&&window.document&&window.document.createElement);function Kce(t,e,n){if(typeof t!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function s(i){return i.displayName||i.name||"Component"}return function(a){if(typeof a!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],l;function c(){l=t(o.map(function(d){return d.props})),u.canUseDOM?e(l):n&&(l=n(l))}var u=function(d){Yce(h,d);function h(){return d.apply(this,arguments)||this}h.peek=function(){return l},h.rewind=function(){if(h.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var g=l;return l=void 0,o=[],g};var f=h.prototype;return f.UNSAFE_componentWillMount=function(){o.push(this),c()},f.componentDidUpdate=function(){c()},f.componentWillUnmount=function(){var g=o.indexOf(this);o.splice(g,1),c()},f.render=function(){return Gce.createElement(a,this.props)},h}(O9.PureComponent);return l6(u,"displayName","SideEffect("+s(a)+")"),l6(u,"canUseDOM",Xce),u}}var Qce=Kce;const Zce=In(Qce);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var c6=Object.getOwnPropertySymbols,Jce=Object.prototype.hasOwnProperty,eue=Object.prototype.propertyIsEnumerable;function tue(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function nue(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var s=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(s.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var sue=nue()?Object.assign:function(t,e){for(var n,s=tue(t),i,a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var o in n)Jce.call(n,o)&&(s[o]=n[o]);if(c6){i=c6(n);for(var l=0;l<i.length;l++)eue.call(n,i[l])&&(s[i[l]]=n[i[l]])}}return s};const rue=In(sue);var dh={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Bt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Bt).map(function(t){return Bt[t]});var Qn={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Jb={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},pv={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},iue=Object.keys(Jb).reduce(function(t,e){return t[Jb[e]]=e,t},{}),aue=[Bt.NOSCRIPT,Bt.SCRIPT,Bt.STYLE],ko="data-react-helmet",oue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lue=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},cue=function(){function t(e,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),Ai=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},uue=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},u6=function(t,e){var n={};for(var s in t)e.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s]);return n},due=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},BE=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},hue=function(e){var n=dp(e,Bt.TITLE),s=dp(e,pv.TITLE_TEMPLATE);if(s&&n)return s.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var i=dp(e,pv.DEFAULT_TITLE);return n||i||void 0},fue=function(e){return dp(e,pv.ON_CHANGE_CLIENT_STATE)||function(){}},qS=function(e,n){return n.filter(function(s){return typeof s[e]<"u"}).map(function(s){return s[e]}).reduce(function(s,i){return Ai({},s,i)},{})},pue=function(e,n){return n.filter(function(s){return typeof s[Bt.BASE]<"u"}).map(function(s){return s[Bt.BASE]}).reverse().reduce(function(s,i){if(!s.length)for(var a=Object.keys(i),o=0;o<a.length;o++){var l=a[o],c=l.toLowerCase();if(e.indexOf(c)!==-1&&i[c])return s.concat(i)}return s},[])},Tg=function(e,n,s){var i={};return s.filter(function(a){return Array.isArray(a[e])?!0:(typeof a[e]<"u"&&yue("Helmet: "+e+' should be of type "Array". Instead found type "'+oue(a[e])+'"'),!1)}).map(function(a){return a[e]}).reverse().reduce(function(a,o){var l={};o.filter(function(f){for(var p=void 0,g=Object.keys(f),m=0;m<g.length;m++){var _=g[m],y=_.toLowerCase();n.indexOf(y)!==-1&&!(p===Qn.REL&&f[p].toLowerCase()==="canonical")&&!(y===Qn.REL&&f[y].toLowerCase()==="stylesheet")&&(p=y),n.indexOf(_)!==-1&&(_===Qn.INNER_HTML||_===Qn.CSS_TEXT||_===Qn.ITEM_PROP)&&(p=_)}if(!p||!f[p])return!1;var x=f[p].toLowerCase();return i[p]||(i[p]={}),l[p]||(l[p]={}),i[p][x]?!1:(l[p][x]=!0,!0)}).reverse().forEach(function(f){return a.push(f)});for(var c=Object.keys(l),u=0;u<c.length;u++){var d=c[u],h=rue({},i[d],l[d]);i[d]=h}return a},[]).reverse()},dp=function(e,n){for(var s=e.length-1;s>=0;s--){var i=e[s];if(i.hasOwnProperty(n))return i[n]}return null},mue=function(e){return{baseTag:pue([Qn.HREF,Qn.TARGET],e),bodyAttributes:qS(dh.BODY,e),defer:dp(e,pv.DEFER),encode:dp(e,pv.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:qS(dh.HTML,e),linkTags:Tg(Bt.LINK,[Qn.REL,Qn.HREF],e),metaTags:Tg(Bt.META,[Qn.NAME,Qn.CHARSET,Qn.HTTPEQUIV,Qn.PROPERTY,Qn.ITEM_PROP],e),noscriptTags:Tg(Bt.NOSCRIPT,[Qn.INNER_HTML],e),onChangeClientState:fue(e),scriptTags:Tg(Bt.SCRIPT,[Qn.SRC,Qn.INNER_HTML],e),styleTags:Tg(Bt.STYLE,[Qn.CSS_TEXT],e),title:hue(e),titleAttributes:qS(dh.TITLE,e)}},FE=function(){var t=Date.now();return function(e){var n=Date.now();n-t>16?(t=n,e(n)):setTimeout(function(){FE(e)},0)}}(),d6=function(e){return clearTimeout(e)},gue=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||FE:ir.requestAnimationFrame||FE,vue=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||d6:ir.cancelAnimationFrame||d6,yue=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},Eg=null,xue=function(e){Eg&&vue(Eg),e.defer?Eg=gue(function(){h6(e,function(){Eg=null})}):(h6(e),Eg=null)},h6=function(e,n){var s=e.baseTag,i=e.bodyAttributes,a=e.htmlAttributes,o=e.linkTags,l=e.metaTags,c=e.noscriptTags,u=e.onChangeClientState,d=e.scriptTags,h=e.styleTags,f=e.title,p=e.titleAttributes;$E(Bt.BODY,i),$E(Bt.HTML,a),bue(f,p);var g={baseTag:gf(Bt.BASE,s),linkTags:gf(Bt.LINK,o),metaTags:gf(Bt.META,l),noscriptTags:gf(Bt.NOSCRIPT,c),scriptTags:gf(Bt.SCRIPT,d),styleTags:gf(Bt.STYLE,h)},m={},_={};Object.keys(g).forEach(function(y){var x=g[y],b=x.newTags,w=x.oldTags;b.length&&(m[y]=b),w.length&&(_[y]=g[y].oldTags)}),n&&n(),u(e,m,_)},R9=function(e){return Array.isArray(e)?e.join(""):e},bue=function(e,n){typeof e<"u"&&document.title!==e&&(document.title=R9(e)),$E(Bt.TITLE,n)},$E=function(e,n){var s=document.getElementsByTagName(e)[0];if(s){for(var i=s.getAttribute(ko),a=i?i.split(","):[],o=[].concat(a),l=Object.keys(n),c=0;c<l.length;c++){var u=l[c],d=n[u]||"";s.getAttribute(u)!==d&&s.setAttribute(u,d),a.indexOf(u)===-1&&a.push(u);var h=o.indexOf(u);h!==-1&&o.splice(h,1)}for(var f=o.length-1;f>=0;f--)s.removeAttribute(o[f]);a.length===o.length?s.removeAttribute(ko):s.getAttribute(ko)!==l.join(",")&&s.setAttribute(ko,l.join(","))}},gf=function(e,n){var s=document.head||document.querySelector(Bt.HEAD),i=s.querySelectorAll(e+"["+ko+"]"),a=Array.prototype.slice.call(i),o=[],l=void 0;return n&&n.length&&n.forEach(function(c){var u=document.createElement(e);for(var d in c)if(c.hasOwnProperty(d))if(d===Qn.INNER_HTML)u.innerHTML=c.innerHTML;else if(d===Qn.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{var h=typeof c[d]>"u"?"":c[d];u.setAttribute(d,h)}u.setAttribute(ko,"true"),a.some(function(f,p){return l=p,u.isEqualNode(f)})?a.splice(l,1):o.push(u)}),a.forEach(function(c){return c.parentNode.removeChild(c)}),o.forEach(function(c){return s.appendChild(c)}),{oldTags:a,newTags:o}},L9=function(e){return Object.keys(e).reduce(function(n,s){var i=typeof e[s]<"u"?s+'="'+e[s]+'"':""+s;return n?n+" "+i:i},"")},_ue=function(e,n,s,i){var a=L9(s),o=R9(n);return a?"<"+e+" "+ko+'="true" '+a+">"+BE(o,i)+"</"+e+">":"<"+e+" "+ko+'="true">'+BE(o,i)+"</"+e+">"},wue=function(e,n,s){return n.reduce(function(i,a){var o=Object.keys(a).filter(function(u){return!(u===Qn.INNER_HTML||u===Qn.CSS_TEXT)}).reduce(function(u,d){var h=typeof a[d]>"u"?d:d+'="'+BE(a[d],s)+'"';return u?u+" "+h:h},""),l=a.innerHTML||a.cssText||"",c=aue.indexOf(e)===-1;return i+"<"+e+" "+ko+'="true" '+o+(c?"/>":">"+l+"</"+e+">")},"")},B9=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(s,i){return s[Jb[i]||i]=e[i],s},n)},Cue=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(s,i){return s[iue[i]||i]=e[i],s},n)},Sue=function(e,n,s){var i,a=(i={key:n},i[ko]=!0,i),o=B9(s,a);return[Xe.createElement(Bt.TITLE,o,n)]},jue=function(e,n){return n.map(function(s,i){var a,o=(a={key:i},a[ko]=!0,a);return Object.keys(s).forEach(function(l){var c=Jb[l]||l;if(c===Qn.INNER_HTML||c===Qn.CSS_TEXT){var u=s.innerHTML||s.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[c]=s[l]}),Xe.createElement(e,o)})},Zl=function(e,n,s){switch(e){case Bt.TITLE:return{toComponent:function(){return Sue(e,n.title,n.titleAttributes)},toString:function(){return _ue(e,n.title,n.titleAttributes,s)}};case dh.BODY:case dh.HTML:return{toComponent:function(){return B9(n)},toString:function(){return L9(n)}};default:return{toComponent:function(){return jue(e,n)},toString:function(){return wue(e,n,s)}}}},F9=function(e){var n=e.baseTag,s=e.bodyAttributes,i=e.encode,a=e.htmlAttributes,o=e.linkTags,l=e.metaTags,c=e.noscriptTags,u=e.scriptTags,d=e.styleTags,h=e.title,f=h===void 0?"":h,p=e.titleAttributes;return{base:Zl(Bt.BASE,n,i),bodyAttributes:Zl(dh.BODY,s,i),htmlAttributes:Zl(dh.HTML,a,i),link:Zl(Bt.LINK,o,i),meta:Zl(Bt.META,l,i),noscript:Zl(Bt.NOSCRIPT,c,i),script:Zl(Bt.SCRIPT,u,i),style:Zl(Bt.STYLE,d,i),title:Zl(Bt.TITLE,{title:f,titleAttributes:p},i)}},Tue=function(e){var n,s;return s=n=function(i){uue(a,i);function a(){return lue(this,a),due(this,i.apply(this,arguments))}return a.prototype.shouldComponentUpdate=function(l){return!e9(this.props,l)},a.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case Bt.SCRIPT:case Bt.NOSCRIPT:return{innerHTML:c};case Bt.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},a.prototype.flattenArrayTypeChildren=function(l){var c,u=l.child,d=l.arrayTypeChildren,h=l.newChildProps,f=l.nestedChildren;return Ai({},d,(c={},c[u.type]=[].concat(d[u.type]||[],[Ai({},h,this.mapNestedChildrenToProps(u,f))]),c))},a.prototype.mapObjectTypeChildren=function(l){var c,u,d=l.child,h=l.newProps,f=l.newChildProps,p=l.nestedChildren;switch(d.type){case Bt.TITLE:return Ai({},h,(c={},c[d.type]=p,c.titleAttributes=Ai({},f),c));case Bt.BODY:return Ai({},h,{bodyAttributes:Ai({},f)});case Bt.HTML:return Ai({},h,{htmlAttributes:Ai({},f)})}return Ai({},h,(u={},u[d.type]=Ai({},f),u))},a.prototype.mapArrayTypeChildrenToProps=function(l,c){var u=Ai({},c);return Object.keys(l).forEach(function(d){var h;u=Ai({},u,(h={},h[d]=l[d],h))}),u},a.prototype.warnOnInvalidChildren=function(l,c){return!0},a.prototype.mapChildrenToProps=function(l,c){var u=this,d={};return Xe.Children.forEach(l,function(h){if(!(!h||!h.props)){var f=h.props,p=f.children,g=u6(f,["children"]),m=Cue(g);switch(u.warnOnInvalidChildren(h,p),h.type){case Bt.LINK:case Bt.META:case Bt.NOSCRIPT:case Bt.SCRIPT:case Bt.STYLE:d=u.flattenArrayTypeChildren({child:h,arrayTypeChildren:d,newChildProps:m,nestedChildren:p});break;default:c=u.mapObjectTypeChildren({child:h,newProps:c,newChildProps:m,nestedChildren:p});break}}}),c=this.mapArrayTypeChildrenToProps(d,c),c},a.prototype.render=function(){var l=this.props,c=l.children,u=u6(l,["children"]),d=Ai({},u);return c&&(d=this.mapChildrenToProps(c,d)),Xe.createElement(e,d)},cue(a,null,[{key:"canUseDOM",set:function(l){e.canUseDOM=l}}]),a}(Xe.Component),n.propTypes={base:jt.object,bodyAttributes:jt.object,children:jt.oneOfType([jt.arrayOf(jt.node),jt.node]),defaultTitle:jt.string,defer:jt.bool,encodeSpecialCharacters:jt.bool,htmlAttributes:jt.object,link:jt.arrayOf(jt.object),meta:jt.arrayOf(jt.object),noscript:jt.arrayOf(jt.object),onChangeClientState:jt.func,script:jt.arrayOf(jt.object),style:jt.arrayOf(jt.object),title:jt.string,titleAttributes:jt.object,titleTemplate:jt.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=e.peek,n.rewind=function(){var i=e.rewind();return i||(i=F9({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},s},Eue=function(){return null},Nue=Zce(mue,xue,F9)(Eue),dn=Tue(Nue);dn.renderStatic=dn.rewind;const kue="_header_1whab_1",Aue="_headerDark_1whab_16",Due="_headerActions_1whab_16",Pue="_headerAction_1whab_16",Iue="_headerNav_1whab_30",Mue="_headerNavName_1whab_33",Oue="_headerActionsContainer_1whab_42",Rue="_headerCity_1whab_78",Lue="_headerActionsList_1whab_88",Bue="_logo_1whab_99",Fue="_headerNavContainer_1whab_121",$ue="_headerNavList_1whab_128",Uue="_headerNavItem_1whab_135",zue="_headerDropdown_1whab_171",Hue="_headerDropdownActive_1whab_189",que="_headerDropdownContent_1whab_195",Wue="_headerDropdownRow_1whab_205",Gue="_headerDropdownBanner_1whab_211",Yue="_notifCount_1whab_218",Xue="_MenuBtn_1whab_234",Kue="_MenuBtnActive_1whab_245",Que="_burger_1whab_249",Zue="_burgerLine_1whab_281",Jue="_Menu_1whab_234",Kt={header:kue,headerDark:Aue,headerActions:Due,headerAction:Pue,headerNav:Iue,headerNavName:Mue,headerActionsContainer:Oue,headerCity:Rue,headerActionsList:Lue,logo:Bue,headerNavContainer:Fue,headerNavList:$ue,headerNavItem:Uue,headerDropdown:zue,headerDropdownActive:Hue,headerDropdownContent:que,headerDropdownRow:Wue,headerDropdownBanner:Gue,notifCount:Yue,MenuBtn:Xue,MenuBtnActive:Kue,burger:Que,burgerLine:Zue,Menu:Jue},cw=t=>typeof t!="string"?"":t.charAt(0).toUpperCase()+t.slice(1),$9=(t,e=!1)=>{if(typeof t!="string")return"";let n=t.charAt(0);return e&&(n=n.toUpperCase()),n},uw=(t,e)=>`${cw(t||"")} ${e?`${$9(e||"",!0)}.`:""}`,ks=(...t)=>t.filter(e=>e).map(e=>{if(!e)return;const n=e.trim();return n.charAt(0).toUpperCase()+n.slice(1)}).join(" "),To=t=>parseFloat(t.replace(/\s+/g,"")),$s=async(t,e)=>{try{return Me("/api/dialogs/get-dialog-id",t).then(n=>n.data.result)}catch{throw new Error("error")}},e4=()=>{window.open(Ji.chat,"_blank")},xr=(t,e)=>{window.open(`${Ji.chat}?dialog=${t}${e?"&tag="+e:""}`,"_blank")},dw=()=>{const[,,t]=ur(),e=Dt();return{logout:async()=>{try{await Me("/api/logout"),t("loggedIn",{path:"/"}),t("access_token",{path:"/"}),e(Pb({})),e(Ib([]))}catch(s){console.log(s)}}}},ede=({condition:t,set:e})=>{var d,h,f,p,g,m,_;const[n]=ur(),s=ue(Ot),i=ue(Ks),a=Dt(),o=ue(rt),{logout:l}=dw(),c=(d=s.role)==null?void 0:d.id,u=()=>{n.loggedIn&&l().then(()=>{setTimeout(()=>{window.location.pathname!==ke.loginPhone&&(window.location.href=ke.home)},100)})};return r.jsxs(gt,{options:{overlayClassNames:"_right md1:!top-[50px]",modalClassNames:"mmd1:!w-[420px]",modalContentClassNames:"mmd1:!px-5 md1:!pt-8"},set:e,condition:t,closeBtn:o,children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(Nn,{src:s.image,title:ks(s.name,s.surname),size:72}),r.jsx("h3",{className:"title-3 mt-3",children:`${s.surname||""} ${s.name||""}`}),r.jsx("p",{className:"mt-1.5 text-primary400",children:(h=s.phone)==null?void 0:h.replace(/(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})/,"$1 ($2) $3-$4-$5")})]}),r.jsx("div",{className:"mt-2 flex justify-center",children:r.jsx(Ke,{to:Ji.profile.edit,onClick:()=>e(!1),className:"blue-link",children:"Управление аккаунтом"})}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"border-top-lightgray",children:[c===sn.id&&r.jsx(_e,{variant:"secondary",size:"Small",Selector:"div",className:"mt-3 mb-2",children:r.jsxs(Ke,{to:Fn.purchase.create,onClick:()=>e(!1),className:"w-full h-full flex items-center justify-center gap-2",children:[r.jsx(Xi,{width:14,height:14}),"Разместить заявку на покупку"]})}),c===pn.id&&r.jsxs(r.Fragment,{children:[r.jsx(Ke,{to:ht.dashboardAdmin,onClick:()=>e(!1),className:"w-full border-top-lightgray py-2",children:r.jsxs(Gt,{children:[r.jsx(V7,{}),r.jsx("span",{children:"Создание/настройка системы"})]})}),r.jsx(Ke,{to:"/",onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Мои объекты"}),r.jsx(uu,{children:s.objects_count||0})]})}),r.jsx(Ke,{to:ke.purchase.list,onClick:()=>e(!1),className:"w-full py-1",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Все заявки на покупку"})]})}),r.jsx(Ke,{to:ke.purchase.list,onClick:()=>e(!1),className:"w-full py-1",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Покупатели"})]})}),r.jsx(Ke,{to:"/",onClick:()=>e(!1),className:"w-full py-1",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Запрос на просмотр"})]})})]}),c===Wt.id&&r.jsx(_e,{variant:"secondary",size:"Small",Selector:"div",className:"mt-3 mb-2",children:r.jsx(Ke,{to:At.home,onClick:()=>e(!1),className:"w-full h-full flex items-center justify-center gap-2",children:"Кабинет"})}),r.jsx("button",{onClick:()=>{i?e4():a(Bs(!0))},className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Чат"}),r.jsx(uu,{children:((f=s.counts)==null?void 0:f.dialogs)||0})]})}),c===sn.id&&r.jsxs(r.Fragment,{children:[r.jsx(Ke,{to:Fn.view,onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(OI,{}),r.jsx("span",{children:"Записи на просмотр"}),r.jsx(uu,{children:((p=s.counts)==null?void 0:p.suggestions)||0})]})}),r.jsx(Ke,{to:Fn.walletPage,onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(sae,{}),r.jsx("span",{children:"Кошелёк"}),r.jsxs(uu,{children:[s.purchase_count||0," ₽"]})]})}),r.jsx(Ke,{to:Fn.purchase.list,onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(OI,{}),r.jsx("span",{children:"Мои заявки на покупку"}),r.jsx(uu,{children:((g=s.counts)==null?void 0:g.orders)||0})]})}),r.jsxs(Gt,{className:"flex items-center group",children:[r.jsx(Oie,{}),r.jsx("span",{children:"Уведомления"}),r.jsx(uu,{children:((m=s.counts)==null?void 0:m.notifications)||0})]}),r.jsx(Ke,{to:ke.favorites,onClick:()=>e(!1),className:"w-full py-1",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ku,{}),r.jsx("span",{children:"Избранное"})]})}),r.jsx(Ke,{to:ke.comparison,onClick:()=>e(!1),className:"w-full py-1",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ov,{}),r.jsx("span",{children:"Сравнение"})]})})]}),c===Wt.id&&r.jsxs(r.Fragment,{children:[r.jsx(Ke,{to:At.object.list,onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Мои объекты"}),r.jsx(uu,{children:((_=s.counts)==null?void 0:_.objects)||0})]})}),r.jsx("a",{href:At.purchase.list_buyers,className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Мои покупатели"})]})}),r.jsx("a",{href:At.purchase.list_all,className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Все заявки на покупку"})]})}),r.jsx(Ke,{to:At.view,onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Записи на просмотр"})]})}),r.jsx(Ke,{to:At.calendar_view,onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Календарь"})]})}),r.jsx(Ke,{to:At.specialists,onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Менеджеры отдела продаж"})]})}),r.jsx(Ke,{to:At.objects_developer,onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Объекты застройщика"})]})}),r.jsx(Ke,{to:At.wallet,onClick:()=>e(!1),className:"w-full py-1 group",children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(ls,{}),r.jsx("span",{children:"Кошелёк"})]})})]})]}),r.jsx("button",{className:"w-full border-top-lightgray py-2",onClick:u,children:r.jsxs(Gt,{children:[r.jsx(Qie,{}),r.jsx("span",{children:"Выйти"})]})})]})]})},U9="data:image/svg+xml,%3csvg%20width='53'%20height='26'%20viewBox='0%200%2053%2026'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1_2)'%3e%3cpath%20d='M2.92%2021V4.68H5.848V21H2.92ZM9.3814%2021V9.384H12.0694V10.92C12.4534%2010.376%2012.9654%209.944%2013.6054%209.624C14.2614%209.304%2014.9894%209.144%2015.7894%209.144C17.0534%209.144%2018.0774%209.496%2018.8614%2010.2C19.6454%2010.904%2020.0374%2011.928%2020.0374%2013.272V21H17.2774V13.824C17.2774%2013.088%2017.0774%2012.528%2016.6774%2012.144C16.2774%2011.744%2015.6694%2011.544%2014.8534%2011.544C14.1334%2011.544%2013.5014%2011.76%2012.9574%2012.192C12.4134%2012.624%2012.1414%2013.224%2012.1414%2013.992V21H9.3814ZM23.1393%2021V9.384H25.8033V10.92C26.2033%2010.312%2026.6993%209.904%2027.2913%209.696C27.8993%209.488%2028.4753%209.384%2029.0193%209.384H29.9553V11.88H28.9713C28.1873%2011.88%2027.4833%2012.04%2026.8593%2012.36C26.2353%2012.664%2025.9233%2013.152%2025.9233%2013.824V21H23.1393ZM39.5883%2021V19.512C39.1883%2020.04%2038.6523%2020.464%2037.9803%2020.784C37.3243%2021.088%2036.5963%2021.24%2035.7963%2021.24C34.5323%2021.24%2033.5243%2020.888%2032.7723%2020.184C32.0203%2019.48%2031.6443%2018.456%2031.6443%2017.112V9.384H34.4043V16.56C34.4043%2017.28%2034.5963%2017.84%2034.9803%2018.24C35.3803%2018.64%2035.9803%2018.84%2036.7803%2018.84C37.5483%2018.84%2038.1883%2018.616%2038.7003%2018.168C39.2123%2017.72%2039.4683%2017.128%2039.4683%2016.392V9.384H42.2283V21H39.5883ZM52.291%2021H50.371C48.803%2021%2047.6992%2020.672%2047.0592%2020.016C46.4192%2019.344%2046.0992%2018.24%2046.0992%2016.704V11.832H44.2272V9.384H46.0992V6.432H48.859V9.384H52.219V11.832H48.859V16.656C48.859%2017.36%2049.003%2017.856%2049.291%2018.144C49.595%2018.416%2050.043%2018.552%2050.635%2018.552H52.291V21Z'%20fill='%23006CEE'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_1_2'%3e%3crect%20width='53'%20height='26'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",tde=()=>r.jsx("a",{href:ke.home,className:Kt.logo,children:r.jsx("img",{loading:"lazy",src:U9,width:"60",height:"25",alt:"Inrut"})});function ds(){return ds=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ds.apply(null,arguments)}const nde=Object.freeze(Object.defineProperty({__proto__:null,get default(){return ds}},Symbol.toStringTag,{value:"Module"}));function V9(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.includes(s))continue;n[s]=t[s]}return n}function UE(t,e){return UE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},UE(t,e)}function z9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,UE(t,e)}function sde(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function rde(t,e){t.classList?t.classList.add(e):sde(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function f6(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ide(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=f6(t.className,e):t.setAttribute("class",f6(t.className&&t.className.baseVal||"",e))}const p6={disabled:!1},H9=Xe.createContext(null);var q9=function(e){return e.scrollTop},Jg="unmounted",Ud="exited",Vd="entering",Of="entered",VE="exiting",Bc=function(t){z9(e,t);function e(s,i){var a;a=t.call(this,s,i)||this;var o=i,l=o&&!o.isMounting?s.enter:s.appear,c;return a.appearStatus=null,s.in?l?(c=Ud,a.appearStatus=Vd):c=Of:s.unmountOnExit||s.mountOnEnter?c=Jg:c=Ud,a.state={status:c},a.nextCallback=null,a}e.getDerivedStateFromProps=function(i,a){var o=i.in;return o&&a.status===Jg?{status:Ud}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var a=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Vd&&o!==Of&&(a=Vd):(o===Vd||o===Of)&&(a=VE)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,a,o,l;return a=o=l=i,i!=null&&typeof i!="number"&&(a=i.exit,o=i.enter,l=i.appear!==void 0?i.appear:o),{exit:a,enter:o,appear:l}},n.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null)if(this.cancelNextCallback(),a===Vd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Sx.findDOMNode(this);o&&q9(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ud&&this.setState({status:Jg})},n.performEnter=function(i){var a=this,o=this.props.enter,l=this.context?this.context.isMounting:i,c=this.props.nodeRef?[l]:[Sx.findDOMNode(this),l],u=c[0],d=c[1],h=this.getTimeouts(),f=l?h.appear:h.enter;if(!i&&!o||p6.disabled){this.safeSetState({status:Of},function(){a.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:Vd},function(){a.props.onEntering(u,d),a.onTransitionEnd(f,function(){a.safeSetState({status:Of},function(){a.props.onEntered(u,d)})})})},n.performExit=function(){var i=this,a=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:Sx.findDOMNode(this);if(!a||p6.disabled){this.safeSetState({status:Ud},function(){i.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:VE},function(){i.props.onExiting(l),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Ud},function(){i.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},n.setNextCallback=function(i){var a=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,a.nextCallback=null,i(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,a){this.setNextCallback(a);var o=this.props.nodeRef?this.props.nodeRef.current:Sx.findDOMNode(this),l=i==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=c[0],d=c[1];this.props.addEndListener(u,d)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Jg)return null;var a=this.props,o=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var l=V9(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Xe.createElement(H9.Provider,{value:null},typeof o=="function"?o(i,l):Xe.cloneElement(Xe.Children.only(o),l))},e}(Xe.Component);Bc.contextType=H9;Bc.propTypes={};function vf(){}Bc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vf,onEntering:vf,onEntered:vf,onExit:vf,onExiting:vf,onExited:vf};Bc.UNMOUNTED=Jg;Bc.EXITED=Ud;Bc.ENTERING=Vd;Bc.ENTERED=Of;Bc.EXITING=VE;var ade=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return rde(e,s)})},WS=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return ide(e,s)})},cy=function(t){z9(e,t);function e(){for(var s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return s=t.call.apply(t,[this].concat(a))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(l,c){var u=s.resolveArguments(l,c),d=u[0],h=u[1];s.removeClasses(d,"exit"),s.addClass(d,h?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(l,c)},s.onEntering=function(l,c){var u=s.resolveArguments(l,c),d=u[0],h=u[1],f=h?"appear":"enter";s.addClass(d,f,"active"),s.props.onEntering&&s.props.onEntering(l,c)},s.onEntered=function(l,c){var u=s.resolveArguments(l,c),d=u[0],h=u[1],f=h?"appear":"enter";s.removeClasses(d,f),s.addClass(d,f,"done"),s.props.onEntered&&s.props.onEntered(l,c)},s.onExit=function(l){var c=s.resolveArguments(l),u=c[0];s.removeClasses(u,"appear"),s.removeClasses(u,"enter"),s.addClass(u,"exit","base"),s.props.onExit&&s.props.onExit(l)},s.onExiting=function(l){var c=s.resolveArguments(l),u=c[0];s.addClass(u,"exit","active"),s.props.onExiting&&s.props.onExiting(l)},s.onExited=function(l){var c=s.resolveArguments(l),u=c[0];s.removeClasses(u,"exit"),s.addClass(u,"exit","done"),s.props.onExited&&s.props.onExited(l)},s.resolveArguments=function(l,c){return s.props.nodeRef?[s.props.nodeRef.current,l]:[l,c]},s.getClassNames=function(l){var c=s.props.classNames,u=typeof c=="string",d=u&&c?c+"-":"",h=u?""+d+l:c[l],f=u?h+"-active":c[l+"Active"],p=u?h+"-done":c[l+"Done"];return{baseClassName:h,activeClassName:f,doneClassName:p}},s}var n=e.prototype;return n.addClass=function(i,a,o){var l=this.getClassNames(a)[o+"ClassName"],c=this.getClassNames("enter"),u=c.doneClassName;a==="appear"&&o==="done"&&u&&(l+=" "+u),o==="active"&&i&&q9(i),l&&(this.appliedClasses[a][o]=l,ade(i,l))},n.removeClasses=function(i,a){var o=this.appliedClasses[a],l=o.base,c=o.active,u=o.done;this.appliedClasses[a]={},l&&WS(i,l),c&&WS(i,c),u&&WS(i,u)},n.render=function(){var i=this.props;i.classNames;var a=V9(i,["classNames"]);return Xe.createElement(Bc,ds({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(Xe.Component);cy.defaultProps={classNames:""};cy.propTypes={};const W9=({data:t,multiple:e=!1,defaultValue:n=[],classNameItem:s=""})=>{const[i,a]=v.useState(n),o=v.useRef(null),l=c=>{i.includes(c)?a(e?i.filter(u=>u!==c):[]):a(e?[...i,c]:[c])};return r.jsx(r.Fragment,{children:t.filter(c=>c).map((c,u)=>r.jsxs("div",{className:`${i.includes(u)?"_active":""} ${s}`,children:[Xe.cloneElement(c.button,{className:`${c.button.props.className||""} ${i.includes(u)?"_active":""}`,onClick:()=>l(u)}),r.jsx(cy,{nodeRef:o,in:i.includes(u),classNames:"_open-select",timeout:200,unmountOnExit:!0,children:r.jsx("div",{ref:o,children:c.body})})]},u))})},uy=v.createContext(),hw=v.createContext(),dd=v.createContext(),dy=v.createContext(),$o=v.createContext(),G9=v.createContext();v.createContext();const Fc=v.createContext(),hy=v.createContext(),fy=v.createContext(),Y9=v.createContext(),fw=v.createContext(),t4=v.createContext();v.createContext();const n4=v.createContext(),ym=v.createContext(),pw=v.createContext(),co=v.createContext(),Il=v.createContext(),Pn=v.createContext(),py=v.createContext(),Ml=v.createContext(),ode="_CityModalRoot_1jnv8_1",lde="_CityModalItems_1jnv8_10",cde="_CityModalItem_1jnv8_10",ude="_CityModalSave_1jnv8_26",Ng={CityModalRoot:ode,CityModalItems:lde,CityModalItem:cde,CityModalSave:ude},hd=t=>{var e;return((e=t==null?void 0:t.role)==null?void 0:e.id)===Wt.id},xm=t=>{var e;return((e=t==null?void 0:t.role)==null?void 0:e.id)===sn.id},Si=t=>{var e;return((e=t==null?void 0:t.role)==null?void 0:e.id)===pn.id},X9=({condition:t,set:e,onSubmit:n=()=>{},currentCity:s})=>{const i=ue(Ot),a=Si(i),o=ue(Qs),[l,c]=v.useState(s);v.useEffect(()=>{c(s)},[s]);const u=d=>{c(d)};return r.jsxs(gt,{options:{overlayClassNames:"_left",modalClassNames:Ng.CityModalRoot,modalContentClassNames:"md1:flex md1:flex-col"},set:e,condition:t,children:[r.jsx("h2",{className:"title-2 modal-title-gap",children:"Выбор города"}),r.jsxs("div",{className:"flex flex-col flex-grow",children:[r.jsx("div",{className:Ng.CityModalItems,children:a?o.map(d=>r.jsx(_e,{onClick:()=>u(d),active:d.name===l.name,className:`${Ng.CityModalItem}`,variant:"secondary",children:d.name},d.id)):o.map(d=>r.jsx(_e,{onClick:()=>u(d),active:d.name===l.name,className:`${Ng.CityModalItem}`,variant:"secondary",children:d.name},d.id))}),r.jsx("div",{className:"mt-8 pt-6 border-top-lightgray md1:mt-auto md1:w-full",children:r.jsx(_e,{className:Ng.CityModalSave,onClick:()=>{if(Ye(l))return;s.id===l.id&&e(!1);const d=o.find(h=>h.id===l.id);n(d)},children:"Сохранить"})})]})]})},m6=()=>{const{isDesktop:t,currentCity:e,popupCityOpen:n,setPopupCityOpen:s}=v.useContext(uy),i=Dt(),a=ue(Ci),o=l=>{l&&Me("/api/city/get-info",{city:l.id}).then(c=>{const u={id:l.id,name:l.name,data:c.data,geo:[l.latitude,l.longitude]};localStorage.setItem("cityData",JSON.stringify(u)),i(oE(u)),s(!1),window.location.reload()})};return r.jsxs("div",{className:Kt.headerCity,children:[r.jsxs("button",{className:`${Kt.headerAction} md1:!p-0 w-full`,onClick:()=>s(!0),children:[r.jsxs("div",{className:"w-full gap-2.5 flex items-center",children:[r.jsx(wl,{width:12,height:14,className:"md1:!fill-dark"}),r.jsx("span",{className:"md1:font-medium md1:!text-dark",children:e||"Город не выбран"})]}),!t&&r.jsx("span",{className:"blue-link !font-normal",children:"Изменить"})]}),r.jsx(Ze,{condition:n,children:r.jsx(X9,{onSubmit:o,currentCity:a,condition:n,set:s})})]})},dde="_BlockPersonalDiscountWrapper_950w0_1",hde={BlockPersonalDiscountWrapper:dde},s4=({data:t={},className:e="",imageFit:n="cover"})=>{var i,a;const s=Ye(t.images)?((a=(i=t.gallery)==null?void 0:i[0])==null?void 0:a.images)||[]:t.images;return r.jsxs("article",{className:`flex gap-4 relative ${e}`,children:[r.jsx("a",{href:t.type==="building"?`${ke.building}${t.id}`:`${ke.apartment}${t.id}`,className:"CardLinkElement"}),r.jsx("img",{src:qt((s==null?void 0:s[0])||""),className:`w-[65px] h-[65px] rounded-xl ${n==="contain"?"object-contain":"object-cover"}`,width:60,height:60,alt:""}),r.jsxs("div",{className:"flex flex-col gap-1",children:[!!t.title&&r.jsx("p",{children:t.title}),!!t.address&&r.jsx("p",{children:t.address}),!!t.deadline&&r.jsxs("p",{children:["Срок сдачи: ",t.deadline]})]})]})},r4=({data:t,mainData:e={},variant:n="default"})=>{const s=ct(ct.unix(t.valid_till)).format("DD.MM.YYYY"),i=ct().format("DD.MM.YYYY"),a={price:e.minPrice||e.price,title:e.title||e.name,address:e.address,deadline:e.deadline,firstImage:e.gallery?e.gallery[0].images[0]:e.images[0],discount:`${t.type==="price"?`${pt(t.discount||0)} ₽`:t.type==="prc"?`-${t.discount||0} %`:""}`};return r.jsxs("div",{className:`${n==="default"?"p-2":"white-block"}`,children:[r.jsx("div",{className:hde.BlockPersonalDiscountWrapper,children:r.jsxs("div",{children:[r.jsx("h2",{className:`mb-5 ${n==="default"?"title-3":"title-2"}`,children:t.type==="special-condition"?r.jsxs(r.Fragment,{children:['Ваш персональный подарок "',t.special_condition.name,'"']}):r.jsxs(r.Fragment,{children:["Ваша персональная скидка ",`${t.type==="price"?`${pt(t.discount)} ₽`:`-${t.discount} %`}`]})}),r.jsx(s4,{className:"mb-4",data:{...a,type:"building",images:[qt(ew(a.firstImage)?a.firstImage.image:a.firstImage)]}}),(t.type==="price"||t.type==="prc")&&r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"font-medium mt-4",children:"Застройщик предлагает вам дополнительную скидку"}),r.jsxs("div",{className:"flex flex-col gap-3 my-4",children:[r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{children:"Обычная цена"}),r.jsxs("span",{children:[pt(a.price||0)," ₽"]})]}),r.jsxs(vn,{justifyBetween:!0,color:"blue",children:[r.jsx("span",{children:t.type==="price"?"Ваша скидка":`Ваши -${t.discount} %`}),r.jsxs("span",{children:[t.type==="price"?pt(t.discount):pt(a.price/100*t.discount)||0," ₽"]})]}),r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{children:"Цена для вас"}),r.jsx("span",{children:t.type==="price"?`${pt(a.price-t.discount||0)} ₽`:`${pt(a.price-a.price/100*t.discount)} ₽`})]})]})]}),s===i&&r.jsx("div",{className:"text-red font-medium",children:"Предложение действует последний день"}),s!==i&&r.jsxs("div",{className:"font-medium",children:["Предложение действует до ",s]}),t.type==="special-condition"&&r.jsx("a",{href:t.special_condition.link,className:"blue-link mt-2",children:"Подробнее"}),t.author&&r.jsx(Vs,{avatar:t.author.avatar_url,name:ks(t.author.name,t.author.surname),pos:r.jsxs(r.Fragment,{children:["Отдел продаж   ",r.jsxs("span",{className:"text-dark font-medium",children:['"',e.developer.name,'"']})]}),centered:!0,className:"mt-8"})]})}),n==="default"?r.jsx(Ke,{to:"#",className:"blue-link mt-6",children:"Смотреть полностью"}):"",r.jsx(_e,{variant:"secondary",className:"w-full mt-4 relative z-10",onClick:()=>{Me("/api/metric",{type:"replied_to_special_offer",metricable_type:t.property_type==="complex"?"App\\Models\\Building":"App\\Models\\Apartment",metricable_id:t.object_id,discount_id:t.id}).then(o=>{console.log(o)})},children:"Забрать"})]})},fde=({condition:t,set:e,data:n=[]})=>{const[s,i]=v.useState([]);console.log(n);const a=o=>{s.includes(o)||(i(l=>[...l,o]),Me(`/api/notification/read/${o}`))};return r.jsxs(gt,{options:{overlayClassNames:"_right",modalClassNames:"!max-w-[650px]"},set:e,condition:t,children:[r.jsx("h2",{className:"title-2 modal-title-gap",children:"Уведомления"}),n.length===0?r.jsx("p",{className:"text-primary400",children:"Новых уведомлений нет"}):r.jsx("div",{className:"flex flex-col",children:n.map(o=>r.jsxs("article",{onMouseEnter:()=>a(o.id),className:"relative mb-6 pb-6 border-bottom-primary100 [&:last-child]:!mb-0 [&:last-child]:!pb-0 [&:last-child]:!border-none",children:[r.jsx(Ke,{to:o.notificationable_type==="App\\Models\\Building"?`${ke.building}${o.info.id}`:`${ke.apartment}${o.info.id}`,className:"CardLinkElement"}),r.jsx("p",{className:"text-verySmall mb-1 font-medium",children:ct(o.updated_at).format("DD.MM.YYYY")}),o.discount?r.jsx(r4,{data:o.discount,mainData:o.info}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"title-4 mb-2",children:o.title}),r.jsx("p",{children:o.description})]})]},o.id))})]})},K9=t=>{const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="string"&&(s.startsWith("[")||s.startsWith("{")))try{e[n]=JSON.parse(s)}catch{e[n]=s}else e[n]=s}return e},pde=()=>{var u,d;const{isDesktop:t,userInfo:e}=v.useContext(uy),[n,s]=v.useState([]),[i,a]=v.useState(!1),o=ue(Ks),l=Dt();v.useEffect(()=>{Ye(e)||Ue("/api/notifications/new").then(h=>{const f=h.data.map(p=>({id:p.id,updated_at:p.updated_at,notificationable_type:p.notificationable_type,type:p.notificationable_type==="App\\Models\\Building"?"building":p.notificationable_type==="App\\Models\\Apartment"?"apartment":"",discount:p.discount?{id:p.discount.id,property_type:p.discount.discountable_type==="App\\Models\\Building"?"complex":"apartment",type:p.discount.is_absolute?"price":p.discount.is_special_condition?"special-condition":"prc",object_id:p.discount.discountable_id,valid_till:p.discount.valid_till,discount:p.discount.discount,author:p.discount.author,special_condition:p.notificationable.special_conditions?Object.values(JSON.parse(h.data[0].notificationable.special_conditions))[0]:null}:null,info:K9(p.notificationable),title:p.title,description:p.description}));s(f)})},[e]);const c=[t?{textTooltip:"Чат",mobileVisible:!0,body:r.jsxs("button",{className:`${Kt.headerAction} relative`,onClick:()=>{o?e4():l(Bs(!0))},children:[!!((u=e.counts)!=null&&u.dialogs)&&r.jsx("div",{className:Kt.notifCount,children:e.counts.dialogs}),r.jsx(vm,{width:16,height:16})]})}:{},{textTooltip:"Уведомления",mobileVisible:!0,body:r.jsxs("button",{className:`${Kt.headerAction} relative`,onClick:()=>a(!0),children:[!!((d=e.counts)!=null&&d.notifications)&&r.jsx("div",{className:Kt.notifCount,children:e.counts.notifications}),r.jsx(Mie,{width:16,height:16})]})},{mobileVisible:!0,textTooltip:"Избранное",body:r.jsx(Ke,{to:ke.favorites,className:`${Kt.headerAction}`,children:r.jsx(Rie,{width:16,height:16})})},{mobileVisible:!1,textTooltip:"Сравнение",body:r.jsx(Ke,{to:ke.comparison,className:`${Kt.headerAction}`,children:r.jsx(ov,{width:16,height:16})})}];return r.jsxs(r.Fragment,{children:[c.map((h,f)=>{if(!(!h.mobileVisible&&!t))return r.jsx($t,{color:"dark",ElementTarget:()=>h.body,classNameTarget:"w-full h-full",placement:"bottom",children:h.textTooltip},f)}),r.jsx(Ze,{condition:i,set:a,children:r.jsx(fde,{condition:i,set:a,data:n})})]})},Q9=(t,e=5,n=!1)=>{if(!rw(t))return;const[s,i]=v.useState(!1);return v.useEffect(()=>{const o=localStorage.getItem(t);if(n){localStorage.removeItem(t);return}!o&&o!==0&&i(!0),+o>0?(localStorage.setItem(t,+localStorage.getItem(t)-1),i(!1)):i(!0)},[]),{isVisibleNotification:s,setIsVisibleNotification:i,onClose:()=>{localStorage.setItem(t,e)}}},Z9=({maxWidth:t})=>{var w,C;const{dataNav:e=[],isDesktop:n,containerHeader:s,isAdmin:i=!1,theme:a="white",userInfo:o,isOpenMenu:l,setIsOpenMenu:c,popupPersonalOpen:u,setPopupPersonalOpen:d}=v.useContext(uy),[h]=ur(),f=ue(Ks),p=Dt(),[g,m]=v.useState(!1),_=v.useRef(null),{isVisibleNotification:y,setIsVisibleNotification:x,onClose:b}=Q9("auth_notif_status",5,h.loggedIn);return r.jsx("div",{className:`${Kt.headerActions}`,children:r.jsxs("div",{className:`${Kt.headerActionsContainer} ${s?"container":"px-4 md1:pr-0"}`,style:t&&n?{maxWidth:t}:null,children:[!n&&r.jsx(r.Fragment,{children:l?r.jsx("button",{onClick:()=>{d(!1),c(!1),r9()},className:`${Kt.MenuBtn} ${Kt.MenuBtnActive}`,children:r.jsx(Pr,{width:22,height:22})}):r.jsx("button",{className:Kt.MenuBtn,onClick:()=>{d(!1),c(!0),s9()},children:r.jsx("div",{className:Kt.burger,children:r.jsx("span",{className:Kt.burgerLine})})})}),r.jsx(tde,{}),n&&r.jsx(m6,{}),r.jsxs("div",{className:Kt.headerActionsList,children:[!i&&r.jsxs(r.Fragment,{children:[(Ye(o)||((w=o.role)==null?void 0:w.id)===sn.id)&&r.jsx(r.Fragment,{children:n?r.jsxs("button",{className:"flex items-center gap-2 ml-4 mr-4",onClick:()=>{f?window.open(Fn.purchase.create,"_blank"):p(Bs(!0))},children:[r.jsx(Xi,{width:16,height:16,className:"fill-primary400"}),r.jsx("span",{children:"Добавить"})]}):r.jsx("button",{className:Kt.headerAction,onClick:()=>{f?window.open(Fn.purchase.create,"_blank"):p(Bs(!0))},children:r.jsx(Xi,{width:16,height:16,className:"fill-primary400"})})}),r.jsx(pde,{})]}),r.jsxs("div",{className:"mmd1:ml-4 w-full h-full",children:[r.jsx("button",{className:`${Kt.headerAction} cut-one ${u?"bg-primary700":""}`,onClick:()=>{c(!1),f?d(j=>!j):p(Bs(!0))},ref:_,children:h.loggedIn?r.jsxs(r.Fragment,{children:[r.jsx(Nn,{src:o.image,title:ks(o.name,o.surname),size:n?32:28}),n&&r.jsx("p",{className:`title-4 cut-one ${a==="dark"?"!text-primary400":""}`,children:o.name}),u&&!n?r.jsx(Pr,{width:20,height:20,className:"flex-shrink-0 !fill-dark"}):r.jsx("div",{className:"w-5",children:r.jsx($ie,{width:12,height:12,className:"flex-shrink-0"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(Bie,{width:14,height:14}),n&&r.jsx("span",{children:"Вход и регистрация"})]})}),!h.loggedIn&&n&&_.current&&window.location.pathname!==ke.loginPhone&&window.location.pathname!==ht.login&&r.jsx($t,{mobile:!0,ElementTarget:()=>r.jsx(r.Fragment,{}),placement:"bottom-end",event:"click",value:y,onChange:x,offset:[0,12],classNameContent:"!px-0 !pt-10 !pb-6 overflow-hidden",classNameRoot:"!z-[200] max-w-[300px]",onClose:b,close:!0,children:r.jsxs("div",{className:"px-6",children:[r.jsx("h3",{className:"title-2-5 mb-2 !text-white",children:"Авторизируйтесь"}),r.jsx("p",{className:"text-defaultMax",children:"Чтобы посмотреть персональные предложения, подарки и кешбэк от застройщиков"}),r.jsx(_e,{size:"Small",className:"!px-8 mt-4 w-max",onClick:()=>{f?m(!0):p(Bs(!0))},children:"Войти"})]})})]})]}),!!(!n&&l)&&r.jsxs("div",{className:Kt.Menu,children:[r.jsx("div",{className:"pt-4 pb-4 border-top-lightgray",children:r.jsx(m6,{})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx(W9,{defaultValue:[0],classNameItem:"border-top-lightgray",data:e.map(j=>{if(j.name)return{button:j.href?r.jsx("a",{href:j.href,className:"py-4 w-full font-medium",children:j.name}):r.jsxs("span",{className:"flex items-center gap-4 justify-between py-4 w-full font-medium",children:[j.name,r.jsx(Yu,{className:"fill-blue",width:22,height:22})]}),body:j.items&&j.items.length>0?r.jsx("div",{className:"pb-4 flex flex-col",children:j.items.flat().filter(E=>E.mobile!==!1).map((E,T)=>r.jsxs("a",{href:E.link,className:"flex items-center gap-4 justify-between py-4",children:[r.jsx("span",{children:E.name}),E.subtitle&&r.jsx("span",{className:"text-blue",children:E.subtitle})]},T))}):null}})}),r.jsx("div",{children:((C=o.role)==null?void 0:C.id)===sn.id&&r.jsx(_e,{variant:"secondary",size:"Small",Selector:"div",className:"mt-3 mb-2",children:r.jsxs(Ke,{to:Fn.purchase.create,onClick:()=>set(!1),className:"w-full h-full flex items-center justify-center gap-2",children:[r.jsx(Xi,{width:14,height:14}),"Разместить заявку на покупку"]})})})]})]}),!h.loggedIn&&r.jsx(Ze,{condition:g,children:r.jsx(y$,{condition:g,set:m})}),h.loggedIn&&r.jsx(Ze,{condition:u,children:r.jsx(ede,{condition:u,set:d})})]})})},mde="_root_zblol_1",g6={root:mde},gde=({children:t,href:e,className:n=""})=>e?r.jsx("a",{href:e,className:`${g6.root} ${n}`,children:t}):r.jsx("button",{className:`${g6.root} ${n}`,children:t}),vde=t=>{const[e,n]=v.useState(!1);let s;const i=c=>{if(o())return;const u=c.currentTarget;s=setTimeout(()=>{n(!0),u.classList.add("_active"),document.body.classList.add("_active-mask")},400)},a=c=>{if(o())return;const u=c.currentTarget;clearTimeout(s),u.classList.remove("_active"),document.body.classList.remove("_active-mask"),n(!1)},o=()=>window.innerWidth<=1180||!t.items,l=()=>r.jsxs("div",{className:`${e?Kt.headerDropdownActive:""} ${Kt.headerDropdown} container`,children:[r.jsx("div",{className:Kt.headerDropdownContent,children:t.items.map((c,u)=>r.jsx("div",{className:Kt.headerDropdownRow,children:c.map((d,h)=>r.jsxs(gde,{href:d.link,className:d.className,children:[r.jsx("span",{children:d.name}),d.subtitle&&r.jsx("span",{children:d.subtitle})]},h))},u))}),r.jsx("div",{className:Kt.headerDropdownBanner})]});return r.jsxs("li",{className:Kt.headerNavItem,onMouseEnter:c=>i(c),onMouseLeave:c=>a(c),children:[t.href?r.jsx("a",{href:t.href,className:Kt.headerNavName,children:t.name}):r.jsx("span",{className:Kt.headerNavName,children:t.name}),t.items&&e?r.jsx(l,{}):""]})},J9=({maxWidth:t})=>{const{dataNav:e=[],containerHeader:n,isDesktop:s}=v.useContext(uy);return r.jsx("div",{className:`${Kt.headerNav}`,children:r.jsx("div",{className:`${Kt.headerNavContainer} ${n?"container":"px-4"}`,style:t&&s?{maxWidth:t}:null,children:r.jsx("ul",{className:Kt.headerNavList,children:e.map((i,a)=>i.name?r.jsx(vde,{...i},a):"")})})})},$c=(t,e,n=!1)=>fv(n?pt(t||0):t||0,...e.map(i=>`%d ${i}`)),e$=t=>$c(t,["год","года","лет"]),yde=t=>$c(t,["менеджер","менеджера","менеджеров"],!0),mv=t=>$c(t,["предложение","предложения","предложений"],!0),xde=t=>$c(t,["сообщение","сообщения","сообщений"],!0),e_=t=>$c(t,["дом","дома","домов"],!0),bde=t=>$c(t,["закреплённое сообщение","закреплённых сообщения","закреплённых сообщения"],!0),t$=t=>$c(t,["участник","участника","участников"],!0),n$=t=>$c(t,["комментарий","комментария","комментариев"],!0),_de=t=>$c(t,["просмотр","просмотра","просмотров"],!0),i4=(t="",e={},n=0)=>{if(!t)return;const s=e[t.toLowerCase()];return s?s[n]:t},s$=({theme:t,children:e,isAdmin:n=!1})=>{const s=Xr(),i=ue(rt),a=ue(Ot),o=ue(nw),{data:l}=ue(Ci),c=ue(w=>w.listing.type),[u,d]=v.useState([]),[h,f]=v.useState(!1),[p,g]=v.useState(!1),[m,_]=v.useState(!0),[y,x]=v.useState(!1);v.useEffect(()=>{var w,C,j,E,T;l.length!==0&&d([{name:"Для покупателя",items:[[{name:"Жилые комплексы",subtitle:`${l&&((w=l.find(N=>N.name==="Жилые комплексы"))==null?void 0:w.count)||0} предложений`,link:ke.listing},{name:"Застройщики",subtitle:`${l&&((C=l.find(N=>N.name==="Каталог застройщиков"))==null?void 0:C.count)||0} застройщиков`,link:ke.developers.list},{name:"Менеджеры",subtitle:`${yde(l&&((j=l.find(N=>N.name==="Каталог специалистов"))==null?void 0:j.count)||0)}`,link:ke.specialists.list}],[{name:"Разместить заявку на покупку квартиры в новостройке",subtitle:"",link:Fn.purchase.create,className:"col-span-2 mt-4",mobile:!1}]]},{name:`${((E=a.role)==null?void 0:E.id)===Wt.id?"Все заявки на покупку":"Для продавца"}`,href:`${((T=a.role)==null?void 0:T.id)===Wt.id?`${At.purchase.list_buyers}`:ke.purchase.list}`},{name:"Скидки и подарки",href:ke.feedPromos},{name:"Видео и Клипы",href:ke.feedVideos}])},[l,a]),v.useEffect(()=>{s.pathname===ke.listing&&c==="map"?_(!1):_(!0)},[c,s]);const b={isDesktop:i,dataNav:u,containerHeader:m,theme:t,userInfo:a,currentCity:o,listingType:c,isOpenMenu:h,setIsOpenMenu:f,popupCityOpen:p,setPopupCityOpen:g,popupPersonalOpen:y,setPopupPersonalOpen:x,isAdmin:n};return r.jsx(uy.Provider,{value:b,children:e})},zn=({children:t,theme:e="white",maxWidth:n=null,visibleNav:s=!0})=>{const i=ue(rt);return r.jsx("header",{className:`${Kt.header} ${e==="dark"?Kt.headerDark:""}`,children:r.jsxs(s$,{theme:e,children:[r.jsx(Z9,{maxWidth:n}),!!(i&&s)&&r.jsx(J9,{maxWidth:n}),t]})})};function j0(t){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j0(t)}function wr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wde(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Cr(t,e,n){return e&&wde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gv(){return gv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},gv.apply(this,arguments)}function na(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zE(t,e)}function t_(t){return t_=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},t_(t)}function zE(t,e){return zE=Object.setPrototypeOf||function(s,i){return s.__proto__=i,s},zE(t,e)}function Cde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jde(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sde(t)}function sa(t){var e=Cde();return function(){var s=t_(t),i;if(e){var a=t_(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return jde(this,i)}}var a4=function(){function t(){wr(this,t)}return Cr(t,[{key:"listenForWhisper",value:function(n,s){return this.listen(".client-"+n,s)}},{key:"notification",value:function(n){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",n)}},{key:"stopListeningForWhisper",value:function(n,s){return this.stopListening(".client-"+n,s)}}]),t}(),r$=function(){function t(e){wr(this,t),this.namespace=e}return Cr(t,[{key:"format",value:function(n){return[".","\\"].includes(n.charAt(0))?n.substring(1):(this.namespace&&(n=this.namespace+"."+n),n.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(n){this.namespace=n}}]),t}();function Tde(t){try{new t}catch(e){if(e.message.includes("is not a constructor"))return!1}return!0}var o4=function(t){na(n,t);var e=sa(n);function n(s,i,a){var o;return wr(this,n),o=e.call(this),o.name=i,o.pusher=s,o.options=a,o.eventFormatter=new r$(o.options.namespace),o.subscribe(),o}return Cr(n,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(i,a){return this.on(this.eventFormatter.format(i),a),this}},{key:"listenToAll",value:function(i){var a=this;return this.subscription.bind_global(function(o,l){if(!o.startsWith("pusher:")){var c=a.options.namespace.replace(/\./g,"\\"),u=o.startsWith(c)?o.substring(c.length+1):"."+o;i(u,l)}}),this}},{key:"stopListening",value:function(i,a){return a?this.subscription.unbind(this.eventFormatter.format(i),a):this.subscription.unbind(this.eventFormatter.format(i)),this}},{key:"stopListeningToAll",value:function(i){return i?this.subscription.unbind_global(i):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(i){return this.on("pusher:subscription_succeeded",function(){i()}),this}},{key:"error",value:function(i){return this.on("pusher:subscription_error",function(a){i(a)}),this}},{key:"on",value:function(i,a){return this.subscription.bind(i,a),this}}]),n}(a4),i$=function(t){na(n,t);var e=sa(n);function n(){return wr(this,n),e.apply(this,arguments)}return Cr(n,[{key:"whisper",value:function(i,a){return this.pusher.channels.channels[this.name].trigger("client-".concat(i),a),this}}]),n}(o4),Ede=function(t){na(n,t);var e=sa(n);function n(){return wr(this,n),e.apply(this,arguments)}return Cr(n,[{key:"whisper",value:function(i,a){return this.pusher.channels.channels[this.name].trigger("client-".concat(i),a),this}}]),n}(o4),Nde=function(t){na(n,t);var e=sa(n);function n(){return wr(this,n),e.apply(this,arguments)}return Cr(n,[{key:"here",value:function(i){return this.on("pusher:subscription_succeeded",function(a){i(Object.keys(a.members).map(function(o){return a.members[o]}))}),this}},{key:"joining",value:function(i){return this.on("pusher:member_added",function(a){i(a.info)}),this}},{key:"whisper",value:function(i,a){return this.pusher.channels.channels[this.name].trigger("client-".concat(i),a),this}},{key:"leaving",value:function(i){return this.on("pusher:member_removed",function(a){i(a.info)}),this}}]),n}(i$),a$=function(t){na(n,t);var e=sa(n);function n(s,i,a){var o;return wr(this,n),o=e.call(this),o.events={},o.listeners={},o.name=i,o.socket=s,o.options=a,o.eventFormatter=new r$(o.options.namespace),o.subscribe(),o}return Cr(n,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(i,a){return this.on(this.eventFormatter.format(i),a),this}},{key:"stopListening",value:function(i,a){return this.unbindEvent(this.eventFormatter.format(i),a),this}},{key:"subscribed",value:function(i){return this.on("connect",function(a){i(a)}),this}},{key:"error",value:function(i){return this}},{key:"on",value:function(i,a){var o=this;return this.listeners[i]=this.listeners[i]||[],this.events[i]||(this.events[i]=function(l,c){o.name===l&&o.listeners[i]&&o.listeners[i].forEach(function(u){return u(c)})},this.socket.on(i,this.events[i])),this.listeners[i].push(a),this}},{key:"unbind",value:function(){var i=this;Object.keys(this.events).forEach(function(a){i.unbindEvent(a)})}},{key:"unbindEvent",value:function(i,a){this.listeners[i]=this.listeners[i]||[],a&&(this.listeners[i]=this.listeners[i].filter(function(o){return o!==a})),(!a||this.listeners[i].length===0)&&(this.events[i]&&(this.socket.removeListener(i,this.events[i]),delete this.events[i]),delete this.listeners[i])}}]),n}(a4),o$=function(t){na(n,t);var e=sa(n);function n(){return wr(this,n),e.apply(this,arguments)}return Cr(n,[{key:"whisper",value:function(i,a){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(i),data:a}),this}}]),n}(a$),kde=function(t){na(n,t);var e=sa(n);function n(){return wr(this,n),e.apply(this,arguments)}return Cr(n,[{key:"here",value:function(i){return this.on("presence:subscribed",function(a){i(a.map(function(o){return o.user_info}))}),this}},{key:"joining",value:function(i){return this.on("presence:joining",function(a){return i(a.user_info)}),this}},{key:"whisper",value:function(i,a){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(i),data:a}),this}},{key:"leaving",value:function(i){return this.on("presence:leaving",function(a){return i(a.user_info)}),this}}]),n}(o$),n_=function(t){na(n,t);var e=sa(n);function n(){return wr(this,n),e.apply(this,arguments)}return Cr(n,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(i,a){return this}},{key:"listenToAll",value:function(i){return this}},{key:"stopListening",value:function(i,a){return this}},{key:"subscribed",value:function(i){return this}},{key:"error",value:function(i){return this}},{key:"on",value:function(i,a){return this}}]),n}(a4),l$=function(t){na(n,t);var e=sa(n);function n(){return wr(this,n),e.apply(this,arguments)}return Cr(n,[{key:"whisper",value:function(i,a){return this}}]),n}(n_),Ade=function(t){na(n,t);var e=sa(n);function n(){return wr(this,n),e.apply(this,arguments)}return Cr(n,[{key:"whisper",value:function(i,a){return this}}]),n}(n_),Dde=function(t){na(n,t);var e=sa(n);function n(){return wr(this,n),e.apply(this,arguments)}return Cr(n,[{key:"here",value:function(i){return this}},{key:"joining",value:function(i){return this}},{key:"whisper",value:function(i,a){return this}},{key:"leaving",value:function(i){return this}}]),n}(l$),l4=function(){function t(e){wr(this,t),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(e),this.connect()}return Cr(t,[{key:"setOptions",value:function(n){this.options=gv(this._defaultOptions,n);var s=this.csrfToken();return s&&(this.options.auth.headers["X-CSRF-TOKEN"]=s,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=s),s=this.options.bearerToken,s&&(this.options.auth.headers.Authorization="Bearer "+s,this.options.userAuthentication.headers.Authorization="Bearer "+s),n}},{key:"csrfToken",value:function(){var n;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(n=document.querySelector('meta[name="csrf-token"]'))?n.getAttribute("content"):null}}]),t}(),v6=function(t){na(n,t);var e=sa(n);function n(){var s;return wr(this,n),s=e.apply(this,arguments),s.channels={},s}return Cr(n,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(i,a,o){return this.channel(i).listen(a,o)}},{key:"channel",value:function(i){return this.channels[i]||(this.channels[i]=new o4(this.pusher,i,this.options)),this.channels[i]}},{key:"privateChannel",value:function(i){return this.channels["private-"+i]||(this.channels["private-"+i]=new i$(this.pusher,"private-"+i,this.options)),this.channels["private-"+i]}},{key:"encryptedPrivateChannel",value:function(i){return this.channels["private-encrypted-"+i]||(this.channels["private-encrypted-"+i]=new Ede(this.pusher,"private-encrypted-"+i,this.options)),this.channels["private-encrypted-"+i]}},{key:"presenceChannel",value:function(i){return this.channels["presence-"+i]||(this.channels["presence-"+i]=new Nde(this.pusher,"presence-"+i,this.options)),this.channels["presence-"+i]}},{key:"leave",value:function(i){var a=this,o=[i,"private-"+i,"private-encrypted-"+i,"presence-"+i];o.forEach(function(l,c){a.leaveChannel(l)})}},{key:"leaveChannel",value:function(i){this.channels[i]&&(this.channels[i].unsubscribe(),delete this.channels[i])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),n}(l4),y6=function(t){na(n,t);var e=sa(n);function n(){var s;return wr(this,n),s=e.apply(this,arguments),s.channels={},s}return Cr(n,[{key:"connect",value:function(){var i=this,a=this.getSocketIO();return this.socket=a(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(i.channels).forEach(function(o){o.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(i,a,o){return this.channel(i).listen(a,o)}},{key:"channel",value:function(i){return this.channels[i]||(this.channels[i]=new a$(this.socket,i,this.options)),this.channels[i]}},{key:"privateChannel",value:function(i){return this.channels["private-"+i]||(this.channels["private-"+i]=new o$(this.socket,"private-"+i,this.options)),this.channels["private-"+i]}},{key:"presenceChannel",value:function(i){return this.channels["presence-"+i]||(this.channels["presence-"+i]=new kde(this.socket,"presence-"+i,this.options)),this.channels["presence-"+i]}},{key:"leave",value:function(i){var a=this,o=[i,"private-"+i,"presence-"+i];o.forEach(function(l){a.leaveChannel(l)})}},{key:"leaveChannel",value:function(i){this.channels[i]&&(this.channels[i].unsubscribe(),delete this.channels[i])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),n}(l4),Pde=function(t){na(n,t);var e=sa(n);function n(){var s;return wr(this,n),s=e.apply(this,arguments),s.channels={},s}return Cr(n,[{key:"connect",value:function(){}},{key:"listen",value:function(i,a,o){return new n_}},{key:"channel",value:function(i){return new n_}},{key:"privateChannel",value:function(i){return new l$}},{key:"encryptedPrivateChannel",value:function(i){return new Ade}},{key:"presenceChannel",value:function(i){return new Dde}},{key:"leave",value:function(i){}},{key:"leaveChannel",value:function(i){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),n}(l4),Ide=function(){function t(e){wr(this,t),this.options=e,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return Cr(t,[{key:"channel",value:function(n){return this.connector.channel(n)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new v6(gv(gv({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new v6(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new y6(this.options);else if(this.options.broadcaster=="null")this.connector=new Pde(this.options);else if(typeof this.options.broadcaster=="function"&&Tde(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(j0(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(n){return this.connector.presenceChannel(n)}},{key:"leave",value:function(n){this.connector.leave(n)}},{key:"leaveChannel",value:function(n){this.connector.leaveChannel(n)}},{key:"leaveAllChannels",value:function(){for(var n in this.connector.channels)this.leaveChannel(n)}},{key:"listen",value:function(n,s,i){return this.connector.listen(n,s,i)}},{key:"private",value:function(n){return this.connector.privateChannel(n)}},{key:"encryptedPrivate",value:function(n){if(this.connector instanceof y6)throw new Error("Broadcaster ".concat(j0(this.options.broadcaster)," ").concat(this.options.broadcaster," does not support encrypted private channels."));return this.connector.encryptedPrivateChannel(n)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":j0(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var n=this;Vue.http.interceptors.push(function(s,i){n.socketId()&&s.headers.set("X-Socket-ID",n.socketId()),i()})}},{key:"registerAxiosRequestInterceptor",value:function(){var n=this;axios.interceptors.request.use(function(s){return n.socketId()&&(s.headers["X-Socket-Id"]=n.socketId()),s})}},{key:"registerjQueryAjaxSetup",value:function(){var n=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(s,i,a){n.socketId()&&a.setRequestHeader("X-Socket-Id",n.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var n=this;document.addEventListener("turbo:before-fetch-request",function(s){s.detail.fetchOptions.headers["X-Socket-Id"]=n.socketId()})}}]),t}();function c$(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=c$(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function hh(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=c$(t))&&(s&&(s+=" "),s+=e);return s}function Mde(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Mde(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var my=t=>typeof t=="number"&&!isNaN(t),kh=t=>typeof t=="string",kc=t=>typeof t=="function",Ode=t=>kh(t)||my(t),HE=t=>kh(t)||kc(t)?t:null,Rde=(t,e)=>t===!1||my(t)&&t>0?t:e,qE=t=>v.isValidElement(t)||kh(t)||kc(t)||my(t);function Lde(t,e,n=300){let{scrollHeight:s,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=s+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function Bde({enter:t,exit:e,appendPosition:n=!1,collapse:s=!0,collapseDuration:i=300}){return function({children:a,position:o,preventExitTransition:l,done:c,nodeRef:u,isIn:d,playToast:h}){let f=n?`${t}--${o}`:t,p=n?`${e}--${o}`:e,g=v.useRef(0);return v.useLayoutEffect(()=>{let m=u.current,_=f.split(" "),y=x=>{x.target===u.current&&(h(),m.removeEventListener("animationend",y),m.removeEventListener("animationcancel",y),g.current===0&&x.type!=="animationcancel"&&m.classList.remove(..._))};m.classList.add(..._),m.addEventListener("animationend",y),m.addEventListener("animationcancel",y)},[]),v.useEffect(()=>{let m=u.current,_=()=>{m.removeEventListener("animationend",_),s?Lde(m,c,i):c()};d||(l?_():(g.current=1,m.className+=` ${p}`,m.addEventListener("animationend",_)))},[d]),Xe.createElement(Xe.Fragment,null,a)}}function x6(t,e){return{content:u$(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function u$(t,e,n=!1){return v.isValidElement(t)&&!kh(t.type)?v.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):kc(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function Fde({closeToast:t,theme:e,ariaLabel:n="close"}){return Xe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:s=>{s.stopPropagation(),t(!0)},"aria-label":n},Xe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Xe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function $de({delay:t,isRunning:e,closeToast:n,type:s="default",hide:i,className:a,controlledProgress:o,progress:l,rtl:c,isIn:u,theme:d}){let h=i||o&&l===0,f={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(f.transform=`scaleX(${l})`);let p=hh("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),g=kc(a)?a({rtl:c,type:s,defaultClassName:p}):hh(p,a),m={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{u&&n()}};return Xe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},Xe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${s}`}),Xe.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:g,style:f,...m}))}var Ude=1,d$=()=>`${Ude++}`;function Vde(t,e,n){let s=1,i=0,a=[],o=[],l=e,c=new Map,u=new Set,d=x=>(u.add(x),()=>u.delete(x)),h=()=>{o=Array.from(c.values()),u.forEach(x=>x())},f=({containerId:x,toastId:b,updateId:w})=>{let C=x?x!==t:t!==1,j=c.has(b)&&w==null;return C||j},p=(x,b)=>{c.forEach(w=>{var C;(b==null||b===w.props.toastId)&&((C=w.toggle)==null||C.call(w,x))})},g=x=>{var b,w;(w=(b=x.props)==null?void 0:b.onClose)==null||w.call(b,x.removalReason),x.isActive=!1},m=x=>{if(x==null)c.forEach(g);else{let b=c.get(x);b&&g(b)}h()},_=()=>{i-=a.length,a=[]},y=x=>{var b,w;let{toastId:C,updateId:j}=x.props,E=j==null;x.staleId&&c.delete(x.staleId),x.isActive=!0,c.set(C,x),h(),n(x6(x,E?"added":"updated")),E&&((w=(b=x.props).onOpen)==null||w.call(b))};return{id:t,props:l,observe:d,toggle:p,removeToast:m,toasts:c,clearQueue:_,buildToast:(x,b)=>{if(f(b))return;let{toastId:w,updateId:C,data:j,staleId:E,delay:T}=b,N=C==null;N&&i++;let P={...l,style:l.toastStyle,key:s++,...Object.fromEntries(Object.entries(b).filter(([B,U])=>U!=null)),toastId:w,updateId:C,data:j,isIn:!1,className:HE(b.className||l.toastClassName),progressClassName:HE(b.progressClassName||l.progressClassName),autoClose:b.isLoading?!1:Rde(b.autoClose,l.autoClose),closeToast(B){c.get(w).removalReason=B,m(w)},deleteToast(){let B=c.get(w);if(B!=null){if(n(x6(B,"removed")),c.delete(w),i--,i<0&&(i=0),a.length>0){y(a.shift());return}h()}}};P.closeButton=l.closeButton,b.closeButton===!1||qE(b.closeButton)?P.closeButton=b.closeButton:b.closeButton===!0&&(P.closeButton=qE(l.closeButton)?l.closeButton:!0);let I={content:x,props:P,staleId:E};l.limit&&l.limit>0&&i>l.limit&&N?a.push(I):my(T)?setTimeout(()=>{y(I)},T):y(I)},setProps(x){l=x},setToggle:(x,b)=>{let w=c.get(x);w&&(w.toggle=b)},isToastActive:x=>{var b;return(b=c.get(x))==null?void 0:b.isActive},getSnapshot:()=>o}}var fi=new Map,vv=[],WE=new Set,zde=t=>WE.forEach(e=>e(t)),h$=()=>fi.size>0;function Hde(){vv.forEach(t=>p$(t.content,t.options)),vv=[]}var qde=(t,{containerId:e})=>{var n;return(n=fi.get(e||1))==null?void 0:n.toasts.get(t)};function f$(t,e){var n;if(e)return!!((n=fi.get(e))!=null&&n.isToastActive(t));let s=!1;return fi.forEach(i=>{i.isToastActive(t)&&(s=!0)}),s}function Wde(t){if(!h$()){vv=vv.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||Ode(t))fi.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=fi.get(t.containerId);e?e.removeToast(t.id):fi.forEach(n=>{n.removeToast(t.id)})}}var Gde=(t={})=>{fi.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function p$(t,e){qE(t)&&(h$()||vv.push({content:t,options:e}),fi.forEach(n=>{n.buildToast(t,e)}))}function Yde(t){var e;(e=fi.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function m$(t,e){fi.forEach(n=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===n.id)&&n.toggle(t,e==null?void 0:e.id)})}function Xde(t){let e=t.containerId||1;return{subscribe(n){let s=Vde(e,t,zde);fi.set(e,s);let i=s.observe(n);return Hde(),()=>{i(),fi.delete(e)}},setProps(n){var s;(s=fi.get(e))==null||s.setProps(n)},getSnapshot(){var n;return(n=fi.get(e))==null?void 0:n.getSnapshot()}}}function Kde(t){return WE.add(t),()=>{WE.delete(t)}}function Qde(t){return t&&(kh(t.toastId)||my(t.toastId))?t.toastId:d$()}function gy(t,e){return p$(t,e),e.toastId}function mw(t,e){return{...e,type:e&&e.type||t,toastId:Qde(e)}}function gw(t){return(e,n)=>gy(e,mw(t,n))}function yn(t,e){return gy(t,mw("default",e))}yn.loading=(t,e)=>gy(t,mw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function Zde(t,{pending:e,error:n,success:s},i){let a;e&&(a=kh(e)?yn.loading(e,i):yn.loading(e.render,{...i,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,h)=>{if(d==null){yn.dismiss(a);return}let f={type:u,...o,...i,data:h},p=kh(d)?{render:d}:d;return a?yn.update(a,{...f,...p}):yn(p.render,{...f,...p}),h},c=kc(t)?t():t;return c.then(u=>l("success",s,u)).catch(u=>l("error",n,u)),c}yn.promise=Zde;yn.success=gw("success");yn.info=gw("info");yn.error=gw("error");yn.warning=gw("warning");yn.warn=yn.warning;yn.dark=(t,e)=>gy(t,mw("default",{theme:"dark",...e}));function Jde(t){Wde(t)}yn.dismiss=Jde;yn.clearWaitingQueue=Gde;yn.isActive=f$;yn.update=(t,e={})=>{let n=qde(t,e);if(n){let{props:s,content:i}=n,a={delay:100,...s,...e,toastId:e.toastId||t,updateId:d$()};a.toastId!==t&&(a.staleId=t);let o=a.render||i;delete a.render,gy(o,a)}};yn.done=t=>{yn.update(t,{progress:1})};yn.onChange=Kde;yn.play=t=>m$(!0,t);yn.pause=t=>m$(!1,t);function ehe(t){var e;let{subscribe:n,getSnapshot:s,setProps:i}=v.useRef(Xde(t)).current;i(t);let a=(e=v.useSyncExternalStore(n,s,s))==null?void 0:e.slice();function o(l){if(!a)return[];let c=new Map;return t.newestOnTop&&a.reverse(),a.forEach(u=>{let{position:d}=u.props;c.has(d)||c.set(d,[]),c.get(d).push(u)}),Array.from(c,u=>l(u[0],u[1]))}return{getToastToRender:o,isToastActive:f$,count:a==null?void 0:a.length}}function the(t){let[e,n]=v.useState(!1),[s,i]=v.useState(!1),a=v.useRef(null),o=v.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=t;Yde({id:t.toastId,containerId:t.containerId,fn:n}),v.useEffect(()=>{if(t.pauseOnFocusLoss)return f(),()=>{p()}},[t.pauseOnFocusLoss]);function f(){document.hasFocus()||y(),window.addEventListener("focus",_),window.addEventListener("blur",y)}function p(){window.removeEventListener("focus",_),window.removeEventListener("blur",y)}function g(E){if(t.draggable===!0||t.draggable===E.pointerType){x();let T=a.current;o.canCloseOnClick=!0,o.canDrag=!0,T.style.transition="none",t.draggableDirection==="x"?(o.start=E.clientX,o.removalDistance=T.offsetWidth*(t.draggablePercent/100)):(o.start=E.clientY,o.removalDistance=T.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function m(E){let{top:T,bottom:N,left:P,right:I}=a.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&t.pauseOnHover&&E.clientX>=P&&E.clientX<=I&&E.clientY>=T&&E.clientY<=N?y():_()}function _(){n(!0)}function y(){n(!1)}function x(){o.didMove=!1,document.addEventListener("pointermove",w),document.addEventListener("pointerup",C)}function b(){document.removeEventListener("pointermove",w),document.removeEventListener("pointerup",C)}function w(E){let T=a.current;if(o.canDrag&&T){o.didMove=!0,e&&y(),t.draggableDirection==="x"?o.delta=E.clientX-o.start:o.delta=E.clientY-o.start,o.start!==E.clientX&&(o.canCloseOnClick=!1);let N=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;T.style.transform=`translate3d(${N},0)`,T.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function C(){b();let E=a.current;if(o.canDrag&&o.didMove&&E){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),t.closeToast(!0),t.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let j={onPointerDown:g,onPointerUp:m};return l&&c&&(j.onMouseEnter=y,t.stacked||(j.onMouseLeave=_)),h&&(j.onClick=E=>{d&&d(E),o.canCloseOnClick&&u(!0)}),{playToast:_,pauseToast:y,isRunning:e,preventExitTransition:s,toastRef:a,eventHandlers:j}}var nhe=typeof window<"u"?v.useLayoutEffect:v.useEffect,vw=({theme:t,type:e,isLoading:n,...s})=>Xe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...s});function she(t){return Xe.createElement(vw,{...t},Xe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function rhe(t){return Xe.createElement(vw,{...t},Xe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function ihe(t){return Xe.createElement(vw,{...t},Xe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ahe(t){return Xe.createElement(vw,{...t},Xe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function ohe(){return Xe.createElement("div",{className:"Toastify__spinner"})}var GE={info:rhe,warning:she,success:ihe,error:ahe,spinner:ohe},lhe=t=>t in GE;function che({theme:t,type:e,isLoading:n,icon:s}){let i=null,a={theme:t,type:e};return s===!1||(kc(s)?i=s({...a,isLoading:n}):v.isValidElement(s)?i=v.cloneElement(s,a):n?i=GE.spinner():lhe(e)&&(i=GE[e](a))),i}var uhe=t=>{let{isRunning:e,preventExitTransition:n,toastRef:s,eventHandlers:i,playToast:a}=the(t),{closeButton:o,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:h,closeToast:f,transition:p,position:g,className:m,style:_,progressClassName:y,updateId:x,role:b,progress:w,rtl:C,toastId:j,deleteToast:E,isIn:T,isLoading:N,closeOnClick:P,theme:I,ariaLabel:B}=t,U=hh("Toastify__toast",`Toastify__toast-theme--${I}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":C},{"Toastify__toast--close-on-click":P}),z=kc(m)?m({rtl:C,position:g,type:d,defaultClassName:U}):hh(U,m),G=che(t),V=!!w||!c,J={closeToast:f,type:d,theme:I},Q=null;return o===!1||(kc(o)?Q=o(J):v.isValidElement(o)?Q=v.cloneElement(o,J):Q=Fde(J)),Xe.createElement(p,{isIn:T,done:E,position:g,preventExitTransition:n,nodeRef:s,playToast:a},Xe.createElement("div",{id:j,tabIndex:0,onClick:u,"data-in":T,className:z,...i,style:_,ref:s,...T&&{role:b,"aria-label":B}},G!=null&&Xe.createElement("div",{className:hh("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},G),u$(l,t,!e),Q,!t.customProgressBar&&Xe.createElement($de,{...x&&!V?{key:`p-${x}`}:{},rtl:C,theme:I,delay:c,isRunning:e,isIn:T,closeToast:f,hide:h,type:d,className:y,controlledProgress:V,progress:w||0})))},dhe=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),hhe=Bde(dhe("bounce",!0)),fhe={position:"top-right",transition:hhe,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function phe(t){let e={...fhe,...t},n=t.stacked,[s,i]=v.useState(!0),a=v.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=ehe(e),{className:u,style:d,rtl:h,containerId:f,hotKeys:p}=e;function g(_){let y=hh("Toastify__toast-container",`Toastify__toast-container--${_}`,{"Toastify__toast-container--rtl":h});return kc(u)?u({position:_,rtl:h,defaultClassName:y}):hh(y,HE(u))}function m(){n&&(i(!0),yn.play())}return nhe(()=>{var _;if(n){let y=a.current.querySelectorAll('[data-in="true"]'),x=12,b=(_=e.position)==null?void 0:_.includes("top"),w=0,C=0;Array.from(y).reverse().forEach((j,E)=>{let T=j;T.classList.add("Toastify__toast--stacked"),E>0&&(T.dataset.collapsed=`${s}`),T.dataset.pos||(T.dataset.pos=b?"top":"bot");let N=w*(s?.2:1)+(s?0:x*E);T.style.setProperty("--y",`${b?N:N*-1}px`),T.style.setProperty("--g",`${x}`),T.style.setProperty("--s",`${1-(s?C:0)}`),w+=T.offsetHeight,C+=.025})}},[s,c,n]),v.useEffect(()=>{function _(y){var x;let b=a.current;p(y)&&((x=b.querySelector('[tabIndex="0"]'))==null||x.focus(),i(!1),yn.pause()),y.key==="Escape"&&(document.activeElement===b||b!=null&&b.contains(document.activeElement))&&(i(!0),yn.play())}return document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}},[p]),Xe.createElement("section",{ref:a,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),yn.pause())},onMouseLeave:m,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((_,y)=>{let x=y.length?{...d}:{...d,pointerEvents:"none"};return Xe.createElement("div",{tabIndex:-1,className:g(_),"data-stacked":n,style:x,key:`c-${_}`},y.map(({content:b,props:w})=>Xe.createElement(uhe,{...w,stacked:n,collapseAll:m,isIn:l(w.toastId,w.containerId),key:`t-${w.key}`},b)))}))}const mhe="_ThumbPhoto_u9er0_1",ghe="_ThumbPhotoFull_u9er0_27",vhe="_ThumbPhotoDefault_u9er0_47",c4={ThumbPhoto:mhe,ThumbPhotoFull:ghe,ThumbPhotoDefault:vhe},yv=({children:t,style:e={},className:n="",size:s=85,onClick:i=()=>{}})=>r.jsx("div",{style:{...e,"--size":`${s}px`},className:`${c4.ThumbPhoto} ${n}`,onClick:i,children:t}),g$=({children:t,style:e={},className:n="",height:s=100,onClick:i=()=>{}})=>r.jsx("div",{style:{...e,height:s},className:`${c4.ThumbPhotoFull} ibg ${n}`,onClick:i,children:t}),Vp=({children:t,style:e={},className:n="",onClick:s=()=>{}})=>r.jsx("div",{style:{...e},className:`${c4.ThumbPhotoDefault} ${n}`,onClick:s,children:t}),xt={CHAT:1,GROUP:2,CHANNEL:3},yhe=({data:t})=>{const e=t.dialog_type===xt.CHAT,n=t.dialog_type===xt.GROUP,s=t.dialog_type===xt.CHANNEL,i=e?t.user.role===pn.id?t.organization:t.user:{name:t.name,image:t.image},a=t.message,o=a.files.find(u=>u.type==="audio"),l=a.files.find(u=>u.type==="video"),c=a.photos;return r.jsxs(Ke,{to:`${Ji.chat}?dialog=${t.dialog_id}`,className:"w-full flex gap-3 overflow-hidden",children:[r.jsx(Nn,{size:54,src:i.image,title:i.name}),r.jsxs("div",{className:"mt-2 w-[90%] overflow-hidden",children:[r.jsxs("p",{className:"title-4 cut cut-1 flex mb-1",children:[n&&r.jsx(Z2,{className:"mr-1",width:14,height:14}),s&&r.jsx(Ok,{className:"mr-1",width:14,height:14}),r.jsx("span",{children:i.name})]}),r.jsxs("div",{className:"w-full flex gap-1",children:[!e&&r.jsxs("span",{className:"text-blue font-medium whitespace-nowrap",children:[t.user.name,":"]}),r.jsxs("div",{className:"flex items-center cut-one w-full",children:[!!c.length&&r.jsx("div",{className:"flex gap-1 mr-1",children:c.map((u,d)=>r.jsx(Vp,{style:{width:15,height:15,borderRadius:2},children:r.jsx("img",{src:qt(u)})},d))}),!!l&&r.jsx("div",{className:"flex gap-1 mr-1",children:r.jsx(Vp,{style:{width:15,height:15,borderRadius:2},children:r.jsx("img",{src:qt(l.preview||"")})})}),!!o&&r.jsx("span",{className:"text-dark cut-one",children:"Голосовое сообщение"}),!!c.length&&!a.text&&r.jsx("span",{className:"text-dark cut-one",children:"Фотография"}),!!(l&&!a.text&&!c.length)&&r.jsx("span",{className:"text-dark cut-one",children:"Видео"}),!!a.text&&r.jsx("span",{className:"text-dark cut-one",children:a.text})]})]})]})]})},u4=()=>{const t=Dt(),[e,,n]=ur(),s=Xr(),i=ue(rt),a=async()=>{const c=await l(),u=G2.find(h=>h.id===(c==null?void 0:c.role)),d={...c,role:u};return t(Pb(d)),Ue("/api/likes").then(h=>{t(Ib(h.data))}),d},o=c=>{if(Ye(c))return;const u=e.access_token;if(!u)return;window.Echo=new Ide({broadcaster:"socket.io",host:"https://api.inrut.ru:6001",path:"/socket.io",auth:{headers:{Authorization:`Bearer ${u}`}}});const d=window.Echo.join(`user-video-dialogs.${c.id}`);d.stopListening("UserVideoDialogsEvent"),d.listen("UserVideoDialogsEvent",({data:f})=>{f.type==="incomingCall"&&t(b0(f)),f.type==="callCanceled"&&t(b0(!1))});const h=window.Echo.join(`user-message-notifications.${c.id}`);h.stopListening("UserMessageNotificationsEvent"),h.listen("UserMessageNotificationsEvent",({data:f})=>{var p;if(s.pathname!==Ji.chat){const g=(p=document.querySelector("#chat-notifications .Toastify__toast-container"))==null?void 0:p.children;(!g||(g==null?void 0:g.length)<5&&i)&&yn(yhe,{data:f,autoClose:1e4,hideProgressBar:!0,position:"bottom-right",containerId:"chat-notifications",style:{marginBottom:10,maxHeight:81},onClick:()=>{yn.dismiss({containerId:"chat-notifications"})}})}})},l=async()=>{try{const c=await Ue("/api/get-authenticated-user"),u=c.data.result;return{...u,phone:u.phone&&u.phone[0]==="7"?`+${u.phone}`:u.phone,cities:u.cities||[],counts:c.data.counts}}catch{n("loggedIn",{path:"/"}),n("access_token",{path:"/"}),t(Pb({})),t(Ib([]))}};return{setAuthUser:a,userConnectionEcho:o,getAuthUser:l}},v$=({onSubmitLoginPhone:t=()=>{}})=>{const[e,n,s]=ur(),{handleSubmit:i,control:a,formState:{errors:o},setError:l,setValue:c,watch:u}=en(),[d,h]=v.useState(!1),[f,p]=v.useState(""),[g,m]=v.useState(!1),_=u("code"),{setAuthUser:y}=u4(),{logout:x}=dw(),b=v.useRef(null),w=v.useRef(null),C=N=>{N===401&&l("code",{type:"manual",message:"Неверный код. Попробуйте ещё раз"}),N===429&&l("code",{type:"manual",message:"Превышено количество попыток ввода, повторите позже"})},j=async N=>{e.loggedIn&&await x(),Me("/api/login/phone",{phone:N.phone}).then(P=>{P.data.continue&&(h(!0),p(N.phone),setTimeout(()=>{var I;(I=b.current)!=null&&I.inputElement&&(b.current.inputElement.focus(),b.current.inputElement.setSelectionRange(0,0))},100))}).catch(P=>{const I=JSON.parse(P.request.response).message;I==="direction not allowed"&&l("phone",{type:"manual",message:"Произошла ошибка, проверьте номер телефона или попробуйте позже"}),I==="Too many requests for one phone in hour"&&l("phone",{type:"manual",message:"Вы превысили попытки ввода за час, попробуйте позже"}),I==="Too many requests for one phone in 24 hours"&&l("phone",{type:"manual",message:"Вы превысили попытки ввода за 24 часа."})})},E=N=>{if(N.code.length!==4)return;const P={phone:f,code:N.code};Me("/api/login/phone",{...P}).then(I=>{I.data.continue||(h(!1),n("loggedIn",!0,{maxAge:Zb,path:"/"}),n("access_token",I.data.result,{maxAge:Zb,path:"/"}),y().then(B=>{t(B)}))}).catch(I=>{const B=I.message.split(" ").pop();C(+B)})},T=()=>{c("code",""),h(!1),m(!1),p("")};return v.useEffect(()=>{_&&_.length>=4&&i(E)()},[_]),v.useEffect(()=>{setTimeout(()=>{var N;(N=w.current)!=null&&N.inputElement&&(w.current.inputElement.focus(),w.current.inputElement.setSelectionRange(4,4))},100)},[]),r.jsx(r.Fragment,{children:!d&&!f?r.jsxs("form",{onSubmit:i(j),children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"title-2 mb-3",children:"Введите номер телефона"}),r.jsx("p",{className:"text-defaultMax",children:"Вам поступит бесплатный звонок."}),r.jsx("p",{className:"mt-0.5 text-defaultMax",children:"Отвечать на звонок не нужно."})]}),r.jsx(ow,{control:a,errors:o,size:"60",refInput:w}),r.jsx(_e,{size:"Big",className:"w-full mt-4",children:"Получить код"})]}):r.jsxs("form",{onSubmit:i(E),children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"mb-4 bg-pageColor rounded-xl p-5 flex gap-6",children:[r.jsxs("div",{className:"bg-white flex-center-all relative w-10 h-10 rounded-xl flex-shrink-0",children:[r.jsx(nae,{width:24,height:24,className:"fill-blue"}),r.jsxs("div",{className:"voicecall-animation",children:[r.jsx("span",{className:"voicecall-animation-item"}),r.jsx("span",{className:"voicecall-animation-item"}),r.jsx("span",{className:"voicecall-animation-item"}),r.jsx("span",{className:"voicecall-animation-item"})]})]}),r.jsxs("h2",{className:"title-3-5",children:["Вам звонит робот. ",r.jsx("br",{})," Введите последние 4 цифры входящего номера."]})]}),r.jsxs("p",{children:[r.jsx("span",{className:"mr-2",children:"Например +7 XXX XXX"}),r.jsx("span",{className:Yoe.LoginPhoneDecorNumber,children:"12 34"})]}),r.jsx("p",{className:"mt-2",children:"Отвечать на звонок не нужно"}),r.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[r.jsxs("p",{children:["Уже звоним на ",r.jsx("span",{className:"text-dark font-medium",children:Tce(f)})]}),g&&r.jsx("button",{type:"button",className:"blue-link",onClick:T,children:"Изменить"})]})]}),r.jsx(Qe,{name:"code",control:a,errors:o,size:"60",mask:"numbers4",variant:"Code",maxLength:5,refInput:b}),r.jsx(_e,{className:"mt-2 w-full",disabled:!g,type:"button",variant:"secondary",onClick:()=>{g&&(i(j)(),m(!1))},children:g?"Получить новый код":r.jsxs(r.Fragment,{children:["Отправить повторно через ",r.jsx(Uce,{initialTime:25,onComplete:()=>m(!0)})," сек."]})})]})})},xhe=()=>r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Вход по номеру телефона"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper flex flex-col",children:r.jsx("div",{className:"white-block !py-16 flex-grow",children:r.jsx("div",{className:"max-w-[505px] m-auto",children:r.jsx(v$,{onSubmitLoginPhone:t=>{const e=t.role.id;e===sn.id&&(window.location.href=ke.home),e===Wt.id&&(window.location.href=Ji.profile.edit),e===pn.id&&(window.location.href=ht.dashboardAdmin)}})})})})})]}),y$=({condition:t,set:e})=>r.jsx(gt,{options:{overlayClassNames:"_right",modalClassNames:"!w-[440px]",modalContentClassNames:"!px-10 !pt-[115px]"},condition:t,set:e,children:r.jsx(v$,{onSubmitLoginPhone:n=>{e(!1);const s=n.role.id;s!==sn.id&&(s===Wt.id&&(window.location.href=Ji.profile.edit),s===pn.id&&(window.location.href=ht.dashboardAdmin))}})}),bm=({condition:t,set:e})=>(v.useState(!1),r.jsx(r.Fragment,{children:r.jsx(Ze,{condition:t,children:r.jsx(y$,{condition:t,set:e})})})),bhe="_SpinnerOverlay_c79jd_1",_he="_SpinnerRoot_c79jd_5",whe="_rotation_c79jd_1",Che="_SpinnerRootSmall_c79jd_22",xv={SpinnerOverlay:bhe,SpinnerRoot:_he,rotation:whe,SpinnerRootSmall:Che},Ol=({className:t=""})=>r.jsx("div",{className:`${xv.SpinnerRoot} ${t}`}),d4=({className:t="",classNameSpinner:e="",children:n})=>r.jsxs("div",{className:`${xv.SpinnerOverlay} ${t}`,children:[r.jsx("div",{className:`${xv.SpinnerRoot} ${e}`}),n]}),fd=({className:t="",size:e=24,variant:n})=>r.jsx("div",{style:{width:e,height:e},className:`${xv.SpinnerRoot} ${xv.SpinnerRootSmall} ${n==="second"?"!border-white !border-b-blue":""} ${t}`}),Ts=t=>{const{className:e="",Selector:n="button"}=t;return n!=="button"?r.jsx("div",{className:`${cv.BtnAction} ${e}`,children:t.children}):r.jsx("button",{type:"button",...t,className:`${cv.BtnAction} ${e}`,children:t.children})},h4=t=>{const{className:e=""}=t;return r.jsx("button",{type:"button",...t,className:`${cv.BtnActionText} ${e}`,children:t.children})},mi=t=>{const{className:e="",variant:n="bg"}=t;return r.jsx("button",{type:"button",...t,className:`${n==="bg"?cv.BtnActionBg:n==="circle"?cv.BtnActionCircle:""} ${e}`,children:t.children})},She=t=>{const{className:e="",Selector:n="button"}=t;return n!=="button"?r.jsx("div",{title:"Смотреть",className:e,children:r.jsx(ci,{className:"fill-blue",width:18,height:18})}):r.jsx("button",{type:"button",...t,title:"Смотреть",className:e,children:r.jsx(ci,{className:"fill-blue",width:18,height:18})})},bv=t=>{const{className:e="",Selector:n="button",title:s="Редактировать"}=t;return n!=="button"?r.jsx("div",{title:s,className:e,children:r.jsx(Ns,{className:"stroke-blue stroke-[1.5px]",width:18,height:18})}):r.jsx("button",{type:"button",...t,title:s,className:e,children:r.jsx(Ns,{className:"stroke-blue stroke-[1.5px]",width:18,height:18})})},Xu=t=>{const{className:e="",variant:n=""}=t;return r.jsx("button",{type:"button",...t,title:"Удалить",className:`${n==="absolute"?"absolute top-4 right-4 w-8 h-8 z-99 bg-white rounded-lg flex items-center justify-center transition-all shadow-primary opacity-0 invisible":""} ${e}`,children:r.jsx(un,{className:"fill-red",width:16,height:16})})},jhe=t=>{const{className:e=""}=t;return r.jsx("button",{type:"button",...t,title:"Сохранить",className:e,children:r.jsx(Kie,{className:"fill-blue",width:16,height:16})})},zh=t=>{var d,h,f;const{id:e,type:n,variant:s,placement:i="bottom",className:a=""}=t,[o,l]=v.useState(!1),c=()=>{Me("/api/metric",{type:"added_to_compare",metricable_type:n==="complex"?"App\\Models\\Building":"App\\Models\\Apartment",metricable_id:e}).then(p=>{console.log(p)})},u=()=>{const p=localStorage.getItem(`comparison_${n}`);if(p){const g=JSON.parse(p);if(g.includes(e)){l("delete");const m=g.filter(_=>_!==e);localStorage.setItem(`comparison_${n}`,JSON.stringify(m))}else l("add"),c(),localStorage.setItem(`comparison_${n}`,JSON.stringify([...g,e]))}else l("add"),c(),localStorage.setItem(`comparison_${n}`,JSON.stringify([e]))};return r.jsxs(r.Fragment,{children:[s==="tooltip"&&r.jsx(r.Fragment,{children:r.jsx($t,{placement:i,offset:[10,5],ElementTarget:()=>{var p;return r.jsx(Ts,{className:"relative z-50",onClick:u,children:(p=JSON.parse(localStorage.getItem(`comparison_${n}`)))!=null&&p.includes(e)?r.jsx(II,{width:16,height:16,className:"pointer-events-none fill-blue"}):r.jsx(ov,{width:16,height:16,className:"pointer-events-none"})})},children:(d=JSON.parse(localStorage.getItem(`comparison_${n}`)))!=null&&d.includes(e)?"Удалить из сравнения":"Добавить в сравнение"})}),(s==="bg"||s==="circle")&&r.jsx(r.Fragment,{children:r.jsx(mi,{variant:s,onClick:u,className:a,title:(h=JSON.parse(localStorage.getItem(`comparison_${n}`)))!=null&&h.includes(e)?"Удалить из сравнения":"Добавить в сравнение",children:(f=JSON.parse(localStorage.getItem(`comparison_${n}`)))!=null&&f.includes(e)?r.jsx(II,{width:16,height:16,className:"pointer-events-none fill-blue"}):r.jsx(ov,{width:16,height:16,className:"pointer-events-none"})})}),o==="add"&&on.createPortal(r.jsxs(yi,{show:o,set:l,onClose:()=>l(!1),classListRoot:"min-w-[300px]",children:[r.jsx("span",{className:"font-medium text-defaultMax",children:"Добавлено в сравнение"}),r.jsx(Ke,{className:"block underline mt-2",to:ke.comparison,children:"Перейти"})]}),document.getElementById("overlay-wrapper")),o==="delete"&&on.createPortal(r.jsx(yi,{show:o,set:l,onClose:()=>l(!1),classListRoot:"min-w-[300px]",children:r.jsx("span",{className:"font-medium text-defaultMax",children:"Удалено с сравнения"})}),document.getElementById("overlay-wrapper"))]})},Uc=t=>{const{id:e,type:n,variant:s,placement:i="bottom",className:a=""}=t,[o]=ur(),l=Dt(),{likes:c}=ue(zoe),[u,d]=v.useState(!1),h=n==="complex"?"building":n==="apartment"?"apartment":"",[f,p]=v.useState(!1),[g,m]=v.useState(!1),[_,y]=v.useState(!1);v.useEffect(()=>{if(!o.loggedIn)return;c.find(w=>w.id===+e&&w.type===h)&&m(!0)},[JSON.stringify(c)]);const x=()=>{if(!o.loggedIn){d(!0);return}p(!0),Me("/api/like",{likeable_id:e,likeable_type:h}).then(b=>{p(!1),m(b.data.newLike),b.data.newLike?y("add"):y("delete"),Ue("/api/likes").then(w=>{l(Ib(w.data))})})};return r.jsxs(r.Fragment,{children:[r.jsx(bm,{condition:u,set:d}),s==="tooltip"&&r.jsx(r.Fragment,{children:f?r.jsx(Ts,{className:"relative z-50",children:r.jsx(fd,{size:16})}):r.jsx(r.Fragment,{children:g?r.jsx($t,{placement:i,offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:x,children:r.jsx(ku,{width:14,height:14,className:"pointer-events-none fill-red"})}),children:"Удалить с избранное"}):r.jsx($t,{placement:i,offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:`relative z-50 ${a}`,onClick:x,children:r.jsx(ku,{width:14,height:14,className:"pointer-events-none"})}),children:"Добавить в избранное"})})}),(s==="bg"||s==="circle")&&r.jsx(r.Fragment,{children:g?r.jsx(mi,{variant:s,onClick:x,className:a,title:"Удалить с избранное",children:r.jsx(ku,{width:16,height:16,className:"pointer-events-none !fill-red"})}):r.jsx(mi,{variant:s,onClick:x,className:a,title:"Добавить в избранное",children:r.jsx(ku,{width:16,height:16,className:"pointer-events-none"})})}),_==="add"&&on.createPortal(r.jsxs(yi,{show:_,set:y,onClose:()=>y(!1),classListRoot:"min-w-[300px]",children:[r.jsx("span",{className:"font-medium text-defaultMax",children:"Добавлено в избранное"}),r.jsx(Ke,{className:"block underline mt-2",to:ke.favorites,children:"Перейти"})]}),document.getElementById("overlay-wrapper")),_==="delete"&&on.createPortal(r.jsx(yi,{show:_,set:y,onClose:()=>y(!1),classListRoot:"min-w-[300px]",children:r.jsx("span",{className:"font-medium text-defaultMax",children:"Удалено с избранного"})}),document.getElementById("overlay-wrapper"))]})},yw=t=>{const{set:e,variant:n="bg"}=t;return r.jsx(mi,{variant:n,onClick:()=>e(!0),title:"Поделиться",children:r.jsx(X2,{width:16,height:16})})},Qf=({to:t=0,duration:e=2e3})=>{const[n,s]=v.useState(0),i=v.useRef(null),a=v.useRef(t);return v.useEffect(()=>{(a.current!==t||i.current===null)&&(i.current=null,a.current=t);const o=c=>{i.current||(i.current=c);const u=c-i.current,d=Math.min(u/e,1),h=n+(t-n)*d;s(h),d>=1?s(t):requestAnimationFrame(o)},l=requestAnimationFrame(o);return()=>cancelAnimationFrame(l)},[t,e,n]),r.jsx(r.Fragment,{children:pt(n.toFixed(2))})},The="_List_1np6f_1",Ehe="_Badge_1np6f_7",Nhe="_BadgeMortgage_1np6f_21",khe="_BadgeNoMortgage_1np6f_29",Ahe="_BadgeCash_1np6f_37",Dhe="_BadgeCertificate_1np6f_45",Phe="_BadgeUrgently_1np6f_53",Ihe="_BadgeMonthlyPayment_1np6f_61",Mhe="_BadgeNoDownPayment_1np6f_69",Ohe="_BadgeText_1np6f_77",Rhe="_BadgeTextAbsolute_1np6f_86",Lhe="_BadgeTextAnimated_1np6f_91",Bhe="_BadgeTextAnimatedFrames_1np6f_1",Fhe="_BadgeTextWhite_1np6f_113",$he="_BadgeTextDark_1np6f_118",wu={List:The,Badge:Ehe,BadgeMortgage:Nhe,BadgeNoMortgage:khe,BadgeCash:Ahe,BadgeCertificate:Dhe,BadgeUrgently:Phe,BadgeMonthlyPayment:Ihe,BadgeNoDownPayment:Mhe,BadgeText:Ohe,BadgeTextAbsolute:Rhe,BadgeTextAnimated:Lhe,BadgeTextAnimatedFrames:Bhe,BadgeTextWhite:Fhe,BadgeTextDark:$he},x$=({data:t,className:e="",container:n=!0})=>{if(!t||t.length===0)return;const s=()=>t.map((i,a)=>{switch(i){case"Ипотека, есть одобрение от банка":return r.jsx(Uhe,{},a);case"Ипотека, нет одобрения от банка":return r.jsx(Vhe,{},a);case"Наличные":return r.jsx(zhe,{},a);case"В сделке будет использоваться сертификат":return r.jsx(Hhe,{},a);case"Срочно":return r.jsx(qhe,{},a);case"Поиск квартиры по ежемесячному платежу":return r.jsx(Whe,{},a);case"Без первоначального взноса":return r.jsx(Ghe,{},a);default:return""}});return r.jsx(r.Fragment,{children:n?r.jsx("div",{className:`${wu.List} ${e}`,children:r.jsx(s,{})}):r.jsx(s,{})})},Hh=({text:t,variant:e})=>r.jsx("button",{className:`${wu.Badge} ${wu[e]}`,children:t}),b$=({children:t,color:e="white",variant:n="",className:s="",animated:i})=>{const a=()=>{switch(e){case"white":return wu.BadgeTextWhite;case"dark":return wu.BadgeTextDark;default:return""}},o=()=>{switch(n){case"absolute":return wu.BadgeTextAbsolute;default:return""}};return r.jsxs("div",{className:`${wu.BadgeText} ${a()} ${o()} ${s}`,children:[i?r.jsx("div",{className:wu.BadgeTextAnimated}):"",t]})},Uhe=()=>r.jsx(Hh,{variant:"BadgeMortgage",text:"Ипотека, есть одобрение от банка"}),Vhe=()=>r.jsx(Hh,{variant:"BadgeNoMortgage",text:"Ипотека, нет одобрения от банка"}),zhe=()=>r.jsx(Hh,{variant:"BadgeCash",text:"Наличные"}),Hhe=()=>r.jsx(Hh,{variant:"BadgeCertificate",text:"В сделке используется сертификат"}),qhe=()=>r.jsx(Hh,{variant:"BadgeUrgently",text:"Срочно"}),Whe=()=>r.jsx(Hh,{variant:"BadgeMonthlyPayment",text:"Поиск квартиры по ежемесячному платежу"}),Ghe=()=>r.jsx(Hh,{variant:"BadgeNoDownPayment",text:"Без первоначального взноса"}),Yhe="_Tag_180q9_1",Xhe="_TagHoverEnable_180q9_24",Khe="_TagSmall_180q9_29",Qhe="_TagMediumSize_180q9_36",Zhe="_TagGreen_180q9_42",Jhe="_TagGreenSecond_180q9_47",efe="_TagDarkGreen_180q9_52",tfe="_TagAqua_180q9_56",nfe="_TagPurple_180q9_61",sfe="_TagYellow_180q9_66",rfe="_TagRed_180q9_71",ife="_TagBlue_180q9_76",afe="_TagSelect_180q9_81",ofe="_TagChoice_180q9_97",lfe="_TagChoiceActive_180q9_108",cfe="_TagDisabled_180q9_112",ufe="_TagActive_180q9_117",dfe="_TagWhite_180q9_122",bs={Tag:Yhe,TagHoverEnable:Xhe,TagSmall:Khe,TagMediumSize:Qhe,TagGreen:Zhe,TagGreenSecond:Jhe,TagDarkGreen:efe,TagAqua:tfe,TagPurple:nfe,TagYellow:sfe,TagRed:rfe,TagBlue:ife,TagSelect:afe,TagChoice:ofe,TagChoiceActive:lfe,TagDisabled:cfe,TagActive:ufe,TagWhite:dfe},_$="/assets/present-BcK3YhGH.png",Rl=({to:t,children:e,className:n,...s})=>r.jsx(Ke,{to:t,target:"_blank",rel:"noopener noreferrer",className:He(n),...s,children:e}),hfe="/assets/crown-D_m75ulL.png",An=({size:t="default",color:e="default",children:n,childrenRoot:s,onClick:i=()=>{},value:a,className:o="",tagObj:l={},hoverEnable:c,disabled:u=!1})=>{let d=!!a;const h=()=>{i(!d)},f=()=>{switch(t){case"small":return bs.TagSmall;case"medium":return bs.TagMediumSize;case"big":return bs.TagBig;default:return""}},p=()=>{switch(e){case"default":return"";case"green":return bs.TagGreen;case"green-second":return bs.TagGreenSecond;case"aqua":return bs.TagAqua;case"red":return bs.TagRed;case"yellow":return bs.TagYellow;case"purple":return bs.TagPurple;case"darkGreen":return bs.TagDarkGreen;case"blue":return bs.TagBlue;case"select":return bs.TagSelect;case"white":return bs.TagWhite;case"choice":return bs.TagChoice;default:return""}};return l&&l.link?r.jsx($t,{mobile:!0,color:"white",ElementTarget:()=>r.jsx("button",{type:"button",onClick:h,className:He("relative z-[99]",bs.Tag,bs.TagHoverEnable,f(),p(),d&&e==="choice"?bs.TagChoiceActive:bs.TagActive,o),children:r.jsxs("div",{className:`${l.link?"flex !items-center gap-1":""}`,children:[n,!!l.link&&r.jsx(Lp,{width:14,height:14})]})}),children:r.jsxs("div",{className:"pr-8 flex flex-col items-start gap-2",children:[l.name,r.jsx("a",{href:l.link,target:"_blank",className:"blue-link",children:"Подробнее"})]})}):r.jsxs("button",{type:"button",onClick:h,className:He("relative z-[99]",bs.Tag,c&&bs.TagHoverEnable,f(),p(),d&&bs.TagActive,o,u&&bs.TagDisabled),children:[r.jsx("div",{children:n}),s]})},Sa=({cashback:t="",prefix:e="Кешбэк до",increased:n})=>{if(t)return r.jsxs($t,{mobile:!0,ElementTarget:()=>r.jsxs(An,{size:"small",color:"green",childrenRoot:r.jsx(r.Fragment,{children:!!n&&r.jsx("img",{src:hfe,width:25,height:25,className:"absolute -top-4 right-1/2 translate-x-1/2",alt:"Повышенный кешбэк"})}),children:[e," ",pt(t)," ₽"]}),classNameContent:"mmd1!p-6",placement:"bottom",children:[r.jsx("h3",{className:"title-3-5 !text-white md1:!text-dark",children:"Кешбэк за покупку объекта"}),r.jsx("p",{className:"mt-2",children:"Начислим наличными за покупку на банковскую карту."}),r.jsx(Rl,{to:ke.cashbackConditions,className:"blue-link font-medium mt-2.5",children:"Условия акции «Кешбэк»"})]})},pd=({present:t="",title:e="Подарок"})=>t&&r.jsx(An,{size:"small",color:"purple",children:r.jsxs("span",{className:"flex items-center gap-2 w-max",children:[r.jsx("img",{src:_$,width:15,height:15,alt:"Подарок"}),e]})}),xw=({dataMainGifts:t=[],dataSecondGifts:e=[],title:n="Подарки",secondTitle:s=null})=>{if([...t,...e].length)return r.jsx($t,{mobile:!0,color:"dark",ElementTarget:()=>r.jsx(pd,{present:!0,title:n}),children:r.jsxs("div",{className:"mmd1:pr-8 flex flex-col items-start gap-4",children:[!!t.length&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium mb-2",children:"Гарантированные подарки:"}),r.jsx("div",{className:"flex flex-col items-start gap-2",children:t.map((a,o)=>r.jsx(An,{size:"small",children:a},o))})]}),!!e.length&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium mb-2",children:"Подарки на выбор:"}),r.jsx("div",{className:"flex flex-col items-start gap-2 ",children:e.map((a,o)=>r.jsx(An,{size:"small",children:a},o))})]})]})})},Ah=({top:t=""})=>t&&r.jsx(An,{size:"small",color:"aqua",children:t}),Ac=({discount:t="",type:e="prc",type_id:n=1,prefix:s="вам",suffix:i="",tooltip:a=!1,start_date:o,end_date:l,unit:c,building_info:u=!1,timer:d=!1})=>{const h=n?n===1?"prc":"cash":e;if(t)return a&&o&&l&&c?r.jsx($t,{mobile:!0,ElementTarget:()=>r.jsx(An,{size:"small",color:"yellow",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(pae,{width:12,height:12}),s,r.jsxs("span",{children:["-",pt(t)," ",h==="prc"?"%":"₽"]}),c===2&&r.jsx("span",{className:"-ml-1",children:"/м²"}),i,!!d&&r.jsx("div",{children:"| 3д. 12ч. 57 мин."}),r.jsx(Lp,{width:16,height:16,className:"!stroke-[#bc9829]"})]})}),children:r.jsx("div",{className:"font-medium text-center",children:u?r.jsxs(r.Fragment,{children:["Скидка ",pt(t)," ",h==="prc"?"%":"₽"," на определённые квартиры ",r.jsx("br",{}),"Действует с ",o," до ",l]}):r.jsxs(r.Fragment,{children:["Скидка действует с ",o," ",r.jsx("br",{})," до ",l," на данную квартиру"]})})}):r.jsx(An,{size:"small",color:"yellow",children:r.jsxs("div",{className:"flex items-center gap-1",children:[s,r.jsxs("span",{children:[pt(t)," ",h==="prc"?"%":"₽"]})]})})},ffe="_HistoryPriceContent_19rwn_1",pfe="_HistoryPriceItem_19rwn_5",mfe="_HistoryPriceItemDefault_19rwn_16",gfe="_HistoryPriceItemMini_19rwn_25",vfe="_HistoryPriceDate_19rwn_29",yfe="_HistoryPriceStatusUp_19rwn_34",xfe="_HistoryPriceStatusDown_19rwn_46",Wd={HistoryPriceContent:ffe,HistoryPriceItem:pfe,HistoryPriceItemDefault:mfe,HistoryPriceItemMini:gfe,HistoryPriceDate:vfe,HistoryPriceStatusUp:yfe,HistoryPriceStatusDown:xfe},bfe=({data:t,className:e=""})=>{const n=({status:s})=>s==="up"?r.jsx(Vie,{width:15,height:15}):s==="down"?r.jsx(Uie,{width:15,height:15}):"";return r.jsxs($t,{mobile:!0,color:"white",event:"click",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:`w-7 h-7 ${e}`,children:r.jsx(n,{status:t[0].status})}),close:!0,children:[r.jsx("h3",{className:"title-3",children:"История изменения цены"}),r.jsx(w$,{data:t,variant:"mini"})]})},w$=({data:t,variant:e="default"})=>{const n=ue(rt);return r.jsx(r.Fragment,{children:r.jsx("div",{className:Wd.HistoryPriceContent,children:t.map((s,i)=>r.jsxs("div",{className:`${Wd.HistoryPriceItem} ${e==="default"?Wd.HistoryPriceItemDefault:Wd.HistoryPriceItemMini}`,children:[r.jsx("span",{className:Wd.HistoryPriceDate,children:s.date}),r.jsxs("div",{className:"flex items-center gap-4",children:[e==="default"&&n?r.jsxs(cd,{children:[pt(s.value)," ₽"]}):"",r.jsxs("span",{className:_fe(s.status),children:[wfe(s.status),pt(Math.abs(s.price-s.value))," ₽"]})]}),r.jsxs("span",{className:"font-medium",children:[pt(s.price)," ₽"]})]},i))})})},_fe=t=>t==="up"?Wd.HistoryPriceStatusUp:t==="down"?Wd.HistoryPriceStatusDown:"",wfe=t=>t==="up"?"+":t==="down"?"-":"",bw=(t,e,n=1)=>{if(!t)return null;let s;if(t.type===1&&(s=e-e/100*t.value),t.type===2){const i=e/n;t.unit===2?(s=(i-t.value)*n,console.log(s)):s=e-t.value}return s},C$=({className:t=""})=>{const{priceOld:e,area:n,historyPrice:s,myDiscount:i,history_price_old:a,userRole:o,purchaseId:l,buildingDiscount:c,cashbackValue:u,buildingCashback:d,priceByDiscount:h,present:f}=v.useContext(dy),p=ue(rt);return r.jsxs("div",{className:t,children:[!!(a!==e||i)&&r.jsx("div",{className:"flex gap-3 mb-1",children:!(o===Wt.name&&l)&&r.jsx(r.Fragment,{children:i&&r.jsx(Ac,{discount:i.discount,type:i.type})})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-4",children:[!h&&r.jsxs("h2",{className:"title-1",children:[pt(e)," ₽"]}),h&&r.jsxs("div",{className:"flex gap-4 items-center",children:[r.jsxs("h2",{className:"title-2",children:[pt(h)," ₽"]}),r.jsxs(cd,{children:[pt(e)," ₽"]})]})]}),p&&r.jsx(r.Fragment,{children:!!(c||u)&&r.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[!!c&&r.jsx(Ac,{discount:c.value,type_id:c.type,prefix:"Скидка",tooltip:!0,start_date:ct(c.start_date).format("DD.MM.YYYY"),end_date:ct(c.end_date).format("DD.MM.YYYY"),unit:c.unit}),!!u&&r.jsx(Sa,{cashback:u,prefix:"Кешбэк",increased:!!d}),f&&r.jsx(pd,{present:f})]})})]})]})},Ro=({condition:t,set:e,request:n=null,title:s="Вы действительно хотите удалить?",descr:i="Это действие необратимо"})=>{const[a,o]=v.useState(!1),l=()=>{if(o(!0),!n){console.error("request empty");return}!Number(t)&&!ew(t)||n(t)};return r.jsx(gt,{condition:!!t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[700px]"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"title-2",children:s}),r.jsx("p",{className:"mt-2",children:i}),r.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-2",children:[r.jsx(_e,{onClick:()=>e(!1),children:"Нет"}),r.jsx(_e,{isLoading:a,onClick:l,children:"Да"})]})]})})},vy=({options:t})=>{const{condition:e,set:n,title:s,redirectUrl:i=null}=t;return r.jsx(Ze,{condition:e,children:r.jsx(Ro,{condition:e,title:r.jsxs(r.Fragment,{children:["Вы действительно хотите удалить ",s," ?"]}),set:n,request:async a=>{await Ue(`/admin-api/delete/apartment/${a}`),i?window.location.href=i:i===null&&window.location.reload()}})})},Cfe="_AnimatedText_14je0_1",Sfe="_fadeInOut_14je0_1",jfe={AnimatedText:Cfe,fadeInOut:Sfe},_m=({texts:t=[],intervalTime:e=3e3})=>{if(!(t!=null&&t.length))return;const[n,s]=v.useState(0);return v.useEffect(()=>{const i=setInterval(()=>{s(a=>(a+1)%t.length)},e);return()=>clearInterval(i)},[t.length,e]),r.jsx("span",{className:jfe.AnimatedText,style:{animationDuration:`${e}ms`},children:t[n]},n)},b6=()=>{const{id:t,developer:e,priceOld:n,masterSub:s,gift_group:i,title:a,myDiscount:o,city:l,setIsOpenRecordView:c,goToChat:u,setIsOpenShareModal:d,userRole:h,purchaseId:f,buildingCashback:p,buildingDiscount:g,cashbackValue:m,priceByDiscount:_}=v.useContext(dy),y=ue(E=>E.apartment),x=ue(rt),[b,w]=v.useState(!1),C=o?o.type==="price"?o.discount:n/100*o.discount:null,j=m+(y.info.maxAmount?y.info.maxAmount-y.info.leftPrice:0)+y.defaultPresents.reduce((E,T)=>E+(T.oldPrice-(T.newPrice||0)),0)+(+C||0)+(_?n-_:0);return r.jsxs(lo,{children:[r.jsxs("div",{className:"flex flex-col white-block-small !pt-2",children:[x&&r.jsxs(r.Fragment,{children:[h===pn.name?r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[r.jsx(Ke,{to:`${ht.apartment.edit}${t}`,className:"w-full h-full block",children:r.jsx(mi,{title:"Редактировать",children:r.jsx(Ns,{className:"!stroke-[currentColor] !stroke-[1.5px] !fill-none",width:18,height:18})})}),r.jsx(mi,{title:"Удалить",onClick:()=>w(t),children:r.jsx(un,{className:"fill-red",width:16,height:16})})]}):r.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[r.jsx(Uc,{id:t,type:"apartment",variant:"bg",className:h===Wt.name?"opacity-60 pointer-events-none":""}),r.jsx(zh,{id:t,type:"apartment",variant:"bg",className:h===Wt.name?"opacity-60 pointer-events-none":""}),r.jsx(yw,{set:d})]}),r.jsx("h4",{className:"title-4 mt-2 mb-1",children:a}),r.jsx(C$,{})]}),!(h===Wt.name&&f)&&o&&!Ye(o)&&r.jsx("div",{className:"mb-4",children:r.jsx($ce,{date:ct(ct.unix(o.valid_till)).format("YYYY-MM-DD")})}),!!(y.selectedPresents.length||y.defaultPresents.length)&&r.jsxs("div",{className:"mt-4 mmd1:pt-4 md1:mt-2 border-top-lightgray md1:!border-none",children:[!x&&r.jsx("h3",{className:"title-3 mb-2",children:"Подарки:"}),r.jsx("div",{className:"flex flex-col gap-4 scrollbarPrimary overflow-y-auto max-h-[125px] pr-4",children:[...y.defaultPresents,...y.selectedPresents].map((E,T)=>r.jsxs("div",{className:"flex gap-4 flex-nowrap",children:[r.jsx("span",{className:"font-medium overflow-hidden w-full text-ellipsis whitespace-nowrap",children:E.title}),r.jsx("div",{className:"whitespace-nowrap",children:r.jsxs(cd,{children:[pt(E.oldPrice||0)," ₽"]})}),r.jsxs("span",{className:"font-medium whitespace-nowrap",children:[pt(E.newPrice||0)," ₽"]})]},T))})]}),!!(!(h===Wt.name&&f)&&j)&&r.jsxs("div",{className:"bg-pageColor p-1 rounded-lg mt-4",children:[r.jsxs("div",{className:"my-2 px-3 flex flex-col gap-2 w-full",children:[!!C&&r.jsxs(vn,{justifyBetween:!0,color:"blue",children:[r.jsx("span",{className:"!text-dark !font-medium",children:"Персональная скидка"}),r.jsxs("span",{className:"!text-dark !font-medium",children:[pt(C)," ₽"]})]}),_&&r.jsxs(vn,{justifyBetween:!0,children:[r.jsxs("span",{className:"!text-dark !font-medium",children:["Скидка  -",pt(g.value)," ",g.type===1?"%":"₽",g.unit===2&&"/м²"]}),r.jsxs("span",{className:"!text-[#b57600] !font-medium",children:[r.jsx(Qf,{to:n-_})," ₽"]})]}),!!m&&r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{className:"!text-dark !font-medium",children:"Кешбэк наличными"}),r.jsxs("span",{className:"!text-[#009532] !font-medium",children:[r.jsx(Qf,{to:m})," ₽"]})]}),(y.selectedPresents.length>0||y.defaultPresents.length>0)&&i&&r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{className:"!text-dark !font-medium",children:"Подарки на сумму"}),r.jsxs("span",{className:"!text-dark !font-medium",children:[r.jsx(Qf,{to:Number(y.info.maxAmount)-Number(y.info.leftPrice)+Number(y.defaultPresents.reduce((E,T)=>E+(T.oldPrice-(T.newPrice||0)),0))})," ₽"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between w-full font-medium bg-white py-2 px-3 rounded-lg",children:[r.jsx("span",{className:"text-bigSmall",children:"Ваша выгода:"}),r.jsxs("span",{className:"text-bigSmall",children:[r.jsx(Qf,{to:m+(y.info.maxAmount?y.info.maxAmount-y.info.leftPrice:0)+y.defaultPresents.reduce((E,T)=>E+(T.oldPrice-(T.newPrice||0)),0)+(+C||0)+(_?n-_:0)})," ₽"]})]})]}),x&&(h===sn.name||h===Wt.name&&f)&&r.jsxs("div",{className:`mt-6 flex flex-col gap-2 w-full ${y.selectedPresents.length+y.defaultPresents.length?"gap-4":""}`,children:[h===sn.name&&r.jsxs(r.Fragment,{children:[r.jsxs(_e,{onClick:u,className:"relative",children:[!!(y.selectedPresents.length+y.defaultPresents.length)&&r.jsx(b$,{color:"dark",variant:"absolute",className:"-top-3 -right-3",animated:!0,children:"Подарки закреплены за вами"}),"Задать вопрос в чат"]}),r.jsx(_e,{variant:"secondary",onClick:()=>c(!0),className:"relative",children:r.jsx(_m,{texts:["Записаться на просмотр","Записаться на онлайн-показ"],intervalTime:3e3})})]}),h===Wt.name&&f&&r.jsx(_e,{onClick:()=>{const E=ct(),T={order_id:f,property_type:"apartment",property_id:t,date:E.format("YYYY-MM-DD"),time:E.format("HH:mm")};Me("/seller-api/suggestions/create",T).then(N=>{alert("Ваше предложение отправлено.")})},children:"Предложить объект"})]}),r.jsx(Vs,{className:"mt-8",avatar:e==null?void 0:e.avatar_url,name:e==null?void 0:e.name,pos:e==null?void 0:e.pos,centered:!0,nameHref:`${ke.developers.inner}${e==null?void 0:e.id}?city=${l}`})]}),r.jsx(vy,{options:{condition:b,set:w,redirectUrl:`${ke.listing}`}})]})},Tfe="_ApartmentInfoChars_16438_1",Efe={ApartmentInfoChars:Tfe},Nfe="_BtnShowRoot_1nfp1_1",kfe="_BtnShowRootActive_1nfp1_13",_6={BtnShowRoot:Nfe,BtnShowRootActive:kfe},f4=({children:t,onClick:e,active:n=!1,className:s="",btnIcon:i=!0})=>r.jsxs("button",{onClick:e,className:`${_6.BtnShowRoot} ${n?_6.BtnShowRootActive:""} ${s}`,children:[t,i&&r.jsx(Yu,{})]}),p4=({data:t,gap:e=8,className:n=""})=>{const[s,i]=v.useState(t),[a,o]=v.useState([]),l=v.useRef([]),[c,u]=v.useState(!0),[d,h]=v.useState(!1),f=v.useRef(null),p=()=>{const m=f.current;let _=0;const y=[],x=[];l.current.forEach((b,w)=>{b&&(_+=b.offsetWidth+e,_>m.offsetWidth-100||b.offsetWidth===0?x.push(t[w]):y.push(t[w]))}),i(y),x.length?(o(x),h(!0)):o([])};v.useEffect(()=>{p(),setTimeout(()=>{u(!1)},50)},[]);const g=m=>_=>{_&&(l.current[m]=_)};return r.jsxs("div",{ref:f,className:He(c?"opacity-0":"flex-wrap",n),children:[s.map((m,_)=>{const y=t.find(x=>m.id===x.id);return r.jsx("div",{ref:g(_),children:r.jsx(An,{size:"medium",className:"!rounded-xl",onClick:x=>y.onClick(x),value:y.value,children:y.label})},_)}),d&&r.jsx(r.Fragment,{children:a.length?r.jsxs("button",{className:"ml-2 blue-link self-center",onClick:()=>{i(t),o([])},children:["ещё ",a.length]}):r.jsx("button",{className:"ml-2 blue-link self-center",onClick:()=>{i(t),o([]),p()},children:"Свернуть"})})]})},Sl=({data:t,maxHeightDefault:e=25,gap:n=8,increaseHeight:s=!1,className:i=""})=>{const[a,o]=v.useState(t),[l,c]=v.useState([]),[u,d]=v.useState(e),[h,f]=v.useState(!0),{width:p}=ue(tw),g=v.useRef(null);let m=[];const _=()=>{const y=g.current;for(let x=a.length-1;x>=0;x--){const b=a[x];if(y.offsetHeight>=u){o(w=>(m=w.filter(C=>C!==b),w.filter(C=>C!==b))),c(w=>[...w,b]);break}}t.length>0&&m.length===0&&s&&d(e*2+n)};return v.useEffect(()=>{_()},[a]),v.useEffect(()=>{u!==e&&(o(t),c([]),m=[])},[u]),v.useEffect(()=>{o(t),c([]),_()},[p]),v.useEffect(()=>{setTimeout(()=>{f(!1),c(y=>y.reverse())},50)},[p]),r.jsxs("div",{ref:g,className:He("flex gap-2 flex-wrap w-full",h&&"opacity-0",i),children:[a.map((y,x)=>y.type==="sticker"?r.jsx(Ah,{top:y.name},x):r.jsx(An,{size:"small",color:"default",tagObj:y,children:y.name},x)),!!l.length&&r.jsx($t,{mobile:!0,color:"white",ElementTarget:()=>r.jsxs(An,{size:"small",color:"default",className:"relative",hoverEnable:!0,children:["ещё ",l.length]}),children:r.jsx("div",{className:"pr-8 flex flex-col items-start gap-2",children:l.map((y,x)=>y.type==="sticker"?r.jsx(Ah,{top:y.name},x):r.jsx(An,{size:"small",color:"default",tagObj:y,children:y.name},x))})})]})},Afe=()=>{const{cashbackValue:t,present:e,top:n,apartment_tags:s=[],address:i,title:a,attributes:o,complex:l,deadline:c,priceOld:u,housing:d,rooms:h,area:f,floor:p,building_floors:g,city:m,buildingCashback:_,buildingDiscount:y}=v.useContext(dy),[x,b]=v.useState(!1),[w,C]=v.useState([]),j=ue(rt);v.useEffect(()=>{const T=[{name:"Комнат",value:h===0?"Студия":h},{name:"Площадь",value:`${f} м²`},{name:"Тип",value:"Квартира"},{name:"Этаж",value:`${p}/${g}`}];C([...T,...o||[]])},[]);const E=({data:T})=>r.jsxs(vn,{children:[r.jsx("span",{children:T.name}),r.jsx("span",{children:T.value})]});return r.jsxs("div",{className:"white-block",children:[!!(!j&&(t||e||n))&&r.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[!!y&&r.jsx(Ac,{discount:y.value,type_id:y.type,prefix:"Скидка",tooltip:!0,start_date:ct(y.start_date).format("DD.MM.YYYY"),end_date:ct(y.end_date).format("DD.MM.YYYY"),unit:y.unit}),!!t&&r.jsx(Sa,{cashback:t,prefix:"Кешбэк",increased:!!_}),e&&r.jsx(pd,{present:e}),n&&r.jsx(Ah,{top:n})]}),s.length>0&&r.jsx("div",{className:"mt-2",children:r.jsx(Sl,{data:s})}),r.jsx("h1",{className:"[&:not(:first-child)]:mt-4 title-2",children:a}),!j&&r.jsx(C$,{className:"mt-2"}),r.jsx("h2",{className:"title-2 mt-2 md1:mt-4",children:l}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-primary400",children:[d&&r.jsxs("span",{children:["Корпус: ",d]}),c&&r.jsxs("span",{children:["Срок сдачи: ",c]})]}),r.jsxs("p",{className:"mt-2 mb-4",children:[m,",  ",i||""]}),w.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:Efe.ApartmentInfoChars,children:x?w.map((T,N)=>r.jsx(E,{data:T},N)):w.map((T,N)=>N<4?r.jsx(E,{data:T},N):"")})}),w.length>4&&r.jsx(f4,{className:"mt-5 md1:mt-4",onClick:()=>b(T=>!T),active:x,children:x?"Скрыть":"Показать полностью"})]})]})},Dfe=({secondGift:t,mainGift:e,data:n})=>{const s=Dt(),i=ue(o=>o.apartment);return v.useEffect(()=>{s(Fse({type:n.count?"count":"sum",maxAmount:(n.count?n.sum:n.max_sum)||0,leftPrice:(n.count?n.sum:n.max_sum)||0,maxCount:n.count||0})),e&&!Ye(e)&&s(Use(e.map(o=>({id:o.id,title:o.title,oldPrice:o.oldPrice,newPrice:o.newPrice}))))},[]),{onChangeHandler:(o,l)=>{if(o){const c=t.find(u=>u.id===l);s($se({id:c.id,title:c.title,oldPrice:c.oldPrice,newPrice:c.newPrice}))}else s(Vse(l))},selector:i}},Pfe="_ApartmentPresentsCards_re0lm_1",w6={ApartmentPresentsCards:Pfe},Ife="_PresentCardRoot_1szms_1",Mfe="_PresentCardBorderRoot_1szms_14",Ofe="_PresentCardDelete_1szms_24",Rfe="_PresentCardInfo_1szms_38",Lfe="_PresentCardTitle_1szms_45",Bfe="_PresentCardDescr_1szms_52",Ffe="_PresentCardSpec_1szms_60",$fe="_PresentCardPrices_1szms_66",kg={PresentCardRoot:Ife,PresentCardBorderRoot:Mfe,PresentCardDelete:Ofe,PresentCardInfo:Rfe,PresentCardTitle:Lfe,PresentCardDescr:Bfe,PresentCardSpec:Ffe,PresentCardPrices:$fe},Ufe="_BlockDescrWrapper_efoyz_1",Vfe="_BlockDescrWrapperActive_efoyz_11",zfe="_BlockDescrBorder_efoyz_15",YE={BlockDescrWrapper:Ufe,BlockDescrWrapperActive:Vfe,BlockDescrBorder:zfe},Hfe=({descr:t,className:e="",title:n="Описание"})=>r.jsxs("div",{className:He("mt-6",e),children:[r.jsx("h2",{className:"title-2",children:n}),r.jsx(yy,{descr:t,className:`${e} mt-4 text-defaultMax leading-6`,lines:6})]}),yy=({descr:t,className:e="",classNameContainer:n="",classNameBtn:s="",btnIcon:i=!0,lines:a=1,btnText:o="Показать полностью"})=>{const[l,c]=v.useState(!1),u=v.useRef(null),[d,h]=v.useState(!1);return v.useEffect(()=>{u.current.style.webkitLineClamp="unset";const f=u.current.scrollHeight;u.current.style.webkitLineClamp=a;const p=u.current.clientHeight;h(f>p)},[t,a,u.current]),r.jsxs("div",{className:n,children:[r.jsx("div",{ref:u,className:He(YE.BlockDescrWrapper,l&&YE.BlockDescrWrapperActive,e),children:t!=null&&t.length?r.jsx(Ku,{data:t}):"Описание отсутствует..."}),d&&r.jsx(f4,{className:`mt-1 relative z-10 ${s}`,onClick:()=>c(f=>!f),btnIcon:i,active:l,children:l?"Скрыть":o})]})},qfe=({descr:t,className:e=""})=>r.jsx("div",{className:He(YE.BlockDescrBorder,e),children:r.jsx(Ku,{data:t})}),Ku=({data:t})=>r.jsx("div",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:t}}),Wfe="_loadingDotsRoot_z3qw5_1",Gfe="_loadingDotsDot_z3qw5_8",Yfe="_bounce_z3qw5_1",Rx={loadingDotsRoot:Wfe,loadingDotsDot:Gfe,bounce:Yfe},Xfe=()=>r.jsxs("div",{className:Rx.loadingDotsRoot,children:[r.jsx("div",{className:Rx.loadingDotsDot}),r.jsx("div",{className:Rx.loadingDotsDot}),r.jsx("div",{className:Rx.loadingDotsDot})]}),Kfe=({count:t=0,setCount:e=()=>{},onChangeIncrement:n=()=>{},onChangeDecrement:s=()=>{},disabledIncrement:i=!1})=>{const[a,o]=v.useState(!1);v.useEffect(()=>{u()},[]);const l=()=>{e(t-1),s(),u()},c=()=>{e(t+1),n(),u()},u=()=>{o(!0),setTimeout(()=>{o(!1)},750)};return r.jsxs(_e,{Selector:"div",variant:"secondary",size:"34",className:"w-max min-w-[114px] mt-auto z-50 relative flex items-center !justify-between gap-2 !px-0 md3:w-full",children:[r.jsx("button",{type:"button",onClick:l,className:"font-medium text-default h-full w-6 ml-2",children:"-"}),a?r.jsx(Xfe,{}):r.jsx("span",{className:"w-6 flex items-center justify-center font-medium leading-none text-default",children:t}),r.jsx("button",{type:"button",disabled:i,onClick:c,className:"font-medium text-default h-full w-6 mr-2",children:"+"})]})},XE=t=>{const{id:e,image:n,title:s,name:i,specification:a,checked:o,onChange:l=()=>{},className:c="",classNameRoot:u="",oldPrice:d,newPrice:h,old_price:f,new_price:p,value:g,controls:m=!1,deleteCard:_,editCard:y,actions:x=!0,count:b=0}=t,[w,C]=v.useState(!1),{isDesktop:j,width:E}=ue(tw),[T,N]=v.useState(!1);return r.jsxs("article",{className:u,children:[r.jsxs("div",{className:`${kg.PresentCardRoot} ${kg.PresentCardBorderRoot} ${c} ${g&&!o?"_disabled-opacity":""}`,children:[r.jsx("div",{className:"CardLinkElement z-40",onClick:()=>C(!0)}),r.jsx("img",{src:qt(n),className:He("rounded-xl",j?"w-[140px] h-[135px]":"w-[85px] h-[90px]"),alt:""}),r.jsxs("div",{className:kg.PresentCardInfo,children:[r.jsx("p",{className:`title-4 ${kg.PresentCardTitle}`,children:s||i}),a&&r.jsx("button",{className:`blue-link ${kg.PresentCardSpec}`,children:"Посмотреть спецификацию"}),r.jsxs("div",{className:"mt-3 flex items-center gap-1.5 text-verySmall",children:[r.jsx("span",{children:"Стоимость"}),r.jsxs(cd,{children:[pt(d||f||0)," ₽"]}),r.jsxs("span",{className:"font-medium",children:[pt(h||p||0)," ₽"]})]}),m?r.jsxs("div",{className:"relative z-50 flex items-center gap-6 mt-auto",children:[r.jsx("button",{type:"button",className:"relative z-50",onClick:y,children:r.jsx(Ns,{width:17,height:17,className:"fill-none stroke-blue stroke-[1.5px]"})}),r.jsx("button",{type:"button",className:"relative z-50",onClick:_,children:r.jsx(un,{width:17,height:17,className:"fill-red"})})]}):r.jsx(r.Fragment,{children:x?r.jsx(r.Fragment,{children:o?r.jsx("div",{className:"mt-auto ml-auto",children:r.jsx(Kfe,{disabledIncrement:g,count:b,onChangeIncrement:()=>{l(!0,e),N("add")},onChangeDecrement:()=>{l(!1,e),N("delete")}})}):r.jsxs(_e,{variant:"secondary",size:"34",className:"w-max mt-auto z-50 flex items-center gap-1.5 ml-auto",onClick:()=>{l(!o,e),N(o?"delete":"add")},children:[r.jsx(PE,{width:16,height:16}),"Добавить"]})}):r.jsxs(_e,{variant:"secondary",size:"34",className:"w-max mt-auto z-50 flex items-center gap-1.5",disabled:!0,children:[r.jsx(PE,{width:16,height:16}),"Добавлен"]})})]})]}),!m&&r.jsx(Ze,{condition:w,children:r.jsx(Qfe,{condition:w,set:C,data:t,onChange:()=>l(!o,e),value:o,actions:x})}),T==="add"&&on.createPortal(r.jsx(yi,{style:{zIndex:99999},show:T,set:N,onClose:()=>N(!1),classListRoot:"min-w-[440px] md1:min-w-[300px] md1:w-[300px]",children:r.jsx("span",{className:"font-medium text-defaultMax",children:"Подарок добавлен в чат и в запись на просмотр"})}),document.getElementById("overlay-wrapper")),T==="delete"&&on.createPortal(r.jsx(yi,{style:{zIndex:99999},show:T,set:N,onClose:()=>N(!1),classListRoot:"min-w-[300px]",children:r.jsx("span",{className:"font-medium text-defaultMax",children:"Подарок удалён"})}),document.getElementById("overlay-wrapper"))]})},Qfe=({condition:t,set:e,data:n,onChange:s,value:i,actions:a=!0})=>r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[700px]"},children:[r.jsx(g$,{children:r.jsx("img",{src:qt(n.image),className:"w-full h-full !object-contain"})}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h2",{className:"title-2",children:n.title||n.name}),!!(n.descr||n.description)&&r.jsx("div",{className:"mt-2",children:r.jsx(Ku,{data:n.descr||n.description})}),n.details&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-4 mb-1",children:"Дополнительная информация"}),r.jsx(Ku,{data:n.details})]})]}),a&&r.jsx(_e,{variant:"secondary",className:"mt-8 w-full z-50 flex items-center gap-1.5",onClick:()=>{s(),e(!1)},children:i?r.jsxs(r.Fragment,{children:[r.jsx(Pr,{width:16,height:16}),"Удалить"]}):r.jsxs(r.Fragment,{children:[r.jsx(PE,{width:16,height:16}),"Добавить"]})})]}),C6=({type:t="default",options:e})=>{const{onChangeHandler:n,selector:s,setOpenModal:i,mainGift:a,secondGift:o}=e,l=ue(rt);return r.jsx("div",{className:He(t==="default"&&"white-block"),children:r.jsxs("div",{className:"flex flex-col gap-8",children:[!!(a.length&&!o.length)&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"title-2",children:"Есть подарок"}),r.jsxs($t,{mobile:!0,color:"white",ElementTarget:()=>r.jsx(Lp,{width:16,height:16}),classNameTarget:"h-4",placement:"bottom",children:[r.jsx("h3",{className:"title-3",children:"Подарки"}),r.jsx("p",{className:"mt-1",children:"Сможете получить после покупки квартиры"})]})]}),!!a.length&&r.jsx("div",{className:w6.ApartmentPresentsCards,children:a.map((c,u)=>v.createElement(XE,{...c,key:u,actions:!1}))}),!!o.length&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsxs("h2",{className:"title-2",children:[s.info.type==="sum"&&r.jsxs(r.Fragment,{children:["Выберите подарки на сумму ",r.jsx(Qf,{to:s.info.leftPrice})," ₽"]}),s.info.type==="count"&&r.jsxs(r.Fragment,{children:["Выбрано ",s.selectedPresents.length," из ",s.info.maxCount," дополнительных"," ",fv(s.selectedPresents.length,"подарков","подарка","подарков")]})]}),r.jsxs($t,{mobile:!0,color:"white",ElementTarget:()=>r.jsx(Lp,{width:16,height:16}),classNameTarget:"h-4",placement:"bottom",children:[r.jsx("h3",{className:"title-3",children:"Подарки"}),r.jsx("p",{className:"mt-1",children:"Сможете получить после покупки квартиры"})]})]}),r.jsx("div",{className:w6.ApartmentPresentsCards,children:o.map((c,u)=>{let d=!1;return c.newPrice>c.oldPrice?d=s.info.leftPrice<c.newPrice:d=s.info.leftPrice<c.oldPrice-c.newPrice,s.info.type==="count"&&s.selectedPresents.length>=s.info.maxCount&&(d=!0),v.createElement(XE,{classNameRoot:He(!l&&"[&:not(:last-child)]:!border-b [&:not(:last-child)]:!border-b-pageColor"),...c,key:u,onChange:h=>{l&&s.selectedPresents.filter(f=>f.id===c.id).length===0&&i&&i(!0),n(h,c.id)},checked:s.selectedPresents.find(h=>h.id===c.id),value:d,count:s.selectedPresents.filter(h=>h.id===c.id).length})})})]})]})})},Zfe=({selector:t})=>{const{goToChat:e,setIsOpenRecordView:n}=v.useContext(dy);if(t.selectedPresents.length>0||t.defaultPresents.length>0)return r.jsxs("div",{className:"mt-11 sticky top-0 right-0",children:[r.jsx("div",{className:"flex flex-col gap-4 scrollbarPrimary overflow-y-auto max-h-[125px] pr-4",children:[...t.defaultPresents,...t.selectedPresents].map((s,i)=>r.jsxs("div",{className:"flex gap-4 flex-nowrap",children:[r.jsx("span",{className:"font-medium overflow-hidden w-full text-ellipsis whitespace-nowrap",children:s.title}),r.jsx("div",{className:"whitespace-nowrap",children:r.jsxs(cd,{children:[pt(s.oldPrice||0)," ₽"]})}),r.jsxs("span",{className:"font-medium whitespace-nowrap",children:[pt(s.newPrice||0)," ₽"]})]},i))}),r.jsx("div",{className:"bg-pageColor py-1 rounded-lg mt-4",children:r.jsx("div",{className:"my-2 px-3 flex flex-col gap-2 w-full",children:(t.selectedPresents.length>0||t.defaultPresents.length>0)&&r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{className:"!text-dark !font-medium",children:"Подарки на сумму"}),r.jsxs("span",{className:"!text-dark !font-medium",children:[r.jsx(Qf,{to:Number(t.info.maxAmount)-Number(t.info.leftPrice)+Number(t.defaultPresents.reduce((s,i)=>s+(i.oldPrice-(i.newPrice||0)),0))})," ₽"]})]})})}),r.jsxs("div",{className:"mt-5 flex flex-col gap-2 w-full",children:[r.jsx(_e,{size:"Small",onClick:e,children:"Задать вопрос в чат"}),r.jsx(_e,{size:"Small",variant:"secondary",onClick:()=>n(!0),children:r.jsx(_m,{texts:["Записаться на просмотр","Записаться на онлайн-показ"],intervalTime:3e3})})]})]})},Jfe=({data:t,mainGift:e=[],secondGift:n=[]})=>{const{onChangeHandler:s,selector:i}=Dfe({data:t,mainGift:e,secondGift:n}),[a,o]=v.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(C6,{options:{onChangeHandler:s,selector:i,setOpenModal:o,mainGift:e,secondGift:n}}),r.jsx(Ze,{condition:a,children:r.jsx(gt,{condition:a,set:o,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[1200px]",modalContentClassNames:"!px-10"},children:r.jsxs("div",{className:"grid grid-cols-[1fr_300px] gap-x-6",children:[r.jsx(C6,{type:"modal",options:{onChangeHandler:s,selector:i,mainGift:e,secondGift:n}}),r.jsx(Zfe,{selector:i})]})})})]})},wm=t=>new Promise((e,n)=>{const s=document.createElement("script");s.type="text/javascript",s.onload=e,s.onerror=n,s.src=t,s.async="async",document.head.appendChild(s)}),S$=()=>{if(typeof ymaps>"u")return wm(hm)},qh=t=>{t.setZoom(t.getZoom()+1,{duration:200})},Wh=t=>{t.setZoom(t.getZoom()-1,{duration:200})},S6=(t,e=[],n=null,s,i,a=null)=>{t&&(t.container.isFullscreen()||(t.container.enterFullscreen(),g4(t,s)),setTimeout(()=>{const o=document.querySelector(".map-horizontal-actions");o&&window.innerWidth<1222&&(o.style.opacity=0,o.style.visibility="hidden"),t.controls.add("routePanelControl",{showHeader:!0,title:"Построить маршрут",float:"left",maxWidth:window.innerWidth>1222?230:"100%",position:{left:0,right:window.innerWidth>1222?"auto":0,top:window.innerWidth>1222?60:"auto",bottom:window.innerWidth>1222?"auto":0},autoFocus:!0});const l=t.controls.get("routePanelControl");l.routePanel.state.set({fromEnabled:!1,from:e,to:a,type:"pedestrian"}),setTimeout(()=>{const u=l._layout._parentElement;if(u){const d=u.querySelector(".ymaps-2-1-79-control-popup__content");if(d){const h=document.createElement("div");h.innerHTML=`
                 <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="20" height="20" class="fill-blue">
                  <path d="M18,6h0a1,1,0,0,0-1.414,0L12,10.586,7.414,6A1,1,0,0,0,6,6H6A1,1,0,0,0,6,7.414L10.586,12,6,16.586A1,1,0,0,0,6,18H6a1,1,0,0,0,1.414,0L12,13.414,16.586,18A1,1,0,0,0,18,18h0a1,1,0,0,0,0-1.414L13.414,12,18,7.414A1,1,0,0,0,18,6Z" />
                </svg>
            `,h.style.position="absolute",h.style.top="16px",h.style.right="16px",h.style.cursor="pointer",d.appendChild(h),h.addEventListener("click",function(){m4(t,n,i)})}}n&&n(!0)},1);var c=l.routePanel.getRouteAsync();c.then(function(u){u.model.events.add("requestsuccess",function(){const d=u.getActiveRoute();if(d){const h=d.properties.get("type"),f={type:h==="pedestrian"?"пешком":h==="driving"?"на машине":h==="masstransit"?"транспортом":h==="bicycle"?"на велосипеде":"",distance:d.properties.get("distance").text,time:d.properties.get("duration").text};i(f)}else i({})}),u.events.add("activeroutechange",function(){const d=u.getActiveRoute();if(d){const h=d.properties.get("type"),f={type:h==="pedestrian"?"пешком":h==="driving"?"на машине":h==="masstransit"?"транспортом":h==="bicycle"?"на велосипеде":"",distance:d.properties.get("distance").text,time:d.properties.get("duration").text};i(f)}else i({})})},function(u){console.log(u)})},5))},m4=(t,e,n)=>{if(!t)return;t.controls.remove("routePanelControl");const s=document.querySelector(".map-horizontal-actions");s&&window.innerWidth<1222&&(s.style.opacity=1,s.style.visibility="visible"),e&&e(!1),n({})},g4=(t,e)=>{e.current.classList.add("ymap-actions-container-active"),document.querySelectorAll(".modal-overlay").forEach(n=>{n.classList.add("modal-overlay-null")}),t.container.getElement().id="ymap-fulscreen-active"},j$=(t,e)=>{e.current.classList.remove("ymap-actions-container-active"),document.querySelectorAll(".modal-overlay").forEach(n=>{n.classList.remove("modal-overlay-null")}),t.container.getElement().removeAttribute("id")},epe=t=>{t.current.classList.add("map-active-fullscreen")},tpe=t=>{t.current.classList.remove("map-active-fullscreen")},Cm=(t,e,n)=>{t.container.isFullscreen()?(t.container.exitFullscreen(),j$(t,e),n&&n(!1)):(t.container.enterFullscreen(),g4(t,e),n&&n(!0))},Sm=(t,e,n,s)=>{t.container.events.add("fullscreenenter",()=>{g4(t,e),n&&epe(n),window.innerWidth<=1222&&t.behaviors.enable("drag"),s&&s(!0)})},jm=(t,e,n,s,i,a={})=>{t.container.events.add("fullscreenexit",()=>{j$(t,e),a.setIsActiveRoute&&a.setRouteInfo&&m4(t,a.setIsActiveRoute,a.setRouteInfo),n&&tpe(n),window.innerWidth<=1222&&t.behaviors.disable("drag"),s&&s(!1),i&&i()})},Qu=t=>{t=String(t),t=t.replace(/\s/g,"");let e;return t<1e3?(e=Number(t),`${e} ₽`):(e=Math.floor(Number(t))>=1e6?(Math.round(Number(t))/1e6).toFixed(1)+" млн.":Math.round(Number(t))>=1e3?(Math.round(Number(t))/1e3).toFixed(1)+" тыс.":Math.round(Number(t)),e.replace(".0",""))},npe="_MapCircle_e90vj_1",spe="_MapCircleRed_e90vj_11",rpe="_MapCircleActive_e90vj_15",ipe="_MapPlacemark_e90vj_20",ape="_MapPlacemarkInfrastructure_e90vj_47",ope="_MapPlacemarkScholl_e90vj_57",lpe="_MapPlacemarkKindergarten_e90vj_61",cpe="_MapPlacemarkMedicine_e90vj_65",upe="_MapPlacemarkShops_e90vj_69",dpe="_MapPlacemarkCol_e90vj_73",hpe="_MapPlacemarkActive_e90vj_89",fpe="_TooltipCardRoot_e90vj_97",ppe="_TooltipCardSmallRoot_e90vj_110",mpe="_TooltipCardInfoRoot_e90vj_121",gpe="_TooltipCardImage_e90vj_136",vpe="_TooltipCardTitle_e90vj_153",ype="_MapRouteBlock_e90vj_160",gr={MapCircle:npe,MapCircleRed:spe,MapCircleActive:rpe,MapPlacemark:ipe,MapPlacemarkInfrastructure:ape,MapPlacemarkScholl:ope,MapPlacemarkKindergarten:lpe,MapPlacemarkMedicine:cpe,MapPlacemarkShops:upe,MapPlacemarkCol:dpe,MapPlacemarkActive:hpe,TooltipCardRoot:fpe,TooltipCardSmallRoot:ppe,TooltipCardInfoRoot:mpe,TooltipCardImage:gpe,TooltipCardTitle:vpe,MapRouteBlock:ype},xpe=t=>{const e=[t.geo[0],t.geo[1]];let n=gr.MapPlacemark;if(t.type==="infrastructure"){n=`${gr.MapPlacemarkInfrastructure} ${gr[`MapPlacemark${ks(t.settings.type)}`]}`;const s=new ymaps.Placemark(e,{id:t.id,name:t.name,address:t.address,type:t.type,geo:e},{iconLayout:ymaps.templateLayoutFactory.createClass(`<div class='${n}' data-placemark-id="${t.id}">
                 ${t.settings.icon}
               </div>`),iconShape:{type:"Rectangle",coordinates:[[32,32],[-15,-32]]}});return{id:t.id,name:t.name,address:t.address,type:t.type,mark:s,geo:e}}else{const s=new ymaps.Placemark(e,{id:t.id,price:t.minPrice,geo:e},{iconLayout:ymaps.templateLayoutFactory.createClass(`<div class='${n}' data-placemark-id="${t.id}">
                  <span>от ${Qu(t.minPrice||0)} ₽</span>
               </div>`),iconShape:{type:"Rectangle",coordinates:[[-40,-25],[60,0]]}});return{id:t.id,minPrice:t.minPrice,mark:s,geo:e}}},H1=(t,e)=>{let n=e.mark.properties.get("id"),s=e.mark.properties.get("minPrice"),i=e.mark.properties.get("title");t.geoObjects.remove(e.mark),e.mark.options.set("iconLayout",ymaps.templateLayoutFactory.createClass(`<div class="${gr.MapPlacemark} ${t.getZoom()>15?`${gr.MapPlacemarkCol}`:""}" data-placemark-id="${n}">
            ${t.getZoom()>15?`<p>${i}</p>`:""}
           <p>от ${s?Qu(s||0):"0"}</p>
         </div>`)),e.mark.options.set("zIndex",9999);let a=[];t.getZoom()>15?a=[[-55,-22],[45,22]]:a=[[-45,-20],[35,0]],e.mark.options.set("iconShape",{type:"Rectangle",coordinates:a}),t.geoObjects.add(e.mark)},KE=(t,e)=>{let n=e.mark.properties.get("id");t.geoObjects.remove(e.mark),e.mark.properties.set("hintContent",null),e.mark.options.set("iconLayout",ymaps.templateLayoutFactory.createClass(`<div class=${gr.MapCircle} data-placemark-id="${n}"></div>`)),e.mark.options.set("iconShape",{type:"Rectangle",coordinates:[[0,0],[15,15]]}),t.geoObjects.add(e.mark)};var bpe="Expected a function",j6=NaN,_pe="[object Symbol]",wpe=/^\s+|\s+$/g,Cpe=/^[-+]0x[0-9a-f]+$/i,Spe=/^0b[01]+$/i,jpe=/^0o[0-7]+$/i,Tpe=parseInt,Epe=typeof hn=="object"&&hn&&hn.Object===Object&&hn,Npe=typeof self=="object"&&self&&self.Object===Object&&self,kpe=Epe||Npe||Function("return this")(),Ape=Object.prototype,Dpe=Ape.toString,Ppe=Math.max,Ipe=Math.min,GS=function(){return kpe.Date.now()};function Mpe(t,e,n){var s,i,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(bpe);e=T6(e)||0,QE(n)&&(d=!!n.leading,h="maxWait"in n,a=h?Ppe(T6(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function p(j){var E=s,T=i;return s=i=void 0,u=j,o=t.apply(T,E),o}function g(j){return u=j,l=setTimeout(y,e),d?p(j):o}function m(j){var E=j-c,T=j-u,N=e-E;return h?Ipe(N,a-T):N}function _(j){var E=j-c,T=j-u;return c===void 0||E>=e||E<0||h&&T>=a}function y(){var j=GS();if(_(j))return x(j);l=setTimeout(y,m(j))}function x(j){return l=void 0,f&&s?p(j):(s=i=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,s=c=i=l=void 0}function w(){return l===void 0?o:x(GS())}function C(){var j=GS(),E=_(j);if(s=arguments,i=this,c=j,E){if(l===void 0)return g(c);if(h)return l=setTimeout(y,e),p(c)}return l===void 0&&(l=setTimeout(y,e)),o}return C.cancel=b,C.flush=w,C}function QE(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Ope(t){return!!t&&typeof t=="object"}function Rpe(t){return typeof t=="symbol"||Ope(t)&&Dpe.call(t)==_pe}function T6(t){if(typeof t=="number")return t;if(Rpe(t))return j6;if(QE(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=QE(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(wpe,"");var n=Spe.test(t);return n||jpe.test(t)?Tpe(t.slice(2),n?2:8):Cpe.test(t)?j6:+t}var Lpe=Mpe;const es=In(Lpe),Bpe=({data:t})=>{var e;return r.jsxs("div",{className:gr.TooltipCardRoot,children:[r.jsx("div",{className:"ibg pb-[64%]",children:r.jsx("img",{src:qt(((e=t.images)==null?void 0:e[0])||""),className:"w-full rounded-md",width:"150",height:"145",alt:t.title})}),r.jsx("h3",{className:`${gr.TooltipCardTitle} title-4`,children:t.title}),r.jsx("div",{className:"flex flex-col gap-2",children:t.apartments.map((n,s)=>r.jsxs(Y2,{children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{children:n.rooms===0?"Студии":`${n.rooms}-комн`}),r.jsxs("span",{className:"!font-normal",children:["от ",n.min_area," м²"]})]}),r.jsxs("span",{children:["от ",Qu(n.price)," ₽"]})]},s))})]})},Fpe=({data:t,routeShow:e=()=>{},complexGeo:n=[],currentBuilding:s=null})=>{var o;const[i,a]=v.useState(null);return v.useEffect(()=>{const l=new ymaps.multiRouter.MultiRouteModel([t.geo,n],{routingMode:"pedestrian"}),c=new ymaps.multiRouter.MultiRoute(l,{boundsAutoApply:!0});l.events.add("requestsuccess",function(){const u=c.getActiveRoute();u&&a({distance:u.properties.get("distance").text,time:u.properties.get("duration").text})})},[]),r.jsxs("div",{className:`${gr.TooltipCardSmallRoot} !block`,children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:gr.TooltipCardImage,children:r.jsx("img",{src:qt(((o=t.images)==null?void 0:o[0])||""),className:"w-full rounded-md",width:"150",height:"145",alt:t.title})}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("h3",{className:`${gr.TooltipCardTitle} title-4 !mb-1`,children:t.title}),r.jsx("div",{className:"flex flex-col gap-2 mt-2",children:t.apartments.map((l,c)=>r.jsxs(Y2,{children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{children:l.rooms===0?"Студии":`${l.rooms}-комн`}),r.jsxs("span",{className:"!font-normal",children:["от ",l.min_area," м²"]})]}),r.jsxs("span",{children:["от ",Qu(l.price)," ₽"]})]},c))})]})]}),r.jsx("div",{className:"mt-2",children:r.jsx("div",{className:"text-small",children:!!(i&&s)&&r.jsxs("p",{children:["от ",s.title," до ",t.title," ",r.jsxs("span",{className:"font-medium",children:["пешком ",i.distance]})]})})})]})},$pe=({data:t,routeShow:e=()=>{},complexGeo:n=[]})=>{const[s,i]=v.useState(null);return v.useEffect(()=>{const a=new ymaps.multiRouter.MultiRouteModel([t.geo,n],{routingMode:"pedestrian"}),o=new ymaps.multiRouter.MultiRoute(a,{boundsAutoApply:!0});a.events.add("requestsuccess",function(){const l=o.getActiveRoute();l&&i({distance:l.properties.get("distance").text,time:l.properties.get("duration").text})})},[]),r.jsx("div",{className:gr.TooltipCardInfoRoot,children:r.jsxs("div",{className:"flex-grow overflow-hidden",children:[r.jsx("h3",{className:"cut-one title-3-5 mb-0.5",children:t.name}),r.jsx("h3",{className:"cut-one text-primary400 text-small mb-2",children:t.address}),r.jsx("div",{className:"cut-one text-small",children:!!s&&r.jsxs("p",{children:[s.time," пешком ",s.distance]})})]})})},v4={width:"100%",height:"100%",backgroundColor:"#cfcfcf"},s_={fillColor:"#ff4848",strokeColor:"#ff4848"},r_={fillColor:"#005bff",strokeColor:"#005bff"},zu={strokeColor:"#005bff",strokeOpacity:.65,strokeWidth:5,fillColor:"#005bff",fillOpacity:.5},_v=({children:t,className:e="",Selector:n="div",speed:s=1e3,widthScreen:i=300})=>{const a=v.useRef(null),[o,l]=v.useState(!1);return v.useEffect(()=>{const c=a.current;if(!c)return;const u=p=>{o&&(c.scrollLeft-=p.movementX)},d=()=>{l(!0),c.style.cursor="grabbing"},h=()=>{l(!1),c.style.cursor="grab"},f=[{event:"mousemove",handler:u},{event:"mousedown",handler:d},{event:"mouseup",handler:h},{event:"mouseleave",handler:h}];return f.forEach(({event:p,handler:g})=>{c.addEventListener(p,g)}),()=>{f.forEach(({event:p,handler:g})=>{c.removeEventListener(p,g)})}},[o]),window.innerWidth>i?e?r.jsx("div",{className:e,children:t}):t:r.jsx(n,{className:`scrollbar-none ${e}`,ref:a,style:{display:"flex",overflowX:"auto",cursor:"grab",pointerEvents:"auto"},children:t})},Upe="_CardPrimaryRoot_fwwgt_1",Vpe="_CardPrimaryRootShadow_fwwgt_5",zpe="_CardPrimaryLink_fwwgt_12",Hpe="_CardPrimaryContent_fwwgt_18",qpe="_CardPrimaryTitle_fwwgt_27",Wpe="_CardPrimaryTerm_fwwgt_35",Gpe="_CardPrimaryAddress_fwwgt_40",Ype="_CardPrimaryQuantity_fwwgt_45",Xpe="_CardPrimaryQuantityBtn_fwwgt_54",Kpe="_CardPrimaryBottom_fwwgt_60",Qpe="_CardPrimaryMetro_fwwgt_69",_o={CardPrimaryRoot:Upe,CardPrimaryRootShadow:Vpe,CardPrimaryLink:zpe,CardPrimaryContent:Hpe,CardPrimaryTitle:qpe,CardPrimaryTerm:Wpe,CardPrimaryAddress:Gpe,CardPrimaryQuantity:Ype,CardPrimaryQuantityBtn:Xpe,CardPrimaryBottom:Kpe,CardPrimaryMetro:Qpe},Zpe="_CardGalleryImageWrapper_1izw7_2",Jpe="_CardGalleryImage_1izw7_2",eme="_CardGalleryTop_1izw7_26",tme="_CardGalleryImages_1izw7_49",nme="_CardGalleryPagination_1izw7_109",sme="_PaginationItem_1izw7_121",rme="_PaginationItemActive_1izw7_130",ime="_CardGalleryMore_1izw7_134",Mi={CardGalleryImageWrapper:Zpe,CardGalleryImage:Jpe,CardGalleryTop:eme,CardGalleryImages:tme,CardGalleryPagination:nme,PaginationItem:sme,PaginationItemActive:rme,CardGalleryMore:ime};function E6(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function y4(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:E6(e[n])&&E6(t[n])&&Object.keys(e[n]).length>0&&y4(t[n],e[n])})}const T$={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Tm(){const t=typeof document<"u"?document:{};return y4(t,T$),t}const ame={document:T$,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function ka(){const t=typeof window<"u"?window:{};return y4(t,ame),t}function ome(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function lme(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function ZE(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function i_(){return Date.now()}function cme(t){const e=ka();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function ume(t,e){e===void 0&&(e="x");const n=ka();let s,i,a;const o=cme(t);return n.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(l=>l.replace(",",".")).join(", ")),a=new n.WebKitCSSMatrix(i==="none"?"":i)):(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=a.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?i=a.m41:s.length===16?i=parseFloat(s[12]):i=parseFloat(s[4])),e==="y"&&(n.WebKitCSSMatrix?i=a.m42:s.length===16?i=parseFloat(s[13]):i=parseFloat(s[5])),i||0}function Lx(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function dme(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function fa(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const s=n<0||arguments.length<=n?void 0:arguments[n];if(s!=null&&!dme(s)){const i=Object.keys(Object(s)).filter(a=>e.indexOf(a)<0);for(let a=0,o=i.length;a<o;a+=1){const l=i[a],c=Object.getOwnPropertyDescriptor(s,l);c!==void 0&&c.enumerable&&(Lx(t[l])&&Lx(s[l])?s[l].__swiper__?t[l]=s[l]:fa(t[l],s[l]):!Lx(t[l])&&Lx(s[l])?(t[l]={},s[l].__swiper__?t[l]=s[l]:fa(t[l],s[l])):t[l]=s[l])}}}return t}function Bx(t,e,n){t.style.setProperty(e,n)}function E$(t){let{swiper:e,targetPosition:n,side:s}=t;const i=ka(),a=-e.translate;let o=null,l;const c=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const u=n>a?"next":"prev",d=(f,p)=>u==="next"&&f>=p||u==="prev"&&f<=p,h=()=>{l=new Date().getTime(),o===null&&(o=l);const f=Math.max(Math.min((l-o)/c,1),0),p=.5-Math.cos(f*Math.PI)/2;let g=a+p*(n-a);if(d(g,n)&&(g=n),e.wrapperEl.scrollTo({[s]:g}),d(g,n)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[s]:g})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(h)};h()}function cl(t,e){e===void 0&&(e="");const n=[...t.children];return t instanceof HTMLSlotElement&&n.push(...t.assignedElements()),e?n.filter(s=>s.matches(e)):n}function hme(t,e){const n=e.contains(t);return!n&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(t):n}function a_(t){try{console.warn(t);return}catch{}}function o_(t,e){e===void 0&&(e=[]);const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:ome(e)),n}function fme(t,e){const n=[];for(;t.previousElementSibling;){const s=t.previousElementSibling;e?s.matches(e)&&n.push(s):n.push(s),t=s}return n}function pme(t,e){const n=[];for(;t.nextElementSibling;){const s=t.nextElementSibling;e?s.matches(e)&&n.push(s):n.push(s),t=s}return n}function Du(t,e){return ka().getComputedStyle(t,null).getPropertyValue(e)}function N6(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function mme(t,e){const n=[];let s=t.parentElement;for(;s;)n.push(s),s=s.parentElement;return n}function k6(t,e,n){const s=ka();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function Jl(t){return(Array.isArray(t)?t:[t]).filter(e=>!!e)}let YS;function gme(){const t=ka(),e=Tm();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function N$(){return YS||(YS=gme()),YS}let XS;function vme(t){let{userAgent:e}=t===void 0?{}:t;const n=N$(),s=ka(),i=s.navigator.platform,a=e||s.navigator.userAgent,o={ios:!1,android:!1},l=s.screen.width,c=s.screen.height,u=a.match(/(Android);?[\s\/]+([\d.]+)?/);let d=a.match(/(iPad).*OS\s([\d_]+)/);const h=a.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=i==="Win32";let g=i==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&g&&n.touch&&m.indexOf(`${l}x${c}`)>=0&&(d=a.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),g=!1),u&&!p&&(o.os="android",o.android=!0),(d||f||h)&&(o.os="ios",o.ios=!0),o}function k$(t){return t===void 0&&(t={}),XS||(XS=vme(t)),XS}let KS;function yme(){const t=ka(),e=k$();let n=!1;function s(){const l=t.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(s()){const l=String(t.navigator.userAgent);if(l.includes("Version/")){const[c,u]=l.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));n=c<16||c===16&&u<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),a=s(),o=a||i&&e.ios;return{isSafari:n||a,needPerspectiveFix:n,need3dFix:o,isWebView:i}}function xme(){return KS||(KS=yme()),KS}function bme(t){let{swiper:e,on:n,emit:s}=t;const i=ka();let a=null,o=null;const l=()=>{!e||e.destroyed||!e.initialized||(s("beforeResize"),s("resize"))},c=()=>{!e||e.destroyed||!e.initialized||(a=new ResizeObserver(h=>{o=i.requestAnimationFrame(()=>{const{width:f,height:p}=e;let g=f,m=p;h.forEach(_=>{let{contentBoxSize:y,contentRect:x,target:b}=_;b&&b!==e.el||(g=x?x.width:(y[0]||y).inlineSize,m=x?x.height:(y[0]||y).blockSize)}),(g!==f||m!==p)&&l()})}),a.observe(e.el))},u=()=>{o&&i.cancelAnimationFrame(o),a&&a.unobserve&&e.el&&(a.unobserve(e.el),a=null)},d=()=>{!e||e.destroyed||!e.initialized||s("orientationchange")};n("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){c();return}i.addEventListener("resize",l),i.addEventListener("orientationchange",d)}),n("destroy",()=>{u(),i.removeEventListener("resize",l),i.removeEventListener("orientationchange",d)})}function _me(t){let{swiper:e,extendParams:n,on:s,emit:i}=t;const a=[],o=ka(),l=function(d,h){h===void 0&&(h={});const f=o.MutationObserver||o.WebkitMutationObserver,p=new f(g=>{if(e.__preventObserver__)return;if(g.length===1){i("observerUpdate",g[0]);return}const m=function(){i("observerUpdate",g[0])};o.requestAnimationFrame?o.requestAnimationFrame(m):o.setTimeout(m,0)});p.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:e.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),a.push(p)},c=()=>{if(e.params.observer){if(e.params.observeParents){const d=mme(e.hostEl);for(let h=0;h<d.length;h+=1)l(d[h])}l(e.hostEl,{childList:e.params.observeSlideChildren}),l(e.wrapperEl,{attributes:!1})}},u=()=>{a.forEach(d=>{d.disconnect()}),a.splice(0,a.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",c),s("destroy",u)}var wme={on(t,e,n){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;const i=n?"unshift":"push";return t.split(" ").forEach(a=>{s.eventsListeners[a]||(s.eventsListeners[a]=[]),s.eventsListeners[a][i](e)}),s},once(t,e,n){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;function i(){s.off(t,i),i.__emitterProxy&&delete i.__emitterProxy;for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];e.apply(s,o)}return i.__emitterProxy=e,s.on(t,i,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const s=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[s](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(s=>{typeof e>"u"?n.eventsListeners[s]=[]:n.eventsListeners[s]&&n.eventsListeners[s].forEach((i,a)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&n.eventsListeners[s].splice(a,1)})}),n},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,n,s;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return typeof a[0]=="string"||Array.isArray(a[0])?(e=a[0],n=a.slice(1,a.length),s=t):(e=a[0].events,n=a[0].data,s=a[0].context||t),n.unshift(s),(Array.isArray(e)?e:e.split(" ")).forEach(c=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(u=>{u.apply(s,[c,...n])}),t.eventsListeners&&t.eventsListeners[c]&&t.eventsListeners[c].forEach(u=>{u.apply(s,n)})}),t}};function Cme(){const t=this;let e,n;const s=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=s.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=s.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(Du(s,"padding-left")||0,10)-parseInt(Du(s,"padding-right")||0,10),n=n-parseInt(Du(s,"padding-top")||0,10)-parseInt(Du(s,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function Sme(){const t=this;function e(P,I){return parseFloat(P.getPropertyValue(t.getDirectionLabel(I))||0)}const n=t.params,{wrapperEl:s,slidesEl:i,size:a,rtlTranslate:o,wrongRTL:l}=t,c=t.virtual&&n.virtual.enabled,u=c?t.virtual.slides.length:t.slides.length,d=cl(i,`.${t.params.slideClass}, swiper-slide`),h=c?t.virtual.slides.length:d.length;let f=[];const p=[],g=[];let m=n.slidesOffsetBefore;typeof m=="function"&&(m=n.slidesOffsetBefore.call(t));let _=n.slidesOffsetAfter;typeof _=="function"&&(_=n.slidesOffsetAfter.call(t));const y=t.snapGrid.length,x=t.slidesGrid.length;let b=n.spaceBetween,w=-m,C=0,j=0;if(typeof a>"u")return;typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*a:typeof b=="string"&&(b=parseFloat(b)),t.virtualSize=-b,d.forEach(P=>{o?P.style.marginLeft="":P.style.marginRight="",P.style.marginBottom="",P.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Bx(s,"--swiper-centered-offset-before",""),Bx(s,"--swiper-centered-offset-after",""));const E=n.grid&&n.grid.rows>1&&t.grid;E?t.grid.initSlides(d):t.grid&&t.grid.unsetSlides();let T;const N=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(P=>typeof n.breakpoints[P].slidesPerView<"u").length>0;for(let P=0;P<h;P+=1){T=0;let I;if(d[P]&&(I=d[P]),E&&t.grid.updateSlide(P,I,d),!(d[P]&&Du(I,"display")==="none")){if(n.slidesPerView==="auto"){N&&(d[P].style[t.getDirectionLabel("width")]="");const B=getComputedStyle(I),U=I.style.transform,z=I.style.webkitTransform;if(U&&(I.style.transform="none"),z&&(I.style.webkitTransform="none"),n.roundLengths)T=t.isHorizontal()?k6(I,"width"):k6(I,"height");else{const G=e(B,"width"),V=e(B,"padding-left"),J=e(B,"padding-right"),Q=e(B,"margin-left"),Y=e(B,"margin-right"),oe=B.getPropertyValue("box-sizing");if(oe&&oe==="border-box")T=G+Q+Y;else{const{clientWidth:he,offsetWidth:me}=I;T=G+V+J+Q+Y+(me-he)}}U&&(I.style.transform=U),z&&(I.style.webkitTransform=z),n.roundLengths&&(T=Math.floor(T))}else T=(a-(n.slidesPerView-1)*b)/n.slidesPerView,n.roundLengths&&(T=Math.floor(T)),d[P]&&(d[P].style[t.getDirectionLabel("width")]=`${T}px`);d[P]&&(d[P].swiperSlideSize=T),g.push(T),n.centeredSlides?(w=w+T/2+C/2+b,C===0&&P!==0&&(w=w-a/2-b),P===0&&(w=w-a/2-b),Math.abs(w)<1/1e3&&(w=0),n.roundLengths&&(w=Math.floor(w)),j%n.slidesPerGroup===0&&f.push(w),p.push(w)):(n.roundLengths&&(w=Math.floor(w)),(j-Math.min(t.params.slidesPerGroupSkip,j))%t.params.slidesPerGroup===0&&f.push(w),p.push(w),w=w+T+b),t.virtualSize+=T+b,C=T,j+=1}}if(t.virtualSize=Math.max(t.virtualSize,a)+_,o&&l&&(n.effect==="slide"||n.effect==="coverflow")&&(s.style.width=`${t.virtualSize+b}px`),n.setWrapperSize&&(s.style[t.getDirectionLabel("width")]=`${t.virtualSize+b}px`),E&&t.grid.updateWrapperSize(T,f),!n.centeredSlides){const P=[];for(let I=0;I<f.length;I+=1){let B=f[I];n.roundLengths&&(B=Math.floor(B)),f[I]<=t.virtualSize-a&&P.push(B)}f=P,Math.floor(t.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-a)}if(c&&n.loop){const P=g[0]+b;if(n.slidesPerGroup>1){const I=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),B=P*n.slidesPerGroup;for(let U=0;U<I;U+=1)f.push(f[f.length-1]+B)}for(let I=0;I<t.virtual.slidesBefore+t.virtual.slidesAfter;I+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+P),p.push(p[p.length-1]+P),t.virtualSize+=P}if(f.length===0&&(f=[0]),b!==0){const P=t.isHorizontal()&&o?"marginLeft":t.getDirectionLabel("marginRight");d.filter((I,B)=>!n.cssMode||n.loop?!0:B!==d.length-1).forEach(I=>{I.style[P]=`${b}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let P=0;g.forEach(B=>{P+=B+(b||0)}),P-=b;const I=P-a;f=f.map(B=>B<=0?-m:B>I?I+_:B)}if(n.centerInsufficientSlides){let P=0;g.forEach(B=>{P+=B+(b||0)}),P-=b;const I=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(P+I<a){const B=(a-P-I)/2;f.forEach((U,z)=>{f[z]=U-B}),p.forEach((U,z)=>{p[z]=U+B})}}if(Object.assign(t,{slides:d,snapGrid:f,slidesGrid:p,slidesSizesGrid:g}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Bx(s,"--swiper-centered-offset-before",`${-f[0]}px`),Bx(s,"--swiper-centered-offset-after",`${t.size/2-g[g.length-1]/2}px`);const P=-t.snapGrid[0],I=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(B=>B+P),t.slidesGrid=t.slidesGrid.map(B=>B+I)}if(h!==u&&t.emit("slidesLengthChange"),f.length!==y&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==x&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!c&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const P=`${n.containerModifierClass}backface-hidden`,I=t.el.classList.contains(P);h<=n.maxBackfaceHiddenSlides?I||t.el.classList.add(P):I&&t.el.classList.remove(P)}}function jme(t){const e=this,n=[],s=e.virtual&&e.params.virtual.enabled;let i=0,a;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=l=>s?e.slides[e.getSlideIndexByData(l)]:e.slides[l];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(l=>{n.push(l)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const l=e.activeIndex+a;if(l>e.slides.length&&!s)break;n.push(o(l))}else n.push(o(e.activeIndex));for(a=0;a<n.length;a+=1)if(typeof n[a]<"u"){const l=n[a].offsetHeight;i=l>i?l:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function Tme(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let s=0;s<e.length;s+=1)e[s].swiperSlideOffset=(t.isHorizontal()?e[s].offsetLeft:e[s].offsetTop)-n-t.cssOverflowAdjustment()}const A6=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function Eme(t){t===void 0&&(t=this&&this.translate||0);const e=this,n=e.params,{slides:s,rtlTranslate:i,snapGrid:a}=e;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;i&&(o=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let l=n.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*e.size:typeof l=="string"&&(l=parseFloat(l));for(let c=0;c<s.length;c+=1){const u=s[c];let d=u.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(d-=s[0].swiperSlideOffset);const h=(o+(n.centeredSlides?e.minTranslate():0)-d)/(u.swiperSlideSize+l),f=(o-a[0]+(n.centeredSlides?e.minTranslate():0)-d)/(u.swiperSlideSize+l),p=-(o-d),g=p+e.slidesSizesGrid[c],m=p>=0&&p<=e.size-e.slidesSizesGrid[c],_=p>=0&&p<e.size-1||g>1&&g<=e.size||p<=0&&g>=e.size;_&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(c)),A6(u,_,n.slideVisibleClass),A6(u,m,n.slideFullyVisibleClass),u.progress=i?-h:h,u.originalProgress=i?-f:f}}function Nme(t){const e=this;if(typeof t>"u"){const d=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*d||0}const n=e.params,s=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:a,isEnd:o,progressLoop:l}=e;const c=a,u=o;if(s===0)i=0,a=!0,o=!0;else{i=(t-e.minTranslate())/s;const d=Math.abs(t-e.minTranslate())<1,h=Math.abs(t-e.maxTranslate())<1;a=d||i<=0,o=h||i>=1,d&&(i=0),h&&(i=1)}if(n.loop){const d=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[d],p=e.slidesGrid[h],g=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(t);m>=f?l=(m-f)/g:l=(m+g-p)/g,l>1&&(l-=1)}Object.assign(e,{progress:i,progressLoop:l,isBeginning:a,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),a&&!c&&e.emit("reachBeginning toEdge"),o&&!u&&e.emit("reachEnd toEdge"),(c&&!a||u&&!o)&&e.emit("fromEdge"),e.emit("progress",i)}const QS=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function kme(){const t=this,{slides:e,params:n,slidesEl:s,activeIndex:i}=t,a=t.virtual&&n.virtual.enabled,o=t.grid&&n.grid&&n.grid.rows>1,l=h=>cl(s,`.${n.slideClass}${h}, swiper-slide${h}`)[0];let c,u,d;if(a)if(n.loop){let h=i-t.virtual.slidesBefore;h<0&&(h=t.virtual.slides.length+h),h>=t.virtual.slides.length&&(h-=t.virtual.slides.length),c=l(`[data-swiper-slide-index="${h}"]`)}else c=l(`[data-swiper-slide-index="${i}"]`);else o?(c=e.filter(h=>h.column===i)[0],d=e.filter(h=>h.column===i+1)[0],u=e.filter(h=>h.column===i-1)[0]):c=e[i];c&&(o||(d=pme(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!d&&(d=e[0]),u=fme(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!u===0&&(u=e[e.length-1]))),e.forEach(h=>{QS(h,h===c,n.slideActiveClass),QS(h,h===d,n.slideNextClass),QS(h,h===u,n.slidePrevClass)}),t.emitSlidesClasses()}const q1=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,s=e.closest(n());if(s){let i=s.querySelector(`.${t.params.lazyPreloaderClass}`);!i&&t.isElement&&(s.shadowRoot?i=s.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(i=s.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},ZS=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},JE=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const s=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),i=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const o=i,l=[o-e];l.push(...Array.from({length:e}).map((c,u)=>o+s+u)),t.slides.forEach((c,u)=>{l.includes(c.column)&&ZS(t,u)});return}const a=i+s-1;if(t.params.rewind||t.params.loop)for(let o=i-e;o<=a+e;o+=1){const l=(o%n+n)%n;(l<i||l>a)&&ZS(t,l)}else for(let o=Math.max(i-e,0);o<=Math.min(a+e,n-1);o+=1)o!==i&&(o>a||o<i)&&ZS(t,o)};function Ame(t){const{slidesGrid:e,params:n}=t,s=t.rtlTranslate?t.translate:-t.translate;let i;for(let a=0;a<e.length;a+=1)typeof e[a+1]<"u"?s>=e[a]&&s<e[a+1]-(e[a+1]-e[a])/2?i=a:s>=e[a]&&s<e[a+1]&&(i=a+1):s>=e[a]&&(i=a);return n.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function Dme(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:s,params:i,activeIndex:a,realIndex:o,snapIndex:l}=e;let c=t,u;const d=p=>{let g=p-e.virtual.slidesBefore;return g<0&&(g=e.virtual.slides.length+g),g>=e.virtual.slides.length&&(g-=e.virtual.slides.length),g};if(typeof c>"u"&&(c=Ame(e)),s.indexOf(n)>=0)u=s.indexOf(n);else{const p=Math.min(i.slidesPerGroupSkip,c);u=p+Math.floor((c-p)/i.slidesPerGroup)}if(u>=s.length&&(u=s.length-1),c===a&&!e.params.loop){u!==l&&(e.snapIndex=u,e.emit("snapIndexChange"));return}if(c===a&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(c);return}const h=e.grid&&i.grid&&i.grid.rows>1;let f;if(e.virtual&&i.virtual.enabled&&i.loop)f=d(c);else if(h){const p=e.slides.filter(m=>m.column===c)[0];let g=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(g)&&(g=Math.max(e.slides.indexOf(p),0)),f=Math.floor(g/i.grid.rows)}else if(e.slides[c]){const p=e.slides[c].getAttribute("data-swiper-slide-index");p?f=parseInt(p,10):f=c}else f=c;Object.assign(e,{previousSnapIndex:l,snapIndex:u,previousRealIndex:o,realIndex:f,previousIndex:a,activeIndex:c}),e.initialized&&JE(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function Pme(t,e){const n=this,s=n.params;let i=t.closest(`.${s.slideClass}, swiper-slide`);!i&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(l=>{!i&&l.matches&&l.matches(`.${s.slideClass}, swiper-slide`)&&(i=l)});let a=!1,o;if(i){for(let l=0;l<n.slides.length;l+=1)if(n.slides[l]===i){a=!0,o=l;break}}if(i&&a)n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}s.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var Ime={updateSize:Cme,updateSlides:Sme,updateAutoHeight:jme,updateSlidesOffset:Tme,updateSlidesProgress:Eme,updateProgress:Nme,updateSlidesClasses:kme,updateActiveIndex:Dme,updateClickedSlide:Pme};function Mme(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:n,rtlTranslate:s,translate:i,wrapperEl:a}=e;if(n.virtualTranslate)return s?-i:i;if(n.cssMode)return i;let o=ume(a,t);return o+=e.cssOverflowAdjustment(),s&&(o=-o),o||0}function Ome(t,e){const n=this,{rtlTranslate:s,params:i,wrapperEl:a,progress:o}=n;let l=0,c=0;const u=0;n.isHorizontal()?l=s?-t:t:c=t,i.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c,i.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:i.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),a.style.transform=`translate3d(${l}px, ${c}px, ${u}px)`);let d;const h=n.maxTranslate()-n.minTranslate();h===0?d=0:d=(t-n.minTranslate())/h,d!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function Rme(){return-this.snapGrid[0]}function Lme(){return-this.snapGrid[this.snapGrid.length-1]}function Bme(t,e,n,s,i){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),n===void 0&&(n=!0),s===void 0&&(s=!0);const a=this,{params:o,wrapperEl:l}=a;if(a.animating&&o.preventInteractionOnTransition)return!1;const c=a.minTranslate(),u=a.maxTranslate();let d;if(s&&t>c?d=c:s&&t<u?d=u:d=t,a.updateProgress(d),o.cssMode){const h=a.isHorizontal();if(e===0)l[h?"scrollLeft":"scrollTop"]=-d;else{if(!a.support.smoothScroll)return E$({swiper:a,targetPosition:-d,side:h?"left":"top"}),!0;l.scrollTo({[h?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(d),n&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(d),n&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(f){!a||a.destroyed||f.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,n&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var Fme={getTranslate:Mme,setTranslate:Ome,minTranslate:Rme,maxTranslate:Lme,translateTo:Bme};function $me(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function A$(t){let{swiper:e,runCallbacks:n,direction:s,step:i}=t;const{activeIndex:a,previousIndex:o}=e;let l=s;if(l||(a>o?l="next":a<o?l="prev":l="reset"),e.emit(`transition${i}`),n&&a!==o){if(l==="reset"){e.emit(`slideResetTransition${i}`);return}e.emit(`slideChangeTransition${i}`),l==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`)}}function Ume(t,e){t===void 0&&(t=!0);const n=this,{params:s}=n;s.cssMode||(s.autoHeight&&n.updateAutoHeight(),A$({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function Vme(t,e){t===void 0&&(t=!0);const n=this,{params:s}=n;n.animating=!1,!s.cssMode&&(n.setTransition(0),A$({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var zme={setTransition:$me,transitionStart:Ume,transitionEnd:Vme};function Hme(t,e,n,s,i){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const a=this;let o=t;o<0&&(o=0);const{params:l,snapGrid:c,slidesGrid:u,previousIndex:d,activeIndex:h,rtlTranslate:f,wrapperEl:p,enabled:g}=a;if(!g&&!s&&!i||a.destroyed||a.animating&&l.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=a.params.speed);const m=Math.min(a.params.slidesPerGroupSkip,o);let _=m+Math.floor((o-m)/a.params.slidesPerGroup);_>=c.length&&(_=c.length-1);const y=-c[_];if(l.normalizeSlideIndex)for(let b=0;b<u.length;b+=1){const w=-Math.floor(y*100),C=Math.floor(u[b]*100),j=Math.floor(u[b+1]*100);typeof u[b+1]<"u"?w>=C&&w<j-(j-C)/2?o=b:w>=C&&w<j&&(o=b+1):w>=C&&(o=b)}if(a.initialized&&o!==h&&(!a.allowSlideNext&&(f?y>a.translate&&y>a.minTranslate():y<a.translate&&y<a.minTranslate())||!a.allowSlidePrev&&y>a.translate&&y>a.maxTranslate()&&(h||0)!==o))return!1;o!==(d||0)&&n&&a.emit("beforeSlideChangeStart"),a.updateProgress(y);let x;if(o>h?x="next":o<h?x="prev":x="reset",f&&-y===a.translate||!f&&y===a.translate)return a.updateActiveIndex(o),l.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),l.effect!=="slide"&&a.setTranslate(y),x!=="reset"&&(a.transitionStart(n,x),a.transitionEnd(n,x)),!1;if(l.cssMode){const b=a.isHorizontal(),w=f?y:-y;if(e===0){const C=a.virtual&&a.params.virtual.enabled;C&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),C&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[b?"scrollLeft":"scrollTop"]=w})):p[b?"scrollLeft":"scrollTop"]=w,C&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1})}else{if(!a.support.smoothScroll)return E$({swiper:a,targetPosition:w,side:b?"left":"top"}),!0;p.scrollTo({[b?"left":"top"]:w,behavior:"smooth"})}return!0}return a.setTransition(e),a.setTranslate(y),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,s),a.transitionStart(n,x),e===0?a.transitionEnd(n,x):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(w){!a||a.destroyed||w.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(n,x))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function qme(t,e,n,s){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);const a=i.grid&&i.params.grid&&i.params.grid.rows>1;let o=t;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)o=o+i.virtual.slidesBefore;else{let l;if(a){const f=o*i.params.grid.rows;l=i.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else l=i.getSlideIndexByData(o);const c=a?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:u}=i.params;let d=i.params.slidesPerView;d==="auto"?d=i.slidesPerViewDynamic():(d=Math.ceil(parseFloat(i.params.slidesPerView,10)),u&&d%2===0&&(d=d+1));let h=c-l<d;if(u&&(h=h||l<Math.ceil(d/2)),s&&u&&i.params.slidesPerView!=="auto"&&!a&&(h=!1),h){const f=u?l<i.activeIndex?"prev":"next":l-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?l+1:l-c+1,slideRealIndex:f==="next"?i.realIndex:void 0})}if(a){const f=o*i.params.grid.rows;o=i.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=i.getSlideIndexByData(o)}return requestAnimationFrame(()=>{i.slideTo(o,e,n,s)}),i}function Wme(t,e,n){e===void 0&&(e=!0);const s=this,{enabled:i,params:a,animating:o}=s;if(!i||s.destroyed)return s;typeof t>"u"&&(t=s.params.speed);let l=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(l=Math.max(s.slidesPerViewDynamic("current",!0),1));const c=s.activeIndex<a.slidesPerGroupSkip?1:l,u=s.virtual&&a.virtual.enabled;if(a.loop){if(o&&!u&&a.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+c,t,e,n)}),!0}return a.rewind&&s.isEnd?s.slideTo(0,t,e,n):s.slideTo(s.activeIndex+c,t,e,n)}function Gme(t,e,n){e===void 0&&(e=!0);const s=this,{params:i,snapGrid:a,slidesGrid:o,rtlTranslate:l,enabled:c,animating:u}=s;if(!c||s.destroyed)return s;typeof t>"u"&&(t=s.params.speed);const d=s.virtual&&i.virtual.enabled;if(i.loop){if(u&&!d&&i.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const h=l?s.translate:-s.translate;function f(y){return y<0?-Math.floor(Math.abs(y)):Math.floor(y)}const p=f(h),g=a.map(y=>f(y));let m=a[g.indexOf(p)-1];if(typeof m>"u"&&i.cssMode){let y;a.forEach((x,b)=>{p>=x&&(y=b)}),typeof y<"u"&&(m=a[y>0?y-1:y])}let _=0;if(typeof m<"u"&&(_=o.indexOf(m),_<0&&(_=s.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(_=_-s.slidesPerViewDynamic("previous",!0)+1,_=Math.max(_,0))),i.rewind&&s.isBeginning){const y=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(y,t,e,n)}else if(i.loop&&s.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{s.slideTo(_,t,e,n)}),!0;return s.slideTo(_,t,e,n)}function Yme(t,e,n){e===void 0&&(e=!0);const s=this;if(!s.destroyed)return typeof t>"u"&&(t=s.params.speed),s.slideTo(s.activeIndex,t,e,n)}function Xme(t,e,n,s){e===void 0&&(e=!0),s===void 0&&(s=.5);const i=this;if(i.destroyed)return;typeof t>"u"&&(t=i.params.speed);let a=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,a),l=o+Math.floor((a-o)/i.params.slidesPerGroup),c=i.rtlTranslate?i.translate:-i.translate;if(c>=i.snapGrid[l]){const u=i.snapGrid[l],d=i.snapGrid[l+1];c-u>(d-u)*s&&(a+=i.params.slidesPerGroup)}else{const u=i.snapGrid[l-1],d=i.snapGrid[l];c-u<=(d-u)*s&&(a-=i.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,i.slidesGrid.length-1),i.slideTo(a,t,e,n)}function Kme(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,s=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,a;const o=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;a=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-s/2||i>t.slides.length-t.loopedSlides+s/2?(t.loopFix(),i=t.getSlideIndex(cl(n,`${o}[data-swiper-slide-index="${a}"]`)[0]),ZE(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-s?(t.loopFix(),i=t.getSlideIndex(cl(n,`${o}[data-swiper-slide-index="${a}"]`)[0]),ZE(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}var Qme={slideTo:Hme,slideToLoop:qme,slideNext:Wme,slidePrev:Gme,slideReset:Yme,slideToClosest:Xme,slideToClickedSlide:Kme};function Zme(t){const e=this,{params:n,slidesEl:s}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;const i=()=>{cl(s,`.${n.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},a=e.grid&&n.grid&&n.grid.rows>1,o=n.slidesPerGroup*(a?n.grid.rows:1),l=e.slides.length%o!==0,c=a&&e.slides.length%n.grid.rows!==0,u=d=>{for(let h=0;h<d;h+=1){const f=e.isElement?o_("swiper-slide",[n.slideBlankClass]):o_("div",[n.slideClass,n.slideBlankClass]);e.slidesEl.append(f)}};if(l){if(n.loopAddBlankSlides){const d=o-e.slides.length%o;u(d),e.recalcSlides(),e.updateSlides()}else a_("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(c){if(n.loopAddBlankSlides){const d=n.grid.rows-e.slides.length%n.grid.rows;u(d),e.recalcSlides(),e.updateSlides()}else a_("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function Jme(t){let{slideRealIndex:e,slideTo:n=!0,direction:s,setTranslate:i,activeSlideIndex:a,byController:o,byMousewheel:l}=t===void 0?{}:t;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:u,allowSlidePrev:d,allowSlideNext:h,slidesEl:f,params:p}=c,{centeredSlides:g}=p;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&p.virtual.enabled){n&&(!p.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):p.centeredSlides&&c.snapIndex<p.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=d,c.allowSlideNext=h,c.emit("loopFix");return}let m=p.slidesPerView;m==="auto"?m=c.slidesPerViewDynamic():(m=Math.ceil(parseFloat(p.slidesPerView,10)),g&&m%2===0&&(m=m+1));const _=p.slidesPerGroupAuto?m:p.slidesPerGroup;let y=_;y%_!==0&&(y+=_-y%_),y+=p.loopAdditionalSlides,c.loopedSlides=y;const x=c.grid&&p.grid&&p.grid.rows>1;u.length<m+y?a_("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):x&&p.grid.fill==="row"&&a_("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const b=[],w=[];let C=c.activeIndex;typeof a>"u"?a=c.getSlideIndex(u.filter(U=>U.classList.contains(p.slideActiveClass))[0]):C=a;const j=s==="next"||!s,E=s==="prev"||!s;let T=0,N=0;const P=x?Math.ceil(u.length/p.grid.rows):u.length,B=(x?u[a].column:a)+(g&&typeof i>"u"?-m/2+.5:0);if(B<y){T=Math.max(y-B,_);for(let U=0;U<y-B;U+=1){const z=U-Math.floor(U/P)*P;if(x){const G=P-z-1;for(let V=u.length-1;V>=0;V-=1)u[V].column===G&&b.push(V)}else b.push(P-z-1)}}else if(B+m>P-y){N=Math.max(B-(P-y*2),_);for(let U=0;U<N;U+=1){const z=U-Math.floor(U/P)*P;x?u.forEach((G,V)=>{G.column===z&&w.push(V)}):w.push(z)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),E&&b.forEach(U=>{u[U].swiperLoopMoveDOM=!0,f.prepend(u[U]),u[U].swiperLoopMoveDOM=!1}),j&&w.forEach(U=>{u[U].swiperLoopMoveDOM=!0,f.append(u[U]),u[U].swiperLoopMoveDOM=!1}),c.recalcSlides(),p.slidesPerView==="auto"?c.updateSlides():x&&(b.length>0&&E||w.length>0&&j)&&c.slides.forEach((U,z)=>{c.grid.updateSlide(z,U,c.slides)}),p.watchSlidesProgress&&c.updateSlidesOffset(),n){if(b.length>0&&E){if(typeof e>"u"){const U=c.slidesGrid[C],G=c.slidesGrid[C+T]-U;l?c.setTranslate(c.translate-G):(c.slideTo(C+Math.ceil(T),0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-G,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-G))}else if(i){const U=x?b.length/p.grid.rows:b.length;c.slideTo(c.activeIndex+U,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(w.length>0&&j)if(typeof e>"u"){const U=c.slidesGrid[C],G=c.slidesGrid[C-N]-U;l?c.setTranslate(c.translate-G):(c.slideTo(C-N,0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-G,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-G))}else{const U=x?w.length/p.grid.rows:w.length;c.slideTo(c.activeIndex-U,0,!1,!0)}}if(c.allowSlidePrev=d,c.allowSlideNext=h,c.controller&&c.controller.control&&!o){const U={slideRealIndex:e,direction:s,setTranslate:i,activeSlideIndex:a,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(z=>{!z.destroyed&&z.params.loop&&z.loopFix({...U,slideTo:z.params.slidesPerView===p.slidesPerView?n:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...U,slideTo:c.controller.control.params.slidesPerView===p.slidesPerView?n:!1})}c.emit("loopFix")}function ege(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const s=[];t.slides.forEach(i=>{const a=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;s[a]=i}),t.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),s.forEach(i=>{n.append(i)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var tge={loopCreate:Zme,loopFix:Jme,loopDestroy:ege};function nge(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function sge(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var rge={setGrabCursor:nge,unsetGrabCursor:sge};function ige(t,e){e===void 0&&(e=this);function n(s){if(!s||s===Tm()||s===ka())return null;s.assignedSlot&&(s=s.assignedSlot);const i=s.closest(t);return!i&&!s.getRootNode?null:i||n(s.getRootNode().host)}return n(e)}function D6(t,e,n){const s=ka(),{params:i}=t,a=i.edgeSwipeDetection,o=i.edgeSwipeThreshold;return a&&(n<=o||n>=s.innerWidth-o)?a==="prevent"?(e.preventDefault(),!0):!1:!0}function age(t){const e=this,n=Tm();let s=t;s.originalEvent&&(s=s.originalEvent);const i=e.touchEventsData;if(s.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==s.pointerId)return;i.pointerId=s.pointerId}else s.type==="touchstart"&&s.targetTouches.length===1&&(i.touchId=s.targetTouches[0].identifier);if(s.type==="touchstart"){D6(e,s,s.targetTouches[0].pageX);return}const{params:a,touches:o,enabled:l}=e;if(!l||!a.simulateTouch&&s.pointerType==="mouse"||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let c=s.target;if(a.touchEventsTarget==="wrapper"&&!hme(c,e.wrapperEl)||"which"in s&&s.which===3||"button"in s&&s.button>0||i.isTouched&&i.isMoved)return;const u=!!a.noSwipingClass&&a.noSwipingClass!=="",d=s.composedPath?s.composedPath():s.path;u&&s.target&&s.target.shadowRoot&&d&&(c=d[0]);const h=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,f=!!(s.target&&s.target.shadowRoot);if(a.noSwiping&&(f?ige(h,c):c.closest(h))){e.allowClick=!0;return}if(a.swipeHandler&&!c.closest(a.swipeHandler))return;o.currentX=s.pageX,o.currentY=s.pageY;const p=o.currentX,g=o.currentY;if(!D6(e,s,p))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=g,i.touchStartTime=i_(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(i.allowThresholdMove=!1);let m=!0;c.matches(i.focusableElements)&&(m=!1,c.nodeName==="SELECT"&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==c&&n.activeElement.blur();const _=m&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||_)&&!c.isContentEditable&&s.preventDefault(),a.freeMode&&a.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",s)}function oge(t){const e=Tm(),n=this,s=n.touchEventsData,{params:i,touches:a,rtlTranslate:o,enabled:l}=n;if(!l||!i.simulateTouch&&t.pointerType==="mouse")return;let c=t;if(c.originalEvent&&(c=c.originalEvent),c.type==="pointermove"&&(s.touchId!==null||c.pointerId!==s.pointerId))return;let u;if(c.type==="touchmove"){if(u=[...c.changedTouches].filter(j=>j.identifier===s.touchId)[0],!u||u.identifier!==s.touchId)return}else u=c;if(!s.isTouched){s.startMoving&&s.isScrolling&&n.emit("touchMoveOpposite",c);return}const d=u.pageX,h=u.pageY;if(c.preventedByNestedSwiper){a.startX=d,a.startY=h;return}if(!n.allowTouchMove){c.target.matches(s.focusableElements)||(n.allowClick=!1),s.isTouched&&(Object.assign(a,{startX:d,startY:h,currentX:d,currentY:h}),s.touchStartTime=i_());return}if(i.touchReleaseOnEdges&&!i.loop){if(n.isVertical()){if(h<a.startY&&n.translate<=n.maxTranslate()||h>a.startY&&n.translate>=n.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else if(d<a.startX&&n.translate<=n.maxTranslate()||d>a.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&c.target===e.activeElement&&c.target.matches(s.focusableElements)){s.isMoved=!0,n.allowClick=!1;return}s.allowTouchCallbacks&&n.emit("touchMove",c),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=d,a.currentY=h;const f=a.currentX-a.startX,p=a.currentY-a.startY;if(n.params.threshold&&Math.sqrt(f**2+p**2)<n.params.threshold)return;if(typeof s.isScrolling>"u"){let j;n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?s.isScrolling=!1:f*f+p*p>=25&&(j=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,s.isScrolling=n.isHorizontal()?j>i.touchAngle:90-j>i.touchAngle)}if(s.isScrolling&&n.emit("touchMoveOpposite",c),typeof s.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(s.startMoving=!0),s.isScrolling||c.type==="touchmove"&&s.preventTouchMoveFromPointerMove){s.isTouched=!1;return}if(!s.startMoving)return;n.allowClick=!1,!i.cssMode&&c.cancelable&&c.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&c.stopPropagation();let g=n.isHorizontal()?f:p,m=n.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;i.oneWayMovement&&(g=Math.abs(g)*(o?1:-1),m=Math.abs(m)*(o?1:-1)),a.diff=g,g*=i.touchRatio,o&&(g=-g,m=-m);const _=n.touchesDirection;n.swipeDirection=g>0?"prev":"next",n.touchesDirection=m>0?"prev":"next";const y=n.params.loop&&!i.cssMode,x=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!s.isMoved){if(y&&x&&n.loopFix({direction:n.swipeDirection}),s.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const j=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(j)}s.allowMomentumBounce=!1,i.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}let b;if(new Date().getTime(),s.isMoved&&s.allowThresholdMove&&_!==n.touchesDirection&&y&&x&&Math.abs(g)>=1){Object.assign(a,{startX:d,startY:h,currentX:d,currentY:h,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,s.startTranslate=s.currentTranslate;return}n.emit("sliderMove",c),s.isMoved=!0,s.currentTranslate=g+s.startTranslate;let w=!0,C=i.resistanceRatio;if(i.touchReleaseOnEdges&&(C=0),g>0?(y&&x&&!b&&s.allowThresholdMove&&s.currentTranslate>(i.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>n.minTranslate()&&(w=!1,i.resistance&&(s.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+s.startTranslate+g)**C))):g<0&&(y&&x&&!b&&s.allowThresholdMove&&s.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(i.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),s.currentTranslate<n.maxTranslate()&&(w=!1,i.resistance&&(s.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-s.startTranslate-g)**C))),w&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(s.currentTranslate=s.startTranslate),i.threshold>0)if(Math.abs(g)>i.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,s.currentTranslate=s.startTranslate,a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{s.currentTranslate=s.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(s.currentTranslate),n.setTranslate(s.currentTranslate))}function lge(t){const e=this,n=e.touchEventsData;let s=t;s.originalEvent&&(s=s.originalEvent);let i;if(s.type==="touchend"||s.type==="touchcancel"){if(i=[...s.changedTouches].filter(C=>C.identifier===n.touchId)[0],!i||i.identifier!==n.touchId)return}else{if(n.touchId!==null||s.pointerId!==n.pointerId)return;i=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)&&!(["pointercancel","contextmenu"].includes(s.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:o,touches:l,rtlTranslate:c,slidesGrid:u,enabled:d}=e;if(!d||!o.simulateTouch&&s.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",s),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&o.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}o.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=i_(),f=h-n.touchStartTime;if(e.allowClick){const C=s.path||s.composedPath&&s.composedPath();e.updateClickedSlide(C&&C[0]||s.target,C),e.emit("tap click",s),f<300&&h-n.lastClickTime<300&&e.emit("doubleTap doubleClick",s)}if(n.lastClickTime=i_(),ZE(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||l.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let p;if(o.followFinger?p=c?e.translate:-e.translate:p=-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}const g=p>=-e.maxTranslate()&&!e.params.loop;let m=0,_=e.slidesSizesGrid[0];for(let C=0;C<u.length;C+=C<o.slidesPerGroupSkip?1:o.slidesPerGroup){const j=C<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof u[C+j]<"u"?(g||p>=u[C]&&p<u[C+j])&&(m=C,_=u[C+j]-u[C]):(g||p>=u[C])&&(m=C,_=u[u.length-1]-u[u.length-2])}let y=null,x=null;o.rewind&&(e.isBeginning?x=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(y=0));const b=(p-u[m])/_,w=m<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(b>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?y:m+w):e.slideTo(m)),e.swipeDirection==="prev"&&(b>1-o.longSwipesRatio?e.slideTo(m+w):x!==null&&b<0&&Math.abs(b)>o.longSwipesRatio?e.slideTo(x):e.slideTo(m))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(s.target===e.navigation.nextEl||s.target===e.navigation.prevEl)?s.target===e.navigation.nextEl?e.slideTo(m+w):e.slideTo(m):(e.swipeDirection==="next"&&e.slideTo(y!==null?y:m+w),e.swipeDirection==="prev"&&e.slideTo(x!==null?x:m))}}function P6(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:i,snapGrid:a}=t,o=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const l=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!l?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!o?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=i,t.allowSlideNext=s,t.params.watchOverflow&&a!==t.snapGrid&&t.checkOverflow()}function cge(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function uge(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:s}=t;if(!s)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const a=t.maxTranslate()-t.minTranslate();a===0?i=0:i=(t.translate-t.minTranslate())/a,i!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function dge(t){const e=this;q1(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function hge(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const D$=(t,e)=>{const n=Tm(),{params:s,el:i,wrapperEl:a,device:o}=t,l=!!s.nested,c=e==="on"?"addEventListener":"removeEventListener",u=e;!i||typeof i=="string"||(n[c]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:l}),i[c]("touchstart",t.onTouchStart,{passive:!1}),i[c]("pointerdown",t.onTouchStart,{passive:!1}),n[c]("touchmove",t.onTouchMove,{passive:!1,capture:l}),n[c]("pointermove",t.onTouchMove,{passive:!1,capture:l}),n[c]("touchend",t.onTouchEnd,{passive:!0}),n[c]("pointerup",t.onTouchEnd,{passive:!0}),n[c]("pointercancel",t.onTouchEnd,{passive:!0}),n[c]("touchcancel",t.onTouchEnd,{passive:!0}),n[c]("pointerout",t.onTouchEnd,{passive:!0}),n[c]("pointerleave",t.onTouchEnd,{passive:!0}),n[c]("contextmenu",t.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&i[c]("click",t.onClick,!0),s.cssMode&&a[c]("scroll",t.onScroll),s.updateOnWindowResize?t[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",P6,!0):t[u]("observerUpdate",P6,!0),i[c]("load",t.onLoad,{capture:!0}))};function fge(){const t=this,{params:e}=t;t.onTouchStart=age.bind(t),t.onTouchMove=oge.bind(t),t.onTouchEnd=lge.bind(t),t.onDocumentTouchStart=hge.bind(t),e.cssMode&&(t.onScroll=uge.bind(t)),t.onClick=cge.bind(t),t.onLoad=dge.bind(t),D$(t,"on")}function pge(){D$(this,"off")}var mge={attachEvents:fge,detachEvents:pge};const I6=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function gge(){const t=this,{realIndex:e,initialized:n,params:s,el:i}=t,a=s.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const o=t.getBreakpoint(a,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const c=(o in a?a[o]:void 0)||t.originalParams,u=I6(t,s),d=I6(t,c),h=t.params.grabCursor,f=c.grabCursor,p=s.enabled;u&&!d?(i.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&d&&(i.classList.add(`${s.containerModifierClass}grid`),(c.grid.fill&&c.grid.fill==="column"||!c.grid.fill&&s.grid.fill==="column")&&i.classList.add(`${s.containerModifierClass}grid-column`),t.emitContainerClasses()),h&&!f?t.unsetGrabCursor():!h&&f&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(b=>{if(typeof c[b]>"u")return;const w=s[b]&&s[b].enabled,C=c[b]&&c[b].enabled;w&&!C&&t[b].disable(),!w&&C&&t[b].enable()});const g=c.direction&&c.direction!==s.direction,m=s.loop&&(c.slidesPerView!==s.slidesPerView||g),_=s.loop;g&&n&&t.changeDirection(),fa(t.params,c);const y=t.params.enabled,x=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),p&&!y?t.disable():!p&&y&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",c),n&&(m?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!_&&x?(t.loopCreate(e),t.updateSlides()):_&&!x&&t.loopDestroy()),t.emit("breakpoint",c)}function vge(t,e,n){if(e===void 0&&(e="window"),!t||e==="container"&&!n)return;let s=!1;const i=ka(),a=e==="window"?i.innerHeight:n.clientHeight,o=Object.keys(t).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const c=parseFloat(l.substr(1));return{value:a*c,point:l}}return{value:l,point:l}});o.sort((l,c)=>parseInt(l.value,10)-parseInt(c.value,10));for(let l=0;l<o.length;l+=1){const{point:c,value:u}=o[l];e==="window"?i.matchMedia(`(min-width: ${u}px)`).matches&&(s=c):u<=n.clientWidth&&(s=c)}return s||"max"}var yge={setBreakpoint:gge,getBreakpoint:vge};function xge(t,e){const n=[];return t.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(i=>{s[i]&&n.push(e+i)}):typeof s=="string"&&n.push(e+s)}),n}function bge(){const t=this,{classNames:e,params:n,rtl:s,el:i,device:a}=t,o=xge(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:s},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...o),i.classList.add(...e),t.emitContainerClasses()}function _ge(){const t=this,{el:e,classNames:n}=t;!e||typeof e=="string"||(e.classList.remove(...n),t.emitContainerClasses())}var wge={addClasses:bge,removeClasses:_ge};function Cge(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:s}=n;if(s){const i=t.slides.length-1,a=t.slidesGrid[i]+t.slidesSizesGrid[i]+s*2;t.isLocked=t.size>a}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var Sge={checkOverflow:Cge},eN={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function jge(t,e){return function(s){s===void 0&&(s={});const i=Object.keys(s)[0],a=s[i];if(typeof a!="object"||a===null){fa(e,s);return}if(t[i]===!0&&(t[i]={enabled:!0}),i==="navigation"&&t[i]&&t[i].enabled&&!t[i].prevEl&&!t[i].nextEl&&(t[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&t[i]&&t[i].enabled&&!t[i].el&&(t[i].auto=!0),!(i in t&&"enabled"in a)){fa(e,s);return}typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),fa(e,s)}}const JS={eventsEmitter:wme,update:Ime,translate:Fme,transition:zme,slide:Qme,loop:tge,grabCursor:rge,events:mge,breakpoints:yge,checkOverflow:Sge,classes:wge},ej={};let x4=class ic{constructor(){let e,n;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?n=i[0]:[e,n]=i,n||(n={}),n=fa({},n),e&&!n.el&&(n.el=e);const o=Tm();if(n.el&&typeof n.el=="string"&&o.querySelectorAll(n.el).length>1){const d=[];return o.querySelectorAll(n.el).forEach(h=>{const f=fa({},n,{el:h});d.push(new ic(f))}),d}const l=this;l.__swiper__=!0,l.support=N$(),l.device=k$({userAgent:n.userAgent}),l.browser=xme(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],n.modules&&Array.isArray(n.modules)&&l.modules.push(...n.modules);const c={};l.modules.forEach(d=>{d({params:n,swiper:l,extendParams:jge(n,c),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})});const u=fa({},eN,c);return l.params=fa({},u,ej,n),l.originalParams=fa({},l.params),l.passedParams=fa({},n),l.params&&l.params.on&&Object.keys(l.params.on).forEach(d=>{l.on(d,l.params.on[d])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),Object.assign(l,{enabled:l.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return l.params.direction==="horizontal"},isVertical(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:s}=this,i=cl(n,`.${s.slideClass}, swiper-slide`),a=N6(i[0]);return N6(e)-a}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:n,params:s}=e;e.slides=cl(n,`.${s.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const s=this;e=Math.min(Math.max(e,0),1);const i=s.minTranslate(),o=(s.maxTranslate()-i)*e+i;s.translateTo(o,typeof n>"u"?0:n),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(s=>{const i=e.getSlideClasses(s);n.push({slideEl:s,classNames:i}),e.emit("_slideClass",s,i)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e,n){e===void 0&&(e="current"),n===void 0&&(n=!1);const s=this,{params:i,slides:a,slidesGrid:o,slidesSizesGrid:l,size:c,activeIndex:u}=s;let d=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let h=a[u]?Math.ceil(a[u].swiperSlideSize):0,f;for(let p=u+1;p<a.length;p+=1)a[p]&&!f&&(h+=Math.ceil(a[p].swiperSlideSize),d+=1,h>c&&(f=!0));for(let p=u-1;p>=0;p-=1)a[p]&&!f&&(h+=a[p].swiperSlideSize,d+=1,h>c&&(f=!0))}else if(e==="current")for(let h=u+1;h<a.length;h+=1)(n?o[h]+l[h]-o[u]<c:o[h]-o[u]<c)&&(d+=1);else for(let h=u-1;h>=0;h-=1)o[u]-o[h]<c&&(d+=1);return d}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:s}=e;s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&q1(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const o=e.rtlTranslate?e.translate*-1:e.translate,l=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(l),e.updateActiveIndex(),e.updateSlidesClasses()}let a;if(s.freeMode&&s.freeMode.enabled&&!s.cssMode)i(),s.autoHeight&&e.updateAutoHeight();else{if((s.slidesPerView==="auto"||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const o=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;a=e.slideTo(o.length-1,0,!1,!0)}else a=e.slideTo(e.activeIndex,0,!1,!0);a||i()}s.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n){n===void 0&&(n=!0);const s=this,i=s.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(s.el.classList.remove(`${s.params.containerModifierClass}${i}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach(a=>{e==="vertical"?a.style.width="":a.style.height=""}),s.emit("changeDirection"),n&&s.update()),s}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let s=e||n.params.el;if(typeof s=="string"&&(s=document.querySelector(s)),!s)return!1;s.swiper=n,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const i=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(i()):cl(s,i())[0];return!o&&n.params.createElements&&(o=o_("div",n.params.wrapperClass),s.append(o),cl(s,`.${n.params.slideClass}`).forEach(l=>{o.append(l)})),Object.assign(n,{el:s,wrapperEl:o,slidesEl:n.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:o,hostEl:n.isElement?s.parentNode.host:s,mounted:!0,rtl:s.dir.toLowerCase()==="rtl"||Du(s,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(s.dir.toLowerCase()==="rtl"||Du(s,"direction")==="rtl"),wrongRTL:Du(o,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents();const i=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&i.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(a=>{a.complete?q1(n,a):a.addEventListener("load",o=>{q1(n,o.target)})}),JE(n),n.initialized=!0,JE(n),n.emit("init"),n.emit("afterInit"),n}destroy(e,n){e===void 0&&(e=!0),n===void 0&&(n=!0);const s=this,{params:i,el:a,wrapperEl:o,slides:l}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),i.loop&&s.loopDestroy(),n&&(s.removeClasses(),a&&typeof a!="string"&&a.removeAttribute("style"),o&&o.removeAttribute("style"),l&&l.length&&l.forEach(c=>{c.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),c.removeAttribute("style"),c.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(c=>{s.off(c)}),e!==!1&&(s.el&&typeof s.el!="string"&&(s.el.swiper=null),lme(s)),s.destroyed=!0),null}static extendDefaults(e){fa(ej,e)}static get extendedDefaults(){return ej}static get defaults(){return eN}static installModule(e){ic.prototype.__modules__||(ic.prototype.__modules__=[]);const n=ic.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>ic.installModule(n)),ic):(ic.installModule(e),ic)}};Object.keys(JS).forEach(t=>{Object.keys(JS[t]).forEach(e=>{x4.prototype[e]=JS[t][e]})});x4.use([bme,_me]);const P$=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Dh(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function hp(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>n.indexOf(s)<0).forEach(s=>{typeof t[s]>"u"?t[s]=e[s]:Dh(e[s])&&Dh(t[s])&&Object.keys(e[s]).length>0?e[s].__swiper__?t[s]=e[s]:hp(t[s],e[s]):t[s]=e[s]})}function I$(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function M$(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function O$(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function R$(t){t===void 0&&(t="");const e=t.split(" ").map(s=>s.trim()).filter(s=>!!s),n=[];return e.forEach(s=>{n.indexOf(s)<0&&n.push(s)}),n.join(" ")}function Tge(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function Ege(t){let{swiper:e,slides:n,passedParams:s,changedParams:i,nextEl:a,prevEl:o,scrollbarEl:l,paginationEl:c}=t;const u=i.filter(N=>N!=="children"&&N!=="direction"&&N!=="wrapperClass"),{params:d,pagination:h,navigation:f,scrollbar:p,virtual:g,thumbs:m}=e;let _,y,x,b,w,C,j,E;i.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&d.thumbs&&!d.thumbs.swiper&&(_=!0),i.includes("controller")&&s.controller&&s.controller.control&&d.controller&&!d.controller.control&&(y=!0),i.includes("pagination")&&s.pagination&&(s.pagination.el||c)&&(d.pagination||d.pagination===!1)&&h&&!h.el&&(x=!0),i.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||l)&&(d.scrollbar||d.scrollbar===!1)&&p&&!p.el&&(b=!0),i.includes("navigation")&&s.navigation&&(s.navigation.prevEl||o)&&(s.navigation.nextEl||a)&&(d.navigation||d.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(w=!0);const T=N=>{e[N]&&(e[N].destroy(),N==="navigation"?(e.isElement&&(e[N].prevEl.remove(),e[N].nextEl.remove()),d[N].prevEl=void 0,d[N].nextEl=void 0,e[N].prevEl=void 0,e[N].nextEl=void 0):(e.isElement&&e[N].el.remove(),d[N].el=void 0,e[N].el=void 0))};i.includes("loop")&&e.isElement&&(d.loop&&!s.loop?C=!0:!d.loop&&s.loop?j=!0:E=!0),u.forEach(N=>{if(Dh(d[N])&&Dh(s[N]))Object.assign(d[N],s[N]),(N==="navigation"||N==="pagination"||N==="scrollbar")&&"enabled"in s[N]&&!s[N].enabled&&T(N);else{const P=s[N];(P===!0||P===!1)&&(N==="navigation"||N==="pagination"||N==="scrollbar")?P===!1&&T(N):d[N]=s[N]}}),u.includes("controller")&&!y&&e.controller&&e.controller.control&&d.controller&&d.controller.control&&(e.controller.control=d.controller.control),i.includes("children")&&n&&g&&d.virtual.enabled?(g.slides=n,g.update(!0)):i.includes("virtual")&&g&&d.virtual.enabled&&(n&&(g.slides=n),g.update(!0)),i.includes("children")&&n&&d.loop&&(E=!0),_&&m.init()&&m.update(!0),y&&(e.controller.control=d.controller.control),x&&(e.isElement&&(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-pagination"),c.part.add("pagination"),e.el.appendChild(c)),c&&(d.pagination.el=c),h.init(),h.render(),h.update()),b&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-scrollbar"),l.part.add("scrollbar"),e.el.appendChild(l)),l&&(d.scrollbar.el=l),p.init(),p.updateSize(),p.setTranslate()),w&&(e.isElement&&((!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-next"),a.innerHTML=e.hostEl.constructor.nextButtonSvg,a.part.add("button-next"),e.el.appendChild(a)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),a&&(d.navigation.nextEl=a),o&&(d.navigation.prevEl=o),f.init(),f.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=s.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=s.allowSlidePrev),i.includes("direction")&&e.changeDirection(s.direction,!1),(C||E)&&e.loopDestroy(),(j||E)&&e.loopCreate(),e.update()}function Nge(t,e){t===void 0&&(t={}),e===void 0&&(e=!0);const n={on:{}},s={},i={};hp(n,eN),n._emitClasses=!0,n.init=!1;const a={},o=P$.map(c=>c.replace(/_/,"")),l=Object.assign({},t);return Object.keys(l).forEach(c=>{typeof t[c]>"u"||(o.indexOf(c)>=0?Dh(t[c])?(n[c]={},i[c]={},hp(n[c],t[c]),hp(i[c],t[c])):(n[c]=t[c],i[c]=t[c]):c.search(/on[A-Z]/)===0&&typeof t[c]=="function"?e?s[`${c[2].toLowerCase()}${c.substr(3)}`]=t[c]:n.on[`${c[2].toLowerCase()}${c.substr(3)}`]=t[c]:a[c]=t[c])}),["navigation","pagination","scrollbar"].forEach(c=>{n[c]===!0&&(n[c]={}),n[c]===!1&&delete n[c]}),{params:n,passedParams:i,rest:a,events:s}}function kge(t,e){let{el:n,nextEl:s,prevEl:i,paginationEl:a,scrollbarEl:o,swiper:l}=t;I$(e)&&s&&i&&(l.params.navigation.nextEl=s,l.originalParams.navigation.nextEl=s,l.params.navigation.prevEl=i,l.originalParams.navigation.prevEl=i),M$(e)&&a&&(l.params.pagination.el=a,l.originalParams.pagination.el=a),O$(e)&&o&&(l.params.scrollbar.el=o,l.originalParams.scrollbar.el=o),l.init(n)}function Age(t,e,n,s,i){const a=[];if(!e)return a;const o=c=>{a.indexOf(c)<0&&a.push(c)};if(n&&s){const c=s.map(i),u=n.map(i);c.join("")!==u.join("")&&o("children"),s.length!==n.length&&o("children")}return P$.filter(c=>c[0]==="_").map(c=>c.replace(/_/,"")).forEach(c=>{if(c in t&&c in e)if(Dh(t[c])&&Dh(e[c])){const u=Object.keys(t[c]),d=Object.keys(e[c]);u.length!==d.length?o(c):(u.forEach(h=>{t[c][h]!==e[c][h]&&o(c)}),d.forEach(h=>{t[c][h]!==e[c][h]&&o(c)}))}else t[c]!==e[c]&&o(c)}),a}const Dge=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function l_(){return l_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},l_.apply(this,arguments)}function L$(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function B$(t){const e=[];return Xe.Children.toArray(t).forEach(n=>{L$(n)?e.push(n):n.props&&n.props.children&&B$(n.props.children).forEach(s=>e.push(s))}),e}function Pge(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Xe.Children.toArray(t).forEach(s=>{if(L$(s))e.push(s);else if(s.props&&s.props.slot&&n[s.props.slot])n[s.props.slot].push(s);else if(s.props&&s.props.children){const i=B$(s.props.children);i.length>0?i.forEach(a=>e.push(a)):n["container-end"].push(s)}else n["container-end"].push(s)}),{slides:e,slots:n}}function Ige(t,e,n){if(!n)return null;const s=d=>{let h=d;return d<0?h=e.length+d:h>=e.length&&(h=h-e.length),h},i=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:a,to:o}=n,l=t.params.loop?-e.length:0,c=t.params.loop?e.length*2:e.length,u=[];for(let d=l;d<c;d+=1)d>=a&&d<=o&&u.push(e[s(d)]);return u.map((d,h)=>Xe.cloneElement(d,{swiper:t,style:i,key:d.props.virtualIndex||d.key||`slide-${h}`}))}function T0(t,e){return typeof window>"u"?v.useEffect(t,e):v.useLayoutEffect(t,e)}const M6=v.createContext(null),Mge=v.createContext(null),Xs=v.forwardRef(function(t,e){let{className:n,tag:s="div",wrapperTag:i="div",children:a,onSwiper:o,...l}=t===void 0?{}:t,c=!1;const[u,d]=v.useState("swiper"),[h,f]=v.useState(null),[p,g]=v.useState(!1),m=v.useRef(!1),_=v.useRef(null),y=v.useRef(null),x=v.useRef(null),b=v.useRef(null),w=v.useRef(null),C=v.useRef(null),j=v.useRef(null),E=v.useRef(null),{params:T,passedParams:N,rest:P,events:I}=Nge(l),{slides:B,slots:U}=Pge(a),z=()=>{g(!p)};Object.assign(T.on,{_containerClasses(Y,oe){d(oe)}});const G=()=>{Object.assign(T.on,I),c=!0;const Y={...T};if(delete Y.wrapperClass,y.current=new x4(Y),y.current.virtual&&y.current.params.virtual.enabled){y.current.virtual.slides=B;const oe={cache:!1,slides:B,renderExternal:f,renderExternalUpdate:!1};hp(y.current.params.virtual,oe),hp(y.current.originalParams.virtual,oe)}};_.current||G(),y.current&&y.current.on("_beforeBreakpoint",z);const V=()=>{c||!I||!y.current||Object.keys(I).forEach(Y=>{y.current.on(Y,I[Y])})},J=()=>{!I||!y.current||Object.keys(I).forEach(Y=>{y.current.off(Y,I[Y])})};v.useEffect(()=>()=>{y.current&&y.current.off("_beforeBreakpoint",z)}),v.useEffect(()=>{!m.current&&y.current&&(y.current.emitSlidesClasses(),m.current=!0)}),T0(()=>{if(e&&(e.current=_.current),!!_.current)return y.current.destroyed&&G(),kge({el:_.current,nextEl:w.current,prevEl:C.current,paginationEl:j.current,scrollbarEl:E.current,swiper:y.current},T),o&&!y.current.destroyed&&o(y.current),()=>{y.current&&!y.current.destroyed&&y.current.destroy(!0,!1)}},[]),T0(()=>{V();const Y=Age(N,x.current,B,b.current,oe=>oe.key);return x.current=N,b.current=B,Y.length&&y.current&&!y.current.destroyed&&Ege({swiper:y.current,slides:B,passedParams:N,changedParams:Y,nextEl:w.current,prevEl:C.current,scrollbarEl:E.current,paginationEl:j.current}),()=>{J()}}),T0(()=>{Dge(y.current)},[h]);function Q(){return T.virtual?Ige(y.current,B,h):B.map((Y,oe)=>Xe.cloneElement(Y,{swiper:y.current,swiperSlideIndex:oe}))}return Xe.createElement(s,l_({ref:_,className:R$(`${u}${n?` ${n}`:""}`)},P),Xe.createElement(Mge.Provider,{value:y.current},U["container-start"],Xe.createElement(i,{className:Tge(T.wrapperClass)},U["wrapper-start"],Q(),U["wrapper-end"]),I$(T)&&Xe.createElement(Xe.Fragment,null,Xe.createElement("div",{ref:C,className:"swiper-button-prev"}),Xe.createElement("div",{ref:w,className:"swiper-button-next"})),O$(T)&&Xe.createElement("div",{ref:E,className:"swiper-scrollbar"}),M$(T)&&Xe.createElement("div",{ref:j,className:"swiper-pagination"}),U["container-end"]))});Xs.displayName="Swiper";const Tn=v.forwardRef(function(t,e){let{tag:n="div",children:s,className:i="",swiper:a,zoom:o,lazy:l,virtualIndex:c,swiperSlideIndex:u,...d}=t===void 0?{}:t;const h=v.useRef(null),[f,p]=v.useState("swiper-slide"),[g,m]=v.useState(!1);function _(w,C,j){C===h.current&&p(j)}T0(()=>{if(typeof u<"u"&&(h.current.swiperSlideIndex=u),e&&(e.current=h.current),!(!h.current||!a)){if(a.destroyed){f!=="swiper-slide"&&p("swiper-slide");return}return a.on("_slideClass",_),()=>{a&&a.off("_slideClass",_)}}}),T0(()=>{a&&h.current&&!a.destroyed&&p(a.getSlideClasses(h.current))},[a]);const y={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},x=()=>typeof s=="function"?s(y):s,b=()=>{m(!0)};return Xe.createElement(n,l_({ref:h,className:R$(`${f}${i?` ${i}`:""}`),"data-swiper-slide-index":c,onLoad:b},d),o&&Xe.createElement(M6.Provider,{value:y},Xe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},x(),l&&!g&&Xe.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Xe.createElement(M6.Provider,{value:y},x(),l&&!g&&Xe.createElement("div",{className:"swiper-lazy-preloader"})))});Tn.displayName="SwiperSlide";const xy=({images:t,title:e,href:n="#",className:s="",badge:i,imageFit:a="cover"})=>{const o=ue(rt);return r.jsx(r.Fragment,{children:o?r.jsx(Oge,{images:t,title:e,className:s,href:n,badge:i,imageFit:a}):r.jsx(Rge,{images:t,title:e,className:s,href:n,badge:i,imageFit:a})})},Oge=({images:t,title:e,href:n,className:s="",badge:i,imageFit:a})=>{const o=ue(rt),[l,c]=v.useState(0),u=d=>{o&&d!==void 0&&c(d)};return r.jsxs(Ke,{to:n,target:"_blank",rel:"noopener noreferrer",className:`${Mi.CardGalleryTop} ${s}`,children:[i,r.jsxs("div",{className:Mi.CardGalleryImages,children:[t.map((d,h)=>{if(h<3)return r.jsx("div",{className:Mi.CardGalleryImageWrapper,onMouseEnter:()=>u(h),children:r.jsx("div",{className:Mi.CardGalleryImage,children:r.jsx("img",{src:qt(d),className:`${a==="contain"?"!object-contain":""}`,alt:e})})},h)}),t.length>3&&r.jsx("div",{className:Mi.CardGalleryImageWrapper,onMouseEnter:()=>u(),children:r.jsxs("div",{className:Mi.CardGalleryImage,children:[r.jsxs("div",{className:Mi.CardGalleryMore,children:["Показать ещё ",t.length-3," фото"]}),r.jsx("img",{src:qt(t[0]),className:`${a==="contain"?"!object-contain":""}`,alt:e})]})}),t.length>1?r.jsx("div",{className:Mi.CardGalleryPagination,children:t.map((d,h)=>{if(h<3)return r.jsx("span",{className:`${Mi.PaginationItem} ${l===h?Mi.PaginationItemActive:""}`},h)})}):""]})]})},Rge=({images:t,title:e,href:n,className:s="",badge:i,imageFit:a})=>r.jsxs(Ke,{to:n,target:"_blank",rel:"noopener noreferrer",className:Mi.CardGalleryTop,children:[i,r.jsx(Xs,{className:`${Mi.CardGalleryImages} CardGallerySwiper`,slidesPerView:1,spaceBetween:0,children:t.map((o,l)=>r.jsx(Tn,{className:Mi.CardGalleryImageWrapper,children:r.jsx("div",{className:Mi.CardGalleryImage,children:r.jsx("img",{src:qt(o),className:`${a==="contain"?"!object-contain":""}`,alt:e})})},l))})]}),Lge="_MetroItems_1yq4m_1",Bge="_MetroItem_1yq4m_1",Fge="_MetroItemName_1yq4m_17",$ge="_MetroItemTime_1yq4m_25",W1={MetroItems:Lge,MetroItem:Bge,MetroItemName:Fge,MetroItemTime:$ge},Uge=t=>{const e=Math.floor(t/1e3%60),n=Math.floor(t/(1e3*60)%60),s=Math.floor(t/(1e3*60*60)%24);return{days:Math.floor(t/(1e3*60*60*24)),hours:s,minutes:n,seconds:e}},Em=({data:t,visibleItems:e=1,className:n=""})=>{if(t&&t.length>0)return r.jsx("div",{className:`${W1.MetroItems} ${n}`,children:t.map((s,i)=>e>i&&r.jsx(Vge,{data:s},i))})},Vge=({data:t})=>{if(t)return r.jsxs("div",{className:W1.MetroItem,children:[r.jsx(Hie,{width:20,height:20}),r.jsx("span",{className:W1.MetroItemName,children:t.name}),t.time>0&&r.jsxs("span",{className:W1.MetroItemTime,children:["~ ",Uge(t.time).minutes," мин."]})]})},by=({condition:t,set:e,zoom:n=15,geo:s=[]})=>{const i=ue(rt);return r.jsx(Ze,{condition:t,set:e,children:r.jsx(gt,{condition:t,set:e,closeBtn:i,options:{modalContentClassNames:"!px-6 !pb-6 mmd1:max-h-[90vh] md1:!p-0",modalClassNames:"mmd1:max-h-[90vh]"},style:{"--modal-height":i?"900px":"100%","--modal-width":"1200px"},children:r.jsx(w4,{coordinates:s,variant:"default",zoom:n,onClose:()=>{i||e(!1)}})})})},zge=t=>{switch(t){case"":return"";case"shadow":return _o.CardPrimaryRootShadow;default:return""}},b4=({options:t})=>{const{condition:e,set:n,title:s,redirectUrl:i=""}=t;return r.jsx(Ze,{condition:e,children:r.jsx(Ro,{condition:e,title:r.jsxs(r.Fragment,{children:["Вы действительно хотите удалить ",s," ?"]}),set:n,request:async a=>{await Ue(`/admin-api/delete/object/${a}`),i?window.location.href=i:window.location.reload()}})})},F$=({options:t})=>{const{isBlockCard:e,setIsBlockCard:n,title:s,id:i}=t,[a,o]=v.useState(!1),[l,c]=v.useState(!1),u=()=>{!e||!n||Me(`/admin-api/${e?"disable":"enable"}/object/${i}`).then(d=>{c(!1),n(h=>!h)})};return r.jsxs(r.Fragment,{children:[r.jsx($t,{placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ke,{to:`${ht.objects.edit}${i}`,target:"_blank",children:r.jsx(Ts,{Selector:"div",className:"relative z-50",children:r.jsx(Ns,{className:"stroke-blue stroke-[1.5px]",width:18,height:18})})}),children:"Редактировать"}),r.jsx($t,{placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>o(i),children:r.jsx(un,{className:"fill-red",width:16,height:16})}),children:"Удалить"}),e&&n&&r.jsxs(r.Fragment,{children:[r.jsx($t,{classNameTarget:"bg-white relative z-[91] rounded-lg",placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{onClick:()=>c(!0),children:r.jsx(Ik,{className:"fill-red",width:18,height:18})}),children:e?"Заблокировать":"Разблокировать"}),r.jsx(Ze,{condition:l,children:r.jsx(gt,{condition:!!l,set:c,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[600px]"},children:r.jsxs("div",{className:"text-center",children:[r.jsxs("h2",{className:"title-2",children:["Вы действительно хотите ",e?"заблокировать":"разблокировать"," ",s," ?"]}),r.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-2",children:[r.jsx(_e,{onClick:()=>c(!1),children:"Нет"}),r.jsx(_e,{onClick:u,children:"Да"})]})]})})})]}),r.jsx(b4,{options:{condition:a,set:o,title:s,redirectUrl:ke.listing}})]})},Hge=()=>{const{customControls:t,title:e,id:n,geoVisible:s=!0,setIsOpenModalLocation:i}=v.useContext(_w),a=ue(Ot),o=Si(a);return t||(o?r.jsx(F$,{options:{title:e,id:n},children:s&&r.jsx($t,{placement:"bottom",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>i(!0),children:r.jsx(wl,{width:14,height:14,className:"pointer-events-none"})}),children:"Показать на карте"})}):r.jsxs(r.Fragment,{children:[r.jsx(Uc,{id:n,type:"complex",variant:"tooltip",placement:"bottom"}),s&&r.jsx($t,{placement:"bottom",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>i(!0),children:r.jsx(wl,{width:14,height:14,className:"pointer-events-none"})}),children:"Показать на карте"})]}))},qge=()=>{const{cashback:t,max_price:e,present:n,top:s,main_gifts:i,stickers:a,second_gifts:o,buildingDiscount:l}=v.useContext(_w),c=!!(t&&e||n||s),u=!!(t&&e),d=!!(i!=null&&i.length||n||o!=null&&o.length),h=!!(a!=null&&a.length),f=e/100*t;if(c)return r.jsxs("div",{className:"flex gap-1.5 flex-wrap mb-3",children:[!!l&&r.jsx(Ac,{discount:l.value,type_id:l.type,prefix:"Скидка",tooltip:!0,start_date:ct(l.start_date).format("DD.MM.YYYY"),end_date:ct(l.end_date).format("DD.MM.YYYY"),unit:l.unit,building_info:!0}),u&&r.jsx(Sa,{cashback:f}),d&&r.jsx(xw,{dataMainGifts:no(i)?i.filter(p=>p):[],dataSecondGifts:no(o)?o.filter(p=>p):[],title:"Есть подарок"}),h&&r.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.jsx(Sl,{data:[...a.map(p=>({...p,type:"sticker"}))],increaseHeight:!0,maxHeightDefault:50})}),s&&r.jsx(Ah,{top:s})]})},Wge=()=>{const{apartments:t,quantity:e}=v.useContext(_w);if(t&&t.length>0)return r.jsxs("div",{className:He(_o.CardPrimaryQuantity,"mt-4"),children:[r.jsxs("p",{className:_o.CardPrimaryQuantityBtn,children:[pt(e)," квартир от застройщика"]}),r.jsx("div",{className:"mt-3 flex flex-col gap-2.5",children:t.map((n,s)=>r.jsxs(Y2,{children:[r.jsxs("span",{children:[n.rooms===0?"Студии":`${n.rooms}-комн`,"   от ",n.min_area," м²"]}),r.jsxs("span",{children:["от ",Qu(n.price)," ₽"]})]},s))})]})},_w=v.createContext(),Ll=t=>{const{title:e,deadline:n,images:s,city:i,address:a,user:o,tags:l,metro:c,className:u="",variant:d="",id:h,onMouseEnter:f,onMouseLeave:p,userVisible:g=!0,href:m="",childrenContent:_="",badge:y,geo:x,children:b}=t,[w,C]=v.useState(!1);return r.jsx(_w.Provider,{value:{...t,setIsOpenModalLocation:C},children:r.jsxs("article",{className:He(_o.CardPrimaryRoot,u,zge(d)),onMouseEnter:f,onMouseLeave:p,children:[r.jsxs("div",{className:"flex flex-col h-full relative",children:[r.jsx(Ke,{to:m||`${ke.building}${h}`,target:"_blank",rel:"noopener noreferrer",className:_o.CardPrimaryLink}),r.jsx(xy,{images:s,title:e,href:m||`${ke.building}${h}`,badge:y}),r.jsx("div",{className:"flex gap-2 absolute top-3 right-3",children:r.jsx(Hge,{})}),r.jsxs("div",{className:_o.CardPrimaryContent,children:[_,r.jsxs("div",{className:"mb-4 w-[95%]",children:[r.jsx(qge,{}),r.jsx("h3",{className:`title-3-5 ${_o.CardPrimaryTitle}`,children:e}),r.jsxs("p",{className:_o.CardPrimaryTerm,children:["Срок сдачи: ",n]}),r.jsx("p",{className:_o.CardPrimaryAddress,children:[i,a].filter(j=>j).join(", ")}),r.jsx("div",{className:_o.CardPrimaryMetro,children:r.jsx(Em,{data:c})}),r.jsx(Wge,{})]}),!!(l!=null&&l.length)&&r.jsx("div",{className:"flex flex-wrap gap-1.5 w-full mb-4",children:r.jsx(Sl,{data:l,increaseHeight:!0})}),o&&g&&r.jsx("div",{className:_o.CardPrimaryBottom,children:r.jsx(Vs,{centered:!0,avatar:o.avatarUrl,name:o.name,pos:o.pos,className:"w-full"})}),b]})]}),r.jsx(by,{condition:w,set:C,geo:x})]})})},Xa=async t=>{try{return(await Me("/api/catalog",t)).data}catch(e){console.log(e)}},_4=async t=>{var e,n;try{return(n=(e=(await Me("/api/catalog",{visibleObjects:[t]})).data)==null?void 0:e.cards)==null?void 0:n[0]}catch(s){console.log(s)}},c_=({sale:t=[],sold:e=[],coordinates:n=[],markCoord:s=!1,zoom:i=12,className:a="",currentCityId:o=null,idMap:l="customMap",children:c,features:u=!1,route:d=!1,currentBuilding:h=null,buttons:f=null,isFullscreen:p=!1,setIsFullscreen:g=()=>{},options:m={},defaultIsFullscreen:_=!1,onClose:y=null})=>{const x=ue(rt),[b,w]=v.useState([]),[C,j]=v.useState(!1),[E,T]=v.useState(null),N=v.useRef(null),P=ue(Qs),I=v.useRef(null),[B,U]=v.useState([]),[z,G]=v.useState(null),[V,J]=v.useState(null),[Q,Y]=v.useState([]),[oe,he]=v.useState({});let me=!1;const[Oe,xe]=v.useState(!1);v.useEffect(()=>{w([...t,...e])},[t]),v.useEffect(()=>{qe(z)},[z]);const Pe=async $=>{var W;const X=await Xa({visibleObjects:[$],page:1});return(W=X==null?void 0:X.cards)==null?void 0:W[0]},qe=v.useCallback(es($=>{$&&($.type==="infrastructure"?Ie($.hint,$):Pe($.id).then(X=>{Ie($.hint,{...X,geo:$.geo})}))},450),[]);function Ie($,X){X.type==="infrastructure"?Cp.createRoot($).render(r.jsx($pe,{data:X,complexGeo:n,routeShow:()=>{S6(N.current,n,xe,I,he,X.geo)}})):Cp.createRoot($).render(r.jsx(Fpe,{currentBuilding:h,data:X,complexGeo:n,routeShow:()=>{S6(N.current,n,xe,I,he,X.geo)}}))}v.useEffect(()=>{wm(hm).then(()=>j(!0))},[]);const Ve=($,X)=>{const W=$.getBounds(),ce=[];X.forEach(function(ne){const ee=ne.mark.properties.get("id"),ge=ne.mark.geometry.getCoordinates();ymaps.util.bounds.contains(W,ge)&&ce.push(ee)}),Y(ce)},ot=()=>{try{const $=o?P.find(X=>X.id===o):null;ymaps.ready(()=>{var W;const X=new ymaps.Map(l,{center:$&&$.latitude&&$.longitude?[$.latitude,$.longitude]:((W=b[0])==null?void 0:W.geo)||n,zoom:i,controls:[]});if(!x&&!_&&X.behaviors.disable("drag"),Sm(X,I,null,g),jm(X,I,null,g,y,{setIsActiveRoute:xe,setRouteInfo:he}),s){const ce=new ymaps.Placemark(s,{},{preset:"islands#icon",iconColor:"#0095b6"});X.geoObjects.add(ce)}T(X),N.current=X,Ve(X,B),m&&m.setMap&&m.setMap(X),setTimeout(()=>{_&&X.container.enterFullscreen()},1)})}catch($){console.log("error is",$)}};v.useEffect(()=>{C&&!E&&ot()},[C,E,n]),v.useEffect(()=>{C&&E&&B.forEach($=>{E.geoObjects.remove($.mark)}),C&&E&&b.length>0&&setTimeout(()=>{const $=b.map(X=>{const W=xpe(X,[X.geo[0],X.geo[1]],X.type);return!document.querySelector(`[data-placemark-id="${W.id}"]`)&&window.innerWidth>1212&&(W.mark.events.add("mouseenter",ce=>{I.current.querySelectorAll("[data-balloon]").forEach(ee=>{ee.remove()}),me=!0;let ne=document.createElement("div");ne.style.position="absolute",ne.style.paddingTop="12px",ne.style.paddingBottom="12px",ne.style.zIndex="20001",ne.style.minWidth="450px",ne.style.minHeight="180px",ne.style.pointerEvents="all",ne.style.opacity=0,ne.setAttribute("data-balloon",W.id),I.current.appendChild(ne),G({...W,hint:ne}),setTimeout(()=>{const ee=setInterval(()=>{const ge=ne.firstChild;ge&&(ne.style.minWidth=`${ge.clientWidth}px`,ne.style.minHeight=`${ge.clientHeight}px`,ne.style.opacity=1,clearInterval(ee))},100);zk(W.mark.getOverlaySync().getElement().querySelector("[data-placemark-id]"),ne,{placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,0]}}]})},.1)}),W.mark.events.add("mouseleave",ce=>{})),W.mark.events.add("click",ce=>{window.innerWidth>1212?W.type!=="infrastructure"&&(window.location.href=`${ke.building}${W.id}`):Pe(W.id).then(ne=>{J(ne)})}),E.geoObjects.add(W.mark),E.events.add("mousemove",ce=>{me&&(me=!1,ce.get("target")!==W.mark&&I.current.querySelectorAll("[data-balloon]").forEach(ee=>{ee.remove()}))}),{...W}});U($)},100)},[b,C,E]),v.useEffect(()=>{d||C&&E&&m4(E,xe,he)},[d,C,E]),v.useEffect(()=>{E&&(E.getZoom()>14?B.forEach($=>{Q.includes($.id)&&H1(E,$)}):B.forEach($=>{Q.includes($.id)&&KE(E,$)}))},[Q]),v.useEffect(()=>{I.current&&m&&m.actionsContainerRef&&(m.actionsContainerRef.current=I.current)},[I.current]);const fe=()=>r.jsx(r.Fragment,{children:!!f&&f});return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`w-full h-[425px] rounded-xl overflow-hidden relative ${a}`,children:[r.jsx("div",{id:l,className:"remove-copyrights-pane",style:v4}),C&&E&&r.jsxs("div",{className:"ymap-actions-container",ref:I,children:[(!_||x||y)&&r.jsx("div",{className:"ymap-actions ymap-actions-group ymap-action-right-top",children:r.jsx("button",{onClick:()=>Cm(E,I,g),className:"ymap-action ymap-action-btn",children:p?r.jsx(Pr,{}):r.jsx($h,{})})}),(x||!x&&p)&&r.jsxs("div",{className:"ymap-actions ymap-top-right-center ymap-actions-group ymap-actions-group-join",children:[r.jsx("button",{onClick:()=>qh(E),className:"ymap-action",children:r.jsx(Ja,{className:"stroke-black"})}),r.jsx("button",{onClick:()=>Wh(E),className:"ymap-action",children:r.jsx(Uh,{})})]}),u&&(x||p)&&r.jsx(_v,{widthScreen:1222,className:`map-horizontal-actions ymap-actions ymap-actions-group ymap-actions-group-row md1:!w-full !gap-2 left-4 ${window.innerWidth>1222?"top-4":"bottom-4"}`,children:r.jsx(fe,{})}),oe&&!Ye(oe)&&d&&r.jsxs("div",{className:gr.MapRouteBlock,children:[oe.time," ",oe.type," ",oe.distance]}),c]})]}),u&&!x&&!p&&r.jsx(_v,{widthScreen:1222,className:"ymap-actions ymap-actions-group-row md1:!w-full !gap-2 mt-4",children:r.jsx(fe,{})}),!x&&r.jsx(Ze,{condition:V,children:r.jsx(gt,{condition:V,set:J,options:{modalClassNames:"",overlayClassNames:"_bottom _full !z-[9999999]",modalContentClassNames:"!px-4"},children:r.jsx(Ll,{...V})})})]})},Gge="_CheckboxRoot_szgz5_1",Yge="_CheckboxMark_szgz5_14",Xge="_CheckboxInput_szgz5_22",Kge="_CheckboxContent_szgz5_36",Fx={CheckboxRoot:Gge,CheckboxMark:Yge,CheckboxInput:Xge,CheckboxContent:Kge},Ph=({option:t={},checked:e=!1,onChange:n,className:s="",disabled:i,isValid:a,readOnly:o=!1,children:l})=>r.jsxs("label",{className:`${Fx.CheckboxRoot} ${s} ${t.image?"!items-center":""}`,children:[r.jsx("input",{type:"checkbox",value:t.value||"",checked:e,onChange:n,disabled:i,className:Fx.CheckboxInput,readOnly:o}),r.jsx("div",{className:Fx.CheckboxMark,children:r.jsx(Op,{})}),!!t.label&&r.jsxs("span",{className:`${Fx.CheckboxContent} ${t.image?"flex items-center gap-2 !mt-0.5":""}`,children:[t.image&&r.jsx(r.Fragment,{children:t.image==="default"?r.jsx(Nn,{src:"",title:t.label,size:40}):r.jsx(Nn,{src:t.image,title:t.label,size:40})}),t.label]}),t.BodyContent?t.BodyContent():r.jsx(r.Fragment,{}),l]}),Qge="_tabsNav_eeiqj_1",Zge="_tabsNavSecond_eeiqj_14",Jge="_tabsNavControls_eeiqj_32",e0e="_tabsBtn_eeiqj_41",t0e="_tabsBtnSecond_eeiqj_51",n0e="_tabsBtnActive_eeiqj_62",s0e="_tabsBtnSecondActive_eeiqj_67",r0e="_tabsBtnActiveBorder_eeiqj_71",i0e="_magicLine_eeiqj_77",Eo={tabsNav:Qge,tabsNavSecond:Zge,tabsNavControls:Jge,tabsBtn:e0e,tabsBtnSecond:t0e,tabsBtnActive:n0e,tabsBtnSecondActive:s0e,tabsBtnActiveBorder:r0e,magicLine:i0e},Uo=({data:t=[],defaultValue:e=0,children:n,bodyContentBefore:s,bodyContentAfter:i,navClassName:a="",containerClassName:o="",contentClassName:l="",titleClassName:c="",onChange:u=()=>{},onInit:d=()=>{},type:h="default"})=>{const[f,p]=v.useState(e),g=v.useRef([]),[m,_]=v.useState({left:0,width:0});v.useEffect(()=>{const x=g.current[f];d(f),x&&_({left:x.offsetLeft,width:x.offsetWidth})},[f,t]),v.useEffect(()=>{p(e)},[e]);const y=(x,b)=>{p(x),u(x,b)};if(!Ye(t))return r.jsxs("div",{className:o,children:[r.jsxs(jl,{type:h,className:a,children:[t.map((x,b)=>r.jsx("div",{className:"h-full",children:r.jsx(Tl,{className:c,type:h,onChange:()=>y(b,x),ref:w=>g.current[b]=w,value:f===b,count:x.count,children:x.name})},b)),h==="default"&&r.jsx("div",{className:Eo.magicLine,style:{left:`${m.left}px`,width:`${m.width}px`}})]}),r.jsxs(zp,{className:l,children:[s,t.map((x,b)=>f===b&&r.jsx("div",{children:x.body},b)),i]}),n]})},jl=({children:t,type:e="default",className:n=""})=>r.jsx(_v,{Selector:"nav",widthScreen:3222,className:`${e==="default"?Eo.tabsNav:e==="second"?Eo.tabsNavSecond:""} ${n}`,children:t}),Tl=v.forwardRef(({onChange:t=()=>{},value:e=!1,type:n="default",children:s,border:i=!1,count:a=null,className:o=""},l)=>r.jsxs("button",{type:"button",ref:l,className:`${n==="default"?Eo.tabsBtn:n==="second"?Eo.tabsBtnSecond:""} ${e?n==="default"?Eo.tabsBtnActive:n==="second"?Eo.tabsBtnSecondActive:"":""} ${n==="default"&&i&&e?Eo.tabsBtnActiveBorder:""} ${o}`,onClick:t,children:[s,typeof a=="number"?r.jsx("span",{className:"bg-count ml-2",children:a}):""]})),zp=({children:t,className:e=""})=>r.jsx("div",{className:`mt-6 ${e}`,children:t}),a0e=()=>`<svg aria-hidden="true" width="18" height="18" fill="white" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
         <path d="M16.219 6.435 8.484 2.813.75 6.337l7.734 4.112 4.896-2.546v4.015c0 .195.195.391.391.391h.588a.421.421 0 0 0 .391-.391v-4.7l1.469-.783Z" />
         <path d="M4.96 10.057v3.525s2.643 1.566 3.524 1.566c.881 0 3.525-1.566 3.525-1.566v-3.525c-1.175.588-2.35 1.175-3.525 1.665-1.175-.49-2.35-1.077-3.524-1.665Z" />
   </svg>`,o0e=()=>`<svg aria-hidden="true" width="18" height="18" fill="white" xmlns="http://www.w3.org/2000/svg">
                  <path d="M1 1v12c3.429.625 6 2 6 2V3S4.429 1.5 1 1Zm14 0v12c-3.429.625-6 2-6 2V3s2.571-1.5 6-2Z"/>
   </svg>`,l0e=()=>`<svg aria-hidden="true" width="18" height="18" viewBox="0 0 18 18" fill="white" xmlns="http://www.w3.org/2000/svg">
    <path d="M11.625 2.438c.362 0 .656.293.656.656v1.969h2.625c.362 0 .656.293.656.656v9.187a.656.656 0 0 1-.656.656H3.094a.656.656 0 0 1-.656-.656V5.72c0-.363.293-.657.656-.657h2.625V3.095c0-.362.294-.656.656-.656h5.25Zm-1.969 5.25H8.344v1.968H6.375v1.313h1.968v1.969h1.313v-1.97h1.969V9.657H9.656V7.687ZM10.97 3.75H7.03v1.313h3.938V3.75Z"/>
</svg>`,c0e=()=>`<svg aria-hidden="true" width="18" height="18" viewBox="0 0 18 18" fill="white" xmlns="http://www.w3.org/2000/svg">
       <path d="M4.464 5.348 2.437 3.322l.885-.885 2.026 2.027h9.526a.625.625 0 0 1 .6.805l-1.5 5a.625.625 0 0 1-.6.445h-7.66v1.25h6.875v1.25h-7.5a.625.625 0 0 1-.625-.625V5.35Zm.938 10.366a.938.938 0 1 1 0-1.875.938.938 0 0 1 0 1.875Zm7.5 0a.937.937 0 1 1 0-1.874.937.937 0 0 1 0 1.874Z"/>
      </svg>`,u0e=()=>`<svg
         xmlns="http://www.w3.org/2000/svg"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         version="1.1"
         width="18"
         height="18"
         fill="white"
         viewBox="0 0 24 24">
         <path d="M22 7V16C22 16.71 21.62 17.36 21 17.72V19.25C21 19.66 20.66 20 20.25 20H19.75C19.34 20 19 19.66 19 19.25V18H12V19.25C12 19.66 11.66 20 11.25 20H10.75C10.34 20 10 19.66 10 19.25V17.72C9.39 17.36 9 16.71 9 16V7C9 4 12 4 15.5 4S22 4 22 7M13 15C13 14.45 12.55 14 12 14S11 14.45 11 15 11.45 16 12 16 13 15.55 13 15M20 15C20 14.45 19.55 14 19 14S18 14.45 18 15 18.45 16 19 16 20 15.55 20 15M20 7H11V11H20V7M7 9.5C6.97 8.12 5.83 7 4.45 7.05C3.07 7.08 1.97 8.22 2 9.6C2.03 10.77 2.86 11.77 4 12V20H5V12C6.18 11.76 7 10.71 7 9.5Z" />
      </svg>`,$$=[{type:"scholl",icon:a0e()},{type:"kindergarten",icon:o0e()},{type:"medicine",icon:l0e()},{type:"shops",icon:c0e()},{type:"stop",icon:u0e()}],tj={name:"",type:"nearest",title:["Ближайшие проекты","Ближайших проектов нет"],minWidth:215,icon:r.jsx(wl,{width:15,height:15,className:"!fill-primary400"})},O6=(t,e,n)=>{const{setIsLoading:s,currentType:i,setCurrentType:a,placemarks:o,setPlacemarks:l,coordinates:c}=n;if(i===e){a(null);return}if(a(e),!o.find(u=>u.type===e).loaded)if(s(!0),e==="nearest")Ue(`/api/geo-search?lat=${c[0]}&lon=${c[1]}&radius=2`).then(u=>{const d=u.data.map(f=>({id:f.id,minPrice:f.apartments.length>0?Math.min(...f.apartments.map(p=>p.price)):0,geo:f.geo})).filter(f=>f.geo[0]!==c[0]&&f.geo[1]!==c[1]),h={type:"nearest",items:d,loaded:!0,loadedNull:!d.length};l(f=>[...f.filter(p=>p.type!=="nearest"),h]),s(!1)});else{const u=window.ymaps;u.ready(()=>{new u.control.SearchControl({options:{results:100,boundedBy:[[c[0]-.05,c[1]-.05],[c[0]+.05,c[1]+.05]],strictBounds:!0,provider:"yandex#search"}}).search(t).then(h=>{const f=h.geoObjects.toArray().map((p,g)=>({id:g+1,type:"infrastructure",settings:$$.find(m=>m.type===e),geo:p.geometry.getCoordinates(),name:p.properties.get("name"),address:p.properties.get("description")}));l(p=>[...p.filter(g=>g.type!==e),{type:e,items:f,loaded:!0,loadedNull:!f.length}]),s(!1)})})}},nj=({options:t,tabs:e=!1})=>{const{currentType:n,setCurrentType:s,placemarks:i,setPlacemarks:a,coordinates:o,activeTab:l,setActiveTab:c,isLoading:u,setIsLoading:d,map:h,openInfrastructure:f,setOpenInfrastructure:p}=t,g=[{title:"Предложения рядом"}];if(e)return r.jsx(jl,{children:g.map((m,_)=>r.jsx(Tl,{border:!0,onChange:()=>{c(_),_===0?O6(tj.name,tj.type,{isLoading:u,setIsLoading:d,currentType:n,setCurrentType:s,placemarks:i,setPlacemarks:a,coordinates:o}):s(null)},value:l===_,children:m.title},_))});{const m=[tj];return r.jsx(r.Fragment,{children:[m[0]].map(_=>r.jsx("div",{style:{minWidth:`${_.minWidth}px`},children:r.jsx(_e,{size:"Small",variant:"third",className:"ymap-action ymap-action-text min-w-full !font-normal",onClick:()=>{O6(_.name,_.type,t),h&&h.container.enterFullscreen()},active:!u&&i.find(y=>y.type===_.type).items.length&&n===_.type,disabled:i.find(y=>y.type===_.type).loadedNull,children:u&&n===_.type?r.jsx(fd,{size:16}):r.jsxs(r.Fragment,{children:[r.jsx("div",{children:_.icon||r.jsx("div",{className:"fill-primary400-elements",dangerouslySetInnerHTML:{__html:$$.find(y=>y.type===_.type).icon}})}),i.find(y=>y.type===_.type).loadedNull?_.title[1]:_.title[0]]})})},_.type))})}},w4=({coordinates:t=[],variant:e="default",zoom:n=13,currentBuilding:s=null,onClose:i=null})=>{const a=ue(rt),[o,l]=v.useState(null),[c,u]=v.useState(!1),[d,h]=v.useState(null),[f,p]=v.useState(!1),[g,m]=v.useState(["nearest","scholl","kindergarten","medicine","shops","stop"].map(w=>({type:w,items:[],loaded:!1,loadedNull:!1}))),[_,y]=v.useState(1),[x,b]=v.useState(!1);return r.jsx(r.Fragment,{children:e==="block"?r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Расположение объекта"}),a&&r.jsx(nj,{tabs:!0,options:{activeTab:_,setActiveTab:y,placemarks:g,setPlacemarks:m,currentType:o,setCurrentType:l,coordinates:t,isDesktop:a,isLoading:c,setIsLoading:u,setIsFullscreen:p,map:d,setOpenInfrastructure:b,openInfrastructure:x}}),r.jsx("div",{className:"relative w-full h-full",children:r.jsx(c_,{currentBuilding:s,coordinates:t,sale:o?g.find(w=>w.type===o).items:[],markCoord:t,zoom:n,isFullscreen:f,setIsFullscreen:p,idMap:"map-placemark-block",className:"mt-4 !h-[512px] md3:!h-[230px]",features:!0,route:_===2||!a||f,options:{setMap:h},buttons:r.jsx(r.Fragment,{children:(f||!a)&&r.jsx(nj,{options:{activeTab:_,setActiveTab:y,placemarks:g,setPlacemarks:m,currentType:o,setCurrentType:l,coordinates:t,isDesktop:a,isLoading:c,setIsLoading:u,setIsFullscreen:p,map:d,setOpenInfrastructure:b,openInfrastructure:x}})})})})]}):r.jsx(r.Fragment,{children:r.jsx(c_,{coordinates:t,sale:o?g.find(w=>w.type===o).items:[],markCoord:t,zoom:n,className:"h-full md1:rounded-none",idMap:"map-placemark-modal",features:!0,route:!0,isFullscreen:f,setIsFullscreen:p,options:{setMap:h},defaultIsFullscreen:!a,onClose:i,buttons:r.jsx(r.Fragment,{children:r.jsx(nj,{options:{activeTab:_,setActiveTab:y,placemarks:g,setPlacemarks:m,currentType:o,setCurrentType:l,coordinates:t,isDesktop:a,isLoading:c,setIsLoading:u,setIsFullscreen:p,map:d,setOpenInfrastructure:b,openInfrastructure:x}})})})})})};function d0e(t,e,n,s){return t.params.createElements&&Object.keys(s).forEach(i=>{if(!n[i]&&n.auto===!0){let a=cl(t.el,`.${s[i]}`)[0];a||(a=o_("div",s[i]),a.className=s[i],t.el.append(a)),n[i]=a,e[i]=a}}),n}function xi(t){let{swiper:e,extendParams:n,on:s,emit:i}=t;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function a(g){let m;return g&&typeof g=="string"&&e.isElement&&(m=e.el.querySelector(g),m)?m:(g&&(typeof g=="string"&&(m=[...document.querySelectorAll(g)]),e.params.uniqueNavElements&&typeof g=="string"&&m&&m.length>1&&e.el.querySelectorAll(g).length===1?m=e.el.querySelector(g):m&&m.length===1&&(m=m[0])),g&&!m?g:m)}function o(g,m){const _=e.params.navigation;g=Jl(g),g.forEach(y=>{y&&(y.classList[m?"add":"remove"](..._.disabledClass.split(" ")),y.tagName==="BUTTON"&&(y.disabled=m),e.params.watchOverflow&&e.enabled&&y.classList[e.isLocked?"add":"remove"](_.lockClass))})}function l(){const{nextEl:g,prevEl:m}=e.navigation;if(e.params.loop){o(m,!1),o(g,!1);return}o(m,e.isBeginning&&!e.params.rewind),o(g,e.isEnd&&!e.params.rewind)}function c(g){g.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function u(g){g.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function d(){const g=e.params.navigation;if(e.params.navigation=d0e(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(g.nextEl||g.prevEl))return;let m=a(g.nextEl),_=a(g.prevEl);Object.assign(e.navigation,{nextEl:m,prevEl:_}),m=Jl(m),_=Jl(_);const y=(x,b)=>{x&&x.addEventListener("click",b==="next"?u:c),!e.enabled&&x&&x.classList.add(...g.lockClass.split(" "))};m.forEach(x=>y(x,"next")),_.forEach(x=>y(x,"prev"))}function h(){let{nextEl:g,prevEl:m}=e.navigation;g=Jl(g),m=Jl(m);const _=(y,x)=>{y.removeEventListener("click",x==="next"?u:c),y.classList.remove(...e.params.navigation.disabledClass.split(" "))};g.forEach(y=>_(y,"next")),m.forEach(y=>_(y,"prev"))}s("init",()=>{e.params.navigation.enabled===!1?p():(d(),l())}),s("toEdge fromEdge lock unlock",()=>{l()}),s("destroy",()=>{h()}),s("enable disable",()=>{let{nextEl:g,prevEl:m}=e.navigation;if(g=Jl(g),m=Jl(m),e.enabled){l();return}[...g,...m].filter(_=>!!_).forEach(_=>_.classList.add(e.params.navigation.lockClass))}),s("click",(g,m)=>{let{nextEl:_,prevEl:y}=e.navigation;_=Jl(_),y=Jl(y);const x=m.target;let b=y.includes(x)||_.includes(x);if(e.isElement&&!b){const w=m.path||m.composedPath&&m.composedPath();w&&(b=w.find(C=>_.includes(C)||y.includes(C)))}if(e.params.navigation.hideOnClick&&!b){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===x||e.pagination.el.contains(x)))return;let w;_.length?w=_[0].classList.contains(e.params.navigation.hiddenClass):y.length&&(w=y[0].classList.contains(e.params.navigation.hiddenClass)),i(w===!0?"navigationShow":"navigationHide"),[..._,...y].filter(C=>!!C).forEach(C=>C.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),l()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:f,disable:p,update:l,init:d,destroy:h})}const h0e="_CheckboxToggleRoot_pek4s_1",f0e="_CheckboxToggleInput_pek4s_6",p0e="_CheckboxToggleEl_pek4s_10",sj={CheckboxToggleRoot:h0e,CheckboxToggleInput:f0e,CheckboxToggleEl:p0e},md=({checked:t=!1,set:e=()=>{},className:n,classNameInput:s,text:i="",classNameText:a,children:o})=>r.jsxs("label",{className:He(sj.CheckboxToggleRoot,n),children:[r.jsx("input",{type:"checkbox",value:t,checked:t,onChange:e,className:He(sj.CheckboxToggleInput,s)}),r.jsx("div",{"aria-hidden":"true",className:sj.CheckboxToggleEl}),i&&r.jsx("span",{className:He("ml-3 mt-1 font-medium",a),children:i}),o]}),m0e="_SpecialistsSliderToggle_1pzyr_1",g0e="_SpecialistsSliderToggleActive_1pzyr_9",R6={SpecialistsSliderToggle:m0e,SpecialistsSliderToggleActive:g0e},v0e="_SpecialistRoot_qeylg_1",y0e="_SpecialistWrapper_qeylg_12",x0e="_SpecialistImage_qeylg_19",b0e="_SpecialistRootError_qeylg_38",_0e="_SpecialistName_qeylg_38",w0e="_SpecialistRootActive_qeylg_47",C0e="_SpecialistCheck_qeylg_47",S0e="_SpecialistDescr_qeylg_79",j0e="_SpecialistLink_qeylg_86",Pd={SpecialistRoot:v0e,SpecialistWrapper:y0e,SpecialistImage:x0e,SpecialistRootError:b0e,SpecialistName:_0e,SpecialistRootActive:w0e,SpecialistCheck:C0e,SpecialistDescr:S0e,SpecialistLink:j0e},_y=({id:t,avatar:e,image:n,name:s,active:i,error:a,className:o="",link:l=!1,visibleChat:c=!1,onClickChat:u=()=>{},onClick:d=()=>{},size:h=64})=>r.jsxs("article",{className:He(Pd.SpecialistRoot,i&&Pd.SpecialistRootActive,a&&Pd.SpecialistRootError,o),onClick:d,children:[l?r.jsx("a",{href:`${ke.specialists.inner}${t}`,className:"CardLinkElement z-20",target:"_blank",rel:"noopener noreferrer"}):"",r.jsx("div",{className:Pd.SpecialistCheck,"aria-hidden":!0,children:r.jsx(Op,{})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{style:{width:h,height:h},className:Pd.SpecialistWrapper,children:e||n?r.jsx("div",{className:Pd.SpecialistImage,children:r.jsx("img",{src:qt(e||n),className:"w-full h-full aspect-square"})}):r.jsx($7,{title:s,size:80})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h3",{className:He(Pd.SpecialistName,"cut-one"),children:s}),!!c&&r.jsxs("button",{className:"blue-link relative z-30 md1:mt-4 flex gap-2 text-small mt-3",size:"Small",onClick:u,children:[r.jsx(vm,{width:16,height:16,className:"fill-blue"}),"Перейти в чат"]})]})]})]}),T0e=({specialists:t=[],options:e={},className:n="",classNameBtn:s="",slidesPerView:i=3})=>{if(t.length!==0)return r.jsxs("div",{className:"mt-8",children:[r.jsx("div",{className:`${n} ${s}`,children:r.jsx(Ir,{name:"isSpecialist",control:e.control,defaultValue:!1,render:({field:a})=>r.jsx(md,{checked:a.value,set:o=>{a.onChange(o.target.checked),e.setValue("specialist",void 0)},text:`Выбрать менеджера отдела продаж застройщика ${e.developName}`})})}),r.jsx("div",{className:`${R6.SpecialistsSliderToggle} ${e.isSpecialistValue?R6.SpecialistsSliderToggleActive:""}`,children:r.jsx(Xs,{slidesPerView:1,spaceBetween:16,modules:[xi],className:`${n} -my-3 py-3`,wrapperClass:"items-stretch",breakpoints:{520:{slidesPerView:2,spaceBetween:24},799:{slidesPerView:3,spaceBetween:24},1222:{slidesPerView:i,spaceBetween:24}},children:t.map((a,o)=>r.jsx(Tn,{children:r.jsx(Ir,{name:"specialist",control:e.control,rules:{required:e.isSpecialistValue},render:({field:l})=>r.jsx("div",{onClick:()=>l.onChange(a.id),className:"cursor-pointer h-full",children:r.jsx(_y,{...a,active:l.value===a.id,error:e.errors.specialist})})})},o))})})]})},rj=[{value:"2024",label:"2024"},{value:"2025",label:"2025"},{value:"2026",label:"2026"}],G1=[{value:"quarter1",label:"1 квартал"},{value:"quarter2",label:"2 квартал"},{value:"quarter3",label:"3 квартал"},{value:"quarter4",label:"4 квартал"}],wy=[{value:0,label:"Студия"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4+"}],u_=[{id:1,value:"cash",label:"Наличные"},{id:6,value:"installment_plan",label:"Рассрочка"},{id:2,value:"mortgage_approval_bank",label:"Ипотека, есть одобрение от банка"},{id:3,value:"mortgage_no_approval_bank",label:"Ипотека, нет одобрения от банка"},{id:4,value:"no_down_payment",label:"Без первоначального взноса"},{id:5,value:"certificate",label:"В сделке будет использоваться сертификат",BodyContent:()=>r.jsx($t,{mobile:!0,color:"white",ElementTarget:()=>r.jsx(Lp,{width:16,height:16}),classNameTarget:"h-4 mt-1",classNameContent:"mmd1:!p-6",placement:"bottom",children:r.jsxs("div",{className:"font-medium",children:["Материнский капитал, жилищный сертификат, ",r.jsx("br",{})," региональный и тд."]})})}],Y1=[{value:"any",label:"В любое время"},{value:"today",label:"Сегодня"},{value:"week",label:"В течении недели"},{value:"month",label:"В течении месяца"}],C4={value:"is_gift",label:"Есть подарок",descr:"Подарки от застройщика на выбор при покупке квартиры"},L6=(t="")=>["Застройщик","Комплекс"].includes(t),B6=[{value:"08:00",label:"08:00 - 09:00",time:8},{value:"09:00",label:"09:00 - 10:00",time:9},{value:"10:00",label:"10:00 - 11:00",time:10},{value:"11:00",label:"11:00 - 12:00",time:11},{value:"12:00",label:"12:00 - 13:00",time:12},{value:"13:00",label:"13:00 - 14:00",time:13},{value:"14:00",label:"14:00 - 15:00",time:14},{value:"15:00",label:"15:00 - 16:00",time:15},{value:"16:00",label:"16:00 - 17:00",time:16},{value:"17:00",label:"17:00 - 18:00",time:17},{value:"18:00",label:"18:00 - 19:00",time:18},{value:"19:00",label:"19:00 - 20:00",time:19},{value:"20:00",label:"20:00 - 21:00",time:20}],Nm={rooms:[],frame:[],areaFrom:"",areaTo:""},E0e="_CardRowRoot_19j7b_1",N0e="_CardRowRootBg_19j7b_12",k0e="_linkShift_19j7b_19",A0e="_afterShift_19j7b_30",d_={CardRowRoot:E0e,CardRowRootBg:N0e,linkShift:k0e,afterShift:A0e},S4=t=>{const e=ct();return ct(t).isSame(e,"day")},D0e=t=>{const e=ct().subtract(1,"day");return ct(t).isSame(e,"day")},U$=t=>{const e=ct(t);return S4(t)?`Сегодня в ${e.format("HH:mm")}`:D0e(t)?`Вчера в ${e.format("HH:mm")}`:e.isSame(ct(),"year")?e.format("D MMMM в HH:mm"):e.format("D MMMM YYYY [в] HH:mm")},P0e="_WebSkeleton_d9x8i_2",I0e="_WebSkeletonFramer_d9x8i_1",M0e="_WebSkeletonChildren_d9x8i_31",F6={WebSkeleton:P0e,WebSkeletonFramer:I0e,WebSkeletonChildren:M0e},Fe=({className:t=""})=>r.jsx("div",{className:`${F6.WebSkeleton} ${t}`,children:r.jsx("span",{className:F6.WebSkeletonChildren})}),V$=({children:t,className:e=""})=>r.jsx("div",{className:He(d_.CardRowRoot,e),children:t}),Hp=({children:t,className:e=""})=>r.jsx("div",{className:He(d_.CardRowRoot,d_.CardRowRootBg,e),children:t}),Cy=({data:t={},className:e="",classNameContent:n="",href:s="#",userVisible:i=!0,bg:a=!1,children:o,actionsChildren:l})=>{const c=ue(rt);return r.jsxs(V$,{className:He("relative py-5 px-8 md1:px-4 [&:not(:last-child)]:border-b border-lightGray hover:bg-pageColor hover:border-pageColor",!c&&"!flex",a&&d_.CardRowRootBg,e),children:[!!s&&r.jsx(Rl,{to:s,className:He("CardLinkElement z-20")}),r.jsxs("div",{className:"w-full flex flex-col gap-3",children:[r.jsxs("div",{className:He("flex mmd1:items-center gap-4 md1:flex-col",n),children:[r.jsxs("div",{className:"flex-grow md1:flex md1:gap-4",children:[r.jsx(z$,{data:t}),!!(l&&!c)&&r.jsx("div",{className:"relative z-20 ml-auto",children:l})]}),!!c&&r.jsx($6,{userVisible:i,data:t}),!!(l&&c)&&r.jsx("div",{className:"relative z-20 ml-auto",children:l})]}),r.jsx(x$,{data:t.calc_props,className:"z-20"}),!c&&r.jsx($6,{userVisible:i,data:t})]})]})},O0e=({data:t,className:e,value:n=!1})=>r.jsxs(V$,{className:He("grid-cols-[1fr_max-content] z-10 border",e,n?"border-blue":"border-primary600"),children:[!!n&&r.jsx("div",{className:"absolute -top-1.5 -right-1.5 bg-blue w-5 h-5  rounded-full flex items-center justify-center","aria-hidden":!0,children:r.jsx(Op,{className:"fill-none stroke-white",width:10,height:10})}),r.jsx(z$,{data:t,className:"title-4"})]}),z$=({data:t,className:e=""})=>{const n=t.rooms?t.rooms.filter(i=>i!==0):[],s=ue(rt);return r.jsxs("div",{className:He("flex items-center gap-1 flex-wrap max-w-[95%] title-3",e,!s&&"title-4"),children:[r.jsx("span",{children:"Новостройки."}),t.rooms&&t.rooms.length>0&&r.jsxs("span",{children:[t.rooms[0]===0&&"Студия,"," ",n.length>0?`${n.join(",")}-комн.`:""]}),t.area_total_from&&r.jsxs("span",{children:["от ",t.area_total_from," м²"]}),t.area_total_to&&r.jsxs("span",{children:["до ",t.area_total_to," м²"]}),t.floor_from&&r.jsxs("span",{children:["от ",t.floor_from," эт."]}),t.floor_to&&r.jsxs("span",{children:["до ",t.floor_to," эт."]}),t.price&&r.jsxs("span",{children:[pt(t.price||0)," ",t.price_type==="month_payment"?"₽/мес.":"₽"]})]})},$6=({userVisible:t,data:e})=>{var i,a;const n=ue(Ot),s=((i=e==null?void 0:e.user)==null?void 0:i.id)&&((a=e==null?void 0:e.user)==null?void 0:a.id)===n.id;return r.jsx(r.Fragment,{children:t&&e.user&&r.jsx(Vs,{textAvatar:e.user.name,avatar:e.user.image,name:s?"Вы":`${e.user.name} ${e.user.surname?`${$9(e.user.surname)}.`:""}`,centered:!0})})},R0e=({data:t,gridCols:e="grid-cols-[215px_200px_90px_120px_90px_90px_90px_1fr]",children:n,link:s=!0})=>{if(t)return r.jsxs(Hp,{className:e,children:[s&&r.jsx(Ke,{to:`${At.buyer}${t.id}/statistics`,className:"CardLinkElement"}),r.jsx(Vs,{avatar:t.user.avatarUrl,name:t.user.name,pos:t.user.pos,centered:!0}),r.jsx("div",{children:U$(t.last_seen_online)}),n]})},H$=({data:t,href:e="#",className:n,charsData:s=[],onClickMessage:i=null})=>(ue(rt),r.jsxs("div",{className:He("relative py-5 px-8 md1:px-4 [&:not(:last-child)]:border-b border-lightGray hover:bg-pageColor hover:border-pageColor",n),children:[!!e&&r.jsx(Rl,{to:e,className:He("CardLinkElement z-20")}),r.jsxs("div",{className:"flex gap-4 items-center md1:items-start",children:[r.jsx("div",{className:"gap-4 items-center md1:flex",children:r.jsx(Nn,{size:70,src:t.photo||t.image,title:t.name})}),r.jsxs("div",{className:"flex gap-4 items-center flex-grow md1:flex-col md1:items-start",children:[r.jsx("div",{className:"mr-6",children:r.jsxs("div",{className:"flex gap-2 flex-col",children:[r.jsx("h3",{className:"title-4 cut-one w-[165px]",children:uw(t.name,t.surname)}),!!t.agency&&r.jsx("p",{className:"text-primary400 text-small",children:t.agency}),!!t.year&&r.jsxs("p",{className:"text-primary400 text-small",children:["Год основания ",t.year," г."]})]})}),!!s.length&&r.jsx(Dk,{className:"!gap-x-5 !gap-y-3 flex-col",data:s}),i&&r.jsxs("button",{className:"blue-link relative z-30 md1:mt-2 flex gap-2 text-small mmd1:ml-auto",size:"Small",onClick:i,children:[r.jsx(vm,{width:16,height:16,className:"fill-blue"}),"Написать сообщение"]})]})]})]})),q$=()=>{const t=ue(rt);return r.jsx("div",{className:"py-5 px-8 md1:px-4",children:r.jsxs("div",{className:"flex items-center gap-3 w-full h-[80px]",children:[r.jsx(Fe,{className:"w-[80px] h-[80px] md1:w-[70px] md1:h-[70px] rounded-full"}),r.jsxs("div",{className:"flex-grow flex gap-4",children:[r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(Fe,{className:"w-[150px] md1:w-3/4 h-6 rounded-lg"}),r.jsx(Fe,{className:"w-[150px] md1:w-3/4 h-6 rounded-lg"})]}),t&&r.jsxs(r.Fragment,{children:[r.jsx(Fe,{className:"w-2/6 h-6 rounded-lg ml-auto"}),r.jsx(Fe,{className:"w-2/6 h-6 rounded-lg"})]})]})]})})},L0e=()=>r.jsxs("div",{className:"flex items-center gap-3 w-full",children:[r.jsx(Fe,{className:"w-10 h-10 rounded-full"}),r.jsx(Fe,{className:"w-4/5 h-10 rounded-lg"})]}),h_=(t,e,n=".")=>{const s=t.split(n);switch(e){case"DD-MM-YYYY":return`${s[2]}-${s[1]}-${s[0]}`;default:return"Invalid Format"}},ps=({control:t,requiredValue:e="",name:n="",option:s={},defaultValue:i=!1,errors:a,className:o="",variant:l="checkbox"})=>r.jsx(Ir,{name:n,control:t,defaultValue:i,rules:{required:e},render:({field:c})=>{if(l==="checkbox")return r.jsx(Ph,{className:o,option:s,checked:c.value,onChange:u=>c.onChange(u.target.checked),isValid:a?a[n]:!1});if(l==="toggle")return r.jsx(md,{checked:c.value,set:u=>c.onChange(u.target.checked),text:s.label})}}),km=({control:t,setValue:e,checkboxes:n=[],disabledAll:s,defaultValue:i={},required:a,watch:o})=>{v.useEffect(()=>{Ye(i)||e(i.value,!0)},[i]);const l=(c,u)=>{n.forEach(d=>{u&&(d.value===c?e(d.value,!0):e(d.value,!1))})};return n.map((c,u)=>r.jsx(Ir,{name:c.value,control:t,render:({field:d})=>r.jsx(Ph,{option:c,checked:d.value,disabled:s,onChange:h=>{a&&o&&o()[c.value]||(d.onChange(h),l(c.value,h.target.checked))}})},u))},W$=(t,e)=>{const n=Object.keys(e).filter(s=>{let i=!1;return t.forEach(a=>{a.value===s&&(i=!0)}),i});for(const s of n)if(e[s])return s};function U6(t,e){if(!e)return[];const[n,s,i]=e.split("."),a=new Date(i,s-1,n),o=new Date;if(o.getFullYear()!==a.getFullYear()||o.getMonth()!==a.getMonth()||o.getDate()!==a.getDate())return t;const l=o.toTimeString().slice(0,5);return t.filter(c=>c>=l)}const wv=({condition:t,set:e,type:n,id:s,specialistsShow:i=!0,specialists:a=[],developName:o,customSubmit:l=null,title:c="Записаться на просмотр",subtitle:u="",onUpdate:d=null,objectData:h={},editData:f=null,orderId:p=null})=>{var B;const m=((B=ue(Qs).find(U=>U.name===h.city))==null?void 0:B.id)||1,[_,y]=v.useState(!1),[x,b]=v.useState([]);v.useEffect(()=>{m&&(f||p||Me("/buyer-api/purchase-orders/get-by-data",{city_id:m}).then(U=>{b(U.data.orders)}))},[]);const{formState:{errors:w},handleSubmit:C,control:j,watch:E,setValue:T}=en(),N=E("isSpecialist"),P=E("date"),I=U=>{const z={city_id:m,property_type:n,property_id:s,date:ct(h_(U.date,"DD-MM-YYYY"),"DD.MM.YYYY").format("YYYY-MM-DD"),time:U.time,specialist:U.specialist,order_id:p||U.order_id,video_communication:_};if(l){l(z);return}Me("/buyer-api/suggestions/create",z).then(()=>{Me("/api/metric",{type:"application",metricable_type:n==="building"?"App\\Models\\Building":"App\\Models\\Apartment",metricable_id:s}).then(()=>{d?d():window.location.reload()})})};return r.jsx(gt,{options:{overlayClassNames:"_center-max-content",modalClassNames:"mmd1:!w-[800px]"},set:e,condition:t,children:r.jsxs("form",{onSubmit:C(I),className:"flex flex-col",children:[r.jsxs("h2",{className:"title-2 mb-6",children:[c,!!u&&r.jsx("span",{className:"ml-2 title-4 !text-primary400",children:u})]}),h&&!Ye(h)&&r.jsx(s4,{className:"mb-6 w-max",data:{...h,type:n}}),r.jsxs("div",{className:"bg-pageColor rounded-xl mb-4 flex justify-between items-center p-3 cursor-pointer",onClick:()=>y(U=>!U),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:"https://40.img.avito.st/image/1/1.XVBE57a1KyHzRnO5ckZzbUn8XbnyRPe_9EY7ug.-Qg4y8r0GbBP11mk7PdD85zlSk6uB03-Qb7FtNF2cVo",width:48,height:48}),r.jsxs("div",{children:[r.jsx("h3",{className:"title-3",children:"Онлайн-показ"}),r.jsx("p",{children:"Посмотрите по видеосвязи"})]})]}),r.jsx(md,{checked:_,className:"pointer-events-none"})]}),r.jsxs("p",{className:"bg-primary700 p-4 rounded-xl",children:["Выберите удобное время и дождитесь подтверждения от застройщика ",o]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4 md3:grid-cols-1",children:[r.jsx(Qe,{control:j,datePicker:!0,minDate:new Date,maxDate:new Date(new Date().getTime()+12*24*60*60*1e3),beforeText:"Дата",name:"date",requiredValue:!0,errors:w,defaultValue:f?f.date:""}),r.jsx(Qe,{control:j,mask:"hhmmMask",selectionButtons:{options:U6(B6.map(U=>U.value),P),className:"grid grid-cols-4 gap-2",required:!0,emptyText:P?"Нету доступного времени, выберите другой день":"Выберите день"},beforeText:"Время",name:"time",requiredValue:!0,errors:w,defaultValue:f?f.time:"",disabled:!U6(B6.map(U=>U.value),P).length})]}),!N&&r.jsx(_e,{className:"w-full mt-8",children:"Отправить"}),i&&r.jsx(T0e,{specialists:a,options:{setValue:T,control:j,developName:o,isSpecialistValue:N,errors:w}}),N&&r.jsx(_e,{className:"w-full mt-8",children:"Отправить"}),!!x.length&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-3",children:"Выберите подходящую заявку"}),r.jsx("div",{className:"flex flex-col gap-4",children:x.map(U=>r.jsx(Ir,{name:"order_id",control:j,defaultValue:x[0].id,render:({field:z})=>r.jsx("div",{onClick:()=>z.onChange(U.id),className:"cursor-pointer h-full",children:r.jsx(O0e,{value:z.value===U.id,bg:!1,data:{...U,current_type:"Новостройка"},userVisible:!1,className:"bg-primary600 !h-12 !min-h-12 px-4 rounded-lg",href:!1},U.id)},U.id)},U.id))})]})]})})},B0e=({data:t})=>r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"История изменения цены"}),r.jsx(w$,{data:t})]}),F0e=({data:t})=>r.jsxs(dn,{children:[r.jsx("title",{children:t.title}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),j4=({specialists:t,title:e="Менеджеры застройщика",descr:n="Напишите застройщику в чат, он подробно ответит на ваши вопросы",building_id:s=null,block:i=!0})=>{if(t.length===0)return;const a=ue(Ks),o=Dt();return r.jsxs("div",{className:`${i?"white-block":""}`,children:[r.jsx("h2",{className:"title-2 mb-5",children:e}),n&&r.jsx("p",{className:"bg-primary700 px-4 py-3 rounded-lg mmd1:w-max",children:n}),r.jsx("div",{className:"mt-4 grid grid-cols-3 gap-4 md2:grid-cols-2",children:t.map((l,c)=>r.jsx(_y,{...l,link:!0,visibleChat:!0,onClickChat:async()=>{if(a){const u=await $s({building_id:s,recipients_id:[l.id],type:xt.CHAT});xr(u)}else o(Bs(!0))}},c))})]})},$0e="_CardStock_1q6dj_1",U0e="_CardStockControl_1q6dj_7",V0e="_CardStockShadow_1q6dj_13",z0e="_CardStockLink_1q6dj_20",H0e="_CardStockImage_1q6dj_26",q0e="_CardStockTitle_1q6dj_47",W0e="_CardStockName_1q6dj_51",G0e="_CardStockDescr_1q6dj_56",Y0e="_CardStockContent_1q6dj_65",X0e="_CardStockUser_1q6dj_72",K0e="_CardStockTimes_1q6dj_76",Vr={CardStock:$0e,CardStockControl:U0e,CardStockShadow:V0e,CardStockLink:z0e,CardStockImage:H0e,CardStockTitle:q0e,CardStockName:W0e,CardStockDescr:G0e,CardStockContent:Y0e,CardStockUser:X0e,CardStockTimes:K0e},Q0e="_DragDropImage_147us_1",Z0e="_DragDropImageIcon_147us_30",J0e="_DragDropOverlay_147us_41",eve="_DragDropImageSolo_147us_66",tve="_DragDropImageSoloInput_147us_82",nve="_DragDropImageSoloImage_147us_92",sve="_DragDropImageSoloInputEffect_147us_116",wn={DragDropImage:Q0e,DragDropImageIcon:Z0e,DragDropOverlay:J0e,DragDropImageSolo:eve,DragDropImageSoloInput:tve,DragDropImageSoloImage:nve,DragDropImageSoloInputEffect:sve},G$=(t,e)=>{if(!t||!e)return!0;const n=ct(),s=ct.unix(t),i=ct.unix(e);return n.isAfter(s)&&n.isBefore(i)},Y$=t=>{switch(t){case"":return"";case"shadow":return Vr.CardStockShadow;default:return""}},ww=t=>{const{id:e,image:n,title:s,name:i,descr:a,deleteCard:o=()=>{},variant:l="",editCard:c,user:u=null,author:d=null,developer:h=null,visibleComplex:f=!0,controlsAdmin:p=!1,building_id:g}=t,m=d||u||h,[_,y]=v.useState(!1),x=ue(Wk);return r.jsxs("article",{className:`${Vr.CardStock} ${Y$(l)}`,children:[x&&p&&r.jsxs(r.Fragment,{children:[c&&r.jsx("button",{onClick:()=>c(e),title:"Редактировать",type:"button",className:`${wn.DragDropImageIcon} top-4 right-14 !z-20 ${Vr.CardStockControl}`,children:r.jsx(Ns,{width:15,height:15,className:"stroke-blue stroke-[1.5px]"})}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-4 right-4 ${Vr.CardStockControl}`,onClick:()=>y(!0),children:r.jsx(un,{width:15,height:15,className:"fill-red"})})]}),r.jsx(Ke,{to:`${ke.promo}${t.id}${f?"?visibleComplex=1":""}`,target:"_blank",className:Vr.CardStockLink}),r.jsxs("div",{className:`${Vr.CardStockImage} ibg`,children:[r.jsx("img",{loading:"lazy",src:qt(n),width:"323",height:"207",alt:s}),m&&r.jsx("div",{className:`${Vr.CardStockUser} absolute bottom-2 left-2 z-10 max-w-[93%]`,children:r.jsx(Vs,{avatar:m.avatar_url||m.avatarUrl||m.image,name:ks(m.name,m.surname),pos:m.pos||"Менеджер отдела продаж",centered:!0,classListName:"!text-white text-[12px]",sizeAvatar:26,classListUser:"!text-white"})})]}),r.jsxs("div",{className:Vr.CardStockContent,children:[!!(s&&f)&&r.jsxs(Ke,{to:`${ke.building}${g}`,className:"font-medium blue-link relative z-10 mb-2",children:[s.includes("ЖК")?"":"ЖК ",s]}),i&&r.jsx("div",{className:`${Vr.CardStockName} cut cut-1 title-4`,children:i}),a&&r.jsx("p",{className:Vr.CardStockDescr,children:a})]}),r.jsx(Ze,{condition:_,children:r.jsx(Ro,{condition:_,title:r.jsx(r.Fragment,{children:"Вы действительно хотите удалить ?"}),set:y,request:async()=>{await Me(`/admin-api/promo/${e}/delete`),await o(),y(!1)}})})]})},rve=t=>{const{image:e,title:n,name:s,descr:i,variant:a="",user:o=null,author:l=null,developer:c=null,visibleComplex:u=!0,building_id:d=1,start:h,end:f}=t,p=l||o||c,g=G$(h,f);return console.log(g),r.jsxs("article",{className:`${Vr.CardStock} ${Y$(a)}`,children:[r.jsx(Ke,{to:`${ke.promo}${t.id}${u?"?visibleComplex=1":""}`,target:"_blank",className:Vr.CardStockLink}),p&&r.jsx("div",{className:He(Vr.CardStockUser,"!mt-0 !mb-3"),children:r.jsx(Vs,{avatar:p.avatar_url||p.avatarUrl||p.image,name:ks(p.name,p.surname),pos:p.pos||"Менеджер отдела продаж",centered:!0})}),r.jsx("div",{className:He(Vr.CardStockImage,"ibg"),children:r.jsx("img",{loading:"lazy",src:qt(e),width:"323",height:"207",alt:n})}),r.jsxs("div",{className:Vr.CardStockContent,children:[!g&&r.jsx(_e,{size:"34",Selector:"div",className:"mb-5 flex-center-all gap-2 !bg-[#fff5e2] w-full !text-dark",children:"Срок действия акции истёк"}),!!(n&&u)&&r.jsxs(Ke,{to:`${ke.building}${d}`,className:"font-medium blue-link relative z-10 mb-2",children:[n.includes("ЖК")?"":"ЖК ",n]}),s&&r.jsx("div",{className:`${Vr.CardStockName} title-4`,children:s}),i&&r.jsx(yy,{descr:i,lines:2,className:"cut-2-imp"})]})]})},ive="_VideoCard_1es2f_1",ave="_VideoCardControl_1es2f_5",ove="_VideoCardShadow_1es2f_11",lve="_VideoCardRow_1es2f_18",cve="_VideoCardImage_1es2f_26",uve="_VideoCardContent_1es2f_32",dve="_VideoCardUser_1es2f_64",eu={VideoCard:ive,VideoCardControl:ave,VideoCardShadow:ove,VideoCardRow:lve,VideoCardImage:cve,VideoCardContent:uve,VideoCardUser:dve};var e0;typeof window<"u"?e0=window:typeof hn<"u"?e0=hn:typeof self<"u"?e0=self:e0={};var Cw=e0;const de=In(Cw);var V6=typeof hn<"u"?hn:typeof window<"u"?window:{},hve=uk,t0;typeof document<"u"?t0=document:(t0=V6["__GLOBAL_DOCUMENT_CACHE@4"],t0||(t0=V6["__GLOBAL_DOCUMENT_CACHE@4"]=hve));var X$=t0;const st=In(X$);var fve=pve;function pve(t,e){var n,s=null;try{n=JSON.parse(t,e)}catch(i){s=i}return[s,n]}const mve=In(fve);var T4={exports:{}};const gve=kR(nde);var vve=xve,yve=Object.prototype.toString;function xve(t){if(!t)return!1;var e=yve.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}function bve(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=_ve(t))||e){n&&(t=n);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ve(t,e){if(t){if(typeof t=="string")return z6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z6(t,e)}}function z6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}var wve=function(){function t(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var e=t.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},e.addInterceptor=function(s,i){this.typeToInterceptorsMap_.has(s)||this.typeToInterceptorsMap_.set(s,new Set);var a=this.typeToInterceptorsMap_.get(s);return a.has(i)?!1:(a.add(i),!0)},e.removeInterceptor=function(s,i){var a=this.typeToInterceptorsMap_.get(s);return a&&a.has(i)?(a.delete(i),!0):!1},e.clearInterceptorsByType=function(s){var i=this.typeToInterceptorsMap_.get(s);return i?(this.typeToInterceptorsMap_.delete(s),this.typeToInterceptorsMap_.set(s,new Set),!0):!1},e.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},e.getForType=function(s){return this.typeToInterceptorsMap_.get(s)||new Set},e.execute=function(s,i){for(var a=this.getForType(s),o=bve(a),l;!(l=o()).done;){var c=l.value;try{i=c(i)}catch{}}return i},t}(),Cve=wve,Sve=function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var e=t.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},e.getMaxAttempts=function(){return this.maxAttempts_},e.setMaxAttempts=function(s){this.maxAttempts_=s},e.getDelayFactor=function(){return this.delayFactor_},e.setDelayFactor=function(s){this.delayFactor_=s},e.getFuzzFactor=function(){return this.fuzzFactor_},e.setFuzzFactor=function(s){this.fuzzFactor_=s},e.getInitialDelay=function(){return this.initialDelay_},e.setInitialDelay=function(s){this.initialDelay_=s},e.createRetry=function(s){var i=s===void 0?{}:s,a=i.maxAttempts,o=i.delayFactor,l=i.fuzzFactor,c=i.initialDelay;return new jve({maxAttempts:a||this.maxAttempts_,delayFactor:o||this.delayFactor_,fuzzFactor:l||this.fuzzFactor_,initialDelay:c||this.initialDelay_})},t}(),jve=function(){function t(n){this.maxAttempts_=n.maxAttempts,this.delayFactor_=n.delayFactor,this.fuzzFactor_=n.fuzzFactor,this.currentDelay_=n.initialDelay,this.currentAttempt_=1}var e=t.prototype;return e.moveToNextAttempt=function(){this.currentAttempt_++;var s=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+s},e.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},e.getCurrentDelay=function(){return this.currentDelay_},e.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},e.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},e.getCurrentFuzzedDelay=function(){var s=this.getCurrentMinPossibleDelay(),i=this.getCurrentMaxPossibleDelay();return s+Math.random()*(i-s)},t}(),Tve=Sve,Eve=Cw,Nve=function(e,n){return n===void 0&&(n=!1),function(s,i,a){if(s){e(s);return}if(i.statusCode>=400&&i.statusCode<=599){var o=a;if(n)if(Eve.TextDecoder){var l=kve(i.headers&&i.headers["content-type"]);try{o=new TextDecoder(l).decode(a)}catch{}}else o=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:o});return}e(null,a)}};function kve(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,n){var s=n.split("="),i=s[0],a=s[1];return i.trim()==="charset"?a.trim():e},"utf-8")}var Ave=Nve,K$=Cw,Dve=gve,Pve=vve,Q$=Cve,Ive=Tve;Os.httpHandler=Ave;Os.requestInterceptorsStorage=new Q$;Os.responseInterceptorsStorage=new Q$;Os.retryManager=new Ive;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var Mve=function(e){var n={};return e&&e.trim().split(`
`).forEach(function(s){var i=s.indexOf(":"),a=s.slice(0,i).trim().toLowerCase(),o=s.slice(i+1).trim();typeof n[a]>"u"?n[a]=o:Array.isArray(n[a])?n[a].push(o):n[a]=[n[a],o]}),n};T4.exports=Os;T4.exports.default=Os;Os.XMLHttpRequest=K$.XMLHttpRequest||Bve;Os.XDomainRequest="withCredentials"in new Os.XMLHttpRequest?Os.XMLHttpRequest:K$.XDomainRequest;Ove(["get","put","post","patch","head","delete"],function(t){Os[t==="delete"?"del":t]=function(e,n,s){return n=Z$(e,n,s),n.method=t.toUpperCase(),E4(n)}});function Ove(t,e){for(var n=0;n<t.length;n++)e(t[n])}function Rve(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Z$(t,e,n){var s=t;return Pve(e)?(n=e,typeof t=="string"&&(s={uri:t})):s=Dve({},e,{uri:t}),s.callback=n,s}function Os(t,e,n){return e=Z$(t,e,n),E4(e)}function E4(t){if(typeof t.callback>"u")throw new Error("callback argument missing");if(t.requestType&&Os.requestInterceptorsStorage.getIsEnabled()){var e={uri:t.uri||t.url,headers:t.headers||{},body:t.body,metadata:t.metadata||{},retry:t.retry,timeout:t.timeout},n=Os.requestInterceptorsStorage.execute(t.requestType,e);t.uri=n.uri,t.headers=n.headers,t.body=n.body,t.metadata=n.metadata,t.retry=n.retry,t.timeout=n.timeout}var s=!1,i=function(C,j,E){s||(s=!0,t.callback(C,j,E))};function a(){u.readyState===4&&!Os.responseInterceptorsStorage.getIsEnabled()&&setTimeout(c,0)}function o(){var w=void 0;if(u.response?w=u.response:w=u.responseText||Lve(u),y)try{w=JSON.parse(w)}catch{}return w}function l(w){if(clearTimeout(x),clearTimeout(t.retryTimeout),w instanceof Error||(w=new Error(""+(w||"Unknown XMLHttpRequest Error"))),w.statusCode=0,!h&&Os.retryManager.getIsEnabled()&&t.retry&&t.retry.shouldRetry()){t.retryTimeout=setTimeout(function(){t.retry.moveToNextAttempt(),t.xhr=u,E4(t)},t.retry.getCurrentFuzzedDelay());return}if(t.requestType&&Os.responseInterceptorsStorage.getIsEnabled()){var C={headers:b.headers||{},body:b.body,responseUrl:u.responseURL,responseType:u.responseType},j=Os.responseInterceptorsStorage.execute(t.requestType,C);b.body=j.body,b.headers=j.headers}return i(w,b)}function c(){if(!h){var w;clearTimeout(x),clearTimeout(t.retryTimeout),t.useXDR&&u.status===void 0?w=200:w=u.status===1223?204:u.status;var C=b,j=null;if(w!==0?(C={body:o(),statusCode:w,method:p,headers:{},url:f,rawRequest:u},u.getAllResponseHeaders&&(C.headers=Mve(u.getAllResponseHeaders()))):j=new Error("Internal XMLHttpRequest Error"),t.requestType&&Os.responseInterceptorsStorage.getIsEnabled()){var E={headers:C.headers||{},body:C.body,responseUrl:u.responseURL,responseType:u.responseType},T=Os.responseInterceptorsStorage.execute(t.requestType,E);C.body=T.body,C.headers=T.headers}return i(j,C,C.body)}}var u=t.xhr||null;u||(t.cors||t.useXDR?u=new Os.XDomainRequest:u=new Os.XMLHttpRequest);var d,h,f=u.url=t.uri||t.url,p=u.method=t.method||"GET",g=t.body||t.data,m=u.headers=t.headers||{},_=!!t.sync,y=!1,x,b={body:void 0,headers:{},statusCode:0,method:p,url:f,rawRequest:u};if("json"in t&&t.json!==!1&&(y=!0,m.accept||m.Accept||(m.Accept="application/json"),p!=="GET"&&p!=="HEAD"&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),g=JSON.stringify(t.json===!0?g:t.json))),u.onreadystatechange=a,u.onload=c,u.onerror=l,u.onprogress=function(){},u.onabort=function(){h=!0,clearTimeout(t.retryTimeout)},u.ontimeout=l,u.open(p,f,!_,t.username,t.password),_||(u.withCredentials=!!t.withCredentials),!_&&t.timeout>0&&(x=setTimeout(function(){if(!h){h=!0,u.abort("timeout");var w=new Error("XMLHttpRequest timeout");w.code="ETIMEDOUT",l(w)}},t.timeout)),u.setRequestHeader)for(d in m)m.hasOwnProperty(d)&&u.setRequestHeader(d,m[d]);else if(t.headers&&!Rve(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(u.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(u),u.send(g||null),u}function Lve(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function Bve(){}var Fve=T4.exports;const J$=In(Fve);var eU={exports:{}},H6=X$,N4=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function pa(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}pa.prototype=N4(Error.prototype);pa.prototype.constructor=pa;pa.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function k4(t){function e(s,i,a,o){return(s|0)*3600+(i|0)*60+(a|0)+(o|0)/1e3}var n=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function E0(){this.values=N4(null)}E0.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var s=0;s<n.length;++s)if(e===n[s]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function n0(t,e,n,s){var i=s?t.split(s):[t];for(var a in i)if(typeof i[a]=="string"){var o=i[a].split(n);if(o.length===2){var l=o[0].trim(),c=o[1].trim();e(l,c)}}}function $ve(t,e,n){var s=t;function i(){var l=k4(t);if(l===null)throw new pa(pa.Errors.BadTimeStamp,"Malformed timestamp: "+s);return t=t.replace(/^[^\sa-zA-Z-]+/,""),l}function a(l,c){var u=new E0;n0(l,function(d,h){switch(d){case"region":for(var f=n.length-1;f>=0;f--)if(n[f].id===h){u.set(d,n[f].region);break}break;case"vertical":u.alt(d,h,["rl","lr"]);break;case"line":var p=h.split(","),g=p[0];u.integer(d,g),u.percent(d,g)&&u.set("snapToLines",!1),u.alt(d,g,["auto"]),p.length===2&&u.alt("lineAlign",p[1],["start","center","end"]);break;case"position":p=h.split(","),u.percent(d,p[0]),p.length===2&&u.alt("positionAlign",p[1],["start","center","end"]);break;case"size":u.percent(d,h);break;case"align":u.alt(d,h,["start","center","end","left","right"]);break}},/:/,/\s/),c.region=u.get("region",null),c.vertical=u.get("vertical","");try{c.line=u.get("line","auto")}catch{}c.lineAlign=u.get("lineAlign","start"),c.snapToLines=u.get("snapToLines",!0),c.size=u.get("size",100);try{c.align=u.get("align","center")}catch{c.align=u.get("align","middle")}try{c.position=u.get("position","auto")}catch{c.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},c.align)}c.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},c.align)}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=i(),o(),t.substr(0,3)!=="-->")throw new pa(pa.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+s);t=t.substr(3),o(),e.endTime=i(),o(),a(t,e)}var ij=H6.createElement&&H6.createElement("textarea"),Uve={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},q6={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Vve={v:"title",lang:"lang"},W6={rt:"ruby"};function tU(t,e){function n(){if(!e)return null;function g(_){return e=e.substr(_.length),_}var m=e.match(/^([^<]*)(<[^>]*>?)?/);return g(m[1]?m[1]:m[2])}function s(g){return ij.innerHTML=g,g=ij.textContent,ij.textContent="",g}function i(g,m){return!W6[m.localName]||W6[m.localName]===g.localName}function a(g,m){var _=Uve[g];if(!_)return null;var y=t.document.createElement(_),x=Vve[g];return x&&m&&(y[x]=m.trim()),y}for(var o=t.document.createElement("div"),l=o,c,u=[];(c=n())!==null;){if(c[0]==="<"){if(c[1]==="/"){u.length&&u[u.length-1]===c.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var d=k4(c.substr(1,c.length-2)),h;if(d){h=t.document.createProcessingInstruction("timestamp",d),l.appendChild(h);continue}var f=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f||(h=a(f[1],f[3]),!h)||!i(l,h))continue;if(f[2]){var p=f[2].split(".");p.forEach(function(g){var m=/^bg_/.test(g),_=m?g.slice(3):g;if(q6.hasOwnProperty(_)){var y=m?"background-color":"color",x=q6[_];h.style[y]=x}}),h.className=p.join(" ")}u.push(f[1]),l.appendChild(h),l=h;continue}l.appendChild(t.document.createTextNode(s(c)))}return o}var G6=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function zve(t){for(var e=0;e<G6.length;e++){var n=G6[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function Hve(t){var e=[],n="",s;if(!t||!t.childNodes)return"ltr";function i(l,c){for(var u=c.childNodes.length-1;u>=0;u--)l.push(c.childNodes[u])}function a(l){if(!l||!l.length)return null;var c=l.pop(),u=c.textContent||c.innerText;if(u){var d=u.match(/^.*(\n|\r)/);return d?(l.length=0,d[0]):u}if(c.tagName==="ruby")return a(l);if(c.childNodes)return i(l,c),a(l)}for(i(e,t);n=a(e);)for(var o=0;o<n.length;o++)if(s=n.charCodeAt(o),zve(s))return"rtl";return"ltr"}function qve(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,s=0,i=0;i<n.length&&n[i]!==e;i++)n[i].mode==="showing"&&s++;return++s*-1}function Sw(){}Sw.prototype.applyStyles=function(t,e){e=e||this.div;for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])};Sw.prototype.formatStyle=function(t,e){return t===0?0:t+e};function f_(t,e,n){Sw.call(this),this.cue=e,this.cueDiv=tU(t,e.text);var s={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(s,this.cueDiv),this.div=t.document.createElement("div"),s={direction:Hve(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(s),this.div.appendChild(this.cueDiv);var i=0;switch(e.positionAlign){case"start":case"line-left":i=e.position;break;case"center":i=e.position-e.size/2;break;case"end":case"line-right":i=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}f_.prototype=N4(Sw.prototype);f_.prototype.constructor=f_;function di(t){var e,n,s,i;if(t.div){n=t.div.offsetHeight,s=t.div.offsetWidth,i=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||n,this.bottom=t.bottom||i+(t.height||n),this.width=t.width||s,this.lineHeight=e!==void 0?e:t.lineHeight}di.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};di.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};di.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};di.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};di.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};di.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),n=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),s=e*n;return s/(this.height*this.width)};di.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};di.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,s=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var i={left:t.left,right:t.right,top:t.top||s,height:t.height||e,bottom:t.bottom||s+(t.height||e),width:t.width||n};return i};function Wve(t,e,n,s){function i(_,y){for(var x,b=new di(_),w=1,C=0;C<y.length;C++){for(;_.overlapsOppositeAxis(n,y[C])||_.within(n)&&_.overlapsAny(s);)_.move(y[C]);if(_.within(n))return _;var j=_.intersectPercentage(n);w>j&&(x=new di(_),w=j),_=new di(b)}return x||b}var a=new di(e),o=e.cue,l=qve(o),c=[];if(o.snapToLines){var u;switch(o.vertical){case"":c=["+y","-y"],u="height";break;case"rl":c=["+x","-x"],u="width";break;case"lr":c=["-x","+x"],u="width";break}var d=a.lineHeight,h=d*Math.round(l),f=n[u]+d,p=c[0];Math.abs(h)>f&&(h=h<0?-1:1,h*=Math.ceil(f/d)*d),l<0&&(h+=o.vertical===""?n.height:n.width,c=c.reverse()),a.move(p,h)}else{var g=a.lineHeight/n.height*100;switch(o.lineAlign){case"center":l-=g/2;break;case"end":l-=g;break}switch(o.vertical){case"":e.applyStyles({top:e.formatStyle(l,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(l,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(l,"%")});break}c=["+y","-x","+x","-y"],a=new di(e)}var m=i(a,c);e.move(m.toCSSCompatValues(n))}function Am(){}Am.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};Am.convertCueToDOMTree=function(t,e){return!t||!e?null:tU(t,e)};var Gve=.05,Yve="sans-serif",Xve="1.5%";Am.processCues=function(t,e,n){if(!t||!e||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var s=t.document.createElement("div");s.style.position="absolute",s.style.left="0",s.style.right="0",s.style.top="0",s.style.bottom="0",s.style.margin=Xve,n.appendChild(s);function i(d){for(var h=0;h<d.length;h++)if(d[h].hasBeenReset||!d[h].displayState)return!0;return!1}if(!i(e)){for(var a=0;a<e.length;a++)s.appendChild(e[a].displayState);return}var o=[],l=di.getSimpleBoxPosition(s),c=Math.round(l.height*Gve*100)/100,u={font:c+"px "+Yve};(function(){for(var d,h,f=0;f<e.length;f++)h=e[f],d=new f_(t,h,u),s.appendChild(d.div),Wve(t,d,l,o),h.displayState=d.div,o.push(di.getSimpleBoxPosition(d))})()};Am.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]};Am.Parser.prototype={reportOrThrowError:function(t){if(t instanceof pa)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function n(){for(var d=e.buffer,h=0;h<d.length&&d[h]!=="\r"&&d[h]!==`
`;)++h;var f=d.substr(0,h);return d[h]==="\r"&&++h,d[h]===`
`&&++h,e.buffer=d.substr(h),f}function s(d){var h=new E0;if(n0(d,function(p,g){switch(p){case"id":h.set(p,g);break;case"width":h.percent(p,g);break;case"lines":h.integer(p,g);break;case"regionanchor":case"viewportanchor":var m=g.split(",");if(m.length!==2)break;var _=new E0;if(_.percent("x",m[0]),_.percent("y",m[1]),!_.has("x")||!_.has("y"))break;h.set(p+"X",_.get("x")),h.set(p+"Y",_.get("y"));break;case"scroll":h.alt(p,g,["up"]);break}},/=/,/\s/),h.has("id")){var f=new(e.vttjs.VTTRegion||e.window.VTTRegion);f.width=h.get("width",100),f.lines=h.get("lines",3),f.regionAnchorX=h.get("regionanchorX",0),f.regionAnchorY=h.get("regionanchorY",100),f.viewportAnchorX=h.get("viewportanchorX",0),f.viewportAnchorY=h.get("viewportanchorY",100),f.scroll=h.get("scroll",""),e.onregion&&e.onregion(f),e.regionList.push({id:h.get("id"),region:f})}}function i(d){var h=new E0;n0(d,function(f,p){switch(f){case"MPEGT":h.integer(f+"S",p);break;case"LOCA":h.set(f+"L",k4(p));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:h.get("MPEGTS"),LOCAL:h.get("LOCAL")})}function a(d){d.match(/X-TIMESTAMP-MAP/)?n0(d,function(h,f){switch(h){case"X-TIMESTAMP-MAP":i(f);break}},/=/):n0(d,function(h,f){switch(h){case"Region":s(f);break}},/:/)}try{var o;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;o=n();var l=o.match(/^WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new pa(pa.Errors.BadSignature);e.state="HEADER"}for(var c=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(c?c=!1:o=n(),e.state){case"HEADER":/:/.test(o)?a(o):o||(e.state="ID");continue;case"NOTE":o||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){e.state="NOTE";break}if(!o)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",o.indexOf("-->")===-1){e.cue.id=o;continue}case"CUE":try{$ve(o,e.cue,e.regionList)}catch(d){e.reportOrThrowError(d),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=o.indexOf("-->")!==-1;if(!o||u&&(c=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=o.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":o||(e.state="ID");continue}}}catch(d){e.reportOrThrowError(d),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new pa(pa.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Kve=Am,Qve="auto",Zve={"":1,lr:1,rl:1},Jve={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function eye(t){if(typeof t!="string")return!1;var e=Zve[t.toLowerCase()];return e?t.toLowerCase():!1}function aj(t){if(typeof t!="string")return!1;var e=Jve[t.toLowerCase()];return e?t.toLowerCase():!1}function nU(t,e,n){this.hasBeenReset=!1;var s="",i=!1,a=t,o=e,l=n,c=null,u="",d=!0,h="auto",f="start",p="auto",g="auto",m=100,_="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return s},set:function(y){s=""+y}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(y){i=!!y}},startTime:{enumerable:!0,get:function(){return a},set:function(y){if(typeof y!="number")throw new TypeError("Start time must be set to a number.");a=y,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(y){if(typeof y!="number")throw new TypeError("End time must be set to a number.");o=y,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(y){l=""+y,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(y){c=y,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(y){var x=eye(y);if(x===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=x,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(y){d=!!y,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(y){if(typeof y!="number"&&y!==Qve)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=y,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(y){var x=aj(y);x?(f=x,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(y){if(y<0||y>100)throw new Error("Position must be between 0 and 100.");p=y,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return g},set:function(y){var x=aj(y);x?(g=x,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return m},set:function(y){if(y<0||y>100)throw new Error("Size must be between 0 and 100.");m=y,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return _},set:function(y){var x=aj(y);if(!x)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");_=x,this.hasBeenReset=!0}}}),this.displayState=void 0}nU.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var tye=nU,nye={"":!0,up:!0};function sye(t){if(typeof t!="string")return!1;var e=nye[t.toLowerCase()];return e?t.toLowerCase():!1}function Ag(t){return typeof t=="number"&&t>=0&&t<=100}function rye(){var t=100,e=3,n=0,s=100,i=0,a=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(l){if(!Ag(l))throw new Error("Width must be between 0 and 100.");t=l}},lines:{enumerable:!0,get:function(){return e},set:function(l){if(typeof l!="number")throw new TypeError("Lines must be set to a number.");e=l}},regionAnchorY:{enumerable:!0,get:function(){return s},set:function(l){if(!Ag(l))throw new Error("RegionAnchorX must be between 0 and 100.");s=l}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(l){if(!Ag(l))throw new Error("RegionAnchorY must be between 0 and 100.");n=l}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(l){if(!Ag(l))throw new Error("ViewportAnchorY must be between 0 and 100.");a=l}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(l){if(!Ag(l))throw new Error("ViewportAnchorX must be between 0 and 100.");i=l}},scroll:{enumerable:!0,get:function(){return o},set:function(l){var c=sye(l);c===!1?console.warn("Scroll: an invalid or illegal string was specified."):o=c}}})}var iye=rye,Dc=Cw,Gh=eU.exports={WebVTT:Kve,VTTCue:tye,VTTRegion:iye};Dc.vttjs=Gh;Dc.WebVTT=Gh.WebVTT;var aye=Gh.VTTCue,oye=Gh.VTTRegion,lye=Dc.VTTCue,cye=Dc.VTTRegion;Gh.shim=function(){Dc.VTTCue=aye,Dc.VTTRegion=oye};Gh.restore=function(){Dc.VTTCue=lye,Dc.VTTRegion=cye};Dc.VTTCue||Gh.shim();var uye=eU.exports;const Y6=In(uye);var sU={exports:{}};(function(t,e){(function(n){var s=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,l={buildAbsoluteURL:function(c,u,d){if(d=d||{},c=c.trim(),u=u.trim(),!u){if(!d.alwaysNormalize)return c;var h=l.parseURL(c);if(!h)throw new Error("Error trying to parse base URL.");return h.path=l.normalizePath(h.path),l.buildURLFromParts(h)}var f=l.parseURL(u);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return d.alwaysNormalize?(f.path=l.normalizePath(f.path),l.buildURLFromParts(f)):u;var p=l.parseURL(c);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var g=i.exec(p.path);p.netLoc=g[1],p.path=g[2]}p.netLoc&&!p.path&&(p.path="/");var m={scheme:p.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(m.netLoc=p.netLoc,f.path[0]!=="/"))if(!f.path)m.path=p.path,f.params||(m.params=p.params,f.query||(m.query=p.query));else{var _=p.path,y=_.substring(0,_.lastIndexOf("/")+1)+f.path;m.path=l.normalizePath(y)}return m.path===null&&(m.path=d.alwaysNormalize?l.normalizePath(f.path):f.path),l.buildURLFromParts(m)},parseURL:function(c){var u=s.exec(c);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(a,"");c.length!==(c=c.replace(o,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}};t.exports=l})()})(sU);var dye=sU.exports;const X6=In(dye);var K6="http://example.com",jw=function(e,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(e)&&(e=de.location&&de.location.href||"");var s=typeof de.URL=="function",i=/^\/\//.test(e),a=!de.location&&!/\/\//i.test(e);if(s?e=new de.URL(e,de.location||K6):/\/\//i.test(e)||(e=X6.buildAbsoluteURL(de.location&&de.location.href||"",e)),s){var o=new URL(n,e);return a?o.href.slice(K6.length):i?o.href.slice(o.protocol.length):o.href}return X6.buildAbsoluteURL(e,n)},A4=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(s,i){this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push(i)},e.off=function(s,i){if(!this.listeners[s])return!1;var a=this.listeners[s].indexOf(i);return this.listeners[s]=this.listeners[s].slice(0),this.listeners[s].splice(a,1),a>-1},e.trigger=function(s){var i=this.listeners[s];if(i)if(arguments.length===2)for(var a=i.length,o=0;o<a;++o)i[o].call(this,arguments[1]);else for(var l=Array.prototype.slice.call(arguments,1),c=i.length,u=0;u<c;++u)i[u].apply(this,l)},e.dispose=function(){this.listeners={}},e.pipe=function(s){this.on("data",function(i){s.push(i)})},t}(),hye=function(e){return de.atob?de.atob(e):vl.from(e,"base64").toString("binary")};function fye(t){for(var e=hye(t),n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class pye extends A4{constructor(){super(),this.buffer=""}push(e){let n;for(this.buffer+=e,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)}}const mye="	",oj=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),n={};return e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),n},gye=function(){const n="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+n+")")},ni=function(t){const e={};if(!t)return e;const n=t.split(gye());let s=n.length,i;for(;s--;)n[s]!==""&&(i=/([^=]*)=(.*)/.exec(n[s]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),e[i[0]]=i[1]);return e},Q6=t=>{const e=t.split("x"),n={};return e[0]&&(n.width=parseInt(e[0],10)),e[1]&&(n.height=parseInt(e[1],10)),n};class vye extends A4{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let n,s;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((a,o)=>{const l=o(e);return l===e?a:a.concat([l])},[e]).forEach(a=>{for(let o=0;o<this.customParsers.length;o++)if(this.customParsers[o].call(this,a))return;if(a.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:a.slice(1)});return}if(a=a.replace("\r",""),n=/^#EXTM3U/.exec(a),n){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(n=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(a),n){s={type:"tag",tagType:"inf"},n[1]&&(s.duration=parseFloat(n[1])),n[2]&&(s.title=n[2]),this.trigger("data",s);return}if(n=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(a),n){s={type:"tag",tagType:"targetduration"},n[1]&&(s.duration=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-VERSION:([0-9.]*)?/.exec(a),n){s={type:"tag",tagType:"version"},n[1]&&(s.version=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(a),n){s={type:"tag",tagType:"media-sequence"},n[1]&&(s.number=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(a),n){s={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(s.number=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(a),n){s={type:"tag",tagType:"playlist-type"},n[1]&&(s.playlistType=n[1]),this.trigger("data",s);return}if(n=/^#EXT-X-BYTERANGE:(.*)?$/.exec(a),n){s=ds(oj(n[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",s);return}if(n=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(a),n){s={type:"tag",tagType:"allow-cache"},n[1]&&(s.allowed=!/NO/.test(n[1])),this.trigger("data",s);return}if(n=/^#EXT-X-MAP:(.*)$/.exec(a),n){if(s={type:"tag",tagType:"map"},n[1]){const o=ni(n[1]);o.URI&&(s.uri=o.URI),o.BYTERANGE&&(s.byterange=oj(o.BYTERANGE))}this.trigger("data",s);return}if(n=/^#EXT-X-STREAM-INF:(.*)$/.exec(a),n){s={type:"tag",tagType:"stream-inf"},n[1]&&(s.attributes=ni(n[1]),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=Q6(s.attributes.RESOLUTION)),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),s.attributes["PROGRAM-ID"]&&(s.attributes["PROGRAM-ID"]=parseInt(s.attributes["PROGRAM-ID"],10))),this.trigger("data",s);return}if(n=/^#EXT-X-MEDIA:(.*)$/.exec(a),n){s={type:"tag",tagType:"media"},n[1]&&(s.attributes=ni(n[1])),this.trigger("data",s);return}if(n=/^#EXT-X-ENDLIST/.exec(a),n){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(n=/^#EXT-X-DISCONTINUITY/.exec(a),n){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(n=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(a),n){s={type:"tag",tagType:"program-date-time"},n[1]&&(s.dateTimeString=n[1],s.dateTimeObject=new Date(n[1])),this.trigger("data",s);return}if(n=/^#EXT-X-KEY:(.*)$/.exec(a),n){s={type:"tag",tagType:"key"},n[1]&&(s.attributes=ni(n[1]),s.attributes.IV&&(s.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(s.attributes.IV=s.attributes.IV.substring(2)),s.attributes.IV=s.attributes.IV.match(/.{8}/g),s.attributes.IV[0]=parseInt(s.attributes.IV[0],16),s.attributes.IV[1]=parseInt(s.attributes.IV[1],16),s.attributes.IV[2]=parseInt(s.attributes.IV[2],16),s.attributes.IV[3]=parseInt(s.attributes.IV[3],16),s.attributes.IV=new Uint32Array(s.attributes.IV))),this.trigger("data",s);return}if(n=/^#EXT-X-START:(.*)$/.exec(a),n){s={type:"tag",tagType:"start"},n[1]&&(s.attributes=ni(n[1]),s.attributes["TIME-OFFSET"]=parseFloat(s.attributes["TIME-OFFSET"]),s.attributes.PRECISE=/YES/.test(s.attributes.PRECISE)),this.trigger("data",s);return}if(n=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(a),n){s={type:"tag",tagType:"cue-out-cont"},n[1]?s.data=n[1]:s.data="",this.trigger("data",s);return}if(n=/^#EXT-X-CUE-OUT:(.*)?$/.exec(a),n){s={type:"tag",tagType:"cue-out"},n[1]?s.data=n[1]:s.data="",this.trigger("data",s);return}if(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a),n){s={type:"tag",tagType:"cue-in"},n[1]?s.data=n[1]:s.data="",this.trigger("data",s);return}if(n=/^#EXT-X-SKIP:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"skip"},s.attributes=ni(n[1]),s.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(s.attributes["SKIPPED-SEGMENTS"]=parseInt(s.attributes["SKIPPED-SEGMENTS"],10)),s.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(s.attributes["RECENTLY-REMOVED-DATERANGES"]=s.attributes["RECENTLY-REMOVED-DATERANGES"].split(mye)),this.trigger("data",s);return}if(n=/^#EXT-X-PART:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"part"},s.attributes=ni(n[1]),["DURATION"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseFloat(s.attributes[o]))}),["INDEPENDENT","GAP"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=/YES/.test(s.attributes[o]))}),s.attributes.hasOwnProperty("BYTERANGE")&&(s.attributes.byterange=oj(s.attributes.BYTERANGE)),this.trigger("data",s);return}if(n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"server-control"},s.attributes=ni(n[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseFloat(s.attributes[o]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=/YES/.test(s.attributes[o]))}),this.trigger("data",s);return}if(n=/^#EXT-X-PART-INF:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"part-inf"},s.attributes=ni(n[1]),["PART-TARGET"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseFloat(s.attributes[o]))}),this.trigger("data",s);return}if(n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"preload-hint"},s.attributes=ni(n[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(o){if(s.attributes.hasOwnProperty(o)){s.attributes[o]=parseInt(s.attributes[o],10);const l=o==="BYTERANGE-LENGTH"?"length":"offset";s.attributes.byterange=s.attributes.byterange||{},s.attributes.byterange[l]=s.attributes[o],delete s.attributes[o]}}),this.trigger("data",s);return}if(n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"rendition-report"},s.attributes=ni(n[1]),["LAST-MSN","LAST-PART"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseInt(s.attributes[o],10))}),this.trigger("data",s);return}if(n=/^#EXT-X-DATERANGE:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"daterange"},s.attributes=ni(n[1]),["ID","CLASS"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=String(s.attributes[l]))}),["START-DATE","END-DATE"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=new Date(s.attributes[l]))}),["DURATION","PLANNED-DURATION"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=parseFloat(s.attributes[l]))}),["END-ON-NEXT"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=/YES/i.test(s.attributes[l]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=s.attributes[l].toString(16))});const o=/^X-([A-Z]+-)+[A-Z]+$/;for(const l in s.attributes){if(!o.test(l))continue;const c=/[0-9A-Fa-f]{6}/g.test(s.attributes[l]),u=/^\d+(\.\d+)?$/.test(s.attributes[l]);s.attributes[l]=c?s.attributes[l].toString(16):u?parseFloat(s.attributes[l]):String(s.attributes[l])}this.trigger("data",s);return}if(n=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(a),n){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(n=/^#EXT-X-I-FRAMES-ONLY/.exec(a),n){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(n=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(a),n){s={type:"tag",tagType:"content-steering"},s.attributes=ni(n[1]),this.trigger("data",s);return}if(n=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(a),n){s={type:"tag",tagType:"i-frame-playlist"},s.attributes=ni(n[1]),s.attributes.URI&&(s.uri=s.attributes.URI),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=Q6(s.attributes.RESOLUTION)),s.attributes["AVERAGE-BANDWIDTH"]&&(s.attributes["AVERAGE-BANDWIDTH"]=parseInt(s.attributes["AVERAGE-BANDWIDTH"],10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),this.trigger("data",s);return}if(n=/^#EXT-X-DEFINE:(.*)$/.exec(a),n){s={type:"tag",tagType:"define"},s.attributes=ni(n[1]),this.trigger("data",s);return}this.trigger("data",{type:"tag",data:a.slice(4)})})}addParser({expression:e,customType:n,dataParser:s,segment:i}){typeof s!="function"&&(s=a=>a),this.customParsers.push(a=>{if(e.exec(a))return this.trigger("data",{type:"custom",data:s(a),customType:n,segment:i}),!0})}addTagMapper({expression:e,map:n}){const s=i=>e.test(i)?n(i):i;this.tagMappers.push(s)}}const yye=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),tu=function(t){const e={};return Object.keys(t).forEach(function(n){e[yye(n)]=t[n]}),e},lj=function(t){const{serverControl:e,targetDuration:n,partTargetDuration:s}=t;if(!e)return;const i="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",l=n&&n*3,c=s&&s*2;n&&!e.hasOwnProperty(a)&&(e[a]=l,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${l}).`})),l&&e[a]<l&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[a]}) to targetDuration * 3 (${l})`}),e[a]=l),s&&!e.hasOwnProperty(o)&&(e[o]=s*3,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),s&&e[o]<c&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${c}).`}),e[o]=c)};class xye extends A4{constructor(e={}){super(),this.lineStream=new pye,this.parseStream=new vye,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const n=this,s=[];let i={},a,o,l=!1;const c=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let h=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let f=0,p=0;const g={};this.on("end",()=>{i.uri||!i.parts&&!i.preloadHints||(!i.map&&a&&(i.map=a),!i.key&&o&&(i.key=o),!i.timeline&&typeof h=="number"&&(i.timeline=h),this.manifest.preloadSegment=i)}),this.parseStream.on("data",function(m){let _,y;if(n.manifest.definitions){for(const x in n.manifest.definitions)if(m.uri&&(m.uri=m.uri.replace(`{$${x}}`,n.manifest.definitions[x])),m.attributes)for(const b in m.attributes)typeof m.attributes[b]=="string"&&(m.attributes[b]=m.attributes[b].replace(`{$${x}}`,n.manifest.definitions[x]))}({tag(){({version(){m.version&&(this.manifest.version=m.version)},"allow-cache"(){this.manifest.allowCache=m.allowed,"allowed"in m||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const x={};"length"in m&&(i.byterange=x,x.length=m.length,"offset"in m||(m.offset=f)),"offset"in m&&(i.byterange=x,x.offset=m.offset),f=x.offset+x.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),m.title&&(i.title=m.title),m.duration>0&&(i.duration=m.duration),m.duration===0&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key(){if(!m.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(m.attributes.METHOD==="NONE"){o=null;return}if(!m.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(m.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:m.attributes};return}if(m.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:m.attributes.URI};return}if(m.attributes.KEYFORMAT===d){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(m.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(m.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),m.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(m.attributes.KEYID&&m.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:m.attributes.KEYFORMAT,keyId:m.attributes.KEYID.substring(2)},pssh:fye(m.attributes.URI.split(",")[1])};return}m.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:m.attributes.METHOD||"AES-128",uri:m.attributes.URI},typeof m.attributes.IV<"u"&&(o.iv=m.attributes.IV)},"media-sequence"(){if(!isFinite(m.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+m.number});return}this.manifest.mediaSequence=m.number},"discontinuity-sequence"(){if(!isFinite(m.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+m.number});return}this.manifest.discontinuitySequence=m.number,h=m.number},"playlist-type"(){if(!/VOD|EVENT/.test(m.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+m.playlist});return}this.manifest.playlistType=m.playlistType},map(){a={},m.uri&&(a.uri=m.uri),m.byterange&&(a.byterange=m.byterange),o&&(a.key=o)},"stream-inf"(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!m.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}i.attributes||(i.attributes={}),ds(i.attributes,m.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(m.attributes&&m.attributes.TYPE&&m.attributes["GROUP-ID"]&&m.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const x=this.manifest.mediaGroups[m.attributes.TYPE];x[m.attributes["GROUP-ID"]]=x[m.attributes["GROUP-ID"]]||{},_=x[m.attributes["GROUP-ID"]],y={default:/yes/i.test(m.attributes.DEFAULT)},y.default?y.autoselect=!0:y.autoselect=/yes/i.test(m.attributes.AUTOSELECT),m.attributes.LANGUAGE&&(y.language=m.attributes.LANGUAGE),m.attributes.URI&&(y.uri=m.attributes.URI),m.attributes["INSTREAM-ID"]&&(y.instreamId=m.attributes["INSTREAM-ID"]),m.attributes.CHARACTERISTICS&&(y.characteristics=m.attributes.CHARACTERISTICS),m.attributes.FORCED&&(y.forced=/yes/i.test(m.attributes.FORCED)),_[m.attributes.NAME]=y},discontinuity(){h+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=m.dateTimeString,this.manifest.dateTimeObject=m.dateTimeObject),i.dateTimeString=m.dateTimeString,i.dateTimeObject=m.dateTimeObject;const{lastProgramDateTime:x}=this;this.lastProgramDateTime=new Date(m.dateTimeString).getTime(),x===null&&this.manifest.segments.reduceRight((b,w)=>(w.programDateTime=b-w.duration*1e3,w.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(m.duration)||m.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+m.duration});return}this.manifest.targetDuration=m.duration,lj.call(this,this.manifest)},start(){if(!m.attributes||isNaN(m.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:m.attributes["TIME-OFFSET"],precise:m.attributes.PRECISE}},"cue-out"(){i.cueOut=m.data},"cue-out-cont"(){i.cueOutCont=m.data},"cue-in"(){i.cueIn=m.data},skip(){this.manifest.skip=tu(m.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",m.attributes,["SKIPPED-SEGMENTS"])},part(){l=!0;const x=this.manifest.segments.length,b=tu(m.attributes);i.parts=i.parts||[],i.parts.push(b),b.byterange&&(b.byterange.hasOwnProperty("offset")||(b.byterange.offset=p),p=b.byterange.offset+b.byterange.length);const w=i.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${w} for segment #${x}`,m.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((C,j)=>{C.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${j} lacks required attribute(s): LAST-PART`})})},"server-control"(){const x=this.manifest.serverControl=tu(m.attributes);x.hasOwnProperty("canBlockReload")||(x.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),lj.call(this,this.manifest),x.canSkipDateranges&&!x.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const x=this.manifest.segments.length,b=tu(m.attributes),w=b.type&&b.type==="PART";i.preloadHints=i.preloadHints||[],i.preloadHints.push(b),b.byterange&&(b.byterange.hasOwnProperty("offset")||(b.byterange.offset=w?p:0,w&&(p=b.byterange.offset+b.byterange.length)));const C=i.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${C} for segment #${x}`,m.attributes,["TYPE","URI"]),!!b.type)for(let j=0;j<i.preloadHints.length-1;j++){const E=i.preloadHints[j];E.type&&E.type===b.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${C} for segment #${x} has the same TYPE ${b.type} as preload hint #${j}`})}},"rendition-report"(){const x=tu(m.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(x);const b=this.manifest.renditionReports.length-1,w=["LAST-MSN","URI"];l&&w.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${b}`,m.attributes,w)},"part-inf"(){this.manifest.partInf=tu(m.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",m.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),lj.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(tu(m.attributes));const x=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${x}`,m.attributes,["ID","START-DATE"]);const b=this.manifest.dateRanges[x];b.endDate&&b.startDate&&new Date(b.endDate)<new Date(b.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),b.duration&&b.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),b.plannedDuration&&b.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const w=!!b.endOnNext;if(w&&!b.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),w&&(b.duration||b.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),b.duration&&b.endDate){const j=b.startDate.getTime()+b.duration*1e3;this.manifest.dateRanges[x].endDate=new Date(j)}if(!g[b.id])g[b.id]=b;else{for(const j in g[b.id])if(b[j]&&JSON.stringify(g[b.id][j])!==JSON.stringify(b[j])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const C=this.manifest.dateRanges.findIndex(j=>j.id===b.id);this.manifest.dateRanges[C]=ds(this.manifest.dateRanges[C],b),g[b.id]=ds(g[b.id],b),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=tu(m.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",m.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const x=(b,w)=>{if(b in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${b}`});return}this.manifest.definitions[b]=w};if("QUERYPARAM"in m.attributes){if("NAME"in m.attributes||"IMPORT"in m.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const b=this.params.get(m.attributes.QUERYPARAM);if(!b){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${m.attributes.QUERYPARAM}`});return}x(m.attributes.QUERYPARAM,decodeURIComponent(b));return}if("NAME"in m.attributes){if("IMPORT"in m.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in m.attributes)||typeof m.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${m.attributes.NAME}`});return}x(m.attributes.NAME,m.attributes.VALUE);return}if("IMPORT"in m.attributes){if(!this.mainDefinitions[m.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${m.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}x(m.attributes.IMPORT,this.mainDefinitions[m.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:m.attributes,uri:m.uri,timeline:h}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",m.attributes,["BANDWIDTH","URI"])}}[m.tagType]||c).call(n)},uri(){i.uri=m.uri,s.push(i),this.manifest.targetDuration&&!("duration"in i)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration),o&&(i.key=o),i.timeline=h,a&&(i.map=a),p=0,this.lastProgramDateTime!==null&&(i.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=i.duration*1e3),i={}},comment(){},custom(){m.segment?(i.custom=i.custom||{},i.custom[m.customType]=m.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[m.customType]=m.data)}})[m.type].call(n)})}requiredCompatibilityversion(e,n){(e<n||!e)&&this.trigger("warn",{message:`manifest must be at least version ${n}`})}warnOnMissingAttributes_(e,n,s){const i=[];s.forEach(function(a){n.hasOwnProperty(a)||i.push(a)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var fh={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},bye=["video","audio","text"],Z6=["Video","Audio","Text"],rU=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(n,s,i){var a=("00"+Number(s).toString(16)).slice(-2),o=("00"+Number(i).toString(16)).slice(-2);return"avc1."+a+"00"+o})},tl=function(e){e===void 0&&(e="");var n=e.split(","),s=[];return n.forEach(function(i){i=i.trim();var a;bye.forEach(function(o){var l=fh[o].exec(i.toLowerCase());if(!(!l||l.length<=1)){a=o;var c=i.substring(0,l[1].length),u=i.replace(c,"");s.push({type:c,details:u,mediaType:o})}}),a||s.push({type:i,details:"",mediaType:"unknown"})}),s},_ye=function(e,n){if(!e.mediaGroups.AUDIO||!n)return null;var s=e.mediaGroups.AUDIO[n];if(!s)return null;for(var i in s){var a=s[i];if(a.default&&a.playlists)return tl(a.playlists[0].attributes.CODECS)}return null},iU=function(e){return e===void 0&&(e=""),fh.audio.test(e.trim().toLowerCase())},wye=function(e){return e===void 0&&(e=""),fh.text.test(e.trim().toLowerCase())},Cv=function(e){if(!(!e||typeof e!="string")){var n=e.toLowerCase().split(",").map(function(a){return rU(a.trim())}),s="video";n.length===1&&iU(n[0])?s="audio":n.length===1&&wye(n[0])&&(s="application");var i="mp4";return n.every(function(a){return fh.mp4.test(a)})?i="mp4":n.every(function(a){return fh.webm.test(a)})?i="webm":n.every(function(a){return fh.ogg.test(a)})&&(i="ogg"),s+"/"+i+';codecs="'+e+'"'}},X1=function(e){return e===void 0&&(e=""),de.MediaSource&&de.MediaSource.isTypeSupported&&de.MediaSource.isTypeSupported(Cv(e))||!1},cj=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(n){n=n.trim();for(var s=0;s<Z6.length;s++){var i=Z6[s];if(fh["muxer"+i].test(n))return!0}return!1})},J6="mp4a.40.2",Cye="avc1.4d400d",Sye=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,jye=/^application\/dash\+xml/i,aU=function(e){return Sye.test(e)?"hls":jye.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},Tye=function(e){return e.toString(2).length},Eye=function(e){return Math.ceil(Tye(e)/8)},oU=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Nye=function(e){return oU(e)},Ct=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!Nye(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Nr=de.BigInt||Number,tN=[Nr("0x1"),Nr("0x100"),Nr("0x10000"),Nr("0x1000000"),Nr("0x100000000"),Nr("0x10000000000"),Nr("0x1000000000000"),Nr("0x100000000000000"),Nr("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var kye=function(e,n){var s=n===void 0?{}:n,i=s.signed,a=i===void 0?!1:i,o=s.le,l=o===void 0?!1:o;e=Ct(e);var c=l?"reduce":"reduceRight",u=e[c]?e[c]:Array.prototype[c],d=u.call(e,function(f,p,g){var m=l?g:Math.abs(g+1-e.length);return f+Nr(p)*tN[m]},Nr(0));if(a){var h=tN[e.length]/Nr(2)-Nr(1);d=Nr(d),d>h&&(d-=h,d-=h,d-=Nr(2))}return Number(d)},Aye=function(e,n){var s={},i=s.le,a=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Nr(e);for(var o=Eye(e),l=new Uint8Array(new ArrayBuffer(o)),c=0;c<o;c++){var u=a?c:Math.abs(c+1-l.length);l[u]=Number(e/tN[c]&Nr(255)),e<0&&(l[u]=Math.abs(~l[u]),l[u]-=c===0?1:2)}return l},lU=function(e,n){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;n||(e=unescape(encodeURIComponent(e)));for(var s=new Uint8Array(e.length),i=0;i<e.length;i++)s[i]=e.charCodeAt(i);return s},Dye=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];if(n=n.filter(function(l){return l&&(l.byteLength||l.length)&&typeof l!="string"}),n.length<=1)return Ct(n[0]);var i=n.reduce(function(l,c,u){return l+(c.byteLength||c.length)},0),a=new Uint8Array(i),o=0;return n.forEach(function(l){l=Ct(l),a.set(l,o),o+=l.byteLength}),a},Kn=function(e,n,s){var i=s===void 0?{}:s,a=i.offset,o=a===void 0?0:a,l=i.mask,c=l===void 0?[]:l;e=Ct(e),n=Ct(n);var u=n.every?n.every:Array.prototype.every;return n.length&&e.length-o>=n.length&&u.call(n,function(d,h){var f=c[h]?c[h]&e[o+h]:e[o+h];return d===f})},Pye=function(e,n,s){n.forEach(function(i){for(var a in e.mediaGroups[i])for(var o in e.mediaGroups[i][a]){var l=e.mediaGroups[i][a][o];s(l,i,a,o)}})},Iye=function(e){return de.atob?de.atob(e):vl.from(e,"base64").toString("binary")};function Mye(t){for(var e=Iye(t),n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}var gd={},Vc={};function Oye(t,e,n){if(n===void 0&&(n=Array.prototype),t&&typeof n.find=="function")return n.find.call(t,e);for(var s=0;s<t.length;s++)if(Object.prototype.hasOwnProperty.call(t,s)){var i=t[s];if(e.call(void 0,i,s,t))return i}}function D4(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}function Rye(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}var cU=D4({HTML:"text/html",isHTML:function(t){return t===cU.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),uU=D4({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===uU.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Vc.assign=Rye;Vc.find=Oye;Vc.freeze=D4;Vc.MIME_TYPE=cU;Vc.NAMESPACE=uU;var dU=Vc,xl=dU.find,Sv=dU.NAMESPACE;function Lye(t){return t!==""}function Bye(t){return t?t.split(/[\t\n\f\r ]+/).filter(Lye):[]}function Fye(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function eM(t){if(!t)return[];var e=Bye(t);return Object.keys(e.reduce(Fye,{}))}function $ye(t){return function(e){return t&&t.indexOf(e)!==-1}}function Sy(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function ra(t,e){var n=t.prototype;if(!(n instanceof e)){let i=function(){};var s=i;i.prototype=e.prototype,i=new i,Sy(n,i),t.prototype=n=i}n.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),n.constructor=t)}var ia={},Io=ia.ELEMENT_NODE=1,qp=ia.ATTRIBUTE_NODE=2,p_=ia.TEXT_NODE=3,hU=ia.CDATA_SECTION_NODE=4,fU=ia.ENTITY_REFERENCE_NODE=5,Uye=ia.ENTITY_NODE=6,pU=ia.PROCESSING_INSTRUCTION_NODE=7,mU=ia.COMMENT_NODE=8,gU=ia.DOCUMENT_NODE=9,vU=ia.DOCUMENT_TYPE_NODE=10,Pc=ia.DOCUMENT_FRAGMENT_NODE=11,Vye=ia.NOTATION_NODE=12,Kr={},br={};Kr.INDEX_SIZE_ERR=(br[1]="Index size error",1);Kr.DOMSTRING_SIZE_ERR=(br[2]="DOMString size error",2);var Li=Kr.HIERARCHY_REQUEST_ERR=(br[3]="Hierarchy request error",3);Kr.WRONG_DOCUMENT_ERR=(br[4]="Wrong document",4);Kr.INVALID_CHARACTER_ERR=(br[5]="Invalid character",5);Kr.NO_DATA_ALLOWED_ERR=(br[6]="No data allowed",6);Kr.NO_MODIFICATION_ALLOWED_ERR=(br[7]="No modification allowed",7);var yU=Kr.NOT_FOUND_ERR=(br[8]="Not found",8);Kr.NOT_SUPPORTED_ERR=(br[9]="Not supported",9);var tM=Kr.INUSE_ATTRIBUTE_ERR=(br[10]="Attribute in use",10);Kr.INVALID_STATE_ERR=(br[11]="Invalid state",11);Kr.SYNTAX_ERR=(br[12]="Syntax error",12);Kr.INVALID_MODIFICATION_ERR=(br[13]="Invalid modification",13);Kr.NAMESPACE_ERR=(br[14]="Invalid namespace",14);Kr.INVALID_ACCESS_ERR=(br[15]="Invalid access",15);function Ls(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,br[t]),this.message=br[t],Error.captureStackTrace&&Error.captureStackTrace(this,Ls);return n.code=t,e&&(this.message=this.message+": "+e),n}Ls.prototype=Error.prototype;Sy(Kr,Ls);function xc(){}xc.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var n=[],s=0;s<this.length;s++)Zf(this[s],n,t,e);return n.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Wp(t,e){this._node=t,this._refresh=e,P4(this)}function P4(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var n=t._refresh(t._node);if(AU(t,"length",n.length),!t.$$length||n.length<t.$$length)for(var s=n.length;s in t;s++)Object.prototype.hasOwnProperty.call(t,s)&&delete t[s];Sy(n,t),t._inc=e}}Wp.prototype.item=function(t){return P4(this),this[t]||null};ra(Wp,xc);function m_(){}function xU(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function nM(t,e,n,s){if(s?e[xU(e,s)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(s&&wU(i,t,s),zye(i,t,n))}}function sM(t,e,n){var s=xU(e,n);if(s>=0){for(var i=e.length-1;s<i;)e[s]=e[++s];if(e.length=i,t){var a=t.ownerDocument;a&&(wU(a,t,n),n.ownerElement=null)}}else throw new Ls(yU,new Error(t.tagName+"@"+n))}m_.prototype={length:0,item:xc.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Ls(tM);var n=this.getNamedItem(t.nodeName);return nM(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e=t.ownerElement,n;if(e&&e!=this._ownerElement)throw new Ls(tM);return n=this.getNamedItemNS(t.namespaceURI,t.localName),nM(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var e=this.getNamedItem(t);return sM(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return sM(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var s=this[n];if(s.localName==e&&s.namespaceURI==t)return s}return null}};function bU(){}bU.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,n){var s=new jy;if(s.implementation=this,s.childNodes=new xc,s.doctype=n||null,n&&s.appendChild(n),e){var i=s.createElementNS(t,e);s.appendChild(i)}return s},createDocumentType:function(t,e,n){var s=new Tw;return s.name=t,s.nodeName=t,s.publicId=e||"",s.systemId=n||"",s}};function Dn(){}Dn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return g_(this,t,e)},replaceChild:function(t,e){g_(this,t,e,SU),e&&this.removeChild(e)},removeChild:function(t){return CU(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return nN(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==p_&&t.nodeType==p_?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n){for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&n[s]===t)return s}e=e.nodeType==qp?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,t))return n[t];e=e.nodeType==qp?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function _U(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Sy(ia,Dn);Sy(ia,Dn.prototype);function jv(t,e){if(e(t))return!0;if(t=t.firstChild)do if(jv(t,e))return!0;while(t=t.nextSibling)}function jy(){this.ownerDocument=this}function zye(t,e,n){t&&t._inc++;var s=n.namespaceURI;s===Sv.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value)}function wU(t,e,n,s){t&&t._inc++;var i=n.namespaceURI;i===Sv.XMLNS&&delete e._nsMap[n.prefix?n.localName:""]}function I4(t,e,n){if(t&&t._inc){t._inc++;var s=e.childNodes;if(n)s[s.length++]=n;else{for(var i=e.firstChild,a=0;i;)s[a++]=i,i=i.nextSibling;s.length=a,delete s[s.length]}}}function CU(t,e){var n=e.previousSibling,s=e.nextSibling;return n?n.nextSibling=s:t.firstChild=s,s?s.previousSibling=n:t.lastChild=n,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,I4(t.ownerDocument,t),e}function Hye(t){return t&&(t.nodeType===Dn.DOCUMENT_NODE||t.nodeType===Dn.DOCUMENT_FRAGMENT_NODE||t.nodeType===Dn.ELEMENT_NODE)}function qye(t){return t&&(bl(t)||M4(t)||Ic(t)||t.nodeType===Dn.DOCUMENT_FRAGMENT_NODE||t.nodeType===Dn.COMMENT_NODE||t.nodeType===Dn.PROCESSING_INSTRUCTION_NODE)}function Ic(t){return t&&t.nodeType===Dn.DOCUMENT_TYPE_NODE}function bl(t){return t&&t.nodeType===Dn.ELEMENT_NODE}function M4(t){return t&&t.nodeType===Dn.TEXT_NODE}function rM(t,e){var n=t.childNodes||[];if(xl(n,bl)||Ic(e))return!1;var s=xl(n,Ic);return!(e&&s&&n.indexOf(s)>n.indexOf(e))}function iM(t,e){var n=t.childNodes||[];function s(a){return bl(a)&&a!==e}if(xl(n,s))return!1;var i=xl(n,Ic);return!(e&&i&&n.indexOf(i)>n.indexOf(e))}function Wye(t,e,n){if(!Hye(t))throw new Ls(Li,"Unexpected parent node type "+t.nodeType);if(n&&n.parentNode!==t)throw new Ls(yU,"child not in parent");if(!qye(e)||Ic(e)&&t.nodeType!==Dn.DOCUMENT_NODE)throw new Ls(Li,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function Gye(t,e,n){var s=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===Dn.DOCUMENT_FRAGMENT_NODE){var a=i.filter(bl);if(a.length>1||xl(i,M4))throw new Ls(Li,"More than one element or text in fragment");if(a.length===1&&!rM(t,n))throw new Ls(Li,"Element in fragment can not be inserted before doctype")}if(bl(e)&&!rM(t,n))throw new Ls(Li,"Only one element can be added and only after doctype");if(Ic(e)){if(xl(s,Ic))throw new Ls(Li,"Only one doctype is allowed");var o=xl(s,bl);if(n&&s.indexOf(o)<s.indexOf(n))throw new Ls(Li,"Doctype can only be inserted before an element");if(!n&&o)throw new Ls(Li,"Doctype can not be appended since element is present")}}function SU(t,e,n){var s=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===Dn.DOCUMENT_FRAGMENT_NODE){var a=i.filter(bl);if(a.length>1||xl(i,M4))throw new Ls(Li,"More than one element or text in fragment");if(a.length===1&&!iM(t,n))throw new Ls(Li,"Element in fragment can not be inserted before doctype")}if(bl(e)&&!iM(t,n))throw new Ls(Li,"Only one element can be added and only after doctype");if(Ic(e)){let c=function(u){return Ic(u)&&u!==n};var l=c;if(xl(s,c))throw new Ls(Li,"Only one doctype is allowed");var o=xl(s,bl);if(n&&s.indexOf(o)<s.indexOf(n))throw new Ls(Li,"Doctype can only be inserted before an element")}}function g_(t,e,n,s){Wye(t,e,n),t.nodeType===Dn.DOCUMENT_NODE&&(s||Gye)(t,e,n);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===Pc){var a=e.firstChild;if(a==null)return e;var o=e.lastChild}else a=o=e;var l=n?n.previousSibling:t.lastChild;a.previousSibling=l,o.nextSibling=n,l?l.nextSibling=a:t.firstChild=a,n==null?t.lastChild=o:n.previousSibling=o;do a.parentNode=t;while(a!==o&&(a=a.nextSibling));return I4(t.ownerDocument||t,t),e.nodeType==Pc&&(e.firstChild=e.lastChild=null),e}function Yye(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,I4(t.ownerDocument,t,e),e}jy.prototype={nodeName:"#document",nodeType:gU,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Pc){for(var n=t.firstChild;n;){var s=n.nextSibling;this.insertBefore(n,e),n=s}return t}return g_(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Io&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),CU(this,t)},replaceChild:function(t,e){g_(this,t,e,SU),t.ownerDocument=this,e&&this.removeChild(e),bl(t)&&(this.documentElement=t)},importNode:function(t,e){return kU(this,t,e)},getElementById:function(t){var e=null;return jv(this.documentElement,function(n){if(n.nodeType==Io&&n.getAttribute("id")==t)return e=n,!0}),e},getElementsByClassName:function(t){var e=eM(t);return new Wp(this,function(n){var s=[];return e.length>0&&jv(n.documentElement,function(i){if(i!==n&&i.nodeType===Io){var a=i.getAttribute("class");if(a){var o=t===a;if(!o){var l=eM(a);o=e.every($ye(l))}o&&s.push(i)}}}),s})},createElement:function(t){var e=new Ih;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new xc;var n=e.attributes=new m_;return n._ownerElement=e,e},createDocumentFragment:function(){var t=new Ew;return t.ownerDocument=this,t.childNodes=new xc,t},createTextNode:function(t){var e=new O4;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new R4;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new L4;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new F4;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new v_;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new B4;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new Ih,s=e.split(":"),i=n.attributes=new m_;return n.childNodes=new xc,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,s.length==2?(n.prefix=s[0],n.localName=s[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new v_,s=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,s.length==2?(n.prefix=s[0],n.localName=s[1]):n.localName=e,n}};ra(jy,Dn);function Ih(){this._nsMap={}}Ih.prototype={nodeType:Io,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Pc?this.insertBefore(t,null):Yye(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var s=this.ownerDocument.createAttributeNS(t,e);s.value=s.nodeValue=""+n,this.setAttributeNode(s)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Wp(this,function(e){var n=[];return jv(e,function(s){s!==e&&s.nodeType==Io&&(t==="*"||s.tagName==t)&&n.push(s)}),n})},getElementsByTagNameNS:function(t,e){return new Wp(this,function(n){var s=[];return jv(n,function(i){i!==n&&i.nodeType===Io&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&s.push(i)}),s})}};jy.prototype.getElementsByTagName=Ih.prototype.getElementsByTagName;jy.prototype.getElementsByTagNameNS=Ih.prototype.getElementsByTagNameNS;ra(Ih,Dn);function v_(){}v_.prototype.nodeType=qp;ra(v_,Dn);function Ty(){}Ty.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(br[Li])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){var s=this.data.substring(0,t),i=this.data.substring(t+e);n=s+n+i,this.nodeValue=this.data=n,this.length=n.length}};ra(Ty,Dn);function O4(){}O4.prototype={nodeName:"#text",nodeType:p_,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var s=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling),s}};ra(O4,Ty);function R4(){}R4.prototype={nodeName:"#comment",nodeType:mU};ra(R4,Ty);function L4(){}L4.prototype={nodeName:"#cdata-section",nodeType:hU};ra(L4,Ty);function Tw(){}Tw.prototype.nodeType=vU;ra(Tw,Dn);function jU(){}jU.prototype.nodeType=Vye;ra(jU,Dn);function TU(){}TU.prototype.nodeType=Uye;ra(TU,Dn);function B4(){}B4.prototype.nodeType=fU;ra(B4,Dn);function Ew(){}Ew.prototype.nodeName="#document-fragment";Ew.prototype.nodeType=Pc;ra(Ew,Dn);function F4(){}F4.prototype.nodeType=pU;ra(F4,Dn);function EU(){}EU.prototype.serializeToString=function(t,e,n){return NU.call(t,e,n)};Dn.prototype.toString=NU;function NU(t,e){var n=[],s=this.nodeType==9&&this.documentElement||this,i=s.prefix,a=s.namespaceURI;if(a&&i==null){var i=s.lookupPrefix(a);if(i==null)var o=[{namespace:a,prefix:null}]}return Zf(this,n,t,e,o),n.join("")}function aM(t,e,n){var s=t.prefix||"",i=t.namespaceURI;if(!i||s==="xml"&&i===Sv.XML||i===Sv.XMLNS)return!1;for(var a=n.length;a--;){var o=n[a];if(o.prefix===s)return o.namespace!==i}return!0}function uj(t,e,n){t.push(" ",e,'="',n.replace(/[<>&"\t\n\r]/g,_U),'"')}function Zf(t,e,n,s,i){if(i||(i=[]),s)if(t=s(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Io:var a=t.attributes,o=a.length,y=t.firstChild,l=t.tagName;n=Sv.isHTML(t.namespaceURI)||n;var c=l;if(!n&&!t.prefix&&t.namespaceURI){for(var u,d=0;d<a.length;d++)if(a.item(d).name==="xmlns"){u=a.item(d).value;break}if(!u)for(var h=i.length-1;h>=0;h--){var f=i[h];if(f.prefix===""&&f.namespace===t.namespaceURI){u=f.namespace;break}}if(u!==t.namespaceURI)for(var h=i.length-1;h>=0;h--){var f=i[h];if(f.namespace===t.namespaceURI){f.prefix&&(c=f.prefix+":"+l);break}}}e.push("<",c);for(var p=0;p<o;p++){var g=a.item(p);g.prefix=="xmlns"?i.push({prefix:g.localName,namespace:g.value}):g.nodeName=="xmlns"&&i.push({prefix:"",namespace:g.value})}for(var p=0;p<o;p++){var g=a.item(p);if(aM(g,n,i)){var m=g.prefix||"",_=g.namespaceURI;uj(e,m?"xmlns:"+m:"xmlns",_),i.push({prefix:m,namespace:_})}Zf(g,e,n,s,i)}if(l===c&&aM(t,n,i)){var m=t.prefix||"",_=t.namespaceURI;uj(e,m?"xmlns:"+m:"xmlns",_),i.push({prefix:m,namespace:_})}if(y||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),n&&/^script$/i.test(l))for(;y;)y.data?e.push(y.data):Zf(y,e,n,s,i.slice()),y=y.nextSibling;else for(;y;)Zf(y,e,n,s,i.slice()),y=y.nextSibling;e.push("</",c,">")}else e.push("/>");return;case gU:case Pc:for(var y=t.firstChild;y;)Zf(y,e,n,s,i.slice()),y=y.nextSibling;return;case qp:return uj(e,t.name,t.value);case p_:return e.push(t.data.replace(/[<&>]/g,_U));case hU:return e.push("<![CDATA[",t.data,"]]>");case mU:return e.push("<!--",t.data,"-->");case vU:var x=t.publicId,b=t.systemId;if(e.push("<!DOCTYPE ",t.name),x)e.push(" PUBLIC ",x),b&&b!="."&&e.push(" ",b),e.push(">");else if(b&&b!=".")e.push(" SYSTEM ",b,">");else{var w=t.internalSubset;w&&e.push(" [",w,"]"),e.push(">")}return;case pU:return e.push("<?",t.target," ",t.data,"?>");case fU:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function kU(t,e,n){var s;switch(e.nodeType){case Io:s=e.cloneNode(!1),s.ownerDocument=t;case Pc:break;case qp:n=!0;break}if(s||(s=e.cloneNode(!1)),s.ownerDocument=t,s.parentNode=null,n)for(var i=e.firstChild;i;)s.appendChild(kU(t,i,n)),i=i.nextSibling;return s}function nN(t,e,n){var s=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];typeof a!="object"&&a!=s[i]&&(s[i]=a)}switch(e.childNodes&&(s.childNodes=new xc),s.ownerDocument=t,s.nodeType){case Io:var o=e.attributes,l=s.attributes=new m_,c=o.length;l._ownerElement=s;for(var u=0;u<c;u++)s.setAttributeNode(nN(t,o.item(u),!0));break;case qp:n=!0}if(n)for(var d=e.firstChild;d;)s.appendChild(nN(t,d,n)),d=d.nextSibling;return s}function AU(t,e,n){t[e]=n}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Io:case Pc:var n=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};var hLe=t;Object.defineProperty(Wp.prototype,"length",{get:function(){return P4(this),this.$$length}}),Object.defineProperty(Dn.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Io:case Pc:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),AU=function(e,n,s){e["$$"+n]=s}}}catch{}gd.DocumentType=Tw;gd.DOMException=Ls;gd.DOMImplementation=bU;gd.Element=Ih;gd.Node=Dn;gd.NodeList=xc;gd.XMLSerializer=EU;var Nw={},DU={};(function(t){var e=Vc.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES})(DU);var $4={},Tv=Vc.NAMESPACE,sN=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,oM=new RegExp("[\\-\\.0-9"+sN.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),lM=new RegExp("^"+sN.source+oM.source+"*(?::"+sN.source+oM.source+"*)?$"),Dg=0,nu=1,yf=2,Pg=3,xf=4,bf=5,Ig=6,$x=7;function Gp(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Gp)}Gp.prototype=new Error;Gp.prototype.name=Gp.name;function PU(){}PU.prototype={parse:function(t,e,n){var s=this.domBuilder;s.startDocument(),IU(e,e={}),Xye(t,e,n,s,this.errorHandler),s.endDocument()}};function Xye(t,e,n,s,i){function a(V){if(V>65535){V-=65536;var J=55296+(V>>10),Q=56320+(V&1023);return String.fromCharCode(J,Q)}else return String.fromCharCode(V)}function o(V){var J=V.slice(1,-1);return Object.hasOwnProperty.call(n,J)?n[J]:J.charAt(0)==="#"?a(parseInt(J.substr(1).replace("x","0x"))):(i.error("entity not found:"+V),V)}function l(V){if(V>m){var J=t.substring(m,V).replace(/&#?\w+;/g,o);f&&c(m),s.characters(J,0,V-m),m=V}}function c(V,J){for(;V>=d&&(J=h.exec(t));)u=J.index,d=u+J[0].length,f.lineNumber++;f.columnNumber=V-u+1}for(var u=0,d=0,h=/.*(?:\r\n?|\n)|.*$/g,f=s.locator,p=[{currentNSMap:e}],g={},m=0;;){try{var _=t.indexOf("<",m);if(_<0){if(!t.substr(m).match(/^\s*$/)){var y=s.doc,x=y.createTextNode(t.substr(m));y.appendChild(x),s.currentElement=x}return}switch(_>m&&l(_),t.charAt(_+1)){case"/":var I=t.indexOf(">",_+3),b=t.substring(_+2,I).replace(/[ \t\n\r]+$/g,""),w=p.pop();I<0?(b=t.substring(_+2).replace(/[\s<].*/,""),i.error("end tag name: "+b+" is not complete:"+w.tagName),I=_+1+b.length):b.match(/\s</)&&(b=b.replace(/[\s<].*/,""),i.error("end tag name: "+b+" maybe not complete"),I=_+1+b.length);var C=w.localNSMap,j=w.tagName==b,E=j||w.tagName&&w.tagName.toLowerCase()==b.toLowerCase();if(E){if(s.endElement(w.uri,w.localName,b),C)for(var T in C)Object.prototype.hasOwnProperty.call(C,T)&&s.endPrefixMapping(T);j||i.fatalError("end tag name: "+b+" is not match the current start tagName:"+w.tagName)}else p.push(w);I++;break;case"?":f&&c(_),I=exe(t,_,s);break;case"!":f&&c(_),I=Jye(t,_,s,i);break;default:f&&c(_);var N=new MU,P=p[p.length-1].currentNSMap,I=Kye(t,_,N,P,o,i),B=N.length;if(!N.closed&&Zye(t,I,N.tagName,g)&&(N.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),f&&B){for(var U=cM(f,{}),z=0;z<B;z++){var G=N[z];c(G.offset),G.locator=cM(f,{})}s.locator=U,uM(N,s,P)&&p.push(N),s.locator=f}else uM(N,s,P)&&p.push(N);Tv.isHTML(N.uri)&&!N.closed?I=Qye(t,I,N.tagName,o,s):I++}}catch(V){if(V instanceof Gp)throw V;i.error("element parse error: "+V),I=-1}I>m?m=I:l(Math.max(_,m)+1)}}function cM(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function Kye(t,e,n,s,i,a){function o(f,p,g){n.attributeNames.hasOwnProperty(f)&&a.fatalError("Attribute "+f+" redefined"),n.addValue(f,p.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),g)}for(var l,c,u=++e,d=Dg;;){var h=t.charAt(u);switch(h){case"=":if(d===nu)l=t.slice(e,u),d=Pg;else if(d===yf)d=Pg;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(d===Pg||d===nu)if(d===nu&&(a.warning('attribute value must after "="'),l=t.slice(e,u)),e=u+1,u=t.indexOf(h,e),u>0)c=t.slice(e,u),o(l,c,e-1),d=bf;else throw new Error("attribute value no end '"+h+"' match");else if(d==xf)c=t.slice(e,u),o(l,c,e),a.warning('attribute "'+l+'" missed start quot('+h+")!!"),e=u+1,d=bf;else throw new Error('attribute value must after "="');break;case"/":switch(d){case Dg:n.setTagName(t.slice(e,u));case bf:case Ig:case $x:d=$x,n.closed=!0;case xf:case nu:break;case yf:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),d==Dg&&n.setTagName(t.slice(e,u)),u;case">":switch(d){case Dg:n.setTagName(t.slice(e,u));case bf:case Ig:case $x:break;case xf:case nu:c=t.slice(e,u),c.slice(-1)==="/"&&(n.closed=!0,c=c.slice(0,-1));case yf:d===yf&&(c=l),d==xf?(a.warning('attribute "'+c+'" missed quot(")!'),o(l,c,e)):((!Tv.isHTML(s[""])||!c.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),o(c,c,e));break;case Pg:throw new Error("attribute value missed!!")}return u;case"":h=" ";default:if(h<=" ")switch(d){case Dg:n.setTagName(t.slice(e,u)),d=Ig;break;case nu:l=t.slice(e,u),d=yf;break;case xf:var c=t.slice(e,u);a.warning('attribute "'+c+'" missed quot(")!!'),o(l,c,e);case bf:d=Ig;break}else switch(d){case yf:n.tagName,(!Tv.isHTML(s[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),o(l,l,e),e=u,d=nu;break;case bf:a.warning('attribute space is required"'+l+'"!!');case Ig:d=nu,e=u;break;case Pg:d=xf,e=u;break;case $x:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function uM(t,e,n){for(var s=t.tagName,i=null,h=t.length;h--;){var a=t[h],o=a.qName,l=a.value,f=o.indexOf(":");if(f>0)var c=a.prefix=o.slice(0,f),u=o.slice(f+1),d=c==="xmlns"&&u;else u=o,c=null,d=o==="xmlns"&&"";a.localName=u,d!==!1&&(i==null&&(i={},IU(n,n={})),n[d]=i[d]=l,a.uri=Tv.XMLNS,e.startPrefixMapping(d,l))}for(var h=t.length;h--;){a=t[h];var c=a.prefix;c&&(c==="xml"&&(a.uri=Tv.XML),c!=="xmlns"&&(a.uri=n[c||""]))}var f=s.indexOf(":");f>0?(c=t.prefix=s.slice(0,f),u=t.localName=s.slice(f+1)):(c=null,u=t.localName=s);var p=t.uri=n[c||""];if(e.startElement(p,u,s,t),t.closed){if(e.endElement(p,u,s),i)for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&e.endPrefixMapping(c)}else return t.currentNSMap=n,t.localNSMap=i,!0}function Qye(t,e,n,s,i){if(/^(?:script|textarea)$/i.test(n)){var a=t.indexOf("</"+n+">",e),o=t.substring(e+1,a);if(/[&<]/.test(o))return/^script$/i.test(n)?(i.characters(o,0,o.length),a):(o=o.replace(/&#?\w+;/g,s),i.characters(o,0,o.length),a)}return e+1}function Zye(t,e,n,s){var i=s[n];return i==null&&(i=t.lastIndexOf("</"+n+">"),i<e&&(i=t.lastIndexOf("</"+n)),s[n]=i),i<e}function IU(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function Jye(t,e,n,s){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var a=t.indexOf("-->",e+4);return a>e?(n.comment(t,e+4,a-e-4),a+3):(s.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var a=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,a-e-9),n.endCDATA(),a+3}var o=txe(t,e),l=o.length;if(l>1&&/!doctype/i.test(o[0][0])){var c=o[1][0],u=!1,d=!1;l>3&&(/^public$/i.test(o[2][0])?(u=o[3][0],d=l>4&&o[4][0]):/^system$/i.test(o[2][0])&&(d=o[3][0]));var h=o[l-1];return n.startDTD(c,u,d),n.endDTD(),h.index+h[0].length}}return-1}function exe(t,e,n){var s=t.indexOf("?>",e);if(s){var i=t.substring(e,s).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),s+2):-1}return-1}function MU(){this.attributeNames={}}MU.prototype={setTagName:function(t){if(!lM.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!lM.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function txe(t,e){var n,s=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);n=i.exec(t);)if(s.push(n),n[1])return s}$4.XMLReader=PU;$4.ParseError=Gp;var nxe=Vc,sxe=gd,dM=DU,OU=$4,rxe=sxe.DOMImplementation,hM=nxe.NAMESPACE,ixe=OU.ParseError,axe=OU.XMLReader;function RU(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function LU(t){this.options=t||{locator:{}}}LU.prototype.parseFromString=function(t,e){var n=this.options,s=new axe,i=n.domBuilder||new Ey,a=n.errorHandler,o=n.locator,l=n.xmlns||{},c=/\/x?html?$/.test(e),u=c?dM.HTML_ENTITIES:dM.XML_ENTITIES;o&&i.setDocumentLocator(o),s.errorHandler=oxe(a,i,o),s.domBuilder=n.domBuilder||i,c&&(l[""]=hM.HTML),l.xml=l.xml||hM.XML;var d=n.normalizeLineEndings||RU;return t&&typeof t=="string"?s.parse(d(t),l,u):s.errorHandler.error("invalid doc source"),i.doc};function oxe(t,e,n){if(!t){if(e instanceof Ey)return e;t=e}var s={},i=t instanceof Function;n=n||{};function a(o){var l=t[o];!l&&i&&(l=t.length==2?function(c){t(o,c)}:t),s[o]=l&&function(c){l("[xmldom "+o+"]	"+c+rN(n))}||function(){}}return a("warning"),a("error"),a("fatalError"),s}function Ey(){this.cdata=!1}function _f(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}Ey.prototype={startDocument:function(){this.doc=new rxe().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,s){var i=this.doc,a=i.createElementNS(t,n||e),o=s.length;Ux(this,a),this.currentElement=a,this.locator&&_f(this.locator,a);for(var l=0;l<o;l++){var t=s.getURI(l),c=s.getValue(l),n=s.getQName(l),u=i.createAttributeNS(t,n);this.locator&&_f(s.getLocator(l),u),u.value=u.nodeValue=c,a.setAttributeNode(u)}},endElement:function(t,e,n){var s=this.currentElement;s.tagName,this.currentElement=s.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&_f(this.locator,n),Ux(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=fM.apply(this,arguments),t){if(this.cdata)var s=this.doc.createCDATASection(t);else var s=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(s):/^\s*$/.test(t)&&this.doc.appendChild(s),this.locator&&_f(this.locator,s)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=fM.apply(this,arguments);var s=this.doc.createComment(t);this.locator&&_f(this.locator,s),Ux(this,s)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var s=this.doc.implementation;if(s&&s.createDocumentType){var i=s.createDocumentType(t,e,n);this.locator&&_f(this.locator,i),Ux(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,rN(this.locator))},error:function(t){console.error("[xmldom error]	"+t,rN(this.locator))},fatalError:function(t){throw new ixe(t,this.locator)}};function rN(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function fM(t,e,n){return typeof t=="string"?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){Ey.prototype[t]=function(){return null}});function Ux(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}Nw.__DOMHandler=Ey;Nw.normalizeLineEndings=RU;Nw.DOMParser=LU;var lxe=Nw.DOMParser;/*! @name mpd-parser @version 1.3.0 @license Apache-2.0 */const pM=t=>!!t&&typeof t=="object",vr=(...t)=>t.reduce((e,n)=>(typeof n!="object"||Object.keys(n).forEach(s=>{Array.isArray(e[s])&&Array.isArray(n[s])?e[s]=e[s].concat(n[s]):pM(e[s])&&pM(n[s])?e[s]=vr(e[s],n[s]):e[s]=n[s]}),e),{}),BU=t=>Object.keys(t).map(e=>t[e]),cxe=(t,e)=>{const n=[];for(let s=t;s<e;s++)n.push(s);return n},Yp=t=>t.reduce((e,n)=>e.concat(n),[]),FU=t=>{if(!t.length)return[];const e=[];for(let n=0;n<t.length;n++)e.push(t[n]);return e},uxe=(t,e)=>t.reduce((n,s,i)=>(s[e]&&n.push(i),n),[]),dxe=(t,e)=>BU(t.reduce((n,s)=>(s.forEach(i=>{n[e(i)]=i}),n),{}));var Xp={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Ev=({baseUrl:t="",source:e="",range:n="",indexRange:s=""})=>{const i={uri:e,resolvedUri:jw(t||"",e)};if(n||s){const o=(n||s).split("-");let l=de.BigInt?de.BigInt(o[0]):parseInt(o[0],10),c=de.BigInt?de.BigInt(o[1]):parseInt(o[1],10);l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l)),c<Number.MAX_SAFE_INTEGER&&typeof c=="bigint"&&(c=Number(c));let u;typeof c=="bigint"||typeof l=="bigint"?u=de.BigInt(c)-de.BigInt(l)+de.BigInt(1):u=c-l+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),i.byterange={length:u,offset:l}}return i},hxe=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=de.BigInt(t.offset)+de.BigInt(t.length)-de.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},mM=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),fxe={static(t){const{duration:e,timescale:n=1,sourceDuration:s,periodDuration:i}=t,a=mM(t.endNumber),o=e/n;return typeof a=="number"?{start:0,end:a}:typeof i=="number"?{start:0,end:i/o}:{start:0,end:s/o}},dynamic(t){const{NOW:e,clientOffset:n,availabilityStartTime:s,timescale:i=1,duration:a,periodStart:o=0,minimumUpdatePeriod:l=0,timeShiftBufferDepth:c=1/0}=t,u=mM(t.endNumber),d=(e+n)/1e3,h=s+o,p=d+l-h,g=Math.ceil(p*i/a),m=Math.floor((d-h-c)*i/a),_=Math.floor((d-h)*i/a);return{start:Math.max(0,m),end:typeof u=="number"?u:Math.min(g,_)}}},pxe=t=>e=>{const{duration:n,timescale:s=1,periodStart:i,startNumber:a=1}=t;return{number:a+e,duration:n/s,timeline:i,time:e*n}},U4=t=>{const{type:e,duration:n,timescale:s=1,periodDuration:i,sourceDuration:a}=t,{start:o,end:l}=fxe[e](t),c=cxe(o,l).map(pxe(t));if(e==="static"){const u=c.length-1,d=typeof i=="number"?i:a;c[u].duration=d-n/s*u}return c},$U=t=>{const{baseUrl:e,initialization:n={},sourceDuration:s,indexRange:i="",periodStart:a,presentationTime:o,number:l=0,duration:c}=t;if(!e)throw new Error(Xp.NO_BASE_URL);const u=Ev({baseUrl:e,source:n.sourceURL,range:n.range}),d=Ev({baseUrl:e,source:e,indexRange:i});if(d.map=u,c){const h=U4(t);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else s&&(d.duration=s,d.timeline=a);return d.presentationTime=o||a,d.number=l,[d]},V4=(t,e,n)=>{const s=t.sidx.map?t.sidx.map:null,i=t.sidx.duration,a=t.timeline||0,o=t.sidx.byterange,l=o.offset+o.length,c=e.timescale,u=e.references.filter(_=>_.referenceType!==1),d=[],h=t.endList?"static":"dynamic",f=t.sidx.timeline;let p=f,g=t.mediaSequence||0,m;typeof e.firstOffset=="bigint"?m=de.BigInt(l)+e.firstOffset:m=l+e.firstOffset;for(let _=0;_<u.length;_++){const y=e.references[_],x=y.referencedSize,b=y.subsegmentDuration;let w;typeof m=="bigint"?w=m+de.BigInt(x)-de.BigInt(1):w=m+x-1;const C=`${m}-${w}`,E=$U({baseUrl:n,timescale:c,timeline:a,periodStart:f,presentationTime:p,number:g,duration:b,sourceDuration:i,indexRange:C,type:h})[0];s&&(E.map=s),d.push(E),typeof m=="bigint"?m+=de.BigInt(x):m+=x,p+=b/c,g++}return t.segments=d,t},mxe=["AUDIO","SUBTITLES"],gxe=1/60,UU=t=>dxe(t,({timeline:e})=>e).sort((e,n)=>e.timeline>n.timeline?1:-1),vxe=(t,e)=>{for(let n=0;n<t.length;n++)if(t[n].attributes.NAME===e)return t[n];return null},gM=t=>{let e=[];return Pye(t,mxe,(n,s,i,a)=>{e=e.concat(n.playlists||[])}),e},vM=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((n,s)=>{n.number=t.mediaSequence+s})},yxe=({oldPlaylists:t,newPlaylists:e,timelineStarts:n})=>{e.forEach(s=>{s.discontinuitySequence=n.findIndex(function({timeline:c}){return c===s.timeline});const i=vxe(t,s.attributes.NAME);if(!i||s.sidx)return;const a=s.segments[0],o=i.segments.findIndex(function(c){return Math.abs(c.presentationTime-a.presentationTime)<gxe});if(o===-1){vM({playlist:s,mediaSequence:i.mediaSequence+i.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),(!i.segments.length&&s.timeline>i.timeline||i.segments.length&&s.timeline>i.segments[i.segments.length-1].timeline)&&s.discontinuitySequence--;return}i.segments[o].discontinuity&&!a.discontinuity&&(a.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),vM({playlist:s,mediaSequence:i.segments[o].number})})},xxe=({oldManifest:t,newManifest:e})=>{const n=t.playlists.concat(gM(t)),s=e.playlists.concat(gM(e));return e.timelineStarts=UU([t.timelineStarts,e.timelineStarts]),yxe({oldPlaylists:n,newPlaylists:s,timelineStarts:e.timelineStarts}),e},kw=t=>t&&t.uri+"-"+hxe(t.byterange),dj=t=>{const e=t.reduce(function(s,i){return s[i.attributes.baseUrl]||(s[i.attributes.baseUrl]=[]),s[i.attributes.baseUrl].push(i),s},{});let n=[];return Object.values(e).forEach(s=>{const i=BU(s.reduce((a,o)=>{const l=o.attributes.id+(o.attributes.lang||"");return a[l]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),a[l].segments.push(...o.segments)),o.attributes.contentProtection&&(a[l].attributes.contentProtection=o.attributes.contentProtection)):(a[l]=o,a[l].attributes.timelineStarts=[]),a[l].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),a},{}));n=n.concat(i)}),n.map(s=>(s.discontinuityStarts=uxe(s.segments||[],"discontinuity"),s))},z4=(t,e)=>{const n=kw(t.sidx),s=n&&e[n]&&e[n].sidx;return s&&V4(t,s,t.sidx.resolvedUri),t},bxe=(t,e={})=>{if(!Object.keys(e).length)return t;for(const n in t)t[n]=z4(t[n],e);return t},_xe=({attributes:t,segments:e,sidx:n,mediaSequence:s,discontinuitySequence:i,discontinuityStarts:a},o)=>{const l={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:i,discontinuityStarts:a,timelineStarts:t.timelineStarts,mediaSequence:s,segments:e};return t.contentProtection&&(l.contentProtection=t.contentProtection),t.serviceLocation&&(l.attributes.serviceLocation=t.serviceLocation),n&&(l.sidx=n),o&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs"),l},wxe=({attributes:t,segments:e,mediaSequence:n,discontinuityStarts:s,discontinuitySequence:i})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const a={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(a.CODECS=t.codecs);const o={attributes:a,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:s,discontinuitySequence:i,mediaSequence:n,segments:e};return t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),o},Cxe=(t,e={},n=!1)=>{let s;const i=t.reduce((a,o)=>{const l=o.attributes.role&&o.attributes.role.value||"",c=o.attributes.lang||"";let u=o.attributes.label||"main";if(c&&!o.attributes.label){const h=l?` (${l})`:"";u=`${o.attributes.lang}${h}`}a[u]||(a[u]={language:c,autoselect:!0,default:l==="main",playlists:[],uri:""});const d=z4(_xe(o,n),e);return a[u].playlists.push(d),typeof s>"u"&&l==="main"&&(s=o,s.default=!0),a},{});if(!s){const a=Object.keys(i)[0];i[a].default=!0}return i},Sxe=(t,e={})=>t.reduce((n,s)=>{const i=s.attributes.label||s.attributes.lang||"text";return n[i]||(n[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),n[i].playlists.push(z4(wxe(s),e)),n},{}),jxe=t=>t.reduce((e,n)=>(n&&n.forEach(s=>{const{channel:i,language:a}=s;e[a]={autoselect:!1,default:!1,instreamId:i,language:a},s.hasOwnProperty("aspectRatio")&&(e[a].aspectRatio=s.aspectRatio),s.hasOwnProperty("easyReader")&&(e[a].easyReader=s.easyReader),s.hasOwnProperty("3D")&&(e[a]["3D"]=s["3D"])}),e),{}),Txe=({attributes:t,segments:e,sidx:n,discontinuityStarts:s})=>{const i={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:s,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(i.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(i.contentProtection=t.contentProtection),t.serviceLocation&&(i.attributes.serviceLocation=t.serviceLocation),n&&(i.sidx=n),i},Exe=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",Nxe=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",kxe=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",Axe=(t,e)=>{t.forEach(n=>{n.mediaSequence=0,n.discontinuitySequence=e.findIndex(function({timeline:s}){return s===n.timeline}),n.segments&&n.segments.forEach((s,i)=>{s.number=i})})},yM=t=>t?Object.keys(t).reduce((e,n)=>{const s=t[n];return e.concat(s.playlists)},[]):[],Dxe=({dashPlaylists:t,locations:e,contentSteering:n,sidxMapping:s={},previousManifest:i,eventStream:a})=>{if(!t.length)return{};const{sourceDuration:o,type:l,suggestedPresentationDelay:c,minimumUpdatePeriod:u}=t[0].attributes,d=dj(t.filter(Exe)).map(Txe),h=dj(t.filter(Nxe)),f=dj(t.filter(kxe)),p=t.map(w=>w.attributes.captionServices).filter(Boolean),g={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:bxe(d,s)};u>=0&&(g.minimumUpdatePeriod=u*1e3),e&&(g.locations=e),n&&(g.contentSteering=n),l==="dynamic"&&(g.suggestedPresentationDelay=c),a&&a.length>0&&(g.eventStream=a);const m=g.playlists.length===0,_=h.length?Cxe(h,s,m):null,y=f.length?Sxe(f,s):null,x=d.concat(yM(_),yM(y)),b=x.map(({timelineStarts:w})=>w);return g.timelineStarts=UU(b),Axe(x,g.timelineStarts),_&&(g.mediaGroups.AUDIO.audio=_),y&&(g.mediaGroups.SUBTITLES.subs=y),p.length&&(g.mediaGroups["CLOSED-CAPTIONS"].cc=jxe(p)),i?xxe({oldManifest:i,newManifest:g}):g},Pxe=(t,e,n)=>{const{NOW:s,clientOffset:i,availabilityStartTime:a,timescale:o=1,periodStart:l=0,minimumUpdatePeriod:c=0}=t,u=(s+i)/1e3,d=a+l,f=u+c-d;return Math.ceil((f*o-e)/n)},VU=(t,e)=>{const{type:n,minimumUpdatePeriod:s=0,media:i="",sourceDuration:a,timescale:o=1,startNumber:l=1,periodStart:c}=t,u=[];let d=-1;for(let h=0;h<e.length;h++){const f=e[h],p=f.d,g=f.r||0,m=f.t||0;d<0&&(d=m),m&&m>d&&(d=m);let _;if(g<0){const b=h+1;b===e.length?n==="dynamic"&&s>0&&i.indexOf("$Number$")>0?_=Pxe(t,d,p):_=(a*o-d)/p:_=(e[b].t-d)/p}else _=g+1;const y=l+u.length+_;let x=l+u.length;for(;x<y;)u.push({number:x,duration:p/o,time:d,timeline:c}),d+=p,x++}return u},Ixe=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Mxe=t=>(e,n,s,i)=>{if(e==="$$")return"$";if(typeof t[n]>"u")return e;const a=""+t[n];return n==="RepresentationID"||(s?i=parseInt(i,10):i=1,a.length>=i)?a:`${new Array(i-a.length+1).join("0")}${a}`},xM=(t,e)=>t.replace(Ixe,Mxe(e)),Oxe=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?U4(t):VU(t,e),Rxe=(t,e)=>{const n={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:s={sourceURL:"",range:""}}=t,i=Ev({baseUrl:t.baseUrl,source:xM(s.sourceURL,n),range:s.range});return Oxe(t,e).map(o=>{n.Number=o.number,n.Time=o.time;const l=xM(t.media||"",n),c=t.timescale||1,u=t.presentationTimeOffset||0,d=t.periodStart+(o.time-u)/c;return{uri:l,timeline:o.timeline,duration:o.duration,resolvedUri:jw(t.baseUrl||"",l),map:i,number:o.number,presentationTime:d}})},Lxe=(t,e)=>{const{baseUrl:n,initialization:s={}}=t,i=Ev({baseUrl:n,source:s.sourceURL,range:s.range}),a=Ev({baseUrl:n,source:e.media,range:e.mediaRange});return a.map=i,a},Bxe=(t,e)=>{const{duration:n,segmentUrls:s=[],periodStart:i}=t;if(!n&&!e||n&&e)throw new Error(Xp.SEGMENT_TIME_UNSPECIFIED);const a=s.map(c=>Lxe(t,c));let o;return n&&(o=U4(t)),e&&(o=VU(t,e)),o.map((c,u)=>{if(a[u]){const d=a[u],h=t.timescale||1,f=t.presentationTimeOffset||0;return d.timeline=c.timeline,d.duration=c.duration,d.number=c.number,d.presentationTime=i+(c.time-f)/h,d}}).filter(c=>c)},Fxe=({attributes:t,segmentInfo:e})=>{let n,s;e.template?(s=Rxe,n=vr(t,e.template)):e.base?(s=$U,n=vr(t,e.base)):e.list&&(s=Bxe,n=vr(t,e.list));const i={attributes:t};if(!s)return i;const a=s(n,e.segmentTimeline);if(n.duration){const{duration:o,timescale:l=1}=n;n.duration=o/l}else a.length?n.duration=a.reduce((o,l)=>Math.max(o,Math.ceil(l.duration)),0):n.duration=0;return i.attributes=n,i.segments=a,e.base&&n.indexRange&&(i.sidx=a[0],i.segments=[]),i},$xe=t=>t.map(Fxe),Zn=(t,e)=>FU(t.childNodes).filter(({tagName:n})=>n===e),Ny=t=>t.textContent.trim(),Uxe=t=>parseFloat(t.split("/").reduce((e,n)=>e/n)),wf=t=>{const l=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!l)return 0;const[c,u,d,h,f,p]=l.slice(1);return parseFloat(c||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(d||0)*86400+parseFloat(h||0)*3600+parseFloat(f||0)*60+parseFloat(p||0)},Vxe=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),bM={mediaPresentationDuration(t){return wf(t)},availabilityStartTime(t){return Vxe(t)/1e3},minimumUpdatePeriod(t){return wf(t)},suggestedPresentationDelay(t){return wf(t)},type(t){return t},timeShiftBufferDepth(t){return wf(t)},start(t){return wf(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return Uxe(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?wf(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},Ws=t=>t&&t.attributes?FU(t.attributes).reduce((e,n)=>{const s=bM[n.name]||bM.DEFAULT;return e[n.name]=s(n.value),e},{}):{},zxe={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Aw=(t,e)=>e.length?Yp(t.map(function(n){return e.map(function(s){const i=Ny(s),a=jw(n.baseUrl,i),o=vr(Ws(s),{baseUrl:a});return a!==i&&!o.serviceLocation&&n.serviceLocation&&(o.serviceLocation=n.serviceLocation),o})})):t,H4=t=>{const e=Zn(t,"SegmentTemplate")[0],n=Zn(t,"SegmentList")[0],s=n&&Zn(n,"SegmentURL").map(h=>vr({tag:"SegmentURL"},Ws(h))),i=Zn(t,"SegmentBase")[0],a=n||e,o=a&&Zn(a,"SegmentTimeline")[0],l=n||i||e,c=l&&Zn(l,"Initialization")[0],u=e&&Ws(e);u&&c?u.initialization=c&&Ws(c):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const d={template:u,segmentTimeline:o&&Zn(o,"S").map(h=>Ws(h)),list:n&&vr(Ws(n),{segmentUrls:s,initialization:Ws(c)}),base:i&&vr(Ws(i),{initialization:Ws(c)})};return Object.keys(d).forEach(h=>{d[h]||delete d[h]}),d},Hxe=(t,e,n)=>s=>{const i=Zn(s,"BaseURL"),a=Aw(e,i),o=vr(t,Ws(s)),l=H4(s);return a.map(c=>({segmentInfo:vr(n,l),attributes:vr(o,c)}))},qxe=t=>t.reduce((e,n)=>{const s=Ws(n);s.schemeIdUri&&(s.schemeIdUri=s.schemeIdUri.toLowerCase());const i=zxe[s.schemeIdUri];if(i){e[i]={attributes:s};const a=Zn(n,"cenc:pssh")[0];if(a){const o=Ny(a);e[i].pssh=o&&Mye(o)}}return e},{}),Wxe=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{let s,i;return i=n,/^CC\d=/.test(n)?[s,i]=n.split("="):/^CC\d$/.test(n)&&(s=n),{channel:s,language:i}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{const s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){const[i,a=""]=n.split("=");s.channel=i,s.language=n,a.split(",").forEach(o=>{const[l,c]=o.split(":");l==="lang"?s.language=c:l==="er"?s.easyReader=Number(c):l==="war"?s.aspectRatio=Number(c):l==="3D"&&(s["3D"]=Number(c))})}else s.language=n;return s.channel&&(s.channel="SERVICE"+s.channel),s})},Gxe=t=>Yp(Zn(t.node,"EventStream").map(e=>{const n=Ws(e),s=n.schemeIdUri;return Zn(e,"Event").map(i=>{const a=Ws(i),o=a.presentationTime||0,l=n.timescale||1,c=a.duration||0,u=o/l+t.attributes.start;return{schemeIdUri:s,value:n.value,id:a.id,start:u,end:u+c/l,messageData:Ny(i)||a.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),Yxe=(t,e,n)=>s=>{const i=Ws(s),a=Aw(e,Zn(s,"BaseURL")),o=Zn(s,"Role")[0],l={role:Ws(o)};let c=vr(t,i,l);const u=Zn(s,"Accessibility")[0],d=Wxe(Ws(u));d&&(c=vr(c,{captionServices:d}));const h=Zn(s,"Label")[0];if(h&&h.childNodes.length){const _=h.childNodes[0].nodeValue.trim();c=vr(c,{label:_})}const f=qxe(Zn(s,"ContentProtection"));Object.keys(f).length&&(c=vr(c,{contentProtection:f}));const p=H4(s),g=Zn(s,"Representation"),m=vr(n,p);return Yp(g.map(Hxe(c,a,m)))},Xxe=(t,e)=>(n,s)=>{const i=Aw(e,Zn(n.node,"BaseURL")),a=vr(t,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(a.periodDuration=n.attributes.duration);const o=Zn(n.node,"AdaptationSet"),l=H4(n.node);return Yp(o.map(Yxe(a,i,l)))},Kxe=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const n=vr({serverURL:Ny(t[0])},Ws(t[0]));return n.queryBeforeStart=n.queryBeforeStart==="true",n},Qxe=({attributes:t,priorPeriodAttributes:e,mpdType:n})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&n==="static"?0:null,Zxe=(t,e={})=>{const{manifestUri:n="",NOW:s=Date.now(),clientOffset:i=0,eventHandler:a=function(){}}=e,o=Zn(t,"Period");if(!o.length)throw new Error(Xp.INVALID_NUMBER_OF_PERIOD);const l=Zn(t,"Location"),c=Ws(t),u=Aw([{baseUrl:n}],Zn(t,"BaseURL")),d=Zn(t,"ContentSteering");c.type=c.type||"static",c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=s,c.clientOffset=i,l.length&&(c.locations=l.map(Ny));const h=[];return o.forEach((f,p)=>{const g=Ws(f),m=h[p-1];g.start=Qxe({attributes:g,priorPeriodAttributes:m?m.attributes:null,mpdType:c.type}),h.push({node:f,attributes:g})}),{locations:c.locations,contentSteeringInfo:Kxe(d,a),representationInfo:Yp(h.map(Xxe(c,u))),eventStream:Yp(h.map(Gxe))}},zU=t=>{if(t==="")throw new Error(Xp.DASH_EMPTY_MANIFEST);const e=new lxe;let n,s;try{n=e.parseFromString(t,"application/xml"),s=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!s||s&&s.getElementsByTagName("parsererror").length>0)throw new Error(Xp.DASH_INVALID_XML);return s},Jxe=t=>{const e=Zn(t,"UTCTiming")[0];if(!e)return null;const n=Ws(e);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Xp.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},e1e=(t,e={})=>{const n=Zxe(zU(t),e),s=$xe(n.representationInfo);return Dxe({dashPlaylists:s,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:n.eventStream})},t1e=t=>Jxe(zU(t));var HU=Math.pow(2,32),n1e=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n;return e.getBigUint64?(n=e.getBigUint64(0),n<Number.MAX_SAFE_INTEGER?Number(n):n):e.getUint32(0)*HU+e.getUint32(4)},s1e={getUint64:n1e,MAX_UINT32:HU},_M=s1e.getUint64,r1e=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},s=12;n.version===0?(n.earliestPresentationTime=e.getUint32(s),n.firstOffset=e.getUint32(s+4),s+=8):(n.earliestPresentationTime=_M(t.subarray(s)),n.firstOffset=_M(t.subarray(s+8)),s+=16),s+=2;var i=e.getUint16(s);for(s+=2;i>0;s+=12,i--)n.references.push({referenceType:(t[s]&128)>>>7,referencedSize:e.getUint32(s)&2147483647,subsegmentDuration:e.getUint32(s+4),startsWithSap:!!(t[s+8]&128),sapType:(t[s+8]&112)>>>4,sapDeltaTime:e.getUint32(s+8)&268435455});return n},i1e=r1e;const a1e=In(i1e);var o1e=Ct([73,68,51]),l1e=function(e,n){n===void 0&&(n=0),e=Ct(e);var s=e[n+5],i=e[n+6]<<21|e[n+7]<<14|e[n+8]<<7|e[n+9],a=(s&16)>>4;return a?i+20:i+10},s0=function t(e,n){return n===void 0&&(n=0),e=Ct(e),e.length-n<10||!Kn(e,o1e,{offset:n})?n:(n+=l1e(e,n),t(e,n))},wM=function(e){return typeof e=="string"?lU(e):e},c1e=function(e){return Array.isArray(e)?e.map(function(n){return wM(n)}):[wM(e)]},u1e=function t(e,n,s){s===void 0&&(s=!1),n=c1e(n),e=Ct(e);var i=[];if(!n.length)return i;for(var a=0;a<e.length;){var o=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,l=e.subarray(a+4,a+8);if(o===0)break;var c=a+o;if(c>e.length){if(s)break;c=e.length}var u=e.subarray(a+8,c);Kn(l,n[0])&&(n.length===1?i.push(u):i.push.apply(i,t(u,n.slice(1),s))),a=c}return i},Vx={EBML:Ct([26,69,223,163]),DocType:Ct([66,130]),Segment:Ct([24,83,128,103]),SegmentInfo:Ct([21,73,169,102]),Tracks:Ct([22,84,174,107]),Track:Ct([174]),TrackNumber:Ct([215]),DefaultDuration:Ct([35,227,131]),TrackEntry:Ct([174]),TrackType:Ct([131]),FlagDefault:Ct([136]),CodecID:Ct([134]),CodecPrivate:Ct([99,162]),VideoTrack:Ct([224]),AudioTrack:Ct([225]),Cluster:Ct([31,67,182,117]),Timestamp:Ct([231]),TimestampScale:Ct([42,215,177]),BlockGroup:Ct([160]),BlockDuration:Ct([155]),Block:Ct([161]),SimpleBlock:Ct([163])},iN=[128,64,32,16,8,4,2,1],d1e=function(e){for(var n=1,s=0;s<iN.length&&!(e&iN[s]);s++)n++;return n},y_=function(e,n,s,i){s===void 0&&(s=!0),i===void 0&&(i=!1);var a=d1e(e[n]),o=e.subarray(n,n+a);return s&&(o=Array.prototype.slice.call(e,n,n+a),o[0]^=iN[a-1]),{length:a,value:kye(o,{signed:i}),bytes:o}},CM=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(n){return t(n)}):typeof e=="number"?Aye(e):e},h1e=function(e){return Array.isArray(e)?e.map(function(n){return CM(n)}):[CM(e)]},f1e=function t(e,n,s){if(s>=n.length)return n.length;var i=y_(n,s,!1);if(Kn(e.bytes,i.bytes))return s;var a=y_(n,s+i.length);return t(e,n,s+a.length+a.value+i.length)},SM=function t(e,n){n=h1e(n),e=Ct(e);var s=[];if(!n.length)return s;for(var i=0;i<e.length;){var a=y_(e,i,!1),o=y_(e,i+a.length),l=i+a.length+o.length;o.value===127&&(o.value=f1e(a,e,l),o.value!==e.length&&(o.value-=l));var c=l+o.value>e.length?e.length:l+o.value,u=e.subarray(l,c);Kn(n[0],a.bytes)&&(n.length===1?s.push(u):s=s.concat(t(u,n.slice(1))));var d=a.length+o.length+u.length;i+=d}return s},p1e=Ct([0,0,0,1]),m1e=Ct([0,0,1]),g1e=Ct([0,0,3]),v1e=function(e){for(var n=[],s=1;s<e.length-2;)Kn(e.subarray(s,s+3),g1e)&&(n.push(s+2),s++),s++;if(n.length===0)return e;var i=e.length-n.length,a=new Uint8Array(i),o=0;for(s=0;s<i;o++,s++)o===n[0]&&(o++,n.shift()),a[s]=e[o];return a},qU=function(e,n,s,i){e=Ct(e),s=[].concat(s);for(var a=0,o,l=0;a<e.length&&(l<i||o);){var c=void 0;if(Kn(e.subarray(a),p1e)?c=4:Kn(e.subarray(a),m1e)&&(c=3),!c){a++;continue}if(l++,o)return v1e(e.subarray(o,a));var u=void 0;n==="h264"?u=e[a+c]&31:n==="h265"&&(u=e[a+c]>>1&63),s.indexOf(u)!==-1&&(o=a+c),a+=c+(n==="h264"?1:2)}return e.subarray(0,0)},y1e=function(e,n,s){return qU(e,"h264",n,s)},x1e=function(e,n,s){return qU(e,"h265",n,s)},si={webm:Ct([119,101,98,109]),matroska:Ct([109,97,116,114,111,115,107,97]),flac:Ct([102,76,97,67]),ogg:Ct([79,103,103,83]),ac3:Ct([11,119]),riff:Ct([82,73,70,70]),avi:Ct([65,86,73]),wav:Ct([87,65,86,69]),"3gp":Ct([102,116,121,112,51,103]),mp4:Ct([102,116,121,112]),fmp4:Ct([115,116,121,112]),mov:Ct([102,116,121,112,113,116]),moov:Ct([109,111,111,118]),moof:Ct([109,111,111,102])},Kp={aac:function(e){var n=s0(e);return Kn(e,[255,16],{offset:n,mask:[255,22]})},mp3:function(e){var n=s0(e);return Kn(e,[255,2],{offset:n,mask:[255,6]})},webm:function(e){var n=SM(e,[Vx.EBML,Vx.DocType])[0];return Kn(n,si.webm)},mkv:function(e){var n=SM(e,[Vx.EBML,Vx.DocType])[0];return Kn(n,si.matroska)},mp4:function(e){if(Kp["3gp"](e)||Kp.mov(e))return!1;if(Kn(e,si.mp4,{offset:4})||Kn(e,si.fmp4,{offset:4})||Kn(e,si.moof,{offset:4})||Kn(e,si.moov,{offset:4}))return!0},mov:function(e){return Kn(e,si.mov,{offset:4})},"3gp":function(e){return Kn(e,si["3gp"],{offset:4})},ac3:function(e){var n=s0(e);return Kn(e,si.ac3,{offset:n})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var n=0;n+188<e.length&&n<188;){if(e[n]===71&&e[n+188]===71)return!0;n+=1}return!1},flac:function(e){var n=s0(e);return Kn(e,si.flac,{offset:n})},ogg:function(e){return Kn(e,si.ogg)},avi:function(e){return Kn(e,si.riff)&&Kn(e,si.avi,{offset:8})},wav:function(e){return Kn(e,si.riff)&&Kn(e,si.wav,{offset:8})},h264:function(e){return y1e(e,7,3).length},h265:function(e){return x1e(e,[32,33],3).length}},aN=Object.keys(Kp).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);aN.forEach(function(t){var e=Kp[t];Kp[t]=function(n){return e(Ct(n))}});var b1e=Kp,q4=function(e){e=Ct(e);for(var n=0;n<aN.length;n++){var s=aN[n];if(b1e[s](e))return s}return""},_1e=function(e){return u1e(e,["moof"]).length>0},W4=9e4,G4,Y4,Dw,X4,WU,GU,YU;G4=function(t){return t*W4};Y4=function(t,e){return t*e};Dw=function(t){return t/W4};X4=function(t,e){return t/e};WU=function(t,e){return G4(X4(t,e))};GU=function(t,e){return Y4(Dw(t),e)};YU=function(t,e,n){return Dw(n?t:t-e)};var sh={ONE_SECOND_IN_TS:W4,secondsToVideoTs:G4,secondsToAudioTs:Y4,videoTsToSeconds:Dw,audioTsToSeconds:X4,audioTsToVideoTs:WU,videoTsToAudioTs:GU,metadataTsToSeconds:YU},oN="8.17.3";const uc={},Zu=function(t,e){return uc[t]=uc[t]||[],e&&(uc[t]=uc[t].concat(e)),uc[t]},w1e=function(t,e){Zu(t,e)},XU=function(t,e){const n=Zu(t).indexOf(e);return n<=-1?!1:(uc[t]=uc[t].slice(),uc[t].splice(n,1),!0)},C1e=function(t,e){Zu(t,[].concat(e).map(n=>{const s=(...i)=>(XU(t,s),n(...i));return s}))},x_={prefixed:!0},K1=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],jM=K1[0];let r0;for(let t=0;t<K1.length;t++)if(K1[t][1]in st){r0=K1[t];break}if(r0){for(let t=0;t<r0.length;t++)x_[jM[t]]=r0[t];x_.prefixed=r0[0]!==jM[0]}let Oi=[];const S1e=(t,e,n)=>(s,i,a)=>{const o=e.levels[i],l=new RegExp(`^(${o})$`);let c=t;if(s!=="log"&&a.unshift(s.toUpperCase()+":"),n&&(c=`%c${t}`,a.unshift(n)),a.unshift(c+":"),Oi){Oi.push([].concat(a));const d=Oi.length-1e3;Oi.splice(0,d>0?d:0)}if(!de.console)return;let u=de.console[s];!u&&s==="debug"&&(u=de.console.info||de.console.log),!(!u||!o||!l.test(s))&&u[Array.isArray(a)?"apply":"call"](de.console,a)};function lN(t,e=":",n=""){let s="info",i;function a(...o){i("log",s,o)}return i=S1e(t,a,n),a.createLogger=(o,l,c)=>{const u=l!==void 0?l:e,d=c!==void 0?c:n,h=`${t} ${u} ${o}`;return lN(h,u,d)},a.createNewLogger=(o,l,c)=>lN(o,l,c),a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:s},a.level=o=>{if(typeof o=="string"){if(!a.levels.hasOwnProperty(o))throw new Error(`"${o}" in not a valid log level`);s=o}return s},a.history=()=>Oi?[].concat(Oi):[],a.history.filter=o=>(Oi||[]).filter(l=>new RegExp(`.*${o}.*`).test(l[0])),a.history.clear=()=>{Oi&&(Oi.length=0)},a.history.disable=()=>{Oi!==null&&(Oi.length=0,Oi=null)},a.history.enable=()=>{Oi===null&&(Oi=[])},a.error=(...o)=>i("error",s,o),a.warn=(...o)=>i("warn",s,o),a.debug=(...o)=>i("debug",s,o),a}const Jt=lN("VIDEOJS"),KU=Jt.createLogger,j1e=Object.prototype.toString,QU=function(t){return El(t)?Object.keys(t):[]};function fp(t,e){QU(t).forEach(n=>e(t[n],n))}function ZU(t,e,n=0){return QU(t).reduce((s,i)=>e(s,t[i],i),n)}function El(t){return!!t&&typeof t=="object"}function Qp(t){return El(t)&&j1e.call(t)==="[object Object]"&&t.constructor===Object}function Bn(...t){const e={};return t.forEach(n=>{n&&fp(n,(s,i)=>{if(!Qp(s)){e[i]=s;return}Qp(e[i])||(e[i]={}),e[i]=Bn(e[i],s)})}),e}function JU(t={}){const e=[];for(const n in t)if(t.hasOwnProperty(n)){const s=t[n];e.push(s)}return e}function Pw(t,e,n,s=!0){const i=o=>Object.defineProperty(t,e,{value:o,enumerable:!0,writable:!0}),a={configurable:!0,enumerable:!0,get(){const o=n();return i(o),o}};return s&&(a.set=i),Object.defineProperty(t,e,a)}var T1e=Object.freeze({__proto__:null,each:fp,reduce:ZU,isObject:El,isPlain:Qp,merge:Bn,values:JU,defineLazyProperty:Pw});let K4=!1,eV=null,Nl=!1,tV,nV=!1,pp=!1,mp=!1,kl=!1,Q4=null,Iw=null;const E1e=!!(de.cast&&de.cast.framework&&de.cast.framework.CastReceiverContext);let sV=null,b_=!1,Mw=!1,__=!1,Ow=!1,w_=!1,C_=!1,cN=!1;const Nv=!!(Dm()&&("ontouchstart"in de||de.navigator.maxTouchPoints||de.DocumentTouch&&de.document instanceof de.DocumentTouch)),su=de.navigator&&de.navigator.userAgentData;su&&su.platform&&su.brands&&(Nl=su.platform==="Android",pp=!!su.brands.find(t=>t.brand==="Microsoft Edge"),mp=!!su.brands.find(t=>t.brand==="Chromium"),kl=!pp&&mp,Q4=Iw=(su.brands.find(t=>t.brand==="Chromium")||{}).version||null,Mw=su.platform==="Windows");if(!mp){const t=de.navigator&&de.navigator.userAgent||"";K4=/iPod/i.test(t),eV=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Nl=/Android/i.test(t),tV=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const n=e[1]&&parseFloat(e[1]),s=e[2]&&parseFloat(e[2]);return n&&s?parseFloat(e[1]+"."+e[2]):n||null}(),nV=/Firefox/i.test(t),pp=/Edg/i.test(t),mp=/Chrome/i.test(t)||/CriOS/i.test(t),kl=!pp&&mp,Q4=Iw=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),sV=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let n=e&&parseFloat(e[1]);return!n&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(n=11),n}(),w_=/Tizen/i.test(t),C_=/Web0S/i.test(t),cN=w_||C_,b_=/Safari/i.test(t)&&!kl&&!Nl&&!pp&&!cN,Mw=/Windows/i.test(t),__=/iPad/i.test(t)||b_&&Nv&&!/iPhone/i.test(t),Ow=/iPhone/i.test(t)&&!__}const gi=Ow||__||K4,Rw=(b_||gi)&&!kl;var rV=Object.freeze({__proto__:null,get IS_IPOD(){return K4},get IOS_VERSION(){return eV},get IS_ANDROID(){return Nl},get ANDROID_VERSION(){return tV},get IS_FIREFOX(){return nV},get IS_EDGE(){return pp},get IS_CHROMIUM(){return mp},get IS_CHROME(){return kl},get CHROMIUM_VERSION(){return Q4},get CHROME_VERSION(){return Iw},IS_CHROMECAST_RECEIVER:E1e,get IE_VERSION(){return sV},get IS_SAFARI(){return b_},get IS_WINDOWS(){return Mw},get IS_IPAD(){return __},get IS_IPHONE(){return Ow},get IS_TIZEN(){return w_},get IS_WEBOS(){return C_},get IS_SMART_TV(){return cN},TOUCH_ENABLED:Nv,IS_IOS:gi,IS_ANY_SAFARI:Rw});function TM(t){return typeof t=="string"&&!!t.trim()}function N1e(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Dm(){return st===de.document}function Pm(t){return El(t)&&t.nodeType===1}function iV(){try{return de.parent!==de.self}catch{return!0}}function aV(t){return function(e,n){if(!TM(e))return st[t](null);TM(n)&&(n=st.querySelector(n));const s=Pm(n)?n:st;return s[t]&&s[t](e)}}function kt(t="div",e={},n={},s){const i=st.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(a){const o=e[a];a==="textContent"?vd(i,o):(i[a]!==o||a==="tabIndex")&&(i[a]=o)}),Object.getOwnPropertyNames(n).forEach(function(a){i.setAttribute(a,n[a])}),s&&Z4(i,s),i}function vd(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function uN(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function N0(t,e){return N1e(e),t.classList.contains(e)}function ph(t,...e){return t.classList.add(...e.reduce((n,s)=>n.concat(s.split(/\s+/)),[])),t}function Lw(t,...e){return t?(t.classList.remove(...e.reduce((n,s)=>n.concat(s.split(/\s+/)),[])),t):(Jt.warn("removeClass was called with an element that doesn't exist"),null)}function oV(t,e,n){return typeof n=="function"&&(n=n(t,e)),typeof n!="boolean"&&(n=void 0),e.split(/\s+/).forEach(s=>t.classList.toggle(s,n)),t}function lV(t,e){Object.getOwnPropertyNames(e).forEach(function(n){const s=e[n];s===null||typeof s>"u"||s===!1?t.removeAttribute(n):t.setAttribute(n,s===!0?"":s)})}function gu(t){const e={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(t&&t.attributes&&t.attributes.length>0){const s=t.attributes;for(let i=s.length-1;i>=0;i--){const a=s[i].name;let o=s[i].value;n.includes(a)&&(o=o!==null),e[a]=o}}return e}function cV(t,e){return t.getAttribute(e)}function Zp(t,e,n){t.setAttribute(e,n)}function Bw(t,e){t.removeAttribute(e)}function uV(){st.body.focus(),st.onselectstart=function(){return!1}}function dV(){st.onselectstart=function(){return!0}}function Jp(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(s=>{e[s]!==void 0&&(n[s]=e[s])}),n.height||(n.height=parseFloat(em(t,"height"))),n.width||(n.width=parseFloat(em(t,"width"))),n}}function kv(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,n=t.offsetHeight;let s=0,i=0;for(;t.offsetParent&&t!==st[x_.fullscreenElement];)s+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{left:s,top:i,width:e,height:n}}function Fw(t,e){const n={x:0,y:0};if(gi){let d=t;for(;d&&d.nodeName.toLowerCase()!=="html";){const h=em(d,"transform");if(/^matrix/.test(h)){const f=h.slice(7,-1).split(/,\s/).map(Number);n.x+=f[4],n.y+=f[5]}else if(/^matrix3d/.test(h)){const f=h.slice(9,-1).split(/,\s/).map(Number);n.x+=f[12],n.y+=f[13]}if(d.assignedSlot&&d.assignedSlot.parentElement&&de.WebKitCSSMatrix){const f=de.getComputedStyle(d.assignedSlot.parentElement).transform,p=new de.WebKitCSSMatrix(f);n.x+=p.m41,n.y+=p.m42}d=d.parentNode||d.host}}const s={},i=kv(e.target),a=kv(t),o=a.width,l=a.height;let c=e.offsetY-(a.top-i.top),u=e.offsetX-(a.left-i.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-a.left,c=e.changedTouches[0].pageY+a.top,gi&&(u-=n.x,c-=n.y)),s.y=1-Math.max(0,Math.min(1,c/l)),s.x=Math.max(0,Math.min(1,u/o)),s}function hV(t){return El(t)&&t.nodeType===3}function $w(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function fV(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),Pm(e)||hV(e))return e;if(typeof e=="string"&&/\S/.test(e))return st.createTextNode(e)}).filter(e=>e)}function Z4(t,e){return fV(e).forEach(n=>t.appendChild(n)),t}function pV(t,e){return Z4($w(t),e)}function Av(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0||t.type==="mousedown"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const Ju=aV("querySelector"),mV=aV("querySelectorAll");function em(t,e){if(!t||!e)return"";if(typeof de.getComputedStyle=="function"){let n;try{n=de.getComputedStyle(t)}catch{return""}return n?n.getPropertyValue(e)||n[e]:""}return""}function gV(t){[...st.styleSheets].forEach(e=>{try{const n=[...e.cssRules].map(i=>i.cssText).join(""),s=st.createElement("style");s.textContent=n,t.document.head.appendChild(s)}catch{const s=st.createElement("link");s.rel="stylesheet",s.type=e.type,s.media=e.media.mediaText,s.href=e.href,t.document.head.appendChild(s)}})}var vV=Object.freeze({__proto__:null,isReal:Dm,isEl:Pm,isInFrame:iV,createEl:kt,textContent:vd,prependTo:uN,hasClass:N0,addClass:ph,removeClass:Lw,toggleClass:oV,setAttributes:lV,getAttributes:gu,getAttribute:cV,setAttribute:Zp,removeAttribute:Bw,blockTextSelection:uV,unblockTextSelection:dV,getBoundingClientRect:Jp,findPosition:kv,getPointerPosition:Fw,isTextNode:hV,emptyEl:$w,normalizeContent:fV,appendContent:Z4,insertContent:pV,isSingleLeftClick:Av,$:Ju,$$:mV,computedStyle:em,copyStyleSheetsToWindow:gV});let yV=!1,dN;const k1e=function(){if(dN.options.autoSetup===!1)return;const t=Array.prototype.slice.call(st.getElementsByTagName("video")),e=Array.prototype.slice.call(st.getElementsByTagName("audio")),n=Array.prototype.slice.call(st.getElementsByTagName("video-js")),s=t.concat(e,n);if(s&&s.length>0)for(let i=0,a=s.length;i<a;i++){const o=s[i];if(o&&o.getAttribute)o.player===void 0&&o.getAttribute("data-setup")!==null&&dN(o);else{hN(1);break}}else yV||hN(1)};function hN(t,e){Dm()&&(e&&(dN=e),de.setTimeout(k1e,t))}function fN(){yV=!0,de.removeEventListener("load",fN)}Dm()&&(st.readyState==="complete"?fN():de.addEventListener("load",fN));const xV=function(t){const e=st.createElement("style");return e.className=t,e},bV=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var hi=new WeakMap;const A1e=3;let D1e=A1e;function so(){return D1e++}function EM(t,e){if(!hi.has(t))return;const n=hi.get(t);n.handlers[e].length===0&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&hi.delete(t)}function J4(t,e,n,s){n.forEach(function(i){t(e,i,s)})}function Uw(t){if(t.fixed_)return t;function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const s=t||de.event;t={};const i=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const a in s)i.includes(a)||a==="returnValue"&&s.preventDefault||(t[a]=s[a]);if(t.target||(t.target=t.srcElement||st),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){s.preventDefault&&s.preventDefault(),t.returnValue=!1,s.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),t.cancelBubble=!0,s.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,t.clientX!==null&&t.clientX!==void 0){const a=st.documentElement,o=st.body;t.pageX=t.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),t.pageY=t.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let zx;const P1e=function(){if(typeof zx!="boolean"){zx=!1;try{const t=Object.defineProperty({},"passive",{get(){zx=!0}});de.addEventListener("test",null,t),de.removeEventListener("test",null,t)}catch{}}return zx},I1e=["touchstart","touchmove"];function ja(t,e,n){if(Array.isArray(e))return J4(ja,t,e,n);hi.has(t)||hi.set(t,{});const s=hi.get(t);if(s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),n.guid||(n.guid=so()),s.handlers[e].push(n),s.dispatcher||(s.disabled=!1,s.dispatcher=function(i,a){if(s.disabled)return;i=Uw(i);const o=s.handlers[i.type];if(o){const l=o.slice(0);for(let c=0,u=l.length;c<u&&!i.isImmediatePropagationStopped();c++)try{l[c].call(t,i,a)}catch(d){Jt.error(d)}}}),s.handlers[e].length===1)if(t.addEventListener){let i=!1;P1e()&&I1e.indexOf(e)>-1&&(i={passive:!0}),t.addEventListener(e,s.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,s.dispatcher)}function qr(t,e,n){if(!hi.has(t))return;const s=hi.get(t);if(!s.handlers)return;if(Array.isArray(e))return J4(qr,t,e,n);const i=function(o,l){s.handlers[l]=[],EM(o,l)};if(e===void 0){for(const o in s.handlers)Object.prototype.hasOwnProperty.call(s.handlers||{},o)&&i(t,o);return}const a=s.handlers[e];if(a){if(!n){i(t,e);return}if(n.guid)for(let o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);EM(t,e)}}function Im(t,e,n){const s=hi.has(t)?hi.get(t):{},i=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=Uw(e),s.dispatcher&&s.dispatcher.call(t,e,n),i&&!e.isPropagationStopped()&&e.bubbles===!0)Im.call(null,i,e,n);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){hi.has(e.target)||hi.set(e.target,{});const a=hi.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function Vw(t,e,n){if(Array.isArray(e))return J4(Vw,t,e,n);const s=function(){qr(t,e,s),n.apply(this,arguments)};s.guid=n.guid=n.guid||so(),ja(t,e,s)}function eA(t,e,n){const s=function(){qr(t,e,s),n.apply(this,arguments)};s.guid=n.guid=n.guid||so(),ja(t,e,s)}var M1e=Object.freeze({__proto__:null,fixEvent:Uw,on:ja,off:qr,trigger:Im,one:Vw,any:eA});const ro=30,Un=function(t,e,n){e.guid||(e.guid=so());const s=e.bind(t);return s.guid=n?n+"_"+e.guid:e.guid,s},Al=function(t,e){let n=de.performance.now();return function(...i){const a=de.performance.now();a-n>=e&&(t(...i),n=a)}},_V=function(t,e,n,s=de){let i;const a=()=>{s.clearTimeout(i),i=null},o=function(){const l=this,c=arguments;let u=function(){i=null,u=null,n||t.apply(l,c)};!i&&n&&t.apply(l,c),s.clearTimeout(i),i=s.setTimeout(u,e)};return o.cancel=a,o};var O1e=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:ro,bind_:Un,throttle:Al,debounce:_V});let Mg;class Ta{on(e,n){const s=this.addEventListener;this.addEventListener=()=>{},ja(this,e,n),this.addEventListener=s}off(e,n){qr(this,e,n)}one(e,n){const s=this.addEventListener;this.addEventListener=()=>{},Vw(this,e,n),this.addEventListener=s}any(e,n){const s=this.addEventListener;this.addEventListener=()=>{},eA(this,e,n),this.addEventListener=s}trigger(e){const n=e.type||e;typeof e=="string"&&(e={type:n}),e=Uw(e),this.allowedEvents_[n]&&this["on"+n]&&this["on"+n](e),Im(this,e)}queueTrigger(e){Mg||(Mg=new Map);const n=e.type||e;let s=Mg.get(this);s||(s=new Map,Mg.set(this,s));const i=s.get(n);s.delete(n),de.clearTimeout(i);const a=de.setTimeout(()=>{s.delete(n),s.size===0&&(s=null,Mg.delete(this)),this.trigger(e)},0);s.set(n,a)}}Ta.prototype.allowedEvents_={};Ta.prototype.addEventListener=Ta.prototype.on;Ta.prototype.removeEventListener=Ta.prototype.off;Ta.prototype.dispatchEvent=Ta.prototype.trigger;const zw=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,bc=t=>t instanceof Ta||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),R1e=(t,e)=>{bc(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},pN=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,S_=(t,e,n)=>{if(!t||!t.nodeName&&!bc(t))throw new Error(`Invalid target for ${zw(e)}#${n}; must be a DOM node or evented object.`)},wV=(t,e,n)=>{if(!pN(t))throw new Error(`Invalid event type for ${zw(e)}#${n}; must be a non-empty string or array.`)},CV=(t,e,n)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${zw(e)}#${n}; must be a function.`)},hj=(t,e,n)=>{const s=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let i,a,o;return s?(i=t.eventBusEl_,e.length>=3&&e.shift(),[a,o]=e):(i=e[0],a=e[1],o=e[2]),S_(i,t,n),wV(a,t,n),CV(o,t,n),o=Un(t,o),{isTargetingSelf:s,target:i,type:a,listener:o}},Id=(t,e,n,s)=>{S_(t,t,e),t.nodeName?M1e[e](t,n,s):t[e](n,s)},L1e={on(...t){const{isTargetingSelf:e,target:n,type:s,listener:i}=hj(this,t,"on");if(Id(n,"on",s,i),!e){const a=()=>this.off(n,s,i);a.guid=i.guid;const o=()=>this.off("dispose",a);o.guid=i.guid,Id(this,"on","dispose",a),Id(n,"on","dispose",o)}},one(...t){const{isTargetingSelf:e,target:n,type:s,listener:i}=hj(this,t,"one");if(e)Id(n,"one",s,i);else{const a=(...o)=>{this.off(n,s,a),i.apply(null,o)};a.guid=i.guid,Id(n,"one",s,a)}},any(...t){const{isTargetingSelf:e,target:n,type:s,listener:i}=hj(this,t,"any");if(e)Id(n,"any",s,i);else{const a=(...o)=>{this.off(n,s,a),i.apply(null,o)};a.guid=i.guid,Id(n,"any",s,a)}},off(t,e,n){if(!t||pN(t))qr(this.eventBusEl_,t,e);else{const s=t,i=e;S_(s,this,"off"),wV(i,this,"off"),CV(n,this,"off"),n=Un(this,n),this.off("dispose",n),s.nodeName?(qr(s,i,n),qr(s,"dispose",n)):bc(s)&&(s.off(i,n),s.off("dispose",n))}},trigger(t,e){S_(this.eventBusEl_,this,"trigger");const n=t&&typeof t!="string"?t.type:t;if(!pN(n))throw new Error(`Invalid event type for ${zw(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Im(this.eventBusEl_,t,e)}};function tA(t,e={}){const{eventBusKey:n}=e;if(n){if(!t[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);t.eventBusEl_=t[n]}else t.eventBusEl_=kt("span",{className:"vjs-event-bus"});return Object.assign(t,L1e),t.eventedCallbacks&&t.eventedCallbacks.forEach(s=>{s()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(s){s&&hi.has(s)&&hi.delete(s)}),de.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const B1e={state:{},setState(t){typeof t=="function"&&(t=t());let e;return fp(t,(n,s)=>{this.state[s]!==n&&(e=e||{},e[s]={from:this.state[s],to:n}),this.state[s]=n}),e&&bc(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function SV(t,e){return Object.assign(t,B1e),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&bc(t)&&t.on("statechanged",t.handleStateChanged),t}const k0=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},js=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},jV=function(t,e){return js(t)===js(e)};var F1e=Object.freeze({__proto__:null,toLowerCase:k0,toTitleCase:js,titleCaseEquals:jV});class Be{constructor(e,n,s){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Bn({},this.options_),n=this.options_=Bn(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){const i=e&&e.id&&e.id()||"no_player";this.id_=`${i}_component_${so()}`}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(i=>this.addClass(i)),["on","off","one","any","trigger"].forEach(i=>{this[i]=void 0}),n.evented!==!1&&(tA(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),SV(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(s),n.reportTouchActivity!==!1&&this.enableTouchActivity()}on(e,n){}off(e,n){}one(e,n){}any(e,n){}trigger(e,n){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=Bn(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,n,s){return kt(e,n,s)}localize(e,n,s=e){const i=this.player_.language&&this.player_.language(),a=this.player_.languages&&this.player_.languages(),o=a&&a[i],l=i&&i.split("-")[0],c=a&&a[l];let u=s;return o&&o[e]?u=o[e]:c&&c[e]&&(u=c[e]),n&&(u=u.replace(/\{(\d+)\}/g,function(d,h){const f=n[h-1];let p=f;return typeof f>"u"&&(p=d),p})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((s,i)=>s.concat(i),[]);let n=this;for(let s=0;s<e.length;s++)if(n=n.getChild(e[s]),!n||!n.getChild)return;return n}setIcon(e,n=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const s="http://www.w3.org/2000/svg",i=kt("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),a=st.createElementNS(s,"svg");a.setAttributeNS(null,"viewBox","0 0 512 512");const o=st.createElementNS(s,"use");return a.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${e}`),i.appendChild(a),this.iconIsSet_?n.replaceChild(i,n.querySelector(".vjs-icon-placeholder")):n.appendChild(i),this.iconIsSet_=!0,i}addChild(e,n={},s=this.children_.length){let i,a;if(typeof e=="string"){a=js(e);const o=n.componentClass||a;n.name=a;const l=Be.getComponent(o);if(!l)throw new Error(`Component ${o} does not exist`);if(typeof l!="function")return null;i=new l(this.player_||this,n)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(s,0,i),i.parentComponent_=this,typeof i.id=="function"&&(this.childIndex_[i.id()]=i),a=a||i.name&&js(i.name()),a&&(this.childNameIndex_[a]=i,this.childNameIndex_[k0(a)]=i),typeof i.el=="function"&&i.el()){let o=null;this.children_[s+1]&&(this.children_[s+1].el_?o=this.children_[s+1].el_:Pm(this.children_[s+1])&&(o=this.children_[s+1])),this.contentEl().insertBefore(i.el(),o)}return i}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let n=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){n=!0,this.children_.splice(i,1);break}if(!n)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[js(e.name())]=null,this.childNameIndex_[k0(e.name())]=null;const s=e.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const n=this.options_,s=o=>{const l=o.name;let c=o.opts;if(n[l]!==void 0&&(c=n[l]),c===!1)return;c===!0&&(c={}),c.playerOptions=this.options_.playerOptions;const u=this.addChild(l,c);u&&(this[l]=u)};let i;const a=Be.getComponent("Tech");Array.isArray(e)?i=e:i=Object.keys(e),i.concat(Object.keys(this.options_).filter(function(o){return!i.some(function(l){return typeof l=="string"?o===l:o===l.name})})).map(o=>{let l,c;return typeof o=="string"?(l=o,c=e[l]||this.options_[l]||{}):(l=o.name,c=o),{name:l,opts:c}}).filter(o=>{const l=Be.getComponent(o.opts.componentClass||js(o.name));return l&&!a.isTech(l)}).forEach(s)}}buildCSSClass(){return""}ready(e,n=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}n?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)}$(e,n){return Ju(e,n||this.contentEl())}$$(e,n){return mV(e,n||this.contentEl())}hasClass(e){return N0(this.el_,e)}addClass(...e){ph(this.el_,...e)}removeClass(...e){Lw(this.el_,...e)}toggleClass(e,n){oV(this.el_,e,n)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return cV(this.el_,e)}setAttribute(e,n){Zp(this.el_,e,n)}removeAttribute(e){Bw(this.el_,e)}width(e,n){return this.dimension("width",e,n)}height(e,n){return this.dimension("height",e,n)}dimensions(e,n){this.width(e,!0),this.height(n)}dimension(e,n,s){if(n!==void 0){(n===null||n!==n)&&(n=0),(""+n).indexOf("%")!==-1||(""+n).indexOf("px")!==-1?this.el_.style[e]=n:n==="auto"?this.el_.style[e]="":this.el_.style[e]=n+"px",s||this.trigger("componentresize");return}if(!this.el_)return 0;const i=this.el_.style[e],a=i.indexOf("px");return parseInt(a!==-1?i.slice(0,a):this.el_["offset"+js(e)],10)}currentDimension(e){let n=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(n=em(this.el_,e),n=parseFloat(n),n===0||isNaN(n)){const s=`offset${js(e)}`;n=this.el_[s]}return n}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},s={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:n,center:s}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,n=null;const s=10,i=200;let a;this.on("touchstart",function(l){l.touches.length===1&&(n={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},e=de.performance.now(),a=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)a=!1;else if(n){const c=l.touches[0].pageX-n.pageX,u=l.touches[0].pageY-n.pageY;Math.sqrt(c*c+u*u)>s&&(a=!1)}});const o=function(){a=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(l){n=null,a===!0&&de.performance.now()-e<i&&(l.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Un(this.player(),this.player().reportUserActivity);let n;this.on("touchstart",function(){e(),this.clearInterval(n),n=this.setInterval(e,250)});const s=function(i){e(),this.clearInterval(n)};this.on("touchmove",e),this.on("touchend",s),this.on("touchcancel",s)}setTimeout(e,n){var s;return e=Un(this,e),this.clearTimersOnDispose_(),s=de.setTimeout(()=>{this.setTimeoutIds_.has(s)&&this.setTimeoutIds_.delete(s),e()},n),this.setTimeoutIds_.add(s),s}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),de.clearTimeout(e)),e}setInterval(e,n){e=Un(this,e),this.clearTimersOnDispose_();const s=de.setInterval(e,n);return this.setIntervalIds_.add(s),s}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),de.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var n;return e=Un(this,e),n=de.requestAnimationFrame(()=>{this.rafIds_.has(n)&&this.rafIds_.delete(n),e()}),this.rafIds_.add(n),n}requestNamedAnimationFrame(e,n){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),n=Un(this,n);const s=this.requestAnimationFrame(()=>{n(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,s),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),de.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,n])=>{this[e].forEach((s,i)=>this[n](i))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function n(a){const o=de.getComputedStyle(a,null),l=o.getPropertyValue("visibility");return o.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(l)}function s(a){return!(!n(a.parentElement)||!n(a)||a.style.opacity==="0"||de.getComputedStyle(a).height==="0px"||de.getComputedStyle(a).width==="0px")}function i(a){if(a.offsetWidth+a.offsetHeight+a.getBoundingClientRect().height+a.getBoundingClientRect().width===0)return!1;const o={x:a.getBoundingClientRect().left+a.offsetWidth/2,y:a.getBoundingClientRect().top+a.offsetHeight/2};if(o.x<0||o.x>(st.documentElement.clientWidth||de.innerWidth)||o.y<0||o.y>(st.documentElement.clientHeight||de.innerHeight))return!1;let l=st.elementFromPoint(o.x,o.y);for(;l;){if(l===a)return!0;if(l.parentNode)l=l.parentNode;else return!1}}return e||(e=this.el()),!!(i(e)&&s(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,n){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const s=Be.getComponent("Tech"),i=s&&s.isTech(n),a=Be===n||Be.prototype.isPrototypeOf(n.prototype);if(i||!a){let l;throw i?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error(`Illegal component, "${e}"; ${l}.`)}e=js(e),Be.components_||(Be.components_={});const o=Be.getComponent("Player");if(e==="Player"&&o&&o.players){const l=o.players,c=Object.keys(l);if(l&&c.length>0&&c.map(u=>l[u]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Be.components_[e]=n,Be.components_[k0(e)]=n,n}static getComponent(e){if(!(!e||!Be.components_))return Be.components_[e]}}Be.registerComponent("Component",Be);function $1e(t,e,n){if(typeof e!="number"||e<0||e>n)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${n}).`)}function NM(t,e,n,s){return $1e(t,s,n.length-1),n[s][e]}function fj(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:NM.bind(null,"start",0,t),end:NM.bind(null,"end",1,t)},de.Symbol&&de.Symbol.iterator&&(e[de.Symbol.iterator]=()=>(t||[]).values()),e}function Mo(t,e){return Array.isArray(t)?fj(t):t===void 0||e===void 0?fj():fj([[t,e]])}const TV=function(t,e){t=t<0?0:t;let n=Math.floor(t%60),s=Math.floor(t/60%60),i=Math.floor(t/3600);const a=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(i=s=n="-"),i=i>0||o>0?i+":":"",s=((i||a>=10)&&s<10?"0"+s:s)+":",n=n<10?"0"+n:n,i+s+n};let nA=TV;function EV(t){nA=t}function NV(){nA=TV}function Mh(t,e=t){return nA(t,e)}var U1e=Object.freeze({__proto__:null,createTimeRanges:Mo,createTimeRange:Mo,setFormatTime:EV,resetFormatTime:NV,formatTime:Mh});function kV(t,e){let n=0,s,i;if(!e)return 0;(!t||!t.length)&&(t=Mo(0,0));for(let a=0;a<t.length;a++)s=t.start(a),i=t.end(a),i>e&&(i=e),n+=i-s;return n/e}function gs(t){if(t instanceof gs)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:El(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=gs.defaultMessages[this.code]||"")}gs.prototype.code=0;gs.prototype.message="";gs.prototype.status=null;gs.prototype.metadata=null;gs.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];gs.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};gs.MEDIA_ERR_CUSTOM=0;gs.prototype.MEDIA_ERR_CUSTOM=0;gs.MEDIA_ERR_ABORTED=1;gs.prototype.MEDIA_ERR_ABORTED=1;gs.MEDIA_ERR_NETWORK=2;gs.prototype.MEDIA_ERR_NETWORK=2;gs.MEDIA_ERR_DECODE=3;gs.prototype.MEDIA_ERR_DECODE=3;gs.MEDIA_ERR_SRC_NOT_SUPPORTED=4;gs.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;gs.MEDIA_ERR_ENCRYPTED=5;gs.prototype.MEDIA_ERR_ENCRYPTED=5;function A0(t){return t!=null&&typeof t.then=="function"}function ul(t){A0(t)&&t.then(null,e=>{})}const mN=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((n,s,i)=>(t[s]&&(n[s]=t[s]),n),{cues:t.cues&&Array.prototype.map.call(t.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},V1e=function(t){const e=t.$$("track"),n=Array.prototype.map.call(e,i=>i.track);return Array.prototype.map.call(e,function(i){const a=mN(i.track);return i.src&&(a.src=i.src),a}).concat(Array.prototype.filter.call(t.textTracks(),function(i){return n.indexOf(i)===-1}).map(mN))},z1e=function(t,e){return t.forEach(function(n){const s=e.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(i=>s.addCue(i))}),e.textTracks()};var kM={textTracksToJson:V1e,jsonToTextTracks:z1e,trackToJson_:mN};const pj="vjs-modal-dialog";class Mm extends Be{constructor(e,n){super(e,n),this.handleKeyDown_=s=>this.handleKeyDown(s),this.close_=s=>this.close(s),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=kt("div",{className:`${pj}-content`},{role:"document"}),this.descEl_=kt("p",{className:`${pj}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),vd(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${pj} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const n=this.closeable_=!!e;let s=this.getChild("closeButton");if(n&&!s){const i=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(s,"close",this.close_)}!n&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const n=this.contentEl(),s=n.parentNode,i=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(n),this.empty(),pV(n,e),this.trigger("modalfill"),i?s.insertBefore(n,i):s.appendChild(n);const a=this.getChild("closeButton");a&&s.appendChild(a.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),$w(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=st.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const n=this.focusableEls_(),s=this.el_.querySelector(":focus");let i;for(let a=0;a<n.length;a++)if(s===n[a]){i=a;break}st.activeElement===this.el_&&(i=0),e.shiftKey&&i===0?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&i===n.length-1&&(n[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,n=>(n instanceof de.HTMLAnchorElement||n instanceof de.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof de.HTMLInputElement||n instanceof de.HTMLSelectElement||n instanceof de.HTMLTextAreaElement||n instanceof de.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof de.HTMLIFrameElement||n instanceof de.HTMLObjectElement||n instanceof de.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable"))}}Mm.prototype.options_={pauseOnOpen:!0,temporary:!0};Be.registerComponent("ModalDialog",Mm);class tm extends Ta{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let n=0;n<e.length;n++)this.addTrack(e[n])}addTrack(e){const n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.tracks_[n]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},bc(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let n;for(let s=0,i=this.length;s<i;s++)if(this[s]===e){n=this[s],n.off&&n.off(),this.tracks_.splice(s,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})}getTrackById(e){let n=null;for(let s=0,i=this.length;s<i;s++){const a=this[s];if(a.id===e){n=a;break}}return n}}tm.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in tm.prototype.allowedEvents_)tm.prototype["on"+t]=null;const mj=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].enabled=!1)};class H1e extends tm{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].enabled){mj(e,e[n]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&mj(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,mj(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const gj=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].selected=!1)};class q1e extends tm{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].selected){gj(e,e[n]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let n=0;n<this.length;n++)if(this[n].selected)return n;return-1},set(){}})}addTrack(e){e.selected&&gj(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,gj(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class AV extends tm{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class W1e{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let n=0,s=e.length;n<s;n++)this.addTrackElement_(e[n])}addTrackElement_(e){const n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.trackElements_[n]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let n;for(let s=0,i=this.trackElements_.length;s<i;s++)if(e===this.trackElements_[s].track){n=this.trackElements_[s];break}return n}removeTrackElement_(e){for(let n=0,s=this.trackElements_.length;n<s;n++)if(e===this.trackElements_[n]){this.trackElements_[n].track&&typeof this.trackElements_[n].track.off=="function"&&this.trackElements_[n].track.off(),typeof this.trackElements_[n].off=="function"&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}}}class j_{constructor(e){j_.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const n=this.length||0;let s=0;const i=e.length;this.cues_=e,this.length_=e.length;const a=function(o){""+o in this||Object.defineProperty(this,""+o,{get(){return this.cues_[o]}})};if(n<i)for(s=n;s<i;s++)a.call(this,s)}getCueById(e){let n=null;for(let s=0,i=this.length;s<i;s++){const a=this[s];if(a.id===e){n=a;break}}return n}}const G1e={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Y1e={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},X1e={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},AM={disabled:"disabled",hidden:"hidden",showing:"showing"};class sA extends Ta{constructor(e={}){super();const n={id:e.id||"vjs_track_"+so(),kind:e.kind||"",language:e.language||""};let s=e.label||"";for(const i in n)Object.defineProperty(this,i,{get(){return n[i]},set(){}});Object.defineProperty(this,"label",{get(){return s},set(i){i!==s&&(s=i,this.trigger("labelchange"))}})}}const rA=function(t){return new URL(t,st.baseURI)},DV=function(t){return new URL(t,st.baseURI).href},iA=function(t){if(typeof t=="string"){const n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(n)return n.pop().toLowerCase()}return""},Hw=function(t,e=de.location){return rA(t).origin!==e.origin};var K1e=Object.freeze({__proto__:null,parseUrl:rA,getAbsoluteURL:DV,getFileExtension:iA,isCrossOrigin:Hw});const DM=function(t,e){const n=new de.WebVTT.Parser(de,de.vttjs,de.WebVTT.StringDecoder()),s=[];n.oncue=function(i){e.addCue(i)},n.onparsingerror=function(i){s.push(i)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),s.length>0&&(de.console&&de.console.groupCollapsed&&de.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),s.forEach(i=>Jt.error(i)),de.console&&de.console.groupEnd&&de.console.groupEnd()),n.flush()},PM=function(t,e){const n={uri:t},s=Hw(t);s&&(n.cors=s);const i=e.tech_.crossOrigin()==="use-credentials";i&&(n.withCredentials=i),J$(n,Un(this,function(a,o,l){if(a)return Jt.error(a,o);e.loaded_=!0,typeof de.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],c=>{if(c.type==="vttjserror"){Jt.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return DM(l,e)}):DM(l,e)}))};class ky extends sA{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const n=Bn(e,{kind:X1e[e.kind]||"subtitles",language:e.language||e.srclang||""});let s=AM[n.mode]||"disabled";const i=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(s="hidden"),super(n),this.tech_=n.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const a=new j_(this.cues_),o=new j_(this.activeCues_);let l=!1;this.timeupdateHandler=Un(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const c=()=>{this.stopTracking()};this.tech_.one("dispose",c),s!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return i},set(){}},mode:{get(){return s},set(u){AM[u]&&s!==u&&(s=u,!this.preload_&&s!=="disabled"&&this.cues.length===0&&PM(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?a:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return o;const u=this.tech_.currentTime(),d=[];for(let h=0,f=this.cues.length;h<f;h++){const p=this.cues[h];p.startTime<=u&&p.endTime>=u&&d.push(p)}if(l=!1,d.length!==this.activeCues_.length)l=!0;else for(let h=0;h<d.length;h++)this.activeCues_.indexOf(d[h])===-1&&(l=!0);return this.activeCues_=d,o.setCues_(this.activeCues_),o},set(){}}}),n.src?(this.src=n.src,this.preload_||(this.loaded_=!0),(this.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&PM(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let n=e;if(!("getCueAsHTML"in n)){n=new de.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const i in e)i in n||(n[i]=e[i]);n.id=e.id,n.originalCue_=e}const s=this.tech_.textTracks();for(let i=0;i<s.length;i++)s[i]!==this&&s[i].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)}removeCue(e){let n=this.cues_.length;for(;n--;){const s=this.cues_[n];if(s===e||s.originalCue_&&s.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}}}ky.prototype.allowedEvents_={cuechange:"cuechange"};class PV extends sA{constructor(e={}){const n=Bn(e,{kind:Y1e[e.kind]||""});super(n);let s=!1;Object.defineProperty(this,"enabled",{get(){return s},set(i){typeof i!="boolean"||i===s||(s=i,this.trigger("enabledchange"))}}),n.enabled&&(this.enabled=n.enabled),this.loaded_=!0}}class IV extends sA{constructor(e={}){const n=Bn(e,{kind:G1e[e.kind]||""});super(n);let s=!1;Object.defineProperty(this,"selected",{get(){return s},set(i){typeof i!="boolean"||i===s||(s=i,this.trigger("selectedchange"))}}),n.selected&&(this.selected=n.selected)}}class Mc extends Ta{constructor(e={}){super();let n;const s=new ky(e);this.kind=s.kind,this.src=s.src,this.srclang=s.language,this.label=s.label,this.default=s.default,Object.defineProperties(this,{readyState:{get(){return n}},track:{get(){return s}}}),n=Mc.NONE,s.addEventListener("loadeddata",()=>{n=Mc.LOADED,this.trigger({type:"load",target:this})})}}Mc.prototype.allowedEvents_={load:"load"};Mc.NONE=0;Mc.LOADING=1;Mc.LOADED=2;Mc.ERROR=3;const Ka={audio:{ListClass:H1e,TrackClass:PV,capitalName:"Audio"},video:{ListClass:q1e,TrackClass:IV,capitalName:"Video"},text:{ListClass:AV,TrackClass:ky,capitalName:"Text"}};Object.keys(Ka).forEach(function(t){Ka[t].getterName=`${t}Tracks`,Ka[t].privateName=`${t}Tracks_`});const nm={remoteText:{ListClass:AV,TrackClass:ky,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:W1e,TrackClass:Mc,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ui=Object.assign({},Ka,nm);nm.names=Object.keys(nm);Ka.names=Object.keys(Ka);ui.names=[].concat(nm.names).concat(Ka.names);function Q1e(t,e,n,s,i={}){const a=t.textTracks();i.kind=e,n&&(i.label=n),s&&(i.language=s),i.tech=t;const o=new ui.text.TrackClass(i);return a.addTrack(o),o}class Lt extends Be{constructor(e={},n=function(){}){e.reportTouchActivity=!1,super(null,e,n),this.onDurationChange_=s=>this.onDurationChange(s),this.trackProgress_=s=>this.trackProgress(s),this.trackCurrentTime_=s=>this.trackCurrentTime(s),this.stopTrackingCurrentTime_=s=>this.stopTrackingCurrentTime(s),this.disposeSourceHandler_=s=>this.disposeSourceHandler(s),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ui.names.forEach(s=>{const i=ui[s];e&&e[i.getterName]&&(this[i.privateName]=e[i.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(s=>{e[`native${s}Tracks`]===!1&&(this[`featuresNative${s}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ui.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Un(this,function(){const n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Mo(0,0)}bufferedPercent(){return kV(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Ka.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(n=>{const s=this[`${n}Tracks`]()||[];let i=s.length;for(;i--;){const a=s[i];n==="text"&&this.removeRemoteTextTrack(a),s.removeTrack(a)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let n=e.length;for(;n--;){const s=e[n];this.removeRemoteTextTrack(s)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new gs(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Mo(0,0):Mo()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Ka.names.forEach(e=>{const n=Ka[e],s=()=>{this.trigger(`${e}trackchange`)},i=this[n.getterName]();i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),this.on("dispose",()=>{i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s)})})}addWebVttScript_(){if(!de.WebVTT)if(st.body.contains(this.el())){if(!this.options_["vtt.js"]&&Qp(Y6)&&Object.keys(Y6).length>0){this.trigger("vttjsloaded");return}const e=st.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),de.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),n=this.remoteTextTracks(),s=l=>e.addTrack(l.track),i=l=>e.removeTrack(l.track);n.on("addtrack",s),n.on("removetrack",i),this.addWebVttScript_();const a=()=>this.trigger("texttrackchange"),o=()=>{a();for(let l=0;l<e.length;l++){const c=e[l];c.removeEventListener("cuechange",a),c.mode==="showing"&&c.addEventListener("cuechange",a)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){n.off("addtrack",s),n.off("removetrack",i),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(let l=0;l<e.length;l++)e[l].removeEventListener("cuechange",a)})}addTextTrack(e,n,s){if(!e)throw new Error("TextTrack kind is required but was not provided");return Q1e(this,e,n,s)}createRemoteTextTrack(e){const n=Bn(e,{tech:this});return new nm.remoteTextEl.TrackClass(n)}addRemoteTextTrack(e={},n){const s=this.createRemoteTextTrack(e);return typeof n!="boolean"&&(n=!1),this.remoteTextTrackEls().addTrackElement_(s),this.remoteTextTracks().addTrack(s.track),n===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(s.track)),s}removeRemoteTextTrack(e){const n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const n=so();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",()=>{this.queuedHanders_.has(n)&&(this.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,n){return Lt.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Lt||e instanceof Lt||e===Lt}static registerTech(e,n){if(Lt.techs_||(Lt.techs_={}),!Lt.isTech(n))throw new Error(`Tech ${e} must be a Tech`);if(!Lt.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Lt.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=js(e),Lt.techs_[e]=n,Lt.techs_[k0(e)]=n,e!=="Tech"&&Lt.defaultTechOrder_.push(e),n}static getTech(e){if(e){if(Lt.techs_&&Lt.techs_[e])return Lt.techs_[e];if(e=js(e),de&&de.videojs&&de.videojs[e])return Jt.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),de.videojs[e]}}}ui.names.forEach(function(t){const e=ui[t];Lt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Lt.prototype.featuresVolumeControl=!0;Lt.prototype.featuresMuteControl=!0;Lt.prototype.featuresFullscreenResize=!1;Lt.prototype.featuresPlaybackRate=!1;Lt.prototype.featuresProgressEvents=!1;Lt.prototype.featuresSourceset=!1;Lt.prototype.featuresTimeupdateEvents=!1;Lt.prototype.featuresNativeTextTracks=!1;Lt.prototype.featuresVideoFrameCallback=!1;Lt.withSourceHandlers=function(t){t.registerSourceHandler=function(n,s){let i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),s===void 0&&(s=i.length),i.splice(s,0,n)},t.canPlayType=function(n){const s=t.sourceHandlers||[];let i;for(let a=0;a<s.length;a++)if(i=s[a].canPlayType(n),i)return i;return""},t.selectSourceHandler=function(n,s){const i=t.sourceHandlers||[];let a;for(let o=0;o<i.length;o++)if(a=i[o].canHandleSource(n,s),a)return i[o];return null},t.canPlaySource=function(n,s){const i=t.selectSourceHandler(n,s);return i?i.canHandleSource(n,s):""},["seekable","seeking","duration"].forEach(function(n){const s=this[n];typeof s=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):s.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(n){let s=t.selectSourceHandler(n,this.options_);s||(t.nativeSourceHandler?s=t.nativeSourceHandler:Jt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),s!==t.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=s.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Be.registerComponent("Tech",Lt);Lt.registerTech("Tech",Lt);Lt.defaultTechOrder_=[];const mh={},T_={},E_={};function Z1e(t,e){mh[t]=mh[t]||[],mh[t].push(e)}function J1e(t,e,n){t.setTimeout(()=>zd(e,mh[e.type],n,t),1)}function ebe(t,e){t.forEach(n=>n.setTech&&n.setTech(e))}function tbe(t,e,n){return t.reduceRight(aA(n),e[n]())}function nbe(t,e,n,s){return e[n](t.reduce(aA(n),s))}function IM(t,e,n,s=null){const i="call"+js(n),a=t.reduce(aA(i),s),o=a===E_,l=o?null:e[n](a);return ibe(t,n,l,o),l}const sbe={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},rbe={setCurrentTime:1,setMuted:1,setVolume:1},MM={play:1,pause:1};function aA(t){return(e,n)=>e===E_?E_:n[t]?n[t](e):e}function ibe(t,e,n,s){for(let i=t.length-1;i>=0;i--){const a=t[i];a[e]&&a[e](s,n)}}function abe(t){T_.hasOwnProperty(t.id())&&delete T_[t.id()]}function obe(t,e){const n=T_[t.id()];let s=null;if(n==null)return s=e(t),T_[t.id()]=[[e,s]],s;for(let i=0;i<n.length;i++){const[a,o]=n[i];a===e&&(s=o)}return s===null&&(s=e(t),n.push([e,s])),s}function zd(t={},e=[],n,s,i=[],a=!1){const[o,...l]=e;if(typeof o=="string")zd(t,mh[o],n,s,i,a);else if(o){const c=obe(s,o);if(!c.setSource)return i.push(c),zd(t,l,n,s,i,a);c.setSource(Object.assign({},t),function(u,d){if(u)return zd(t,l,n,s,i,a);i.push(c),zd(d,t.type===d.type?l:mh[d.type],n,s,i,a)})}else l.length?zd(t,l,n,s,i,a):a?n(t,i):zd(t,mh["*"],n,s,i,!0)}const lbe={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},N_=function(t=""){const e=iA(t);return lbe[e.toLowerCase()]||""},cbe=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const n=t.cache_.sources.filter(i=>i.src===e);if(n.length)return n[0].type;const s=t.$$("source");for(let i=0;i<s.length;i++){const a=s[i];if(a.type&&a.src&&a.src===e)return a.type}return N_(e)},MV=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(n){n=MV(n),Array.isArray(n)?e=e.concat(n):El(n)&&e.push(n)}),t=e}else typeof t=="string"&&t.trim()?t=[OM({src:t})]:El(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[OM(t)]:t=[];return t};function OM(t){if(!t.type){const e=N_(t.src);e&&(t.type=e)}return t}var ube=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const RM=w_?10009:C_?461:8,Cf={codes:{play:415,pause:19,ff:417,rw:412,back:RM},names:{415:"play",19:"pause",417:"ff",412:"rw",[RM]:"back"},isEventKey(t,e){return e=e.toLowerCase(),!!(this.names[t.keyCode]&&this.names[t.keyCode]===e)},getEventName(t){if(this.names[t.keyCode])return this.names[t.keyCode];if(this.codes[t.code]){const e=this.codes[t.code];return this.names[e]}return null}},LM=5;class dbe extends Ta{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const n=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(n.key)){if(this.isPaused_)return;n.preventDefault();const s=n.key.substring(5).toLowerCase();this.move(s)}else if(Cf.isEventKey(n,"play")||Cf.isEventKey(n,"pause")||Cf.isEventKey(n,"ff")||Cf.isEventKey(n,"rw")){n.preventDefault();const s=Cf.getEventName(n);this.performMediaAction_(s)}else Cf.isEventKey(n,"Back")&&e.target&&e.target.closeable()&&(n.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+LM);break;case"rw":this.userSeek_(this.player_.currentTime()-LM);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const n=e.relatedTarget;let s=null;const i=this.getCurrentComponent(e.target);n&&(s=!!n.closest(".video-js"),n.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!s||!n)&&(i&&i.name()==="CloseButton"?this.refocusComponent():(this.pause(),i&&i.el()&&(this.lastFocusedComponent_=i)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,n=[];function s(i){for(const a of i)a.hasOwnProperty("el_")&&a.getIsFocusable()&&a.getIsAvailableToBeFocused(a.el())&&n.push(a),a.hasOwnProperty("children_")&&a.children_.length>0&&s(a.children_)}return e.children_.forEach(i=>{if(i.hasOwnProperty("el_"))if(i.getIsFocusable&&i.getIsAvailableToBeFocused&&i.getIsFocusable()&&i.getIsAvailableToBeFocused(i.el())){n.push(i);return}else i.hasOwnProperty("children_")&&i.children_.length>0?s(i.children_):i.hasOwnProperty("items")&&i.items.length>0?s(i.items):this.findSuitableDOMChild(i)&&n.push(i);if(i.name_==="ErrorDisplay"&&i.opened_){const a=i.el_.querySelector(".vjs-errors-ok-button-container");a&&a.querySelectorAll("button").forEach((l,c)=>{n.push({name:()=>"ModalButton"+(c+1),el:()=>l,getPositions:()=>{const u=l.getBoundingClientRect(),d={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},h={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:d,center:h}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>l.focus()})})}}),this.focusableComponents=n,this.focusableComponents}findSuitableDOMChild(e){function n(s){if(e.getIsFocusable(s)&&e.getIsAvailableToBeFocused(s))return s;for(let i=0;i<s.children.length;i++){const a=s.children[i],o=n(a);if(o)return o}return null}return e.el()?n(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const n=e||document.activeElement;if(this.focusableComponents.length){for(const s of this.focusableComponents)if(s.el()===n)return s}}add(e){const n=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&n.push(e),this.focusableComponents=n,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let n=0;n<this.focusableComponents.length;n++)if(this.focusableComponents[n].name()===e.name()){this.focusableComponents.splice(n,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const n=this.getCurrentComponent();if(!n)return;const s=n.getPositions(),i=this.focusableComponents.filter(o=>o!==n&&this.isInDirection_(s.boundingClientRect,o.getPositions().boundingClientRect,e)),a=this.findBestCandidate_(s.center,i,e);a?this.focus(a):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:n})}findBestCandidate_(e,n,s){let i=1/0,a=null;for(const o of n){const l=o.getPositions().center,c=this.calculateDistance_(e,l,s);c<i&&(i=c,a=o)}return a}isInDirection_(e,n,s){switch(s){case"right":return n.left>=e.right;case"left":return n.right<=e.left;case"down":return n.top>=e.bottom;case"up":return n.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,n,s){const i=Math.abs(e.x-n.x),a=Math.abs(e.y-n.y);let o;switch(s){case"right":case"left":o=i+a*100;break;case"up":o=a*2+i*.5;break;case"down":o=a*5+i;break;default:o=i+a}return o}searchForTrackSelect_(){const e=this;for(const n of e.updateFocusableComponents())if(n.constructor.name==="TextTrackSelect"){e.focus(n);break}}}class hbe extends Be{constructor(e,n,s){const i=Bn({createEl:!1},n);if(super(e,i,s),!n.playerOptions.sources||n.playerOptions.sources.length===0)for(let a=0,o=n.playerOptions.techOrder;a<o.length;a++){const l=js(o[a]);let c=Lt.getTech(l);if(l||(c=Be.getComponent(l)),c&&c.isSupported()){e.loadTech_(l);break}}else e.src(n.playerOptions.sources)}}Be.registerComponent("MediaLoader",hbe);class qw extends Be{constructor(e,n){super(e,n),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=s=>this.handleMouseOver(s),this.handleMouseOut_=s=>this.handleMouseOut(s),this.handleClick_=s=>this.handleClick(s),this.handleKeyDown_=s=>this.handleKeyDown(s),this.emitTapEvents(),this.enable()}createEl(e="div",n={},s={}){n=Object.assign({className:this.buildCSSClass(),tabIndex:0},n),e==="button"&&Jt.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),s=Object.assign({role:"button"},s),this.tabIndex_=n.tabIndex;const i=kt(e,n,s);return this.player_.options_.experimentalSvgIcons||i.appendChild(kt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=kt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,n=this.el()){if(e===void 0)return this.controlText_||"Need Text";const s=this.localize(e);this.controlText_=e,vd(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",s)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Be.registerComponent("ClickableComponent",qw);class gN extends qw{constructor(e,n){super(e,n),this.update(),this.update_=s=>this.update(s),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return kt("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const n=this.player().poster();this.setSrc(n),n?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(kt("picture",{className:"vjs-poster",tabIndex:-1},{},kt("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?ul(this.player_.play()):this.player_.pause())}}gN.prototype.crossorigin=gN.prototype.crossOrigin;Be.registerComponent("PosterImage",gN);const La="#222",BM="#ccc",fbe={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function vj(t,e){let n;if(t.length===4)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)n=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function Og(t,e,n){try{t.style[e]=n}catch{return}}function FM(t){return t?`${t}px`:""}class pbe extends Be{constructor(e,n,s){super(e,n,s);const i=o=>this.updateDisplay(o),a=o=>{this.updateDisplayOverlay(),this.updateDisplay(o)};e.on("loadstart",o=>this.toggleDisplay(o)),e.on("texttrackchange",i),e.on("loadedmetadata",o=>{this.updateDisplayOverlay(),this.preselectTrack(o)}),e.ready(Un(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",a),e.on("playerresize",a);const o=de.screen.orientation||de,l=de.screen.orientation?"change":"orientationchange";o.addEventListener(l,a),e.on("dispose",()=>o.removeEventListener(l,a));const c=this.options_.playerOptions.tracks||[];for(let u=0;u<c.length;u++)this.player_.addRemoteTextTrack(c[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},n=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage;let i,a,o;for(let l=0;l<n.length;l++){const c=n[l];s&&s.enabled&&s.language&&s.language===c.language&&c.kind in e?c.kind===s.kind?o=c:o||(o=c):s&&!s.enabled?(o=null,i=null,a=null):c.default&&(c.kind==="descriptions"&&!i?i=c:c.kind in e&&!a&&(a=c))}o?o.mode="showing":a?a.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof de.WebVTT=="function"&&de.WebVTT.processCues(de,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){const o=[];for(let l=0;l<e.length;++l){const c=e[l];c.mode==="showing"&&o.push(c)}this.updateForTrack(o);return}let s=null,i=null,a=e.length;for(;a--;){const o=e[a];o.mode==="showing"&&(o.kind==="descriptions"?s=o:i=o)}i?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):s&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!de.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),n=this.player_.currentHeight(),s=e/n,i=this.player_.videoWidth()/this.player_.videoHeight();let a=0,o=0;Math.abs(s-i)>.1&&(s>i?a=Math.round((e-n*i)/2):o=Math.round((n-e/i)/2)),Og(this.el_,"insetInline",FM(a)),Og(this.el_,"insetBlock",FM(o))}updateDisplayState(e){const n=this.player_.textTrackSettings.getValues(),s=e.activeCues;let i=s.length;for(;i--;){const a=s[i];if(!a)continue;const o=a.displayState;if(n.color&&(o.firstChild.style.color=n.color),n.textOpacity&&Og(o.firstChild,"color",vj(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(o.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&Og(o.firstChild,"backgroundColor",vj(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?Og(o,"backgroundColor",vj(n.windowColor,n.windowOpacity)):o.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?o.firstChild.style.textShadow=`2px 2px 3px ${La}, 2px 2px 4px ${La}, 2px 2px 5px ${La}`:n.edgeStyle==="raised"?o.firstChild.style.textShadow=`1px 1px ${La}, 2px 2px ${La}, 3px 3px ${La}`:n.edgeStyle==="depressed"?o.firstChild.style.textShadow=`1px 1px ${BM}, 0 1px ${BM}, -1px -1px ${La}, 0 -1px ${La}`:n.edgeStyle==="uniform"&&(o.firstChild.style.textShadow=`0 0 4px ${La}, 0 0 4px ${La}, 0 0 4px ${La}, 0 0 4px ${La}`)),n.fontPercent&&n.fontPercent!==1){const l=de.parseFloat(o.style.fontSize);o.style.fontSize=l*n.fontPercent+"px",o.style.height="auto",o.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=fbe[n.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof de.WebVTT!="function"||e.every(s=>!s.activeCues))return;const n=[];for(let s=0;s<e.length;++s){const i=e[s];for(let a=0;a<i.activeCues.length;++a)n.push(i.activeCues[a])}de.WebVTT.processCues(de,n,this.el_);for(let s=0;s<e.length;++s){const i=e[s];for(let a=0;a<i.activeCues.length;++a){const o=i.activeCues[a].displayState;ph(o,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:s)),i.language&&Zp(o,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}}Be.registerComponent("TextTrackDisplay",pbe);class mbe extends Be{createEl(){const e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),s=kt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(s),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Be.registerComponent("LoadingSpinner",mbe);let Wr=class extends qw{createEl(e,n={},s={}){e="button",n=Object.assign({className:this.buildCSSClass()},n),s=Object.assign({type:"button"},s);const i=kt(e,n,s);return this.player_.options_.experimentalSvgIcons||i.appendChild(kt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,n={}){const s=this.constructor.name;return Jt.warn(`Adding an actionable (user controllable) child to a Button (${s}) is not supported; use a ClickableComponent instead.`),Be.prototype.addChild.call(this,e,n)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}};Be.registerComponent("Button",Wr);class OV extends Wr{constructor(e,n){super(e,n),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",s=>this.handleMouseDown(s))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const n=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){ul(n),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const s=this.player_.getChild("controlBar"),i=s&&s.getChild("playToggle");if(!i){this.player_.tech(!0).focus();return}const a=()=>i.focus();A0(n)?n.then(a,()=>{}):this.setTimeout(a,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}OV.prototype.controlText_="Play Video";Be.registerComponent("BigPlayButton",OV);class gbe extends Wr{constructor(e,n){super(e,n),this.setIcon("cancel"),this.controlText(n&&n.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Be.registerComponent("CloseButton",gbe);class RV extends Wr{constructor(e,n={}){super(e,n),n.replay=n.replay===void 0||n.replay,this.setIcon("play"),this.on(e,"play",s=>this.handlePlay(s)),this.on(e,"pause",s=>this.handlePause(s)),n.replay&&this.on(e,"ended",s=>this.handleEnded(s))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?ul(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",n=>this.handleSeeked(n))}}RV.prototype.controlText_="Play";Be.registerComponent("PlayToggle",RV);class Om extends Be{constructor(e,n){super(e,n),this.on(e,["timeupdate","ended","seeking"],s=>this.update(s)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),n=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),s=kt("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return n.appendChild(s),this.contentEl_=kt("span",{className:`${e}-display`},{role:"presentation"}),n.appendChild(this.contentEl_),n}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Mh(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let n=this.textNode_;n&&this.contentEl_.firstChild!==n&&(n=null,Jt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=st.createTextNode(this.formattedTime_),this.textNode_&&(n?this.contentEl_.replaceChild(this.textNode_,n):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}Om.prototype.labelText_="Time";Om.prototype.controlText_="Time";Be.registerComponent("TimeDisplay",Om);class oA extends Om{buildCSSClass(){return"vjs-current-time"}updateContent(e){let n;this.player_.ended()?n=this.player_.duration():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)}}oA.prototype.labelText_="Current Time";oA.prototype.controlText_="Current Time";Be.registerComponent("CurrentTimeDisplay",oA);class lA extends Om{constructor(e,n){super(e,n);const s=i=>this.updateContent(i);this.on(e,"durationchange",s),this.on(e,"loadstart",s),this.on(e,"loadedmetadata",s)}buildCSSClass(){return"vjs-duration"}updateContent(e){const n=this.player_.duration();this.updateTextNode_(n)}}lA.prototype.labelText_="Duration";lA.prototype.controlText_="Duration";Be.registerComponent("DurationDisplay",lA);class vbe extends Be{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=super.createEl("div"),s=super.createEl("span",{textContent:"/"});return n.appendChild(s),e.appendChild(n),e}}Be.registerComponent("TimeDivider",vbe);class cA extends Om{constructor(e,n){super(e,n),this.on(e,"durationchange",s=>this.updateContent(s))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(kt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}}cA.prototype.labelText_="Remaining Time";cA.prototype.controlText_="Remaining Time";Be.registerComponent("RemainingTimeDisplay",cA);class ybe extends Be{constructor(e,n){super(e,n),this.updateShowing(),this.on(this.player(),"durationchange",s=>this.updateShowing(s))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=kt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(kt("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(st.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}Be.registerComponent("LiveDisplay",ybe);class LV extends Wr{constructor(e,n){super(e,n),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=s=>this.updateLiveEdgeStatus(s),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=kt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}LV.prototype.controlText_="Seek to live, currently playing live";Be.registerComponent("SeekToLive",LV);function Ay(t,e,n){return t=Number(t),Math.min(n,Math.max(e,isNaN(t)?e:t))}var xbe=Object.freeze({__proto__:null,clamp:Ay});class uA extends Be{constructor(e,n){super(e,n),this.handleMouseDown_=s=>this.handleMouseDown(s),this.handleMouseUp_=s=>this.handleMouseUp(s),this.handleKeyDown_=s=>this.handleKeyDown(s),this.handleClick_=s=>this.handleClick(s),this.handleMouseMove_=s=>this.handleMouseMove(s),this.update_=s=>this.update(s),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,n={},s={}){return n.className=n.className+" vjs-slider",n=Object.assign({tabIndex:0},n),s=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},s),super.createEl(e,n,s)}handleMouseDown(e){const n=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!kl&&e.preventDefault(),uV(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const n=this.bar.el_.ownerDocument;dV(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const n=this.vertical()?"height":"width";this.bar.el().style[n]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(Ay(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const n=Fw(this.el_,e);return this.vertical()?n.y:n.x}handleKeyDown(e){const n=this.options_.playerOptions.spatialNavigation,s=n&&n.enabled,i=n&&n.horizontalSeek;s?i&&e.key==="ArrowLeft"||!i&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):i&&e.key==="ArrowRight"||!i&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Be.registerComponent("Slider",uA);const yj=(t,e)=>Ay(t/e*100,0,100).toFixed(2)+"%";class bbe extends Be{constructor(e,n){super(e,n),this.partEls_=[],this.on(e,"progress",s=>this.update(s))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),n=kt("span",{className:"vjs-control-text"}),s=kt("span",{textContent:this.localize("Loaded")}),i=st.createTextNode(": ");return this.percentageEl_=kt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(s),n.appendChild(i),n.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const n=this.player_.liveTracker,s=this.player_.buffered(),i=n&&n.isLive()?n.seekableEnd():this.player_.duration(),a=this.player_.bufferedEnd(),o=this.partEls_,l=yj(a,i);this.percent_!==l&&(this.el_.style.width=l,vd(this.percentageEl_,l),this.percent_=l);for(let c=0;c<s.length;c++){const u=s.start(c),d=s.end(c);let h=o[c];h||(h=this.el_.appendChild(kt()),o[c]=h),!(h.dataset.start===u&&h.dataset.end===d)&&(h.dataset.start=u,h.dataset.end=d,h.style.left=yj(u,a),h.style.width=yj(d-u,a))}for(let c=o.length;c>s.length;c--)this.el_.removeChild(o[c-1]);o.length=s.length})}}Be.registerComponent("LoadProgressBar",bbe);class _be extends Be{constructor(e,n){super(e,n),this.update=Al(Un(this,this.update),ro)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,n,s){const i=kv(this.el_),a=Jp(this.player_.el()),o=e.width*n;if(!a||!i)return;let l=e.left-a.left+o,c=e.width-o+(a.right-e.right);c||(c=e.width-o,l=o);let u=i.width/2;l<u?u+=u-l:c<u&&(u=c),u<0?u=0:u>i.width&&(u=i.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(s)}write(e){vd(this.el_,e)}updateTime(e,n,s,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let a;const o=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const l=this.player_.liveTracker.liveWindow(),c=l-n*l;a=(c<1?"":"-")+Mh(c,l)}else a=Mh(s,o);this.update(e,n,a),i&&i()})}}Be.registerComponent("TimeTooltip",_be);class dA extends Be{constructor(e,n){super(e,n),this.setIcon("circle"),this.update=Al(Un(this,this.update),ro)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,n){const s=this.getChild("timeTooltip");if(!s)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(e,n,i)}}dA.prototype.options_={children:[]};!gi&&!Nl&&dA.prototype.options_.children.push("timeTooltip");Be.registerComponent("PlayProgressBar",dA);class BV extends Be{constructor(e,n){super(e,n),this.update=Al(Un(this,this.update),ro)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n){const s=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,s,()=>{this.el_.style.left=`${e.width*n}px`})}}BV.prototype.options_={children:["timeTooltip"]};Be.registerComponent("MouseTimeDisplay",BV);const Hx=5,$M=12;class hA extends uA{constructor(e,n){super(e,n),this.setEventHandlers_()}setEventHandlers_(){this.update_=Un(this,this.update),this.update=Al(this.update_,ro),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in st&&"visibilityState"in st&&this.on(st,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){st.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,ro))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(st.visibilityState==="hidden")return;const n=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const s=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let a=this.player_.duration();i&&i.isLive()&&(a=this.player_.liveTracker.liveCurrentTime()),this.percent_!==n&&(this.el_.setAttribute("aria-valuenow",(n*100).toFixed(2)),this.percent_=n),(this.currentTime_!==s||this.duration_!==a)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Mh(s,a),Mh(a,a)],"{1} of {2}")),this.currentTime_=s,this.duration_=a),this.bar&&this.bar.update(Jp(this.el()),this.getProgress())}),n}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let n;const s=this.player_.liveTracker;return s&&s.isLive()?(n=(e-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n}handleMouseDown(e){Av(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,n=!1){if(!Av(e)||isNaN(this.player_.duration()))return;!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let s;const i=this.calculateDistance(e),a=this.player_.liveTracker;if(!a||!a.isLive())s=i*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(i>=.99){a.seekToLiveEdge();return}const o=a.seekableStart(),l=a.liveCurrentTime();if(s=o+i*a.liveWindow(),s>=l&&(s=l),s<=o&&(s=o+.1),s===1/0)return}this.userSeek_(s),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?ul(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+Hx)}stepBack(){this.userSeek_(this.player_.currentTime()-Hx)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const n=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const s=parseInt(e.key,10)*.1;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-Hx*$M)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+Hx*$M)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in st&&"visibilityState"in st&&this.off(st,"visibilitychange",this.toggleVisibility_),super.dispose()}}hA.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!gi&&!Nl&&hA.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Be.registerComponent("SeekBar",hA);class FV extends Be{constructor(e,n){super(e,n),this.handleMouseMove=Al(Un(this,this.handleMouseMove),ro),this.throttledHandleMouseSeek=Al(Un(this,this.handleMouseSeek),ro),this.handleMouseUpHandler_=s=>this.handleMouseUp(s),this.handleMouseDownHandler_=s=>this.handleMouseDown(s),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const n=this.getChild("seekBar");if(!n)return;const s=n.getChild("playProgressBar"),i=n.getChild("mouseTimeDisplay");if(!s&&!i)return;const a=n.el(),o=kv(a);let l=Fw(a,e).x;l=Ay(l,0,1),i&&i.update(o,l),s&&s.update(o,n.getProgress())}handleMouseSeek(e){const n=this.getChild("seekBar");n&&n.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&ul(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const n=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}FV.prototype.options_={children:["seekBar"]};Be.registerComponent("ProgressControl",FV);class $V extends Wr{constructor(e,n){super(e,n),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],s=>this.handlePictureInPictureChange(s)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],s=>this.handlePictureInPictureEnabledChange(s)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){st.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in de?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof st.exitPictureInPicture=="function"&&super.show()}}$V.prototype.controlText_="Picture-in-Picture";Be.registerComponent("PictureInPictureToggle",$V);class UV extends Wr{constructor(e,n){super(e,n),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",s=>this.handleFullscreenChange(s)),st[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}UV.prototype.controlText_="Fullscreen";Be.registerComponent("FullscreenToggle",UV);const wbe=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class Cbe extends Be{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}Be.registerComponent("VolumeLevel",Cbe);class Sbe extends Be{constructor(e,n){super(e,n),this.update=Al(Un(this,this.update),ro)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,n,s,i){if(!s){const a=Jp(this.el_),o=Jp(this.player_.el()),l=e.width*n;if(!o||!a)return;const c=e.left-o.left+l,u=e.width-l+(o.right-e.right);let d=a.width/2;c<d?d+=d-c:u<d&&(d=u),d<0?d=0:d>a.width&&(d=a.width),this.el_.style.right=`-${d}px`}this.write(`${i}%`)}write(e){vd(this.el_,e)}updateVolume(e,n,s,i,a){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,n,s,i.toFixed(0)),a&&a()})}}Be.registerComponent("VolumeLevelTooltip",Sbe);class VV extends Be{constructor(e,n){super(e,n),this.update=Al(Un(this,this.update),ro)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n,s){const i=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,s,i,()=>{s?this.el_.style.bottom=`${e.height*n}px`:this.el_.style.left=`${e.width*n}px`})}}VV.prototype.options_={children:["volumeLevelTooltip"]};Be.registerComponent("MouseVolumeLevelDisplay",VV);class Ww extends uA{constructor(e,n){super(e,n),this.on("slideractive",s=>this.updateLastVolume_(s)),this.on(e,"volumechange",s=>this.updateARIAAttributes(s)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Av(e)&&super.handleMouseDown(e)}handleMouseMove(e){const n=this.getChild("mouseVolumeLevelDisplay");if(n){const s=this.el(),i=Jp(s),a=this.vertical();let o=Fw(s,e);o=a?o.y:o.x,o=Ay(o,0,1),n.update(i,o,a)}Av(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}Ww.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!gi&&!Nl&&Ww.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Ww.prototype.playerEvent="volumechange";Be.registerComponent("VolumeBar",Ww);class zV extends Be{constructor(e,n={}){n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||Qp(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),super(e,n),wbe(this,e),this.throttledHandleMouseMove=Al(Un(this,this.handleMouseMove),ro),this.handleMouseUpHandler_=s=>this.handleMouseUp(s),this.on("mousedown",s=>this.handleMouseDown(s)),this.on("touchstart",s=>this.handleMouseDown(s)),this.on("mousemove",s=>this.handleMouseMove(s)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}zV.prototype.options_={children:["volumeBar"]};Be.registerComponent("VolumeControl",zV);const jbe=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class HV extends Wr{constructor(e,n){super(e,n),jbe(this,e),this.on(e,["loadstart","volumechange"],s=>this.update(s))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.volume(),s=this.player_.lastVolume_();if(n===0){const i=s<.1?.1:s;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let n=3;this.setIcon("volume-high"),gi&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),n=0):e<.33?(this.setIcon("volume-low"),n=1):e<.67&&(this.setIcon("volume-medium"),n=2),Lw(this.el_,[0,1,2,3].reduce((s,i)=>s+`${i?" ":""}vjs-vol-${i}`,"")),ph(this.el_,`vjs-vol-${n}`)}updateControlText_(){const n=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)}}HV.prototype.controlText_="Mute";Be.registerComponent("MuteToggle",HV);class qV extends Be{constructor(e,n={}){typeof n.inline<"u"?n.inline=n.inline:n.inline=!0,(typeof n.volumeControl>"u"||Qp(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),super(e,n),this.handleKeyPressHandler_=s=>this.handleKeyPress(s),this.on(e,["loadstart"],s=>this.volumePanelState_(s)),this.on(this.muteToggle,"keyup",s=>this.handleKeyPress(s)),this.on(this.volumeControl,"keyup",s=>this.handleVolumeControlKeyUp(s)),this.on("keydown",s=>this.handleKeyPress(s)),this.on("mouseover",s=>this.handleMouseOver(s)),this.on("mouseout",s=>this.handleMouseOut(s)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),ja(st,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),qr(st,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}qV.prototype.options_={children:["muteToggle","volumeControl"]};Be.registerComponent("VolumePanel",qV);class WV extends Wr{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const n=this.player_.currentTime(),s=this.player_.liveTracker,i=s&&s.isLive()?s.seekableEnd():this.player_.duration();let a;n+this.skipTime<=i?a=n+this.skipTime:a=i,this.player_.currentTime(a)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}WV.prototype.controlText_="Skip Forward";Be.registerComponent("SkipForward",WV);class GV extends Wr{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.currentTime(),s=this.player_.liveTracker,i=s&&s.isLive()&&s.seekableStart();let a;i&&n-this.skipTime<=i?a=i:n>=this.skipTime?a=n-this.skipTime:a=0,this.player_.currentTime(a)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}GV.prototype.controlText_="Skip Backward";Be.registerComponent("SkipBackward",GV);class YV extends Be{constructor(e,n){super(e,n),n&&(this.menuButton_=n.menuButton),this.focusedChild_=-1,this.on("keydown",s=>this.handleKeyDown(s)),this.boundHandleBlur_=s=>this.handleBlur(s),this.boundHandleTapClick_=s=>this.handleTapClick(s)}addEventListenerForItem(e){e instanceof Be&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Be&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const n=this.addChild(e);n&&this.addEventListenerForItem(n)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=kt(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const n=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),ja(n,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),n}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const n=e.relatedTarget||st.activeElement;if(!this.children().some(s=>s.el()===n)){const s=this.menuButton_;s&&s.buttonPressed_&&n!==s.el().firstChild&&s.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const n=this.children();if(!Array.isArray(n))return;const s=n.filter(i=>i.el()===e.target)[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())}}Be.registerComponent("Menu",YV);class fA extends Be{constructor(e,n={}){super(e,n),this.menuButton_=new Wr(e,n),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const s=Wr.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+s,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=a=>this.handleClick(a);this.handleMenuKeyUp_=a=>this.handleMenuKeyUp(a),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",a=>this.handleKeyDown(a)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),ja(st,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",a=>this.handleMouseLeave(a)),this.on("keydown",a=>this.handleSubmenuKeyDown(a))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new YV(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const n=kt("li",{className:"vjs-menu-title",textContent:js(this.options_.title),tabIndex:-1}),s=new Be(this.player_,{el:n});e.addItem(s)}if(this.items=this.createItems(),this.items)for(let n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const n=Wr.prototype.buildCSSClass();return`vjs-menu-button ${e} ${n} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,n=this.menuButton_.el()){return this.menuButton_.controlText(e,n)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),qr(st,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Esc"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Esc"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Esc"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),gi&&iV())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Be.registerComponent("MenuButton",fA);class pA extends fA{constructor(e,n){const s=n.tracks;if(super(e,n),this.items.length<=1&&this.hide(),!s)return;const i=Un(this,this.update);s.addEventListener("removetrack",i),s.addEventListener("addtrack",i),s.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",function(){s.removeEventListener("removetrack",i),s.removeEventListener("addtrack",i),s.removeEventListener("labelchange",i)})}}Be.registerComponent("TrackButton",pA);class Dy extends qw{constructor(e,n){super(e,n),this.selectable=n.selectable,this.isSelected_=n.selected||!1,this.multiSelectable=n.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,n,s){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},n),s),a=kt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?i.appendChild(a):i.replaceChild(a,i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Be.registerComponent("MenuItem",Dy);class Py extends Dy{constructor(e,n){const s=n.track,i=e.textTracks();n.label=s.label||s.language||"Unknown",n.selected=s.mode==="showing",super(e,n),this.track=s,this.kinds=(n.kinds||[n.kind||this.track.kind]).filter(Boolean);const a=(...l)=>{this.handleTracksChange.apply(this,l)},o=(...l)=>{this.handleSelectedLanguageChange.apply(this,l)};if(e.on(["loadstart","texttrackchange"],a),i.addEventListener("change",a),i.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],a),i.removeEventListener("change",a),i.removeEventListener("selectedlanguagechange",o)}),i.onchange===void 0){let l;this.on(["tap","click"],function(){if(typeof de.Event!="object")try{l=new de.Event("change")}catch{}l||(l=st.createEvent("Event"),l.initEvent("change",!0,!0)),i.dispatchEvent(l)})}this.handleTracksChange()}handleClick(e){const n=this.track,s=this.player_.textTracks();if(super.handleClick(e),!!s)for(let i=0;i<s.length;i++){const a=s[i];this.kinds.indexOf(a.kind)!==-1&&(a===n?a.mode!=="showing"&&(a.mode="showing"):a.mode!=="disabled"&&(a.mode="disabled"))}}handleTracksChange(e){const n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Be.registerComponent("TextTrackMenuItem",Py);class XV extends Py{constructor(e,n){n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,super(e,n)}handleTracksChange(e){const n=this.player().textTracks();let s=!0;for(let i=0,a=n.length;i<a;i++){const o=n[i];if(this.options_.kinds.indexOf(o.kind)>-1&&o.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)}handleSelectedLanguageChange(e){const n=this.player().textTracks();let s=!0;for(let i=0,a=n.length;i<a;i++){const o=n[i];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&o.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Be.registerComponent("OffTextTrackMenuItem",XV);class Rm extends pA{constructor(e,n={}){n.tracks=e.textTracks(),super(e,n)}createItems(e=[],n=Py){let s;this.label_&&(s=`${this.label_} off`),e.push(new XV(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let a=0;a<i.length;a++){const o=i[a];if(this.kinds_.indexOf(o.kind)>-1){const l=new n(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});l.addClass(`vjs-${o.kind}-menu-item`),e.push(l)}}return e}}Be.registerComponent("TextTrackButton",Rm);class KV extends Dy{constructor(e,n){const s=n.track,i=n.cue,a=e.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=i.text,n.selected=i.startTime<=a&&a<i.endTime,super(e,n),this.track=s,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Be.registerComponent("ChaptersTrackMenuItem",KV);class mA extends Rm{constructor(e,n,s){super(e,n,s),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(i=>{i.selected(this.track_.activeCues[0]===i.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),super.update()):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let n=e.length-1;n>=0;n--){const s=e[n];if(s.kind===this.kind_)return s}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(js(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const n=this.track_.cues;if(!n)return e;for(let s=0,i=n.length;s<i;s++){const a=n[s],o=new KV(this.player_,{track:this.track_,cue:a});e.push(o)}return e}}mA.prototype.kind_="chapters";mA.prototype.controlText_="Chapters";Be.registerComponent("ChaptersButton",mA);class gA extends Rm{constructor(e,n,s){super(e,n,s),this.setIcon("audio-description");const i=e.textTracks(),a=Un(this,this.handleTracksChange);i.addEventListener("change",a),this.on("dispose",function(){i.removeEventListener("change",a)})}handleTracksChange(e){const n=this.player().textTracks();let s=!1;for(let i=0,a=n.length;i<a;i++){const o=n[i];if(o.kind!==this.kind_&&o.mode==="showing"){s=!0;break}}s?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}gA.prototype.kind_="descriptions";gA.prototype.controlText_="Descriptions";Be.registerComponent("DescriptionsButton",gA);class vA extends Rm{constructor(e,n,s){super(e,n,s),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}vA.prototype.kind_="subtitles";vA.prototype.controlText_="Subtitles";Be.registerComponent("SubtitlesButton",vA);class yA extends Py{constructor(e,n){n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",super(e,n),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+n.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Be.registerComponent("CaptionSettingsMenuItem",yA);class xA extends Rm{constructor(e,n,s){super(e,n,s),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new yA(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}xA.prototype.kind_="captions";xA.prototype.controlText_="Captions";Be.registerComponent("CaptionsButton",xA);class QV extends Py{createEl(e,n,s){const i=super.createEl(e,n,s),a=i.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",i):a.appendChild(kt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(kt("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}Be.registerComponent("SubsCapsMenuItem",QV);class bA extends Rm{constructor(e,n={}){super(e,n),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(js(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new yA(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,QV),e}}bA.prototype.kinds_=["captions","subtitles"];bA.prototype.controlText_="Subtitles";Be.registerComponent("SubsCapsButton",bA);class ZV extends Dy{constructor(e,n){const s=n.track,i=e.audioTracks();n.label=s.label||s.language||"Unknown",n.selected=s.enabled,super(e,n),this.track=s,this.addClass(`vjs-${s.kind}-menu-item`);const a=(...o)=>{this.handleTracksChange.apply(this,o)};i.addEventListener("change",a),this.on("dispose",()=>{i.removeEventListener("change",a)})}createEl(e,n,s){const i=super.createEl(e,n,s),a=i.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(a.appendChild(kt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(kt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const n=this.player_.audioTracks();for(let s=0;s<n.length;s++){const i=n[s];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}Be.registerComponent("AudioTrackMenuItem",ZV);class JV extends pA{constructor(e,n={}){n.tracks=e.audioTracks(),super(e,n),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const n=this.player_.audioTracks();for(let s=0;s<n.length;s++){const i=n[s];e.push(new ZV(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e}}JV.prototype.controlText_="Audio Track";Be.registerComponent("AudioTrackButton",JV);class _A extends Dy{constructor(e,n){const s=n.rate,i=parseFloat(s,10);n.label=s,n.selected=i===e.playbackRate(),n.selectable=!0,n.multiSelectable=!1,super(e,n),this.label=s,this.rate=i,this.on(e,"ratechange",a=>this.update(a))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}_A.prototype.contentElType="button";Be.registerComponent("PlaybackRateMenuItem",_A);class ez extends fA{constructor(e,n){super(e,n),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",s=>this.updateVisibility(s)),this.on(e,"ratechange",s=>this.updateLabel(s)),this.on(e,"playbackrateschange",s=>this.handlePlaybackRateschange(s))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=kt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),n=[];for(let s=e.length-1;s>=0;s--)n.push(new _A(this.player(),{rate:e[s]+"x"}));return n}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}ez.prototype.controlText_="Playback Rate";Be.registerComponent("PlaybackRateMenuButton",ez);class tz extends Be{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",n={},s={}){return n.className||(n.className=this.buildCSSClass()),super.createEl(e,n,s)}}Be.registerComponent("Spacer",tz);class Tbe extends tz{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}Be.registerComponent("CustomControlSpacer",Tbe);class nz extends Be{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}nz.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Be.registerComponent("ControlBar",nz);class sz extends Mm{constructor(e,n){super(e,n),this.on(e,"error",s=>{this.open(s)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}sz.prototype.options_=Object.assign({},Mm.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Be.registerComponent("ErrorDisplay",sz);class rz extends Be{constructor(e,n={}){super(e,n),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),kt("select",{id:this.options_.id},{},this.options_.SelectOptions.map(n=>{const s=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${so()}`)+"-"+n[1].replace(/\W+/g,""),i=kt("option",{id:s,value:this.localize(n[0]),textContent:n[1]});return i.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${s}`),i}))}}Be.registerComponent("TextTrackSelect",rz);class gh extends Be{constructor(e,n={}){super(e,n);const s=kt("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(s);const i=this.options_.selects;for(const a of i){const o=this.options_.selectConfigs[a],l=o.className,c=o.id.replace("%s",this.options_.id_);let u=null;const d=`vjs_select_${so()}`;if(this.options_.type==="colors"){u=kt("span",{className:l});const f=kt("label",{id:c,className:"vjs-label",textContent:o.label});f.setAttribute("for",d),u.appendChild(f)}const h=new rz(e,{SelectOptions:o.options,legendId:this.options_.legendId,id:d,labelId:c});this.addChild(h),this.options_.type==="colors"&&(u.appendChild(h.el()),this.el().appendChild(u))}}createEl(){return kt("fieldset",{className:this.options_.className})}}Be.registerComponent("TextTrackFieldset",gh);class iz extends Be{constructor(e,n={}){super(e,n);const s=this.options_.textTrackComponentid,i=new gh(e,{id_:s,legendId:`captions-text-legend-${s}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(i);const a=new gh(e,{id_:s,legendId:`captions-background-${s}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a);const o=new gh(e,{id_:s,legendId:`captions-window-${s}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o)}createEl(){return kt("div",{className:"vjs-track-settings-colors"})}}Be.registerComponent("TextTrackSettingsColors",iz);class az extends Be{constructor(e,n={}){super(e,n);const s=this.options_.textTrackComponentid,i=new gh(e,{id_:s,legendId:`captions-font-size-${s}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(i);const a=new gh(e,{id_:s,legendId:`captions-edge-style-${s}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a);const o=new gh(e,{id_:s,legendId:`captions-font-family-${s}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o)}createEl(){return kt("div",{className:"vjs-track-settings-font"})}}Be.registerComponent("TextTrackSettingsFont",az);class oz extends Be{constructor(e,n={}){super(e,n);const s=this.localize("restore all settings to the default values"),i=new Wr(e,{controlText:s,className:"vjs-default-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=this.localize("Reset"),this.addChild(i);const a=new Wr(e,{controlText:s,className:"vjs-done-button"});a.el().classList.remove("vjs-control","vjs-button"),a.el().textContent=this.localize("Done"),this.addChild(a)}createEl(){return kt("div",{className:"vjs-track-settings-controls"})}}Be.registerComponent("TrackSettingsControls",oz);const xj="vjs-text-track-settings",UM=["#000","Black"],VM=["#00F","Blue"],zM=["#0FF","Cyan"],HM=["#0F0","Green"],qM=["#F0F","Magenta"],WM=["#F00","Red"],GM=["#FFF","White"],YM=["#FF0","Yellow"],bj=["1","Opaque"],_j=["0.5","Semi-Transparent"],XM=["0","Transparent"],vu={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[UM,GM,WM,HM,VM,YM,qM,zM],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[bj,_j,XM],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[GM,UM,WM,HM,VM,YM,qM,zM],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[bj,_j],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[XM,_j,bj],className:"vjs-window-opacity vjs-opacity"}};vu.windowColor.options=vu.backgroundColor.options;function lz(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function Ebe(t,e){const n=t.options[t.options.selectedIndex].value;return lz(n,e)}function Nbe(t,e,n){if(e){for(let s=0;s<t.options.length;s++)if(lz(t.options[s].value,n)===e){t.selectedIndex=s;break}}}class kbe extends Mm{constructor(e,n){n.temporary=!1,super(e,n),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=kt("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),n.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const n=new iz(e,{textTrackComponentid:this.id_,selectConfigs:vu,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(n);const s=new az(e,{textTrackComponentid:this.id_,selectConfigs:vu,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(s);const i=new oz(e);this.addChild(i)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),fp(vu,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return ZU(vu,(e,n,s)=>{const i=Ebe(this.$(n.selector),n.parser);return i!==void 0&&(e[s]=i),e},{})}setValues(e){fp(vu,(n,s)=>{Nbe(this.$(n.selector),e[s],n.parser)})}setDefaults(){fp(vu,e=>{const n=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=n})}restoreSettings(){let e;try{e=JSON.parse(de.localStorage.getItem(xj))}catch(n){Jt.warn(n)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?de.localStorage.setItem(xj,JSON.stringify(e)):de.localStorage.removeItem(xj)}catch(n){Jt.warn(n)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Be.registerComponent("TextTrackSettings",kbe);class Abe extends Be{constructor(e,n){let s=n.ResizeObserver||de.ResizeObserver;n.ResizeObserver===null&&(s=!1);const i=Bn({createEl:!s,reportTouchActivity:!1},n);super(e,i),this.ResizeObserver=n.ResizeObserver||de.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=_V(()=>{this.resizeHandler()},100,!1,this),s?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const a=this.debouncedHandler_;let o=this.unloadListener_=function(){qr(this,"resize",a),qr(this,"unload",o),o=null};ja(this.el_.contentWindow,"unload",o),ja(this.el_.contentWindow,"resize",a)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Be.registerComponent("ResizeManager",Abe);const Dbe={trackingThreshold:20,liveTolerance:15};class Pbe extends Be{constructor(e,n){const s=Bn(Dbe,n,{createEl:!1});super(e,s),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=i=>this.handlePlay(i),this.handleFirstTimeupdate_=i=>this.handleFirstTimeupdate(i),this.handleSeeked_=i=>this.handleSeeked(i),this.seekToLiveEdge_=i=>this.seekToLiveEdge(i),this.reset_(),this.on(this.player_,"durationchange",i=>this.handleDurationchange(i)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const n=Number(de.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+s;const i=this.liveCurrentTime(),a=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-a)>this.options_.liveTolerance;(!this.timeupdateSeen_||i===1/0)&&(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,ro),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),n=[];let s=e?e.length:0;for(;s--;)n.push(e.end(s));return n.length?n.sort()[n.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),n=[];let s=e?e.length:0;for(;s--;)n.push(e.start(s));return n.length?n.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Be.registerComponent("LiveTracker",Pbe);class Ibe extends Be{constructor(e,n){super(e,n),this.on("statechanged",s=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:kt("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${so()}`}),description:kt("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${so()}`})},kt("div",{className:"vjs-title-bar"},{},JU(this.els))}updateDom_(){const e=this.player_.tech_,n=e&&e.el_,s={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const a=this.state[i],o=this.els[i],l=s[i];$w(o),a&&vd(o,a),n&&(n.removeAttribute(l),a&&n.setAttribute(l,o.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,n=e&&e.el_;n&&(n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Be.registerComponent("TitleBar",Ibe);const Mbe={initialDisplay:4e3,position:[],takeFocus:!1};class Obe extends Wr{constructor(e,n){n=Bn(Mbe,n),super(e,n),this.controlText(n.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],s=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=kt("button",{},{type:"button",class:this.buildCSSClass()},kt("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Be.registerComponent("TransientButton",Obe);const vN=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const n=t.$$("source"),s=[];let i="";if(!n.length)return!1;for(let a=0;a<n.length;a++){const o=n[a].src;o&&s.indexOf(o)===-1&&s.push(o)}return s.length?(s.length===1&&(i=s[0]),t.triggerSourceset(i),!0):!1},Rbe=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=st.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const n=st.createDocumentFragment();for(;e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",de.Element.prototype.appendChild.call(this,n),this.innerHTML}}),cz=(t,e)=>{let n={};for(let s=0;s<t.length&&(n=Object.getOwnPropertyDescriptor(t[s],e),!(n&&n.set&&n.get));s++);return n.enumerable=!0,n.configurable=!0,n},Lbe=t=>cz([t.el(),de.HTMLMediaElement.prototype,de.Element.prototype,Rbe],"innerHTML"),KM=function(t){const e=t.el();if(e.resetSourceWatch_)return;const n={},s=Lbe(t),i=a=>(...o)=>{const l=a.apply(e,o);return vN(t),l};["append","appendChild","insertAdjacentHTML"].forEach(a=>{e[a]&&(n[a]=e[a],e[a]=i(n[a]))}),Object.defineProperty(e,"innerHTML",Bn(s,{set:i(s.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(n).forEach(a=>{e[a]=n[a]}),Object.defineProperty(e,"innerHTML",s)},t.one("sourceset",e.resetSourceWatch_)},Bbe=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?DV(de.Element.prototype.getAttribute.call(this,"src")):""},set(t){return de.Element.prototype.setAttribute.call(this,"src",t),t}}),Fbe=t=>cz([t.el(),de.HTMLMediaElement.prototype,Bbe],"src"),$be=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const n=Fbe(t),s=e.setAttribute,i=e.load;Object.defineProperty(e,"src",Bn(n,{set:a=>{const o=n.set.call(e,a);return t.triggerSourceset(e.src),o}})),e.setAttribute=(a,o)=>{const l=s.call(e,a,o);return/src/i.test(a)&&t.triggerSourceset(e.src),l},e.load=()=>{const a=i.call(e);return vN(t)||(t.triggerSourceset(""),KM(t)),a},e.currentSrc?t.triggerSourceset(e.currentSrc):vN(t)||KM(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=i,e.setAttribute=s,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}};class mt extends Lt{constructor(e,n){super(e,n);const s=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",s&&(this.el_.currentSrc!==s.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(s):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const a=this.el_.childNodes;let o=a.length;const l=[];for(;o--;){const c=a[o];c.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack(c.track),this.textTracks().addTrack(c.track),!i&&!this.el_.hasAttribute("crossorigin")&&Hw(c.src)&&(i=!0)):l.push(c))}for(let c=0;c<l.length;c++)this.el_.removeChild(l[c])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&Jt.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Nv||Ow)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),mt.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){$be(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let n;const s=()=>{n=[];for(let a=0;a<e.length;a++){const o=e[a];o.kind==="metadata"&&n.push({track:o,storedMode:o.mode})}};s(),e.addEventListener("change",s),this.on("dispose",()=>e.removeEventListener("change",s));const i=()=>{for(let a=0;a<n.length;a++){const o=n[a];o.track.mode==="disabled"&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",s),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",s),e.addEventListener("change",s),e.removeEventListener("change",i)})}overrideNative_(e,n){if(n!==this[`featuresNative${e}Tracks`])return;const s=e.toLowerCase();this[`${s}TracksListeners_`]&&Object.keys(this[`${s}TracksListeners_`]).forEach(i=>{this.el()[`${s}Tracks`].removeEventListener(i,this[`${s}TracksListeners_`][i])}),this[`featuresNative${e}Tracks`]=!n,this[`${s}TracksListeners_`]=null,this.proxyNativeTracksForType_(s)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const n=Ka[e],s=this.el()[n.getterName],i=this[n.getterName]();if(!this[`featuresNative${n.capitalName}Tracks`]||!s||!s.addEventListener)return;const a={change:l=>{const c={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(c),e==="text"&&this[nm.remoteText.getterName]().trigger(c)},addtrack(l){i.addTrack(l.track)},removetrack(l){i.removeTrack(l.track)}},o=function(){const l=[];for(let c=0;c<i.length;c++){let u=!1;for(let d=0;d<s.length;d++)if(s[d]===i[c]){u=!0;break}u||l.push(i[c])}for(;l.length;)i.removeTrack(l.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach(l=>{const c=a[l];s.addEventListener(l,c),this.on("dispose",u=>s.removeEventListener(l,c))}),this.on("loadstart",o),this.on("dispose",l=>this.off("loadstart",o))}proxyNativeTracks_(){Ka.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const s=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(s,e),mt.disposeMediaElement(e),e=s}else{e=st.createElement("video");const s=this.options_.tag&&gu(this.options_.tag),i=Bn({},s);(!Nv||this.options_.nativeControlsForTouch!==!0)&&delete i.controls,lV(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Zp(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const n=["loop","muted","playsinline","autoplay"];for(let s=0;s<n.length;s++){const i=n[s],a=this.options_[i];typeof a<"u"&&(a?Zp(e,i,i):Bw(e,i),e[i]=a)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let s=!1;const i=function(){s=!0};this.on("loadstart",i);const a=function(){s||this.trigger("loadstart")};this.on("loadedmetadata",a),this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",a),s||this.trigger("loadstart")});return}const n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(s){this.trigger(s)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Rw?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){Jt(n,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Nl&&kl&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",()=>{this.off("webkitbeginfullscreen",n),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)ul(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}reset(){mt.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,n,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,s):super.addTextTrack(e,n,s)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const n=st.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n}addRemoteTextTrack(e,n){const s=super.addRemoteTextTrack(e,n);return this.featuresNativeTextTracks&&this.el().appendChild(s),s}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const n=this.$$("track");let s=n.length;for(;s--;)(e===n[s]||e===n[s].track)&&this.el().removeChild(n[s])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),de.performance&&(e.creationTime=de.performance.now()),e}}Pw(mt,"TEST_VID",function(){if(!Dm())return;const t=st.createElement("video"),e=st.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t});mt.isSupported=function(){try{mt.TEST_VID.volume=.5}catch{return!1}return!!(mt.TEST_VID&&mt.TEST_VID.canPlayType)};mt.canPlayType=function(t){return mt.TEST_VID.canPlayType(t)};mt.canPlaySource=function(t,e){return mt.canPlayType(t.type)};mt.canControlVolume=function(){try{const t=mt.TEST_VID.volume;mt.TEST_VID.volume=t/2+.1;const e=t!==mt.TEST_VID.volume;return e&&gi?(de.setTimeout(()=>{mt&&mt.prototype&&(mt.prototype.featuresVolumeControl=t!==mt.TEST_VID.volume)}),!1):e}catch{return!1}};mt.canMuteVolume=function(){try{const t=mt.TEST_VID.muted;return mt.TEST_VID.muted=!t,mt.TEST_VID.muted?Zp(mt.TEST_VID,"muted","muted"):Bw(mt.TEST_VID,"muted","muted"),t!==mt.TEST_VID.muted}catch{return!1}};mt.canControlPlaybackRate=function(){if(Nl&&kl&&Iw<58)return!1;try{const t=mt.TEST_VID.playbackRate;return mt.TEST_VID.playbackRate=t/2+.1,t!==mt.TEST_VID.playbackRate}catch{return!1}};mt.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(st.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(st.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(st.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(st.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};mt.supportsNativeTextTracks=function(){return Rw||gi&&kl};mt.supportsNativeVideoTracks=function(){return!!(mt.TEST_VID&&mt.TEST_VID.videoTracks)};mt.supportsNativeAudioTracks=function(){return!!(mt.TEST_VID&&mt.TEST_VID.audioTracks)};mt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){Pw(mt.prototype,t,()=>mt[e](),!0)});mt.prototype.featuresVolumeControl=mt.canControlVolume();mt.prototype.movingMediaElementInDOM=!gi;mt.prototype.featuresFullscreenResize=!0;mt.prototype.featuresProgressEvents=!0;mt.prototype.featuresTimeupdateEvents=!0;mt.prototype.featuresVideoFrameCallback=!!(mt.TEST_VID&&mt.TEST_VID.requestVideoFrameCallback);mt.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};mt.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let n=e.length;for(;n--;)t.removeChild(e[n]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){mt.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){mt.prototype["set"+js(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){mt.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){mt.prototype["set"+js(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){mt.prototype[t]=function(){return this.el_[t]()}});Lt.withSourceHandlers(mt);mt.nativeSourceHandler={};mt.nativeSourceHandler.canPlayType=function(t){try{return mt.TEST_VID.canPlayType(t)}catch{return""}};mt.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return mt.nativeSourceHandler.canPlayType(t.type);if(t.src){const n=iA(t.src);return mt.nativeSourceHandler.canPlayType(`video/${n}`)}return""};mt.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)};mt.nativeSourceHandler.dispose=function(){};mt.registerSourceHandler(mt.nativeSourceHandler);Lt.registerTech("Html5",mt);const uz=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],wj={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},yN=["tiny","xsmall","small","medium","large","xlarge","huge"],Q1={};yN.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;Q1[t]=`vjs-layout-${e}`});const Ube={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Wn extends Be{constructor(e,n,s){if(e.id=e.id||n.id||`vjs_video_${so()}`,n=Object.assign(Wn.getTagSettings(e),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language){const o=e.closest("[lang]");o&&(n.language=o.getAttribute("lang"))}if(super(null,n,s),this.boundDocumentFullscreenChange_=o=>this.documentFullscreenChange_(o),this.boundFullWindowOnEscKey_=o=>this.fullWindowOnEscKey(o),this.boundUpdateStyleEl_=o=>this.updateStyleEl_(o),this.boundApplyInitTime_=o=>this.applyInitTime_(o),this.boundUpdateCurrentBreakpoint_=o=>this.updateCurrentBreakpoint_(o),this.boundHandleTechClick_=o=>this.handleTechClick_(o),this.boundHandleTechDoubleClick_=o=>this.handleTechDoubleClick_(o),this.boundHandleTechTouchStart_=o=>this.handleTechTouchStart_(o),this.boundHandleTechTouchMove_=o=>this.handleTechTouchMove_(o),this.boundHandleTechTouchEnd_=o=>this.handleTechTouchEnd_(o),this.boundHandleTechTap_=o=>this.handleTechTap_(o),this.boundUpdatePlayerHeightOnAudioOnlyMode_=o=>this.updatePlayerHeightOnAudioOnlyMode_(o),this.isFullscreen_=!1,this.log=KU(this.id_),this.fsApi_=x_,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&gu(e),this.language(this.options_.language),n.languages){const o={};Object.getOwnPropertyNames(n.languages).forEach(function(l){o[l.toLowerCase()]=n.languages[l]}),this.languages_=o}else this.languages_=Wn.prototype.options_.languages;this.resetCache_(),this.poster_=n.poster||"",this.controls_=!!n.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(o=>{if(typeof this[o]!="function")throw new Error(`plugin "${o}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),tA(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(ja(st,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=Bn(this.options_);if(n.plugins&&Object.keys(n.plugins).forEach(o=>{this[o](n.plugins[o])}),n.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(n.playbackRates),n.experimentalSvgIcons){const l=new de.DOMParser().parseFromString(ube,"image/svg+xml");if(l.querySelector("parsererror"))Jt.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=l.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),n.spatialNavigation&&n.spatialNavigation.enabled&&(this.spatialNavigation=new dbe(this),this.addClass("vjs-spatial-navigation-enabled")),Nv&&this.addClass("vjs-touch-enabled"),gi||this.addClass("vjs-workinghover"),Wn.players[this.id_]=this;const a=oN.split(".")[0];this.addClass(`vjs-v${a}`),this.userActive(!0),this.reportUserActivity(),this.one("play",o=>this.listenForUserActivity_(o)),this.on("keydown",o=>this.handleKeyDown(o)),this.on("languagechange",o=>this.handleLanguagechange(o)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),qr(st,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),qr(st,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Wn.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),abe(this),ui.names.forEach(e=>{const n=ui[e],s=this[n.getterName]();s&&s.off&&s.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,n,s=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const i=this.tag.tagName.toLowerCase()==="video-js";s?n=this.el_=e.parentNode:i||(n=this.el_=super.createEl("div"));const a=gu(e);if(i){for(n=this.el_=e,e=this.tag=st.createElement("video");n.children.length;)e.appendChild(n.firstChild);N0(n,"video-js")||ph(n,"video-js"),n.appendChild(e),s=this.playerElIngest_=n,Object.keys(n).forEach(c=>{try{e[c]=n[c]}catch{}})}e.setAttribute("tabindex","-1"),a.tabindex="-1",kl&&Mw&&(e.setAttribute("role","application"),a.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(c){i&&c==="class"||n.setAttribute(c,a[c]),i&&e.setAttribute(c,a[c])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused");const o=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(c=>rV[c]).map(c=>"vjs-device-"+c.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...o),de.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=xV("vjs-styles-dimensions");const c=Ju(".vjs-styles-defaults"),u=Ju("head");u.insertBefore(this.styleEl_,c?c.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const l=e.getElementsByTagName("a");for(let c=0;c<l.length;c++){const u=l.item(c);ph(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!s&&e.parentNode.insertBefore(n,e),uN(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){Jt.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,n){const s=e+"_";if(n===void 0)return this[s]||0;if(n===""||n==="auto"){this[s]=void 0,this.updateStyleEl_();return}const i=parseFloat(n);if(isNaN(i)){Jt.error(`Improper value "${n}" supplied for for ${e}`);return}this[s]=i,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,bc(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),R1e(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(de.VIDEOJS_NO_DYNAMIC_STYLE===!0){const l=typeof this.width_=="number"?this.width_:this.options_.width,c=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(l>=0&&(u.width=l),c>=0&&(u.height=c));return}let e,n,s,i;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?s=this.aspectRatio_:this.videoWidth()>0?s=this.videoWidth()+":"+this.videoHeight():s="16:9";const a=s.split(":"),o=a[1]/a[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/o:e=this.videoWidth()||300,this.height_!==void 0?n=this.height_:n=e*o,/^[^a-zA-Z]/.test(this.id())?i="dimensions-"+this.id():i=this.id()+"-dimensions",this.addClass(i),bV(this.styleEl_,`
      .${i} {
        width: ${e}px;
        height: ${n}px;
      }

      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${o*100}%;
      }
    `)}loadTech_(e,n){this.tech_&&this.unloadTech_();const s=js(e),i=e.charAt(0).toLowerCase()+e.slice(1);s!=="Html5"&&this.tag&&(Lt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=s,this.isReady_=!1;let a=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(a=!1);const o={source:n,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ui.names.forEach(c=>{const u=ui[c];o[u.getterName]=this[u.privateName]}),Object.assign(o,this.options_[s]),Object.assign(o,this.options_[i]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const l=Lt.getTech(e);if(!l)throw new Error(`No Tech named '${s}' exists! '${s}' should be registered using videojs.registerTech()'`);this.tech_=new l(o),this.tech_.ready(Un(this,this.handleTechReady_),!0),kM.jsonToTextTracks(this.textTracksJson_||[],this.tech_),uz.forEach(c=>{this.on(this.tech_,c,u=>this[`handleTech${js(c)}_`](u))}),Object.keys(wj).forEach(c=>{this.on(this.tech_,c,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${wj[c]}_`].bind(this),event:u});return}this[`handleTech${wj[c]}_`](u)})}),this.on(this.tech_,"loadstart",c=>this.handleTechLoadStart_(c)),this.on(this.tech_,"sourceset",c=>this.handleTechSourceset_(c)),this.on(this.tech_,"waiting",c=>this.handleTechWaiting_(c)),this.on(this.tech_,"ended",c=>this.handleTechEnded_(c)),this.on(this.tech_,"seeking",c=>this.handleTechSeeking_(c)),this.on(this.tech_,"play",c=>this.handleTechPlay_(c)),this.on(this.tech_,"pause",c=>this.handleTechPause_(c)),this.on(this.tech_,"durationchange",c=>this.handleTechDurationChange_(c)),this.on(this.tech_,"fullscreenchange",(c,u)=>this.handleTechFullscreenChange_(c,u)),this.on(this.tech_,"fullscreenerror",(c,u)=>this.handleTechFullscreenError_(c,u)),this.on(this.tech_,"enterpictureinpicture",c=>this.handleTechEnterPictureInPicture_(c)),this.on(this.tech_,"leavepictureinpicture",c=>this.handleTechLeavePictureInPicture_(c)),this.on(this.tech_,"error",c=>this.handleTechError_(c)),this.on(this.tech_,"posterchange",c=>this.handleTechPosterChange_(c)),this.on(this.tech_,"textdata",c=>this.handleTechTextData_(c)),this.on(this.tech_,"ratechange",c=>this.handleTechRateChange_(c)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(s!=="Html5"||!this.tag)&&uN(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ui.names.forEach(e=>{const n=ui[e];this[n.privateName]=this[n.getterName]()}),this.textTracksJson_=kM.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&Jt.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":oN}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const n=()=>{const i=this.muted();this.muted(!0);const a=()=>{this.muted(i)};this.playTerminatedQueue_.push(a);const o=this.play();if(A0(o))return o.catch(l=>{throw a(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${l||""}`)})};let s;if(e==="any"&&!this.muted()?(s=this.play(),A0(s)&&(s=s.catch(n))):e==="muted"&&!this.muted()?s=n():s=this.play(),!!A0(s))return s.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let n=e,s="";typeof n!="string"&&(n=e.src,s=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!s&&(s=cbe(this,n)),this.cache_.source=Bn({},e,{src:n,type:s});const i=this.cache_.sources.filter(c=>c.src&&c.src===n),a=[],o=this.$$("source"),l=[];for(let c=0;c<o.length;c++){const u=gu(o[c]);a.push(u),u.src&&u.src===n&&l.push(u.src)}l.length&&!i.length?this.cache_.sources=a:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n}handleTechSourceset_(e){if(!this.changingSrc_){let n=a=>this.updateSourceCaches_(a);const s=this.currentSource().src,i=e.src;s&&!/^blob:/.test(s)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==s)&&(n=()=>{}),n(i),e.src||this.tech_.any(["sourceset","loadstart"],a=>{if(a.type==="sourceset")return;const o=this.techGet_("currentSrc");this.lastSource_.tech=o,this.updateSourceCaches_(o)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),n=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",n))};this.on("timeupdate",n)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?ul(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),s=>s.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const n=e.target.player;if(n&&n!==this)return;const s=this.el();let i=st[this.fsApi_.fullscreenElement]===s;!i&&s.matches&&(i=s.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,n){n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))}handleTechFullscreenError_(e,n){this.trigger("fullscreenerror",n)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,n){this.ready(function(){if(e in rbe)return nbe(this.middleware_,this.tech_,e,n);if(e in MM)return IM(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(s){throw Jt(s),s}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in sbe)return tbe(this.middleware_,this.tech_,e);if(e in MM)return IM(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw this.tech_[e]===void 0?(Jt(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,n),n):n.name==="TypeError"?(Jt(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,n),this.tech_.isReady_=!1,n):(Jt(n),n)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=ul){this.playCallbacks_.push(e);const n=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),s=!!(Rw||gi);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n){this.waitToPlay_=o=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!n&&s&&this.load();return}const i=this.techGet_("play");s&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),i===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})}runPlayCallbacks_(e){const n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(s){s(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Mo(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Mo(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=Mo(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return kV(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),n=this.duration();let s=e.end(e.length-1);return s>n&&(s=n),s}volume(e){let n;if(e!==void 0){n=Math.max(0,Math.min(1,e)),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const n=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const n=this;return new Promise((s,i)=>{function a(){n.off("fullscreenerror",l),n.off("fullscreenchange",o)}function o(){a(),s()}function l(u,d){a(),i(d)}n.one("fullscreenchange",o),n.one("fullscreenerror",l);const c=n.requestFullscreenHelper_(e);c&&(c.then(a,a),c.then(s,i))})}requestFullscreenHelper_(e){let n;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(n=e)),this.fsApi_.requestFullscreen){const s=this.el_[this.fsApi_.requestFullscreen](n);return s&&s.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),s}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((n,s)=>{function i(){e.off("fullscreenerror",o),e.off("fullscreenchange",a)}function a(){i(),n()}function o(c,u){i(),s(u)}e.one("fullscreenchange",a),e.one("fullscreenerror",o);const l=e.exitFullscreenHelper_();l&&(l.then(i,i),l.then(n,s))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=st[this.fsApi_.exitFullscreen]();return e&&ul(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=st.documentElement.style.overflow,ja(st,"keydown",this.boundFullWindowOnEscKey_),st.documentElement.style.overflow="hidden",ph(st.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,qr(st,"keydown",this.boundFullWindowOnEscKey_),st.documentElement.style.overflow=this.docOrigOverflow,Lw(st.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&de.documentPictureInPicture){const e=st.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(kt("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),de.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(n=>(gV(n),this.el_.parentNode.insertBefore(e,this.el_),n.document.body.appendChild(this.el_),n.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:n}),n.addEventListener("pagehide",s=>{const i=s.target.querySelector(".video-js");e.parentNode.replaceChild(i,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),n))}return"pictureInPictureEnabled"in st&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(de.documentPictureInPicture&&de.documentPictureInPicture.window)return de.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in st)return st.exitPictureInPicture()}handleKeyDown(e){const{userActions:n}=this.options_;!n||!n.hotkeys||(i=>{const a=i.tagName.toLowerCase();if(i.isContentEditable)return!0;const o=["button","checkbox","hidden","radio","reset","submit"];return a==="input"?o.indexOf(i.type)===-1:["textarea"].indexOf(a)!==-1})(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const n=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:s=o=>e.key.toLowerCase()==="f",muteKey:i=o=>e.key.toLowerCase()==="m",playPauseKey:a=o=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=n;if(s.call(this,e)){e.preventDefault(),e.stopPropagation();const o=Be.getComponent("FullscreenToggle");st[this.fsApi_.fullscreenEnabled]!==!1&&o.prototype.handleClick.call(this,e)}else i.call(this,e)?(e.preventDefault(),e.stopPropagation(),Be.getComponent("MuteToggle").prototype.handleClick.call(this,e)):a.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Be.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let n;for(let s=0,i=this.options_.techOrder;s<i.length;s++){const a=i[s];let o=Lt.getTech(a);if(o||(o=Be.getComponent(a)),!o){Jt.error(`The "${a}" tech is undefined. Skipped browser support check for that tech.`);continue}if(o.isSupported()&&(n=o.canPlayType(e),n))return n}return""}selectSource(e){const n=this.options_.techOrder.map(l=>[l,Lt.getTech(l)]).filter(([l,c])=>c?c.isSupported():(Jt.error(`The "${l}" tech is undefined. Skipped browser support check for that tech.`),!1)),s=function(l,c,u){let d;return l.some(h=>c.some(f=>{if(d=u(h,f),d)return!0})),d};let i;const a=l=>(c,u)=>l(u,c),o=([l,c],u)=>{if(c.canPlaySource(u,this.options_[l.toLowerCase()]))return{source:u,tech:l}};return this.options_.sourceOrder?i=s(e,n,a(o)):i=s(n,e,o),i||!1}handleSrc_(e,n){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const s=MV(e);if(!s.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=s),this.updateSourceCaches_(s[0]),J1e(this,s[0],(i,a)=>{if(this.middleware_=a,n||(this.cache_.sources=s),this.updateSourceCaches_(i),this.src_(i)){if(s.length>1)return this.handleSrc_(s.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}ebe(a,this.tech_)}),s.length>1){const i=()=>{this.error(null),this.handleSrc_(s.slice(1),!0)},a=()=>{this.off("error",i)};this.one("error",i),this.one("playing",a),this.resetRetryOnError_=()=>{this.off("error",i),this.off("playing",a)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const n=this.selectSource([e]);return n?jV(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();ul(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),bc(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:n,progressControl:s,remainingTimeDisplay:i}=this.controlBar||{},{seekBar:a}=s||{};e&&e.updateContent(),n&&n.updateContent(),i&&i.updateContent(),a&&(a.update(),a.loadProgressBar&&a.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),n=[];return Object.keys(e).length!==0&&n.push(e),this.cache_.sources||n}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let n;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),n=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Zu("beforeerror").forEach(n=>{const s=n(this,e);if(!(El(s)&&!Array.isArray(s)||typeof s=="string"||typeof s=="number"||s===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=s}),this.options_.suppressNotSupportedError&&e&&e.code===4){const n=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),this.one("loadstart",function(){this.off(["click","touchstart"],n)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new gs(e),this.addClass("vjs-error"),Jt.error(`(CODE:${this.error_.code} ${gs.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Zu("error").forEach(n=>n(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,n,s;const i=Un(this,this.reportUserActivity),a=function(h){(h.screenX!==n||h.screenY!==s)&&(n=h.screenX,s=h.screenY,i())},o=function(){i(),this.clearInterval(e),e=this.setInterval(i,250)},l=function(h){i(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",a),this.on("mouseup",l),this.on("mouseleave",l);const c=this.getChild("controlBar");c&&!gi&&!Nl&&(c.on("mouseenter",function(h){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),c.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i);let u;const d=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const h=this.options_.inactivityTimeout;h<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))};this.setInterval(d,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),n=this.getChild("ControlBar"),s=n&&n.currentHeight();e.forEach(i=>{i!==n&&i.el_&&!i.hasClass("vjs-hidden")&&(i.hide(),this.audioOnlyCache_.hiddenChildren.push(i))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=s,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(s),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,n,s){if(this.tech_)return this.tech_.addTextTrack(e,n,s)}addRemoteTextTrack(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)}removeRemoteTextTrack(e={}){let{track:n}=e;if(n||(n=e),this.tech_)return this.tech_.removeRemoteTextTrack(n)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),bc(this)&&this.trigger("languagechange"))}languages(){return Bn(Wn.prototype.options_.languages,this.languages_)}toJSON(){const e=Bn(this.options_),n=e.tracks;e.tracks=[];for(let s=0;s<n.length;s++){let i=n[s];i=Bn(i),i.player=void 0,e.tracks[s]=i}return e}createModal(e,n){n=n||{},n.content=e||"";const s=new Mm(this,n);return this.addChild(s),s.on("dispose",()=>{this.removeChild(s)}),s.open(),s}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),n=this.currentWidth();for(let s=0;s<yN.length;s++){const i=yN[s],a=this.breakpoints_[i];if(n<=a){if(e===i)return;e&&this.removeClass(Q1[e]),this.addClass(Q1[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},Ube,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const n=this.responsive_;if(e!==n)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Q1[this.breakpoint_]||""}loadMedia(e,n){if(!e||typeof e!="object")return;const s=this.crossOrigin();this.reset(),this.cache_.media=Bn(e);const{artist:i,artwork:a,description:o,poster:l,src:c,textTracks:u,title:d}=this.cache_.media;!a&&l&&(this.cache_.media.artwork=[{src:l,type:N_(l)}]),s&&this.crossOrigin(s),c&&this.src(c),l&&this.poster(l),Array.isArray(u)&&u.forEach(h=>this.addRemoteTextTrack(h,!1)),this.titleBar&&this.titleBar.update({title:d,description:o||i||""}),this.ready(n)}getMedia(){if(!this.cache_.media){const e=this.poster(),n=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),a=>({kind:a.kind,label:a.label,language:a.language,src:a.src})),i={src:n,textTracks:s};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:N_(i.poster)}]),i}return Bn(this.cache_.media)}static getTagSettings(e){const n={sources:[],tracks:[]},s=gu(e),i=s["data-setup"];if(N0(e,"vjs-fill")&&(s.fill=!0),N0(e,"vjs-fluid")&&(s.fluid=!0),i!==null){const[a,o]=mve(i||"{}");a&&Jt.error(a),Object.assign(s,o)}if(Object.assign(n,s),e.hasChildNodes()){const a=e.childNodes;for(let o=0,l=a.length;o<l;o++){const c=a[o],u=c.nodeName.toLowerCase();u==="source"?n.sources.push(gu(c)):u==="track"&&n.tracks.push(gu(c))}}return n}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(n=>typeof n=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}ui.names.forEach(function(t){const e=ui[t];Wn.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Wn.prototype.crossorigin=Wn.prototype.crossOrigin;Wn.players={};const Rg=de.navigator;Wn.prototype.options_={techOrder:Lt.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Rg&&(Rg.languages&&Rg.languages[0]||Rg.userLanguage||Rg.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1};uz.forEach(function(t){Wn.prototype[`handleTech${js(t)}_`]=function(){return this.trigger(t)}});Be.registerComponent("Player",Wn);const k_="plugin",gp="activePlugins_",Jf={},A_=t=>Jf.hasOwnProperty(t),Z1=t=>A_(t)?Jf[t]:void 0,dz=(t,e)=>{t[gp]=t[gp]||{},t[gp][e]=!0},D_=(t,e,n)=>{const s=(n?"before":"")+"pluginsetup";t.trigger(s,e),t.trigger(s+":"+e.name,e)},Vbe=function(t,e){const n=function(){D_(this,{name:t,plugin:e,instance:null},!0);const s=e.apply(this,arguments);return dz(this,t),D_(this,{name:t,plugin:e,instance:s}),s};return Object.keys(e).forEach(function(s){n[s]=e[s]}),n},QM=(t,e)=>(e.prototype.name=t,function(...n){D_(this,{name:t,plugin:e,instance:null},!0);const s=new e(this,...n);return this[t]=()=>s,D_(this,s.getEventHash()),s});class Zi{constructor(e){if(this.constructor===Zi)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),tA(this),delete this.trigger,SV(this,this.constructor.defaultState),dz(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,n={}){return Im(this.eventBusEl_,e,this.getEventHash(n))}handleStateChanged(e){}dispose(){const{name:e,player:n}=this;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[gp][e]=!1,this.player=this.state=null,n[e]=QM(e,Jf[e])}static isBasic(e){const n=typeof e=="string"?Z1(e):e;return typeof n=="function"&&!Zi.prototype.isPrototypeOf(n.prototype)}static registerPlugin(e,n){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(A_(e))Jt.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Wn.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof n!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof n}.`);return Jf[e]=n,e!==k_&&(Zi.isBasic(n)?Wn.prototype[e]=Vbe(e,n):Wn.prototype[e]=QM(e,n)),n}static deregisterPlugin(e){if(e===k_)throw new Error("Cannot de-register base plugin.");A_(e)&&(delete Jf[e],delete Wn.prototype[e])}static getPlugins(e=Object.keys(Jf)){let n;return e.forEach(s=>{const i=Z1(s);i&&(n=n||{},n[s]=i)}),n}static getPluginVersion(e){const n=Z1(e);return n&&n.VERSION||""}}Zi.getPlugin=Z1;Zi.BASE_PLUGIN_NAME=k_;Zi.registerPlugin(k_,Zi);Wn.prototype.usingPlugin=function(t){return!!this[gp]&&this[gp][t]===!0};Wn.prototype.hasPlugin=function(t){return!!A_(t)};function zbe(t,e){let n=!1;return function(...s){return n||Jt.warn(t),n=!0,e.apply(this,s)}}function Vo(t,e,n,s){return zbe(`${e} is deprecated and will be removed in ${t}.0; please use ${n} instead.`,s)}var Hbe={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const hz=t=>t.indexOf("#")===0?t.slice(1):t;function je(t,e,n){let s=je.getPlayer(t);if(s)return e&&Jt.warn(`Player "${t}" is already initialised. Options will not be applied.`),n&&s.ready(n),s;const i=typeof t=="string"?Ju("#"+hz(t)):t;if(!Pm(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o=("getRootNode"in i?i.getRootNode()instanceof de.ShadowRoot:!1)?i.getRootNode():i.ownerDocument.body;(!i.ownerDocument.defaultView||!o.contains(i))&&Jt.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Zu("beforesetup").forEach(c=>{const u=c(i,Bn(e));if(!El(u)||Array.isArray(u)){Jt.error("please return an object in beforesetup hooks");return}e=Bn(e,u)});const l=Be.getComponent("Player");return s=new l(i,e,n),Zu("setup").forEach(c=>c(s)),s}je.hooks_=uc;je.hooks=Zu;je.hook=w1e;je.hookOnce=C1e;je.removeHook=XU;if(de.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Dm()){let t=Ju(".vjs-styles-defaults");if(!t){t=xV("vjs-styles-defaults");const e=Ju("head");e&&e.insertBefore(t,e.firstChild),bV(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}hN(1,je);je.VERSION=oN;je.options=Wn.prototype.options_;je.getPlayers=()=>Wn.players;je.getPlayer=t=>{const e=Wn.players;let n;if(typeof t=="string"){const s=hz(t),i=e[s];if(i)return i;n=Ju("#"+s)}else n=t;if(Pm(n)){const{player:s,playerId:i}=n;if(s||e[i])return s||e[i]}};je.getAllPlayers=()=>Object.keys(Wn.players).map(t=>Wn.players[t]).filter(Boolean);je.players=Wn.players;je.getComponent=Be.getComponent;je.registerComponent=(t,e)=>(Lt.isTech(e)&&Jt.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Be.registerComponent.call(Be,t,e));je.getTech=Lt.getTech;je.registerTech=Lt.registerTech;je.use=Z1e;Object.defineProperty(je,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(je.middleware,"TERMINATOR",{value:E_,writeable:!1,enumerable:!0});je.browser=rV;je.obj=T1e;je.mergeOptions=Vo(9,"videojs.mergeOptions","videojs.obj.merge",Bn);je.defineLazyProperty=Vo(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Pw);je.bind=Vo(9,"videojs.bind","native Function.prototype.bind",Un);je.registerPlugin=Zi.registerPlugin;je.deregisterPlugin=Zi.deregisterPlugin;je.plugin=(t,e)=>(Jt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Zi.registerPlugin(t,e));je.getPlugins=Zi.getPlugins;je.getPlugin=Zi.getPlugin;je.getPluginVersion=Zi.getPluginVersion;je.addLanguage=function(t,e){return t=(""+t).toLowerCase(),je.options.languages=Bn(je.options.languages,{[t]:e}),je.options.languages[t]};je.log=Jt;je.createLogger=KU;je.time=U1e;je.createTimeRange=Vo(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Mo);je.createTimeRanges=Vo(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Mo);je.formatTime=Vo(9,"videojs.formatTime","videojs.time.formatTime",Mh);je.setFormatTime=Vo(9,"videojs.setFormatTime","videojs.time.setFormatTime",EV);je.resetFormatTime=Vo(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",NV);je.parseUrl=Vo(9,"videojs.parseUrl","videojs.url.parseUrl",rA);je.isCrossOrigin=Vo(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Hw);je.EventTarget=Ta;je.any=eA;je.on=ja;je.one=Vw;je.off=qr;je.trigger=Im;je.xhr=J$;je.TextTrack=ky;je.AudioTrack=PV;je.VideoTrack=IV;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{je[t]=function(){return Jt.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),vV[t].apply(null,arguments)}});je.computedStyle=Vo(9,"videojs.computedStyle","videojs.dom.computedStyle",em);je.dom=vV;je.fn=O1e;je.num=xbe;je.str=F1e;je.url=K1e;je.Error=Hbe;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class qbe{constructor(e){let n=this;return n.id=e.id,n.label=n.id,n.width=e.width,n.height=e.height,n.bitrate=e.bandwidth,n.frameRate=e.frameRate,n.enabled_=e.enabled,Object.defineProperty(n,"enabled",{get(){return n.enabled_()},set(s){n.enabled_(s)}}),n}}class P_ extends je.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let n=this.getQualityLevelById(e.id);if(n)return n;const s=this.levels_.length;return n=new qbe(e),""+s in this||Object.defineProperty(this,s,{get(){return this.levels_[s]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n}removeQualityLevel(e){let n=null;for(let s=0,i=this.length;s<i;s++)if(this[s]===e){n=this.levels_.splice(s,1)[0],this.selectedIndex_===s?this.selectedIndex_=-1:this.selectedIndex_>s&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),n}getQualityLevelById(e){for(let n=0,s=this.length;n<s;n++){const i=this[n];if(i.id===e)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}P_.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in P_.prototype.allowedEvents_)P_.prototype["on"+t]=null;var fz="4.1.0";const Wbe=function(t,e){const n=t.qualityLevels,s=new P_,i=function(){s.dispose(),t.qualityLevels=n,t.off("dispose",i)};return t.on("dispose",i),t.qualityLevels=()=>s,t.qualityLevels.VERSION=fz,s},pz=function(t){return Wbe(this,je.obj.merge({},t))};je.registerPlugin("qualityLevels",pz);pz.VERSION=fz;/*! @name @videojs/http-streaming @version 3.13.2 @license Apache-2.0 */const Bi=jw,I_=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,uo=t=>je.log.debug?je.log.debug.bind(je,"VHS:",`${t} >`):function(){};function Cn(...t){const e=je.obj||je;return(e.merge||e.mergeOptions).apply(e,t)}function kr(...t){const e=je.time||je;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}function Gbe(t){if(t.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let n=0;n<t.length;n++){const s=t.start(n),i=t.end(n);e+=`${s} --> ${i}. Duration (${i-s})
`}return e}const dl=1/30,hl=dl*3,mz=function(t,e){const n=[];let s;if(t&&t.length)for(s=0;s<t.length;s++)e(t.start(s),t.end(s))&&n.push([t.start(s),t.end(s)]);return kr(n)},ep=function(t,e){return mz(t,function(n,s){return n-hl<=e&&s+hl>=e})},qx=function(t,e){return mz(t,function(n){return n-dl>=e})},Ybe=function(t){if(t.length<2)return kr();const e=[];for(let n=1;n<t.length;n++){const s=t.end(n-1),i=t.start(n);e.push([s,i])}return kr(e)},Xbe=function(t,e){let n=null,s=null,i=0;const a=[],o=[];if(!t||!t.length||!e||!e.length)return kr();let l=t.length;for(;l--;)a.push({time:t.start(l),type:"start"}),a.push({time:t.end(l),type:"end"});for(l=e.length;l--;)a.push({time:e.start(l),type:"start"}),a.push({time:e.end(l),type:"end"});for(a.sort(function(c,u){return c.time-u.time}),l=0;l<a.length;l++)a[l].type==="start"?(i++,i===2&&(n=a[l].time)):a[l].type==="end"&&(i--,i===1&&(s=a[l].time)),n!==null&&s!==null&&(o.push([n,s]),n=null,s=null);return kr(o)},gz=t=>{const e=[];if(!t||!t.length)return"";for(let n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},Kbe=function(t,e,n=1){return((t.length?t.end(t.length-1):0)-e)/n},rh=t=>{const e=[];for(let n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e},Qbe=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let n=0;n<t.length;n++)if(t.start(n)!==e.start(n)||t.end(n)!==e.end(n))return!0;return!1},Cj=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},wA=function(t,e){let n=0;if(!t||!t.length)return n;for(let s=0;s<t.length;s++){const i=t.start(s),a=t.end(s);if(!(e>a)){if(e>i&&e<=a){n+=a-e;continue}n+=a-i}}return n},CA=(t,e)=>{if(!e.preload)return e.duration;let n=0;return(e.parts||[]).forEach(function(s){n+=s.duration}),(e.preloadHints||[]).forEach(function(s){s.type==="PART"&&(n+=t.partTargetDuration)}),n},xN=t=>(t.segments||[]).reduce((e,n,s)=>(n.parts?n.parts.forEach(function(i,a){e.push({duration:i.duration,segmentIndex:s,partIndex:a,part:i,segment:n})}):e.push({duration:n.duration,segmentIndex:s,partIndex:null,segment:n,part:null}),e),[]),vz=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},yz=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:n}=t;let s=(n||[]).reduce((i,a)=>i+(a.type==="PART"?1:0),0);return s+=e&&e.length?e.length:0,s},xz=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const n=vz(e).length>0;return n&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:n&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},Zbe=function(t,e){let n=0,s=e-t.mediaSequence,i=t.segments[s];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;s--;){if(i=t.segments[s],typeof i.end<"u")return{result:n+i.end,precise:!0};if(n+=CA(t,i),typeof i.start<"u")return{result:n+i.start,precise:!0}}return{result:n,precise:!1}},Jbe=function(t,e){let n=0,s,i=e-t.mediaSequence;for(;i<t.segments.length;i++){if(s=t.segments[i],typeof s.start<"u")return{result:s.start-n,precise:!0};if(n+=CA(t,s),typeof s.end<"u")return{result:s.end-n,precise:!0}}return{result:-1,precise:!1}},bz=function(t,e,n){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const s=Zbe(t,e);if(s.precise)return s.result;const i=Jbe(t,e);return i.precise?i.result:s.result+n},_z=function(t,e,n){if(!t)return 0;if(typeof n!="number"&&(n=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return de.Infinity}return bz(t,e,n)},D0=function({defaultDuration:t,durationList:e,startIndex:n,endIndex:s}){let i=0;if(n>s&&([n,s]=[s,n]),n<0){for(let a=n;a<Math.min(0,s);a++)i+=t;n=0}for(let a=n;a<s;a++)i+=e[a].duration;return i},wz=function(t,e,n,s){if(!t||!t.segments)return null;if(t.endList)return _z(t);if(e===null)return null;e=e||0;let i=bz(t,t.mediaSequence+t.segments.length,e);return n&&(s=typeof s=="number"?s:xz(null,t),i-=s),Math.max(0,i)},e_e=function(t,e,n){const i=e||0;let a=wz(t,e,!0,n);return a===null?kr():(a<i&&(a=i),kr(i,a))},t_e=function({playlist:t,currentTime:e,startingSegmentIndex:n,startingPartIndex:s,startTime:i,exactManifestTimings:a}){let o=e-i;const l=xN(t);let c=0;for(let u=0;u<l.length;u++){const d=l[u];if(n===d.segmentIndex&&!(typeof s=="number"&&typeof d.partIndex=="number"&&s!==d.partIndex)){c=u;break}}if(o<0){if(c>0)for(let u=c-1;u>=0;u--){const d=l[u];if(o+=d.duration,a){if(o<0)continue}else if(o+dl<=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:i-D0({defaultDuration:t.targetDuration,durationList:l,startIndex:c,endIndex:u})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:e}}if(c<0){for(let u=c;u<0;u++)if(o-=t.targetDuration,o<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:e};c=0}for(let u=c;u<l.length;u++){const d=l[u];o-=d.duration;const h=d.duration>dl,f=o===0,p=h&&o+dl>=0;if(!((f||p)&&u!==l.length-1)){if(a){if(o>0)continue}else if(o-dl>=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:i+D0({defaultDuration:t.targetDuration,durationList:l,startIndex:c,endIndex:u})}}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:e}},Cz=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},SA=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Gw=function(t){const e=Cz(t);return!t.disabled&&!e},n_e=function(t){return t.disabled},s_e=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},Sz=function(t,e){return e.attributes&&e.attributes[t]},r_e=function(t,e,n,s=0){return Sz("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-s*8)/e:NaN},bN=(t,e)=>{if(t.playlists.length===1)return!0;const n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(s=>Gw(s)?(s.attributes.BANDWIDTH||0)<n:!1).length===0},jA=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),ZM=function(t,e){const n=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let s=!1;for(const i in n){for(const a in n[i])if(s=e(n[i][a]),s)break;if(s)break}return!!s},Iy=t=>{if(!t||!t.playlists||!t.playlists.length)return ZM(t,n=>n.playlists&&n.playlists.length||n.uri);for(let e=0;e<t.playlists.length;e++){const n=t.playlists[e],s=n.attributes&&n.attributes.CODECS;if(!(s&&s.split(",").every(a=>iU(a))||ZM(t,a=>jA(n,a))))return!1}return!0};var Fi={liveEdgeDelay:xz,duration:_z,seekable:e_e,getMediaInfoForTime:t_e,isEnabled:Gw,isDisabled:n_e,isExcluded:Cz,isIncompatible:SA,playlistEnd:wz,isAes:s_e,hasAttribute:Sz,estimateSegmentRequestTime:r_e,isLowestEnabledRendition:bN,isAudioOnly:Iy,playlistMatch:jA,segmentDurationWithParts:CA};const{log:jz}=je,vp=(t,e)=>`${t}-${e}`,Tz=(t,e,n)=>`placeholder-uri-${t}-${e}-${n}`,i_e=({onwarn:t,oninfo:e,manifestString:n,customTagParsers:s=[],customTagMappers:i=[],llhls:a})=>{const o=new xye;t&&o.on("warn",t),e&&o.on("info",e),s.forEach(u=>o.addParser(u)),i.forEach(u=>o.addTagMapper(u)),o.push(n),o.end();const l=o.manifest;if(a||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){l.hasOwnProperty(u)&&delete l[u]}),l.segments&&l.segments.forEach(function(u){["parts","preloadHints"].forEach(function(d){u.hasOwnProperty(d)&&delete u[d]})})),!l.targetDuration){let u=10;l.segments&&l.segments.length&&(u=l.segments.reduce((d,h)=>Math.max(d,h.duration),0)),t&&t({message:`manifest has no targetDuration defaulting to ${u}`}),l.targetDuration=u}const c=vz(l);if(c.length&&!l.partTargetDuration){const u=c.reduce((d,h)=>Math.max(d,h.duration),0);t&&(t({message:`manifest has no partTargetDuration defaulting to ${u}`}),jz.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),l.partTargetDuration=u}return l},Lm=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(t.mediaGroups[n])for(const s in t.mediaGroups[n])for(const i in t.mediaGroups[n][s]){const a=t.mediaGroups[n][s][i];e(a,n,s,i)}})},Ez=({playlist:t,uri:e,id:n})=>{t.id=n,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},a_e=t=>{let e=t.playlists.length;for(;e--;){const n=t.playlists[e];Ez({playlist:n,id:vp(e,n.uri)}),n.resolvedUri=Bi(t.uri,n.uri),t.playlists[n.id]=n,t.playlists[n.uri]=n,n.attributes.BANDWIDTH||jz.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},o_e=t=>{Lm(t,e=>{e.uri&&(e.resolvedUri=Bi(t.uri,e.uri))})},l_e=(t,e)=>{const n=vp(0,e),s={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:de.location.href,resolvedUri:de.location.href,playlists:[{uri:e,id:n,resolvedUri:e,attributes:{}}]};return s.playlists[n]=s.playlists[0],s.playlists[e]=s.playlists[0],s},Nz=(t,e,n=Tz)=>{t.uri=e;for(let i=0;i<t.playlists.length;i++)if(!t.playlists[i].uri){const a=`placeholder-uri-${i}`;t.playlists[i].uri=a}const s=Iy(t);Lm(t,(i,a,o,l)=>{if(!i.playlists||!i.playlists.length){if(s&&a==="AUDIO"&&!i.uri)for(let c=0;c<t.playlists.length;c++){const u=t.playlists[c];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===o)return}i.playlists=[ds({},i)]}i.playlists.forEach(function(c,u){const d=n(a,o,l,c),h=vp(u,d);c.uri?c.resolvedUri=c.resolvedUri||Bi(t.uri,c.uri):(c.uri=u===0?d:h,c.resolvedUri=c.uri),c.id=c.id||h,c.attributes=c.attributes||{},t.playlists[c.id]=c,t.playlists[c.uri]=c})}),a_e(t),o_e(t)};class JM{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[n]=e;n.programDateTime!==void 0&&(this.offset_=n.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[n]=e,s=n.startDate.getTime();this.trimProcessedDateRanges_(s),this.pendingDateRanges_=e.reduce((i,a)=>(i.set(a.id,a),i),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},n=[];this.pendingDateRanges_.forEach((s,i)=>{if(!this.processedDateRanges_.has(i)&&(s.startTime=s.startDate.getTime()/1e3-this.offset_,s.processDateRange=()=>this.processDateRange(s),n.push(s),!!s.class))if(e[s.class]){const a=e[s.class].push(s);s.classListIndex=a-1}else e[s.class]=[s],s.classListIndex=0});for(const s of n){const i=e[s.class]||[];s.endDate?s.endTime=s.endDate.getTime()/1e3-this.offset_:s.endOnNext&&i[s.classListIndex+1]?s.endTime=i[s.classListIndex+1].startTime:s.duration?s.endTime=s.startTime+s.duration:s.plannedDuration?s.endTime=s.startTime+s.plannedDuration:s.endTime=s.startTime}return n}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((s,i)=>{s.startDate.getTime()<e&&this.processedDateRanges_.delete(i)})}}const kz=22,vh=({requestType:t,request:e,error:n,parseFailure:s})=>{const i=e.status<200||e.status>299,a=e.status>=400&&e.status<=499,o={uri:e.uri,requestType:t},l=i&&!a||s;if(n&&a)o.error=ds({},n),o.errorType=je.Error.NetworkRequestFailed;else if(e.aborted)o.errorType=je.Error.NetworkRequestAborted;else if(e.timedout)o.erroType=je.Error.NetworkRequestTimeout;else if(l){const c=s?je.Error.NetworkBodyParserFailed:je.Error.NetworkBadStatus;o.errorType=c,o.status=e.status,o.headers=e.headers}return o},{EventTarget:c_e}=je,u_e=(t,e)=>{if(e.endList||!e.serverControl)return t;const n={};if(e.serverControl.canBlockReload){const{preloadSegment:s}=e;let i=e.mediaSequence+e.segments.length;if(s){const a=s.parts||[],o=yz(e)-1;o>-1&&o!==a.length-1&&(n._HLS_part=o),(o>-1||a.length)&&i--}n._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(n._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const s=new de.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){n.hasOwnProperty(i)&&s.searchParams.set(i,n[i])}),t=s.toString()}return t},d_e=(t,e)=>{if(!t)return e;const n=Cn(t,e);if(t.preloadHints&&!e.preloadHints&&delete n.preloadHints,t.parts&&!e.parts)delete n.parts;else if(t.parts&&e.parts)for(let s=0;s<e.parts.length;s++)t.parts&&t.parts[s]&&(n.parts[s]=Cn(t.parts[s],e.parts[s]));return!t.skipped&&e.skipped&&(n.skipped=!1),t.preload&&!e.preload&&(n.preload=!1),n},h_e=(t,e,n)=>{const s=t.slice(),i=e.slice();n=n||0;const a=[];let o;for(let l=0;l<i.length;l++){const c=s[l+n],u=i[l];c?(o=c.map||o,a.push(d_e(c,u))):(o&&!u.map&&(u.map=o),a.push(u))}return a},Az=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=Bi(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Bi(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Bi(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=Bi(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(n=>{n.resolvedUri||(n.resolvedUri=Bi(e,n.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(n=>{n.resolvedUri||(n.resolvedUri=Bi(e,n.uri))})},Dz=function(t){const e=t.segments||[],n=t.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(let s=0;s<n.preloadHints.length;s++)if(n.preloadHints[s].type==="MAP")return e}n.duration=t.targetDuration,n.preload=!0,e.push(n)}return e},Pz=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,_N=(t,e,n=Pz)=>{const s=Cn(t,{}),i=s.playlists[e.id];if(!i||n(i,e))return null;e.segments=Dz(e);const a=Cn(i,e);if(a.preloadSegment&&!e.preloadSegment&&delete a.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let o=0;o<e.skip.skippedSegments;o++)e.segments.unshift({skipped:!0})}a.segments=h_e(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}a.segments.forEach(o=>{Az(o,a.resolvedUri)});for(let o=0;o<s.playlists.length;o++)s.playlists[o].id===e.id&&(s.playlists[o]=a);return s.playlists[e.id]=a,s.playlists[e.uri]=a,Lm(t,(o,l,c,u)=>{if(o.playlists)for(let d=0;d<o.playlists.length;d++)e.id===o.playlists[d].id&&(o.playlists[d]=a)}),s},wN=(t,e)=>{const n=t.segments||[],s=n[n.length-1],i=s&&s.parts&&s.parts[s.parts.length-1],a=i&&i.duration||s&&s.duration;return e&&a?a*1e3:(t.partTargetDuration||t.targetDuration||10)*500},eO=(t,e,n)=>{if(!t)return;const s=[];return t.forEach(i=>{if(!i.attributes)return;const{BANDWIDTH:a,RESOLUTION:o,CODECS:l}=i.attributes;s.push({id:i.id,bandwidth:a,resolution:o,codecs:l})}),{type:e,isLive:n,renditions:s}};class tp extends c_e{constructor(e,n,s={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=uo("PlaylistLoader");const{withCredentials:i=!1}=s;this.src=e,this.vhs_=n,this.withCredentials=i,this.addDateRangesToTextTrack_=s.addDateRangesToTextTrack;const a=n.options_;this.customTagParsers=a&&a.customTagParsers||[],this.customTagMappers=a&&a.customTagMappers||[],this.llhls=a&&a.llhls,this.dateRangesStorage_=new JM,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const n=this.dateRangesStorage_.getDateRangesToProcess();!n.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(n)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let n=Bi(this.main.uri,e.uri);this.llhls&&(n=u_e(n,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials,requestType:"hls-playlist"},(s,i)=>{if(this.request){if(s)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,n,s){const{uri:i,id:a}=n;this.request=null,s&&(this.state=s),this.error={playlist:this.main.playlists[a],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:vh({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:n}){try{return i_e({onwarn:({message:s})=>this.logger_(`m3u8-parser warn for ${e}: ${s}`),oninfo:({message:s})=>this.logger_(`m3u8-parser info for ${e}: ${s}`),manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(s){this.error=s,this.error.metadata={errorType:je.Error.StreamingHlsPlaylistParserError,error:s}}}haveMetadata({playlistString:e,playlistObject:n,url:s,id:i}){this.request=null,this.state="HAVE_METADATA";const a={playlistInfo:{type:"media",uri:s}};this.trigger({type:"playlistparsestart",metadata:a});const o=n||this.parseManifest_({url:s,manifestString:e});o.lastRequest=Date.now(),Ez({playlist:o,uri:s,id:i});const l=_N(this.main,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,l?(this.main=l,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(wN(this.media(),!!l)),a.parsedPlaylist=eO(this.main.playlists,a.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:a}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),de.clearTimeout(this.mediaUpdateTimeout),de.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new JM,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,n){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(de.clearTimeout(this.finalRenditionTimeout),n){const l=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=de.setTimeout(this.media.bind(this,e,!1),l);return}const s=this.state,i=!this.media_||e.id!==this.media_.id,a=this.main.playlists[e.id];if(a&&a.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),s==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(wN(e,!0)),!i)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const o={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:o}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(l,c)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=I_(e.resolvedUri,c),l)return this.playlistRequestError(this.request,e,s);this.trigger({type:"playlistrequestcomplete",metadata:o}),this.haveMetadata({playlistString:c.responseText,url:e.uri,id:e.id}),s==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(de.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(de.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const n=this.media();if(e){const s=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=de.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},s);return}if(!this.started){this.start();return}n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(de.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=de.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=de.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,s)=>{if(!this.request)return;if(this.request=null,n)return this.error={status:s.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:s.responseText,code:2,metadata:vh({requestType:s.requestType,request:s,error:n})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=I_(this.src,s),this.trigger({type:"playlistparsestart",metadata:e});const i=this.parseManifest_({manifestString:s.responseText,url:this.src});e.parsedPlaylist=eO(i.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(i)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,Nz(this.main,this.srcUri()),e.playlists.forEach(s=>{s.segments=Dz(s),s.segments.forEach(i=>{Az(i,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const n=this.srcUri()||de.location.href;this.main=l_e(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,n){const s=this.main,i=e.ID;let a=s.playlists.length;for(;a--;){const o=s.playlists[a];if(o.attributes["PATHWAY-ID"]===i){const l=o.resolvedUri,c=o.id;if(n){const u=this.createCloneURI_(o.resolvedUri,e),d=vp(i,u),h=this.createCloneAttributes_(i,o.attributes),f=this.createClonePlaylist_(o,d,e,h);s.playlists[a]=f,s.playlists[d]=f,s.playlists[u]=f}else s.playlists.splice(a,1);delete s.playlists[c],delete s.playlists[l]}}this.updateOrDeleteCloneMedia(e,n)}updateOrDeleteCloneMedia(e,n){const s=this.main,i=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{if(!(!s.mediaGroups[a]||!s.mediaGroups[a][i])){for(const o in s.mediaGroups[a])if(o===i){for(const l in s.mediaGroups[a][o])s.mediaGroups[a][o][l].playlists.forEach((u,d)=>{const h=s.playlists[u.id],f=h.id,p=h.resolvedUri;delete s.playlists[f],delete s.playlists[p]});delete s.mediaGroups[a][o]}}}),n&&this.createClonedMediaGroups_(e)}addClonePathway(e,n={}){const s=this.main,i=s.playlists.length,a=this.createCloneURI_(n.resolvedUri,e),o=vp(e.ID,a),l=this.createCloneAttributes_(e.ID,n.attributes),c=this.createClonePlaylist_(n,o,e,l);s.playlists[i]=c,s.playlists[o]=c,s.playlists[a]=c,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const n=e.ID,s=e["BASE-ID"],i=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{if(!(!i.mediaGroups[a]||i.mediaGroups[a][n]))for(const o in i.mediaGroups[a]){if(o===s)i.mediaGroups[a][n]={};else continue;for(const l in i.mediaGroups[a][o]){const c=i.mediaGroups[a][o][l];i.mediaGroups[a][n][l]=ds({},c);const u=i.mediaGroups[a][n][l],d=this.createCloneURI_(c.resolvedUri,e);u.resolvedUri=d,u.uri=d,u.playlists=[],c.playlists.forEach((h,f)=>{const p=i.playlists[h.id],g=Tz(a,n,l),m=vp(n,g);if(p&&!i.playlists[m]){const _=this.createClonePlaylist_(p,m,e),y=_.resolvedUri;i.playlists[m]=_,i.playlists[y]=_}u.playlists[f]=this.createClonePlaylist_(h,m,e)})}}})}createClonePlaylist_(e,n,s,i){const a=this.createCloneURI_(e.resolvedUri,s),o={resolvedUri:a,uri:a,id:n};return e.segments&&(o.segments=[]),i&&(o.attributes=i),Cn(e,o)}createCloneURI_(e,n){const s=new URL(e);s.hostname=n["URI-REPLACEMENT"].HOST;const i=n["URI-REPLACEMENT"].PARAMS;for(const a of Object.keys(i))s.searchParams.set(a,i[a]);return s.href}createCloneAttributes_(e,n){const s={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{n[i]&&(s[i]=e)}),s}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const s in e.contentProtection){const i=e.contentProtection[s].attributes.keyId;i&&n.add(i.toLowerCase())}return n}}}const CN=function(t,e,n,s){const i=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&i&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=i.byteLength||i.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),n.headers&&(t.responseHeaders=n.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(i||t.responseText)))),s(e,t)},f_e=(t,e)=>{if(!t||!t.size)return;let n=e;return t.forEach(s=>{n=s(n)}),n},p_e=(t,e,n,s)=>{!t||!t.size||t.forEach(i=>{i(e,n,s)})},Iz=function(){const t=function e(n,s){n=Cn({timeout:45e3},n);const i=e.beforeRequest||je.Vhs.xhr.beforeRequest,a=e._requestCallbackSet||je.Vhs.xhr._requestCallbackSet||new Set,o=e._responseCallbackSet||je.Vhs.xhr._responseCallbackSet;i&&typeof i=="function"&&(je.log.warn("beforeRequest is deprecated, use onRequest instead."),a.add(i));const l=je.Vhs.xhr.original===!0?je.xhr:je.Vhs.xhr,c=f_e(a,n);a.delete(i);const u=l(c||n,function(h,f){return p_e(o,u,h,f),CN(u,h,f,s)}),d=u.abort;return u.abort=function(){return u.aborted=!0,d.apply(u,arguments)},u.uri=n.uri,u.requestType=n.requestType,u.requestTime=Date.now(),u};return t.original=!0,t},m_e=function(t){let e;const n=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=de.BigInt(t.offset)+de.BigInt(t.length)-de.BigInt(1):e=t.offset+t.length-1,"bytes="+n+"-"+e},SN=function(t){const e={};return t.byterange&&(e.Range=m_e(t.byterange)),e},g_e=function(t,e){return t.start(e)+"-"+t.end(e)},v_e=function(t,e){const n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},y_e=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},Mz=function(t){const e={};return Object.keys(t).forEach(n=>{const s=t[n];oU(s)?e[n]={bytes:s.buffer,byteOffset:s.byteOffset,byteLength:s.byteLength}:e[n]=s}),e},M_=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},Oz=function(t){return t.resolvedUri},Rz=t=>{const e=Array.prototype.slice.call(t),n=16;let s="",i,a;for(let o=0;o<e.length/n;o++)i=e.slice(o*n,o*n+n).map(v_e).join(""),a=e.slice(o*n,o*n+n).map(y_e).join(""),s+=i+" "+a+`
`;return s},x_e=({bytes:t})=>Rz(t),b_e=t=>{let e="",n;for(n=0;n<t.length;n++)e+=g_e(t,n)+" ";return e};var __e=Object.freeze({__proto__:null,createTransferableMessage:Mz,initSegmentId:M_,segmentKeyId:Oz,hexDump:Rz,tagDump:x_e,textRanges:b_e});const Lz=.25,w_e=(t,e)=>{if(!e.dateTimeObject)return null;const n=e.videoTimingInfo.transmuxerPrependedSeconds,i=e.videoTimingInfo.transmuxedPresentationStart+n,a=t-i;return new Date(e.dateTimeObject.getTime()+a*1e3)},C_e=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,S_e=(t,e)=>{let n;try{n=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let s=e.segments[0];if(n<new Date(s.dateTimeObject))return null;for(let c=0;c<e.segments.length-1;c++){s=e.segments[c];const u=new Date(e.segments[c+1].dateTimeObject);if(n<u)break}const i=e.segments[e.segments.length-1],a=i.dateTimeObject,o=i.videoTimingInfo?C_e(i.videoTimingInfo):i.duration+i.duration*Lz,l=new Date(a.getTime()+o*1e3);return n>l?null:(n>new Date(a)&&(s=i),{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:Fi.duration(e,e.mediaSequence+e.segments.indexOf(s)),type:s.videoTimingInfo?"accurate":"estimate"})},j_e=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let n=0,s;for(let a=0;a<e.segments.length&&(s=e.segments[a],n=s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationEnd:n+s.duration,!(t<=n));a++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>n){if(t>n+i.duration*Lz)return null;s=i}return{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:n-s.duration,type:s.videoTimingInfo?"accurate":"estimate"}},T_e=(t,e)=>{let n,s;try{n=new Date(t),s=new Date(e)}catch{}const i=n.getTime();return(s.getTime()-i)/1e3},E_e=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},N_e=({playlist:t,time:e=void 0,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});const s=j_e(e,t);if(!s)return n({message:"valid programTime was not found"});if(s.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});const i={mediaSeconds:e},a=w_e(e,s.segment);return a&&(i.programDateTime=a.toISOString()),n(null,i)},Bz=({programTime:t,playlist:e,retryCount:n=2,seekTo:s,pauseAfterSeek:i=!0,tech:a,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!s)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!a.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!E_e(e))return o({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const l=S_e(t,e);if(!l)return o({message:`${t} was not found in the stream`});const c=l.segment,u=T_e(c.dateTimeObject,t);if(l.type==="estimate"){if(n===0)return o({message:`${t} is not buffered yet. Try again`});s(l.estimatedStart+u),a.one("seeked",()=>{Bz({programTime:t,playlist:e,retryCount:n-1,seekTo:s,pauseAfterSeek:i,tech:a,callback:o})});return}const d=c.start+u,h=()=>o(null,a.currentTime());a.one("seeked",h),i&&a.pause(),s(d)},Sj=(t,e)=>{if(t.readyState===4)return e()},k_e=(t,e,n,s)=>{let i=[],a,o=!1;const l=function(h,f,p,g){return f.abort(),o=!0,n(h,f,p,g)},c=function(h,f){if(o)return;if(h)return h.metadata=vh({requestType:s,request:f,error:h}),l(h,f,"",i);const p=f.responseText.substring(i&&i.byteLength||0,f.responseText.length);if(i=Dye(i,lU(p,!0)),a=a||s0(i),i.length<10||a&&i.length<a+2)return Sj(f,()=>l(h,f,"",i));const g=q4(i);return g==="ts"&&i.length<188?Sj(f,()=>l(h,f,"",i)):!g&&i.length<376?Sj(f,()=>l(h,f,"",i)):l(null,f,g,i)},d=e({uri:t,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:f,loaded:p}){return CN(h,null,{statusCode:h.status},c)})}},function(h,f){return CN(d,h,f,c)});return d},{EventTarget:A_e}=je,tO=function(t,e){if(!Pz(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let n=0;n<t.segments.length;n++){const s=t.segments[n],i=e.segments[n];if(s.uri!==i.uri)return!1;if(!s.byterange&&!i.byterange)continue;const a=s.byterange,o=i.byterange;if(a&&!o||!a&&o||a.offset!==o.offset||a.length!==o.length)return!1}return!0},D_e=(t,e,n,s)=>{const i=s.attributes.NAME||n;return`placeholder-uri-${t}-${e}-${i}`},P_e=({mainXml:t,srcUrl:e,clientOffset:n,sidxMapping:s,previousManifest:i})=>{const a=e1e(t,{manifestUri:e,clientOffset:n,sidxMapping:s,previousManifest:i});return Nz(a,e,D_e),a},I_e=(t,e)=>{Lm(t,(n,s,i,a)=>{a in e.mediaGroups[s][i]||delete t.mediaGroups[s][i][a]})},M_e=(t,e,n)=>{let s=!0,i=Cn(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let a=0;a<e.playlists.length;a++){const o=e.playlists[a];if(o.sidx){const c=kw(o.sidx);n&&n[c]&&n[c].sidx&&V4(o,n[c].sidx,o.sidx.resolvedUri)}const l=_N(i,o,tO);l&&(i=l,s=!1)}return Lm(e,(a,o,l,c)=>{if(a.playlists&&a.playlists.length){const u=a.playlists[0].id,d=_N(i,a.playlists[0],tO);d&&(i=d,c in i.mediaGroups[o][l]||(i.mediaGroups[o][l][c]=a),i.mediaGroups[o][l][c].playlists[0]=i.playlists[u],s=!1)}}),I_e(i,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(s=!1),s?null:i},O_e=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,nO=(t,e)=>{const n={};for(const s in t){const a=t[s].sidx;if(a){const o=kw(a);if(!e[o])break;const l=e[o].sidxInfo;O_e(l,a)&&(n[o]=e[o])}}return n},R_e=(t,e)=>{let s=nO(t.playlists,e);return Lm(t,(i,a,o,l)=>{if(i.playlists&&i.playlists.length){const c=i.playlists;s=Cn(s,nO(c,e))}}),s};class jN extends A_e{constructor(e,n,s={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:a=!1}=s;if(this.vhs_=n,this.withCredentials=a,this.addMetadataToTextTrack=s.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=uo("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,n,s){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2,metadata:e.metadata},s&&(this.state=s),this.trigger("error"),!0}addSidxSegments_(e,n,s){const i=e.sidx&&kw(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i]){this.mediaRequest_=de.setTimeout(()=>s(!1),0);return}const a=I_(e.sidx.resolvedUri),o=(c,u)=>{if(this.requestErrored_(c,u,n))return;const d=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u;let f;try{f=a1e(Ct(u.response).subarray(8))}catch(p){p.metadata=vh({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(p,u,n);return}return d[i]={sidxInfo:e.sidx,sidx:f},V4(e,f,e.sidx.resolvedUri),s(!0)},l="dash-sidx";this.request=k_e(a,this.vhs_.xhr,(c,u,d,h)=>{if(c)return o(c,u);if(!d||d!=="mp4"){const g=d||"unknown";return o({status:u.status,message:`Unsupported ${g} container type for sidx segment at URL: ${a}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:f,length:p}=e.sidx.byterange;if(h.length>=p+f)return o(c,{response:h.subarray(f,f+p),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:a,responseType:"arraybuffer",requestType:"dash-sidx",headers:SN({byterange:e.sidx.byterange})},o)},l)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},de.clearTimeout(this.minimumUpdatePeriodTimeout_),de.clearTimeout(this.mediaRequest_),de.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const n=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const s=!this.media_||e.id!==this.media_.id;if(s&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}s&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,i=>{this.haveMetadata({startingState:n,playlist:e})}))}haveMetadata({startingState:e,playlist:n}){this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),de.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(de.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){de.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const n=this.media();if(e){const s=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=de.setTimeout(()=>this.load(),s);return}if(!this.started){this.start();return}n&&!n.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=de.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,n)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:n}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(s,i)=>{if(s){const{requestType:o}=i;s.metadata=vh({requestType:o,request:i,error:s})}if(this.requestErrored_(s,i)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:n});const a=i.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=I_(this.mainPlaylistLoader_.srcUrl,i),a){this.handleMain_(),this.syncClientServerClock_(()=>e(i,a));return}return e(i,a)})}syncClientServerClock_(e){const n=t1e(this.mainPlaylistLoader_.mainXml_);if(n===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(n.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=n.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Bi(this.mainPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(s,i)=>{if(!this.request)return;if(s){const{requestType:o}=i;return this.error.metadata=vh({requestType:o,request:i,error:s}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let a;n.method==="HEAD"?!i.responseHeaders||!i.responseHeaders.date?a=this.mainLoaded_:a=Date.parse(i.responseHeaders.date):a=Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=a-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:n});let s;try{s=P_e({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(a){this.error=a,this.error.metadata={errorType:je.Error.StreamingDashManifestParserError,error:a},this.trigger("error")}e&&(s=M_e(e,s,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=s||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||s&&s.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(s),s){const{duration:a,endList:o}=s,l=[];s.playlists.forEach(u=>{l.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const c={duration:a,isLive:!o,renditions:l};n.parsedManifest=c,this.trigger({type:"manifestparsecomplete",metadata:n})}return!!s}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(de.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let n=e.main&&e.main.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_(`found invalid minimumUpdatePeriod of ${n}, not setting a timeout`);return}this.createMUPTimeout_(n)}createMUPTimeout_(e){const n=this.mainPlaylistLoader_;n.minimumUpdatePeriodTimeout_=de.setTimeout(()=>{n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,n)=>{n&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=R_e(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,s=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const n=this.mainPlaylistLoader_.main.playlists,s=!this.media_||this.media_!==n[e];if(s?this.media_=n[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=de.setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},wN(this.media(),!!s)))};i()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const n=this.mainPlaylistLoader_.main.eventStream.map(s=>({cueTime:s.start,frames:[{data:s.messageData}]}));this.addMetadataToTextTrack("EventStream",n,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const s in e.contentProtection){const i=e.contentProtection[s].attributes["cenc:default_KID"];i&&n.add(i.replace(/-/g,"").toLowerCase())}return n}}}var pr={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const L_e=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e.buffer},Fz=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},B_e=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const n=new BlobBuilder;return n.append(t),URL.createObjectURL(n.getBlob())}},$z=function(t){return function(){const e=B_e(t),n=Fz(new Worker(e));n.objURL=e;const s=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(e),s.call(this)},n}},Uz=function(t){return`var browserWorkerPolyFill = ${Fz.toString()};
browserWorkerPolyFill(self);
`+t},Vz=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},F_e=Uz(Vz(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ir<"u"?ir:typeof self<"u"?self:{},e=function(){this.init=function(){var S={};this.on=function(k,D){S[k]||(S[k]=[]),S[k]=S[k].concat(D)},this.off=function(k,D){var A;return S[k]?(A=S[k].indexOf(D),S[k]=S[k].slice(),S[k].splice(A,1),A>-1):!1},this.trigger=function(k){var D,A,O,F;if(D=S[k],!!D)if(arguments.length===2)for(O=D.length,A=0;A<O;++A)D[A].call(this,arguments[1]);else{for(F=[],A=arguments.length,A=1;A<arguments.length;++A)F.push(arguments[A]);for(O=D.length,A=0;A<O;++A)D[A].apply(this,F)}},this.dispose=function(){S={}}}};e.prototype.pipe=function(S){return this.on("data",function(k){S.push(k)}),this.on("done",function(k){S.flush(k)}),this.on("partialdone",function(k){S.partialFlush(k)}),this.on("endedtimeline",function(k){S.endTimeline(k)}),this.on("reset",function(k){S.reset(k)}),S},e.prototype.push=function(S){this.trigger("data",S)},e.prototype.flush=function(S){this.trigger("done",S)},e.prototype.partialFlush=function(S){this.trigger("partialdone",S)},e.prototype.endTimeline=function(S){this.trigger("endedtimeline",S)},e.prototype.reset=function(S){this.trigger("reset",S)};var n=e,s=Math.pow(2,32),i=function(S){var k=new DataView(S.buffer,S.byteOffset,S.byteLength),D;return k.getBigUint64?(D=k.getBigUint64(0),D<Number.MAX_SAFE_INTEGER?Number(D):D):k.getUint32(0)*s+k.getUint32(4)},a={getUint64:i,MAX_UINT32:s},o=a.MAX_UINT32,l,c,u,d,h,f,p,g,m,_,y,x,b,w,C,j,E,T,N,P,I,B,U,z,G,V,J,Q,Y,oe,he,me,Oe,xe,Pe,qe;(function(){var S;if(U={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(S in U)U.hasOwnProperty(S)&&(U[S]=[S.charCodeAt(0),S.charCodeAt(1),S.charCodeAt(2),S.charCodeAt(3)]);z=new Uint8Array([105,115,111,109]),V=new Uint8Array([97,118,99,49]),G=new Uint8Array([0,0,0,1]),J=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Q=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Y={video:J,audio:Q},me=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),he=new Uint8Array([0,0,0,0,0,0,0,0]),Oe=new Uint8Array([0,0,0,0,0,0,0,0]),xe=Oe,Pe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),qe=Oe,oe=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),l=function(S){var k=[],D=0,A,O,F;for(A=1;A<arguments.length;A++)k.push(arguments[A]);for(A=k.length;A--;)D+=k[A].byteLength;for(O=new Uint8Array(D+8),F=new DataView(O.buffer,O.byteOffset,O.byteLength),F.setUint32(0,O.byteLength),O.set(S,4),A=0,D=8;A<k.length;A++)O.set(k[A],D),D+=k[A].byteLength;return O},c=function(){return l(U.dinf,l(U.dref,me))},u=function(S){return l(U.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,S.audioobjecttype<<3|S.samplingfrequencyindex>>>1,S.samplingfrequencyindex<<7|S.channelcount<<3,6,1,2]))},d=function(){return l(U.ftyp,z,G,z,V)},j=function(S){return l(U.hdlr,Y[S])},h=function(S){return l(U.mdat,S)},C=function(S){var k=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,S.duration>>>24&255,S.duration>>>16&255,S.duration>>>8&255,S.duration&255,85,196,0,0]);return S.samplerate&&(k[12]=S.samplerate>>>24&255,k[13]=S.samplerate>>>16&255,k[14]=S.samplerate>>>8&255,k[15]=S.samplerate&255),l(U.mdhd,k)},w=function(S){return l(U.mdia,C(S),j(S.type),p(S))},f=function(S){return l(U.mfhd,new Uint8Array([0,0,0,0,(S&4278190080)>>24,(S&16711680)>>16,(S&65280)>>8,S&255]))},p=function(S){return l(U.minf,S.type==="video"?l(U.vmhd,oe):l(U.smhd,he),c(),T(S))},g=function(S,k){for(var D=[],A=k.length;A--;)D[A]=P(k[A]);return l.apply(null,[U.moof,f(S)].concat(D))},m=function(S){for(var k=S.length,D=[];k--;)D[k]=x(S[k]);return l.apply(null,[U.moov,y(4294967295)].concat(D).concat(_(S)))},_=function(S){for(var k=S.length,D=[];k--;)D[k]=I(S[k]);return l.apply(null,[U.mvex].concat(D))},y=function(S){var k=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(S&4278190080)>>24,(S&16711680)>>16,(S&65280)>>8,S&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l(U.mvhd,k)},E=function(S){var k=S.samples||[],D=new Uint8Array(4+k.length),A,O;for(O=0;O<k.length;O++)A=k[O].flags,D[O+4]=A.dependsOn<<4|A.isDependedOn<<2|A.hasRedundancy;return l(U.sdtp,D)},T=function(S){return l(U.stbl,N(S),l(U.stts,qe),l(U.stsc,xe),l(U.stsz,Pe),l(U.stco,Oe))},function(){var S,k;N=function(D){return l(U.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),D.type==="video"?S(D):k(D))},S=function(D){var A=D.sps||[],O=D.pps||[],F=[],Z=[],se,le;for(se=0;se<A.length;se++)F.push((A[se].byteLength&65280)>>>8),F.push(A[se].byteLength&255),F=F.concat(Array.prototype.slice.call(A[se]));for(se=0;se<O.length;se++)Z.push((O[se].byteLength&65280)>>>8),Z.push(O[se].byteLength&255),Z=Z.concat(Array.prototype.slice.call(O[se]));if(le=[U.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(D.width&65280)>>8,D.width&255,(D.height&65280)>>8,D.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l(U.avcC,new Uint8Array([1,D.profileIdc,D.profileCompatibility,D.levelIdc,255].concat([A.length],F,[O.length],Z))),l(U.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],D.sarRatio){var pe=D.sarRatio[0],we=D.sarRatio[1];le.push(l(U.pasp,new Uint8Array([(pe&4278190080)>>24,(pe&16711680)>>16,(pe&65280)>>8,pe&255,(we&4278190080)>>24,(we&16711680)>>16,(we&65280)>>8,we&255])))}return l.apply(null,le)},k=function(D){return l(U.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(D.channelcount&65280)>>8,D.channelcount&255,(D.samplesize&65280)>>8,D.samplesize&255,0,0,0,0,(D.samplerate&65280)>>8,D.samplerate&255,0,0]),u(D))}}(),b=function(S){var k=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(S.id&4278190080)>>24,(S.id&16711680)>>16,(S.id&65280)>>8,S.id&255,0,0,0,0,(S.duration&4278190080)>>24,(S.duration&16711680)>>16,(S.duration&65280)>>8,S.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(S.width&65280)>>8,S.width&255,0,0,(S.height&65280)>>8,S.height&255,0,0]);return l(U.tkhd,k)},P=function(S){var k,D,A,O,F,Z,se;return k=l(U.tfhd,new Uint8Array([0,0,0,58,(S.id&4278190080)>>24,(S.id&16711680)>>16,(S.id&65280)>>8,S.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Z=Math.floor(S.baseMediaDecodeTime/o),se=Math.floor(S.baseMediaDecodeTime%o),D=l(U.tfdt,new Uint8Array([1,0,0,0,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z&255,se>>>24&255,se>>>16&255,se>>>8&255,se&255])),F=92,S.type==="audio"?(A=B(S,F),l(U.traf,k,D,A)):(O=E(S),A=B(S,O.length+F),l(U.traf,k,D,A,O))},x=function(S){return S.duration=S.duration||4294967295,l(U.trak,b(S),w(S))},I=function(S){var k=new Uint8Array([0,0,0,0,(S.id&4278190080)>>24,(S.id&16711680)>>16,(S.id&65280)>>8,S.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return S.type!=="video"&&(k[k.length-1]=0),l(U.trex,k)},function(){var S,k,D;D=function(A,O){var F=0,Z=0,se=0,le=0;return A.length&&(A[0].duration!==void 0&&(F=1),A[0].size!==void 0&&(Z=2),A[0].flags!==void 0&&(se=4),A[0].compositionTimeOffset!==void 0&&(le=8)),[0,0,F|Z|se|le,1,(A.length&4278190080)>>>24,(A.length&16711680)>>>16,(A.length&65280)>>>8,A.length&255,(O&4278190080)>>>24,(O&16711680)>>>16,(O&65280)>>>8,O&255]},k=function(A,O){var F,Z,se,le,pe,we;for(le=A.samples||[],O+=20+16*le.length,se=D(le,O),Z=new Uint8Array(se.length+le.length*16),Z.set(se),F=se.length,we=0;we<le.length;we++)pe=le[we],Z[F++]=(pe.duration&4278190080)>>>24,Z[F++]=(pe.duration&16711680)>>>16,Z[F++]=(pe.duration&65280)>>>8,Z[F++]=pe.duration&255,Z[F++]=(pe.size&4278190080)>>>24,Z[F++]=(pe.size&16711680)>>>16,Z[F++]=(pe.size&65280)>>>8,Z[F++]=pe.size&255,Z[F++]=pe.flags.isLeading<<2|pe.flags.dependsOn,Z[F++]=pe.flags.isDependedOn<<6|pe.flags.hasRedundancy<<4|pe.flags.paddingValue<<1|pe.flags.isNonSyncSample,Z[F++]=pe.flags.degradationPriority&61440,Z[F++]=pe.flags.degradationPriority&15,Z[F++]=(pe.compositionTimeOffset&4278190080)>>>24,Z[F++]=(pe.compositionTimeOffset&16711680)>>>16,Z[F++]=(pe.compositionTimeOffset&65280)>>>8,Z[F++]=pe.compositionTimeOffset&255;return l(U.trun,Z)},S=function(A,O){var F,Z,se,le,pe,we;for(le=A.samples||[],O+=20+8*le.length,se=D(le,O),F=new Uint8Array(se.length+le.length*8),F.set(se),Z=se.length,we=0;we<le.length;we++)pe=le[we],F[Z++]=(pe.duration&4278190080)>>>24,F[Z++]=(pe.duration&16711680)>>>16,F[Z++]=(pe.duration&65280)>>>8,F[Z++]=pe.duration&255,F[Z++]=(pe.size&4278190080)>>>24,F[Z++]=(pe.size&16711680)>>>16,F[Z++]=(pe.size&65280)>>>8,F[Z++]=pe.size&255;return l(U.trun,F)},B=function(A,O){return A.type==="audio"?S(A,O):k(A,O)}}();var Ie={ftyp:d,mdat:h,moof:g,moov:m,initSegment:function(S){var k=d(),D=m(S),A;return A=new Uint8Array(k.byteLength+D.byteLength),A.set(k),A.set(D,k.byteLength),A}},Ve=function(S){var k,D,A=[],O=[];for(O.byteLength=0,O.nalCount=0,O.duration=0,A.byteLength=0,k=0;k<S.length;k++)D=S[k],D.nalUnitType==="access_unit_delimiter_rbsp"?(A.length&&(A.duration=D.dts-A.dts,O.byteLength+=A.byteLength,O.nalCount+=A.length,O.duration+=A.duration,O.push(A)),A=[D],A.byteLength=D.data.byteLength,A.pts=D.pts,A.dts=D.dts):(D.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(A.keyFrame=!0),A.duration=D.dts-A.dts,A.byteLength+=D.data.byteLength,A.push(D));return O.length&&(!A.duration||A.duration<=0)&&(A.duration=O[O.length-1].duration),O.byteLength+=A.byteLength,O.nalCount+=A.length,O.duration+=A.duration,O.push(A),O},ot=function(S){var k,D,A=[],O=[];for(A.byteLength=0,A.nalCount=0,A.duration=0,A.pts=S[0].pts,A.dts=S[0].dts,O.byteLength=0,O.nalCount=0,O.duration=0,O.pts=S[0].pts,O.dts=S[0].dts,k=0;k<S.length;k++)D=S[k],D.keyFrame?(A.length&&(O.push(A),O.byteLength+=A.byteLength,O.nalCount+=A.nalCount,O.duration+=A.duration),A=[D],A.nalCount=D.length,A.byteLength=D.byteLength,A.pts=D.pts,A.dts=D.dts,A.duration=D.duration):(A.duration+=D.duration,A.nalCount+=D.length,A.byteLength+=D.byteLength,A.push(D));return O.length&&A.duration<=0&&(A.duration=O[O.length-1].duration),O.byteLength+=A.byteLength,O.nalCount+=A.nalCount,O.duration+=A.duration,O.push(A),O},fe=function(S){var k;return!S[0][0].keyFrame&&S.length>1&&(k=S.shift(),S.byteLength-=k.byteLength,S.nalCount-=k.nalCount,S[0][0].dts=k.dts,S[0][0].pts=k.pts,S[0][0].duration+=k.duration),S},$=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},X=function(S,k){var D=$();return D.dataOffset=k,D.compositionTimeOffset=S.pts-S.dts,D.duration=S.duration,D.size=4*S.length,D.size+=S.byteLength,S.keyFrame&&(D.flags.dependsOn=2,D.flags.isNonSyncSample=0),D},W=function(S,k){var D,A,O,F,Z,se=k||0,le=[];for(D=0;D<S.length;D++)for(F=S[D],A=0;A<F.length;A++)Z=F[A],O=X(Z,se),se+=O.size,le.push(O);return le},ce=function(S){var k,D,A,O,F,Z,se=0,le=S.byteLength,pe=S.nalCount,we=le+4*pe,De=new Uint8Array(we),ft=new DataView(De.buffer);for(k=0;k<S.length;k++)for(O=S[k],D=0;D<O.length;D++)for(F=O[D],A=0;A<F.length;A++)Z=F[A],ft.setUint32(se,Z.data.byteLength),se+=4,De.set(Z.data,se),se+=Z.data.byteLength;return De},ne=function(S,k){var D,A=k||0,O=[];return D=X(S,A),O.push(D),O},ee=function(S){var k,D,A=0,O=S.byteLength,F=S.length,Z=O+4*F,se=new Uint8Array(Z),le=new DataView(se.buffer);for(k=0;k<S.length;k++)D=S[k],le.setUint32(A,D.data.byteLength),A+=4,se.set(D.data,A),A+=D.data.byteLength;return se},ge={groupNalsIntoFrames:Ve,groupFramesIntoGops:ot,extendFirstKeyFrame:fe,generateSampleTable:W,concatenateNalData:ce,generateSampleTableForFrame:ne,concatenateNalDataForFrame:ee},q=[33,16,5,32,164,27],re=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ie=function(S){for(var k=[];S--;)k.push(0);return k},Ee=function(S){return Object.keys(S).reduce(function(k,D){return k[D]=new Uint8Array(S[D].reduce(function(A,O){return A.concat(O)},[])),k},{})},Ne,Ae=function(){if(!Ne){var S={96e3:[q,[227,64],ie(154),[56]],88200:[q,[231],ie(170),[56]],64e3:[q,[248,192],ie(240),[56]],48e3:[q,[255,192],ie(268),[55,148,128],ie(54),[112]],44100:[q,[255,192],ie(268),[55,163,128],ie(84),[112]],32e3:[q,[255,192],ie(268),[55,234],ie(226),[112]],24e3:[q,[255,192],ie(268),[55,255,128],ie(268),[111,112],ie(126),[224]],16e3:[q,[255,192],ie(268),[55,255,128],ie(268),[111,255],ie(269),[223,108],ie(195),[1,192]],12e3:[re,ie(268),[3,127,248],ie(268),[6,255,240],ie(268),[13,255,224],ie(268),[27,253,128],ie(259),[56]],11025:[re,ie(268),[3,127,248],ie(268),[6,255,240],ie(268),[13,255,224],ie(268),[27,255,192],ie(268),[55,175,128],ie(108),[112]],8e3:[re,ie(268),[3,121,16],ie(47),[7]]};Ne=Ee(S)}return Ne},Se=9e4,Le,tt,lt,it,Pt,H,M;Le=function(S){return S*Se},tt=function(S,k){return S*k},lt=function(S){return S/Se},it=function(S,k){return S/k},Pt=function(S,k){return Le(it(S,k))},H=function(S,k){return tt(lt(S),k)},M=function(S,k,D){return lt(D?S:S-k)};var R={ONE_SECOND_IN_TS:Se,secondsToVideoTs:Le,secondsToAudioTs:tt,videoTsToSeconds:lt,audioTsToSeconds:it,audioTsToVideoTs:Pt,videoTsToAudioTs:H,metadataTsToSeconds:M},te=Ae,ye=R,Te=function(S){var k,D,A=0;for(k=0;k<S.length;k++)D=S[k],A+=D.data.byteLength;return A},$e=function(S,k,D,A){var O,F=0,Z=0,se=0,le=0,pe,we,De;if(k.length&&(O=ye.audioTsToVideoTs(S.baseMediaDecodeTime,S.samplerate),F=Math.ceil(ye.ONE_SECOND_IN_TS/(S.samplerate/1024)),D&&A&&(Z=O-Math.max(D,A),se=Math.floor(Z/F),le=se*F),!(se<1||le>ye.ONE_SECOND_IN_TS/2))){for(pe=te()[S.samplerate],pe||(pe=k[0].data),we=0;we<se;we++)De=k[0],k.splice(0,0,{data:pe,dts:De.dts-F,pts:De.pts-F});return S.baseMediaDecodeTime-=Math.floor(ye.videoTsToAudioTs(le,S.samplerate)),le}},wt=function(S,k,D){return k.minSegmentDts>=D?S:(k.minSegmentDts=1/0,S.filter(function(A){return A.dts>=D?(k.minSegmentDts=Math.min(k.minSegmentDts,A.dts),k.minSegmentPts=k.minSegmentDts,!0):!1}))},Ut=function(S){var k,D,A=[];for(k=0;k<S.length;k++)D=S[k],A.push({size:D.data.byteLength,duration:1024});return A},Rt=function(S){var k,D,A=0,O=new Uint8Array(Te(S));for(k=0;k<S.length;k++)D=S[k],O.set(D.data,A),A+=D.data.byteLength;return O},tn={prefixWithSilence:$e,trimAdtsFramesByEarliestDts:wt,generateSampleTable:Ut,concatenateFrameData:Rt},_t=R.ONE_SECOND_IN_TS,Hn=function(S,k){typeof k.pts=="number"&&(S.timelineStartInfo.pts===void 0&&(S.timelineStartInfo.pts=k.pts),S.minSegmentPts===void 0?S.minSegmentPts=k.pts:S.minSegmentPts=Math.min(S.minSegmentPts,k.pts),S.maxSegmentPts===void 0?S.maxSegmentPts=k.pts:S.maxSegmentPts=Math.max(S.maxSegmentPts,k.pts)),typeof k.dts=="number"&&(S.timelineStartInfo.dts===void 0&&(S.timelineStartInfo.dts=k.dts),S.minSegmentDts===void 0?S.minSegmentDts=k.dts:S.minSegmentDts=Math.min(S.minSegmentDts,k.dts),S.maxSegmentDts===void 0?S.maxSegmentDts=k.dts:S.maxSegmentDts=Math.max(S.maxSegmentDts,k.dts))},rs=function(S){delete S.minSegmentDts,delete S.maxSegmentDts,delete S.minSegmentPts,delete S.maxSegmentPts},is=function(S,k){var D,A,O=S.minSegmentDts;return k||(O-=S.timelineStartInfo.dts),D=S.timelineStartInfo.baseMediaDecodeTime,D+=O,D=Math.max(0,D),S.type==="audio"&&(A=S.samplerate/_t,D*=A,D=Math.floor(D)),D},ae={clearDtsInfo:rs,calculateTrackBaseMediaDecodeTime:is,collectDtsInfo:Hn},be=4,Ce=128,We=function(S){for(var k=0,D={payloadType:-1,payloadSize:0},A=0,O=0;k<S.byteLength&&S[k]!==Ce;){for(;S[k]===255;)A+=255,k++;for(A+=S[k++];S[k]===255;)O+=255,k++;if(O+=S[k++],!D.payload&&A===be){var F=String.fromCharCode(S[k+3],S[k+4],S[k+5],S[k+6]);if(F==="GA94"){D.payloadType=A,D.payloadSize=O,D.payload=S.subarray(k,k+O);break}else D.payload=void 0}k+=O,A=0,O=0}return D},Je=function(S){return S.payload[0]!==181||(S.payload[1]<<8|S.payload[2])!==49||String.fromCharCode(S.payload[3],S.payload[4],S.payload[5],S.payload[6])!=="GA94"||S.payload[7]!==3?null:S.payload.subarray(8,S.payload.length-1)},et=function(S,k){var D=[],A,O,F,Z;if(!(k[0]&64))return D;for(O=k[0]&31,A=0;A<O;A++)F=A*3,Z={type:k[F+2]&3,pts:S},k[F+2]&4&&(Z.ccData=k[F+3]<<8|k[F+4],D.push(Z));return D},yt=function(S){for(var k=S.byteLength,D=[],A=1,O,F;A<k-2;)S[A]===0&&S[A+1]===0&&S[A+2]===3?(D.push(A+2),A+=2):A++;if(D.length===0)return S;O=k-D.length,F=new Uint8Array(O);var Z=0;for(A=0;A<O;Z++,A++)Z===D[0]&&(Z++,D.shift()),F[A]=S[Z];return F},ut={parseSei:We,parseUserData:Je,parseCaptionPackets:et,discardEmulationPreventionBytes:yt,USER_DATA_REGISTERED_ITU_T_T35:be},Vt=n,zt=ut,Tt=function(S){S=S||{},Tt.prototype.init.call(this),this.parse708captions_=typeof S.parse708captions=="boolean"?S.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new gn(0,0),new gn(0,1),new gn(1,0),new gn(1,1)],this.parse708captions_&&(this.cc708Stream_=new Nt({captionServices:S.captionServices})),this.reset(),this.ccStreams_.forEach(function(k){k.on("data",this.trigger.bind(this,"data")),k.on("partialdone",this.trigger.bind(this,"partialdone")),k.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Tt.prototype=new Vt,Tt.prototype.push=function(S){var k,D,A;if(S.nalUnitType==="sei_rbsp"&&(k=zt.parseSei(S.escapedRBSP),!!k.payload&&k.payloadType===zt.USER_DATA_REGISTERED_ITU_T_T35&&(D=zt.parseUserData(k),!!D))){if(S.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(S.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}A=zt.parseCaptionPackets(S.pts,D),this.captionPackets_=this.captionPackets_.concat(A),this.latestDts_!==S.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=S.dts}},Tt.prototype.flushCCStreams=function(S){this.ccStreams_.forEach(function(k){return S==="flush"?k.flush():k.partialFlush()},this)},Tt.prototype.flushStream=function(S){if(!this.captionPackets_.length){this.flushCCStreams(S);return}this.captionPackets_.forEach(function(k,D){k.presortIndex=D}),this.captionPackets_.sort(function(k,D){return k.pts===D.pts?k.presortIndex-D.presortIndex:k.pts-D.pts}),this.captionPackets_.forEach(function(k){k.type<2?this.dispatchCea608Packet(k):this.dispatchCea708Packet(k)},this),this.captionPackets_.length=0,this.flushCCStreams(S)},Tt.prototype.flush=function(){return this.flushStream("flush")},Tt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Tt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(S){S.reset()})},Tt.prototype.dispatchCea608Packet=function(S){this.setsTextOrXDSActive(S)?this.activeCea608Channel_[S.type]=null:this.setsChannel1Active(S)?this.activeCea608Channel_[S.type]=0:this.setsChannel2Active(S)&&(this.activeCea608Channel_[S.type]=1),this.activeCea608Channel_[S.type]!==null&&this.ccStreams_[(S.type<<1)+this.activeCea608Channel_[S.type]].push(S)},Tt.prototype.setsChannel1Active=function(S){return(S.ccData&30720)===4096},Tt.prototype.setsChannel2Active=function(S){return(S.ccData&30720)===6144},Tt.prototype.setsTextOrXDSActive=function(S){return(S.ccData&28928)===256||(S.ccData&30974)===4138||(S.ccData&30974)===6186},Tt.prototype.dispatchCea708Packet=function(S){this.parse708captions_&&this.cc708Stream_.push(S)};var Et={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Ht=function(S){var k=Et[S]||S;return S&4096&&S===k?"":String.fromCharCode(k)},Sn=function(S){return 32<=S&&S<=127||160<=S&&S<=255},xn=function(S){this.windowNum=S,this.reset()};xn.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},xn.prototype.getText=function(){return this.rows.join(`
`)},xn.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},xn.prototype.newLine=function(S){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(S),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},xn.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},xn.prototype.addText=function(S){this.rows[this.rowIdx]+=S},xn.prototype.backspace=function(){if(!this.isEmpty()){var S=this.rows[this.rowIdx];this.rows[this.rowIdx]=S.substr(0,S.length-1)}};var On=function(S,k,D){this.serviceNum=S,this.text="",this.currentWindow=new xn(-1),this.windows=[],this.stream=D,typeof k=="string"&&this.createTextDecoder(k)};On.prototype.init=function(S,k){this.startPts=S;for(var D=0;D<8;D++)this.windows[D]=new xn(D),typeof k=="function"&&(this.windows[D].beforeRowOverflow=k)},On.prototype.setCurrentWindow=function(S){this.currentWindow=this.windows[S]},On.prototype.createTextDecoder=function(S){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(S)}catch(k){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+S+" encoding. "+k})}};var Nt=function(S){S=S||{},Nt.prototype.init.call(this);var k=this,D=S.captionServices||{},A={},O;Object.keys(D).forEach(F=>{O=D[F],/^SERVICE/.test(F)&&(A[F]=O.encoding)}),this.serviceEncodings=A,this.current708Packet=null,this.services={},this.push=function(F){F.type===3?(k.new708Packet(),k.add708Bytes(F)):(k.current708Packet===null&&k.new708Packet(),k.add708Bytes(F))}};Nt.prototype=new Vt,Nt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Nt.prototype.add708Bytes=function(S){var k=S.ccData,D=k>>>8,A=k&255;this.current708Packet.ptsVals.push(S.pts),this.current708Packet.data.push(D),this.current708Packet.data.push(A)},Nt.prototype.push708Packet=function(){var S=this.current708Packet,k=S.data,D=null,A=null,O=0,F=k[O++];for(S.seq=F>>6,S.sizeCode=F&63;O<k.length;O++)F=k[O++],D=F>>5,A=F&31,D===7&&A>0&&(F=k[O++],D=F),this.pushServiceBlock(D,O,A),A>0&&(O+=A-1)},Nt.prototype.pushServiceBlock=function(S,k,D){var A,O=k,F=this.current708Packet.data,Z=this.services[S];for(Z||(Z=this.initService(S,O));O<k+D&&O<F.length;O++)A=F[O],Sn(A)?O=this.handleText(O,Z):A===24?O=this.multiByteCharacter(O,Z):A===16?O=this.extendedCommands(O,Z):128<=A&&A<=135?O=this.setCurrentWindow(O,Z):152<=A&&A<=159?O=this.defineWindow(O,Z):A===136?O=this.clearWindows(O,Z):A===140?O=this.deleteWindows(O,Z):A===137?O=this.displayWindows(O,Z):A===138?O=this.hideWindows(O,Z):A===139?O=this.toggleWindows(O,Z):A===151?O=this.setWindowAttributes(O,Z):A===144?O=this.setPenAttributes(O,Z):A===145?O=this.setPenColor(O,Z):A===146?O=this.setPenLocation(O,Z):A===143?Z=this.reset(O,Z):A===8?Z.currentWindow.backspace():A===12?Z.currentWindow.clearText():A===13?Z.currentWindow.pendingNewLine=!0:A===14?Z.currentWindow.clearText():A===141&&O++},Nt.prototype.extendedCommands=function(S,k){var D=this.current708Packet.data,A=D[++S];return Sn(A)&&(S=this.handleText(S,k,{isExtended:!0})),S},Nt.prototype.getPts=function(S){return this.current708Packet.ptsVals[Math.floor(S/2)]},Nt.prototype.initService=function(S,k){var A="SERVICE"+S,D=this,A,O;return A in this.serviceEncodings&&(O=this.serviceEncodings[A]),this.services[S]=new On(S,O,D),this.services[S].init(this.getPts(k),function(F){D.flushDisplayed(F,D.services[S])}),this.services[S]},Nt.prototype.handleText=function(S,k,D){var A=D&&D.isExtended,O=D&&D.isMultiByte,F=this.current708Packet.data,Z=A?4096:0,se=F[S],le=F[S+1],pe=k.currentWindow,we,De;function ft(Ge){return Ge.map(St=>("0"+(St&255).toString(16)).slice(-2)).join("")}if(O?(De=[se,le],S++):De=[se],k.textDecoder_&&!A)we=k.textDecoder_.decode(new Uint8Array(De));else if(O){const Ge=ft(De);we=String.fromCharCode(parseInt(Ge,16))}else we=Ht(Z|se);return pe.pendingNewLine&&!pe.isEmpty()&&pe.newLine(this.getPts(S)),pe.pendingNewLine=!1,pe.addText(we),S},Nt.prototype.multiByteCharacter=function(S,k){var D=this.current708Packet.data,A=D[S+1],O=D[S+2];return Sn(A)&&Sn(O)&&(S=this.handleText(++S,k,{isMultiByte:!0})),S},Nt.prototype.setCurrentWindow=function(S,k){var D=this.current708Packet.data,A=D[S],O=A&7;return k.setCurrentWindow(O),S},Nt.prototype.defineWindow=function(S,k){var D=this.current708Packet.data,A=D[S],O=A&7;k.setCurrentWindow(O);var F=k.currentWindow;return A=D[++S],F.visible=(A&32)>>5,F.rowLock=(A&16)>>4,F.columnLock=(A&8)>>3,F.priority=A&7,A=D[++S],F.relativePositioning=(A&128)>>7,F.anchorVertical=A&127,A=D[++S],F.anchorHorizontal=A,A=D[++S],F.anchorPoint=(A&240)>>4,F.rowCount=A&15,A=D[++S],F.columnCount=A&63,A=D[++S],F.windowStyle=(A&56)>>3,F.penStyle=A&7,F.virtualRowCount=F.rowCount+1,S},Nt.prototype.setWindowAttributes=function(S,k){var D=this.current708Packet.data,A=D[S],O=k.currentWindow.winAttr;return A=D[++S],O.fillOpacity=(A&192)>>6,O.fillRed=(A&48)>>4,O.fillGreen=(A&12)>>2,O.fillBlue=A&3,A=D[++S],O.borderType=(A&192)>>6,O.borderRed=(A&48)>>4,O.borderGreen=(A&12)>>2,O.borderBlue=A&3,A=D[++S],O.borderType+=(A&128)>>5,O.wordWrap=(A&64)>>6,O.printDirection=(A&48)>>4,O.scrollDirection=(A&12)>>2,O.justify=A&3,A=D[++S],O.effectSpeed=(A&240)>>4,O.effectDirection=(A&12)>>2,O.displayEffect=A&3,S},Nt.prototype.flushDisplayed=function(S,k){for(var D=[],A=0;A<8;A++)k.windows[A].visible&&!k.windows[A].isEmpty()&&D.push(k.windows[A].getText());k.endPts=S,k.text=D.join(`

`),this.pushCaption(k),k.startPts=S},Nt.prototype.pushCaption=function(S){S.text!==""&&(this.trigger("data",{startPts:S.startPts,endPts:S.endPts,text:S.text,stream:"cc708_"+S.serviceNum}),S.text="",S.startPts=S.endPts)},Nt.prototype.displayWindows=function(S,k){var D=this.current708Packet.data,A=D[++S],O=this.getPts(S);this.flushDisplayed(O,k);for(var F=0;F<8;F++)A&1<<F&&(k.windows[F].visible=1);return S},Nt.prototype.hideWindows=function(S,k){var D=this.current708Packet.data,A=D[++S],O=this.getPts(S);this.flushDisplayed(O,k);for(var F=0;F<8;F++)A&1<<F&&(k.windows[F].visible=0);return S},Nt.prototype.toggleWindows=function(S,k){var D=this.current708Packet.data,A=D[++S],O=this.getPts(S);this.flushDisplayed(O,k);for(var F=0;F<8;F++)A&1<<F&&(k.windows[F].visible^=1);return S},Nt.prototype.clearWindows=function(S,k){var D=this.current708Packet.data,A=D[++S],O=this.getPts(S);this.flushDisplayed(O,k);for(var F=0;F<8;F++)A&1<<F&&k.windows[F].clearText();return S},Nt.prototype.deleteWindows=function(S,k){var D=this.current708Packet.data,A=D[++S],O=this.getPts(S);this.flushDisplayed(O,k);for(var F=0;F<8;F++)A&1<<F&&k.windows[F].reset();return S},Nt.prototype.setPenAttributes=function(S,k){var D=this.current708Packet.data,A=D[S],O=k.currentWindow.penAttr;return A=D[++S],O.textTag=(A&240)>>4,O.offset=(A&12)>>2,O.penSize=A&3,A=D[++S],O.italics=(A&128)>>7,O.underline=(A&64)>>6,O.edgeType=(A&56)>>3,O.fontStyle=A&7,S},Nt.prototype.setPenColor=function(S,k){var D=this.current708Packet.data,A=D[S],O=k.currentWindow.penColor;return A=D[++S],O.fgOpacity=(A&192)>>6,O.fgRed=(A&48)>>4,O.fgGreen=(A&12)>>2,O.fgBlue=A&3,A=D[++S],O.bgOpacity=(A&192)>>6,O.bgRed=(A&48)>>4,O.bgGreen=(A&12)>>2,O.bgBlue=A&3,A=D[++S],O.edgeRed=(A&48)>>4,O.edgeGreen=(A&12)>>2,O.edgeBlue=A&3,S},Nt.prototype.setPenLocation=function(S,k){var D=this.current708Packet.data,A=D[S],O=k.currentWindow.penLoc;return k.currentWindow.pendingNewLine=!0,A=D[++S],O.row=A&15,A=D[++S],O.column=A&63,S},Nt.prototype.reset=function(S,k){var D=this.getPts(S);return this.flushDisplayed(D,k),this.initService(k.serviceNum,S)};var ys={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Aa=function(S){return S===null?"":(S=ys[S]||S,String.fromCharCode(S))},Da=14,zc=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Qr=function(){for(var S=[],k=Da+1;k--;)S.push({text:"",indent:0,offset:0});return S},gn=function(S,k){gn.prototype.init.call(this),this.field_=S||0,this.dataChannel_=k||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(D){var A,O,F,Z,se;if(A=D.ccData&32639,A===this.lastControlCode_){this.lastControlCode_=null;return}if((A&61440)===4096?this.lastControlCode_=A:A!==this.PADDING_&&(this.lastControlCode_=null),F=A>>>8,Z=A&255,A!==this.PADDING_)if(A===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(A===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(D.pts),this.flushDisplayed(D.pts),O=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=O,this.startPts_=D.pts;else if(A===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(D.pts);else if(A===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(D.pts);else if(A===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(D.pts);else if(A===this.CARRIAGE_RETURN_)this.clearFormatting(D.pts),this.flushDisplayed(D.pts),this.shiftRowsUp_(),this.startPts_=D.pts;else if(A===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(A===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(D.pts),this.displayed_=Qr();else if(A===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Qr();else if(A===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(D.pts),this.displayed_=Qr()),this.mode_="paintOn",this.startPts_=D.pts;else if(this.isSpecialCharacter(F,Z))F=(F&3)<<8,se=Aa(F|Z),this[this.mode_](D.pts,se),this.column_++;else if(this.isExtCharacter(F,Z))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),F=(F&3)<<8,se=Aa(F|Z),this[this.mode_](D.pts,se),this.column_++;else if(this.isMidRowCode(F,Z))this.clearFormatting(D.pts),this[this.mode_](D.pts," "),this.column_++,(Z&14)===14&&this.addFormatting(D.pts,["i"]),(Z&1)===1&&this.addFormatting(D.pts,["u"]);else if(this.isOffsetControlCode(F,Z)){const pe=Z&3;this.nonDisplayed_[this.row_].offset=pe,this.column_+=pe}else if(this.isPAC(F,Z)){var le=zc.indexOf(A&7968);if(this.mode_==="rollUp"&&(le-this.rollUpRows_+1<0&&(le=this.rollUpRows_-1),this.setRollUp(D.pts,le)),le!==this.row_&&le>=0&&le<=14&&(this.clearFormatting(D.pts),this.row_=le),Z&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(D.pts,["u"]),(A&16)===16){const pe=(A&14)>>1;this.column_=pe*4,this.nonDisplayed_[this.row_].indent+=pe}this.isColorPAC(Z)&&(Z&14)===14&&this.addFormatting(D.pts,["i"])}else this.isNormalChar(F)&&(Z===0&&(Z=null),se=Aa(F),se+=Aa(Z),this[this.mode_](D.pts,se),this.column_+=se.length)}};gn.prototype=new Vt,gn.prototype.flushDisplayed=function(S){const k=A=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+A+"."})},D=[];this.displayed_.forEach((A,O)=>{if(A&&A.text&&A.text.length){try{A.text=A.text.trim()}catch{k(O)}A.text.length&&D.push({text:A.text,line:O+1,position:10+Math.min(70,A.indent*10)+A.offset*2.5})}else A==null&&k(O)}),D.length&&this.trigger("data",{startPts:this.startPts_,endPts:S,content:D,stream:this.name_})},gn.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Qr(),this.nonDisplayed_=Qr(),this.lastControlCode_=null,this.column_=0,this.row_=Da,this.rollUpRows_=2,this.formatting_=[]},gn.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},gn.prototype.isSpecialCharacter=function(S,k){return S===this.EXT_&&k>=48&&k<=63},gn.prototype.isExtCharacter=function(S,k){return(S===this.EXT_+1||S===this.EXT_+2)&&k>=32&&k<=63},gn.prototype.isMidRowCode=function(S,k){return S===this.EXT_&&k>=32&&k<=47},gn.prototype.isOffsetControlCode=function(S,k){return S===this.OFFSET_&&k>=33&&k<=35},gn.prototype.isPAC=function(S,k){return S>=this.BASE_&&S<this.BASE_+8&&k>=64&&k<=127},gn.prototype.isColorPAC=function(S){return S>=64&&S<=79||S>=96&&S<=127},gn.prototype.isNormalChar=function(S){return S>=32&&S<=127},gn.prototype.setRollUp=function(S,k){if(this.mode_!=="rollUp"&&(this.row_=Da,this.mode_="rollUp",this.flushDisplayed(S),this.nonDisplayed_=Qr(),this.displayed_=Qr()),k!==void 0&&k!==this.row_)for(var D=0;D<this.rollUpRows_;D++)this.displayed_[k-D]=this.displayed_[this.row_-D],this.displayed_[this.row_-D]={text:"",indent:0,offset:0};k===void 0&&(k=this.row_),this.topRow_=k-this.rollUpRows_+1},gn.prototype.addFormatting=function(S,k){this.formatting_=this.formatting_.concat(k);var D=k.reduce(function(A,O){return A+"<"+O+">"},"");this[this.mode_](S,D)},gn.prototype.clearFormatting=function(S){if(this.formatting_.length){var k=this.formatting_.reverse().reduce(function(D,A){return D+"</"+A+">"},"");this.formatting_=[],this[this.mode_](S,k)}},gn.prototype.popOn=function(S,k){var D=this.nonDisplayed_[this.row_].text;D+=k,this.nonDisplayed_[this.row_].text=D},gn.prototype.rollUp=function(S,k){var D=this.displayed_[this.row_].text;D+=k,this.displayed_[this.row_].text=D},gn.prototype.shiftRowsUp_=function(){var S;for(S=0;S<this.topRow_;S++)this.displayed_[S]={text:"",indent:0,offset:0};for(S=this.row_+1;S<Da+1;S++)this.displayed_[S]={text:"",indent:0,offset:0};for(S=this.topRow_;S<this.row_;S++)this.displayed_[S]=this.displayed_[S+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},gn.prototype.paintOn=function(S,k){var D=this.displayed_[this.row_].text;D+=k,this.displayed_[this.row_].text=D};var Hs={CaptionStream:Tt,Cea608Stream:gn,Cea708Stream:Nt},Hc={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},eg=n,tg=8589934592,ng=4294967296,Jh="shared",Ho=function(S,k){var D=1;for(S>k&&(D=-1);Math.abs(k-S)>ng;)S+=D*tg;return S},qc=function(S){var k,D;qc.prototype.init.call(this),this.type_=S||Jh,this.push=function(A){if(A.type==="metadata"){this.trigger("data",A);return}this.type_!==Jh&&A.type!==this.type_||(D===void 0&&(D=A.dts),A.dts=Ho(A.dts,D),A.pts=Ho(A.pts,D),k=A.dts,this.trigger("data",A))},this.flush=function(){D=k,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){D=void 0,k=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};qc.prototype=new eg;var $l={TimestampRolloverStream:qc,handleRollover:Ho},Pa=(S,k,D)=>{if(!S)return-1;for(var A=D;A<S.length;A++)if(S[A]===k)return A;return-1},bd={typedArrayIndexOf:Pa},Wc=bd.typedArrayIndexOf,Gc={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},ef=function(S,k,D){var A,O="";for(A=k;A<D;A++)O+="%"+("00"+S[A].toString(16)).slice(-2);return O},Ul=function(S,k,D){return decodeURIComponent(ef(S,k,D))},Vl=function(S,k,D){return unescape(ef(S,k,D))},Ia=function(S){return S[0]<<21|S[1]<<14|S[2]<<7|S[3]},mo={APIC:function(S){var k=1,D,A,O="-->";S.data[0]===Gc.Utf8&&(D=Wc(S.data,0,k),!(D<0)&&(S.mimeType=Vl(S.data,k,D),k=D+1,S.pictureType=S.data[k],k++,A=Wc(S.data,0,k),!(A<0)&&(S.description=Ul(S.data,k,A),k=A+1,S.mimeType===O?S.url=Vl(S.data,k,S.data.length):S.pictureData=S.data.subarray(k,S.data.length))))},"T*":function(S){S.data[0]===Gc.Utf8&&(S.value=Ul(S.data,1,S.data.length).replace(/\0*$/,""),S.values=S.value.split("\0"))},TXXX:function(S){var k;S.data[0]===Gc.Utf8&&(k=Wc(S.data,0,1),k!==-1&&(S.description=Ul(S.data,1,k),S.value=Ul(S.data,k+1,S.data.length).replace(/\0*$/,""),S.data=S.value))},"W*":function(S){S.url=Vl(S.data,0,S.data.length).replace(/\0.*$/,"")},WXXX:function(S){var k;S.data[0]===Gc.Utf8&&(k=Wc(S.data,0,1),k!==-1&&(S.description=Ul(S.data,1,k),S.url=Vl(S.data,k+1,S.data.length).replace(/\0.*$/,"")))},PRIV:function(S){var k;for(k=0;k<S.data.length;k++)if(S.data[k]===0){S.owner=Vl(S.data,0,k);break}S.privateData=S.data.subarray(k+1),S.data=S.privateData}},zl=function(S){var k,D,A=10,O=0,F=[];if(!(S.length<10||S[0]!==73||S[1]!==68||S[2]!==51)){O=Ia(S.subarray(6,10)),O+=10;var Z=S[5]&64;Z&&(A+=4,A+=Ia(S.subarray(10,14)),O-=Ia(S.subarray(16,20)));do{if(k=Ia(S.subarray(A+4,A+8)),k<1)break;D=String.fromCharCode(S[A],S[A+1],S[A+2],S[A+3]);var se={id:D,data:S.subarray(A+10,A+k+10)};se.key=se.id,mo[se.id]?mo[se.id](se):se.id[0]==="T"?mo["T*"](se):se.id[0]==="W"&&mo["W*"](se),F.push(se),A+=10,A+=k}while(A<O);return F}},_d={parseId3Frames:zl,parseSyncSafeInteger:Ia,frameParsers:mo},tf=n,sg=Hc,Ma=_d,Yc;Yc=function(S){var k={descriptor:S&&S.descriptor},D=0,A=[],O=0,F;if(Yc.prototype.init.call(this),this.dispatchType=sg.METADATA_STREAM_TYPE.toString(16),k.descriptor)for(F=0;F<k.descriptor.length;F++)this.dispatchType+=("00"+k.descriptor[F].toString(16)).slice(-2);this.push=function(Z){var se,le,pe,we,De,ft;if(Z.type==="timed-metadata"){if(Z.dataAlignmentIndicator&&(O=0,A.length=0),A.length===0&&(Z.data.length<10||Z.data[0]!==73||Z.data[1]!==68||Z.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(A.push(Z),O+=Z.data.byteLength,A.length===1&&(D=Ma.parseSyncSafeInteger(Z.data.subarray(6,10)),D+=10),!(O<D)){for(se={data:new Uint8Array(D),frames:[],pts:A[0].pts,dts:A[0].dts},De=0;De<D;)se.data.set(A[0].data.subarray(0,D-De),De),De+=A[0].data.byteLength,O-=A[0].data.byteLength,A.shift();le=10,se.data[5]&64&&(le+=4,le+=Ma.parseSyncSafeInteger(se.data.subarray(10,14)),D-=Ma.parseSyncSafeInteger(se.data.subarray(16,20)));do{if(pe=Ma.parseSyncSafeInteger(se.data.subarray(le+4,le+8)),pe<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(ft=String.fromCharCode(se.data[le],se.data[le+1],se.data[le+2],se.data[le+3]),we={id:ft,data:se.data.subarray(le+10,le+pe+10)},we.key=we.id,Ma.frameParsers[we.id]?Ma.frameParsers[we.id](we):we.id[0]==="T"?Ma.frameParsers["T*"](we):we.id[0]==="W"&&Ma.frameParsers["W*"](we),we.owner==="com.apple.streaming.transportStreamTimestamp"){var Ge=we.data,St=(Ge[3]&1)<<30|Ge[4]<<22|Ge[5]<<14|Ge[6]<<6|Ge[7]>>>2;St*=4,St+=Ge[7]&3,we.timeStamp=St,se.pts===void 0&&se.dts===void 0&&(se.pts=we.timeStamp,se.dts=we.timeStamp),this.trigger("timestamp",we)}se.frames.push(we),le+=10,le+=pe}while(le<D);this.trigger("data",se)}}}},Yc.prototype=new tf;var rg=Yc,Hl=n,wd=Hs,Zr=Hc,ql=$l.TimestampRolloverStream,Rr,Jr,Ti,qo=188,Ei=71;Rr=function(){var S=new Uint8Array(qo),k=0;Rr.prototype.init.call(this),this.push=function(D){var A=0,O=qo,F;for(k?(F=new Uint8Array(D.byteLength+k),F.set(S.subarray(0,k)),F.set(D,k),k=0):F=D;O<F.byteLength;){if(F[A]===Ei&&F[O]===Ei){this.trigger("data",F.subarray(A,O)),A+=qo,O+=qo;continue}A++,O++}A<F.byteLength&&(S.set(F.subarray(A),0),k=F.byteLength-A)},this.flush=function(){k===qo&&S[0]===Ei&&(this.trigger("data",S),k=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){k=0,this.trigger("reset")}},Rr.prototype=new Hl,Jr=function(){var S,k,D,A;Jr.prototype.init.call(this),A=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,S=function(O,F){var Z=0;F.payloadUnitStartIndicator&&(Z+=O[Z]+1),F.type==="pat"?k(O.subarray(Z),F):D(O.subarray(Z),F)},k=function(O,F){F.section_number=O[7],F.last_section_number=O[8],A.pmtPid=(O[10]&31)<<8|O[11],F.pmtPid=A.pmtPid},D=function(O,F){var Z,se,le,pe;if(O[5]&1){for(A.programMapTable={video:null,audio:null,"timed-metadata":{}},Z=(O[1]&15)<<8|O[2],se=3+Z-4,le=(O[10]&15)<<8|O[11],pe=12+le;pe<se;){var we=O[pe],De=(O[pe+1]&31)<<8|O[pe+2];we===Zr.H264_STREAM_TYPE&&A.programMapTable.video===null?A.programMapTable.video=De:we===Zr.ADTS_STREAM_TYPE&&A.programMapTable.audio===null?A.programMapTable.audio=De:we===Zr.METADATA_STREAM_TYPE&&(A.programMapTable["timed-metadata"][De]=we),pe+=((O[pe+3]&15)<<8|O[pe+4])+5}F.programMapTable=A.programMapTable}},this.push=function(O){var F={},Z=4;if(F.payloadUnitStartIndicator=!!(O[1]&64),F.pid=O[1]&31,F.pid<<=8,F.pid|=O[2],(O[3]&48)>>>4>1&&(Z+=O[Z]+1),F.pid===0)F.type="pat",S(O.subarray(Z),F),this.trigger("data",F);else if(F.pid===this.pmtPid)for(F.type="pmt",S(O.subarray(Z),F),this.trigger("data",F);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([O,Z,F]):this.processPes_(O,Z,F)},this.processPes_=function(O,F,Z){Z.pid===this.programMapTable.video?Z.streamType=Zr.H264_STREAM_TYPE:Z.pid===this.programMapTable.audio?Z.streamType=Zr.ADTS_STREAM_TYPE:Z.streamType=this.programMapTable["timed-metadata"][Z.pid],Z.type="pes",Z.data=O.subarray(F),this.trigger("data",Z)}},Jr.prototype=new Hl,Jr.STREAM_TYPES={h264:27,adts:15},Ti=function(){var S=this,k=!1,D={data:[],size:0},A={data:[],size:0},O={data:[],size:0},F,Z=function(le,pe){var we;const De=le[0]<<16|le[1]<<8|le[2];pe.data=new Uint8Array,De===1&&(pe.packetLength=6+(le[4]<<8|le[5]),pe.dataAlignmentIndicator=(le[6]&4)!==0,we=le[7],we&192&&(pe.pts=(le[9]&14)<<27|(le[10]&255)<<20|(le[11]&254)<<12|(le[12]&255)<<5|(le[13]&254)>>>3,pe.pts*=4,pe.pts+=(le[13]&6)>>>1,pe.dts=pe.pts,we&64&&(pe.dts=(le[14]&14)<<27|(le[15]&255)<<20|(le[16]&254)<<12|(le[17]&255)<<5|(le[18]&254)>>>3,pe.dts*=4,pe.dts+=(le[18]&6)>>>1)),pe.data=le.subarray(9+le[8]))},se=function(le,pe,we){var De=new Uint8Array(le.size),ft={type:pe},Ge=0,St=0,It=!1,Js;if(!(!le.data.length||le.size<9)){for(ft.trackId=le.data[0].pid,Ge=0;Ge<le.data.length;Ge++)Js=le.data[Ge],De.set(Js.data,St),St+=Js.data.byteLength;Z(De,ft),It=pe==="video"||ft.packetLength<=le.size,(we||It)&&(le.size=0,le.data.length=0),It&&S.trigger("data",ft)}};Ti.prototype.init.call(this),this.push=function(le){({pat:function(){},pes:function(){var pe,we;switch(le.streamType){case Zr.H264_STREAM_TYPE:pe=D,we="video";break;case Zr.ADTS_STREAM_TYPE:pe=A,we="audio";break;case Zr.METADATA_STREAM_TYPE:pe=O,we="timed-metadata";break;default:return}le.payloadUnitStartIndicator&&se(pe,we,!0),pe.data.push(le),pe.size+=le.data.byteLength},pmt:function(){var pe={type:"metadata",tracks:[]};F=le.programMapTable,F.video!==null&&pe.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.video,codec:"avc",type:"video"}),F.audio!==null&&pe.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.audio,codec:"adts",type:"audio"}),k=!0,S.trigger("data",pe)}})[le.type]()},this.reset=function(){D.size=0,D.data.length=0,A.size=0,A.data.length=0,this.trigger("reset")},this.flushStreams_=function(){se(D,"video"),se(A,"audio"),se(O,"timed-metadata")},this.flush=function(){if(!k&&F){var le={type:"metadata",tracks:[]};F.video!==null&&le.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.video,codec:"avc",type:"video"}),F.audio!==null&&le.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.audio,codec:"adts",type:"audio"}),S.trigger("data",le)}k=!1,this.flushStreams_(),this.trigger("done")}},Ti.prototype=new Hl;var nf={PAT_PID:0,MP2T_PACKET_LENGTH:qo,TransportPacketStream:Rr,TransportParseStream:Jr,ElementaryStream:Ti,TimestampRolloverStream:ql,CaptionStream:wd.CaptionStream,Cea608Stream:wd.Cea608Stream,Cea708Stream:wd.Cea708Stream,MetadataStream:rg};for(var Cd in Zr)Zr.hasOwnProperty(Cd)&&(nf[Cd]=Zr[Cd]);var ig=nf,ag=n,sf=R.ONE_SECOND_IN_TS,qs,Sd=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];qs=function(S){var k,D=0;qs.prototype.init.call(this),this.skipWarn_=function(A,O){this.trigger("log",{level:"warn",message:`adts skiping bytes ${A} to ${O} in frame ${D} outside syncword`})},this.push=function(A){var O=0,F,Z,se,le,pe;if(S||(D=0),A.type==="audio"){k&&k.length?(se=k,k=new Uint8Array(se.byteLength+A.data.byteLength),k.set(se),k.set(A.data,se.byteLength)):k=A.data;for(var we;O+7<k.length;){if(k[O]!==255||(k[O+1]&246)!==240){typeof we!="number"&&(we=O),O++;continue}if(typeof we=="number"&&(this.skipWarn_(we,O),we=null),Z=(~k[O+1]&1)*2,F=(k[O+3]&3)<<11|k[O+4]<<3|(k[O+5]&224)>>5,le=((k[O+6]&3)+1)*1024,pe=le*sf/Sd[(k[O+2]&60)>>>2],k.byteLength-O<F)break;this.trigger("data",{pts:A.pts+D*pe,dts:A.dts+D*pe,sampleCount:le,audioobjecttype:(k[O+2]>>>6&3)+1,channelcount:(k[O+2]&1)<<2|(k[O+3]&192)>>>6,samplerate:Sd[(k[O+2]&60)>>>2],samplingfrequencyindex:(k[O+2]&60)>>>2,samplesize:16,data:k.subarray(O+7+Z,O+F)}),D++,O+=F}typeof we=="number"&&(this.skipWarn_(we,O),we=null),k=k.subarray(O)}},this.flush=function(){D=0,this.trigger("done")},this.reset=function(){k=void 0,this.trigger("reset")},this.endTimeline=function(){k=void 0,this.trigger("endedtimeline")}},qs.prototype=new ag;var rf=qs,Wl;Wl=function(S){var k=S.byteLength,D=0,A=0;this.length=function(){return 8*k},this.bitsAvailable=function(){return 8*k+A},this.loadWord=function(){var O=S.byteLength-k,F=new Uint8Array(4),Z=Math.min(4,k);if(Z===0)throw new Error("no bytes available");F.set(S.subarray(O,O+Z)),D=new DataView(F.buffer).getUint32(0),A=Z*8,k-=Z},this.skipBits=function(O){var F;A>O?(D<<=O,A-=O):(O-=A,F=Math.floor(O/8),O-=F*8,k-=F,this.loadWord(),D<<=O,A-=O)},this.readBits=function(O){var F=Math.min(A,O),Z=D>>>32-F;return A-=F,A>0?D<<=F:k>0&&this.loadWord(),F=O-F,F>0?Z<<F|this.readBits(F):Z},this.skipLeadingZeros=function(){var O;for(O=0;O<A;++O)if(D&2147483648>>>O)return D<<=O,A-=O,O;return this.loadWord(),O+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var O=this.skipLeadingZeros();return this.readBits(O+1)-1},this.readExpGolomb=function(){var O=this.readUnsignedExpGolomb();return 1&O?1+O>>>1:-1*(O>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var jd=Wl,Gl=n,og=jd,Yl,go,Td;go=function(){var S=0,k,D;go.prototype.init.call(this),this.push=function(A){var O;D?(O=new Uint8Array(D.byteLength+A.data.byteLength),O.set(D),O.set(A.data,D.byteLength),D=O):D=A.data;for(var F=D.byteLength;S<F-3;S++)if(D[S+2]===1){k=S+5;break}for(;k<F;)switch(D[k]){case 0:if(D[k-1]!==0){k+=2;break}else if(D[k-2]!==0){k++;break}S+3!==k-2&&this.trigger("data",D.subarray(S+3,k-2));do k++;while(D[k]!==1&&k<F);S=k-2,k+=3;break;case 1:if(D[k-1]!==0||D[k-2]!==0){k+=3;break}this.trigger("data",D.subarray(S+3,k-2)),S=k-2,k+=3;break;default:k+=3;break}D=D.subarray(S),k-=S,S=0},this.reset=function(){D=null,S=0,this.trigger("reset")},this.flush=function(){D&&D.byteLength>3&&this.trigger("data",D.subarray(S+3)),D=null,S=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},go.prototype=new Gl,Td={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Yl=function(){var S=new go,k,D,A,O,F,Z,se;Yl.prototype.init.call(this),k=this,this.push=function(le){le.type==="video"&&(D=le.trackId,A=le.pts,O=le.dts,S.push(le))},S.on("data",function(le){var pe={trackId:D,pts:A,dts:O,data:le,nalUnitTypeCode:le[0]&31};switch(pe.nalUnitTypeCode){case 5:pe.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:pe.nalUnitType="sei_rbsp",pe.escapedRBSP=F(le.subarray(1));break;case 7:pe.nalUnitType="seq_parameter_set_rbsp",pe.escapedRBSP=F(le.subarray(1)),pe.config=Z(pe.escapedRBSP);break;case 8:pe.nalUnitType="pic_parameter_set_rbsp";break;case 9:pe.nalUnitType="access_unit_delimiter_rbsp";break}k.trigger("data",pe)}),S.on("done",function(){k.trigger("done")}),S.on("partialdone",function(){k.trigger("partialdone")}),S.on("reset",function(){k.trigger("reset")}),S.on("endedtimeline",function(){k.trigger("endedtimeline")}),this.flush=function(){S.flush()},this.partialFlush=function(){S.partialFlush()},this.reset=function(){S.reset()},this.endTimeline=function(){S.endTimeline()},se=function(le,pe){var we=8,De=8,ft,Ge;for(ft=0;ft<le;ft++)De!==0&&(Ge=pe.readExpGolomb(),De=(we+Ge+256)%256),we=De===0?we:De},F=function(le){for(var pe=le.byteLength,we=[],De=1,ft,Ge;De<pe-2;)le[De]===0&&le[De+1]===0&&le[De+2]===3?(we.push(De+2),De+=2):De++;if(we.length===0)return le;ft=pe-we.length,Ge=new Uint8Array(ft);var St=0;for(De=0;De<ft;St++,De++)St===we[0]&&(St++,we.shift()),Ge[De]=le[St];return Ge},Z=function(le){var pe=0,we=0,De=0,ft=0,Ge,St,It,Js,Ra,kd,JD,e5,t5,DC,n5,Is=[1,1],s5,Ad;if(Ge=new og(le),St=Ge.readUnsignedByte(),Js=Ge.readUnsignedByte(),It=Ge.readUnsignedByte(),Ge.skipUnsignedExpGolomb(),Td[St]&&(Ra=Ge.readUnsignedExpGolomb(),Ra===3&&Ge.skipBits(1),Ge.skipUnsignedExpGolomb(),Ge.skipUnsignedExpGolomb(),Ge.skipBits(1),Ge.readBoolean()))for(n5=Ra!==3?8:12,Ad=0;Ad<n5;Ad++)Ge.readBoolean()&&(Ad<6?se(16,Ge):se(64,Ge));if(Ge.skipUnsignedExpGolomb(),kd=Ge.readUnsignedExpGolomb(),kd===0)Ge.readUnsignedExpGolomb();else if(kd===1)for(Ge.skipBits(1),Ge.skipExpGolomb(),Ge.skipExpGolomb(),JD=Ge.readUnsignedExpGolomb(),Ad=0;Ad<JD;Ad++)Ge.skipExpGolomb();if(Ge.skipUnsignedExpGolomb(),Ge.skipBits(1),e5=Ge.readUnsignedExpGolomb(),t5=Ge.readUnsignedExpGolomb(),DC=Ge.readBits(1),DC===0&&Ge.skipBits(1),Ge.skipBits(1),Ge.readBoolean()&&(pe=Ge.readUnsignedExpGolomb(),we=Ge.readUnsignedExpGolomb(),De=Ge.readUnsignedExpGolomb(),ft=Ge.readUnsignedExpGolomb()),Ge.readBoolean()&&Ge.readBoolean()){switch(s5=Ge.readUnsignedByte(),s5){case 1:Is=[1,1];break;case 2:Is=[12,11];break;case 3:Is=[10,11];break;case 4:Is=[16,11];break;case 5:Is=[40,33];break;case 6:Is=[24,11];break;case 7:Is=[20,11];break;case 8:Is=[32,11];break;case 9:Is=[80,33];break;case 10:Is=[18,11];break;case 11:Is=[15,11];break;case 12:Is=[64,33];break;case 13:Is=[160,99];break;case 14:Is=[4,3];break;case 15:Is=[3,2];break;case 16:Is=[2,1];break;case 255:{Is=[Ge.readUnsignedByte()<<8|Ge.readUnsignedByte(),Ge.readUnsignedByte()<<8|Ge.readUnsignedByte()];break}}Is&&Is[0]/Is[1]}return{profileIdc:St,levelIdc:It,profileCompatibility:Js,width:(e5+1)*16-pe*2-we*2,height:(2-DC)*(t5+1)*16-De*2-ft*2,sarRatio:Is}}},Yl.prototype=new Gl;var Oa={H264Stream:Yl,NalByteStream:go},af=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Xc=function(S,k){var D=S[k+6]<<21|S[k+7]<<14|S[k+8]<<7|S[k+9],A=S[k+5],O=(A&16)>>4;return D=D>=0?D:0,O?D+20:D+10},of=function(S,k){return S.length-k<10||S[k]!==73||S[k+1]!==68||S[k+2]!==51?k:(k+=Xc(S,k),of(S,k))},lg=function(S){var k=of(S,0);return S.length>=k+2&&(S[k]&255)===255&&(S[k+1]&240)===240&&(S[k+1]&22)===16},L=function(S){return S[0]<<21|S[1]<<14|S[2]<<7|S[3]},K=function(S,k,D){var A,O="";for(A=k;A<D;A++)O+="%"+("00"+S[A].toString(16)).slice(-2);return O},ve=function(S,k,D){return unescape(K(S,k,D))},ze=function(S,k){var D=(S[k+5]&224)>>5,A=S[k+4]<<3,O=S[k+3]&6144;return O|A|D},Mt=function(S,k){return S[k]===73&&S[k+1]===68&&S[k+2]===51?"timed-metadata":S[k]&!0&&(S[k+1]&240)===240?"audio":null},bt=function(S){for(var k=0;k+5<S.length;){if(S[k]!==255||(S[k+1]&246)!==240){k++;continue}return af[(S[k+2]&60)>>>2]}return null},an=function(S){var k,D,A,O;k=10,S[5]&64&&(k+=4,k+=L(S.subarray(10,14)));do{if(D=L(S.subarray(k+4,k+8)),D<1)return null;if(O=String.fromCharCode(S[k],S[k+1],S[k+2],S[k+3]),O==="PRIV"){A=S.subarray(k+10,k+D+10);for(var F=0;F<A.byteLength;F++)if(A[F]===0){var Z=ve(A,0,F);if(Z==="com.apple.streaming.transportStreamTimestamp"){var se=A.subarray(F+1),le=(se[3]&1)<<30|se[4]<<22|se[5]<<14|se[6]<<6|se[7]>>>2;return le*=4,le+=se[7]&3,le}break}}k+=10,k+=D}while(k<S.byteLength);return null},Xt={isLikelyAacData:lg,parseId3TagSize:Xc,parseAdtsSize:ze,parseType:Mt,parseSampleRate:bt,parseAacTimestamp:an},xs=n,ln=Xt,As;As=function(){var S=new Uint8Array,k=0;As.prototype.init.call(this),this.setTimestamp=function(D){k=D},this.push=function(D){var A=0,O=0,F,Z,se,le;for(S.length?(le=S.length,S=new Uint8Array(D.byteLength+le),S.set(S.subarray(0,le)),S.set(D,le)):S=D;S.length-O>=3;){if(S[O]===73&&S[O+1]===68&&S[O+2]===51){if(S.length-O<10||(A=ln.parseId3TagSize(S,O),O+A>S.length))break;Z={type:"timed-metadata",data:S.subarray(O,O+A)},this.trigger("data",Z),O+=A;continue}else if((S[O]&255)===255&&(S[O+1]&240)===240){if(S.length-O<7||(A=ln.parseAdtsSize(S,O),O+A>S.length))break;se={type:"audio",data:S.subarray(O,O+A),pts:k,dts:k},this.trigger("data",se),O+=A;continue}O++}F=S.length-O,F>0?S=S.subarray(O):S=new Uint8Array},this.reset=function(){S=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){S=new Uint8Array,this.trigger("endedtimeline")}},As.prototype=new xs;var Lr=As,Ds=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],dr=Ds,Zs=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Wo=Zs,Ni=n,aa=Ie,Kc=ge,Xl=tn,Br=ae,Kl=ig,ex=R,AD=rf,kG=Oa.H264Stream,AG=Lr,DG=Xt.isLikelyAacData,PG=R.ONE_SECOND_IN_TS,wC=dr,CC=Wo,cg,lf,tx,Ed,IG=function(S,k){k.stream=S,this.trigger("log",k)},DD=function(S,k){for(var D=Object.keys(k),A=0;A<D.length;A++){var O=D[A];O==="headOfPipeline"||!k[O].on||k[O].on("log",IG.bind(S,O))}},PD=function(S,k){var D;if(S.length!==k.length)return!1;for(D=0;D<S.length;D++)if(S[D]!==k[D])return!1;return!0},SC=function(S,k,D,A,O,F){var Z=D-k,se=A-k,le=O-D;return{start:{dts:S,pts:S+Z},end:{dts:S+se,pts:S+le},prependedContentDuration:F,baseMediaDecodeTime:S}};lf=function(S,k){var D=[],A,O=0,F=0,Z=1/0;k=k||{},A=k.firstSequenceNumber||0,lf.prototype.init.call(this),this.push=function(se){Br.collectDtsInfo(S,se),S&&wC.forEach(function(le){S[le]=se[le]}),D.push(se)},this.setEarliestDts=function(se){O=se},this.setVideoBaseMediaDecodeTime=function(se){Z=se},this.setAudioAppendStart=function(se){F=se},this.flush=function(){var se,le,pe,we,De,ft,Ge;if(D.length===0){this.trigger("done","AudioSegmentStream");return}se=Xl.trimAdtsFramesByEarliestDts(D,S,O),S.baseMediaDecodeTime=Br.calculateTrackBaseMediaDecodeTime(S,k.keepOriginalTimestamps),Ge=Xl.prefixWithSilence(S,se,F,Z),S.samples=Xl.generateSampleTable(se),pe=aa.mdat(Xl.concatenateFrameData(se)),D=[],le=aa.moof(A,[S]),we=new Uint8Array(le.byteLength+pe.byteLength),A++,we.set(le),we.set(pe,le.byteLength),Br.clearDtsInfo(S),De=Math.ceil(PG*1024/S.samplerate),se.length&&(ft=se.length*De,this.trigger("segmentTimingInfo",SC(ex.audioTsToVideoTs(S.baseMediaDecodeTime,S.samplerate),se[0].dts,se[0].pts,se[0].dts+ft,se[0].pts+ft,Ge||0)),this.trigger("timingInfo",{start:se[0].pts,end:se[0].pts+ft})),this.trigger("data",{track:S,boxes:we}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Br.clearDtsInfo(S),D=[],this.trigger("reset")}},lf.prototype=new Ni,cg=function(S,k){var D,A=[],O=[],F,Z;k=k||{},D=k.firstSequenceNumber||0,cg.prototype.init.call(this),delete S.minPTS,this.gopCache_=[],this.push=function(se){Br.collectDtsInfo(S,se),se.nalUnitType==="seq_parameter_set_rbsp"&&!F&&(F=se.config,S.sps=[se.data],CC.forEach(function(le){S[le]=F[le]},this)),se.nalUnitType==="pic_parameter_set_rbsp"&&!Z&&(Z=se.data,S.pps=[se.data]),A.push(se)},this.flush=function(){for(var se,le,pe,we,De,ft,Ge=0,St,It;A.length&&A[0].nalUnitType!=="access_unit_delimiter_rbsp";)A.shift();if(A.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(se=Kc.groupNalsIntoFrames(A),pe=Kc.groupFramesIntoGops(se),pe[0][0].keyFrame||(le=this.getGopForFusion_(A[0],S),le?(Ge=le.duration,pe.unshift(le),pe.byteLength+=le.byteLength,pe.nalCount+=le.nalCount,pe.pts=le.pts,pe.dts=le.dts,pe.duration+=le.duration):pe=Kc.extendFirstKeyFrame(pe)),O.length){var Js;if(k.alignGopsAtEnd?Js=this.alignGopsAtEnd_(pe):Js=this.alignGopsAtStart_(pe),!Js){this.gopCache_.unshift({gop:pe.pop(),pps:S.pps,sps:S.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),A=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Br.clearDtsInfo(S),pe=Js}Br.collectDtsInfo(S,pe),S.samples=Kc.generateSampleTable(pe),De=aa.mdat(Kc.concatenateNalData(pe)),S.baseMediaDecodeTime=Br.calculateTrackBaseMediaDecodeTime(S,k.keepOriginalTimestamps),this.trigger("processedGopsInfo",pe.map(function(Ra){return{pts:Ra.pts,dts:Ra.dts,byteLength:Ra.byteLength}})),St=pe[0],It=pe[pe.length-1],this.trigger("segmentTimingInfo",SC(S.baseMediaDecodeTime,St.dts,St.pts,It.dts+It.duration,It.pts+It.duration,Ge)),this.trigger("timingInfo",{start:pe[0].pts,end:pe[pe.length-1].pts+pe[pe.length-1].duration}),this.gopCache_.unshift({gop:pe.pop(),pps:S.pps,sps:S.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),A=[],this.trigger("baseMediaDecodeTime",S.baseMediaDecodeTime),this.trigger("timelineStartInfo",S.timelineStartInfo),we=aa.moof(D,[S]),ft=new Uint8Array(we.byteLength+De.byteLength),D++,ft.set(we),ft.set(De,we.byteLength),this.trigger("data",{track:S,boxes:ft}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),A=[],this.gopCache_.length=0,O.length=0,this.trigger("reset")},this.resetStream_=function(){Br.clearDtsInfo(S),F=void 0,Z=void 0},this.getGopForFusion_=function(se){var le=45e3,pe=1e4,we=1/0,De,ft,Ge,St,It;for(It=0;It<this.gopCache_.length;It++)St=this.gopCache_[It],Ge=St.gop,!(!(S.pps&&PD(S.pps[0],St.pps[0]))||!(S.sps&&PD(S.sps[0],St.sps[0])))&&(Ge.dts<S.timelineStartInfo.dts||(De=se.dts-Ge.dts-Ge.duration,De>=-pe&&De<=le&&(!ft||we>De)&&(ft=St,we=De)));return ft?ft.gop:null},this.alignGopsAtStart_=function(se){var le,pe,we,De,ft,Ge,St,It;for(ft=se.byteLength,Ge=se.nalCount,St=se.duration,le=pe=0;le<O.length&&pe<se.length&&(we=O[le],De=se[pe],we.pts!==De.pts);){if(De.pts>we.pts){le++;continue}pe++,ft-=De.byteLength,Ge-=De.nalCount,St-=De.duration}return pe===0?se:pe===se.length?null:(It=se.slice(pe),It.byteLength=ft,It.duration=St,It.nalCount=Ge,It.pts=It[0].pts,It.dts=It[0].dts,It)},this.alignGopsAtEnd_=function(se){var le,pe,we,De,ft,Ge;for(le=O.length-1,pe=se.length-1,ft=null,Ge=!1;le>=0&&pe>=0;){if(we=O[le],De=se[pe],we.pts===De.pts){Ge=!0;break}if(we.pts>De.pts){le--;continue}le===O.length-1&&(ft=pe),pe--}if(!Ge&&ft===null)return null;var St;if(Ge?St=pe:St=ft,St===0)return se;var It=se.slice(St),Js=It.reduce(function(Ra,kd){return Ra.byteLength+=kd.byteLength,Ra.duration+=kd.duration,Ra.nalCount+=kd.nalCount,Ra},{byteLength:0,duration:0,nalCount:0});return It.byteLength=Js.byteLength,It.duration=Js.duration,It.nalCount=Js.nalCount,It.pts=It[0].pts,It.dts=It[0].dts,It},this.alignGopsWith=function(se){O=se}},cg.prototype=new Ni,Ed=function(S,k){this.numberOfTracks=0,this.metadataStream=k,S=S||{},typeof S.remux<"u"?this.remuxTracks=!!S.remux:this.remuxTracks=!0,typeof S.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=S.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ed.prototype.init.call(this),this.push=function(D){if(D.content||D.text)return this.pendingCaptions.push(D);if(D.frames)return this.pendingMetadata.push(D);this.pendingTracks.push(D.track),this.pendingBytes+=D.boxes.byteLength,D.track.type==="video"&&(this.videoTrack=D.track,this.pendingBoxes.push(D.boxes)),D.track.type==="audio"&&(this.audioTrack=D.track,this.pendingBoxes.unshift(D.boxes))}},Ed.prototype=new Ni,Ed.prototype.flush=function(S){var k=0,D={captions:[],captionStreams:{},metadata:[],info:{}},A,O,F,Z=0,se;if(this.pendingTracks.length<this.numberOfTracks){if(S!=="VideoSegmentStream"&&S!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(Z=this.videoTrack.timelineStartInfo.pts,CC.forEach(function(le){D.info[le]=this.videoTrack[le]},this)):this.audioTrack&&(Z=this.audioTrack.timelineStartInfo.pts,wC.forEach(function(le){D.info[le]=this.audioTrack[le]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?D.type=this.pendingTracks[0].type:D.type="combined",this.emittedTracks+=this.pendingTracks.length,F=aa.initSegment(this.pendingTracks),D.initSegment=new Uint8Array(F.byteLength),D.initSegment.set(F),D.data=new Uint8Array(this.pendingBytes),se=0;se<this.pendingBoxes.length;se++)D.data.set(this.pendingBoxes[se],k),k+=this.pendingBoxes[se].byteLength;for(se=0;se<this.pendingCaptions.length;se++)A=this.pendingCaptions[se],A.startTime=ex.metadataTsToSeconds(A.startPts,Z,this.keepOriginalTimestamps),A.endTime=ex.metadataTsToSeconds(A.endPts,Z,this.keepOriginalTimestamps),D.captionStreams[A.stream]=!0,D.captions.push(A);for(se=0;se<this.pendingMetadata.length;se++)O=this.pendingMetadata[se],O.cueTime=ex.metadataTsToSeconds(O.pts,Z,this.keepOriginalTimestamps),D.metadata.push(O);for(D.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",D),se=0;se<D.captions.length;se++)A=D.captions[se],this.trigger("caption",A);for(se=0;se<D.metadata.length;se++)O=D.metadata[se],this.trigger("id3Frame",O)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ed.prototype.setRemux=function(S){this.remuxTracks=S},tx=function(S){var k=this,D=!0,A,O;tx.prototype.init.call(this),S=S||{},this.baseMediaDecodeTime=S.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var F={};this.transmuxPipeline_=F,F.type="aac",F.metadataStream=new Kl.MetadataStream,F.aacStream=new AG,F.audioTimestampRolloverStream=new Kl.TimestampRolloverStream("audio"),F.timedMetadataTimestampRolloverStream=new Kl.TimestampRolloverStream("timed-metadata"),F.adtsStream=new AD,F.coalesceStream=new Ed(S,F.metadataStream),F.headOfPipeline=F.aacStream,F.aacStream.pipe(F.audioTimestampRolloverStream).pipe(F.adtsStream),F.aacStream.pipe(F.timedMetadataTimestampRolloverStream).pipe(F.metadataStream).pipe(F.coalesceStream),F.metadataStream.on("timestamp",function(Z){F.aacStream.setTimestamp(Z.timeStamp)}),F.aacStream.on("data",function(Z){Z.type!=="timed-metadata"&&Z.type!=="audio"||F.audioSegmentStream||(O=O||{timelineStartInfo:{baseMediaDecodeTime:k.baseMediaDecodeTime},codec:"adts",type:"audio"},F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new lf(O,S),F.audioSegmentStream.on("log",k.getLogTrigger_("audioSegmentStream")),F.audioSegmentStream.on("timingInfo",k.trigger.bind(k,"audioTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream),k.trigger("trackinfo",{hasAudio:!!O,hasVideo:!!A}))}),F.coalesceStream.on("data",this.trigger.bind(this,"data")),F.coalesceStream.on("done",this.trigger.bind(this,"done")),DD(this,F)},this.setupTsPipeline=function(){var F={};this.transmuxPipeline_=F,F.type="ts",F.metadataStream=new Kl.MetadataStream,F.packetStream=new Kl.TransportPacketStream,F.parseStream=new Kl.TransportParseStream,F.elementaryStream=new Kl.ElementaryStream,F.timestampRolloverStream=new Kl.TimestampRolloverStream,F.adtsStream=new AD,F.h264Stream=new kG,F.captionStream=new Kl.CaptionStream(S),F.coalesceStream=new Ed(S,F.metadataStream),F.headOfPipeline=F.packetStream,F.packetStream.pipe(F.parseStream).pipe(F.elementaryStream).pipe(F.timestampRolloverStream),F.timestampRolloverStream.pipe(F.h264Stream),F.timestampRolloverStream.pipe(F.adtsStream),F.timestampRolloverStream.pipe(F.metadataStream).pipe(F.coalesceStream),F.h264Stream.pipe(F.captionStream).pipe(F.coalesceStream),F.elementaryStream.on("data",function(Z){var se;if(Z.type==="metadata"){for(se=Z.tracks.length;se--;)!A&&Z.tracks[se].type==="video"?(A=Z.tracks[se],A.timelineStartInfo.baseMediaDecodeTime=k.baseMediaDecodeTime):!O&&Z.tracks[se].type==="audio"&&(O=Z.tracks[se],O.timelineStartInfo.baseMediaDecodeTime=k.baseMediaDecodeTime);A&&!F.videoSegmentStream&&(F.coalesceStream.numberOfTracks++,F.videoSegmentStream=new cg(A,S),F.videoSegmentStream.on("log",k.getLogTrigger_("videoSegmentStream")),F.videoSegmentStream.on("timelineStartInfo",function(le){O&&!S.keepOriginalTimestamps&&(O.timelineStartInfo=le,F.audioSegmentStream.setEarliestDts(le.dts-k.baseMediaDecodeTime))}),F.videoSegmentStream.on("processedGopsInfo",k.trigger.bind(k,"gopInfo")),F.videoSegmentStream.on("segmentTimingInfo",k.trigger.bind(k,"videoSegmentTimingInfo")),F.videoSegmentStream.on("baseMediaDecodeTime",function(le){O&&F.audioSegmentStream.setVideoBaseMediaDecodeTime(le)}),F.videoSegmentStream.on("timingInfo",k.trigger.bind(k,"videoTimingInfo")),F.h264Stream.pipe(F.videoSegmentStream).pipe(F.coalesceStream)),O&&!F.audioSegmentStream&&(F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new lf(O,S),F.audioSegmentStream.on("log",k.getLogTrigger_("audioSegmentStream")),F.audioSegmentStream.on("timingInfo",k.trigger.bind(k,"audioTimingInfo")),F.audioSegmentStream.on("segmentTimingInfo",k.trigger.bind(k,"audioSegmentTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream)),k.trigger("trackinfo",{hasAudio:!!O,hasVideo:!!A})}}),F.coalesceStream.on("data",this.trigger.bind(this,"data")),F.coalesceStream.on("id3Frame",function(Z){Z.dispatchType=F.metadataStream.dispatchType,k.trigger("id3Frame",Z)}),F.coalesceStream.on("caption",this.trigger.bind(this,"caption")),F.coalesceStream.on("done",this.trigger.bind(this,"done")),DD(this,F)},this.setBaseMediaDecodeTime=function(F){var Z=this.transmuxPipeline_;S.keepOriginalTimestamps||(this.baseMediaDecodeTime=F),O&&(O.timelineStartInfo.dts=void 0,O.timelineStartInfo.pts=void 0,Br.clearDtsInfo(O),Z.audioTimestampRolloverStream&&Z.audioTimestampRolloverStream.discontinuity()),A&&(Z.videoSegmentStream&&(Z.videoSegmentStream.gopCache_=[]),A.timelineStartInfo.dts=void 0,A.timelineStartInfo.pts=void 0,Br.clearDtsInfo(A),Z.captionStream.reset()),Z.timestampRolloverStream&&Z.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(F){O&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(F)},this.setRemux=function(F){var Z=this.transmuxPipeline_;S.remux=F,Z&&Z.coalesceStream&&Z.coalesceStream.setRemux(F)},this.alignGopsWith=function(F){A&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(F)},this.getLogTrigger_=function(F){var Z=this;return function(se){se.stream=F,Z.trigger("log",se)}},this.push=function(F){if(D){var Z=DG(F);Z&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!Z&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),D=!1}this.transmuxPipeline_.headOfPipeline.push(F)},this.flush=function(){D=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},tx.prototype=new Ni;var MG={Transmuxer:tx,VideoSegmentStream:cg,AudioSegmentStream:lf,AUDIO_PROPERTIES:wC,VIDEO_PROPERTIES:CC,generateSegmentTimingInfo:SC},OG=function(S){return S>>>0},RG=function(S){return("00"+S.toString(16)).slice(-2)},nx={toUnsigned:OG,toHexString:RG},LG=function(S){var k="";return k+=String.fromCharCode(S[0]),k+=String.fromCharCode(S[1]),k+=String.fromCharCode(S[2]),k+=String.fromCharCode(S[3]),k},ID=LG,BG=nx.toUnsigned,FG=ID,MD=function(S,k){var D=[],A,O,F,Z,se;if(!k.length)return null;for(A=0;A<S.byteLength;)O=BG(S[A]<<24|S[A+1]<<16|S[A+2]<<8|S[A+3]),F=FG(S.subarray(A+4,A+8)),Z=O>1?A+O:S.byteLength,F===k[0]&&(k.length===1?D.push(S.subarray(A+8,Z)):(se=MD(S.subarray(A+8,Z),k.slice(1)),se.length&&(D=D.concat(se)))),A=Z;return D},OD=MD,$G=nx.toUnsigned,UG=a.getUint64,VG=function(S){var k={version:S[0],flags:new Uint8Array(S.subarray(1,4))};return k.version===1?k.baseMediaDecodeTime=UG(S.subarray(4)):k.baseMediaDecodeTime=$G(S[4]<<24|S[5]<<16|S[6]<<8|S[7]),k},RD=VG,zG=function(S){return{isLeading:(S[0]&12)>>>2,dependsOn:S[0]&3,isDependedOn:(S[1]&192)>>>6,hasRedundancy:(S[1]&48)>>>4,paddingValue:(S[1]&14)>>>1,isNonSyncSample:S[1]&1,degradationPriority:S[2]<<8|S[3]}},HG=zG,LD=HG,qG=function(S){var k={version:S[0],flags:new Uint8Array(S.subarray(1,4)),samples:[]},D=new DataView(S.buffer,S.byteOffset,S.byteLength),A=k.flags[2]&1,O=k.flags[2]&4,F=k.flags[1]&1,Z=k.flags[1]&2,se=k.flags[1]&4,le=k.flags[1]&8,pe=D.getUint32(4),we=8,De;for(A&&(k.dataOffset=D.getInt32(we),we+=4),O&&pe&&(De={flags:LD(S.subarray(we,we+4))},we+=4,F&&(De.duration=D.getUint32(we),we+=4),Z&&(De.size=D.getUint32(we),we+=4),le&&(k.version===1?De.compositionTimeOffset=D.getInt32(we):De.compositionTimeOffset=D.getUint32(we),we+=4),k.samples.push(De),pe--);pe--;)De={},F&&(De.duration=D.getUint32(we),we+=4),Z&&(De.size=D.getUint32(we),we+=4),se&&(De.flags=LD(S.subarray(we,we+4)),we+=4),le&&(k.version===1?De.compositionTimeOffset=D.getInt32(we):De.compositionTimeOffset=D.getUint32(we),we+=4),k.samples.push(De);return k},BD=qG,WG=function(S){var k=new DataView(S.buffer,S.byteOffset,S.byteLength),D={version:S[0],flags:new Uint8Array(S.subarray(1,4)),trackId:k.getUint32(4)},A=D.flags[2]&1,O=D.flags[2]&2,F=D.flags[2]&8,Z=D.flags[2]&16,se=D.flags[2]&32,le=D.flags[0]&65536,pe=D.flags[0]&131072,we;return we=8,A&&(we+=4,D.baseDataOffset=k.getUint32(12),we+=4),O&&(D.sampleDescriptionIndex=k.getUint32(we),we+=4),F&&(D.defaultSampleDuration=k.getUint32(we),we+=4),Z&&(D.defaultSampleSize=k.getUint32(we),we+=4),se&&(D.defaultSampleFlags=k.getUint32(we)),le&&(D.durationIsEmpty=!0),!A&&pe&&(D.baseDataOffsetIsMoof=!0),D},FD=WG,ug;typeof window<"u"?ug=window:typeof t<"u"?ug=t:typeof self<"u"?ug=self:ug={};var $D=ug,GG=ut.discardEmulationPreventionBytes,YG=Hs.CaptionStream,dg=OD,XG=RD,KG=BD,QG=FD,UD=$D,ZG=function(S,k){for(var D=S,A=0;A<k.length;A++){var O=k[A];if(D<O.size)return O;D-=O.size}return null},JG=function(S,k,D){var A=new DataView(S.buffer,S.byteOffset,S.byteLength),O={logs:[],seiNals:[]},F,Z,se,le;for(Z=0;Z+4<S.length;Z+=se)if(se=A.getUint32(Z),Z+=4,!(se<=0))switch(S[Z]&31){case 6:var pe=S.subarray(Z+1,Z+1+se),we=ZG(Z,k);if(F={nalUnitType:"sei_rbsp",size:se,data:pe,escapedRBSP:GG(pe),trackId:D},we)F.pts=we.pts,F.dts=we.dts,le=we;else if(le)F.pts=le.pts,F.dts=le.dts;else{O.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Z+" for trackId "+D+". See mux.js#223."});break}O.seiNals.push(F);break}return O},eY=function(S,k,D){var A=k,O=D.defaultSampleDuration||0,F=D.defaultSampleSize||0,Z=D.trackId,se=[];return S.forEach(function(le){var pe=KG(le),we=pe.samples;we.forEach(function(De){De.duration===void 0&&(De.duration=O),De.size===void 0&&(De.size=F),De.trackId=Z,De.dts=A,De.compositionTimeOffset===void 0&&(De.compositionTimeOffset=0),typeof A=="bigint"?(De.pts=A+UD.BigInt(De.compositionTimeOffset),A+=UD.BigInt(De.duration)):(De.pts=A+De.compositionTimeOffset,A+=De.duration)}),se=se.concat(we)}),se},tY=function(S,k){var D=dg(S,["moof","traf"]),A=dg(S,["mdat"]),O={},F=[];return A.forEach(function(Z,se){var le=D[se];F.push({mdat:Z,traf:le})}),F.forEach(function(Z){var se=Z.mdat,le=Z.traf,pe=dg(le,["tfhd"]),we=QG(pe[0]),De=we.trackId,ft=dg(le,["tfdt"]),Ge=ft.length>0?XG(ft[0]).baseMediaDecodeTime:0,St=dg(le,["trun"]),It,Js;k===De&&St.length>0&&(It=eY(St,Ge,we),Js=JG(se,It,De),O[De]||(O[De]={seiNals:[],logs:[]}),O[De].seiNals=O[De].seiNals.concat(Js.seiNals),O[De].logs=O[De].logs.concat(Js.logs))}),O},nY=function(S,k,D){var A;if(k===null)return null;A=tY(S,k);var O=A[k]||{};return{seiNals:O.seiNals,logs:O.logs,timescale:D}},sY=function(){var S=!1,k,D,A,O,F,Z;this.isInitialized=function(){return S},this.init=function(se){k=new YG,S=!0,Z=se?se.isPartial:!1,k.on("data",function(le){le.startTime=le.startPts/O,le.endTime=le.endPts/O,F.captions.push(le),F.captionStreams[le.stream]=!0}),k.on("log",function(le){F.logs.push(le)})},this.isNewInit=function(se,le){return se&&se.length===0||le&&typeof le=="object"&&Object.keys(le).length===0?!1:A!==se[0]||O!==le[A]},this.parse=function(se,le,pe){var we;if(this.isInitialized()){if(!le||!pe)return null;if(this.isNewInit(le,pe))A=le[0],O=pe[A];else if(A===null||!O)return D.push(se),null}else return null;for(;D.length>0;){var De=D.shift();this.parse(De,le,pe)}return we=nY(se,A,O),we&&we.logs&&(F.logs=F.logs.concat(we.logs)),we===null||!we.seiNals?F.logs.length?{logs:F.logs,captions:[],captionStreams:[]}:null:(this.pushNals(we.seiNals),this.flushStream(),F)},this.pushNals=function(se){if(!this.isInitialized()||!se||se.length===0)return null;se.forEach(function(le){k.push(le)})},this.flushStream=function(){if(!this.isInitialized())return null;Z?k.partialFlush():k.flush()},this.clearParsedCaptions=function(){F.captions=[],F.captionStreams={},F.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;k.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){D=[],A=null,O=null,F?this.clearParsedCaptions():F={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},rY=sY,iY=function(S){for(var k=0,D=String.fromCharCode(S[k]),A="";D!=="\0";)A+=D,k++,D=String.fromCharCode(S[k]);return A+=D,A},aY={uint8ToCString:iY},sx=aY.uint8ToCString,oY=a.getUint64,lY=function(S){var k=4,D=S[0],A,O,F,Z,se,le,pe,we;if(D===0){A=sx(S.subarray(k)),k+=A.length,O=sx(S.subarray(k)),k+=O.length;var De=new DataView(S.buffer);F=De.getUint32(k),k+=4,se=De.getUint32(k),k+=4,le=De.getUint32(k),k+=4,pe=De.getUint32(k),k+=4}else if(D===1){var De=new DataView(S.buffer);F=De.getUint32(k),k+=4,Z=oY(S.subarray(k)),k+=8,le=De.getUint32(k),k+=4,pe=De.getUint32(k),k+=4,A=sx(S.subarray(k)),k+=A.length,O=sx(S.subarray(k)),k+=O.length}we=new Uint8Array(S.subarray(k,S.byteLength));var ft={scheme_id_uri:A,value:O,timescale:F||1,presentation_time:Z,presentation_time_delta:se,event_duration:le,id:pe,message_data:we};return uY(D,ft)?ft:void 0},cY=function(S,k,D,A){return S||S===0?S/k:A+D/k},uY=function(S,k){var D=k.scheme_id_uri!=="\0",A=S===0&&VD(k.presentation_time_delta)&&D,O=S===1&&VD(k.presentation_time)&&D;return!(S>1)&&A||O},VD=function(S){return S!==void 0||S!==null},dY={parseEmsgBox:lY,scaleTime:cY},rx=nx.toUnsigned,hg=nx.toHexString,Ps=OD,cf=ID,jC=dY,hY=FD,fY=BD,pY=RD,mY=a.getUint64,zD,HD,qD,WD,GD,TC,YD,EC=$D,gY=_d.parseId3Frames;zD=function(S){var k={},D=Ps(S,["moov","trak"]);return D.reduce(function(A,O){var F,Z,se,le,pe;return F=Ps(O,["tkhd"])[0],!F||(Z=F[0],se=Z===0?12:20,le=rx(F[se]<<24|F[se+1]<<16|F[se+2]<<8|F[se+3]),pe=Ps(O,["mdia","mdhd"])[0],!pe)?null:(Z=pe[0],se=Z===0?12:20,A[le]=rx(pe[se]<<24|pe[se+1]<<16|pe[se+2]<<8|pe[se+3]),A)},k)},HD=function(S,k){var D;D=Ps(k,["moof","traf"]);var A=D.reduce(function(O,F){var Z=Ps(F,["tfhd"])[0],se=rx(Z[4]<<24|Z[5]<<16|Z[6]<<8|Z[7]),le=S[se]||9e4,pe=Ps(F,["tfdt"])[0],we=new DataView(pe.buffer,pe.byteOffset,pe.byteLength),De;pe[0]===1?De=mY(pe.subarray(4,12)):De=we.getUint32(4);let ft;return typeof De=="bigint"?ft=De/EC.BigInt(le):typeof De=="number"&&!isNaN(De)&&(ft=De/le),ft<Number.MAX_SAFE_INTEGER&&(ft=Number(ft)),ft<O&&(O=ft),O},1/0);return typeof A=="bigint"||isFinite(A)?A:0},qD=function(S,k){var D=Ps(k,["moof","traf"]),A=0,O=0,F;if(D&&D.length){var Z=Ps(D[0],["tfhd"])[0],se=Ps(D[0],["trun"])[0],le=Ps(D[0],["tfdt"])[0];if(Z){var pe=hY(Z);F=pe.trackId}if(le){var we=pY(le);A=we.baseMediaDecodeTime}if(se){var De=fY(se);De.samples&&De.samples.length&&(O=De.samples[0].compositionTimeOffset||0)}}var ft=S[F]||9e4;typeof A=="bigint"&&(O=EC.BigInt(O),ft=EC.BigInt(ft));var Ge=(A+O)/ft;return typeof Ge=="bigint"&&Ge<Number.MAX_SAFE_INTEGER&&(Ge=Number(Ge)),Ge},WD=function(S){var k=Ps(S,["moov","trak"]),D=[];return k.forEach(function(A){var O=Ps(A,["mdia","hdlr"]),F=Ps(A,["tkhd"]);O.forEach(function(Z,se){var le=cf(Z.subarray(8,12)),pe=F[se],we,De,ft;le==="vide"&&(we=new DataView(pe.buffer,pe.byteOffset,pe.byteLength),De=we.getUint8(0),ft=De===0?we.getUint32(12):we.getUint32(20),D.push(ft))})}),D},TC=function(S){var k=S[0],D=k===0?12:20;return rx(S[D]<<24|S[D+1]<<16|S[D+2]<<8|S[D+3])},GD=function(S){var k=Ps(S,["moov","trak"]),D=[];return k.forEach(function(A){var O={},F=Ps(A,["tkhd"])[0],Z,se;F&&(Z=new DataView(F.buffer,F.byteOffset,F.byteLength),se=Z.getUint8(0),O.id=se===0?Z.getUint32(12):Z.getUint32(20));var le=Ps(A,["mdia","hdlr"])[0];if(le){var pe=cf(le.subarray(8,12));pe==="vide"?O.type="video":pe==="soun"?O.type="audio":O.type=pe}var we=Ps(A,["mdia","minf","stbl","stsd"])[0];if(we){var De=we.subarray(8);O.codec=cf(De.subarray(4,8));var ft=Ps(De,[O.codec])[0],Ge,St;ft&&(/^[asm]vc[1-9]$/i.test(O.codec)?(Ge=ft.subarray(78),St=cf(Ge.subarray(4,8)),St==="avcC"&&Ge.length>11?(O.codec+=".",O.codec+=hg(Ge[9]),O.codec+=hg(Ge[10]),O.codec+=hg(Ge[11])):O.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(O.codec)?(Ge=ft.subarray(28),St=cf(Ge.subarray(4,8)),St==="esds"&&Ge.length>20&&Ge[19]!==0?(O.codec+="."+hg(Ge[19]),O.codec+="."+hg(Ge[20]>>>2&63).replace(/^0/,"")):O.codec="mp4a.40.2"):O.codec=O.codec.toLowerCase())}var It=Ps(A,["mdia","mdhd"])[0];It&&(O.timescale=TC(It)),D.push(O)}),D},YD=function(S,k=0){var D=Ps(S,["emsg"]);return D.map(A=>{var O=jC.parseEmsgBox(new Uint8Array(A)),F=gY(O.message_data);return{cueTime:jC.scaleTime(O.presentation_time,O.timescale,O.presentation_time_delta,k),duration:jC.scaleTime(O.event_duration,O.timescale),frames:F}})};var NC={findBox:Ps,parseType:cf,timescale:zD,startTime:HD,compositionStartTime:qD,videoTrackIds:WD,tracks:GD,getTimescaleFromMediaHeader:TC,getEmsgID3:YD},kC=Hc,XD=function(S){var k=S[1]&31;return k<<=8,k|=S[2],k},ix=function(S){return!!(S[1]&64)},ax=function(S){var k=0;return(S[3]&48)>>>4>1&&(k+=S[4]+1),k},vY=function(S,k){var D=XD(S);return D===0?"pat":D===k?"pmt":k?"pes":null},yY=function(S){var k=ix(S),D=4+ax(S);return k&&(D+=S[D]+1),(S[D+10]&31)<<8|S[D+11]},xY=function(S){var k={},D=ix(S),A=4+ax(S);if(D&&(A+=S[A]+1),!!(S[A+5]&1)){var O,F,Z;O=(S[A+1]&15)<<8|S[A+2],F=3+O-4,Z=(S[A+10]&15)<<8|S[A+11];for(var se=12+Z;se<F;){var le=A+se;k[(S[le+1]&31)<<8|S[le+2]]=S[le],se+=((S[le+3]&15)<<8|S[le+4])+5}return k}},bY=function(S,k){var D=XD(S),A=k[D];switch(A){case kC.H264_STREAM_TYPE:return"video";case kC.ADTS_STREAM_TYPE:return"audio";case kC.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},_Y=function(S){var k=ix(S);if(!k)return null;var D=4+ax(S);if(D>=S.byteLength)return null;var A=null,O;return O=S[D+7],O&192&&(A={},A.pts=(S[D+9]&14)<<27|(S[D+10]&255)<<20|(S[D+11]&254)<<12|(S[D+12]&255)<<5|(S[D+13]&254)>>>3,A.pts*=4,A.pts+=(S[D+13]&6)>>>1,A.dts=A.pts,O&64&&(A.dts=(S[D+14]&14)<<27|(S[D+15]&255)<<20|(S[D+16]&254)<<12|(S[D+17]&255)<<5|(S[D+18]&254)>>>3,A.dts*=4,A.dts+=(S[D+18]&6)>>>1)),A},AC=function(S){switch(S){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},wY=function(S){for(var k=4+ax(S),D=S.subarray(k),A=0,O=0,F=!1,Z;O<D.byteLength-3;O++)if(D[O+2]===1){A=O+5;break}for(;A<D.byteLength;)switch(D[A]){case 0:if(D[A-1]!==0){A+=2;break}else if(D[A-2]!==0){A++;break}O+3!==A-2&&(Z=AC(D[O+3]&31),Z==="slice_layer_without_partitioning_rbsp_idr"&&(F=!0));do A++;while(D[A]!==1&&A<D.length);O=A-2,A+=3;break;case 1:if(D[A-1]!==0||D[A-2]!==0){A+=3;break}Z=AC(D[O+3]&31),Z==="slice_layer_without_partitioning_rbsp_idr"&&(F=!0),O=A-2,A+=3;break;default:A+=3;break}return D=D.subarray(O),A-=O,O=0,D&&D.byteLength>3&&(Z=AC(D[O+3]&31),Z==="slice_layer_without_partitioning_rbsp_idr"&&(F=!0)),F},CY={parseType:vY,parsePat:yY,parsePmt:xY,parsePayloadUnitStartIndicator:ix,parsePesType:bY,parsePesTime:_Y,videoPacketContainsKeyFrame:wY},KD=Hc,uf=$l.handleRollover,jn={};jn.ts=CY,jn.aac=Xt;var Nd=R.ONE_SECOND_IN_TS,ei=188,Go=71,SY=function(S,k){for(var D=0,A=ei,O,F;A<S.byteLength;){if(S[D]===Go&&S[A]===Go){switch(O=S.subarray(D,A),F=jn.ts.parseType(O,k.pid),F){case"pat":k.pid=jn.ts.parsePat(O);break;case"pmt":var Z=jn.ts.parsePmt(O);k.table=k.table||{},Object.keys(Z).forEach(function(se){k.table[se]=Z[se]});break}D+=ei,A+=ei;continue}D++,A++}},QD=function(S,k,D){for(var A=0,O=ei,F,Z,se,le,pe,we=!1;O<=S.byteLength;){if(S[A]===Go&&(S[O]===Go||O===S.byteLength)){switch(F=S.subarray(A,O),Z=jn.ts.parseType(F,k.pid),Z){case"pes":se=jn.ts.parsePesType(F,k.table),le=jn.ts.parsePayloadUnitStartIndicator(F),se==="audio"&&le&&(pe=jn.ts.parsePesTime(F),pe&&(pe.type="audio",D.audio.push(pe),we=!0));break}if(we)break;A+=ei,O+=ei;continue}A++,O++}for(O=S.byteLength,A=O-ei,we=!1;A>=0;){if(S[A]===Go&&(S[O]===Go||O===S.byteLength)){switch(F=S.subarray(A,O),Z=jn.ts.parseType(F,k.pid),Z){case"pes":se=jn.ts.parsePesType(F,k.table),le=jn.ts.parsePayloadUnitStartIndicator(F),se==="audio"&&le&&(pe=jn.ts.parsePesTime(F),pe&&(pe.type="audio",D.audio.push(pe),we=!0));break}if(we)break;A-=ei,O-=ei;continue}A--,O--}},jY=function(S,k,D){for(var A=0,O=ei,F,Z,se,le,pe,we,De,ft,Ge=!1,St={data:[],size:0};O<S.byteLength;){if(S[A]===Go&&S[O]===Go){switch(F=S.subarray(A,O),Z=jn.ts.parseType(F,k.pid),Z){case"pes":if(se=jn.ts.parsePesType(F,k.table),le=jn.ts.parsePayloadUnitStartIndicator(F),se==="video"&&(le&&!Ge&&(pe=jn.ts.parsePesTime(F),pe&&(pe.type="video",D.video.push(pe),Ge=!0)),!D.firstKeyFrame)){if(le&&St.size!==0){for(we=new Uint8Array(St.size),De=0;St.data.length;)ft=St.data.shift(),we.set(ft,De),De+=ft.byteLength;if(jn.ts.videoPacketContainsKeyFrame(we)){var It=jn.ts.parsePesTime(we);It?(D.firstKeyFrame=It,D.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}St.size=0}St.data.push(F),St.size+=F.byteLength}break}if(Ge&&D.firstKeyFrame)break;A+=ei,O+=ei;continue}A++,O++}for(O=S.byteLength,A=O-ei,Ge=!1;A>=0;){if(S[A]===Go&&S[O]===Go){switch(F=S.subarray(A,O),Z=jn.ts.parseType(F,k.pid),Z){case"pes":se=jn.ts.parsePesType(F,k.table),le=jn.ts.parsePayloadUnitStartIndicator(F),se==="video"&&le&&(pe=jn.ts.parsePesTime(F),pe&&(pe.type="video",D.video.push(pe),Ge=!0));break}if(Ge)break;A-=ei,O-=ei;continue}A--,O--}},TY=function(S,k){if(S.audio&&S.audio.length){var D=k;(typeof D>"u"||isNaN(D))&&(D=S.audio[0].dts),S.audio.forEach(function(F){F.dts=uf(F.dts,D),F.pts=uf(F.pts,D),F.dtsTime=F.dts/Nd,F.ptsTime=F.pts/Nd})}if(S.video&&S.video.length){var A=k;if((typeof A>"u"||isNaN(A))&&(A=S.video[0].dts),S.video.forEach(function(F){F.dts=uf(F.dts,A),F.pts=uf(F.pts,A),F.dtsTime=F.dts/Nd,F.ptsTime=F.pts/Nd}),S.firstKeyFrame){var O=S.firstKeyFrame;O.dts=uf(O.dts,A),O.pts=uf(O.pts,A),O.dtsTime=O.dts/Nd,O.ptsTime=O.pts/Nd}}},EY=function(S){for(var k=!1,D=0,A=null,O=null,F=0,Z=0,se;S.length-Z>=3;){var le=jn.aac.parseType(S,Z);switch(le){case"timed-metadata":if(S.length-Z<10){k=!0;break}if(F=jn.aac.parseId3TagSize(S,Z),F>S.length){k=!0;break}O===null&&(se=S.subarray(Z,Z+F),O=jn.aac.parseAacTimestamp(se)),Z+=F;break;case"audio":if(S.length-Z<7){k=!0;break}if(F=jn.aac.parseAdtsSize(S,Z),F>S.length){k=!0;break}A===null&&(se=S.subarray(Z,Z+F),A=jn.aac.parseSampleRate(se)),D++,Z+=F;break;default:Z++;break}if(k)return null}if(A===null||O===null)return null;var pe=Nd/A,we={audio:[{type:"audio",dts:O,pts:O},{type:"audio",dts:O+D*1024*pe,pts:O+D*1024*pe}]};return we},NY=function(S){var k={pid:null,table:null},D={};SY(S,k);for(var A in k.table)if(k.table.hasOwnProperty(A)){var O=k.table[A];switch(O){case KD.H264_STREAM_TYPE:D.video=[],jY(S,k,D),D.video.length===0&&delete D.video;break;case KD.ADTS_STREAM_TYPE:D.audio=[],QD(S,k,D),D.audio.length===0&&delete D.audio;break}}return D},kY=function(S,k){var D=jn.aac.isLikelyAacData(S),A;return D?A=EY(S):A=NY(S),!A||!A.audio&&!A.video?null:(TY(A,k),A)},AY={inspect:kY,parseAudioPes_:QD};const DY=function(S,k){k.on("data",function(D){const A=D.initSegment;D.initSegment={data:A.buffer,byteOffset:A.byteOffset,byteLength:A.byteLength};const O=D.data;D.data=O.buffer,S.postMessage({action:"data",segment:D,byteOffset:O.byteOffset,byteLength:O.byteLength},[D.data])}),k.on("done",function(D){S.postMessage({action:"done"})}),k.on("gopInfo",function(D){S.postMessage({action:"gopInfo",gopInfo:D})}),k.on("videoSegmentTimingInfo",function(D){const A={start:{decode:R.videoTsToSeconds(D.start.dts),presentation:R.videoTsToSeconds(D.start.pts)},end:{decode:R.videoTsToSeconds(D.end.dts),presentation:R.videoTsToSeconds(D.end.pts)},baseMediaDecodeTime:R.videoTsToSeconds(D.baseMediaDecodeTime)};D.prependedContentDuration&&(A.prependedContentDuration=R.videoTsToSeconds(D.prependedContentDuration)),S.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:A})}),k.on("audioSegmentTimingInfo",function(D){const A={start:{decode:R.videoTsToSeconds(D.start.dts),presentation:R.videoTsToSeconds(D.start.pts)},end:{decode:R.videoTsToSeconds(D.end.dts),presentation:R.videoTsToSeconds(D.end.pts)},baseMediaDecodeTime:R.videoTsToSeconds(D.baseMediaDecodeTime)};D.prependedContentDuration&&(A.prependedContentDuration=R.videoTsToSeconds(D.prependedContentDuration)),S.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:A})}),k.on("id3Frame",function(D){S.postMessage({action:"id3Frame",id3Frame:D})}),k.on("caption",function(D){S.postMessage({action:"caption",caption:D})}),k.on("trackinfo",function(D){S.postMessage({action:"trackinfo",trackInfo:D})}),k.on("audioTimingInfo",function(D){S.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:R.videoTsToSeconds(D.start),end:R.videoTsToSeconds(D.end)}})}),k.on("videoTimingInfo",function(D){S.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:R.videoTsToSeconds(D.start),end:R.videoTsToSeconds(D.end)}})}),k.on("log",function(D){S.postMessage({action:"log",log:D})})};class ZD{constructor(k,D){this.options=D||{},this.self=k,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new MG.Transmuxer(this.options),DY(this.self,this.transmuxer)}pushMp4Captions(k){this.captionParser||(this.captionParser=new rY,this.captionParser.init());const D=new Uint8Array(k.data,k.byteOffset,k.byteLength),A=this.captionParser.parse(D,k.trackIds,k.timescales);this.self.postMessage({action:"mp4Captions",captions:A&&A.captions||[],logs:A&&A.logs||[],data:D.buffer},[D.buffer])}probeMp4StartTime({timescales:k,data:D}){const A=NC.startTime(k,D);this.self.postMessage({action:"probeMp4StartTime",startTime:A,data:D},[D.buffer])}probeMp4Tracks({data:k}){const D=NC.tracks(k);this.self.postMessage({action:"probeMp4Tracks",tracks:D,data:k},[k.buffer])}probeEmsgID3({data:k,offset:D}){const A=NC.getEmsgID3(k,D);this.self.postMessage({action:"probeEmsgID3",id3Frames:A,emsgData:k},[k.buffer])}probeTs({data:k,baseStartTime:D}){const A=typeof D=="number"&&!isNaN(D)?D*R.ONE_SECOND_IN_TS:void 0,O=AY.inspect(k,A);let F=null;O&&(F={hasVideo:O.video&&O.video.length===2||!1,hasAudio:O.audio&&O.audio.length===2||!1},F.hasVideo&&(F.videoStart=O.video[0].ptsTime),F.hasAudio&&(F.audioStart=O.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:F,data:k},[k.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(k){const D=new Uint8Array(k.data,k.byteOffset,k.byteLength);this.transmuxer.push(D)}reset(){this.transmuxer.reset()}setTimestampOffset(k){const D=k.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(R.secondsToVideoTs(D)))}setAudioAppendStart(k){this.transmuxer.setAudioAppendStart(Math.ceil(R.secondsToVideoTs(k.appendStart)))}setRemux(k){this.transmuxer.setRemux(k.remux)}flush(k){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(k){this.transmuxer.alignGopsWith(k.gopsToAlignWith.slice())}}self.onmessage=function(S){if(S.data.action==="init"&&S.data.options){this.messageHandlers=new ZD(self,S.data.options);return}this.messageHandlers||(this.messageHandlers=new ZD(self)),S.data&&S.data.action&&S.data.action!=="init"&&this.messageHandlers[S.data.action]&&this.messageHandlers[S.data.action](S.data)}}));var $_e=$z(F_e);const U_e=(t,e,n)=>{const{type:s,initSegment:i,captions:a,captionStreams:o,metadata:l,videoFrameDtsTime:c,videoFramePtsTime:u}=t.data.segment;e.buffer.push({captions:a,captionStreams:o,metadata:l});const d=t.data.segment.boxes||{data:t.data.segment.data},h={type:s,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};typeof c<"u"&&(h.videoFrameDtsTime=c),typeof u<"u"&&(h.videoFramePtsTime=u),n(h)},V_e=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},z_e=(t,e)=>{e.gopInfo=t.data.gopInfo},zz=t=>{const{transmuxer:e,bytes:n,audioAppendStart:s,gopsToAlignWith:i,remux:a,onData:o,onTrackInfo:l,onAudioTimingInfo:c,onVideoTimingInfo:u,onVideoSegmentTimingInfo:d,onAudioSegmentTimingInfo:h,onId3:f,onCaptions:p,onDone:g,onEndedTimeline:m,onTransmuxerLog:_,isEndOfTimeline:y,segment:x,triggerSegmentEventFn:b}=t,w={buffer:[]};let C=y;const j=T=>{e.currentTransmux===t&&(T.data.action==="data"&&U_e(T,w,o),T.data.action==="trackinfo"&&l(T.data.trackInfo),T.data.action==="gopInfo"&&z_e(T,w),T.data.action==="audioTimingInfo"&&c(T.data.audioTimingInfo),T.data.action==="videoTimingInfo"&&u(T.data.videoTimingInfo),T.data.action==="videoSegmentTimingInfo"&&d(T.data.videoSegmentTimingInfo),T.data.action==="audioSegmentTimingInfo"&&h(T.data.audioSegmentTimingInfo),T.data.action==="id3Frame"&&f([T.data.id3Frame],T.data.id3Frame.dispatchType),T.data.action==="caption"&&p(T.data.caption),T.data.action==="endedtimeline"&&(C=!1,m()),T.data.action==="log"&&_(T.data.log),T.data.type==="transmuxed"&&(C||(e.onmessage=null,V_e({transmuxedData:w,callback:g}),Hz(e))))},E=()=>{const T={message:"Received an error message from the transmuxer worker",metadata:{errorType:je.Error.StreamingFailedToTransmuxSegment,segmentInfo:Gd({segment:x})}};g(null,T)};if(e.onmessage=j,e.onerror=E,s&&e.postMessage({action:"setAudioAppendStart",appendStart:s}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof a<"u"&&e.postMessage({action:"setRemux",remux:a}),n.byteLength){const T=n instanceof ArrayBuffer?n:n.buffer,N=n instanceof ArrayBuffer?0:n.byteOffset;b({type:"segmenttransmuxingstart",segment:x}),e.postMessage({action:"push",data:T,byteOffset:N,byteLength:n.byteLength},[T])}y&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},Hz=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():zz(t.currentTransmux))},sO=(t,e)=>{t.postMessage({action:e}),Hz(t)},qz=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,sO(e,t);return}e.transmuxQueue.push(sO.bind(null,e,t))},H_e=t=>{qz("reset",t)},q_e=t=>{qz("endTimeline",t)},Wz=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,zz(t);return}t.transmuxer.transmuxQueue.push(t)},W_e=t=>{const e=new $_e;e.currentTransmux=null,e.transmuxQueue=[];const n=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,n.call(e)),e.postMessage({action:"init",options:t}),e};var jj={reset:H_e,endTimeline:q_e,transmux:Wz,createTransmuxer:W_e};const P0=function(t){const e=t.transmuxer,n=t.endAction||t.action,s=t.callback,i=ds({},t,{endAction:null,transmuxer:null,callback:null}),a=o=>{o.data.action===n&&(e.removeEventListener("message",a),o.data.data&&(o.data.data=new Uint8Array(o.data.data,t.byteOffset||0,t.byteLength||o.data.data.byteLength),t.data&&(t.data=o.data.data)),s(o.data))};if(e.addEventListener("message",a),t.data){const o=t.data instanceof ArrayBuffer;i.byteOffset=o?0:t.data.byteOffset,i.byteLength=t.data.byteLength;const l=[o?t.data:t.data.buffer];e.postMessage(i,l)}else e.postMessage(i)},fl={FAILURE:2,TIMEOUT:-101,ABORTED:-102},TN=t=>{t.forEach(e=>{e.abort()})},G_e=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),Y_e=t=>{const e=t.target,s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return s.bytesReceived=t.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s},TA=(t,e)=>{const{requestType:n}=e,s=vh({requestType:n,request:e,error:t});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:fl.TIMEOUT,xhr:e,metadata:s}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:fl.ABORTED,xhr:e,metadata:s}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:fl.FAILURE,xhr:e,metadata:s}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:fl.FAILURE,xhr:e,metadata:s}:null},rO=(t,e,n,s)=>(i,a)=>{const o=a.response,l=TA(i,a);if(l)return n(l,t);if(o.byteLength!==16)return n({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:fl.FAILURE,xhr:a},t);const c=new DataView(o),u=new Uint32Array([c.getUint32(0),c.getUint32(4),c.getUint32(8),c.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;const d={uri:a.uri};return s({type:"segmentkeyloadcomplete",segment:t,keyInfo:d}),n(null,t)},Gz=(t,e)=>{const n=q4(t.map.bytes);if(n!=="mp4"){const s=t.map.resolvedUri||t.map.uri,i=n||"unknown";return e({internal:!0,message:`Found unsupported ${i} container for initialization segment at URL: ${s}`,code:fl.FAILURE,metadata:{mediaType:i}})}P0({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:s,data:i})=>(t.map.bytes=i,s.forEach(function(a){t.map.tracks=t.map.tracks||{},!t.map.tracks[a.type]&&(t.map.tracks[a.type]=a,typeof a.id=="number"&&a.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[a.id]=a.timescale))}),e(null))})},X_e=({segment:t,finishProcessingFn:e,triggerSegmentEventFn:n})=>(s,i)=>{const a=TA(s,i);if(a)return e(a,t);const o=new Uint8Array(i.response);if(n({type:"segmentloaded",segment:t}),t.map.key)return t.map.encryptedBytes=o,e(null,t);t.map.bytes=o,Gz(t,function(l){if(l)return l.xhr=i,l.status=i.status,e(l,t);e(null,t)})},K_e=({segment:t,finishProcessingFn:e,responseType:n,triggerSegmentEventFn:s})=>(i,a)=>{const o=TA(i,a);if(o)return e(o,t);s({type:"segmentloaded",segment:t});const l=n==="arraybuffer"||!a.responseText?a.response:L_e(a.responseText.substring(t.lastReachedChar||0));return t.stats=G_e(a),t.key?t.encryptedBytes=new Uint8Array(l):t.bytes=new Uint8Array(l),e(null,t)},Q_e=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{const g=t.map&&t.map.tracks||{},m=!!(g.audio&&g.video);let _=s.bind(null,t,"audio","start");const y=s.bind(null,t,"audio","end");let x=s.bind(null,t,"video","start");const b=s.bind(null,t,"video","end"),w=()=>Wz({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:m,onData:C=>{C.type=C.type==="combined"?"video":C.type,d(t,C)},onTrackInfo:C=>{n&&(m&&(C.isMuxed=!0),n(t,C))},onAudioTimingInfo:C=>{_&&typeof C.start<"u"&&(_(C.start),_=null),y&&typeof C.end<"u"&&y(C.end)},onVideoTimingInfo:C=>{x&&typeof C.start<"u"&&(x(C.start),x=null),b&&typeof C.end<"u"&&b(C.end)},onVideoSegmentTimingInfo:C=>{const j={pts:{start:C.start.presentation,end:C.end.presentation},dts:{start:C.start.decode,end:C.end.decode}};p({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:j}),i(C)},onAudioSegmentTimingInfo:C=>{const j={pts:{start:C.start.pts,end:C.end.pts},dts:{start:C.start.dts,end:C.end.dts}};p({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:j}),a(C)},onId3:(C,j)=>{o(t,C,j)},onCaptions:C=>{l(t,[C])},isEndOfTimeline:c,onEndedTimeline:()=>{u()},onTransmuxerLog:f,onDone:(C,j)=>{h&&(C.type=C.type==="combined"?"video":C.type,p({type:"segmenttransmuxingcomplete",segment:t}),h(j,t,C))},segment:t,triggerSegmentEventFn:p});P0({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:C=>{t.bytes=e=C.data;const j=C.result;j&&(n(t,{hasAudio:j.hasAudio,hasVideo:j.hasVideo,isMuxed:m}),n=null),w()}})},Yz=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{let g=new Uint8Array(e);if(_1e(g)){t.isFmp4=!0;const{tracks:m}=t.map,_={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&m.audio.codec!=="enca"&&(_.audioCodec=m.audio.codec),m.video&&m.video.codec&&m.video.codec!=="encv"&&(_.videoCodec=m.video.codec),m.video&&m.audio&&(_.isMuxed=!0),n(t,_);const y=(x,b)=>{d(t,{data:g,type:_.hasAudio&&!_.isMuxed?"audio":"video"}),b&&b.length&&o(t,b),x&&x.length&&l(t,x),h(null,t,{})};P0({action:"probeMp4StartTime",timescales:t.map.timescales,data:g,transmuxer:t.transmuxer,callback:({data:x,startTime:b})=>{e=x.buffer,t.bytes=g=x,_.hasAudio&&!_.isMuxed&&s(t,"audio","start",b),_.hasVideo&&s(t,"video","start",b),P0({action:"probeEmsgID3",data:g,transmuxer:t.transmuxer,offset:b,callback:({emsgData:w,id3Frames:C})=>{if(e=w.buffer,t.bytes=g=w,!m.video||!w.byteLength||!t.transmuxer){y(void 0,C);return}P0({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:g,timescales:t.map.timescales,trackIds:[m.video.id],callback:j=>{e=j.data.buffer,t.bytes=g=j.data,j.logs.forEach(function(E){f(Cn(E,{stream:"mp4CaptionParser"}))}),y(j.captions,C)}})}})}});return}if(!t.transmuxer){h(null,t,{});return}if(typeof t.container>"u"&&(t.container=q4(g)),t.container!=="ts"&&t.container!=="aac"){n(t,{hasAudio:!1,hasVideo:!1}),h(null,t,{});return}Q_e({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})},Xz=function({id:t,key:e,encryptedBytes:n,decryptionWorker:s,segment:i,doneFn:a},o){const l=u=>{if(u.data.source===t){s.removeEventListener("message",l);const d=u.data.decrypted;o(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};s.onerror=()=>{const u="An error occurred in the decryption worker",d=Gd({segment:i}),h={message:u,metadata:{error:new Error(u),errorType:je.Error.StreamingFailedToDecryptSegment,segmentInfo:d,keyInfo:{uri:i.key.resolvedUri||i.map.key.resolvedUri}}};a(h,i)},s.addEventListener("message",l);let c;e.bytes.slice?c=e.bytes.slice():c=new Uint32Array(Array.prototype.slice.call(e.bytes)),s.postMessage(Mz({source:t,encrypted:n,key:c,iv:e.iv}),[n.buffer,c.buffer])},Z_e=({decryptionWorker:t,segment:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{p({type:"segmentdecryptionstart"}),Xz({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t,segment:e,doneFn:h},g=>{e.bytes=g,p({type:"segmentdecryptioncomplete",segment:e}),Yz({segment:e,bytes:e.bytes,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})})},J_e=({activeXhrs:t,decryptionWorker:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{let g=0,m=!1;return(_,y)=>{if(!m){if(_)return m=!0,TN(t),h(_,y);if(g+=1,g===t.length){const x=function(){if(y.encryptedBytes)return Z_e({decryptionWorker:e,segment:y,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p});Yz({segment:y,bytes:y.bytes,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})};if(y.endOfAllRequests=Date.now(),y.map&&y.map.encryptedBytes&&!y.map.bytes)return p({type:"segmentdecryptionstart",segment:y}),Xz({decryptionWorker:e,id:y.requestId+"-init",encryptedBytes:y.map.encryptedBytes,key:y.map.key,segment:y,doneFn:h},b=>{y.map.bytes=b,p({type:"segmentdecryptioncomplete",segment:y}),Gz(y,w=>{if(w)return TN(t),h(w,y);x()})});x()}}}},e2e=({loadendState:t,abortFn:e})=>n=>{n.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},t2e=({segment:t,progressFn:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d})=>h=>{if(!h.target.aborted)return t.stats=Cn(t.stats,Y_e(h)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(h,t)},n2e=({xhr:t,xhrOptions:e,decryptionWorker:n,segment:s,abortFn:i,progressFn:a,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:d,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:p,dataFn:g,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:y})=>{const x=[],b=J_e({activeXhrs:x,decryptionWorker:n,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:d,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:p,dataFn:g,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:y});if(s.key&&!s.key.bytes){const T=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&T.push(s.map.key);const N=Cn(e,{uri:s.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),P=rO(s,T,b,y),I={uri:s.key.resolvedUri};y({type:"segmentkeyloadstart",segment:s,keyInfo:I});const B=t(N,P);x.push(B)}if(s.map&&!s.map.bytes){if(s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri)){const B=Cn(e,{uri:s.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),U=rO(s,[s.map.key],b,y),z={uri:s.map.key.resolvedUri};y({type:"segmentkeyloadstart",segment:s,keyInfo:z});const G=t(B,U);x.push(G)}const N=Cn(e,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:SN(s.map),requestType:"segment-media-initialization"}),P=X_e({segment:s,finishProcessingFn:b,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:s});const I=t(N,P);x.push(I)}const w=Cn(e,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:SN(s),requestType:"segment"}),C=K_e({segment:s,finishProcessingFn:b,responseType:w.responseType,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:s});const j=t(w,C);j.addEventListener("progress",t2e({segment:s,progressFn:a,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:d,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:p,dataFn:g})),x.push(j);const E={};return x.forEach(T=>{T.addEventListener("loadend",e2e({loadendState:E,abortFn:i}))}),()=>TN(x)},s2e=uo("CodecUtils"),r2e=function(t){const e=t.attributes||{};if(e.CODECS)return tl(e.CODECS)},Kz=(t,e)=>{const n=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&n.AUDIO&&t.mediaGroups.AUDIO[n.AUDIO]},i2e=(t,e)=>{if(!Kz(t,e))return!0;const n=e.attributes||{},s=t.mediaGroups.AUDIO[n.AUDIO];for(const i in s)if(!s[i].uri&&!s[i].playlists)return!0;return!1},O_=function(t){const e={};return t.forEach(({mediaType:n,type:s,details:i})=>{e[n]=e[n]||[],e[n].push(rU(`${s}${i}`))}),Object.keys(e).forEach(function(n){if(e[n].length>1){s2e(`multiple ${n} codecs found as attributes: ${e[n].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[n]=null;return}e[n]=e[n][0]}),e},iO=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},I0=function(t,e){const n=e.attributes||{},s=O_(r2e(e)||[]);if(Kz(t,e)&&!s.audio&&!i2e(t,e)){const i=O_(_ye(t,n.AUDIO)||[]);i.audio&&(s.audio=i.audio)}return s},Wx=uo("PlaylistSelector"),aO=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},R_=function(t,e){if(!t)return"";const n=de.getComputedStyle(t);return n?n[e]:""},yp=function(t,e){const n=t.slice();t.sort(function(s,i){const a=e(s,i);return a===0?n.indexOf(s)-n.indexOf(i):a})},EA=function(t,e){let n,s;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||de.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(s=e.attributes.BANDWIDTH),s=s||de.Number.MAX_VALUE,n-s},a2e=function(t,e){let n,s;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||de.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(s=e.attributes.RESOLUTION.width),s=s||de.Number.MAX_VALUE,n===s&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-s};let Qz=function(t,e,n,s,i,a){if(!t)return;const o={bandwidth:e,width:n,height:s,limitRenditionByPlayerDimensions:i};let l=t.playlists;Fi.isAudioOnly(t)&&(l=a.getAudioTrackPlaylists_(),o.audioOnly=!0);let c=l.map(C=>{let j;const E=C.attributes&&C.attributes.RESOLUTION&&C.attributes.RESOLUTION.width,T=C.attributes&&C.attributes.RESOLUTION&&C.attributes.RESOLUTION.height;return j=C.attributes&&C.attributes.BANDWIDTH,j=j||de.Number.MAX_VALUE,{bandwidth:j,width:E,height:T,playlist:C}});yp(c,(C,j)=>C.bandwidth-j.bandwidth),c=c.filter(C=>!Fi.isIncompatible(C.playlist));let u=c.filter(C=>Fi.isEnabled(C.playlist));u.length||(u=c.filter(C=>!Fi.isDisabled(C.playlist)));const d=u.filter(C=>C.bandwidth*pr.BANDWIDTH_VARIANCE<e);let h=d[d.length-1];const f=d.filter(C=>C.bandwidth===h.bandwidth)[0];if(i===!1){const C=f||u[0]||c[0];if(C&&C.playlist){let j="sortedPlaylistReps";return f&&(j="bandwidthBestRep"),u[0]&&(j="enabledPlaylistReps"),Wx(`choosing ${aO(C)} using ${j} with options`,o),C.playlist}return Wx("could not choose a playlist with options",o),null}const p=d.filter(C=>C.width&&C.height);yp(p,(C,j)=>C.width-j.width);const g=p.filter(C=>C.width===n&&C.height===s);h=g[g.length-1];const m=g.filter(C=>C.bandwidth===h.bandwidth)[0];let _,y,x;m||(_=p.filter(C=>C.width>n||C.height>s),y=_.filter(C=>C.width===_[0].width&&C.height===_[0].height),h=y[y.length-1],x=y.filter(C=>C.bandwidth===h.bandwidth)[0]);let b;if(a.leastPixelDiffSelector){const C=p.map(j=>(j.pixelDiff=Math.abs(j.width-n)+Math.abs(j.height-s),j));yp(C,(j,E)=>j.pixelDiff===E.pixelDiff?E.bandwidth-j.bandwidth:j.pixelDiff-E.pixelDiff),b=C[0]}const w=b||x||m||f||u[0]||c[0];if(w&&w.playlist){let C="sortedPlaylistReps";return b?C="leastPixelDiffRep":x?C="resolutionPlusOneRep":m?C="resolutionBestRep":f?C="bandwidthBestRep":u[0]&&(C="enabledPlaylistReps"),Wx(`choosing ${aO(w)} using ${C} with options`,o),w.playlist}return Wx("could not choose a playlist with options",o),null};const oO=function(){let t=this.useDevicePixelRatio&&de.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(t=this.customPixelRatio),Qz(this.playlists.main,this.systemBandwidth,parseInt(R_(this.tech_.el(),"width"),10)*t,parseInt(R_(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.playlistController_)},o2e=function(t){let e=-1,n=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let s=this.useDevicePixelRatio&&de.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(s=this.customPixelRatio),e<0&&(e=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(e=t*this.systemBandwidth+(1-t)*e,n=this.systemBandwidth),Qz(this.playlists.main,e,parseInt(R_(this.tech_.el(),"width"),10)*s,parseInt(R_(this.tech_.el(),"height"),10)*s,this.limitRenditionByPlayerDimensions,this.playlistController_)}},l2e=function(t){const{main:e,currentTime:n,bandwidth:s,duration:i,segmentDuration:a,timeUntilRebuffer:o,currentTimeline:l,syncController:c}=t,u=e.playlists.filter(g=>!Fi.isIncompatible(g));let d=u.filter(Fi.isEnabled);d.length||(d=u.filter(g=>!Fi.isDisabled(g)));const f=d.filter(Fi.hasAttribute.bind(null,"BANDWIDTH")).map(g=>{const _=c.getSyncPoint(g,i,l,n)?1:2,x=Fi.estimateSegmentRequestTime(a,s,g)*_-o;return{playlist:g,rebufferingImpact:x}}),p=f.filter(g=>g.rebufferingImpact<=0);return yp(p,(g,m)=>EA(m.playlist,g.playlist)),p.length?p[0]:(yp(f,(g,m)=>g.rebufferingImpact-m.rebufferingImpact),f[0]||null)},c2e=function(){const t=this.playlists.main.playlists.filter(Fi.isEnabled);return yp(t,(n,s)=>EA(n,s)),t.filter(n=>!!I0(this.playlists.main,n).video)[0]||null},u2e=t=>{let e=0,n;return t.bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach(s=>{n.set(s,e),e+=s.byteLength})),n};function Zz(t){try{return new URL(t).pathname.split("/").slice(-2).join("/")}catch{return""}}const d2e=function(t,e,n){if(!t[n]){e.trigger({type:"usage",name:"vhs-608"});let s=n;/^cc708_/.test(n)&&(s="SERVICE"+n.split("_")[1]);const i=e.textTracks().getTrackById(s);if(i)t[n]=i;else{const a=e.options_.vhs&&e.options_.vhs.captionServices||{};let o=n,l=n,c=!1;const u=a[s];u&&(o=u.label,l=u.language,c=u.default),t[n]=e.addRemoteTextTrack({kind:"captions",id:s,default:c,label:o,language:l},!1).track}}},h2e=function({inbandTextTracks:t,captionArray:e,timestampOffset:n}){if(!e)return;const s=de.WebKitDataCue||de.VTTCue;e.forEach(i=>{const a=i.stream;i.content?i.content.forEach(o=>{const l=new s(i.startTime+n,i.endTime+n,o.text);l.line=o.line,l.align="left",l.position=o.position,l.positionAlign="line-left",t[a].addCue(l)}):t[a].addCue(new s(i.startTime+n,i.endTime+n,i.text))})},f2e=function(t){Object.defineProperties(t.frame,{id:{get(){return je.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return je.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return je.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},p2e=({inbandTextTracks:t,metadataArray:e,timestampOffset:n,videoDuration:s})=>{if(!e)return;const i=de.WebKitDataCue||de.VTTCue,a=t.metadataTrack_;if(!a||(e.forEach(d=>{const h=d.cueTime+n;typeof h!="number"||de.isNaN(h)||h<0||!(h<1/0)||!d.frames||!d.frames.length||d.frames.forEach(f=>{const p=new i(h,h,f.value||f.url||f.data||"");p.frame=f,p.value=f,f2e(p),a.addCue(p)})}),!a.cues||!a.cues.length))return;const o=a.cues,l=[];for(let d=0;d<o.length;d++)o[d]&&l.push(o[d]);const c=l.reduce((d,h)=>{const f=d[h.startTime]||[];return f.push(h),d[h.startTime]=f,d},{}),u=Object.keys(c).sort((d,h)=>Number(d)-Number(h));u.forEach((d,h)=>{const f=c[d],p=isFinite(s)?s:d,g=Number(u[h+1])||p;f.forEach(m=>{m.endTime=g})})},m2e={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},g2e=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),v2e=({inbandTextTracks:t,dateRanges:e})=>{const n=t.metadataTrack_;if(!n)return;const s=de.WebKitDataCue||de.VTTCue;e.forEach(i=>{for(const a of Object.keys(i)){if(g2e.has(a))continue;const o=new s(i.startTime,i.endTime,"");o.id=i.id,o.type="com.apple.quicktime.HLS",o.value={key:m2e[a],data:i[a]},(a==="scte35Out"||a==="scte35In")&&(o.value.data=new Uint8Array(o.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(o)}i.processDateRange()})},lO=(t,e,n)=>{t.metadataTrack_||(t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,je.browser.IS_ANY_SAFARI||(t.metadataTrack_.inBandMetadataTrackDispatchType=e))},i0=function(t,e,n){let s,i;if(n&&n.cues)for(s=n.cues.length;s--;)i=n.cues[s],i.startTime>=t&&i.endTime<=e&&n.removeCue(i)},y2e=function(t){const e=t.cues;if(!e)return;const n={};for(let s=e.length-1;s>=0;s--){const i=e[s],a=`${i.startTime}-${i.endTime}-${i.text}`;n[a]?t.removeCue(i):n[a]=i}},x2e=(t,e,n)=>{if(typeof e>"u"||e===null||!t.length)return[];const s=Math.ceil((e-n+3)*sh.ONE_SECOND_IN_TS);let i;for(i=0;i<t.length&&!(t[i].pts>s);i++);return t.slice(i)},b2e=(t,e,n)=>{if(!e.length)return t;if(n)return e.slice();const s=e[0].pts;let i=0;for(i;i<t.length&&!(t[i].pts>=s);i++);return t.slice(0,i).concat(e)},_2e=(t,e,n,s)=>{const i=Math.ceil((e-s)*sh.ONE_SECOND_IN_TS),a=Math.ceil((n-s)*sh.ONE_SECOND_IN_TS),o=t.slice();let l=t.length;for(;l--&&!(t[l].pts<=a););if(l===-1)return o;let c=l+1;for(;c--&&!(t[c].pts<=i););return c=Math.max(c,0),o.splice(c,l-c+1),o},w2e=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const n=Object.keys(t).sort(),s=Object.keys(e).sort();if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++){const a=n[i];if(a!==s[i]||t[a]!==e[a])return!1}return!0},C2e=function(t,e,n){e=e||[];const s=[];let i=0;for(let a=0;a<e.length;a++){const o=e[a];if(t===o.timeline&&(s.push(a),i+=o.duration,i>n))return a}return s.length===0?0:s[s.length-1]},Lg=1,S2e=500,cO=t=>typeof t=="number"&&isFinite(t),Gx=1/60,j2e=(t,e,n)=>t!=="main"||!e||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,T2e=(t,e,n)=>{let s=e-pr.BACK_BUFFER_LENGTH;t.length&&(s=Math.max(s,t.start(0)));const i=e-n;return Math.min(i,s)},Sf=t=>{const{startOfSegment:e,duration:n,segment:s,part:i,playlist:{mediaSequence:a,id:o,segments:l=[]},mediaIndex:c,partIndex:u,timeline:d}=t,h=l.length-1;let f="mediaIndex/partIndex increment";t.getMediaInfoForTime?f=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(f+=` with independent ${t.independent}`);const p=typeof u=="number",g=t.segment.uri?"segment":"pre-segment",m=p?yz({preloadSegment:s})-1:0;return`${g} [${a+c}/${a+h}]`+(p?` part [${u}/${m}]`:"")+` segment start/end [${s.start} => ${s.end}]`+(p?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${n}] timeline [${d}] selected by [${f}] playlist [${o}]`},uO=t=>`${t}TimingInfo`,E2e=({segmentTimeline:t,currentTimeline:e,startOfSegment:n,buffered:s,overrideCheck:i})=>!i&&t===e?null:t<e?n:s.length?s.end(s.length-1):n,dO=({timelineChangeController:t,currentTimeline:e,segmentTimeline:n,loaderType:s,audioDisabled:i})=>{if(e===n)return!1;if(s==="audio"){const a=t.lastTimelineChange({type:"main"});return!a||a.to!==n}if(s==="main"&&i){const a=t.pendingTimelineChange({type:"audio"});return!(a&&a.to===n)}return!1},hO=t=>{if(!t)return!1;const e=t.pendingTimelineChange({type:"audio"}),n=t.pendingTimelineChange({type:"main"}),s=e&&n,i=s&&e.to!==n.to;return!!(s&&e.from!==-1&&n.from!==-1&&i)},fO=t=>{t&&(t.pause(),t.resetEverything(),t.load())},N2e=t=>{let e=0;return["video","audio"].forEach(function(n){const s=t[`${n}TimingInfo`];if(!s)return;const{start:i,end:a}=s;let o;typeof i=="bigint"||typeof a=="bigint"?o=de.BigInt(a)-de.BigInt(i):typeof i=="number"&&typeof a=="number"&&(o=a-i),typeof o<"u"&&o>e&&(e=o)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},pO=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+dl:!1,k2e=(t,e)=>{if(e!=="hls")return null;const n=N2e({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!n)return null;const s=t.playlist.targetDuration,i=pO({segmentDuration:n,maxDuration:s*2}),a=pO({segmentDuration:n,maxDuration:s}),o=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${n} when the reported duration is ${t.duration} and the target duration is ${s}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return i||a?{severity:i?"warn":"info",message:o}:null},Gd=({type:t,segment:e})=>{if(!e)return;const n=!!(e.key||e.map&&e.map.ke),s=!!(e.map&&!e.map.bytes),i=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:t||e.type,uri:e.resolvedUri||e.uri,start:i,duration:e.duration,isEncrypted:n,isMediaInitialization:s}};class EN extends je.EventTarget{constructor(e,n={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=uo(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(s){s!==this.state_&&(this.logger_(`${this.state_} -> ${s}`),this.state_=s,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.sourceUpdater_.on("codecschange",s=>{this.trigger(ds({type:"codecschange"},s))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",s=>{this.trigger(ds({type:"timelinechange"},s)),this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return jj.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&de.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,de.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&jj.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return kr();if(this.loaderType_==="main"){const{hasAudio:n,hasVideo:s,isMuxed:i}=e;if(s&&n&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,n=!1){if(!e)return null;const s=M_(e);let i=this.initSegments_[s];return n&&!i&&e.bytes&&(this.initSegments_[s]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,n=!1){if(!e)return null;const s=Oz(e);let i=this.keyCache_[s];this.cacheEncryptionKeys_&&n&&!i&&e.bytes&&(this.keyCache_[s]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const a={resolvedUri:(i||e).resolvedUri};return i&&(a.bytes=i.bytes),a}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,n={}){if(!e)return;const s=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let a=null;if(s&&(s.id?a=s.id:s.uri&&(a=s.uri)),this.logger_(`playlist update [${a} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${Cj(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const o=e.mediaSequence-s.mediaSequence;if(this.logger_(`live window shift [${o}]`),this.mediaIndex!==null)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const l=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!l.parts||!l.parts.length||!l.parts[this.partIndex])){const c=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=c}}i&&(i.mediaIndex-=o,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,e)}pause(){this.checkBufferTimeout_&&(de.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&jj.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,n,s=()=>{},i=!1){if(n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let a=1;const o=()=>{a--,a===0&&s()};(i||!this.audioDisabled_)&&(a++,this.sourceUpdater_.removeAudio(e,n,o)),(i||this.loaderType_==="main")&&(this.gopBuffer_=_2e(this.gopBuffer_,e,n,this.timeMapping_),a++,this.sourceUpdater_.removeVideo(e,n,o));for(const l in this.inbandTextTracks_)i0(e,n,this.inbandTextTracks_[l]);i0(e,n,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&de.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=de.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&de.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=de.setTimeout(this.monitorBufferTick_.bind(this),S2e)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const n={segmentInfo:Gd({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:n}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,n=this.playlist_,s=this.partIndex){if(!n||!this.mediaSource_)return!1;const i=typeof e=="number"&&n.segments[e],a=e+1===n.segments.length,o=!i||!i.parts||s+1===i.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&a&&o}chooseNextRequest_(){const e=this.buffered_(),n=Cj(e)||0,s=wA(e,this.currentTime_()),i=!this.hasPlayed_()&&s>=1,a=s>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||i||a)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const l={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(l.isSyncRequest)l.mediaIndex=C2e(this.currentTimeline_,o,n),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${l.mediaIndex}`);else if(this.mediaIndex!==null){const f=o[this.mediaIndex],p=typeof this.partIndex=="number"?this.partIndex:-1;l.startOfSegment=f.end?f.end:n,f.parts&&f.parts[p+1]?(l.mediaIndex=this.mediaIndex,l.partIndex=p+1):l.mediaIndex=this.mediaIndex+1}else{let f,p,g;const m=this.fetchAtBuffer_?n:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${m}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${n}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const _=this.getSyncInfoFromMediaSequenceSync_(m);if(!_){const y="No sync info found while using media sequence sync";return this.error({message:y,metadata:{errorType:je.Error.StreamingFailedToSelectNextSegment,error:new Error(y)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${_.start} --> ${_.end})`),f=_.segmentIndex,p=_.partIndex,g=_.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const _=Fi.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:m,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});f=_.segmentIndex,p=_.partIndex,g=_.startTime}l.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${m}`:`currentTime ${m}`,l.mediaIndex=f,l.startOfSegment=g,l.partIndex=p,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${l.mediaIndex} `)}const c=o[l.mediaIndex];let u=c&&typeof l.partIndex=="number"&&c.parts&&c.parts[l.partIndex];if(!c||typeof l.partIndex=="number"&&!u)return null;typeof l.partIndex!="number"&&c.parts&&(l.partIndex=0,u=c.parts[0]);const d=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!s&&u&&!d&&!u.independent)if(l.partIndex===0){const f=o[l.mediaIndex-1],p=f.parts&&f.parts.length&&f.parts[f.parts.length-1];p&&p.independent&&(l.mediaIndex-=1,l.partIndex=f.parts.length-1,l.independent="previous segment")}else c.parts[l.partIndex-1].independent&&(l.partIndex-=1,l.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return l.mediaIndex>=o.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,l.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(l))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const n=Math.max(e,this.mediaSequenceSync_.start);e!==n&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${n}`);const s=this.mediaSequenceSync_.getSyncInfoForTime(n);if(!s)return null;if(!s.isAppended)return s;const i=this.mediaSequenceSync_.getSyncInfoForTime(s.end);return i?(i.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),i):null}generateSegmentInfo_(e){const{independent:n,playlist:s,mediaIndex:i,startOfSegment:a,isSyncRequest:o,partIndex:l,forceTimestampOffset:c,getMediaInfoForTime:u}=e,d=s.segments[i],h=typeof l=="number"&&d.parts[l],f={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||d.resolvedUri,mediaIndex:i,partIndex:h?l:null,isSyncRequest:o,startOfSegment:a,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:h&&h.duration||d.duration,segment:d,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:n},p=typeof c<"u"?c:this.isPendingTimestampOffset_;f.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:d.timeline,currentTimeline:this.currentTimeline_,startOfSegment:a,buffered:this.buffered_(),overrideCheck:p});const g=Cj(this.sourceUpdater_.audioBuffered());return typeof g=="number"&&(f.audioAppendStart=g-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(f.gopsToAlignWith=x2e(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),f}timestampOffsetForSegment_(e){return E2e(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const n=this.currentTime_(),s=e.bandwidth,i=this.pendingSegment_.duration,a=Fi.estimateSegmentRequestTime(i,s,this.playlist_,e.bytesReceived),o=Kbe(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(a<=o)return;const l=l2e({main:this.vhs_.playlists.main,currentTime:n,bandwidth:s,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!l)return;const u=a-o-l.rebufferingImpact;let d=.5;o<=dl&&(d=1),!(!l.playlist||l.playlist.uri===this.playlist_.uri||u<d)&&(this.bandwidth=l.playlist.attributes.BANDWIDTH*pr.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Sf(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")}handleTrackInfo_(e,n){const{hasAudio:s,hasVideo:i}=n,a={segmentInfo:Gd({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:s,hasVideo:i}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:a}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},w2e(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,n,s,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const a=this.pendingSegment_,o=uO(n);a[o]=a[o]||{},a[o][s]=i,this.logger_(`timinginfo: ${n} - ${s} - ${i}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a={};n.forEach(o=>{a[o.stream]=a[o.stream]||{startTime:1/0,captions:[],endTime:0};const l=a[o.stream];l.startTime=Math.min(l.startTime,o.startTime+i),l.endTime=Math.max(l.endTime,o.endTime+i),l.captions.push(o)}),Object.keys(a).forEach(o=>{const{startTime:l,endTime:c,captions:u}=a[o],d=this.inbandTextTracks_;this.logger_(`adding cues from ${l} -> ${c} for ${o}`),d2e(d,this.vhs_.tech_,o),i0(l,c,d[o]),h2e({captionArray:u,inbandTextTracks:d,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,n,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,s));return}this.addMetadataToTextTrack(s,n,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(n=>n())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(n=>n())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()&&dO({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?(hO(this.timelineChangeController_)&&fO(this),!1):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;const{hasAudio:s,hasVideo:i,isMuxed:a}=n;return i&&!e.videoTimingInfo||s&&!this.audioDisabled_&&!a&&!e.audioTimingInfo?!1:dO({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?(hO(this.timelineChangeController_)&&fO(this),!1):!0}handleData_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,n));return}const s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),s.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),s.isFmp4=e.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[uO(n.type)].start;else{const i=this.getCurrentMediaInfo_(),a=this.loaderType_==="main"&&i&&i.hasVideo;let o;a&&(o=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:o,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,n.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=this.chooseNextRequest_();if(i.mediaIndex!==s.mediaIndex||i.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,n)}}updateAppendInitSegmentStatus(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:n,map:s,playlist:i}){if(s){const a=M_(s);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(s,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,n):null}handleQuotaExceededError_({segmentInfo:e,type:n,bytes:s},i){const a=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+rh(a).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+rh(o).join(", "));const l=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0,u=o.length?o.start(0):0,d=o.length?o.end(o.length-1):0;if(c-l<=Lg&&d-u<=Lg){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${s.byteLength}, audio buffer: ${rh(a).join(", ")}, video buffer: ${rh(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:n,bytes:s}));const f=this.currentTime_()-Lg;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${f}`),this.remove(0,f,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Lg}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=de.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Lg*1e3)},!0)}handleAppendError_({segmentInfo:e,type:n,bytes:s},i){if(i){if(i.code===kz){this.handleQuotaExceededError_({segmentInfo:e,type:n,bytes:s});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error({message:`${n} append of ${s.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:je.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:s,data:i,bytes:a}){if(!a){const l=[i];let c=i.byteLength;s&&(l.unshift(s),c+=s.byteLength),a=u2e({bytes:c,segments:l})}const o={segmentInfo:Gd({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:o}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:n,bytes:a},this.handleAppendError_.bind(this,{segmentInfo:e,type:n,bytes:a}))}handleSegmentTimingInfo_(e,n,s){if(!this.pendingSegment_||n!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,a=`${e}TimingInfo`;i[a]||(i[a]={}),i[a].transmuxerPrependedSeconds=s.prependedContentDuration||0,i[a].transmuxedPresentationStart=s.start.presentation,i[a].transmuxedDecodeStart=s.start.decode,i[a].transmuxedPresentationEnd=s.end.presentation,i[a].transmuxedDecodeEnd=s.end.decode,i[a].baseMediaDecodeTime=s.baseMediaDecodeTime}appendData_(e,n){const{type:s,data:i}=n;if(!i||!i.byteLength||s==="audio"&&this.audioDisabled_)return;const a=this.getInitSegmentAndUpdateState_({type:s,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:a,data:i})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(()=>{const n=ds({},e,{forceTimestampOffset:!0});ds(e,this.generateSegmentInfo_(n)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const n=this.createSimplifiedSegmentObj_(e),s=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=this.mediaIndex!==null,a=e.timeline!==this.currentTimeline_&&e.timeline>0,o=s||i&&a;this.logger_(`Requesting
${Zz(e.uri)}
${Sf(e)}`),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=n2e({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:l,level:c,stream:u})=>{this.logger_(`${Sf(e)} logged from transmuxer stream ${u} as a ${c}: ${l}`)},triggerSegmentEventFn:({type:l,segment:c,keyInfo:u,trackInfo:d,timingInfo:h})=>{const p={segmentInfo:Gd({segment:c})};u&&(p.keyInfo=u),d&&(p.trackInfo=d),h&&(p.timingInfo=h),this.trigger({type:l,metadata:p})}})}trimBackBuffer_(e){const n=T2e(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)}createSimplifiedSegmentObj_(e){const n=e.segment,s=e.part,i=e.segment.key||e.segment.map&&e.segment.map.key,a=e.segment.map&&!e.segment.map.bytes,o={resolvedUri:s?s.resolvedUri:n.resolvedUri,byterange:s?s.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:i,isMediaInitialization:a},l=e.playlist.segments[e.mediaIndex-1];if(l&&l.timeline===n.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),n.key){const c=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(n.key),o.key.iv=c}return n.map&&(o.map=this.initSegmentForMap(n.map)),o}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<Gx){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Gx}`);return}const s={bandwidthInfo:{from:this.bandwidth,to:n.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:s}),this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,n,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,s));return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_||n.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===fl.ABORTED)return;if(this.pause(),e.code===fl.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,n.stats),i.endOfAllRequests=n.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=b2e(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:n,mediaIndex:s,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:a,useVideoTimingInfo:o,videoTimingInfo:l,audioTimingInfo:c}){if(typeof e<"u")return e;if(!o)return c.start;const u=n.segments[s-1];return s===0||!u||typeof u.start>"u"||u.end!==i+a?i:l.start}waitForAppendsToComplete_(e){const n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:s,hasVideo:i,isMuxed:a}=n,o=this.loaderType_==="main"&&i,l=!this.audioDisabled_&&s&&!a;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}o&&e.waitingOnAppends++,l&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),l&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const n=j2e(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:n,timingInfo:s}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:s.start:s.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const n=this.getMediaInfo_(),i=this.loaderType_==="main"&&n&&n.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end=typeof i.end=="number"?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const c={segmentInfo:Gd({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:c})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=k2e(e,this.sourceType_);if(n&&(n.severity==="warn"?je.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Sf(e)}`);return}this.logger_(`Appended ${Sf(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const s=e.segment,i=e.part,a=s.end&&this.currentTime_()-s.end>e.playlist.targetDuration*3,o=i&&i.end&&this.currentTime_()-i.end>e.playlist.partTargetDuration*3;if(a||o){this.logger_(`bad ${a?"segment":"part"} ${Sf(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Gx){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Gx}`);return}const n=this.throughput.rate,s=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/s*8*1e3);this.throughput.rate+=(i-n)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const n=e.segment,s=n.start,i=n.end;if(!cO(s)||!cO(i))return;i0(s,i,this.segmentMetadataTrack_);const a=de.WebKitDataCue||de.VTTCue,o={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,programDateTime:n.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:s,end:i},l=JSON.stringify(o),c=new a(s,i,l);c.value=o,this.segmentMetadataTrack_.addCue(c)}}function dc(){}const Jz=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},A2e=["video","audio"],NN=(t,e)=>{const n=e[`${t}Buffer`];return n&&n.updating||e.queuePending[t]},D2e=(t,e)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.type==="mediaSource")return null;if(s.type===t)return n}return null},xp=(t,e)=>{if(e.queue.length===0)return;let n=0,s=e.queue[n];if(s.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),s.action(e),s.doneFn&&s.doneFn(),xp("audio",e),xp("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||NN(t,e))){if(s.type!==t){if(n=D2e(t,e.queue),n===null)return;s=e.queue[n]}if(e.queue.splice(n,1),e.queuePending[t]=s,s.action(t,e),!s.doneFn){e.queuePending[t]=null,xp(t,e);return}}},eH=(t,e)=>{const n=e[`${t}Buffer`],s=Jz(t);n&&(n.removeEventListener("updateend",e[`on${s}UpdateEnd_`]),n.removeEventListener("error",e[`on${s}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},sl=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,la={appendBuffer:(t,e,n)=>(s,i)=>{const a=i[`${s}Buffer`];if(sl(i.mediaSource,a)){i.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${s}Buffer`);try{a.appendBuffer(t)}catch(o){i.logger_(`Error with code ${o.code} `+(o.code===kz?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${s}Buffer`),i.queuePending[s]=null,n(o)}}},remove:(t,e)=>(n,s)=>{const i=s[`${n}Buffer`];if(sl(s.mediaSource,i)){s.logger_(`Removing ${t} to ${e} from ${n}Buffer`);try{i.remove(t,e)}catch{s.logger_(`Remove ${t} to ${e} from ${n}Buffer failed`)}}},timestampOffset:t=>(e,n)=>{const s=n[`${e}Buffer`];sl(n.mediaSource,s)&&(n.logger_(`Setting ${e}timestampOffset to ${t}`),s.timestampOffset=t)},callback:t=>(e,n)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(n){je.log.warn("Failed to call media source endOfStream",n)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(n){je.log.warn("Failed to set media source duration",n)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const n=e[`${t}Buffer`];if(sl(e.mediaSource,n)){e.logger_(`calling abort on ${t}Buffer`);try{n.abort()}catch(s){je.log.warn(`Failed to abort on ${t}Buffer`,s)}}},addSourceBuffer:(t,e)=>n=>{const s=Jz(t),i=Cv(e);n.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const a=n.mediaSource.addSourceBuffer(i);a.addEventListener("updateend",n[`on${s}UpdateEnd_`]),a.addEventListener("error",n[`on${s}Error_`]),n.codecs[t]=e,n[`${t}Buffer`]=a},removeSourceBuffer:t=>e=>{const n=e[`${t}Buffer`];if(eH(t,e),!!sl(e.mediaSource,n)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(n)}catch(s){je.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,s)}}},changeType:t=>(e,n)=>{const s=n[`${e}Buffer`],i=Cv(t);if(!sl(n.mediaSource,s))return;const a=t.substring(0,t.indexOf(".")),o=n.codecs[e];if(o.substring(0,o.indexOf("."))===a)return;const c={codecsChangeInfo:{from:o,to:t}};n.trigger({type:"codecschange",metadata:c}),n.logger_(`changing ${e}Buffer codec from ${o} to ${t}`);try{s.changeType(i),n.codecs[e]=t}catch(u){c.errorType=je.Error.StreamingCodecsChangeError,c.error=u,u.metadata=c,n.error_=u,n.trigger("error"),je.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},ca=({type:t,sourceUpdater:e,action:n,doneFn:s,name:i})=>{e.queue.push({type:t,action:n,doneFn:s,name:i}),xp(t,e)},mO=(t,e)=>n=>{const s=e[`${t}Buffered`](),i=Gbe(s);if(e.logger_(`received "updateend" event for ${t} Source Buffer: `,i),e.queuePending[t]){const a=e.queuePending[t].doneFn;e.queuePending[t]=null,a&&a(e[`${t}Error_`])}xp(t,e)};class tH extends je.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>xp("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=uo("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=mO("video",this),this.onAudioUpdateEnd_=mO("audio",this),this.onVideoError_=n=>{this.videoError_=n},this.onAudioError_=n=>{this.audioError_=n},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,n){ca({type:"mediaSource",sourceUpdater:this,action:la.addSourceBuffer(e,n),name:"addSourceBuffer"})}abort(e){ca({type:e,sourceUpdater:this,action:la.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){je.log.error("removeSourceBuffer is not supported!");return}ca({type:"mediaSource",sourceUpdater:this,action:la.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!je.browser.IS_FIREFOX&&de.MediaSource&&de.MediaSource.prototype&&typeof de.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return de.SourceBuffer&&de.SourceBuffer.prototype&&typeof de.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,n){if(!this.canChangeType()){je.log.error("changeType is not supported!");return}ca({type:e,sourceUpdater:this,action:la.changeType(n),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(n=>{const s=e[n];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(n,s);this.canChangeType()&&this.changeType(n,s)})}appendBuffer(e,n){const{segmentInfo:s,type:i,bytes:a}=e;if(this.processedAppend_=!0,i==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_(`delayed audio append of ${a.length} until video append`);return}const o=n;if(ca({type:i,sourceUpdater:this,action:la.appendBuffer(a,s||{mediaIndex:-1},o),doneFn:n,name:"appendBuffer"}),i==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const l=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${l.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,l.forEach(c=>{this.appendBuffer.apply(this,c)})}}audioBuffered(){return sl(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:kr()}videoBuffered(){return sl(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:kr()}buffered(){const e=sl(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=sl(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():Xbe(this.audioBuffered(),this.videoBuffered())}setDuration(e,n=dc){ca({type:"mediaSource",sourceUpdater:this,action:la.duration(e),name:"duration",doneFn:n})}endOfStream(e=null,n=dc){typeof e!="string"&&(e=void 0),ca({type:"mediaSource",sourceUpdater:this,action:la.endOfStream(e),name:"endOfStream",doneFn:n})}removeAudio(e,n,s=dc){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}ca({type:"audio",sourceUpdater:this,action:la.remove(e,n),doneFn:s,name:"remove"})}removeVideo(e,n,s=dc){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}ca({type:"video",sourceUpdater:this,action:la.remove(e,n),doneFn:s,name:"remove"})}updating(){return!!(NN("audio",this)||NN("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(ca({type:"audio",sourceUpdater:this,action:la.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(ca({type:"video",sourceUpdater:this,action:la.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&ca({type:"audio",sourceUpdater:this,action:la.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&ca({type:"video",sourceUpdater:this,action:la.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),A2e.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>eH(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const gO=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),P2e=t=>{const e=new Uint8Array(t);return Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("")},vO=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class I2e extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class M2e extends EN{constructor(e,n={}){super(e,n),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return kr();const e=this.subtitlesTrack_.cues,n=e[0].startTime,s=e[e.length-1].startTime;return kr([[n,s]])}initSegmentForMap(e,n=!1){if(!e)return null;const s=M_(e);let i=this.initSegments_[s];if(n&&!i&&e.bytes){const a=vO.byteLength+e.bytes.byteLength,o=new Uint8Array(a);o.set(e.bytes),o.set(vO,e.bytes.byteLength),this.initSegments_[s]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,n){i0(e,n,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const n=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",n),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,n,s){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===fl.TIMEOUT&&this.handleTimeout_(),e.code===fl.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");const a=i.segment;if(a.map&&(a.map.bytes=n.map.bytes),i.bytes=n.bytes,typeof de.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,n,s),()=>this.stopForError({message:"Error loading vtt.js"}));return}a.requested=!0;try{this.parseVTTCues_(i)}catch(o){this.stopForError({message:o.message,metadata:{errorType:je.Error.StreamingVttParserError,error:o}});return}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,i.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new de.VTTCue(o.startTime,o.endTime,o.text):o)}),y2e(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let n,s=!1;if(typeof de.WebVTT!="function")throw new I2e;typeof de.TextDecoder=="function"?n=new de.TextDecoder("utf8"):(n=de.WebVTT.StringDecoder(),s=!0);const i=new de.WebVTT.Parser(de,de.vttjs,n);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=o=>{e.timestampmap=o},i.onparsingerror=o=>{je.log.warn("Error encountered when parsing cues: "+o.message)},e.segment.map){let o=e.segment.map.bytes;s&&(o=gO(o)),i.parse(o)}let a=e.bytes;s&&(a=gO(a)),i.parse(a),i.flush()}updateTimeMapping_(e,n,s){const i=e.segment;if(!n)return;if(!e.cues.length){i.empty=!0;return}const{MPEGTS:a,LOCAL:o}=e.timestampmap,c=a/sh.ONE_SECOND_IN_TS-o+n.mapping;if(e.cues.forEach(u=>{const d=u.endTime-u.startTime,h=a===0?u.startTime+c:this.handleRollover_(u.startTime+c,n.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+d,0)}),!s.syncInfo){const u=e.cues[0].startTime,d=e.cues[e.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+e.mediaIndex,time:Math.min(u,d-i.duration)}}}handleRollover_(e,n){if(n===null)return e;let s=e*sh.ONE_SECOND_IN_TS;const i=n*sh.ONE_SECOND_IN_TS;let a;for(i<s?a=-8589934592:a=8589934592;Math.abs(s-i)>4294967296;)s+=a;return s/sh.ONE_SECOND_IN_TS}}const O2e=function(t,e){const n=t.cues;for(let s=0;s<n.length;s++){const i=n[s];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},R2e=function(t,e,n=0){if(!t.segments)return;let s=n,i;for(let a=0;a<t.segments.length;a++){const o=t.segments[a];if(i||(i=O2e(e,s+o.duration/2)),i){if("cueIn"in o){i.endTime=s,i.adEndTime=s,s+=o.duration,i=null;continue}if(s<i.endTime){s+=o.duration;continue}i.endTime+=o.duration}else if("cueOut"in o&&(i=new de.VTTCue(s,s+o.duration,o.cueOut),i.adStartTime=s,i.adEndTime=s+parseFloat(o.cueOut),e.addCue(i)),"cueOutCont"in o){const[l,c]=o.cueOutCont.split("/").map(parseFloat);i=new de.VTTCue(s,s+o.duration,""),i.adStartTime=s-l,i.adEndTime=i.adStartTime+c,e.addCue(i)}s+=o.duration}};class yO{constructor({start:e,end:n,segmentIndex:s,partIndex:i=null,appended:a=!1}){this.start_=e,this.end_=n,this.segmentIndex_=s,this.partIndex_=i,this.appended_=a}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class L2e{constructor(e,n=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=n}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class nH{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,n){const{mediaSequence:s,segments:i}=e;if(this.isReliable_=this.isReliablePlaylist_(s,i),!!this.isReliable_)return this.updateStorage_(i,s,this.calculateBaseTime_(s,n))}getSyncInfoForTime(e){for(const{segmentSyncInfo:n,partsSyncInfo:s}of this.storage_.values())if(s.length){for(const i of s)if(i.isInRange(e))return i}else if(n.isInRange(e))return n;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,n,s){const i=new Map;let a=`
`,o=s,l=n;this.start_=o,e.forEach((c,u)=>{const d=this.storage_.get(l),h=o,f=h+c.duration,p=!!(d&&d.segmentSyncInfo&&d.segmentSyncInfo.isAppended),g=new yO({start:h,end:f,appended:p,segmentIndex:u});c.syncInfo=g;let m=o;const _=(c.parts||[]).map((y,x)=>{const b=m,w=m+y.duration,C=!!(d&&d.partsSyncInfo&&d.partsSyncInfo[x]&&d.partsSyncInfo[x].isAppended),j=new yO({start:b,end:w,appended:C,segmentIndex:u,partIndex:x});return m=w,a+=`Media Sequence: ${l}.${x} | Range: ${b} --> ${w} | Appended: ${C}
`,y.syncInfo=j,j});i.set(l,new L2e(g,_)),a+=`${Zz(c.resolvedUri)} | Media Sequence: ${l} | Range: ${h} --> ${f} | Appended: ${p}
`,l++,o=f}),this.end_=o,this.storage_=i,this.diagnostics_=a}calculateBaseTime_(e,n){return this.storage_.size?this.storage_.has(e)?this.storage_.get(e).segmentSyncInfo.start:n:0}isReliablePlaylist_(e,n){return e!=null&&Array.isArray(n)&&n.length}}class xO extends nH{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,n){if(!this.storage_.size){const s=this.parent_.getSyncInfoForMediaSequence(e);return s?s.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,n)}}const B2e=86400,Tj=[{name:"VOD",run:(t,e,n,s,i)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(t,e,n,s,i,a)=>{const o=t.getMediaSequenceSync(a);if(!o||!o.isReliable)return null;const l=o.getSyncInfoForTime(i);return l?{time:l.start,partIndex:l.partIndex,segmentIndex:l.segmentIndex}:null}},{name:"ProgramDateTime",run:(t,e,n,s,i)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let a=null,o=null;const l=xN(e);i=i||0;for(let c=0;c<l.length;c++){const u=e.endList||i===0?c:l.length-(c+1),d=l[u],h=d.segment,f=t.timelineToDatetimeMappings[h.timeline];if(!f||!h.dateTimeObject)continue;let g=h.dateTimeObject.getTime()/1e3+f;if(h.parts&&typeof d.partIndex=="number")for(let _=0;_<d.partIndex;_++)g+=h.parts[_].duration;const m=Math.abs(i-g);if(o!==null&&(m===0||o<m))break;o=m,a={time:g,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}return a}},{name:"Segment",run:(t,e,n,s,i)=>{let a=null,o=null;i=i||0;const l=xN(e);for(let c=0;c<l.length;c++){const u=e.endList||i===0?c:l.length-(c+1),d=l[u],h=d.segment,f=d.part&&d.part.start||h&&h.start;if(h.timeline===s&&typeof f<"u"){const p=Math.abs(i-f);if(o!==null&&o<p)break;(!a||o===null||o>=p)&&(o=p,a={time:f,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return a}},{name:"Discontinuity",run:(t,e,n,s,i)=>{let a=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let o=null;for(let l=0;l<e.discontinuityStarts.length;l++){const c=e.discontinuityStarts[l],u=e.discontinuitySequence+l+1,d=t.discontinuities[u];if(d){const h=Math.abs(i-d.time);if(o!==null&&o<h)break;(!a||o===null||o>=h)&&(o=h,a={time:d.time,segmentIndex:c,partIndex:null})}}}return a}},{name:"Playlist",run:(t,e,n,s,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class F2e extends je.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const n=new nH,s=new xO(n),i=new xO(n);this.mediaSequenceStorage_={main:n,audio:s,vtt:i},this.logger_=uo("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,n,s,i,a){if(n!==1/0)return Tj.find(({name:c})=>c==="VOD").run(this,e,n);const o=this.runStrategies_(e,n,s,i,a);if(!o.length)return null;for(const l of o){const{syncPoint:c,strategy:u}=l,{segmentIndex:d,time:h}=c;if(d<0)continue;const f=e.segments[d],p=h,g=p+f.duration;if(this.logger_(`Strategy: ${u}. Current time: ${i}. selected segment: ${d}. Time: [${p} -> ${g}]}`),i>=p&&i<g)return this.logger_("Found sync point with exact match: ",c),c}return this.selectSyncPoint_(o,{key:"time",value:i})}getExpiredTime(e,n){if(!e||!e.segments)return null;const s=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!s.length)return null;const i=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+D0({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,n,s,i,a){const o=[];for(let l=0;l<Tj.length;l++){const c=Tj[l],u=c.run(this,e,n,s,i,a);u&&(u.strategy=c.name,o.push({strategy:c.name,syncPoint:u}))}return o}selectSyncPoint_(e,n){let s=e[0].syncPoint,i=Math.abs(e[0].syncPoint[n.key]-n.value),a=e[0].strategy;for(let o=1;o<e.length;o++){const l=Math.abs(e[o].syncPoint[n.key]-n.value);l<i&&(i=l,s=e[o].syncPoint,a=e[o].strategy)}return this.logger_(`syncPoint for [${n.key}: ${n.value}] chosen with strategy [${a}]: [time:${s.time}, segmentIndex:${s.segmentIndex}`+(typeof s.partIndex=="number"?`,partIndex:${s.partIndex}`:"")+"]"),s}saveExpiredSegmentInfo(e,n){const s=n.mediaSequence-e.mediaSequence;if(s>B2e){je.log.warn(`Not saving expired segment info. Media sequence gap ${s} is too large.`);return}for(let i=s-1;i>=0;i--){const a=e.segments[i];if(a&&typeof a.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+i,time:a.start},this.logger_(`playlist refresh sync: [time:${n.syncInfo.time}, mediaSequence: ${n.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const n=e.segments[0],s=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-s}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:n}){const s=this.calculateSegmentTimeMapping_(e,e.timingInfo,n),i=e.segment;s&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const a=i.dateTimeObject;i.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[i.timeline]=-(a.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,n,s){const i=e.segment,a=e.part;let o=this.timelines[e.timeline],l,c;if(typeof e.timestampOffset=="number")o={time:e.startOfSegment,mapping:e.startOfSegment-n.start},s&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),l=e.startOfSegment,c=n.end+o.mapping;else if(o)l=n.start+o.mapping,c=n.end+o.mapping;else return!1;return a&&(a.start=l,a.end=c),(!i.start||l<i.start)&&(i.start=l),i.end=c,!0}saveDiscontinuitySyncInfo_(e){const n=e.playlist,s=e.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(let i=0;i<n.discontinuityStarts.length;i++){const a=n.discontinuityStarts[i],o=n.discontinuitySequence+i+1,l=a-e.mediaIndex,c=Math.abs(l);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>c){let u;l<0?u=s.start-D0({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:a}):u=s.end+D0({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:a}),this.discontinuities[o]={time:u,accuracy:c}}}}dispose(){this.trigger("dispose"),this.off()}}class $2e extends je.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:n,to:s}){return typeof n=="number"&&typeof s=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:n,to:s},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:n,to:s}){if(typeof n=="number"&&typeof s=="number"){this.lastTimelineChanges_[e]={type:e,from:n,to:s},delete this.pendingTimelineChanges_[e];const i={timelineChangeInfo:{from:n,to:s}};this.trigger({type:"timelinechange",metadata:i})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const U2e=Uz(Vz(function(){var t=function(){function m(){this.listeners={}}var _=m.prototype;return _.on=function(x,b){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push(b)},_.off=function(x,b){if(!this.listeners[x])return!1;var w=this.listeners[x].indexOf(b);return this.listeners[x]=this.listeners[x].slice(0),this.listeners[x].splice(w,1),w>-1},_.trigger=function(x){var b=this.listeners[x];if(b)if(arguments.length===2)for(var w=b.length,C=0;C<w;++C)b[C].call(this,arguments[1]);else for(var j=Array.prototype.slice.call(arguments,1),E=b.length,T=0;T<E;++T)b[T].apply(this,j)},_.dispose=function(){this.listeners={}},_.pipe=function(x){this.on("data",function(b){x.push(b)})},m}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(m){return m.subarray(0,m.byteLength-m[m.byteLength-1])}/*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 */const n=function(){const m=[[[],[],[],[],[]],[[],[],[],[],[]]],_=m[0],y=m[1],x=_[4],b=y[4];let w,C,j;const E=[],T=[];let N,P,I,B,U,z;for(w=0;w<256;w++)T[(E[w]=w<<1^(w>>7)*283)^w]=w;for(C=j=0;!x[C];C^=N||1,j=T[j]||1)for(B=j^j<<1^j<<2^j<<3^j<<4,B=B>>8^B&255^99,x[C]=B,b[B]=C,I=E[P=E[N=E[C]]],z=I*16843009^P*65537^N*257^C*16843008,U=E[B]*257^B*16843008,w=0;w<4;w++)_[w][C]=U=U<<24^U>>>8,y[w][B]=z=z<<24^z>>>8;for(w=0;w<5;w++)_[w]=_[w].slice(0),y[w]=y[w].slice(0);return m};let s=null;class i{constructor(_){s||(s=n()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];let y,x,b;const w=this._tables[0][4],C=this._tables[1],j=_.length;let E=1;if(j!==4&&j!==6&&j!==8)throw new Error("Invalid aes key size");const T=_.slice(0),N=[];for(this._key=[T,N],y=j;y<4*j+28;y++)b=T[y-1],(y%j===0||j===8&&y%j===4)&&(b=w[b>>>24]<<24^w[b>>16&255]<<16^w[b>>8&255]<<8^w[b&255],y%j===0&&(b=b<<8^b>>>24^E<<24,E=E<<1^(E>>7)*283)),T[y]=T[y-j]^b;for(x=0;y;x++,y--)b=T[x&3?y:y-4],y<=4||x<4?N[x]=b:N[x]=C[0][w[b>>>24]]^C[1][w[b>>16&255]]^C[2][w[b>>8&255]]^C[3][w[b&255]]}decrypt(_,y,x,b,w,C){const j=this._key[1];let E=_^j[0],T=b^j[1],N=x^j[2],P=y^j[3],I,B,U;const z=j.length/4-2;let G,V=4;const J=this._tables[1],Q=J[0],Y=J[1],oe=J[2],he=J[3],me=J[4];for(G=0;G<z;G++)I=Q[E>>>24]^Y[T>>16&255]^oe[N>>8&255]^he[P&255]^j[V],B=Q[T>>>24]^Y[N>>16&255]^oe[P>>8&255]^he[E&255]^j[V+1],U=Q[N>>>24]^Y[P>>16&255]^oe[E>>8&255]^he[T&255]^j[V+2],P=Q[P>>>24]^Y[E>>16&255]^oe[T>>8&255]^he[N&255]^j[V+3],V+=4,E=I,T=B,N=U;for(G=0;G<4;G++)w[(3&-G)+C]=me[E>>>24]<<24^me[T>>16&255]<<16^me[N>>8&255]<<8^me[P&255]^j[V++],I=E,E=T,T=N,N=P,P=I}}class a extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(_){this.jobs.push(_),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const o=function(m){return m<<24|(m&65280)<<8|(m&16711680)>>8|m>>>24},l=function(m,_,y){const x=new Int32Array(m.buffer,m.byteOffset,m.byteLength>>2),b=new i(Array.prototype.slice.call(_)),w=new Uint8Array(m.byteLength),C=new Int32Array(w.buffer);let j,E,T,N,P,I,B,U,z;for(j=y[0],E=y[1],T=y[2],N=y[3],z=0;z<x.length;z+=4)P=o(x[z]),I=o(x[z+1]),B=o(x[z+2]),U=o(x[z+3]),b.decrypt(P,I,B,U,C,z),C[z]=o(C[z]^j),C[z+1]=o(C[z+1]^E),C[z+2]=o(C[z+2]^T),C[z+3]=o(C[z+3]^N),j=P,E=I,T=B,N=U;return w};class c{constructor(_,y,x,b){const w=c.STEP,C=new Int32Array(_.buffer),j=new Uint8Array(_.byteLength);let E=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(C.subarray(E,E+w),y,x,j)),E=w;E<C.length;E+=w)x=new Uint32Array([o(C[E-4]),o(C[E-3]),o(C[E-2]),o(C[E-1])]),this.asyncStream_.push(this.decryptChunk_(C.subarray(E,E+w),y,x,j));this.asyncStream_.push(function(){b(null,e(j))})}static get STEP(){return 32e3}decryptChunk_(_,y,x,b){return function(){const w=l(_,y,x);b.set(w,_.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ir<"u"?ir:typeof self<"u"?self:{},d;typeof window<"u"?d=window:typeof u<"u"?d=u:typeof self<"u"?d=self:d={};var h=d,f=function(_){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(_):_&&_.buffer instanceof ArrayBuffer},p=h.BigInt||Number;p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000"),function(){var m=new Uint16Array([65484]),_=new Uint8Array(m.buffer,m.byteOffset,m.byteLength);return _[0]===255?"big":_[0]===204?"little":"unknown"}();const g=function(m){const _={};return Object.keys(m).forEach(y=>{const x=m[y];f(x)?_[y]={bytes:x.buffer,byteOffset:x.byteOffset,byteLength:x.byteLength}:_[y]=x}),_};self.onmessage=function(m){const _=m.data,y=new Uint8Array(_.encrypted.bytes,_.encrypted.byteOffset,_.encrypted.byteLength),x=new Uint32Array(_.key.bytes,_.key.byteOffset,_.key.byteLength/4),b=new Uint32Array(_.iv.bytes,_.iv.byteOffset,_.iv.byteLength/4);new c(y,x,b,function(w,C){self.postMessage(g({source:_.source,decrypted:C}),[C.buffer])})}}));var V2e=$z(U2e);const z2e=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},sH=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},kN=(t,e)=>{e.activePlaylistLoader=t,t.load()},H2e=(t,e)=>()=>{const{segmentLoaders:{[t]:n,main:s},mediaTypes:{[t]:i}}=e,a=i.activeTrack(),o=i.getActiveGroup(),l=i.activePlaylistLoader,c=i.lastGroup_;if(!(o&&c&&o.id===c.id)&&(i.lastGroup_=o,i.lastTrack_=a,sH(n,i),!(!o||o.isMainPlaylist))){if(!o.playlistLoader){l&&s.resetEverything();return}n.resyncLoader(),kN(o.playlistLoader,i)}},q2e=(t,e)=>()=>{const{segmentLoaders:{[t]:n},mediaTypes:{[t]:s}}=e;s.lastGroup_=null,n.abort(),n.pause()},W2e=(t,e)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[t]:s,main:i},mediaTypes:{[t]:a}}=e,o=a.activeTrack(),l=a.getActiveGroup(),c=a.activePlaylistLoader,u=a.lastTrack_;if(!(u&&o&&u.id===o.id)&&(a.lastGroup_=l,a.lastTrack_=o,sH(s,a),!!l)){if(l.isMainPlaylist){if(!o||!u||o.id===u.id)return;const d=e.vhs.playlistController_,h=d.selectPlaylist();if(d.media()===h)return;a.logger_(`track change. Switching main audio from ${u.id} to ${o.id}`),n.pause(),i.resetEverything(),d.fastQualityChange_(h);return}if(t==="AUDIO"){if(!l.playlistLoader){i.setAudio(!0),i.resetEverything();return}s.setAudio(!0),i.setAudio(!1)}if(c===l.playlistLoader){kN(l.playlistLoader,a);return}s.track&&s.track(o),s.resetEverything(),kN(l.playlistLoader,a)}},L_={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:n},excludePlaylist:s}=e,i=n.activeTrack(),a=n.activeGroup(),o=(a.filter(c=>c.default)[0]||a[0]).id,l=n.tracks[o];if(i===l){s({error:{message:"Problem encountered loading the default audio track."}});return}je.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const c in n.tracks)n.tracks[c].enabled=n.tracks[c]===l;n.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:n}}=e;je.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const s=n.activeTrack();s&&(s.mode="disabled"),n.onTrackChanged()}},bO={AUDIO:(t,e,n)=>{if(!e)return;const{tech:s,requestOptions:i,segmentLoaders:{[t]:a}}=n;e.on("loadedmetadata",()=>{const o=e.media();a.playlist(o,i),(!s.paused()||o.endList&&s.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),i),s.paused()||a.load()}),e.on("error",L_[t](t,n))},SUBTITLES:(t,e,n)=>{const{tech:s,requestOptions:i,segmentLoaders:{[t]:a},mediaTypes:{[t]:o}}=n;e.on("loadedmetadata",()=>{const l=e.media();a.playlist(l,i),a.track(o.activeTrack()),(!s.paused()||l.endList&&s.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),i),s.paused()||a.load()}),e.on("error",L_[t](t,n))}},G2e={AUDIO:(t,e)=>{const{vhs:n,sourceType:s,segmentLoaders:{[t]:i},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[t]:{groups:l,tracks:c,logger_:u}},mainPlaylistLoader:d}=e,h=Iy(d.main);(!o[t]||Object.keys(o[t]).length===0)&&(o[t]={main:{default:{default:!0}}},h&&(o[t].main.default.playlists=d.main.playlists));for(const f in o[t]){l[f]||(l[f]=[]);for(const p in o[t][f]){let g=o[t][f][p],m;if(h?(u(`AUDIO group '${f}' label '${p}' is a main playlist`),g.isMainPlaylist=!0,m=null):s==="vhs-json"&&g.playlists?m=new tp(g.playlists[0],n,a):g.resolvedUri?m=new tp(g.resolvedUri,n,a):g.playlists&&s==="dash"?m=new jN(g.playlists[0],n,a,d):m=null,g=Cn({id:p,playlistLoader:m},g),bO[t](t,g.playlistLoader,e),l[f].push(g),typeof c[p]>"u"){const _=new je.AudioTrack({id:p,kind:z2e(g),enabled:!1,language:g.language,default:g.default,label:p});c[p]=_}}}i.on("error",L_[t](t,e))},SUBTITLES:(t,e)=>{const{tech:n,vhs:s,sourceType:i,segmentLoaders:{[t]:a},requestOptions:o,main:{mediaGroups:l},mediaTypes:{[t]:{groups:c,tracks:u}},mainPlaylistLoader:d}=e;for(const h in l[t]){c[h]||(c[h]=[]);for(const f in l[t][h]){if(!s.options_.useForcedSubtitles&&l[t][h][f].forced)continue;let p=l[t][h][f],g;if(i==="hls")g=new tp(p.resolvedUri,s,o);else if(i==="dash"){if(!p.playlists.filter(_=>_.excludeUntil!==1/0).length)return;g=new jN(p.playlists[0],s,o,d)}else i==="vhs-json"&&(g=new tp(p.playlists?p.playlists[0]:p.resolvedUri,s,o));if(p=Cn({id:f,playlistLoader:g},p),bO[t](t,p.playlistLoader,e),c[h].push(p),typeof u[f]>"u"){const m=n.addRemoteTextTrack({id:f,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:f},!1).track;u[f]=m}}}a.on("error",L_[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:n,main:{mediaGroups:s},mediaTypes:{[t]:{groups:i,tracks:a}}}=e;for(const o in s[t]){i[o]||(i[o]=[]);for(const l in s[t][o]){const c=s[t][o][l];if(!/^(?:CC|SERVICE)/.test(c.instreamId))continue;const u=n.options_.vhs&&n.options_.vhs.captionServices||{};let d={label:l,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(u[d.instreamId]&&(d=Cn(d,u[d.instreamId])),d.default===void 0&&delete d.default,i[o].push(Cn({id:l},c)),typeof a[l]>"u"){const h=n.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;a[l]=h}}}}},rH=(t,e)=>{for(let n=0;n<t.length;n++)if(jA(e,t[n])||t[n].playlists&&rH(t[n].playlists,e))return!0;return!1},Y2e=(t,e)=>n=>{const{mainPlaylistLoader:s,mediaTypes:{[t]:{groups:i}}}=e,a=s.media();if(!a)return null;let o=null;a.attributes[t]&&(o=i[a.attributes[t]]);const l=Object.keys(i);if(!o)if(t==="AUDIO"&&l.length>1&&Iy(e.main))for(let c=0;c<l.length;c++){const u=i[l[c]];if(rH(u,a)){o=u;break}}else i.main?o=i.main:l.length===1&&(o=i[l[0]]);return typeof n>"u"?o:n===null||!o?null:o.filter(c=>c.id===n.id)[0]||null},X2e={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const s in n)if(n[s].enabled)return n[s];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const s in n)if(n[s].mode==="showing"||n[s].mode==="hidden")return n[s];return null}},K2e=(t,{mediaTypes:e})=>()=>{const n=e[t].activeTrack();return n?e[t].activeGroup(n):null},Q2e=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{G2e[u](u,t)});const{mediaTypes:e,mainPlaylistLoader:n,tech:s,vhs:i,segmentLoaders:{["AUDIO"]:a,main:o}}=t;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=Y2e(u,t),e[u].activeTrack=X2e[u](u,t),e[u].onGroupChanged=H2e(u,t),e[u].onGroupChanging=q2e(u,t),e[u].onTrackChanged=W2e(u,t),e[u].getActiveGroup=K2e(u,t)});const l=e.AUDIO.activeGroup();if(l){const u=(l.filter(h=>h.default)[0]||l[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),a.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const c=()=>{e.AUDIO.onTrackChanged(),s.trigger({type:"usage",name:"vhs-audio-change"})};s.audioTracks().addEventListener("change",c),s.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{s.audioTracks().removeEventListener("change",c),s.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),s.clearTracks("audio");for(const u in e.AUDIO.tracks)s.audioTracks().addTrack(e.AUDIO.tracks[u])},Z2e=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:dc,activeTrack:dc,getActiveGroup:dc,onGroupChanged:dc,onTrackChanged:dc,lastTrack_:null,logger_:uo(`MediaGroups[${e}]`)}}),t};class _O{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Bi(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(n=>[n.ID,n])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class J2e extends je.EventTarget{constructor(e,n){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new _O,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=uo("Content Steering"),this.xhr_=e,this.getBandwidth_=n}assignTagProperties(e,n){this.manifestType_=n.serverUri?"HLS":"DASH";const s=n.serverUri||n.serverURL;if(!s){this.logger_(`steering manifest URL is ${s}, cannot request steering manifest.`),this.trigger("error");return}if(s.startsWith("data:")){this.decodeDataUriManifest_(s.substring(s.indexOf(",")+1));return}this.steeringManifest.reloadUri=Bi(e,s),this.defaultPathway=n.pathwayId||n.defaultServiceLocation,this.queryBeforeStart=n.queryBeforeStart,this.proxyServerUrl_=n.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const n=this.steeringManifest.reloadUri;if(!n)return;const s=e?n:this.getRequestURI(n);if(!s){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const i={contentSteeringInfo:{uri:s}};this.trigger({type:"contentsteeringloadstart",metadata:i}),this.request_=this.xhr_({uri:s,requestType:"content-steering-manifest"},(a,o)=>{if(a){if(o.status===410){this.logger_(`manifest request 410 ${a}.`),this.logger_(`There will be no more content steering requests to ${s} this session.`),this.excludedSteeringManifestURLs.add(s);return}if(o.status===429){const u=o.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${a}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${a}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:i});let l;try{l=JSON.parse(this.request_.responseText)}catch(u){const d={errorType:je.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:d})}this.assignSteeringProperties_(l);const c={contentSteeringInfo:i.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:c}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const n=new de.URL(e),s=new de.URL(this.proxyServerUrl_);return s.searchParams.set("url",encodeURI(n.toString())),this.setSteeringParams_(s.toString())}decodeDataUriManifest_(e){const n=JSON.parse(de.atob(e));this.assignSteeringProperties_(n)}setSteeringParams_(e){const n=new de.URL(e),s=this.getPathway(),i=this.getBandwidth_();if(s){const a=`_${this.manifestType_}_pathway`;n.searchParams.set(a,s)}if(i){const a=`_${this.manifestType_}_throughput`;n.searchParams.set(a,i)}return n.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const s=(i=>{for(const a of i)if(this.availablePathways_.has(a))return a;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==s&&(this.currentPathway=s,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const n=i=>this.excludedSteeringManifestURLs.has(i);if(this.proxyServerUrl_){const i=this.setProxyServerUrl_(e);if(!n(i))return i}const s=this.setSteeringParams_(e);return n(s)?null:s}startTTLTimeout_(e=this.steeringManifest.ttl){const n=e*1e3;this.ttlTimeout_=de.setTimeout(()=>{this.requestSteeringManifest()},n)}clearTTLTimeout_(){de.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new _O}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,n){return!n&&this.steeringManifest.reloadUri||n&&(Bi(e,n.serverURL)!==this.steeringManifest.reloadUri||n.defaultServiceLocation!==this.defaultPathway||n.queryBeforeStart!==this.queryBeforeStart||n.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const ewe=10;let ec;const twe=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],nwe=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},swe=function({currentPlaylist:t,buffered:e,currentTime:n,nextPlaylist:s,bufferLowWaterLine:i,bufferHighWaterLine:a,duration:o,bufferBasedABR:l,log:c}){if(!s)return je.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${t&&t.id||"null"} -> ${s.id}`;if(!t)return c(`${u} as current playlist is not set`),!0;if(s.id===t.id)return!1;const d=!!ep(e,n).length;if(!t.endList)return!d&&typeof t.partTargetDuration=="number"?(c(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(c(`${u} as current playlist is live`),!0);const h=wA(e,n),f=l?pr.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:pr.MAX_BUFFER_LOW_WATER_LINE;if(o<f)return c(`${u} as duration < max low water line (${o} < ${f})`),!0;const p=s.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;if(p<g&&(!l||h<a)){let m=`${u} as next bandwidth < current bandwidth (${p} < ${g})`;return l&&(m+=` and forwardBuffer < bufferHighWaterLine (${h} < ${a})`),c(m),!0}if((!l||p>g)&&h>=i){let m=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${i})`;return l&&(m+=` and next bandwidth > current bandwidth (${p} > ${g})`),c(m),!0}return c(`not ${u} as no switching criteria met`),!1};class rwe extends je.EventTarget{constructor(e){super();const{src:n,withCredentials:s,tech:i,bandwidth:a,externVhs:o,useCueTags:l,playlistExclusionDuration:c,enableLowInitialPlaylist:u,sourceType:d,cacheEncryptionKeys:h,bufferBasedABR:f,leastPixelDiffSelector:p,captionServices:g}=e;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:m}=e;(m===null||typeof m>"u")&&(m=1/0),ec=o,this.bufferBasedABR=!!f,this.leastPixelDiffSelector=!!p,this.withCredentials=s,this.tech_=i,this.vhs_=i.vhs,this.player_=e.player_,this.sourceType_=d,this.useCueTags_=l,this.playlistExclusionDuration=c,this.maxPlaylistRetries=m,this.enableLowInitialPlaylist=u,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:s,maxPlaylistRetries:m,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=Z2e(),this.mediaSource=new de.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=kr(),this.hasPlayed_=!1,this.syncController_=new F2e(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new V2e,this.sourceUpdater_=new tH(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new $2e,this.keyStatusMap_=new Map;const _={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:g,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:a,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new jN(n,this.vhs_,Cn(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new tp(n,this.vhs_,Cn(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new EN(Cn(_,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new EN(Cn(_,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new M2e(Cn(_,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((b,w)=>{function C(){i.off("vttjserror",j),b()}function j(){i.off("vttjsloaded",C),w()}i.one("vttjsloaded",C),i.one("vttjserror",j),i.addWebVttScript_()})}),e);const y=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new J2e(this.vhs_.xhr,y),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),twe.forEach(b=>{this[b+"_"]=nwe.bind(this,b)}),this.logger_=uo("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const x=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(x,()=>{const b=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-b,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)}switchMedia_(e,n,s){const i=this.media(),a=i&&(i.id||i.uri),o=e&&(e.id||e.uri);if(a&&a!==o){this.logger_(`switch media ${a} -> ${o} from ${n}`);const l={renditionInfo:{id:o,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:n};this.trigger({type:"renditionselected",metadata:l}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${n}`})}this.mainPlaylistLoader_.media(e,s)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const n=this.mediaTypes_[e],s=n?n.activeGroup():null,i=this.contentSteeringController_.getPathway();if(s&&i){const o=(s.length?s[0].playlists:s.playlists).filter(l=>l.attributes.serviceLocation===i);o.length&&this.mediaTypes_[e].activePlaylistLoader.media(o[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=de.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(de.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;const s=e.mediaGroups.AUDIO,i=Object.keys(s);let a;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)a=this.mediaTypes_.AUDIO.activeTrack();else{const l=s.main||i.length&&s[i[0]];for(const c in l)if(l[c].default){a={label:c};break}}if(!a)return n;const o=[];for(const l in s)if(s[l][a.label]){const c=s[l][a.label];if(c.playlists&&c.playlists.length)o.push.apply(o,c.playlists);else if(c.uri)o.push(c);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const d=e.playlists[u];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===l&&o.push(d)}}return o.length?o:n}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const n=this.mainPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;bN(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,n.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.mainSegmentLoader_.load()),Q2e({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),n),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let n=this.mainPlaylistLoader_.media();if(!n){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let s;if(this.enableLowInitialPlaylist&&(s=this.selectInitialPlaylist()),s||(s=this.selectPlaylist()),!s||!this.shouldSwitchToMedia_(s)||(this.initialMedia_=s,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;n=this.initialMedia_}this.handleUpdatedMediaPlaylist(n)}),this.mainPlaylistLoader_.on("error",()=>{const n=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const n=this.mainPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;bN(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const n=this.mainPlaylistLoader_.media();if(n.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(n)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(n=>{this.mainPlaylistLoader_.on(n,s=>{this.player_.trigger(ds({},s))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,n){const s=e.mediaGroups||{};let i=!0;const a=Object.keys(s.AUDIO);for(const o in s.AUDIO)for(const l in s.AUDIO[o])s.AUDIO[o][l].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(s.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),ec.Playlist.isAes(n)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),a.length&&Object.keys(s.AUDIO[a[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const n=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),i=this.bufferLowWaterLine(),a=this.bufferHighWaterLine(),o=this.tech_.buffered();return swe({buffered:o,currentTime:s,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:a,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const s=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:s.playlist,error:s})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",s=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:ewe}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const s=this.getCodecsOrExclude_();s&&this.sourceUpdater_.addOrChangeSourceBuffers(s)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(s=>{this.mainSegmentLoader_.on(s,i=>{this.player_.trigger(ds({},i))}),this.audioSegmentLoader_.on(s,i=>{this.player_.trigger(ds({},i))}),this.subtitleSegmentLoader_.on(s,i=>{this.player_.trigger(ds({},i))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const n=this.seekable();if(!n.length)return!1;const s=n.end(0);let i=s;if(e.start){const a=e.start.timeOffset;a<0?i=Math.max(s+a,n.start(0)):i=Math.min(s,a)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,n=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const s=this.syncController_.getExpiredTime(e,this.duration());if(s===null)return!1;const i=ec.Playlist.playlistEnd(e,s),a=this.tech_.currentTime(),o=this.tech_.buffered();if(!o.length)return i-a<=hl;const l=o.end(o.length-1);return l-a<=hl&&i-l<=hl}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:n={},playlistExclusionDuration:s}){if(e=e||this.mainPlaylistLoader_.media(),s=s||n.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=n,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,a=i.filter(Gw),o=a.length===1&&a[0]===e;if(i.length===1&&s!==1/0)return je.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const g=this.pathwayAttribute_(e),m=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(g),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(g)},m);return}let p=!1;i.forEach(g=>{if(g===e)return;const m=g.excludeUntil;typeof m<"u"&&m!==1/0&&(p=!0,delete g.excludeUntil)}),p&&(je.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let l;e.playlistErrors_>this.maxPlaylistRetries?l=1/0:l=Date.now()+s*1e3,e.excludeUntil=l,n.reason&&(e.lastExcludeReason_=n.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const c=this.selectPlaylist();if(!c){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=n.internal?this.logger_:je.log.warn,d=n.message?" "+n.message:"";u(`${n.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${d} Switching to playlist ${c.id}.`),c.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=c.targetDuration/2*1e3||5*1e3,f=typeof c.lastRequest=="number"&&Date.now()-c.lastRequest<=h;return this.switchMedia_(c,"exclude",o||f)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,n){const s=[],i=e==="all";(i||e==="main")&&s.push(this.mainPlaylistLoader_);const a=[];(i||e==="audio")&&a.push("AUDIO"),(i||e==="subtitle")&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(o=>{const l=this.mediaTypes_[o]&&this.mediaTypes_[o].activePlaylistLoader;l&&s.push(l)}),["main","audio","subtitle"].forEach(o=>{const l=this[`${o}SegmentLoader_`];l&&(e===o||e==="all")&&s.push(l)}),s.forEach(o=>n.forEach(l=>{typeof o[l]=="function"&&o[l]()}))}setCurrentTime(e){const n=ep(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:ec.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let n=this.mainPlaylistLoader_.media();if(!n)return;let s=this.syncController_.getExpiredTime(n,this.duration());if(s===null)return;const i=this.mainPlaylistLoader_.main,a=ec.Playlist.seekable(n,s,ec.Playlist.liveEdgeDelay(i,n));if(a.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(n,this.duration()),s===null||(e=ec.Playlist.seekable(n,s,ec.Playlist.liveEdgeDelay(i,n)),e.length===0)))return;let o,l;if(this.seekable_&&this.seekable_.length&&(o=this.seekable_.end(0),l=this.seekable_.start(0)),e?e.start(0)>a.end(0)||a.start(0)>e.end(0)?this.seekable_=a:this.seekable_=kr([[e.start(0)>a.start(0)?e.start(0):a.start(0),e.end(0)<a.end(0)?e.end(0):a.end(0)]]):this.seekable_=a,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===o&&this.seekable_.start(0)===l)return;this.logger_(`seekable updated [${gz(this.seekable_)}]`);const c={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:c}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const i=this.seekable();if(!i.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1));return}const n=this.tech_.buffered();let s=ec.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(s=Math.max(s,n.end(n.length-1))),this.mediaSource.duration!==s&&this.sourceUpdater_.setDuration(s)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const n=this.mediaTypes_[e].groups;for(const s in n)n[s].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!s)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const s=I0(this.main(),n),i={},a=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=s.video||e.main.videoCodec||Cye),e.main.isMuxed&&(i.video+=`,${s.audio||e.main.audioCodec||J6}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||a)&&(i.audio=s.audio||e.main.audioCodec||e.audio.audioCodec||J6,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video){this.excludePlaylist({playlistToExclude:n,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const o=(u,d)=>u?X1(d):cj(d),l={};let c;if(["video","audio"].forEach(function(u){if(i.hasOwnProperty(u)&&!o(e[u].isFmp4,i[u])){const d=e[u].isFmp4?"browser":"muxer";l[d]=l[d]||[],l[d].push(i[u]),u==="audio"&&(c=d)}}),a&&c&&n.attributes.AUDIO){const u=n.attributes.AUDIO;this.main().playlists.forEach(d=>{(d.attributes&&d.attributes.AUDIO)===u&&d!==n&&(d.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${c} does not support codec(s): "${i.audio}"`)}if(Object.keys(l).length){const u=Object.keys(l).reduce((d,h)=>(d&&(d+=", "),d+=`${h} does not support codec(s): "${l[h].join(",")}"`,d),"")+".";this.excludePlaylist({playlistToExclude:n,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(d=>{const h=(tl(this.sourceUpdater_.codecs[d]||"")[0]||{}).type,f=(tl(i[d]||"")[0]||{}).type;h&&f&&h.toLowerCase()!==f.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[d]}" -> "${i[d]}"`)}),u.length){this.excludePlaylist({playlistToExclude:n,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return i}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}excludeUnsupportedVariants_(){const e=this.main().playlists,n=[];Object.keys(e).forEach(s=>{const i=e[s];if(n.indexOf(i.id)!==-1)return;n.push(i.id);const a=I0(this.main,i),o=[];a.audio&&!cj(a.audio)&&!X1(a.audio)&&o.push(`audio codec ${a.audio}`),a.video&&!cj(a.video)&&!X1(a.video)&&o.push(`video codec ${a.video}`),a.text&&a.text==="stpp.ttml.im1t"&&o.push(`text codec ${a.text}`),o.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${o.join(", ")}`))})}excludeIncompatibleVariants_(e){const n=[],s=this.main().playlists,i=O_(tl(e)),a=iO(i),o=i.video&&tl(i.video)[0]||null,l=i.audio&&tl(i.audio)[0]||null;Object.keys(s).forEach(c=>{const u=s[c];if(n.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;n.push(u.id);const d=[],h=I0(this.mainPlaylistLoader_.main,u),f=iO(h);if(!(!h.audio&&!h.video)){if(f!==a&&d.push(`codec count "${f}" !== "${a}"`),!this.sourceUpdater_.canChangeType()){const p=h.video&&tl(h.video)[0]||null,g=h.audio&&tl(h.audio)[0]||null;p&&o&&p.type.toLowerCase()!==o.type.toLowerCase()&&d.push(`video codec "${p.type}" !== "${o.type}"`),g&&l&&g.type.toLowerCase()!==l.type.toLowerCase()&&d.push(`audio codec "${g.type}" !== "${l.type}"`)}d.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${d.join(" && ")}`))}})}updateAdCues_(e){let n=0;const s=this.seekable();s.length&&(n=s.start(0)),R2e(e,this.cueTagsTrack_,n)}goalBufferLength(){const e=this.tech_.currentTime(),n=pr.GOAL_BUFFER_LENGTH,s=pr.GOAL_BUFFER_LENGTH_RATE,i=Math.max(n,pr.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*s,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),n=pr.BUFFER_LOW_WATER_LINE,s=pr.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(n,pr.MAX_BUFFER_LOW_WATER_LINE),a=Math.max(n,pr.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*s,this.bufferBasedABR?a:i)}bufferHighWaterLine(){return pr.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){lO(this.inbandTextTracks_,"com.apple.streaming",this.tech_),v2e({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,n,s){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();lO(this.inbandTextTracks_,e,this.tech_),p2e({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:i,videoDuration:s})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const n of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(n));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(n=>{this.contentSteeringController_.on(n,s=>{this.trigger(ds({},s))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const n=this.main();(this.contentSteeringController_.didDASHTagChange(n.uri,n.contentSteering)||(()=>{const a=this.contentSteeringController_.getAvailablePathways(),o=[];for(const l of n.playlists){const c=l.attributes.serviceLocation;if(c&&(o.push(c),!a.has(c)))return!0}return!!(!o.length&&a.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const s=this.main().playlists,i=new Set;let a=!1;Object.keys(s).forEach(o=>{const l=s[o],c=this.pathwayAttribute_(l),u=c&&e!==c;l.excludeUntil===1/0&&l.lastExcludeReason_==="content-steering"&&!u&&(delete l.excludeUntil,delete l.lastExcludeReason_,a=!0);const h=!l.excludeUntil&&l.excludeUntil!==1/0;!i.has(l.id)&&u&&h&&(i.add(l.id),l.excludeUntil=1/0,l.lastExcludeReason_="content-steering",this.logger_(`excluding ${l.id} for ${l.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(o=>{const l=this.mediaTypes_[o];if(l.activePlaylistLoader){const c=l.activePlaylistLoader.media_;c&&c.attributes.serviceLocation!==e&&(a=!0)}}),a&&this.changeSegmentPathway_()}handlePathwayClones_(){const n=this.main().playlists,s=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones;if(s&&s.size||i&&i.size){for(const[o,l]of s.entries())i.get(o)||(this.mainPlaylistLoader_.updateOrDeleteClone(l),this.contentSteeringController_.excludePathway(o));for(const[o,l]of i.entries()){const c=s.get(o);if(!c){n.filter(d=>d.attributes["PATHWAY-ID"]===l["BASE-ID"]).forEach(d=>{this.mainPlaylistLoader_.addClonePathway(l,d)}),this.contentSteeringController_.addAvailablePathway(o);continue}this.equalPathwayClones_(c,l)||(this.mainPlaylistLoader_.updateOrDeleteClone(l,!0),this.contentSteeringController_.addAvailablePathway(o))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(e,n){if(e["BASE-ID"]!==n["BASE-ID"]||e.ID!==n.ID||e["URI-REPLACEMENT"].HOST!==n["URI-REPLACEMENT"].HOST)return!1;const s=e["URI-REPLACEMENT"].PARAMS,i=n["URI-REPLACEMENT"].PARAMS;for(const a in s)if(s[a]!==i[a])return!1;for(const a in i)if(s[a]!==i[a])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const n="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(s=>{const i=this.mainPlaylistLoader_.getKeyIdSet(s);!i||!i.size||i.forEach(a=>{const o="usable",l=this.keyStatusMap_.has(a)&&this.keyStatusMap_.get(a)===o,c=s.lastExcludeReason_===n&&s.excludeUntil===1/0;l?l&&c&&(delete s.excludeUntil,delete s.lastExcludeReason_,this.logger_(`enabling playlist ${s.id} because key ID ${a} is ${o}`)):(s.excludeUntil!==1/0&&s.lastExcludeReason_!==n&&(s.excludeUntil=1/0,s.lastExcludeReason_=n,this.logger_(`excluding playlist ${s.id} because the key ID ${a} doesn't exist in the keyStatusMap or is not ${o}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(s=>{const i=s&&s.attributes&&s.attributes.RESOLUTION&&s.attributes.RESOLUTION.height<720,a=s.excludeUntil===1/0&&s.lastExcludeReason_===n;i&&a&&(delete s.excludeUntil,je.log.warn(`enabling non-HD playlist ${s.id} because all playlists were excluded due to ${n} key IDs`))})}addKeyStatus_(e,n){const a=(typeof e=="string"?e:P2e(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${n}' with key ID ${a} added to the keyStatusMap`),this.keyStatusMap_.set(a,n)}updatePlaylistByKeyStatus(e,n){this.addKeyStatus_(e,n),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const iwe=(t,e,n)=>s=>{const i=t.main.playlists[e],a=SA(i),o=Gw(i);if(typeof s>"u")return o;s?delete i.disabled:i.disabled=!0;const l={renditionInfo:{id:e,bandwidth:i.attributes.BANDWIDTH,resolution:i.attributes.RESOLUTION,codecs:i.attributes.CODECS},cause:"fast-quality"};return s!==o&&!a&&(n(i),s?t.trigger({type:"renditionenabled",metadata:l}):t.trigger({type:"renditiondisabled",metadata:l})),s};class awe{constructor(e,n,s){const{playlistController_:i}=e,a=i.fastQualityChange_.bind(i);if(n.attributes){const o=n.attributes.RESOLUTION;this.width=o&&o.width,this.height=o&&o.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=I0(i.main(),n),this.playlist=n,this.id=s,this.enabled=iwe(e.playlists,n.id,a)}}const owe=function(t){t.representations=()=>{const e=t.playlistController_.main(),n=Iy(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return n?n.filter(s=>!SA(s)).map((s,i)=>new awe(t,s,s.id)):[]}},wO=["seeking","seeked","pause","playing","error"];class lwe extends je.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=uo("PlaybackWatcher"),this.logger_("initialize");const n=()=>this.monitorCurrentTime_(),s=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),a=()=>this.resetTimeUpdate_(),o=this.playlistController_,l=["main","subtitle","audio"],c={};l.forEach(d=>{c[d]={reset:()=>this.resetSegmentDownloads_(d),updateend:()=>this.checkSegmentDownloads_(d)},o[`${d}SegmentLoader_`].on("appendsdone",c[d].updateend),o[`${d}SegmentLoader_`].on("playlistupdate",c[d].reset),this.tech_.on(["seeked","seeking"],c[d].reset)});const u=d=>{["main","audio"].forEach(h=>{o[`${h}SegmentLoader_`][d]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(wO,a),this.tech_.on("canplay",s),this.tech_.one("play",n),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(wO,a),this.tech_.off("canplay",s),this.tech_.off("play",n),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),l.forEach(d=>{o[`${d}SegmentLoader_`].off("appendsdone",c[d].updateend),o[`${d}SegmentLoader_`].off("playlistupdate",c[d].reset),this.tech_.off(["seeked","seeking"],c[d].reset)}),this.checkCurrentTimeTimeout_&&de.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&de.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=de.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const n=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=n.buffered_()}checkSegmentDownloads_(e){const n=this.playlistController_,s=n[`${e}SegmentLoader_`],i=s.buffered_(),a=Qbe(this[`${e}Buffered_`],i);if(this[`${e}Buffered_`]=i,a){const o={bufferedRanges:i};n.trigger({type:"bufferedrangeschanged",metadata:o}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:s.playlist_&&s.playlist_.id,buffered:rh(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&n.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===e&&(!n.length||e+hl>=n.end(n.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(kr([this.lastRecordedTime,e]));const s={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:s}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const n=this.seekable(),s=this.tech_.currentTime(),i=this.afterSeekableWindow_(n,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let a;if(i&&(a=n.end(n.length-1)),this.beforeSeekableWindow_(n,s)){const g=n.start(0);a=g+(g===n.end(0)?0:hl)}if(typeof a<"u")return this.logger_(`Trying to seek outside of seekable at time ${s} with seekable range ${gz(n)}. Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0;const o=this.playlistController_.sourceUpdater_,l=this.tech_.buffered(),c=o.audioBuffer?o.audioBuffered():null,u=o.videoBuffer?o.videoBuffered():null,d=this.media(),h=d.partTargetDuration?d.partTargetDuration:(d.targetDuration-dl)*2,f=[c,u];for(let g=0;g<f.length;g++){if(!f[g])continue;if(wA(f[g],s)<h)return!1}const p=qx(l,s);return p.length===0?!1:(a=p.start(0)+hl,this.logger_(`Buffered region starts (${p.start(0)})  just beyond seek point (${s}). Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),n=this.tech_.buffered(),s=ep(n,e);if(s.length&&e+3<=s.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${s.start(0)} -> ${s.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,n)){const l=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${n}. Seeking to live point (seekable end) ${l}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(l),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const s=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:n}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const o=qx(i,n);return o.length>0?(this.logger_(`Stopped at ${n} and seeking to ${o.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(n),!0):!1}afterSeekableWindow_(e,n,s,i=!1){if(!e.length)return!1;let a=e.end(e.length-1)+hl;const o=!s.endList,l=typeof s.partTargetDuration=="number";return o&&(l||i)&&(a=e.end(e.length-1)+s.targetDuration*3),n>a}beforeSeekableWindow_(e,n){return!!(e.length&&e.start(0)>0&&n<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:n,currentTime:s}){if(!e)return;let i;if(e.length&&n.length){const a=ep(e,s-3),o=ep(e,s),l=ep(n,s);l.length&&!o.length&&a.length&&(i={start:a.end(0),end:l.end(0)})}else qx(e,s).length||(i=this.gapFromVideoUnderflow_(e,s));return i?(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${s}`),!0):!1}skipTheGap_(e){const n=this.tech_.buffered(),s=this.tech_.currentTime(),i=qx(n,s);if(this.resetTimeUpdate_(),i.length===0||s!==e)return;this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+dl);const a={gapInfo:{from:s,to:i.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:a}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,n){const s=Ybe(e);for(let i=0;i<s.length;i++){const a=s.start(i),o=s.end(i);if(n-a<4&&n-a>2)return{start:a,end:o}}return null}}const cwe={errorInterval:30,getSource(t){const n=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(n)}},iH=function(t,e){let n=0,s=0;const i=Cn(cwe,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const a=function(){s&&t.currentTime(s)},o=function(d){d!=null&&(s=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(d),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},l=function(){if(Date.now()-n<i.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!i.getSource||typeof i.getSource!="function"){je.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),i.getSource.call(t,o)},c=function(){t.off("loadedmetadata",a),t.off("error",l),t.off("dispose",c)},u=function(d){c(),iH(t,d)};t.on("error",l),t.on("dispose",c),t.reloadSourceOnError=u},uwe=function(t){iH(this,t)};var aH="3.13.2",dwe="7.0.3",hwe="1.3.0",fwe="7.1.0",pwe="4.0.1";const hs={PlaylistLoader:tp,Playlist:Fi,utils:__e,STANDARD_PLAYLIST_SELECTOR:oO,INITIAL_PLAYLIST_SELECTOR:c2e,lastBandwidthSelector:oO,movingAverageBandwidthSelector:o2e,comparePlaylistBandwidth:EA,comparePlaylistResolution:a2e,xhr:Iz()};Object.keys(pr).forEach(t=>{Object.defineProperty(hs,t,{get(){return je.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),pr[t]},set(e){if(je.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){je.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}pr[t]=e}})});const oH="videojs-vhs",lH=function(t,e){const n=e.media();let s=-1;for(let i=0;i<t.length;i++)if(t[i].id===n.id){s=i;break}t.selectedIndex_=s,t.trigger({selectedIndex:s,type:"change"})},mwe=function(t,e){e.representations().forEach(n=>{t.addQualityLevel(n)}),lH(t,e.playlists)};hs.canPlaySource=function(){return je.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const gwe=(t,e,n)=>{if(!t)return t;let s={};e&&e.attributes&&e.attributes.CODECS&&(s=O_(tl(e.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(s.audio=n.attributes.CODECS);const i=Cv(s.video),a=Cv(s.audio),o={};for(const l in t)o[l]={},a&&(o[l].audioContentType=a),i&&(o[l].videoContentType=i),e.contentProtection&&e.contentProtection[l]&&e.contentProtection[l].pssh&&(o[l].pssh=e.contentProtection[l].pssh),typeof t[l]=="string"&&(o[l].url=t[l]);return Cn(t,o)},vwe=(t,e)=>t.reduce((n,s)=>{if(!s.contentProtection)return n;const i=e.reduce((a,o)=>{const l=s.contentProtection[o];return l&&l.pssh&&(a[o]={pssh:l.pssh}),a},{});return Object.keys(i).length&&n.push(i),n},[]),ywe=({player:t,sourceKeySystems:e,audioMedia:n,mainPlaylists:s})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const i=n?s.concat([n]):s,a=vwe(i,Object.keys(e)),o=[],l=[];return a.forEach(c=>{l.push(new Promise((u,d)=>{t.tech_.one("keysessioncreated",u)})),o.push(new Promise((u,d)=>{t.eme.initializeMediaKeys({keySystems:c},h=>{if(h){d(h);return}u()})}))}),Promise.race([Promise.all(o),Promise.race(l)])},xwe=({player:t,sourceKeySystems:e,media:n,audioMedia:s})=>{const i=gwe(e,n,s);return i?(t.currentSource().keySystems=i,i&&!t.eme?(je.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},cH=()=>{if(!de.localStorage)return null;const t=de.localStorage.getItem(oH);if(!t)return null;try{return JSON.parse(t)}catch{return null}},bwe=t=>{if(!de.localStorage)return!1;let e=cH();e=e?Cn(e,t):t;try{de.localStorage.setItem(oH,JSON.stringify(e))}catch{return!1}return e},_we=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t,uH=(t,e)=>{t._requestCallbackSet||(t._requestCallbackSet=new Set),t._requestCallbackSet.add(e)},dH=(t,e)=>{t._responseCallbackSet||(t._responseCallbackSet=new Set),t._responseCallbackSet.add(e)},hH=(t,e)=>{t._requestCallbackSet&&(t._requestCallbackSet.delete(e),t._requestCallbackSet.size||delete t._requestCallbackSet)},fH=(t,e)=>{t._responseCallbackSet&&(t._responseCallbackSet.delete(e),t._responseCallbackSet.size||delete t._responseCallbackSet)};hs.supportsNativeHls=function(){if(!st||!st.createElement)return!1;const t=st.createElement("video");return je.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(n){return/maybe|probably/i.test(t.canPlayType(n))}):!1}();hs.supportsNativeDash=function(){return!st||!st.createElement||!je.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(st.createElement("video").canPlayType("application/dash+xml"))}();hs.supportsTypeNatively=t=>t==="hls"?hs.supportsNativeHls:t==="dash"?hs.supportsNativeDash:!1;hs.isSupported=function(){return je.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};hs.xhr.onRequest=function(t){uH(hs.xhr,t)};hs.xhr.onResponse=function(t){dH(hs.xhr,t)};hs.xhr.offRequest=function(t){hH(hs.xhr,t)};hs.xhr.offResponse=function(t){fH(hs.xhr,t)};const wwe=je.getComponent("Component");class pH extends wwe{constructor(e,n,s){if(super(n,s.vhs),typeof s.initialBandwidth=="number"&&(this.options_.bandwidth=s.initialBandwidth),this.logger_=uo("VhsHandler"),n.options_&&n.options_.playerId){const i=je.getPlayer(n.options_.playerId);this.player_=i}if(this.tech_=n,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(st,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const a=st.fullscreenElement||st.webkitFullscreenElement||st.mozFullScreenElement||st.msFullscreenElement;a&&a.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Cn(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const s=cH();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=pr.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===pr.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(s=>{typeof this.source_[s]<"u"&&(this.options_[s]=this.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const n=this.options_.customPixelRatio;typeof n=="number"&&n>=0&&(this.customPixelRatio=n)}setOptions(e={}){this.setOptions_(e)}src(e,n){if(!e)return;this.setOptions_(),this.options_.src=_we(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=hs,this.options_.sourceType=aU(n),this.options_.seekTo=a=>{this.tech_.setCurrentTime(a)},this.options_.player_=this.player_,this.playlistController_=new rwe(this.options_);const s=Cn({liveRangeSafeTimeDelta:hl},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new lwe(s),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const a=je.players[this.tech_.options_.playerId];let o=this.playlistController_.error;typeof o=="object"&&!o.code?o.code=3:typeof o=="string"&&(o={message:o,code:3}),a.error(o)});const i=this.options_.bufferBasedABR?hs.movingAverageBandwidthSelector(.55):hs.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=hs.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(a){this.playlistController_.selectPlaylist=a.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(a){this.playlistController_.mainSegmentLoader_.throughput.rate=a,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let a=this.playlistController_.mainSegmentLoader_.bandwidth;const o=de.navigator.connection||de.navigator.mozConnection||de.navigator.webkitConnection,l=1e7;if(this.options_.useNetworkInformationApi&&o){const c=o.downlink*1e3*1e3;c>=l&&a>=l?a=Math.max(a,c):a=c}return a},set(a){this.playlistController_.mainSegmentLoader_.bandwidth=a,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const a=1/(this.bandwidth||1);let o;return this.throughput>0?o=1/this.throughput:o=0,Math.floor(1/(a+o))},set(){je.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>rh(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>rh(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&bwe({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{owe(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=de.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),ywe({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(n=>{this.logger_("error while creating EME key session",n),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=xwe({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",s=>{this.playlistController_.updatePlaylistByKeyStatus(s.keyId,s.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!n){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=je.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{mwe(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{lH(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":aH,"mux.js":dwe,"mpd-parser":hwe,"m3u8-parser":fwe,"aes-decrypter":pwe}}version(){return this.constructor.version()}canChangeType(){return tH.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&de.URL.revokeObjectURL&&(de.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,n){return N_e({playlist:this.playlistController_.media(),time:e,callback:n})}seekToProgramTime(e,n,s=!0,i=2){return Bz({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})}setupXhrHooks_(){this.xhr.onRequest=e=>{uH(this.xhr,e)},this.xhr.onResponse=e=>{dH(this.xhr,e)},this.xhr.offRequest=e=>{hH(this.xhr,e)},this.xhr.offResponse=e=>{fH(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],n=["gapjumped","playedrangeschanged"];e.forEach(s=>{this.playlistController_.on(s,i=>{this.player_.trigger(ds({},i))})}),n.forEach(s=>{this.playbackWatcher_.on(s,i=>{this.player_.trigger(ds({},i))})})}}const B_={name:"videojs-http-streaming",VERSION:aH,canHandleSource(t,e={}){const n=Cn(je.options,e);return B_.canPlayType(t.type,n)},handleSource(t,e,n={}){const s=Cn(je.options,n);return e.vhs=new pH(t,e,s),e.vhs.xhr=Iz(),e.vhs.setupXhrHooks_(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const n=aU(t);if(!n)return"";const s=B_.getOverrideNative(e);return!hs.supportsTypeNatively(n)||s?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,n=!(je.browser.IS_ANY_SAFARI||je.browser.IS_IOS),{overrideNative:s=n}=e;return s}},Cwe=()=>X1("avc1.4d400d,mp4a.40.2");Cwe()&&je.getTech("Html5").registerSourceHandler(B_,0);je.VhsHandler=pH;je.VhsSourceHandler=B_;je.Vhs=hs;je.use||je.registerComponent("Vhs",hs);je.options.vhs=je.options.vhs||{};(!je.getPlugin||!je.getPlugin("reloadSourceOnError"))&&je.registerPlugin("reloadSourceOnError",uwe);const AN=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),s=Math.floor(t%60);return`
     ${e>0?e.toString().padStart(2,"0"):""}${n.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}
    `},Swe=(t,e,n=!0)=>{const s=t.controlBar.getChild("RemainingTimeDisplay");if(s&&(s.dispose(),n)){const i=document.createElement("div");i.className="vjs-custom-time vjs-control vjs-button",t.controlBar.el().insertBefore(i,t.controlBar.getChild("progressControl").el());const a=()=>{i.textContent=`${AN(t.currentTime())} / ${AN(t.duration())}`};e.push(a),t.on("loadedmetadata",a)}};function My(t){const e=t.split(":");e.length===2&&e.unshift("00");const n=parseInt(e[0],10),s=parseInt(e[1],10),i=parseInt(e[2],10);return n*3600+s*60+i}const mH=(t,e,n=null)=>{const s=e.findIndex(i=>My(i.time)>(n||t.currentTime()));return e[s===-1?e.length-1:s-1]},gH=(t,e)=>{if(!t||!(e&&e.length))return;const s=t.controlBar.progressControl.seekBar.el(),i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");i.appendChild(a),e.length>0&&(o.className="mt-2",i.appendChild(o)),s.appendChild(i),i.className="vjs-tooltip";const l=u=>{c();const d=s.getBoundingClientRect(),h=u.clientX-d.left,f=h/d.width,p=t.duration()*f,g=AN(p);a.textContent=`${g}`,f*100<95?(i.style.right="auto",i.style.left=`${h}px`):(i.style.left="auto",i.style.right="0px"),i.style.opacity="1";const m=mH(t,e,My(g.trim()));m&&(o.textContent=m.title)},c=()=>{i.style.opacity="0"};s.addEventListener("mousemove",l),s.addEventListener("mouseleave",c)},jwe=(t,e,n)=>{if(!e.timeCodes||Ye(e.timeCodes))return;const s=()=>{const o=t.controlBar.progressControl.seekBar.el();console.log(e),e.forEach(l=>{const c=document.createElement("div");c.className="vjs-marker",c.style.left=My(l.time)/t.duration()*100+"%",c.title=l.title,o.appendChild(c)})},i=document.createElement("div");i.className="vjs-timecode-title vjs-control vjs-button",t.controlBar.el().insertBefore(i,t.controlBar.getChild("progressControl").el());const a=()=>{const o=mH(t,e);o&&(i.innerHTML=`<span>•</span> ${o.title}`)};t.on("loadedmetadata",s),t.on("loadedmetadata",a),n.push(a)},Twe="_NavBtnRootPrimary_kfal2_1",Ewe="_NavBtnRootPrimaryGray_kfal2_27",Nwe="_NavBtnRootSecondary_kfal2_32",kwe="_prev_kfal2_56",Awe="_btnCenterPrev_kfal2_60",Dwe="_btnCenterNext_kfal2_72",ih={NavBtnRootPrimary:Twe,NavBtnRootPrimaryGray:Ewe,NavBtnRootSecondary:Nwe,prev:kwe,btnCenterPrev:Awe,btnCenterNext:Dwe},ho=t=>{const{className:e="",classnameicon:n="",variant:s="Primary",gray:i=!1,centery:a=!1}=t,o=`NavBtnRoot${s}`;return r.jsx("button",{type:"button",...t,className:`${ih[o]} ${e} ${a?ih.btnCenterPrev:""} ${i?ih.NavBtnRootPrimaryGray:""}`,children:r.jsx(wa,{className:`${ih.prev} ${n}`})})},fo=t=>{const{className:e="",classnameicon:n="",variant:s="Primary",gray:i=!1,centery:a=!1}=t,o=`NavBtnRoot${s}`;return r.jsx("button",{type:"button",...t,className:`${ih[o]} ${e} ${a?ih.btnCenterNext:""} ${i?ih.NavBtnRootPrimaryGray:""}`,children:r.jsx(wa,{className:n})})};var Yw={},Pwe=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],s=0;s<t.rangeCount;s++)n.push(t.getRangeAt(s));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||n.forEach(function(i){t.addRange(i)}),e&&e.focus()}},Iwe=Pwe,CO={"text/plain":"Text","text/html":"Url",default:"Text"},Mwe="Copy to clipboard: #{key}, Enter";function Owe(t){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function Rwe(t,e){var n,s,i,a,o,l,c=!1;e||(e={}),n=e.debug||!1;try{i=Iwe(),a=document.createRange(),o=document.getSelection(),l=document.createElement("span"),l.textContent=t,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(d){if(d.stopPropagation(),e.format)if(d.preventDefault(),typeof d.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var h=CO[e.format]||CO.default;window.clipboardData.setData(h,t)}else d.clipboardData.clearData(),d.clipboardData.setData(e.format,t);e.onCopy&&(d.preventDefault(),e.onCopy(d.clipboardData))}),document.body.appendChild(l),a.selectNodeContents(l),o.addRange(a);var u=document.execCommand("copy");if(!u)throw new Error("copy command was unsuccessful");c=!0}catch(d){n&&console.error("unable to copy using execCommand: ",d),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(h){n&&console.error("unable to copy using clipboardData: ",h),n&&console.error("falling back to prompt"),s=Owe("message"in e?e.message:Mwe),window.prompt(s,t)}}finally{o&&(typeof o.removeRange=="function"?o.removeRange(a):o.removeAllRanges()),l&&document.body.removeChild(l),i()}return c}var Lwe=Rwe;function DN(t){"@babel/helpers - typeof";return DN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DN(t)}Object.defineProperty(Yw,"__esModule",{value:!0});Yw.CopyToClipboard=void 0;var Yx=vH(v),Bwe=vH(Lwe),Fwe=["text","onCopy","options","children"];function vH(t){return t&&t.__esModule?t:{default:t}}function SO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,s)}return n}function jO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SO(Object(n),!0).forEach(function(s){NA(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function $we(t,e){if(t==null)return{};var n=Uwe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function Uwe(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Vwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zwe(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Hwe(t,e,n){return e&&zwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PN(t,e)}function PN(t,e){return PN=Object.setPrototypeOf||function(s,i){return s.__proto__=i,s},PN(t,e)}function Wwe(t){var e=Ywe();return function(){var s=F_(t),i;if(e){var a=F_(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return Gwe(this,i)}}function Gwe(t,e){if(e&&(DN(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yH(t)}function yH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ywe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F_(t){return F_=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},F_(t)}function NA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xH=function(t){qwe(n,t);var e=Wwe(n);function n(){var s;Vwe(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return s=e.call.apply(e,[this].concat(a)),NA(yH(s),"onClick",function(l){var c=s.props,u=c.text,d=c.onCopy,h=c.children,f=c.options,p=Yx.default.Children.only(h),g=(0,Bwe.default)(u,f);d&&d(u,g),p&&p.props&&typeof p.props.onClick=="function"&&p.props.onClick(l)}),s}return Hwe(n,[{key:"render",value:function(){var i=this.props;i.text,i.onCopy,i.options;var a=i.children,o=$we(i,Fwe),l=Yx.default.Children.only(a);return Yx.default.cloneElement(l,jO(jO({},o),{},{onClick:this.onClick}))}}]),n}(Yx.default.PureComponent);Yw.CopyToClipboard=xH;NA(xH,"defaultProps",{onCopy:void 0,options:void 0});var Xwe=Yw,IN=Xwe.CopyToClipboard;IN.CopyToClipboard=IN;var Kwe=IN;const Qwe="_root_t6s26_1",Zwe="_children_t6s26_5",Jwe="_shareAppItem_t6s26_11",jf={root:Qwe,children:Zwe,shareAppItem:Jwe},Bm=({condition:t,set:e,children:n,title:s="Поделиться объявлением",url:i=""})=>{const a=Xr(),o=i||window.location.origin+a.pathname+a.search+a.hash,l=`https://api.whatsapp.com/send?text=${encodeURIComponent(o)}`,c=`https://telegram.me/share/url?url=${encodeURIComponent(o)}&text=Inrut`,u=`https://vk.com/share.php?url=${encodeURIComponent(o)}`,d=`https://connect.ok.ru/offer?url=${encodeURIComponent(o)}`,[h,f]=v.useState(!1),p=()=>{f(!0)};return r.jsx(Ze,{condition:t,children:r.jsxs(gt,{options:{overlayClassNames:"_right",modalClassNames:jf.root,modalContentClassNames:"mmd1:!px-12"},set:e,condition:t,children:[n?r.jsx("div",{className:jf.children,children:n}):"",r.jsx("h2",{className:"title-3 modal-title-gap",children:s}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Kwe.CopyToClipboard,{text:o,onCopy:p,children:r.jsxs(_e,{variant:"secondary",className:"col-span-2 gap-4",active:h,children:[r.jsx(eae,{width:18,height:18,className:`${h?"fill-white":""}`}),h?"Ссылка скопирована":"Скопировать ссылку"]})}),r.jsxs("a",{href:l,className:jf.shareAppItem,target:"_blank",children:[r.jsx(Wie,{width:26,height:26,className:"fill-green"}),r.jsx("span",{children:"WhatsApp"})]}),r.jsxs("a",{href:c,className:jf.shareAppItem,target:"_blank",children:[r.jsx(Yie,{width:26,height:26,className:"fill-blue"}),r.jsx("span",{children:"Telegram"})]}),r.jsxs("a",{href:u,className:jf.shareAppItem,target:"_blank",children:[r.jsx(Gie,{width:26,height:26,className:"fill-blue"}),r.jsx("span",{children:"Вконтакте"})]}),r.jsxs("a",{href:d,className:jf.shareAppItem,target:"_blank",children:[r.jsx(Xie,{width:26,height:26,className:"fill-orange"}),r.jsx("span",{children:"Одноклассники"})]})]}),h&&on.createPortal(r.jsx(yi,{show:h,set:f,onClose:()=>f(!1),classListRoot:"min-w-[300px] !pt-6 !z-[99999]",children:r.jsx("p",{className:"font-medium text-defaultMax",children:"Ссылка скопирована"})}),document.getElementById("overlay-wrapper"))]})})},bH=(t=[9999999999999],e=100)=>{const n=s=>({pages:s.pages,total:s.total,items:s.items.map(i=>({...i,title:`${i.rooms===0?"Студия":`${i.rooms}-комн.`} ${i.area} м²,  ${i.floor}/${i.building_floors} эт.`}))});return Me("/api/apartments",{ids:t,per_page:e,sort:"priceAsc"}).then(s=>n(s.data))},MN=v.memo(({data:t,variant:e="short",maxLength:n=35,player:s})=>{const[i,a]=v.useState({items:[]}),[o,l]=v.useState(!1),c=ue(rt);if(v.useEffect(()=>{t.cards.length&&bH(t.cards,n).then(u=>{a(u)})},[]),v.useEffect(()=>{setTimeout(()=>{l(!0)},250)},[]),e==="short")return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`overflow-hidden mmd1:bg-pageColor mmd1:rounded-xl video-player-sidebar-dynamic mmd1:h-full ${c?"absolute top-8 bottom-8 -left-[360px] w-[360px] rounded-tr-none rounded-br-none rounded-br-x":"mmd1:!-translate-x-4 rounded-tl-none rounded-bl-none rounded-br-x md1:!rounded-none"} ${o?"_active":""}`,children:[c&&r.jsxs("div",{className:"mmd1:py-4 px-4 flex justify-between gap-4",children:[r.jsx("h3",{className:"title-3",children:"Квартиры этого обзора"}),r.jsx("button",{onClick:()=>{l(!1)},children:r.jsx(Pr,{})})]}),r.jsx("div",{className:"mt-1 md1:mt-0 mmd1:pb-[100px] px-4 h-full",children:r.jsx("div",{className:"overflow-y-auto overflow-x-hidden md1:!overflow-hidden scrollbarPrimaryNoVisible h-full pb-[35px] scrollbarPrimaryLeft",children:r.jsx("div",{className:"flex flex-col",children:i.items.map(u=>r.jsxs("a",{href:`${ke.apartment}${u.id}`,onClick:()=>{s&&s.pause()},target:"_blank",className:"relative group mb-4 pb-4 border-bottom-primary100 [&:last-child]:!mb-0 [&:last-child]:!pb-0 [&:last-child]:!border-none cursor-pointer flex gap-4 items-center",children:[r.jsxs("div",{className:"flex gap-4 group-hover:translate-x-2 transition-all",children:[r.jsx(yv,{children:r.jsx("img",{src:qt(u.images[0]),width:60,height:60,alt:""})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("h3",{className:"title-4",children:u.title}),r.jsxs("h4",{className:"title-4 mt-2",children:[pt(u.price)," ₽"]}),r.jsx("div",{className:"mt-2",children:u.cashback?r.jsx(Sa,{cashback:u.price/100*u.cashback}):""})]})]}),r.jsx(Yu,{className:"ml-auto fill-dark -rotate-90 group-hover:translate-x-1 transition-all",width:28,height:28})]},u.id))})})}),c&&r.jsx("div",{className:"absolute bottom-4 left-0 px-4 z-[99] w-full",children:r.jsx(_e,{className:"w-full",size:"Small",onClick:()=>{s&&s.pause(),window.open(`${ke.listingFlats}?complex=${t.building_id}&ids=1&${t.cards.map(u=>`id=${u}`).join("&")}`)},children:"Смотреть все квартиры"})})]}),!c&&r.jsx("div",{className:"absolute bottom-4 left-0 px-4 z-[99] w-full md1:bg-white md1:!bottom-0 md1:py-3",children:r.jsx(_e,{className:"w-full",size:"Small",onClick:()=>{s&&s.pause(),window.open(`${ke.listingFlats}?complex=${t.building_id}&ids=1&${t.cards.map(u=>`id=${u}`).join("&")}`)},children:"Смотреть все квартиры"})})]});if(e==="page")return r.jsxs("div",{className:"white-block-small mt-3",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Квартиры этого обзора"}),r.jsx(Xs,{slidesPerView:1.2,spaceBetween:16,className:"w-full",breakpoints:{799:{slidesPerView:2},1222:{slidesPerView:3}},children:i.items.map(u=>r.jsx(Tn,{children:r.jsxs("a",{href:`${ke.apartment}${u.id}`,onClick:()=>{s&&s.pause()},target:"_blank",className:"relative  flex gap-4 items-center",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx(yv,{children:r.jsx("img",{src:qt(u.images[0]),width:60,height:60,alt:""})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("h3",{className:"title-4",children:u.title}),r.jsxs("h4",{className:"title-4 mt-2",children:[pt(u.price)," ₽"]}),r.jsx("div",{className:"mt-2",children:u.cashback?r.jsx(Sa,{cashback:u.price/100*u.cashback}):""})]})]}),r.jsx(Yu,{className:"ml-auto fill-dark -rotate-90 group-hover:translate-x-1 transition-all",width:28,height:28})]})},u.id))}),r.jsx(_e,{className:"w-full mt-6 md1:mt-4",size:"Small",onClick:()=>{s&&s.pause(),window.open(`${ke.listingFlats}?complex=${t.building_id}&ids=1&${t.cards.map(u=>`id=${u}`).join("&")}`)},children:"Смотреть все квартиры"})]})}),_H=({player:t,data:e,className:n="",type:s="video"})=>{var a;if(!t)return;const i=((a=e.author)==null?void 0:a.role)===pn.id?e.developer:e.author;if(i)return r.jsx("div",{className:He("absolute flex items-center gap-4",n),children:r.jsx(Vs,{avatar:i.avatar_url||i.image,name:ks(i.name,i.surname),pos:`${e.author&&e.author.role!==pn.id?`Менеджер отдела продаж ${e.developer.name}`:"Застройщик"}`,classListUser:He(s==="short"&&"!text-white"),className:He("text-default",s==="short"&&"!text-white"),classListName:"!text-white",centered:!0,nameHref:`${e.author&&e.author.role!==pn.id?`${ke.specialists.inner}`:`${ke.developers.inner}`}${i.id}`})})},wH=({title:t="",className:e="",classNameTitle:n="",building_id:s,building_name:i,type:a="video"})=>r.jsxs("div",{className:`absolute w-[78%] z-30 ${e}`,children:[!!(s&&i)&&r.jsxs(Ke,{className:He("blue-link-hover mb-1.5 font-medium text-defaultMax",a==="short"&&"text-white"),to:`${ke.building}${s}`,children:["ЖК ",i]}),r.jsx(yy,{className:He("text-default overflow-hidden cut cut-1 font-medium",a==="short"&&"!text-white",n),descr:t||"Без названия",lines:1,btnText:"Ещё",classNameBtn:"!text-white !text-defaultMax",btnIcon:!1})]}),eCe=({data:t,onClick:e})=>{var a,o,l,c;if(!t.cards.length)return;const[n,s]=v.useState({});v.useEffect(()=>{bH(t.cards).then(u=>{s(u)})},[]);const i=((a=n.items)==null?void 0:a.slice(0,1))||[];return r.jsx("div",{className:"absolute w-[88%] bg-white rounded-2xl left-6 bottom-4 z-[99] text-white px-4 h-[70px] flex items-center",children:t.cards.length===1?r.jsx("div",{children:n.items&&r.jsxs("a",{href:`${ke.apartment}${n.items[0].id}`,target:"_blank",className:"flex items-center gap-2 text-white",children:[r.jsx(yv,{size:60,children:r.jsx("img",{src:qt(n.items[0].images[0]),width:60,height:60,alt:""})}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium",children:[pt(n.items[0].price)," ₽"]}),r.jsx("h3",{className:"mt-1",children:n.items[0].title})]})]})}):r.jsxs("div",{className:"flex items-center w-full",onClick:e,children:[r.jsx(yv,{size:60,children:r.jsx("img",{src:qt((o=i[0])==null?void 0:o.images[0]),width:60,height:60,alt:""})},(l=i[0])==null?void 0:l.id),r.jsxs("div",{className:"ml-3",children:[r.jsx("h4",{className:"title-4",children:(c=i[0])==null?void 0:c.complex}),r.jsxs("p",{className:"font-medium text-dark",children:[pt(n.total||0)," квартир"]})]}),r.jsx("p",{className:"text-dark ml-auto",children:"Смотреть всё"})]})})},tCe=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,CH={Play:"Воспроизвести",Pause:"Пауза","Current Time":"Текущее время","Duration Time":"Продолжительность","Remaining Time":"Оставшееся время",Loaded:"Загружено",Progress:"Прогресс",Fullscreen:"Полноэкранный режим","Exit-Fullscreen":"Обычный режим",Mute:"Без звука",Unmute:"Со звуком","Playback Rate":"Скорость воспроизведения","You aborted the media playback":"Вы прервали воспроизведение видео","A network error caused the media download to fail part-way.":"Ошибка сети привела к сбою загрузки видео.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Видео не может быть загружено, возможно, из-за проблем с сервером, сетью или неподдерживаемого формата.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Воспроизведение видео было прервано из-за проблемы с повреждением или использования функций, неподдерживаемых вашим браузером.","No compatible source was found for this media.":"Не найдено совместимых источников для этого видео."},Sr=({set:t,children:e,className:n=""})=>r.jsxs("div",{className:`ModalHeader ${n}`,children:[e,r.jsxs("button",{onClick:()=>t(!1),className:"modal-close-default",children:[r.jsx(Pr,{width:25,height:25,className:"fill-blue"}),r.jsx("div",{children:r.jsx("span",{})})]})]});let tc=!0;const Oy=({condition:t,set:e,data:n,startData:s=null,startIndex:i=0})=>{const a=ue(rt);return r.jsx(Ze,{condition:t,children:r.jsx(gt,{options:{overlayClassNames:"_full",modalClassNames:`!bg-[#0e1319] ${a?"":"HeaderSticky !pb-0"}`,modalContentClassNames:"!p-0"},set:e,condition:t,closeBtnDark:!0,closeBtn:a,ModalHeader:()=>r.jsx(r.Fragment,{children:!a&&r.jsx("div",{className:"ModalHeader px-4 py-3 !bg-[#0e1319] !shadow-none",children:r.jsx("button",{type:"button",onClick:()=>e(!1),children:r.jsx(wa,{className:"rotate-180 fill-white",width:32,height:32})})})}),children:r.jsx("div",{className:"!px-8 !pt-8 !pb-0 md1:!px-0 md1:!pt-0",children:r.jsx(SH,{data:n,startData:s,startIndex:i,condition:t})})})})},SH=({data:t,condition:e=!0,startIndex:n,startData:s,single:i=!1})=>{var w,C;const[a,o]=v.useState(null),l=ue(rt),c=v.useRef(null),[u,d]=v.useState(0),h=v.useRef(null),[f,p]=v.useState([]);v.useEffect(()=>{if(!h.current)return;const j=E=>{tc&&c.current&&c.current.swiper&&(E.target.closest(".video-player-sidebar-dynamic")||(tc=!1,E.deltaY>0?c.current.swiper.slideNext():c.current.swiper.slidePrev(),setTimeout(()=>{tc=!0},350)))};return h.current.addEventListener("wheel",j,{passive:!1}),()=>{h.current&&h.current.removeEventListener("wheel",j)}},[h.current,c.current,a]),v.useEffect(()=>{s&&o(s||t[0])},[s]);const g=()=>{tc&&(c.current&&c.current.swiper&&(tc=!1,c.current.swiper.slidePrev()),setTimeout(()=>{tc=!0},350))},m=()=>{tc&&(c.current&&c.current.swiper&&(tc=!1,c.current.swiper.slideNext()),setTimeout(()=>{tc=!0},350))},_=j=>{d(j.activeIndex);const E=j.slides[j.activeIndex-1],T=j.slides[j.activeIndex],N=j.slides[j.activeIndex+1];let P=[];T&&P.push(t[j.activeIndex].id),N&&P.push(t[j.activeIndex+1].id),E&&P.push(t[j.activeIndex-1].id),p(P),setTimeout(()=>{j.slides.forEach((I,B)=>{const U=I.querySelector("video");if(U){const z=je.getPlayer(U.id);z&&(B!==j.activeIndex?z.pause():(z.volume(localStorage.getItem("video_volume")||.5),setTimeout(()=>{z.play()},300)))}})},50)},y=j=>{const E=j.slides[j.activeIndex];if(!E)return;const T=E.querySelector("video");T&&T.classList.add("pointer-events-none")},x=j=>{const E=j.slides[j.activeIndex];if(!E)return;const T=E.querySelector("video");T&&T.classList.remove("pointer-events-none")},b=(j,E)=>{if(E.target.closest(".vjs-control-bar"))return;const T=j.slides[j.activeIndex];if(!T)return;const N=T.querySelector("video");if(!N)return;const P=je.getPlayer(N.id);P&&(P.paused()?E.target.closest(".video-js")&&P.play():P.pause())};return v.useEffect(()=>{e&&c.current&&a&&c.current&&c.current.swiper&&setTimeout(()=>{const j=c.current.swiper;j.slides.forEach((E,T)=>{const N=E.querySelector("video");if(N){const P=je.getPlayer(N.id);P&&T===j.activeIndex&&P.play()}})},250)},[a,e]),v.useEffect(()=>{if(!e&&c.current&&c.current.swiper){const j=c.current.swiper;j.slides.forEach(E=>{const T=E.querySelector("video");if(T){const N=je.getPlayer(T.id);N&&N.dispose()}}),j.disable()}},[e]),r.jsx("div",{ref:h,children:r.jsxs("div",{className:"video-player shorts-player shorts-player-controls mt-8",children:[r.jsx(Xs,{modules:[xi],ref:c,slidesPerView:1,spaceBetween:16,grabCursor:!0,keyboard:!0,direction:"vertical",speed:800,className:"h-full mmd1:pl-[385px] mmd1:-ml-[385px]",onSlideChange:_,onTouchStart:y,onTouchEnd:x,onClick:b,onInit:j=>{j.slideTo(n!==-1?n:0,0),_(j)},breakpoints:{1222:{touchEventsTarget:"container",simulateTouch:!1}},children:t.map(j=>r.jsx(Tn,{className:`shorts-player-slide ${f.includes(j.id)?"_init":""}`,children:!!f.includes(j.id)&&r.jsx(nCe,{data:j,currentId:j.id})},j.id))}),!i&&l&&r.jsxs(r.Fragment,{children:[r.jsx(ho,{onClick:g,disabled:u===0,className:"!w-[52px] !h-[52px] slider-btn-prev !absolute bottom-[84px] -right-[60px] short-player-icon",classnameicon:"!-rotate-90 fill-[#828282] w-[28px] h-[28px]"}),r.jsx(fo,{onClick:m,disabled:u===((C=(w=c.current)==null?void 0:w.swiper)==null?void 0:C.slides.length)-1,className:"!w-[52px] !h-[52px] slider-btn-next !absolute bottom-4 -right-[60px] short-player-icon",classnameicon:"!rotate-90 fill-[#828282] w-[28px] h-[28px]"})]})]})})},jH=t=>{if(t)return t.image_url?qt(t.image_url):`${Wi}/api/video/${t.id}/preview/0`},TH=({data:t,className:e="",classNameVideo:n})=>{const s=v.useRef(null),i=jH(t);return r.jsx("div",{className:e,children:r.jsx(Ry,{refElement:s,data:t,variant:"default",className:He("w-full h-full",n),autoplay:!1,poster:i})})},Ry=({condition:t=!0,data:e,variant:n="default",className:s="",autoplay:i=!0,poster:a="",children:o,mute:l=!0,refElement:c,visibleControls:u=!0,childrenVideo:d,classNameButtonPlay:h})=>{var I,B,U,z,G;const f=ue(rt),p=v.useRef(null),g=v.useRef(null),[m,_]=v.useState(null);v.useState(!1);const[y,x]=v.useState(!1),[b,w]=v.useState(!1),[C,j]=v.useState(!0),E=ue(Ot),[T,N]=v.useState(0),P={autoplay:i,controls:!0,mute:l,language:"ru",poster:a,playbackRates:[.5,.75,1,1.5,2],sources:[{src:e.video_url_test||`${Wi}${e.video_url}`,type:"video/mp4"}],userActions:{click:function(){f&&(this.paused()?this.play().catch(V=>{console.error("Ошибка воспроизведения:",V)}):this.pause())}}};if(v.useEffect(()=>{g.current&&c&&(c.current=g.current)},[g.current]),je.addLanguage("ru",CH),v.useEffect(()=>{if(t&&!g.current){const V=document.createElement("video-js");p.current.appendChild(V);const J=g.current=je(V,P);_(V);const Q=[];if(J.volume(localStorage.getItem("video_volume")||.5),n!=="default"&&jwe(J,e.timeCodes,Q),Swe(J,Q,u),!u&&J){const Y=J.controlBar.progressControl;Y&&Y.dispose()}gH(J,e.timeCodes),J.on("timeupdate",()=>{Q.forEach(Y=>Y()),N(J.currentTime())}),J.on("volumechange",()=>{localStorage.setItem("video_volume",J.muted()?0:J.volume())}),J.on("useractive",function(){console.log("Панель управления видима"),j(!0)}),J.on("userinactive",function(){j(!1)})}else p.current=null,g.current=null},[t]),v.useEffect(()=>{if(!(g.current&&p.current))return;const V=g.current.el(),J=Q=>{(Q.target.classList.contains("video-js")||Q.target.classList.contains("vjs-tech"))&&(g.current.paused()?g.current.play().then(()=>{tCe()&&!g.current.isFullscreen()&&g.current.requestFullscreen()}).catch(Y=>{console.error("Ошибка воспроизведения:",Y)}):g.current.pause())};return V.addEventListener("touchstart",J),()=>{V.removeEventListener("touchstart",J)}},[g.current,p.current]),v.useEffect(()=>{g.current&&a&&setTimeout(()=>{g.current.poster(a),g.current.load()},250)},[a]),n==="default")return r.jsxs("div",{className:`video-player video-player-default ${s}`,style:{"--bg-image":`url('${Wi}/api/video/${e.id}/preview/0')`},children:[r.jsx("div",{className:"video-js-background video-js-background--video"}),r.jsx("div",{ref:p,className:"h-full"}),!((I=g.current)!=null&&I.hasStarted_)&&r.jsx("button",{type:"button",className:He("absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center z-[9999]",h),onClick:()=>{var V;return(V=g.current)==null?void 0:V.play()},children:r.jsx(lv,{className:"fill-white",width:46,height:46})})]});if(n==="page")return r.jsxs("div",{className:`video-player ${s}`,children:[r.jsxs("div",{className:"self-start overflow-hidden rounded-[20px]",children:[r.jsxs("div",{className:"bg-white rounded-[20px] overflow-hidden",children:[r.jsxs("div",{ref:p,className:"relative md1:fixed md1:top-[50px] md1:left-0 md1:w-full z-[999]",children:[(!((B=g.current)!=null&&B.hasStarted_)||!f&&C||((U=g.current)==null?void 0:U.paused()))&&r.jsx("button",{type:"button",className:He("pointer-events-none absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center z-[9999]",h),children:(z=g.current)!=null&&z.paused()?r.jsx(lv,{className:"fill-white",width:46,height:46}):r.jsx(Mk,{className:"fill-white",width:46,height:46})}),((G=E==null?void 0:E.role)==null?void 0:G.id)===sn.id&&g.current&&!Ye(e.interactiveEl)&&g.current.currentTime()>=My(e.interactiveEl.time)&&r.jsx(_e,{onClick:()=>w(!0),size:"34",className:"absolute bottom-[75px] right-4",children:e.interactiveEl.type.label}),r.jsx(EH,{data:e,condition:b,set:w})]}),r.jsx("div",{className:"mt-4 order-1 md1:mt-[calc(56.25%+0px)] ",children:r.jsxs("div",{className:"flex items-start gap-4 justify-between px-4 pb-4 shadow-primary",children:[r.jsxs("div",{className:"flex-grow",children:[!!e.building_name&&r.jsxs(Ke,{to:`${ke.building}${e.building_id}`,className:"mb-2 font-medium blue-link",children:["ЖК ",e.building_name]}),r.jsx(wH,{title:e.name,className:"relative",classNameTitle:"title-3"}),r.jsx(_H,{data:e,player:je.getPlayer(m==null?void 0:m.id),setInteractiveIsOpen:w,className:"relative mt-4"})]}),r.jsxs(_e,{variant:"secondary",size:f?"Small":"34",className:"flex gap-2 items-center",onClick:()=>x(!0),children:[r.jsx(X2,{className:"fill-lightGray",width:f?14:12,height:f?14:12}),f&&"Поделиться"]}),r.jsx(Bm,{condition:y,set:x,title:"Поделиться видео",url:window.location.origin+`/videos/${e.id}`})]})})]}),d]}),o]})},nCe=({data:t,currentId:e,classNamePlayer:n=""})=>{var E;const s=`short-player-${t.id}`,[i,a]=v.useState(null),[o,l]=v.useState(0),[c,u]=v.useState(s===e),d=v.useRef(null),h=ue(Ks),[f,p]=v.useState(!1),g=ue(rt),m=ue(Ot),_={controls:!0,autoplay:s===e,preload:"auto",muted:!1,language:"ru",sources:[{src:`${Wi}${t.video_url}`,type:"video/mp4"}],userActions:{doubleClick:!1}};je.addLanguage("ru",CH);const[y,x]=v.useState(!1),[b,w]=v.useState(!1),C=Dt();v.useEffect(()=>{const T=document.getElementById(s);if(a(T),T){const G=je.getPlayer(T.id);G&&G.dispose()}const N=je(s,_);if(!N)return;N.el().style.setProperty("--bg-image",`url('${Wi}/api/video/${t.id}/preview/0')`);const P=[];N.volume(localStorage.getItem("video_volume")||.5),N.on("ended",()=>{N.play()}),gH(N,t.timeCodes);const I=N.getChild("controlBar"),B=I.getChild("volumePanel"),U=I.getChild("playToggle"),z=I.getChild("RemainingTimeDisplay");z&&z.dispose(),I.removeChild(U),d.current&&(I.removeChild(B),d.current.appendChild(B.el())),N.addChild("PlayToggle",{},0),N.getChild("PlayToggle").el().classList.add("short-player-play"),N.on("timeupdate",()=>{P.forEach(G=>G()),l(N.currentTime())}),N.on("volumechange",()=>{localStorage.setItem("video_volume",N.muted()?0:N.volume())}),N.on("play",function(){u(!0)}),N.on("pause",function(){u(!1)})},[t]);const j=async()=>{if(h){if(t.author.role===pn.id){const T=await $s({building_id:t.building_id,type:xt.CHAT,organization_id:+t.developer.id});xr(T)}if(t.author.role===Wt.id){const T=await $s({building_id:t.building_id,recipients_id:[t.author.id],type:xt.CHAT});xr(T)}}else C(Bs(!0))};return r.jsxs("div",{className:"h-full w-full cursor-pointer",children:[f&&g&&r.jsx(MN,{data:t,player:i}),r.jsxs("div",{"data-vjs-player":!0,children:[r.jsx("div",{className:"video-js-background"}),r.jsx("video",{id:s,className:`video-js ${n}`})]}),r.jsx("div",{className:"absolute bottom-[135px] right-1 z-[99]",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"video-js video-js-short-volume short-player-volume",ref:d}),r.jsx("button",{className:"w-[52px] h-[52px] flex items-center justify-center",onClick:j,children:r.jsx(vm,{className:"stroke-white fill-[transparent]",width:24,height:24})}),r.jsx("button",{onClick:()=>x(!0),className:"w-[52px] h-[52px] flex items-center justify-center",children:r.jsx(X2,{className:"fill-white",width:24,height:24})})]})}),r.jsx(Bm,{condition:y,set:x,title:"Поделиться Short",url:window.location.origin+`/shorts/${t.id}`}),r.jsx(_H,{data:t,player:je.getPlayer(i==null?void 0:i.id),setInteractiveIsOpen:w,className:`${t.cards.length,"top-4"} left-4 z-[99]`,type:"short"}),r.jsx(wH,{title:t.name,className:`${t.cards.length?"bottom-[106px]":"bottom-[20px]"} left-4`,building_id:t.building_id,building_name:t.building_name,type:"short"}),r.jsx(eCe,{data:t,onClick:()=>p(T=>!T)}),((E=m==null?void 0:m.role)==null?void 0:E.id)===sn.id&&i&&!Ye(t.interactiveEl)&&o>=My(t.interactiveEl.time)&&r.jsx(_e,{onClick:()=>w(!0),size:"34",className:"absolute bottom-[75px] left-4",children:t.interactiveEl.type.label}),r.jsx(EH,{data:t,condition:b,set:w}),r.jsx("div",{className:"pointer-events-none short-player-status",children:c?r.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 circle-dark",children:r.jsx(Mk,{width:24,height:24,className:"fill-white"})}):r.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 circle-dark",children:r.jsx(lv,{width:24,height:24,className:"fill-white"})})}),r.jsx(Ze,{condition:f&&!g,children:r.jsx(gt,{condition:f&&!g,set:p,options:{modalClassNames:"HeaderSticky !pb-0",overlayClassNames:"_full",modalContentClassNames:"!px-0 !pt-0"},closeBtn:!1,ModalHeader:()=>r.jsx(Sr,{set:p,className:"px-4 py-4 mb-2",children:r.jsx("h2",{className:"title-2",children:"Квартиры этого обзора"})}),children:r.jsx(MN,{data:t,player:i})})})]})},EH=({data:t,condition:e,set:n})=>{const[s]=ur(),[i,a]=v.useState({});return v.useEffect(()=>{_4(t.building_id).then(o=>{a(o)})},[]),!!(t.interactiveEl&&!Ye(t.interactiveEl))&&(s.loggedIn?r.jsx(r.Fragment,{children:t.interactiveEl.type.value==="record-viewing"&&r.jsx(Ze,{condition:e,children:r.jsx(wv,{condition:e,set:n,type:"building",id:t.building_id,developName:t.developer.name,objectData:i,onUpdate:()=>{n(!1)}})})}):r.jsx(bm,{condition:e,set:()=>{if(e)return n()}}))},$i=({data:t,developer:e={},variant:n="",userVisible:s=!1,edit:i,deleteCard:a=()=>{},className:o="",visibleComplex:l=!0,playerIn:c=!1,userTop:u=!1,playerInVisibleControls:d=!0,controlsAdmin:h=!1,visibleContent:f=!0})=>{const p=ue(Wk),[g,m]=v.useState(!1),_=()=>{switch(n){case"":return"";case"shadow":return eu.VideoCardShadow;case"row":return eu.VideoCardRow;case"text-white":return eu.VideoCardWhiteText;default:return""}};if(!t||Ye(t))return;const y=t.author||t.developer||e,x=y.role===pn.id?t.developer||e:y,b=`${ke.videosPage.videoPage}${t.id}`,w=()=>r.jsx("img",{src:t.image_url?qt(t.image_url):`${Wi}/api/video/${t.id}/preview/0`,alt:""}),C=({className:j="",classListName:E=""})=>!!(s&&x)&&r.jsx(Vs,{className:j,avatar:x.avatar_url||x.image,name:ks(x.name,x.surname),pos:x.pos||"Менеджер отдела продаж",centered:!0,classListName:`text-[12px] ${E}`,sizeAvatar:26,classListUser:"!text-white"});return r.jsxs("article",{className:`${eu.VideoCard} ${_()} ${o}`,children:[!!u&&r.jsx(C,{className:"mb-3"}),p&&h&&r.jsxs(r.Fragment,{children:[i&&r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} ${eu.VideoCardControl} !z-20 top-3 right-14`,onClick:()=>i(t),children:r.jsx(Ns,{width:15,height:15,className:"stroke-blue stroke-[1.5px]"})}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} ${eu.VideoCardControl} !z-20 top-3 right-3`,onClick:()=>m(!0),children:r.jsx(un,{width:15,height:15,className:"fill-red"})})]}),c?r.jsx("div",{className:"w-full h-full",children:r.jsx(Ry,{data:{video_url:t.video_url,id:t.id},variant:"default",autoplay:!1,visibleControls:d})}):r.jsxs(Ke,{to:b,className:`ibg cursor-pointer ${eu.VideoCardImage}`,target:n!=="row"&&n!=="text-white"?"_blank":"",children:[r.jsx(w,{}),!u&&r.jsx(C,{className:"absolute bottom-2 left-2 z-10 max-w-[93%]",classListName:"!text-white"})]}),f&&r.jsxs("div",{className:eu.VideoCardContent,children:[!!(t.building_name&&l)&&r.jsxs(Ke,{to:`${ke.building}${t.building_id}`,className:`font-medium mb-2 blue-link text-small ${n==="text-white"?"text-white":""}`,children:["ЖК ",t.building_name]}),u?r.jsx(yy,{descr:t.name||"Без названия",lines:2,className:"cut-2-imp"}):r.jsx(Ke,{to:b,className:`cut cut-1 ${n==="text-white"?"title-4 !text-white mt-0":"title-3-5"}`,children:t.name||"Без названия"})]}),r.jsx(Ze,{condition:g,children:r.jsx(Ro,{condition:g,title:r.jsx(r.Fragment,{children:"Вы действительно хотите удалить ?"}),set:m,request:async()=>{await a({id:t.id,url:t.video_url}),m(!1)}})})]})},sCe="_ShortCard_yzu26_1",rCe="_VideoCardControl_yzu26_5",iCe="_ShortCardImage_yzu26_11",aCe="_ShortCardContent_yzu26_32",oCe="_ShortCardUser_yzu26_36",lCe="_ShortCardControl_yzu26_40",Bg={ShortCard:sCe,VideoCardControl:rCe,ShortCardImage:iCe,ShortCardContent:aCe,ShortCardUser:oCe,ShortCardControl:lCe},Ly=({setShortsOpen:t,data:e,onlyImage:n=!1,classNameImage:s="",contentVisible:i=!0,variant:a="default",controlsAdmin:o=!1,deleteCard:l=()=>{},edit:c})=>{var p;const u=ue(Wk),[d,h]=v.useState(!1);if(Ye(e))return;const f=((p=e.author)==null?void 0:p.role)===pn.id?e.developer:e.author;return r.jsxs("article",{className:Bg.ShortCard,children:[u&&o&&r.jsxs(r.Fragment,{children:[c&&r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} ${Bg.VideoCardControl} !z-20 top-3 right-14`,onClick:()=>c(e),children:r.jsx(Ns,{width:15,height:15,className:"stroke-blue stroke-[1.5px]"})}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} ${Bg.VideoCardControl} !z-20 top-3 right-3`,onClick:()=>h(!0),children:r.jsx(un,{width:15,height:15,className:"fill-red"})})]}),r.jsxs("div",{className:He("ibg cursor-pointer",Bg.ShortCardImage,s),onClick:t,children:[r.jsx("img",{src:e.image_url?qt(e.image_url):`${Wi}/api/video/${e.id}/preview/0`,alt:""}),!!(!n&&f)&&r.jsx(Vs,{classListName:`!text-white ${a==="small"?"text-verySmall":"text-[12px]"}`,className:"absolute bottom-2 left-2 z-10 max-w-[93%]",avatar:f.avatar_url||f.image,name:ks(f.name,f.surname),pos:f.pos||"Менеджер отдела продаж",centered:!0,sizeAvatar:26,classListUser:"!text-white"})]}),!n&&i&&r.jsxs("div",{className:Bg.ShortCardContent,children:[a!=="small"&&!!e.building_name&&r.jsxs(Ke,{to:`${ke.building}${e.building_id}`,className:"font-medium blue-link text-small mb-2 !w-auto cut cut-1",children:["ЖК ",e.building_name]}),r.jsx("h3",{className:`title-3-5 cut cut-1 ${a==="small"?"title-4":""}`,children:e.name||"Без названия"})]}),r.jsx(Ze,{condition:d,children:r.jsx(Ro,{condition:d,title:r.jsx(r.Fragment,{children:"Вы действительно хотите удалить ?"}),set:h,request:async()=>{await l({id:e.id,url:e.video_url,building_id:e.building_id}),h(!1)}})})]})},sr=(t,e)=>t?e:{},Xw=t=>Object.values(t).flat(),NH="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='100'%20height='100'%20fill='none'%3e%3ccircle%20cx='50.278'%20cy='50.278'%20r='45.833'%20fill='%23E3FBFD'/%3e%3cpath%20fill='%23014266'%20d='M1.165%2067.684a1.111%201.111%200%200%200-.035%201.933L36.4%2090.48c.191.113.412.166.633.153l13.322-.816a1.11%201.11%200%200%200%20.544-.181l26.386-17.394c.66-.434.668-1.4.015-1.845L41.873%2046.243a1.111%201.111%200%200%200-1.157-.058l-39.551%2021.5z'%20opacity='.1'/%3e%3cpath%20fill='%230B9F6A'%20d='M50.464%2054.875%2020.19%2072.3l-.002-25.31%2030.277-17.425v25.309z'/%3e%3cpath%20fill='%23007B56'%20d='M80.74%2072.3%2050.463%2054.876l.002-25.309L80.74%2046.991z'/%3e%3cpath%20fill='%23242629'%20d='M80.74%2072.3%2050.463%2054.876l.002-25.309L80.74%2046.991z'%20opacity='.2'/%3e%3cpath%20fill='%23007B56'%20d='M50.468%2029.58%2022.71%2064.795l27.758%2017.779z'%20opacity='.65'/%3e%3cpath%20fill='%230B9F6A'%20d='M80.74%2072.3%2050.463%2089.727%2020.187%2072.3l30.276-17.425z'/%3e%3cpath%20fill='%23007B56'%20d='M50.464%2089.727%2020.188%2072.302l.001-25.311%2030.275%2017.426z'/%3e%3cpath%20fill='%238BD383'%20d='M80.74%2072.302%2050.465%2089.727l-.002-25.31L80.74%2046.99v25.311z'/%3e%3cpath%20fill='%23007B56'%20d='m69.329%2078.87-3.68%202.084v-24.34l3.68-2.34z'%20opacity='.2'/%3e%3cpath%20fill='%2316AF6F'%20d='M50.464%2029.566%2041.03%2018.41%209.897%2034.812%2020.221%2046.99l30.243-17.425z'/%3e%3cpath%20fill='%238BD383'%20d='M50.464%2029.566%2041.03%2018.41%209.898%2034.823l10.323%2012.168z'%20opacity='.75'/%3e%3cpath%20fill='%23007B56'%20d='M59.99%2017.843%2050.464%2029.55%2080.74%2046.99l9.815-12.734zm-.401%2045.172%2030.127-17.484-8.976%201.46-30.277%2017.447%209.126-1.423z'/%3e%3cpath%20fill='%23242629'%20d='M33.123%2054.446v-.009l-1.555-.895v25.31l1.464.843%201.846%201.062v-25.3l-1.755-1.011z'%20opacity='.2'/%3e%3cpath%20fill='%238BD383'%20d='m20.187%2046.99-6.962-1.07L43.28%2063.44l7.183.998z'/%3e%3cpath%20fill='%23fff'%20d='m20.187%2046.99-6.962-1.07L43.28%2063.44l7.183.998z'%20opacity='.4'/%3e%3c/svg%3e",cCe="_EmptyBlockRoot_7yt39_1",kH={EmptyBlockRoot:cCe},Or=({block:t=!0})=>r.jsxs("div",{className:`${t?"white-block":""} ${kH.EmptyBlockRoot}`,children:[r.jsx("img",{src:NH,alt:""}),r.jsx("h3",{className:"title-3 mt-4",children:"Поиск не дал результатов"}),r.jsx("p",{className:"mt-3",children:"Попробуйте изменить критерии поиска"})]}),Wa=({block:t=!0,children:e,className:n="",imageVisible:s=!0})=>r.jsxs("div",{className:`${t?"white-block":""} ${kH.EmptyBlockRoot} ${n}`,children:[s&&r.jsx("img",{src:NH,alt:""}),e]}),vs=()=>{const t=Xr();return L2.parse(t.search,{ignoreQueryPrefix:!0})},Yh=async t=>{try{return(await Ue(`/api/building/${t}`)).data}catch(e){return e}},AH=(t,e)=>{const n={},s=t.flatMap(i=>i.items);t==null||t.forEach(i=>{i.items.forEach(a=>{a.type==="flag"&&(n[a.name]={value:typeof e[a.name]=="string"?e[a.name]:e[a.name][0]}),a.type==="list-single"&&(n[a.name]={value:e[a.name][0]||""}),a.type==="list-multiple"&&(n[a.name]=e[a.name].map(o=>({value:o}))),a.type==="text-field"&&(n[a.name]={value:e[a.name]}),delete e[a.name]})});for(const i in n){const a=n[i],o=s.find(l=>l.name===i);if(no(a)){const l=a.filter(c=>o["available-values"].includes(c.value));n[i]=l}ew(a)&&o["available-values"].includes(a.value)&&(n[i]={value:a.value})}return n},$_=async(t,e,n)=>{const s=await Yh(e),i=await Ue("/api/object-types").then(async h=>{var g;const f=(g=h.data.find(m=>m.name==="Новостройки"))==null?void 0:g.id;return await Ue(`/api/type/${f}`).then(m=>m.data.attributeComplex)}),o=i.flatMap(h=>h.items).map(h=>({name:h.name,value:h["available-values"]})).map(h=>{const f=s.attributes.flatMap(p=>p.items).find(p=>p.name===h.name);return f?{name:f.name,value:f.value.split(",").map(p=>p.trim())}:{name:h.name,value:[]}}),l=AH(i,o.reduce((h,{name:f,value:p})=>(h[f]=p,h),{})),c=n.find(h=>h.name===s.city);await new Promise(h=>setTimeout(h,2e3)),await Me(`/admin-api/building/${e}/unlink-video/${t.id}`);const u={complex:s.title.replace(/^ЖК\s+'|'$/g,""),city:c.id,address:s.address,deadline:s.deadline,"type-build":{value:s.type_id},developer:{value:s.developer.id},description:s.description,"recommend-home":s.showOnHomepage,"cashback-home":s.showCashbackOnHomepage,cashback:String(s.cashback||""),cashbackSubscribe:String(s.cashback_with_master_subscribe||""),tags:s.tags.map(h=>h.id),stickers:s.stickers.map(h=>h.id),advantages:s.advantages.map(h=>h.id),attributes:l,photos:s.gallery.map((h,f)=>({id:f+1,name:h.title,items:h.images.map((p,g)=>({id:g+1,image:p,new_image:!1}))})),priceFrom:s.minPrice,apartRenov:s.apartmentRenov.map((h,f)=>({id:f+1,name:h.title,description:h.description,price:h.price,items:h.images.map((p,g)=>({id:g+1,image:p,new_image:!1}))})),ecologyParks:s.ecologyParks.map((h,f)=>({id:f+1,name:h.title,description:h.description,distance:h.distance,items:h.images.map((p,g)=>({id:g+1,image:p,new_image:!1}))})),geo:s.location,videos:s.videos.filter(h=>h!==t.url),shorts:s.shorts.filter(h=>h!==t.url),videos_gallery:s.videos_gallery.filter(h=>h!==t.url),videos_apartRenov:s.videos_apartRenov.filter(h=>h!==t.url),videos_ecologyParks:s.videos_ecologyParks.filter(h=>h!==t.url)},d=new FormData;d.append("data",JSON.stringify(u)),Me(`/admin-api/update/object/${e}`,d,{"Content-Type":"multipart/form-data"}).then(h=>{console.log(h)}),await new Promise(h=>setTimeout(h,1500))},Oh=async t=>{try{const e=await Ue(`/api/building/${t}/frames`);return e.data?Object.keys(e.data).map(s=>{const i=e.data[s];return{label:i,value:i}}):void 0}catch(e){console.log(e)}},Xh=async t=>{try{return(await Ue(`/api/building/${t}/specialists`)).data}catch(e){console.log(e)}},DH=async t=>{try{return(await Ue(`/api/organization/${t}/specialists`)).data}catch(e){console.log(e)}};var jr=[];for(var Ej=0;Ej<256;++Ej)jr.push((Ej+256).toString(16).slice(1));function uCe(t,e=0){return(jr[t[e+0]]+jr[t[e+1]]+jr[t[e+2]]+jr[t[e+3]]+"-"+jr[t[e+4]]+jr[t[e+5]]+"-"+jr[t[e+6]]+jr[t[e+7]]+"-"+jr[t[e+8]]+jr[t[e+9]]+"-"+jr[t[e+10]]+jr[t[e+11]]+jr[t[e+12]]+jr[t[e+13]]+jr[t[e+14]]+jr[t[e+15]]).toLowerCase()}var Xx,dCe=new Uint8Array(16);function hCe(){if(!Xx&&(Xx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xx(dCe)}var fCe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const TO={randomUUID:fCe};function hc(t,e,n){if(TO.randomUUID&&!e&&!t)return TO.randomUUID();t=t||{};var s=t.random||(t.rng||hCe)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,uCe(s)}const cr=(t=[])=>t.map((e,n)=>({id:n+1,image:e.image||URL.createObjectURL(e),file:e.path||e.name?e:e.file})),ON=(t=[])=>t.map((e,n)=>({id:n+1,video:e.video||URL.createObjectURL(e),file:e.path||e.name?e:e.file})),kA=(t=[])=>t.map((e,n)=>({id:n+1,pdf:e.pdf||URL.createObjectURL(e),file:e.path||e.name?e:e.file})),ts=(t,e="image",n="image")=>t.map(s=>{let i;return s.file?i={...s,[n]:hc(),[`new_${e}`]:!0}:i={...s,[`new_${e}`]:!1},i}),ns=(t,e="image",n="image")=>t.map(s=>({id:s.id,[e]:s[n],[`new_${e}`]:s[`new_${e}`]})),ss=(t,e,n="image",s="image")=>{t.forEach(i=>{i[`new_${n}`]&&e.append(i[s],i.file)})},pCe="_SelectRoot_2xhxq_1",mCe="_SelectButton_2xhxq_5",gCe="_SelectRootSecond_2xhxq_10",vCe="_SelectPlaceholder_2xhxq_14",yCe="_SelectPlaceholderSelected_2xhxq_19",xCe="_SelectRootActive_2xhxq_24",bCe="_SelectCheck_2xhxq_24",_Ce="_SelectClose_2xhxq_28",wCe="_SelectButtonSecond_2xhxq_65",CCe="_SelectButtonError_2xhxq_76",SCe="_SelectButtonDisabled_2xhxq_81",jCe="_SelectButtonWrapper_2xhxq_89",TCe="_SelectDropdown_2xhxq_100",ECe="_SelectDropdownList_2xhxq_115",NCe="_SelectDropdownItem_2xhxq_122",kCe="_SelectDropdownItemActive_2xhxq_138",ACe="_SelectSearch_2xhxq_144",DCe="_SelectSearchEmpty_2xhxq_149",PCe="_SelectPlaceholderActive_2xhxq_162",ICe="_SelectPlaceholderNone_2xhxq_174",MCe="_SelectModal_2xhxq_178",Ln={SelectRoot:pCe,SelectButton:mCe,SelectRootSecond:gCe,SelectPlaceholder:vCe,SelectPlaceholderSelected:yCe,SelectRootActive:xCe,SelectCheck:bCe,SelectClose:_Ce,SelectButtonSecond:wCe,SelectButtonError:CCe,SelectButtonDisabled:SCe,SelectButtonWrapper:jCe,SelectDropdown:TCe,SelectDropdownList:ECe,SelectDropdownItem:NCe,SelectDropdownItemActive:kCe,SelectSearch:ACe,SelectSearchEmpty:DCe,SelectPlaceholderActive:PCe,SelectPlaceholderNone:ICe,SelectModal:MCe},EO=({options:t,value:e,onChange:n,handlerToggle:s=()=>{},searchText:i,setSearchText:a,search:o=!1,defaultOption:l,searchLabel:c,placeholderName:u})=>{const d=t.filter(p=>{if(p.label)return p.label.toLowerCase().includes(i.toLowerCase())}),h=p=>{a(p)},f=v.useRef(null);return v.useEffect(()=>{const p=f==null?void 0:f.current;o&&p&&p.focus()},[]),r.jsxs("div",{children:[r.jsx("button",{type:"button",onClick:s,className:Ln.SelectClose,children:r.jsx(Pr,{})}),o&&r.jsx("div",{className:Ln.SelectSearch,children:r.jsx(kn,{size:"48",placeholder:c,value:i,onChange:h,search:!0,refInput:f})}),r.jsxs("div",{className:`${Ln.SelectDropdownList} scrollbarPrimary`,children:[l&&r.jsx("button",{type:"button",onClick:()=>n({}),className:`${Ln.SelectDropdownItem} ${Ye(e)?Ln.SelectDropdownItemActive:""}`,children:u}),d.length>0?d.map((p,g)=>r.jsxs("button",{type:"button",onClick:()=>n(p),className:`${Ln.SelectDropdownItem} ${e.value===p.value?Ln.SelectDropdownItemActive:""} ${p.avatar?"!min-h-14":""}`,children:[!!p.avatar&&r.jsx(Nn,{src:p.avatar,size:"32",className:"mr-4"}),p.label]},g)):r.jsx(r.Fragment,{children:!!(!l||o)&&r.jsx("span",{className:Ln.SelectSearchEmpty,children:i?"Поиск не дал результатов":"Пусто"})})]})]})};function vi({options:t,value:e={},onChange:n,nameLabel:s,search:i=!1,placeholderName:a="Не выбрано",className:o="",isValid:l,children:c,defaultOption:u=!1,searchLabel:d="Поиск по названию",isInit:h=!0,disabled:f=!1,onClose:p=()=>{},variant:g="primary",iconArrow:m=!0}){const[_,y]=v.useState(!1),[x,b]=v.useState(""),w=v.useRef(null),C=v.useRef(null);v.useEffect(()=>{const N=P=>{window.innerWidth<=1222||C.current&&!C.current.contains(P.target)&&(y(!1),_&&p())};return document.addEventListener("click",N,{capture:!0}),()=>{document.removeEventListener("click",N,{capture:!0})}},[_]);const j=N=>{y(!1),n(N),p()},E=()=>{_===!1?b(""):p(),y(!_)},T={selectRoot:g==="primary"?Ln.SelectRoot:g==="second"?Ln.SelectRootSecond:"",selectButton:g==="primary"?Ln.SelectButton:g==="second"?Ln.SelectButtonSecond:""};return r.jsxs("div",{ref:C,className:`${T.selectRoot} ${_?Ln.SelectRootActive:""} ${o}`,"data-error":l?l.ref.name:void 0,children:[r.jsxs("button",{type:"button",onClick:E,className:`${T.selectButton} ${l?Ln.SelectButtonError:""} ${f?Ln.SelectButtonDisabled:""}`,children:[r.jsxs("div",{className:`${s?Ln.SelectButtonWrapper:""}`,children:[!!s&&r.jsx("span",{className:`${Ln.SelectPlaceholder} ${Ye(e)?"":Ln.SelectPlaceholderActive}`,children:s}),r.jsx("span",{className:`${Ln.SelectPlaceholderSelected} ${Ye(e)?Ln.SelectPlaceholderNone:""}`,children:h?Ye(e)?a:e.label:r.jsx("span",{className:"text-primary400",children:"Загрузка..."})})]}),m&&r.jsx(Yu,{className:Ln.SelectCheck})]}),c,!f&&r.jsx(r.Fragment,{children:window.innerWidth>1222?r.jsx(cy,{nodeRef:w,in:_,classNames:"_open-select",timeout:200,unmountOnExit:!0,children:r.jsx("div",{ref:w,className:Ln.SelectDropdown,children:r.jsx(EO,{options:t,value:e,onChange:j,handlerToggle:E,searchText:x,search:i,setSearchText:b,defaultOption:u,searchLabel:d,placeholderName:a})})}):r.jsx(gt,{options:{overlayClassNames:"_full _bottom",modalContentClassNames:Ln.SelectModal},set:y,condition:_,closeBtn:!1,children:r.jsx(EO,{options:t,value:e,onChange:j,handlerToggle:E,searchText:x,search:i,setSearchText:b,defaultOption:u,searchLabel:d,placeholderName:a})})})]})}const fn=({control:t,errors:e,requiredValue:n="",placeholderName:s="Не выбрано",name:i="",nameLabel:a="",options:o=[],defaultValue:l={},className:c="",search:u,defaultOption:d,searchLabel:h,setValue:f=null,paramsVisible:p=!1,disabled:g=!1,onClose:m=()=>{}})=>{const[_,y]=v.useState(!1),[x,b]=_r();return v.useEffect(()=>{!l||!l.value||(f||y(!0),!_&&f&&(f(i,l),y(!0)))},[l,i]),r.jsx(Ir,{name:i,control:t,defaultValue:l,rules:{required:n,validate:w=>{if(n&&Ye(w))return typeof n=="string"?n:!1}},render:({field:w})=>r.jsx(vi,{options:o,nameLabel:a,placeholderName:s,onChange:C=>{if(w.onChange(C),p){const j=new URLSearchParams(x);j.set([i],C.label||s),b(j)}},value:w.value,className:c,isValid:e?e[i]:!1,search:u,searchLabel:h,defaultOption:d,disabled:g,onClose:m,children:r.jsx(iw,{errors:e,field:i})})})},AA=({children:t})=>r.jsx("div",{className:"flex gap-1.5",children:t}),OCe="_CheckboxRoomRoot_xexft_1",RCe="_CheckboxRoomActive_xexft_21",LCe="_CheckboxRoomError_xexft_26",BCe="_CheckboxRoomInput_xexft_31",FCe="_CheckboxRoomDefault_xexft_38",$Ce="_CheckboxRoomStudio_xexft_43",Tf={CheckboxRoomRoot:OCe,CheckboxRoomActive:RCe,CheckboxRoomError:LCe,CheckboxRoomInput:BCe,CheckboxRoomDefault:FCe,CheckboxRoomStudio:$Ce},DA=({label:t,checked:e=!1,onChange:n,size:s="Default",isValid:i})=>r.jsxs("label",{className:`${Tf.CheckboxRoomRoot} ${Tf[`CheckboxRoom${s}`]} ${e?Tf.CheckboxRoomActive:""} ${i?Tf.CheckboxRoomError:""}`,children:[r.jsx("input",{type:"checkbox",checked:e,onChange:n,className:Tf.CheckboxRoomInput}),r.jsx("span",{className:Tf.CheckboxRoomWrapper,children:t})]}),UCe="_FieldInputRoot_1xbqw_1",VCe={FieldInputRoot:UCe},_l=({children:t,className:e=""})=>r.jsx("div",{className:`${VCe.FieldInputRoot} ${e}`,children:t}),zCe="_MultiSelectRoot_sqic0_1",HCe="_MultiSelectRootActive_sqic0_5",qCe="_MultiSelectCheck_sqic0_5",WCe="_MultiSelectButton_sqic0_9",GCe="_MultiSelectButtonError_sqic0_29",YCe="_MultiSelectButtonDisabled_sqic0_34",XCe="_MultiSelectButtonWrapper_sqic0_42",KCe="_MultiSelectNameLabel_sqic0_51",QCe="_MultiSelectDropdown_sqic0_67",ZCe="_MultiSelectList_sqic0_82",JCe="_MultiSelectItem_sqic0_94",eSe="_MultiSelectClose_sqic0_99",tSe="_MultiSelectPlaceholder_sqic0_113",nSe="_MultiSelectNameLabelActive_sqic0_124",sSe="_MultiSelectPlaceholderNone_sqic0_128",rSe="_MultiSelectPlaceholderItem_sqic0_132",iSe="_MultiSelectSearchEmpty_sqic0_139",aSe="_MultiSelectActions_sqic0_145",oSe="_MultiSelectSearch_sqic0_139",lSe="_MultiSelectModal_sqic0_157",_s={MultiSelectRoot:zCe,MultiSelectRootActive:HCe,MultiSelectCheck:qCe,MultiSelectButton:WCe,MultiSelectButtonError:GCe,MultiSelectButtonDisabled:YCe,MultiSelectButtonWrapper:XCe,MultiSelectNameLabel:KCe,MultiSelectDropdown:QCe,MultiSelectList:ZCe,MultiSelectItem:JCe,MultiSelectClose:eSe,MultiSelectPlaceholder:tSe,MultiSelectNameLabelActive:nSe,MultiSelectPlaceholderNone:sSe,MultiSelectPlaceholderItem:rSe,MultiSelectSearchEmpty:iSe,MultiSelectActions:aSe,MultiSelectSearch:oSe,MultiSelectModal:lSe},NO=({options:t,searchText:e,setSearchText:n,setSelectedOptions:s,handlerToggle:i,search:a,btnsActions:o,selectedOptions:l,onChange:c,searchLabel:u,calcProp:d,lazyLoading:h=!1})=>{const f=()=>r.jsxs("div",{className:`${_s.MultiSelectActions} mb-6`,children:[r.jsx(_e,{type:"button",onClick:m,variant:"secondary",size:"26",children:"Выбрать всё"}),r.jsx(_e,{type:"button",onClick:_,variant:"secondary",size:"26",children:"Очистить всё"})]}),p=t.filter(b=>{var w;return(w=b.label)==null?void 0:w.toLowerCase().includes(e.toLowerCase())}),g=b=>{n(b)},m=()=>{s([...t]),c([...t]),n("")},_=()=>{s([]),c([]),n("")},y=(b,w)=>{const C=b.target.checked;let j;C?j=[...l,w]:j=l.filter(E=>E.value!==w.value),s(j),c(j)},x=v.useRef(null);return v.useEffect(()=>{const b=x==null?void 0:x.current;a&&b&&b.focus()},[]),r.jsxs("div",{children:[r.jsx("button",{type:"button",onClick:i,className:_s.MultiSelectClose,children:r.jsx(Pr,{})}),a&&r.jsx(kn,{size:"48",className:_s.MultiSelectSearch,placeholder:u,value:e,onChange:g,search:!0,refInput:x}),o&&r.jsx(f,{}),r.jsx("div",{className:`${_s.MultiSelectList} scrollbarPrimary`,children:p.length>0?r.jsx(r.Fragment,{children:d?p.map((b,w)=>{const C=l.map(T=>T.value),j={default:b.id!==1&&b.id!==2&&b.id!==3&&b.id!==6,cash:b.id!==5&&b.id!==1,installment_plan:b.id!==5&&b.id!==6,mortgage_approval_bank:b.id===1||b.id===3||b.id===6,mortgage_no_approval_bank:b.id===1||b.id===2||b.id===6},E=C.includes("cash")?j.cash:C.includes("installment_plan")?j.installment_plan:C.includes("mortgage_approval_bank")?j.mortgage_approval_bank:C.includes("mortgage_no_approval_bank")?j.mortgage_no_approval_bank:j.default;return r.jsx(Ph,{className:`${_s.MultiSelectItem} ${E?"order-1":""}`,option:b,checked:l.find(T=>T.value===b.value),disabled:E,onChange:T=>y(T,b)},w)}):r.jsx(r.Fragment,{children:h&&p.length>1e3?r.jsxs("span",{className:_s.MultiSelectSearchEmpty,children:["Поиск выдал более 1 000 предложений (",pt(p.length),'), измените критерии поиска или нажмите кнопку "Выбрать всё"']}):p.map((b,w)=>r.jsx(Ph,{className:_s.MultiSelectItem,option:b,checked:l.find(C=>C.value===b.value),onChange:C=>y(C,b)},w))})}):r.jsx("span",{className:_s.MultiSelectSearchEmpty,children:e?"Поиск не дал результатов":"Пусто"})})]})},yh=({options:t,onChange:e,placeholderText:n="Не выбрано",search:s=!1,btnsActions:i=!1,value:a=[],nameLabel:o="",isValid:l,searchLabel:c="Поиск по названию",calcProp:u=!1,lazyLoading:d=!1,onClose:h=()=>{},disabled:f=!1})=>{const[p,g]=v.useState(!1),[m,_]=v.useState(""),y=v.useRef(null),x=v.useRef(null);v.useEffect(()=>{const j=E=>{window.innerWidth<=1222||x.current&&!x.current.contains(E.target)&&(g(!1),p&&h())};return document.addEventListener("click",j,{capture:!0}),()=>{document.removeEventListener("click",j,{capture:!0})}},[p]);const[b,w]=v.useState(a);v.useEffect(()=>{w(a)},[a]);const C=()=>{p===!1?_(""):h(),g(!p)};return r.jsxs("div",{ref:x,className:`${_s.MultiSelectRoot} ${p?_s.MultiSelectRootActive:""}`,"data-error":l?l.ref.name:void 0,children:[r.jsxs("button",{type:"button",onClick:C,className:`${_s.MultiSelectButton} ${l?_s.MultiSelectButtonError:""} ${f?_s.MultiSelectButtonDisabled:""}`,children:[r.jsxs("div",{className:`${o?_s.MultiSelectButtonWrapper:""} overflow-hidden`,children:[o&&r.jsx("div",{className:`${_s.MultiSelectNameLabel} ${b.length>0?_s.MultiSelectNameLabelActive:""}`,children:o}),r.jsx("div",{className:`${_s.MultiSelectPlaceholder} ${b.length===0?_s.MultiSelectPlaceholderNone:""} ${o?"ml-4":""}`,children:b.length>0?b.map((j,E)=>r.jsxs("span",{className:_s.MultiSelectPlaceholderItem,children:[j.image&&r.jsx(r.Fragment,{children:j.image==="default"?r.jsx(Nn,{src:"",title:j.label,size:20,className:"max-h-5 inline-block mr-2 -mb-1"}):r.jsx(Nn,{src:j.image,title:j.label,size:20,className:"max-h-5 inline-block mr-2 -mb-1"})}),j.label]},E)):n})]}),r.jsx(Yu,{className:_s.MultiSelectCheck})]}),!f&&r.jsx(r.Fragment,{children:window.innerWidth>1222?r.jsx(cy,{nodeRef:y,in:p,classNames:"_open-select",timeout:200,unmountOnExit:!0,children:r.jsx("div",{ref:y,className:_s.MultiSelectDropdown,children:r.jsx(NO,{options:t,searchText:m,setSearchText:_,selectedOptions:b,onChange:e,setSelectedOptions:w,handlerToggle:C,search:s,btnsActions:i,searchLabel:c,calcProp:u,lazyLoading:d})})}):r.jsx(gt,{options:{overlayClassNames:"_full _bottom",modalContentClassNames:_s.MultiSelectModal},set:g,condition:p,closeBtn:!1,children:r.jsx(NO,{options:t,searchText:m,setSearchText:_,selectedOptions:b,onChange:e,setSelectedOptions:w,handlerToggle:C,search:s,btnsActions:i,calcProp:u,lazyLoading:d})})})]})},Fm=({building_id:t=0,frames:e=[],defaultValue:n=[],setData:s=()=>{},autoSelected:i=!1,className:a="",title:o="Квартиры",areaField:l=!0,filterFields:c={},setFilterFields:u=()=>{}})=>{const[d,h]=v.useState([]),[f,p]=v.useState([]),[g,m]=v.useState(!1),_=v.useCallback(es(({filterFields:y,defaultValue:x,isInit:b})=>{const w={...y,frames:y.frame.length?y.frame.map(C=>+C.value):null};Me(`/api/building/${t}/apartments-filter`,w).then(C=>{if(!b){const j=C.data.map(E=>({value:E.id,label:E.title,image:E.image})).filter(E=>x.includes(E.value));p(j),s(j),m(!0)}h(C.data)})},300),[]);return v.useEffect(()=>{n&&_({filterFields:c,defaultValue:n,isInit:g})},[c,n]),r.jsxs("div",{children:[!!o&&r.jsx("h3",{className:"title-3 mb-4",children:o}),r.jsxs("div",{className:`grid grid-cols-[380px_max-content_1fr] gap-2 ${a}`,children:[r.jsx(yh,{nameLabel:"Корпус",options:e,value:c.frame,onChange:y=>{u({...c,frame:y})},defaultOption:!0,btnsActions:!0,search:!0}),r.jsx(AA,{children:wy.map((y,x)=>r.jsx(DA,{checked:c.rooms.includes(y.value),onChange:b=>u(()=>b.target.checked?{...c,rooms:[...c.rooms,y.value]}:{...c,rooms:c.rooms.filter(w=>w!==y.value)}),label:y.label,size:y.value===0?"Studio":"Default"},x))}),l&&r.jsxs(_l,{children:[r.jsx(kn,{value:c.areaFrom,onChange:y=>u({...c,areaFrom:y}),before:"Площадь от",convertNumber:!0,onlyNumber:!0,maxLength:3}),r.jsx(kn,{value:c.areaTo,onChange:y=>u({...c,areaTo:y}),before:"До",after:"м²",convertNumber:!0,onlyNumber:!0,maxLength:3})]}),r.jsx("div",{className:"col-span-full",children:r.jsx(yh,{nameLabel:"Выбрать квартиры",options:d.map(y=>({value:y.id,label:y.title,image:y.image})),value:f,onChange:y=>{p(y),s(y)},search:!0,btnsActions:!0,lazyLoading:!0})})]})]})},_c=({control:t,name:e="",options:n=[],defaultValue:s=[],type:i="single",customChange:a=()=>{},className:o="",tagColor:l="select",tagSize:c="default"})=>{const u=(p,g,m)=>{p?g.onChange([m.value]):g.onChange([])},d=(p,g,m)=>{p?g.onChange([...g.value,m.value]):g.onChange(g.value.filter(_=>_!==m.value))},h=(p,g)=>{p.onChange([g.value])},f=(p,g,m)=>{m.value==="all"||!p&&g.value.length===1?g.onChange(["all"]):p?g.onChange([...g.value,m.value].filter(_=>_!=="all")):g.onChange(g.value.filter(_=>_!==m.value))};return r.jsx(Ir,{name:e,control:t,defaultValue:s,render:({field:p})=>r.jsx("div",{className:`flex flex-wrap gap-2 ${o}`,children:n.map((g,m)=>r.jsx(An,{color:l,size:c,onClick:_=>{i==="single"&&u(_,p,g),i==="multiple"&&d(_,p,g),i==="single-required"&&h(p,g),i==="placeholder-required"&&f(_,p,g),i==="custom"&&a(_,p,g)},value:p.value.includes(g.value),children:g.label},m))})})};function $m(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})}function Um(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(s=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{s=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function U_(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a}function RN(t,e,n){if(n||arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}var cSe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function By(t,e){var n=uSe(t);if(typeof n.path!="string"){var s=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof s=="string"&&s.length>0?s:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function uSe(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var s=e.split(".").pop().toLowerCase(),i=cSe.get(s);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}var dSe=[".DS_Store","Thumbs.db"];function hSe(t){return $m(this,void 0,void 0,function(){return Um(this,function(e){return V_(t)&&fSe(t.dataTransfer)?[2,vSe(t.dataTransfer,t.type)]:pSe(t)?[2,mSe(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,gSe(t)]:[2,[]]})})}function fSe(t){return V_(t)}function pSe(t){return V_(t)&&V_(t.target)}function V_(t){return typeof t=="object"&&t!==null}function mSe(t){return LN(t.target.files).map(function(e){return By(e)})}function gSe(t){return $m(this,void 0,void 0,function(){var e;return Um(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(s){return s.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(s){return By(s)})]}})})}function vSe(t,e){return $m(this,void 0,void 0,function(){var n,s;return Um(this,function(i){switch(i.label){case 0:return t.items?(n=LN(t.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(ySe))]):[3,2];case 1:return s=i.sent(),[2,kO(PH(s))];case 2:return[2,kO(LN(t.files).map(function(a){return By(a)}))]}})})}function kO(t){return t.filter(function(e){return dSe.indexOf(e.name)===-1})}function LN(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var s=t[n];e.push(s)}return e}function ySe(t){if(typeof t.webkitGetAsEntry!="function")return AO(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?IH(e):AO(t)}function PH(t){return t.reduce(function(e,n){return RN(RN([],U_(e),!1),U_(Array.isArray(n)?PH(n):[n]),!1)},[])}function AO(t){var e=t.getAsFile();if(!e)return Promise.reject("".concat(t," is not a File"));var n=By(e);return Promise.resolve(n)}function xSe(t){return $m(this,void 0,void 0,function(){return Um(this,function(e){return[2,t.isDirectory?IH(t):bSe(t)]})})}function IH(t){var e=t.createReader();return new Promise(function(n,s){var i=[];function a(){var o=this;e.readEntries(function(l){return $m(o,void 0,void 0,function(){var c,u,d;return Um(this,function(h){switch(h.label){case 0:if(l.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return c=h.sent(),n(c),[3,4];case 3:return u=h.sent(),s(u),[3,4];case 4:return[3,6];case 5:d=Promise.all(l.map(xSe)),i.push(d),a(),h.label=6;case 6:return[2]}})})},function(l){s(l)})}a()})}function bSe(t){return $m(this,void 0,void 0,function(){return Um(this,function(e){return[2,new Promise(function(n,s){t.file(function(i){var a=By(i,t.fullPath);n(a)},function(i){s(i)})})]})})}var _Se=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),s=t.name||"",i=(t.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):i===l})}return!0};function DO(t){return SSe(t)||CSe(t)||OH(t)||wSe()}function wSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SSe(t){if(Array.isArray(t))return BN(t)}function PO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,s)}return n}function IO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PO(Object(n),!0).forEach(function(s){MH(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function MH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dv(t,e){return ESe(t)||TSe(t,e)||OH(t,e)||jSe()}function jSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OH(t,e){if(t){if(typeof t=="string")return BN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BN(t,e)}}function BN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function TSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s=[],i=!0,a=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(s.push(o.value),!(e&&s.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw l}}return s}}function ESe(t){if(Array.isArray(t))return t}var NSe="file-invalid-type",kSe="file-too-large",ASe="file-too-small",DSe="too-many-files",PSe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:NSe,message:"File type must be ".concat(n)}},MO=function(e){return{code:kSe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},OO=function(e){return{code:ASe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},ISe={code:DSe,message:"Too many files"};function RH(t,e){var n=t.type==="application/x-moz-file"||_Se(t,e);return[n,n?null:PSe(e)]}function LH(t,e,n){if(Yd(t.size))if(Yd(e)&&Yd(n)){if(t.size>n)return[!1,MO(n)];if(t.size<e)return[!1,OO(e)]}else{if(Yd(e)&&t.size<e)return[!1,OO(e)];if(Yd(n)&&t.size>n)return[!1,MO(n)]}return[!0,null]}function Yd(t){return t!=null}function MSe(t){var e=t.files,n=t.accept,s=t.minSize,i=t.maxSize,a=t.multiple,o=t.maxFiles,l=t.validator;return!a&&e.length>1||a&&o>=1&&e.length>o?!1:e.every(function(c){var u=RH(c,n),d=Dv(u,1),h=d[0],f=LH(c,s,i),p=Dv(f,1),g=p[0],m=l?l(c):null;return h&&g&&!m})}function z_(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Kx(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function RO(t){t.preventDefault()}function OSe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function RSe(t){return t.indexOf("Edge/")!==-1}function LSe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return OSe(t)||RSe(t)}function Ko(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return e.some(function(l){return!z_(s)&&l&&l.apply(void 0,[s].concat(a)),z_(s)})}}function BSe(){return"showOpenFilePicker"in window}function FSe(t){if(Yd(t)){var e=Object.entries(t).filter(function(n){var s=Dv(n,2),i=s[0],a=s[1],o=!0;return BH(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(a)||!a.every(FH))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,s){var i=Dv(s,2),a=i[0],o=i[1];return IO(IO({},n),{},MH({},a,o))},{});return[{description:"Files",accept:e}]}return t}function $Se(t){if(Yd(t))return Object.entries(t).reduce(function(e,n){var s=Dv(n,2),i=s[0],a=s[1];return[].concat(DO(e),[i],DO(a))},[]).filter(function(e){return BH(e)||FH(e)}).join(",")}function USe(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function VSe(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function BH(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||/\w+\/[-+.\w]+/g.test(t)}function FH(t){return/^.*\.[\w]+$/.test(t)}var zSe=["children"],HSe=["open"],qSe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],WSe=["refKey","onChange","onClick"];function GSe(t){return KSe(t)||XSe(t)||$H(t)||YSe()}function YSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function KSe(t){if(Array.isArray(t))return FN(t)}function Nj(t,e){return JSe(t)||ZSe(t,e)||$H(t,e)||QSe()}function QSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $H(t,e){if(t){if(typeof t=="string")return FN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FN(t,e)}}function FN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function ZSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s=[],i=!0,a=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(s.push(o.value),!(e&&s.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw l}}return s}}function JSe(t){if(Array.isArray(t))return t}function LO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,s)}return n}function cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LO(Object(n),!0).forEach(function(s){$N(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function $N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H_(t,e){if(t==null)return{};var n=eje(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function eje(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var PA=v.forwardRef(function(t,e){var n=t.children,s=H_(t,zSe),i=Fy(s),a=i.open,o=H_(i,HSe);return v.useImperativeHandle(e,function(){return{open:a}},[a]),Xe.createElement(v.Fragment,null,n(cs(cs({},o),{},{open:a})))});PA.displayName="Dropzone";var UH={disabled:!1,getFilesFromEvent:hSe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};PA.defaultProps=UH;PA.propTypes={children:jt.func,accept:jt.objectOf(jt.arrayOf(jt.string)),multiple:jt.bool,preventDropOnDocument:jt.bool,noClick:jt.bool,noKeyboard:jt.bool,noDrag:jt.bool,noDragEventsBubbling:jt.bool,minSize:jt.number,maxSize:jt.number,maxFiles:jt.number,disabled:jt.bool,getFilesFromEvent:jt.func,onFileDialogCancel:jt.func,onFileDialogOpen:jt.func,useFsAccessApi:jt.bool,autoFocus:jt.bool,onDragEnter:jt.func,onDragLeave:jt.func,onDragOver:jt.func,onDrop:jt.func,onDropAccepted:jt.func,onDropRejected:jt.func,onError:jt.func,validator:jt.func};var UN={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Fy(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=cs(cs({},UH),t),n=e.accept,s=e.disabled,i=e.getFilesFromEvent,a=e.maxSize,o=e.minSize,l=e.multiple,c=e.maxFiles,u=e.onDragEnter,d=e.onDragLeave,h=e.onDragOver,f=e.onDrop,p=e.onDropAccepted,g=e.onDropRejected,m=e.onFileDialogCancel,_=e.onFileDialogOpen,y=e.useFsAccessApi,x=e.autoFocus,b=e.preventDropOnDocument,w=e.noClick,C=e.noKeyboard,j=e.noDrag,E=e.noDragEventsBubbling,T=e.onError,N=e.validator,P=v.useMemo(function(){return $Se(n)},[n]),I=v.useMemo(function(){return FSe(n)},[n]),B=v.useMemo(function(){return typeof _=="function"?_:BO},[_]),U=v.useMemo(function(){return typeof m=="function"?m:BO},[m]),z=v.useRef(null),G=v.useRef(null),V=v.useReducer(tje,UN),J=Nj(V,2),Q=J[0],Y=J[1],oe=Q.isFocused,he=Q.isFileDialogActive,me=v.useRef(typeof window<"u"&&window.isSecureContext&&y&&BSe()),Oe=function(){!me.current&&he&&setTimeout(function(){if(G.current){var Le=G.current.files;Le.length||(Y({type:"closeDialog"}),U())}},300)};v.useEffect(function(){return window.addEventListener("focus",Oe,!1),function(){window.removeEventListener("focus",Oe,!1)}},[G,he,U,me]);var xe=v.useRef([]),Pe=function(Le){z.current&&z.current.contains(Le.target)||(Le.preventDefault(),xe.current=[])};v.useEffect(function(){return b&&(document.addEventListener("dragover",RO,!1),document.addEventListener("drop",Pe,!1)),function(){b&&(document.removeEventListener("dragover",RO),document.removeEventListener("drop",Pe))}},[z,b]),v.useEffect(function(){return!s&&x&&z.current&&z.current.focus(),function(){}},[z,x,s]);var qe=v.useCallback(function(Se){T?T(Se):console.error(Se)},[T]),Ie=v.useCallback(function(Se){Se.preventDefault(),Se.persist(),ie(Se),xe.current=[].concat(GSe(xe.current),[Se.target]),Kx(Se)&&Promise.resolve(i(Se)).then(function(Le){if(!(z_(Se)&&!E)){var tt=Le.length,lt=tt>0&&MSe({files:Le,accept:P,minSize:o,maxSize:a,multiple:l,maxFiles:c,validator:N}),it=tt>0&&!lt;Y({isDragAccept:lt,isDragReject:it,isDragActive:!0,type:"setDraggedFiles"}),u&&u(Se)}}).catch(function(Le){return qe(Le)})},[i,u,qe,E,P,o,a,l,c,N]),Ve=v.useCallback(function(Se){Se.preventDefault(),Se.persist(),ie(Se);var Le=Kx(Se);if(Le&&Se.dataTransfer)try{Se.dataTransfer.dropEffect="copy"}catch{}return Le&&h&&h(Se),!1},[h,E]),ot=v.useCallback(function(Se){Se.preventDefault(),Se.persist(),ie(Se);var Le=xe.current.filter(function(lt){return z.current&&z.current.contains(lt)}),tt=Le.indexOf(Se.target);tt!==-1&&Le.splice(tt,1),xe.current=Le,!(Le.length>0)&&(Y({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Kx(Se)&&d&&d(Se))},[z,d,E]),fe=v.useCallback(function(Se,Le){var tt=[],lt=[];Se.forEach(function(it){var Pt=RH(it,P),H=Nj(Pt,2),M=H[0],R=H[1],te=LH(it,o,a),ye=Nj(te,2),Te=ye[0],$e=ye[1],wt=N?N(it):null;if(M&&Te&&!wt)tt.push(it);else{var Ut=[R,$e];wt&&(Ut=Ut.concat(wt)),lt.push({file:it,errors:Ut.filter(function(Rt){return Rt})})}}),(!l&&tt.length>1||l&&c>=1&&tt.length>c)&&(tt.forEach(function(it){lt.push({file:it,errors:[ISe]})}),tt.splice(0)),Y({acceptedFiles:tt,fileRejections:lt,type:"setFiles"}),f&&f(tt,lt,Le),lt.length>0&&g&&g(lt,Le),tt.length>0&&p&&p(tt,Le)},[Y,l,P,o,a,c,f,p,g,N]),$=v.useCallback(function(Se){Se.preventDefault(),Se.persist(),ie(Se),xe.current=[],Kx(Se)&&Promise.resolve(i(Se)).then(function(Le){z_(Se)&&!E||fe(Le,Se)}).catch(function(Le){return qe(Le)}),Y({type:"reset"})},[i,fe,qe,E]),X=v.useCallback(function(){if(me.current){Y({type:"openDialog"}),B();var Se={multiple:l,types:I};window.showOpenFilePicker(Se).then(function(Le){return i(Le)}).then(function(Le){fe(Le,null),Y({type:"closeDialog"})}).catch(function(Le){USe(Le)?(U(Le),Y({type:"closeDialog"})):VSe(Le)?(me.current=!1,G.current?(G.current.value=null,G.current.click()):qe(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):qe(Le)});return}G.current&&(Y({type:"openDialog"}),B(),G.current.value=null,G.current.click())},[Y,B,U,y,fe,qe,I,l]),W=v.useCallback(function(Se){!z.current||!z.current.isEqualNode(Se.target)||(Se.key===" "||Se.key==="Enter"||Se.keyCode===32||Se.keyCode===13)&&(Se.preventDefault(),X())},[z,X]),ce=v.useCallback(function(){Y({type:"focus"})},[]),ne=v.useCallback(function(){Y({type:"blur"})},[]),ee=v.useCallback(function(){w||(LSe()?setTimeout(X,0):X())},[w,X]),ge=function(Le){return s?null:Le},q=function(Le){return C?null:ge(Le)},re=function(Le){return j?null:ge(Le)},ie=function(Le){E&&Le.stopPropagation()},Ee=v.useMemo(function(){return function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=Se.refKey,tt=Le===void 0?"ref":Le,lt=Se.role,it=Se.onKeyDown,Pt=Se.onFocus,H=Se.onBlur,M=Se.onClick,R=Se.onDragEnter,te=Se.onDragOver,ye=Se.onDragLeave,Te=Se.onDrop,$e=H_(Se,qSe);return cs(cs($N({onKeyDown:q(Ko(it,W)),onFocus:q(Ko(Pt,ce)),onBlur:q(Ko(H,ne)),onClick:ge(Ko(M,ee)),onDragEnter:re(Ko(R,Ie)),onDragOver:re(Ko(te,Ve)),onDragLeave:re(Ko(ye,ot)),onDrop:re(Ko(Te,$)),role:typeof lt=="string"&&lt!==""?lt:"presentation"},tt,z),!s&&!C?{tabIndex:0}:{}),$e)}},[z,W,ce,ne,ee,Ie,Ve,ot,$,C,j,s]),Ne=v.useCallback(function(Se){Se.stopPropagation()},[]),Ae=v.useMemo(function(){return function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=Se.refKey,tt=Le===void 0?"ref":Le,lt=Se.onChange,it=Se.onClick,Pt=H_(Se,WSe),H=$N({accept:P,multiple:l,type:"file",style:{display:"none"},onChange:ge(Ko(lt,$)),onClick:ge(Ko(it,Ne)),tabIndex:-1},tt,G);return cs(cs({},H),Pt)}},[G,n,l,$,s]);return cs(cs({},Q),{},{isFocused:oe&&!s,getRootProps:Ee,getInputProps:Ae,rootRef:z,inputRef:G,open:ge(X)})}function tje(t,e){switch(e.type){case"focus":return cs(cs({},t),{},{isFocused:!0});case"blur":return cs(cs({},t),{},{isFocused:!1});case"openDialog":return cs(cs({},UN),{},{isFileDialogActive:!0});case"closeDialog":return cs(cs({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return cs(cs({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return cs(cs({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return cs({},UN);default:return t}}function BO(){}const IA=({onChange:t=()=>{},image:e,className:n="",defaultLayout:s,effect:i=!0,children:a,changeAvatarChildren:o,deleteAvatarChildren:l,size:c=110})=>{const{getRootProps:u,getInputProps:d,open:h}=Fy({onDrop:t,multiple:!1,accept:{"image/jpeg":[".jpeg",".png",".jpg"]}});return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`${wn.DragDropImageSolo} ${n}`,style:{width:c,height:c},children:[e&&r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-0 right-0 !z-[99] !w-6 !h-6`,onClick:()=>{t(null)},children:r.jsx(Pr,{width:14,height:14})}),e?r.jsx("img",{loading:"lazy",src:e,className:wn.DragDropImageSoloImage,width:c,height:c,alt:""}):s(),r.jsxs("div",{className:`${wn.DragDropImageSoloInput} ${i?wn.DragDropImageSoloInputEffect:""}`,...u(),children:[r.jsx("input",{...d()}),i&&r.jsx("svg",{width:"32",height:"32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M13.02 5.714h5.96c.868 0 1.376.253 1.874.838.026.03.446.552.903 1.116.457.565 1.388.903 2.243.903h.572c2.285 0 4 1.715 4 4.572v8.571c0 2.286-2.286 4.572-5.143 4.572H8.572c-2.858 0-5.143-2.286-5.143-4.572v-8.571c0-2.857 1.714-4.572 4-4.572H8c.855 0 1.786-.338 2.243-.903.457-.564.877-1.086.903-1.116.498-.585 1.006-.838 1.873-.838zM9.885 16.857A6.116 6.116 0 0016 22.971a6.117 6.117 0 006.114-6.114A6.117 6.117 0 0016 10.743a6.116 6.116 0 00-6.114 6.114zm1.828 0a4.285 4.285 0 118.571 0 4.285 4.285 0 01-8.57 0z",fill:"currentColor"})})]}),a]}),l&&r.jsx("button",{type:"button",onClick:()=>{t(null)},children:l}),o&&r.jsx("button",{type:"button",onClick:h,children:o})]})},nje=async t=>{try{const n=(await Us.get(t,{responseType:"blob"})).data;return new File([n],"downloaded-image.jpg",{type:n.type})}catch{}},sje="_TextareaRoot_1ozyk_1",rje="_TextareaWrapper_1ozyk_6",ije="_TextareaError_1ozyk_36",kj={TextareaRoot:sje,TextareaWrapper:rje,TextareaError:ije},aje="_ChatRoot_ytl5t_1",oje="_ChatThemeDark_ytl5t_11",lje="_ChatRootMini_ytl5t_24",cje="_ChatContainer_ytl5t_31",uje="_ChatSidebar_ytl5t_37",dje="_ChatSidebarRight_ytl5t_38",hje="_ChatSidebarMini_ytl5t_60",fje="_ChatSidebarDialog_ytl5t_60",pje="_ChatSidebarResizer_ytl5t_64",mje="_ChatSidebarDialogActive_ytl5t_89",gje="_ChatSidebarDialogTooltip_ytl5t_92",vje="_ChatMain_ytl5t_120",yje="_ChatMainActive_ytl5t_140",xje="_ChatMainInner_ytl5t_147",bje="_ChatMessages_ytl5t_154",_je="_ChatDate_ytl5t_164",wje="_ChatMessagesInner_ytl5t_182",Cje="_ChatBtnArrow_ytl5t_197",Sje="_ChatBtnArrowActive_ytl5t_222",jje="_ChatMessageWrapper_ytl5t_227",Tje="_ChatMessageWrapperMe_ytl5t_235",Eje="_ChatMessage_ytl5t_154",Nje="_ChatMessageBlock_ytl5t_247",kje="_ChatMessageBlockMe_ytl5t_250",Aje="_ChatMessageMe_ytl5t_253",Dje="_ChatMessageLoading_ytl5t_256",Pje="_ChatMessageMore_ytl5t_261",Ije="_ChatMessageOther_ytl5t_268",Mje="_ChatMessageText_ytl5t_268",Oje="_ChatMessageUser_ytl5t_272",Rje="_ChatMessageUserName_ytl5t_278",Lje="_ChatMessageBlockPhotos_ytl5t_300",Bje="_ChatMessageBlockFilesText_ytl5t_310",Fje="_ChatMessageTextLink_ytl5t_324",$je="_ChatMessageBlockFiles_ytl5t_310",Uje="_ChatMessageTimeBg_ytl5t_341",Vje="_ChatMessageBlockAudio_ytl5t_349",zje="_ChatMessageBlockVideo_ytl5t_364",Hje="_ChatMessageTime_ytl5t_341",qje="_ChatBottom_ytl5t_397",Wje="_ChatBottomWrapper_ytl5t_406",Gje="_ChatTextarea_ytl5t_412",Yje="_ChatMessageMoreActive_ytl5t_466",Xje="_ChatMessageMoreMe_ytl5t_473",Kje="_ChatMessageMoreOther_ytl5t_477",Qje="_ChatMessageButton_ytl5t_481",Zje="_ChatBlinkCircle_ytl5t_494",Jje="_blink_ytl5t_1",eTe="_ChatFileDropZoneOverlay_ytl5t_510",tTe="_ChatMenuBtn_ytl5t_525",nTe="_ChatBtnBlue_ytl5t_540",sTe="_ChatMenuRoot_ytl5t_558",rTe="_ChatMenuItem_ytl5t_580",iTe="_ChatMenuItemBtn_ytl5t_600",aTe="_ChatMenuItemIcon_ytl5t_608",oTe="_ChatMenuText_ytl5t_622",lTe="_ChatMessageCommentsButton_ytl5t_634",cTe="_ChatMenuButton_ytl5t_650",at={ChatRoot:aje,ChatThemeDark:oje,ChatRootMini:lje,ChatContainer:cje,ChatSidebar:uje,ChatSidebarRight:dje,ChatSidebarMini:hje,ChatSidebarDialog:fje,ChatSidebarResizer:pje,ChatSidebarDialogActive:mje,ChatSidebarDialogTooltip:gje,ChatMain:vje,ChatMainActive:yje,ChatMainInner:xje,ChatMessages:bje,ChatDate:_je,ChatMessagesInner:wje,ChatBtnArrow:Cje,ChatBtnArrowActive:Sje,ChatMessageWrapper:jje,ChatMessageWrapperMe:Tje,ChatMessage:Eje,ChatMessageBlock:Nje,ChatMessageBlockMe:kje,ChatMessageMe:Aje,ChatMessageLoading:Dje,ChatMessageMore:Pje,ChatMessageOther:Ije,ChatMessageText:Mje,ChatMessageUser:Oje,ChatMessageUserName:Rje,ChatMessageBlockPhotos:Lje,ChatMessageBlockFilesText:Bje,ChatMessageTextLink:Fje,ChatMessageBlockFiles:$je,ChatMessageTimeBg:Uje,ChatMessageBlockAudio:Vje,ChatMessageBlockVideo:zje,ChatMessageTime:Hje,ChatBottom:qje,ChatBottomWrapper:Wje,ChatTextarea:Gje,ChatMessageMoreActive:Yje,ChatMessageMoreMe:Xje,ChatMessageMoreOther:Kje,ChatMessageButton:Qje,ChatBlinkCircle:Zje,blink:Jje,ChatFileDropZoneOverlay:eTe,ChatMenuBtn:tTe,ChatBtnBlue:nTe,ChatMenuRoot:sTe,ChatMenuItem:rTe,ChatMenuItemBtn:iTe,ChatMenuItemIcon:aTe,ChatMenuText:oTe,ChatMessageCommentsButton:lTe,ChatMenuButton:cTe},VH=[{id:1,title:"Есть акции и скидки?",text:"Здравствуйте, есть акции и скидки?"},{id:2,title:"Какие есть варианты отделки?",text:"Здравствуйте, какие есть варианты отделки?"},{id:3,title:"Хочу записаться на видеоконсультацию",text:"Здравствуйте, хочу записаться на видеоконсультацию",icon:"iconAdd"},{id:4,title:"Когда могу посмотреть?",text:"Здравствуйте, когда могу посмотреть?"},{id:5,title:"Подходит под ипотеку?",text:"Здравствуйте, подходит под ипотеку?"}],uTe=t=>{const{refactDialog:e}=t,[n,s]=v.useState([]),[i,a]=v.useState(!1),o=v.useCallback(async(g,m)=>{try{[...g].forEach(y=>{y.blocks.forEach(x=>{const b=x.messages.find(w=>w.id===m.id);b&&(b.is_pin=1)})})}catch(_){console.log(_)}},[]),l=v.useCallback(async(g,m)=>{try{[...g].forEach(y=>{y.blocks.forEach(x=>{const b=x.messages.find(w=>w.id===m.id);b&&(b.is_pin=0)})})}catch(_){console.log(_)}},[]),c=v.useCallback(async(g,m)=>{try{await Me("/api/dialogs/message/pin/create",{dialog_id:g,message_id:m})}catch(_){console.log(_)}},[]),u=v.useCallback(async(g,m)=>{try{await Me("/api/dialogs/message/pin/delete",{dialog_id:g,message_id:m})}catch(_){console.log(_)}},[]),d=v.useCallback(async g=>{try{const{data:{result:m}}=await Me("/api/dialogs/message/pin/all",{dialog_id:g});s(e(m))}catch(m){console.log(m)}},[]),h=v.useCallback(()=>{a(!0)},[]),f=v.useCallback(()=>{a(!1)},[]),p=n.flatMap(g=>g.blocks.flatMap(m=>m.messages.map(_=>({..._}))));return{pinMessageCreate:c,pinMessageDelete:u,pinMessageGetAll:d,pinMessages:n,pinMessagesList:p,pinMessagesLength:p.length,hasPinMessage:p.length>0,isPinMessagePanelOpen:i,pinMessagePanelOpen:h,pinMessagePanelClose:f,setPinMessages:s,pinMessageCreateFake:o,pinMessageDeleteFake:l}},FO={isOpen:!1,dialog_id:null,message_id:null,data:[]},dTe=t=>{const{refactDialog:e}=t,[n,s]=v.useState(FO),[i,a]=v.useState(!1),o=v.useCallback(async(h,f,p)=>{try{await Me("/api/messages/message/comment/create",{dialog_id:h,message_id:f,text:p})}catch(g){console.log(g)}},[]),l=v.useCallback(async(h,f,p)=>{await Me("/api/messages/message/comment/delete",{id:h,dialog_id:f,message_id:p})},[]),c=v.useCallback(async(h,f)=>{try{a(!0);const{data:{result:p}}=await Me("/api/messages/message/comment/all",{dialog_id:h,message_id:f});s(g=>({...g,data:e(p)})),a(!1)}catch(p){console.log(p)}},[]),u=v.useCallback(async(h,f)=>{s({isOpen:!0,dialog_id:h,message_id:f,data:[]}),c(h,f)},[]),d=v.useCallback(()=>{s(FO)},[]);return{messageCommentCreate:o,messageCommentDelete:l,messageCommentGetAll:c,messageComments:n,messageCommentsIsOpen:n.isOpen,messagesLength:n.data.flatMap(h=>h.blocks.flatMap(f=>f.messages)).length,messageCommentPanelOpen:u,messageCommentPanelClose:d,isLoadingComments:i}};var zH={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(hn,function(){var n="minute",s=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(a,o,l){var c=o.prototype;l.utc=function(m){var _={date:m,utc:!0,args:arguments};return new o(_)},c.utc=function(m){var _=l(this.toDate(),{locale:this.$L,utc:!0});return m?_.add(this.utcOffset(),n):_},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),u.call(this,m)};var d=c.init;c.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else d.call(this)};var h=c.utcOffset;c.utcOffset=function(m,_){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?h.call(this):this.$offset;if(typeof m=="string"&&(m=function(C){C===void 0&&(C="");var j=C.match(s);if(!j)return null;var E=(""+j[0]).match(i)||["-",0,0],T=E[0],N=60*+E[1]+ +E[2];return N===0?0:T==="+"?N:-N}(m),m===null))return this;var x=Math.abs(m)<=16?60*m:m,b=this;if(_)return b.$offset=x,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(x+w,n)).$offset=x,b.$x.$localOffset=w}else b=this.utc();return b};var f=c.format;c.format=function(m){var _=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,_)},c.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var p=c.toDate;c.toDate=function(m){return m==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var g=c.diff;c.diff=function(m,_,y){if(m&&this.$u===m.$u)return g.call(this,m,_,y);var x=this.local(),b=l(m).local();return g.call(x,b,_,y)}}})})(zH);var hTe=zH.exports;const fTe=In(hTe),HH=t=>{if(t.length!==0)return t[t.length-1]},pTe=t=>{if(t.length!==0)return t[0]},Kw=(...t)=>{const e=t.flat().filter(s=>s),n=new Set(e);return Array.from(n)},Ef=(...t)=>t.flat().filter(n=>n).reduce((n,s)=>n+s,0);ct.extend(fTe);const mTe=()=>{const t=ue(Ot);return{refactDialog:(a=[])=>a.map(l=>{const c=[];let u=null;return l.messages.forEach(d=>{u&&u.user.id===d.user.id?u.messages.push({...d,user_visible:!1}):(u={user:d.user,messages:[{...d,user_visible:!0}]},c.push(u))}),{date:l.date,blocks:c}}),getDialogs:async()=>{const{data:{result:a}}=await Ue("/api/dialogs");return a.map(o=>({...o,dialog_type:o.type}))},dialogRemoveMessageIds:(a=[],o=[])=>a.map(l=>({...l,blocks:l.blocks.map(c=>({...c,messages:c.messages.filter(u=>!o.includes(u.id)).map((u,d)=>d===0?{...u,user_visible:!0}:u)})).filter(c=>c.messages.length)})).filter(l=>l.blocks.length),dialogAddMessage:(a=[],o)=>{const l={dialog_id:o.get("dialog_id"),text:o.get("text")||"",audio:o.get("audio"),video:o.get("video"),photos:o.get("photos")},c=ct().format("YYYY-MM-DD"),u=ct().utc().format("YYYY-MM-DDTHH:mm:ss.000000[Z]"),d=l.audio?[{id:hc(),dialog_id:l.dialog_id,message_id:hc(),test_url:URL.createObjectURL(l.audio),blob:l.audio,type:"audio",mime_type:"audio/ogg",created_at:c,updated_at:c,preview:null,duration:null}]:[],h=l.video?[{id:hc(),dialog_id:l.dialog_id,message_id:hc(),test_url:URL.createObjectURL(l.video),type:"video",mime_type:"video/mp4",created_at:c,updated_at:c,preview:null,duration:null}]:[],f={id:t.id,image:t.image,name:t.name,surname:t.surname,role:t.role.id,last_seen:t.last_seen,organization_id:t.organization_id},p={id:hc(),dialog_id:l.dialog_id,user_id:t.id,text:l.text,photos:l.photos?JSON.parse(l.photos).map(_=>URL.createObjectURL(o.get(_.image))):null,created_at:u,updated_at:u,is_pin:0,user:f,reactions:[],reads:[],comments:[],files:[...d,...h],loading:!0};let g=a;const m=g.find(_=>_.date===c);return m?g=g.map(_=>_.date===m.date?_.blocks.reduce((b,w,C)=>w.user.id===f.id?C:b,-1)===_.blocks.length-1?{..._,blocks:_.blocks.map((b,w)=>w===_.blocks.length-1&&b.user.id===f.id?{...b,messages:[...b.messages,p]}:b)}:{..._,blocks:[..._.blocks,{user:f,messages:[p]}]}:_):g.push({date:c,blocks:[{user:f,messages:[p]}]}),g=g.map(_=>({..._,blocks:_.blocks.map(y=>({...y,messages:y.messages.map((x,b)=>b===0?{...x,user_visible:!0}:x)}))})),g}}},gTe=t=>{var u,d;const{currentDialog:e,userInfo:n}=t,s=v.useRef(null),[i,a]=v.useState({}),o=e.organization&&((u=n==null?void 0:n.role)==null?void 0:u.id)!==pn.id,l=(e.dialog_type===xt.CHANNEL||e.type_group===xt.GROUP)&&((d=e.owner)==null?void 0:d.id)===n.id;return v.useEffect(()=>{var h;Ye(e)||(o?a({...e.organization,isOrganization:!0,myChannelOrGroup:l}):e.dialog_type===xt.CHAT&&((h=e.companions)!=null&&h.length)?a({...e.companions.find(f=>f.id!==n.id),isOrganization:!1,myChannelOrGroup:l}):a({name:e.name,image:e.image,isOrganization:!1,myChannelOrGroup:l}))},[JSON.stringify(e)]),{mainBlockBar:s,scrollMainBlock:()=>{setTimeout(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},1)},currentDialogUserInfo:i,isOrganization:o}};var qH="Expected a function",$O=NaN,vTe="[object Symbol]",yTe=/^\s+|\s+$/g,xTe=/^[-+]0x[0-9a-f]+$/i,bTe=/^0b[01]+$/i,_Te=/^0o[0-7]+$/i,wTe=parseInt,CTe=typeof hn=="object"&&hn&&hn.Object===Object&&hn,STe=typeof self=="object"&&self&&self.Object===Object&&self,jTe=CTe||STe||Function("return this")(),TTe=Object.prototype,ETe=TTe.toString,NTe=Math.max,kTe=Math.min,Aj=function(){return jTe.Date.now()};function ATe(t,e,n){var s,i,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(qH);e=UO(e)||0,q_(n)&&(d=!!n.leading,h="maxWait"in n,a=h?NTe(UO(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function p(j){var E=s,T=i;return s=i=void 0,u=j,o=t.apply(T,E),o}function g(j){return u=j,l=setTimeout(y,e),d?p(j):o}function m(j){var E=j-c,T=j-u,N=e-E;return h?kTe(N,a-T):N}function _(j){var E=j-c,T=j-u;return c===void 0||E>=e||E<0||h&&T>=a}function y(){var j=Aj();if(_(j))return x(j);l=setTimeout(y,m(j))}function x(j){return l=void 0,f&&s?p(j):(s=i=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,s=c=i=l=void 0}function w(){return l===void 0?o:x(Aj())}function C(){var j=Aj(),E=_(j);if(s=arguments,i=this,c=j,E){if(l===void 0)return g(c);if(h)return l=setTimeout(y,e),p(c)}return l===void 0&&(l=setTimeout(y,e)),o}return C.cancel=b,C.flush=w,C}function DTe(t,e,n){var s=!0,i=!0;if(typeof t!="function")throw new TypeError(qH);return q_(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),ATe(t,e,{leading:s,maxWait:e,trailing:i})}function q_(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function PTe(t){return!!t&&typeof t=="object"}function ITe(t){return typeof t=="symbol"||PTe(t)&&ETe.call(t)==vTe}function UO(t){if(typeof t=="number")return t;if(ITe(t))return $O;if(q_(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=q_(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(yTe,"");var n=bTe.test(t);return n||_Te.test(t)?wTe(t.slice(2),n?2:8):xTe.test(t)?$O:+t}var WH=DTe;const VO=In(WH),zO=(t,e,n)=>{const s=[...t];return e.forEach(i=>{const a=s.findIndex(o=>o.date===i.date);a!==-1?(n==="up"&&(s[a].messages=[...i.messages,...s[a].blocks.reduce((o,l)=>(o.push(...l.messages),o),[])]),n==="down"&&(s[a].messages=[...s[a].blocks.reduce((o,l)=>(o.push(...l.messages),o),[]),...i.messages])):(n==="up"&&s.unshift(i),n==="down"&&s.push(i))}),s.forEach((i,a)=>{i.messages||(s[a].messages=[...s[a].blocks.reduce((o,l)=>(o.push(...l.messages),o),[])]),i.blocks&&delete i.blocks}),s},MTe=t=>{const{chatPinMessages:e,dialogsActions:n,setIsLoadingDialog:s,cachedDialog:i,setCachedDialog:a,currentDialog:o,mainBlockBar:l,setDialogs:c}=t,[u,d]=v.useState([]),[h,f]=v.useState(!1),p=v.useRef({top:0,height:0}),g=async x=>{const b=await _(x,null);await m({id:x,...b}),s(!1)},m=async x=>{const b=x.no_refact?x.result:n.refactDialog(x.result);d(b),a(w=>({...w,[x.id]:{...x,result:b}})),await e.pinMessageGetAll(x.id)},_=async(x,b)=>{const{data:w}=await Me(`/api/dialogs/${x}`,{limit:100,page:b});return y(x,w.unread_count),{...w,id:x}};v.useEffect(()=>{const x=l.current;if(!x)return;const b=VO(async()=>{try{if(!(x.scrollTop<=150)||h)return;const j=i[o.id];if(!j.has_newer)return;f(!0);const E=await _(j.id,j.current_page-1);p.current={top:x.scrollTop,height:x.scrollHeight};const T=n.refactDialog(zO(j.result,E.result,"up"));d(T),a(N=>({...N,[E.id]:{...E,result:T}})),setTimeout(()=>{C(),f(!1)},10)}catch(j){console.log(j)}},200),w=VO(async()=>{try{const{scrollHeight:j,scrollTop:E,clientHeight:T}=x;if(!(j-E<=T+100)||h)return;const P=i[o.id];if(!P||P.unread_count===0)return;console.log("down"),f(!0),p.current={top:x.scrollTop,height:x.scrollHeight};const I=await _(P.id,P.current_page+1),B=n.refactDialog(zO(P.result,I.result,"down"));d(B),f(!1),a(U=>({...U,[I.id]:{...I,result:B}}))}catch(j){console.log(j)}}),C=()=>{const j=l.current,E=j.scrollHeight-p.current.height;j.scrollTop=E+p.current.top};return x&&(x.addEventListener("scroll",b),x.addEventListener("scroll",w)),()=>{x&&(x.removeEventListener("scroll",b),x.removeEventListener("scroll",w))}},[l.current,h,JSON.stringify(o),JSON.stringify(i)]);const y=(x,b)=>{c(w=>w.map(C=>C.id===x?{...C,un_read_messages_count:b}:C))};return{getDialog:g,messages:u,setMessages:d}},OTe=()=>{const[t,e]=v.useState([]),[n,s]=v.useState(!1),[i,a]=v.useState(!1),o=v.useCallback(async()=>{try{s(!0);const{data:{result:u}}=await Me("/api/dialogs/user-blocks/all");e(u),s(!1)}catch(u){console.log(u)}},[]),l=v.useCallback(async u=>{try{await Me("/api/dialogs/user-blocks/create",{user_id:u})}catch{}},[]),c=v.useCallback(async u=>{try{await Me("/api/dialogs/user-blocks/delete",{user_id:u})}catch{}},[]);return{blockUserCreate:l,blockUserDelete:c,blockUsersList:t,blockUsersGetAll:o,isLoading:n,isLoadingAction:i,setIsLoadingAction:a}},RTe=()=>{const[t,e]=v.useState(localStorage.getItem("chat-theme")||"light");return{theme:t,toggleTheme:()=>{const s=t==="light"?"dark":"light";e(s),localStorage.setItem("chat-theme",s)}}},LTe=(t,e,n)=>{var Le;const[s,i]=v.useState({}),[a,o]=v.useState({}),l=ue(Ot),[c,u]=v.useState([]),[d,h]=v.useState({}),[f,p]=v.useState(!0),[g,m]=v.useState([]),[_,y]=v.useState(n&&((Le=VH.find(tt=>tt.id===+n))==null?void 0:Le.text)||""),[x,b]=v.useState(!0),w=v.useRef(null),C=v.useRef(null),j=v.useRef(null),E=v.useRef(null),[T,N]=v.useState(!1),[P,I]=v.useState(!1),[B,U]=v.useState(!1),[z,G]=v.useState(!1),[V,J]=v.useState(!1),[Q,Y]=v.useState(!1),[oe,he]=v.useState(!1),[me,Oe]=v.useState(!1),[xe,Pe]=v.useState(!!e),qe=s.building?K9(s.building):null,[Ie,Ve]=_r(),ot=mTe(),fe=uTe({refactDialog:ot.refactDialog}),$=dTe({refactDialog:ot.refactDialog}),X=OTe(),W=RTe(),ce=v.useRef(null),ne=gTe({currentDialog:s,userInfo:l}),ee=MTe({currentDialog:s,chatPinMessages:fe,dialogsActions:ot,setIsLoadingDialog:b,cachedDialog:d,setCachedDialog:h,mainBlockBar:ne.mainBlockBar,setDialogs:u}),ge=v.useCallback(es(async()=>{const tt=await ot.getDialogs();u(tt)},1200),[]),q=v.useCallback(es(async({dialog_id:tt})=>{const lt=await ot.getDialogs();u(lt),i(H=>{const M=lt.find(R=>R.id===H.id);return M||H});const it=ne.mainBlockBar.current,Pt=it&&it.scrollTop+it.clientHeight>=it.scrollHeight;if(lt.find(H=>H.id===tt))await ee.getDialog(tt);else{const H=new URLSearchParams(Ie);H.delete("dialog"),Ve(H)}Pt&&(it.scrollTop=it.scrollHeight)},1200),[s]),re=async()=>{const tt=await ot.getDialogs();u(tt),s.id&&i(tt.find(it=>it.id===s.id)||{});const lt=a==null?void 0:a.id;lt&&o(tt.find(it=>it.id===lt)||{})};v.useEffect(()=>{if(Ye(l))return;(async()=>{p(!0);const lt=await ot.getDialogs();u(lt),p(!1);const it=window.Echo.join(`user-dialogs.${l.id}`);it.stopListening("UserDialogsEvent"),it.listen("UserDialogsEvent",Pt=>{ge()})})()},[l]),v.useEffect(()=>{if(Ye(l))return;if(!t){b(!1),fe.setPinMessages([]),i({}),h({});return}tt();async function tt(){b(!0);const it=(await ot.getDialogs()).find(Pt=>Pt.id===t);it&&(i(it),h({}),ie(t),await ee.getDialog(t)),b(!1)}},[t,l]),v.useEffect(()=>{if(n&&_){const tt=new URLSearchParams(Ie);tt.delete("tag"),Ve(tt)}},[n]),v.useEffect(()=>{const tt=async()=>{let it=(await ot.getDialogs()).find(Pt=>Pt.id===t);it&&(i(it),h({}),ie(it.id),ee.getDialog(it.id),Ve({dialog:it.id}))};e&&t&&(Pe(!!e),tt())},[e,t]);const ie=tt=>{ce.current&&window.Echo.leave(ce.current.name),ce.current=window.Echo.join(`dialog.${tt}`),ce.current.listen("DialogEvent",()=>{q({dialog_id:tt})})},Ee=async(tt=null)=>{var lt,it,Pt,H;if(me){const M={text:me.text||"",id:me.id,dialog_id:me.dialog_id,photos:g.filter(te=>te.type==="image")},R=new FormData;R.append("text",M.text),R.append("id",M.id),R.append("dialog_id",M.dialog_id),(H=M.photos)!=null&&H.length&&(M.photos=ts(M.photos),ss(M.photos,R),M.photos=ns(M.photos),R.append("photos",JSON.stringify(M.photos))),await Me("/api/messages/update-message",R,{"Content-Type":"multipart/form-data","Accept-Encodin":"gzip, deflate, br, zstd",Accept:"application/json"}),Oe(!1),m([]),E.current.focus()}else{const M={dialog_id:s.id,text:_||"",photos:g.filter(te=>te.type==="image"),video:g.filter(te=>te.type==="video")},R=new FormData;if(R.append("dialog_id",M.dialog_id),R.append("text",M.text),(lt=M.photos)!=null&&lt.length&&(M.photos=ts(M.photos),ss(M.photos,R),M.photos=ns(M.photos),R.append("photos",JSON.stringify(M.photos))),(it=M.video)!=null&&it.length&&R.append("video",M.video[0].file),tt){let te=new File([tt],"audio.ogg",{type:"audio/ogg"});R.append("audio",te)}y(""),m([]),(Pt=E.current)==null||Pt.focus(),ee.setMessages(te=>ot.dialogAddMessage(te,R)),setTimeout(()=>{ne.scrollMainBlock()},100),await Me("/api/messages/new-message",R,{"Content-Type":"multipart/form-data","Accept-Encodin":"gzip, deflate, br, zstd",Accept:"application/json"})}};return{dialogs:c,currentDialog:s,setCurrentDialog:i,connectToChat:ie,setIsLoadingDialog:b,isLoadingDialog:x,sendMessage:Ee,...ne,messageText:_,setMessageText:y,textareaRef:E,chatBuildingInfoRef:C,chatBottomRef:j,chatRootRef:w,sendVoiceRecorder:tt=>{Ee(tt)},setDialogs:u,deleteMessages:(tt=[],lt=null,it=!1)=>{lt!==null&&N({ids:tt,dialog_id:lt,all:it})},...ot,...ee,isEdit:me,setIsEdit:Oe,isVoiceRecording:P,setIsVoiceRecording:I,filesUpload:g,setFilesUpload:m,videoCallActive:xe,setVideoCallActive:Pe,dialogBuilding:qe,isOpenSmileMenu:z,setIsOpenSmileMenu:G,isOpenMenu:B,setIsOpenMenu:U,isVisibleBtnArrow:V,setIsVisibleBtnArrow:J,deleteMessagesModal:T,setDeleteMessagesModal:N,userInfo:l,isLoadingDialogs:f,forwardMessage:(tt,lt)=>{console.log(tt,lt)},forwardMessageId:Q,setForwardMessageId:Y,createEventModal:oe,setCreateEventModal:he,chatPinMessages:fe,currentDialogSettings:a,setCurrentDialogSettings:o,updateDialogsAndDialogSettings:re,messageCommentsOptions:$,cachedDialog:d,setCachedDialog:h,blockUserOptins:X,themeOptions:W}};var BTe=function(t){return function(e,n){var s=v.useRef(!1);t(function(){return function(){s.current=!1}},[]),t(function(){if(!s.current)s.current=!0;else return e()},n)}};const FTe=BTe(v.useEffect);function GH(t){var e=v.useRef(t);return e.current=t,e}var $Te=function(t){var e=GH(t);v.useEffect(function(){return function(){e.current()}},[])};function UTe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var YH=UTe,VTe=typeof hn=="object"&&hn&&hn.Object===Object&&hn,zTe=VTe,HTe=zTe,qTe=typeof self=="object"&&self&&self.Object===Object&&self,WTe=HTe||qTe||Function("return this")(),XH=WTe,GTe=XH,YTe=function(){return GTe.Date.now()},XTe=YTe,KTe=/\s/;function QTe(t){for(var e=t.length;e--&&KTe.test(t.charAt(e)););return e}var ZTe=QTe,JTe=ZTe,eEe=/^\s+/;function tEe(t){return t&&t.slice(0,JTe(t)+1).replace(eEe,"")}var nEe=tEe,sEe=XH,rEe=sEe.Symbol,KH=rEe,HO=KH,QH=Object.prototype,iEe=QH.hasOwnProperty,aEe=QH.toString,Fg=HO?HO.toStringTag:void 0;function oEe(t){var e=iEe.call(t,Fg),n=t[Fg];try{t[Fg]=void 0;var s=!0}catch{}var i=aEe.call(t);return s&&(e?t[Fg]=n:delete t[Fg]),i}var lEe=oEe,cEe=Object.prototype,uEe=cEe.toString;function dEe(t){return uEe.call(t)}var hEe=dEe,qO=KH,fEe=lEe,pEe=hEe,mEe="[object Null]",gEe="[object Undefined]",WO=qO?qO.toStringTag:void 0;function vEe(t){return t==null?t===void 0?gEe:mEe:WO&&WO in Object(t)?fEe(t):pEe(t)}var yEe=vEe;function xEe(t){return t!=null&&typeof t=="object"}var bEe=xEe,_Ee=yEe,wEe=bEe,CEe="[object Symbol]";function SEe(t){return typeof t=="symbol"||wEe(t)&&_Ee(t)==CEe}var jEe=SEe,TEe=nEe,GO=YH,EEe=jEe,YO=NaN,NEe=/^[-+]0x[0-9a-f]+$/i,kEe=/^0b[01]+$/i,AEe=/^0o[0-7]+$/i,DEe=parseInt;function PEe(t){if(typeof t=="number")return t;if(EEe(t))return YO;if(GO(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=GO(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=TEe(t);var n=kEe.test(t);return n||AEe.test(t)?DEe(t.slice(2),n?2:8):NEe.test(t)?YO:+t}var IEe=PEe,MEe=YH,Dj=XTe,XO=IEe,OEe="Expected a function",REe=Math.max,LEe=Math.min;function BEe(t,e,n){var s,i,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(OEe);e=XO(e)||0,MEe(n)&&(d=!!n.leading,h="maxWait"in n,a=h?REe(XO(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function p(j){var E=s,T=i;return s=i=void 0,u=j,o=t.apply(T,E),o}function g(j){return u=j,l=setTimeout(y,e),d?p(j):o}function m(j){var E=j-c,T=j-u,N=e-E;return h?LEe(N,a-T):N}function _(j){var E=j-c,T=j-u;return c===void 0||E>=e||E<0||h&&T>=a}function y(){var j=Dj();if(_(j))return x(j);l=setTimeout(y,m(j))}function x(j){return l=void 0,f&&s?p(j):(s=i=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,s=c=i=l=void 0}function w(){return l===void 0?o:x(Dj())}function C(){var j=Dj(),E=_(j);if(s=arguments,i=this,c=j,E){if(l===void 0)return g(c);if(h)return clearTimeout(l),l=setTimeout(y,e),p(c)}return l===void 0&&(l=setTimeout(y,e)),o}return C.cancel=b,C.flush=w,C}var FEe=BEe;const $Ee=In(FEe);function UEe(){var t=(typeof ir>"u"?"undefined":typeof ir)=="object"&&ir&&ir.Object===Object&&ir,e=typeof self=="object"&&self&&self.Object===Object&&self;return t||e}UEe()||(ir.Date=Date);function VEe(t,e){var n,s=GH(t),i=(n=e==null?void 0:e.wait)!==null&&n!==void 0?n:1e3,a=v.useMemo(function(){return $Ee(function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return s.current.apply(s,RN([],U_(o),!1))},i,e)},[]);return $Te(function(){a.cancel()}),{run:a,cancel:a.cancel,flush:a.flush}}function Qw(t,e,n){var s=U_(v.useState({}),2),i=s[0],a=s[1],o=VEe(function(){a({})},n).run;v.useEffect(function(){return o()},e),FTe(t,[i])}const zEe=()=>{const[t,e]=v.useState(!1),[n,s]=v.useState(""),[i,a]=v.useState(!1),[o,l]=v.useState([]);Qw(()=>{d()},[n],{wait:400});const c=()=>{e(!1),s("")},u=()=>{e(!0)},d=async h=>{a(!0),await new Promise(f=>setTimeout(f,500)),a(!1)};return{isSearchPanelOpen:t,setIsSearchPanelOpen:e,searchValue:n,setSearchValue:s,closeSearchPanel:c,openSearchPanel:u,isLoading:i,data:o}},HEe=(t=!1)=>{const n={start_width:+localStorage.getItem("chat-sidebar-width")||350,min_width:200,max_width:350,mini_width:95},s=ue(rt),[i,a]=v.useState(t?n.mini_width:n.start_width),[o,l]=v.useState(!1),c=v.useRef(null),u=v.useRef(0),d=v.useRef(t?n.mini_width:n.start_width),h=v.useCallback(g=>{l(!0),u.current=g.clientX,d.current=i,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[i]),f=v.useCallback(()=>{l(!1),document.body.style.cursor="",document.body.style.userSelect=""},[]),p=v.useCallback(g=>{if(o){const m=g.clientX-u.current,_=d.current+m,y=Math.min(Math.max(_,n.min_width),n.max_width);localStorage.setItem("chat-sidebar-width",y),a(y)}},[o]);return v.useEffect(()=>(window.addEventListener("mousemove",p),window.addEventListener("mouseup",f),()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",f)}),[p,f]),{sidebarWidth:i,sidebarRef:c,startResizing:h,sidebarMini:i<=n.min_width&&s,sidebarOptions:n}},qEe=t=>{const{mainBlockBar:e,filesUpload:n,setFilesUpload:s,setIsVisibleBtnArrow:i,isLoadingDialog:a,currentDialog:o,messages:l}=t,[c,u]=v.useState(!1),[d,h]=v.useState(null),f=w=>{d&&d!==w&&(d.pause(),d.currentTime=0),h(w)},p=()=>{d&&(d.pause(),d.currentTime=0,h(null))},g=w=>{const C=[...n,...w],j=cr(C.filter(N=>(N.type||N.file.type).startsWith("image"))).map(N=>({...N,type:"image"})),E=C.filter(N=>N.type.startsWith("video")).map(N=>({file:N.file||N,type:"video"})),T=[...j,...E];T.length>10?u(T.length):s(T)},m=w=>{const C=n.filter(j=>j.id!==w).map((j,E)=>({...j,id:E+1}));s(C)},{getRootProps:_,getInputProps:y,isDragActive:x,open:b}=Fy({onDrop:g,multiple:!0,noClick:!0,accept:{"image/jpeg":[".jpeg",".png",".jpg"],"video/mp4":[".mp4"],"video/webm":[".webm"],"video/quicktime":[".mov"]}});return v.useEffect(()=>{const w=e.current,C=j=>{const E=j.target,T=E.scrollTop,N=E.scrollHeight,P=E.clientHeight;N-P-T>200?i(!0):i(!1)};return w&&w.addEventListener("scroll",C),()=>{w&&w.removeEventListener("scroll",C)}},[]),v.useEffect(()=>{if(a||!e.current)return;if(o.un_read_messages_count>10){const C=e.current.scrollHeight/2-e.current.clientHeight/2;e.current.scrollTop=C}else e.current.scrollTop=e.current.scrollHeight},[e.current,a]),{handlePlayAudio:f,handleStopAudio:p,addFile:g,deleteFile:m,filesLimitModal:c,setFilesLimitModal:u,getRootProps:_,getInputProps:y,isDragActive:x,uploadFileOpen:b}},ZH=()=>{const t=v.useCallback(async(i,a,o,l,c)=>{try{const u={id:hc(),dialog_id:l.dialog_id,message_id:l.id,user_id:c.id,value:o,loading:!0,user:{id:c.id,image:c.image,name:c.name,surname:c.surname,role:c.role.id,last_seen:c.last_seen,organization_id:c.organization_id}};[...i].forEach(h=>{h.blocks.forEach(f=>{const p=f.messages.find(g=>g.id===l.id);p&&(p.reactions.find(m=>m.user_id===c.id)&&(p.reactions=p.reactions.filter(m=>m.user_id!==c.id)),p.reactions.push(u))})}),a(h=>({...h,[l.dialog_id]:{...h[l.dialog_id]}}))}catch(u){console.log(u)}},[]),e=v.useCallback(async(i,a,o,l)=>{try{[...i].forEach(u=>{u.blocks.forEach(d=>{const h=d.messages.find(f=>f.id===o.id);h&&h.reactions.find(p=>p.user_id===l.id)&&(h.reactions=h.reactions.filter(p=>p.user_id!==l.id))})}),a(u=>({...u,[o.dialog_id]:{...u[o.dialog_id]}}))}catch{}},[]),n=v.useCallback(async(i,a,o)=>{if(o)try{await Me("/api/messages/message/reaction/create",{dialog_id:i,message_id:a,value:o})}catch{}},[]),s=v.useCallback(async(i,a,o)=>{try{await Me("/api/messages/message/reaction/delete",{id:i,dialog_id:a,message_id:o})}catch{}},[]);return{chatReactionCreate:n,chatReactionDelete:s,chatReactionCreateFake:t,chatReactionDeleteFake:e}};var WEe=typeof ir=="object"&&ir&&ir.Object===Object&&ir,GEe=typeof self=="object"&&self&&self.Object===Object&&self,JH=WEe||GEe||Function("return this")(),W_=JH.Symbol,eq=Object.prototype,YEe=eq.hasOwnProperty,XEe=eq.toString,$g=W_?W_.toStringTag:void 0;function KEe(t){var e=YEe.call(t,$g),n=t[$g];try{t[$g]=void 0;var s=!0}catch{}var i=XEe.call(t);return s&&(e?t[$g]=n:delete t[$g]),i}var QEe=Object.prototype,ZEe=QEe.toString;function JEe(t){return ZEe.call(t)}var eNe="[object Null]",tNe="[object Undefined]",KO=W_?W_.toStringTag:void 0;function nNe(t){return t==null?t===void 0?tNe:eNe:KO&&KO in Object(t)?KEe(t):JEe(t)}function sNe(t){return t!=null&&typeof t=="object"}var rNe="[object Symbol]";function iNe(t){return typeof t=="symbol"||sNe(t)&&nNe(t)==rNe}var aNe=/\s/;function oNe(t){for(var e=t.length;e--&&aNe.test(t.charAt(e)););return e}var lNe=/^\s+/;function cNe(t){return t&&t.slice(0,oNe(t)+1).replace(lNe,"")}function G_(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var QO=NaN,uNe=/^[-+]0x[0-9a-f]+$/i,dNe=/^0b[01]+$/i,hNe=/^0o[0-7]+$/i,fNe=parseInt;function ZO(t){if(typeof t=="number")return t;if(iNe(t))return QO;if(G_(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=G_(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=cNe(t);var n=dNe.test(t);return n||hNe.test(t)?fNe(t.slice(2),n?2:8):uNe.test(t)?QO:+t}var Pj=function(){return JH.Date.now()},pNe="Expected a function",mNe=Math.max,gNe=Math.min;function J1(t,e,n){var s,i,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(pNe);e=ZO(e)||0,G_(n)&&(d=!!n.leading,h="maxWait"in n,a=h?mNe(ZO(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function p(j){var E=s,T=i;return s=i=void 0,u=j,o=t.apply(T,E),o}function g(j){return u=j,l=setTimeout(y,e),d?p(j):o}function m(j){var E=j-c,T=j-u,N=e-E;return h?gNe(N,a-T):N}function _(j){var E=j-c,T=j-u;return c===void 0||E>=e||E<0||h&&T>=a}function y(){var j=Pj();if(_(j))return x(j);l=setTimeout(y,m(j))}function x(j){return l=void 0,f&&s?p(j):(s=i=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,s=c=i=l=void 0}function w(){return l===void 0?o:x(Pj())}function C(){var j=Pj(),E=_(j);if(s=arguments,i=this,c=j,E){if(l===void 0)return g(c);if(h)return clearTimeout(l),l=setTimeout(y,e),p(c)}return l===void 0&&(l=setTimeout(y,e)),o}return C.cancel=b,C.flush=w,C}var vNe="Expected a function";function yNe(t,e,n){var s=!0,i=!0;if(typeof t!="function")throw new TypeError(vNe);return G_(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),J1(t,e,{leading:s,maxWait:e,trailing:i})}var np=function(){return np=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},np.apply(this,arguments)};function tq(t){return!t||!t.ownerDocument||!t.ownerDocument.defaultView?window:t.ownerDocument.defaultView}function nq(t){return!t||!t.ownerDocument?document:t.ownerDocument}var sq=function(t){var e={},n=Array.prototype.reduce.call(t,function(s,i){var a=i.name.match(/data-simplebar-(.+)/);if(a){var o=a[1].replace(/\W+(.)/g,function(l,c){return c.toUpperCase()});switch(i.value){case"true":s[o]=!0;break;case"false":s[o]=!1;break;case void 0:s[o]=!0;break;default:s[o]=i.value}}return s},e);return n};function rq(t,e){var n;t&&(n=t.classList).add.apply(n,e.split(" "))}function iq(t,e){t&&e.split(" ").forEach(function(n){t.classList.remove(n)})}function aq(t){return".".concat(t.split(" ").join("."))}var MA=!!(typeof window<"u"&&window.document&&window.document.createElement),xNe=Object.freeze({__proto__:null,addClasses:rq,canUseDOM:MA,classNamesToQuery:aq,getElementDocument:nq,getElementWindow:tq,getOptions:sq,removeClasses:iq}),Rf=null,JO=null;MA&&window.addEventListener("resize",function(){JO!==window.devicePixelRatio&&(JO=window.devicePixelRatio,Rf=null)});function e8(){if(Rf===null){if(typeof document>"u")return Rf=0,Rf;var t=document.body,e=document.createElement("div");e.classList.add("simplebar-hide-scrollbar"),t.appendChild(e);var n=e.getBoundingClientRect().right;t.removeChild(e),Rf=n}return Rf}var ru=tq,Ij=nq,bNe=sq,iu=rq,au=iq,ki=aq,Ug=function(){function t(e,n){n===void 0&&(n={});var s=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.isDragging=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var i=ru(s.el);s.scrollXTicking||(i.requestAnimationFrame(s.scrollX),s.scrollXTicking=!0),s.scrollYTicking||(i.requestAnimationFrame(s.scrollY),s.scrollYTicking=!0),s.isScrolling||(s.isScrolling=!0,iu(s.el,s.classNames.scrolling)),s.showScrollbar("x"),s.showScrollbar("y"),s.onStopScrolling()},this.scrollX=function(){s.axis.x.isOverflowing&&s.positionScrollbar("x"),s.scrollXTicking=!1},this.scrollY=function(){s.axis.y.isOverflowing&&s.positionScrollbar("y"),s.scrollYTicking=!1},this._onStopScrolling=function(){au(s.el,s.classNames.scrolling),s.options.autoHide&&(s.hideScrollbar("x"),s.hideScrollbar("y")),s.isScrolling=!1},this.onMouseEnter=function(){s.isMouseEntering||(iu(s.el,s.classNames.mouseEntered),s.showScrollbar("x"),s.showScrollbar("y"),s.isMouseEntering=!0),s.onMouseEntered()},this._onMouseEntered=function(){au(s.el,s.classNames.mouseEntered),s.options.autoHide&&(s.hideScrollbar("x"),s.hideScrollbar("y")),s.isMouseEntering=!1},this._onMouseMove=function(i){s.mouseX=i.clientX,s.mouseY=i.clientY,(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&s.onMouseMoveForAxis("x"),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&s.onMouseMoveForAxis("y")},this.onMouseLeave=function(){s.onMouseMove.cancel(),(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&s.onMouseLeaveForAxis("x"),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&s.onMouseLeaveForAxis("y"),s.mouseX=-1,s.mouseY=-1},this._onWindowResize=function(){s.scrollbarWidth=s.getScrollbarWidth(),s.hideNativeScrollbar()},this.onPointerEvent=function(i){if(!(!s.axis.x.track.el||!s.axis.y.track.el||!s.axis.x.scrollbar.el||!s.axis.y.scrollbar.el)){var a,o;s.axis.x.track.rect=s.axis.x.track.el.getBoundingClientRect(),s.axis.y.track.rect=s.axis.y.track.el.getBoundingClientRect(),(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&(a=s.isWithinBounds(s.axis.x.track.rect)),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&(o=s.isWithinBounds(s.axis.y.track.rect)),(a||o)&&(i.stopPropagation(),i.type==="pointerdown"&&i.pointerType!=="touch"&&(a&&(s.axis.x.scrollbar.rect=s.axis.x.scrollbar.el.getBoundingClientRect(),s.isWithinBounds(s.axis.x.scrollbar.rect)?s.onDragStart(i,"x"):s.onTrackClick(i,"x")),o&&(s.axis.y.scrollbar.rect=s.axis.y.scrollbar.el.getBoundingClientRect(),s.isWithinBounds(s.axis.y.scrollbar.rect)?s.onDragStart(i,"y"):s.onTrackClick(i,"y"))))}},this.drag=function(i){var a,o,l,c,u,d,h,f,p,g,m;if(!(!s.draggedAxis||!s.contentWrapperEl)){var _,y=s.axis[s.draggedAxis].track,x=(o=(a=y.rect)===null||a===void 0?void 0:a[s.axis[s.draggedAxis].sizeAttr])!==null&&o!==void 0?o:0,b=s.axis[s.draggedAxis].scrollbar,w=(c=(l=s.contentWrapperEl)===null||l===void 0?void 0:l[s.axis[s.draggedAxis].scrollSizeAttr])!==null&&c!==void 0?c:0,C=parseInt((d=(u=s.elStyles)===null||u===void 0?void 0:u[s.axis[s.draggedAxis].sizeAttr])!==null&&d!==void 0?d:"0px",10);i.preventDefault(),i.stopPropagation(),s.draggedAxis==="y"?_=i.pageY:_=i.pageX;var j=_-((f=(h=y.rect)===null||h===void 0?void 0:h[s.axis[s.draggedAxis].offsetAttr])!==null&&f!==void 0?f:0)-s.axis[s.draggedAxis].dragOffset;j=s.draggedAxis==="x"&&s.isRtl?((g=(p=y.rect)===null||p===void 0?void 0:p[s.axis[s.draggedAxis].sizeAttr])!==null&&g!==void 0?g:0)-b.size-j:j;var E=j/(x-b.size),T=E*(w-C);s.draggedAxis==="x"&&s.isRtl&&(T=!((m=t.getRtlHelpers())===null||m===void 0)&&m.isScrollingToNegative?-T:T),s.contentWrapperEl[s.axis[s.draggedAxis].scrollOffsetAttr]=T}},this.onEndDrag=function(i){s.isDragging=!1;var a=Ij(s.el),o=ru(s.el);i.preventDefault(),i.stopPropagation(),au(s.el,s.classNames.dragging),s.onStopScrolling(),a.removeEventListener("mousemove",s.drag,!0),a.removeEventListener("mouseup",s.onEndDrag,!0),s.removePreventClickId=o.setTimeout(function(){a.removeEventListener("click",s.preventClick,!0),a.removeEventListener("dblclick",s.preventClick,!0),s.removePreventClickId=null})},this.preventClick=function(i){i.preventDefault(),i.stopPropagation()},this.el=e,this.options=np(np({},t.defaultOptions),n),this.classNames=np(np({},t.defaultOptions.classNames),n.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},typeof this.el!="object"||!this.el.nodeName)throw new Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=yNe(this._onMouseMove,64),this.onWindowResize=J1(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=J1(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=J1(this._onMouseEntered,this.stopScrollDelay),this.init()}return t.getRtlHelpers=function(){if(t.rtlHelpers)return t.rtlHelpers;var e=document.createElement("div");e.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var n=e.firstElementChild,s=n==null?void 0:n.firstElementChild;if(!s)return null;document.body.appendChild(n),n.scrollLeft=0;var i=t.getOffset(n),a=t.getOffset(s);n.scrollLeft=-999;var o=t.getOffset(s);return document.body.removeChild(n),t.rtlHelpers={isScrollOriginAtZero:i.left!==a.left,isScrollingToNegative:a.left!==o.left},t.rtlHelpers},t.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display==="none"||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:e8()}catch{return e8()}},t.getOffset=function(e){var n=e.getBoundingClientRect(),s=Ij(e),i=ru(e);return{top:n.top+(i.pageYOffset||s.documentElement.scrollTop),left:n.left+(i.pageXOffset||s.documentElement.scrollLeft)}},t.prototype.init=function(){MA&&(this.initDOM(),this.rtlHelpers=t.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},t.prototype.initDOM=function(){var e,n;this.wrapperEl=this.el.querySelector(ki(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(ki(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(ki(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(ki(this.classNames.offset)),this.maskEl=this.el.querySelector(ki(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,ki(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(ki(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(ki(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(ki(this.classNames.track)).concat(ki(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(ki(this.classNames.track)).concat(ki(this.classNames.vertical))),this.axis.x.scrollbar.el=((e=this.axis.x.track.el)===null||e===void 0?void 0:e.querySelector(ki(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=((n=this.axis.y.track.el)===null||n===void 0?void 0:n.querySelector(ki(this.classNames.scrollbar)))||null,this.options.autoHide||(iu(this.axis.x.scrollbar.el,this.classNames.visible),iu(this.axis.y.scrollbar.el,this.classNames.visible))},t.prototype.initListeners=function(){var e=this,n,s=ru(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),(n=this.contentWrapperEl)===null||n===void 0||n.addEventListener("scroll",this.onScroll),s.addEventListener("resize",this.onWindowResize),!!this.contentEl){if(window.ResizeObserver){var i=!1,a=s.ResizeObserver||ResizeObserver;this.resizeObserver=new a(function(){i&&s.requestAnimationFrame(function(){e.recalculate()})}),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),s.requestAnimationFrame(function(){i=!0})}this.mutationObserver=new s.MutationObserver(function(){s.requestAnimationFrame(function(){e.recalculate()})}),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},t.prototype.recalculate=function(){if(!(!this.heightAutoObserverEl||!this.contentEl||!this.contentWrapperEl||!this.wrapperEl||!this.placeholderEl)){var e=ru(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl=this.elStyles.direction==="rtl";var n=this.contentEl.offsetWidth,s=this.heightAutoObserverEl.offsetHeight<=1,i=this.heightAutoObserverEl.offsetWidth<=1||n>0,a=this.contentWrapperEl.offsetWidth,o=this.elStyles.overflowX,l=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var c=this.contentEl.scrollHeight,u=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=s?"auto":"100%",this.placeholderEl.style.width=i?"".concat(n||u,"px"):"auto",this.placeholderEl.style.height="".concat(c,"px");var d=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=n!==0&&u>n,this.axis.y.isOverflowing=c>d,this.axis.x.isOverflowing=o==="hidden"?!1:this.axis.x.isOverflowing,this.axis.y.isOverflowing=l==="hidden"?!1:this.axis.y.isOverflowing,this.axis.x.forceVisible=this.options.forceVisible==="x"||this.options.forceVisible===!0,this.axis.y.forceVisible=this.options.forceVisible==="y"||this.options.forceVisible===!0,this.hideNativeScrollbar();var h=this.axis.x.isOverflowing?this.scrollbarWidth:0,f=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&u>a-f,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&c>d-h,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},t.prototype.getScrollbarSize=function(e){var n,s;if(e===void 0&&(e="y"),!this.axis[e].isOverflowing||!this.contentEl)return 0;var i=this.contentEl[this.axis[e].scrollSizeAttr],a=(s=(n=this.axis[e].track.el)===null||n===void 0?void 0:n[this.axis[e].offsetSizeAttr])!==null&&s!==void 0?s:0,o=a/i,l;return l=Math.max(~~(o*a),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(l=Math.min(l,this.options.scrollbarMaxSize)),l},t.prototype.positionScrollbar=function(e){var n,s,i;e===void 0&&(e="y");var a=this.axis[e].scrollbar;if(!(!this.axis[e].isOverflowing||!this.contentWrapperEl||!a.el||!this.elStyles)){var o=this.contentWrapperEl[this.axis[e].scrollSizeAttr],l=((n=this.axis[e].track.el)===null||n===void 0?void 0:n[this.axis[e].offsetSizeAttr])||0,c=parseInt(this.elStyles[this.axis[e].sizeAttr],10),u=this.contentWrapperEl[this.axis[e].scrollOffsetAttr];u=e==="x"&&this.isRtl&&(!((s=t.getRtlHelpers())===null||s===void 0)&&s.isScrollOriginAtZero)?-u:u,e==="x"&&this.isRtl&&(u=!((i=t.getRtlHelpers())===null||i===void 0)&&i.isScrollingToNegative?u:-u);var d=u/(o-c),h=~~((l-a.size)*d);h=e==="x"&&this.isRtl?-h+(l-a.size):h,a.el.style.transform=e==="x"?"translate3d(".concat(h,"px, 0, 0)"):"translate3d(0, ".concat(h,"px, 0)")}},t.prototype.toggleTrackVisibility=function(e){e===void 0&&(e="y");var n=this.axis[e].track.el,s=this.axis[e].scrollbar.el;!n||!s||!this.contentWrapperEl||(this.axis[e].isOverflowing||this.axis[e].forceVisible?(n.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(e))):(n.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(e))),this.axis[e].isOverflowing?s.style.display="block":s.style.display="none")},t.prototype.showScrollbar=function(e){e===void 0&&(e="y"),this.axis[e].isOverflowing&&!this.axis[e].scrollbar.isVisible&&(iu(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!0)},t.prototype.hideScrollbar=function(e){e===void 0&&(e="y"),!this.isDragging&&this.axis[e].isOverflowing&&this.axis[e].scrollbar.isVisible&&(au(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!1)},t.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},t.prototype.onMouseMoveForAxis=function(e){e===void 0&&(e="y");var n=this.axis[e];!n.track.el||!n.scrollbar.el||(n.track.rect=n.track.el.getBoundingClientRect(),n.scrollbar.rect=n.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(n.track.rect)?(this.showScrollbar(e),iu(n.track.el,this.classNames.hover),this.isWithinBounds(n.scrollbar.rect)?iu(n.scrollbar.el,this.classNames.hover):au(n.scrollbar.el,this.classNames.hover)):(au(n.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)))},t.prototype.onMouseLeaveForAxis=function(e){e===void 0&&(e="y"),au(this.axis[e].track.el,this.classNames.hover),au(this.axis[e].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)},t.prototype.onDragStart=function(e,n){var s;n===void 0&&(n="y"),this.isDragging=!0;var i=Ij(this.el),a=ru(this.el),o=this.axis[n].scrollbar,l=n==="y"?e.pageY:e.pageX;this.axis[n].dragOffset=l-(((s=o.rect)===null||s===void 0?void 0:s[this.axis[n].offsetAttr])||0),this.draggedAxis=n,iu(this.el,this.classNames.dragging),i.addEventListener("mousemove",this.drag,!0),i.addEventListener("mouseup",this.onEndDrag,!0),this.removePreventClickId===null?(i.addEventListener("click",this.preventClick,!0),i.addEventListener("dblclick",this.preventClick,!0)):(a.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.prototype.onTrackClick=function(e,n){var s=this,i,a,o,l;n===void 0&&(n="y");var c=this.axis[n];if(!(!this.options.clickOnTrack||!c.scrollbar.el||!this.contentWrapperEl)){e.preventDefault();var u=ru(this.el);this.axis[n].scrollbar.rect=c.scrollbar.el.getBoundingClientRect();var d=this.axis[n].scrollbar,h=(a=(i=d.rect)===null||i===void 0?void 0:i[this.axis[n].offsetAttr])!==null&&a!==void 0?a:0,f=parseInt((l=(o=this.elStyles)===null||o===void 0?void 0:o[this.axis[n].sizeAttr])!==null&&l!==void 0?l:"0px",10),p=this.contentWrapperEl[this.axis[n].scrollOffsetAttr],g=n==="y"?this.mouseY-h:this.mouseX-h,m=g<0?-1:1,_=m===-1?p-f:p+f,y=40,x=function(){s.contentWrapperEl&&(m===-1?p>_&&(p-=y,s.contentWrapperEl[s.axis[n].scrollOffsetAttr]=p,u.requestAnimationFrame(x)):p<_&&(p+=y,s.contentWrapperEl[s.axis[n].scrollOffsetAttr]=p,u.requestAnimationFrame(x)))};x()}},t.prototype.getContentElement=function(){return this.contentEl},t.prototype.getScrollElement=function(){return this.contentWrapperEl},t.prototype.removeListeners=function(){var e=ru(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},t.prototype.unMount=function(){this.removeListeners()},t.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},t.prototype.findChild=function(e,n){var s=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,function(i){return s.call(i,n)})[0]},t.rtlHelpers=null,t.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",tabIndex:0,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},t.getOptions=bNe,t.helpers=xNe,t}(),ua=function(){return ua=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ua.apply(this,arguments)};function _Ne(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}var oq=v.forwardRef(function(t,e){var n=t.children,s=t.scrollableNodeProps,i=s===void 0?{}:s,a=_Ne(t,["children","scrollableNodeProps"]),o=v.useRef(),l=v.useRef(),c=v.useRef(),u={},d={};Object.keys(a).forEach(function(p){Object.prototype.hasOwnProperty.call(Ug.defaultOptions,p)?u[p]=a[p]:d[p]=a[p]});var h=ua(ua({},Ug.defaultOptions.classNames),u.classNames),f=ua(ua({},i),{className:"".concat(h.contentWrapper).concat(i.className?" ".concat(i.className):""),tabIndex:u.tabIndex||Ug.defaultOptions.tabIndex,role:"region","aria-label":u.ariaLabel||Ug.defaultOptions.ariaLabel});return v.useEffect(function(){var p;return l.current=f.ref?f.ref.current:l.current,o.current&&(p=new Ug(o.current,ua(ua(ua({},u),l.current&&{scrollableNode:l.current}),c.current&&{contentNode:c.current})),typeof e=="function"?e(p):e&&(e.current=p)),function(){p==null||p.unMount(),p=null,typeof e=="function"&&e(null)}},[]),v.createElement("div",ua({"data-simplebar":"init",ref:o},d),v.createElement("div",{className:h.wrapper},v.createElement("div",{className:h.heightAutoObserverWrapperEl},v.createElement("div",{className:h.heightAutoObserverEl})),v.createElement("div",{className:h.mask},v.createElement("div",{className:h.offset},typeof n=="function"?n({scrollableNodeRef:l,scrollableNodeProps:ua(ua({},f),{ref:l}),contentNodeRef:c,contentNodeProps:{className:h.contentEl,ref:c}}):v.createElement("div",ua({},f),v.createElement("div",{className:h.contentEl},n)))),v.createElement("div",{className:h.placeholder})),v.createElement("div",{className:"".concat(h.track," simplebar-horizontal")},v.createElement("div",{className:h.scrollbar})),v.createElement("div",{className:"".concat(h.track," simplebar-vertical")},v.createElement("div",{className:h.scrollbar})))});oq.displayName="SimpleBar";const Y_=v.forwardRef(({children:t,maxHeight:e=300,className:n="",variant:s="default"},i)=>{if(s==="default")return r.jsx(oq,{style:{maxHeight:e},className:`simple-scrollbar ${n}`,ref:i,children:t});if(s==="custom")return r.jsx("div",{className:`scrollbarPrimary ${n}`,ref:i,children:t})}),po=({count:t=0,children:e})=>[...new Array(t)].map((n,s)=>r.jsx(Xe.Fragment,{children:e},s)),wNe=({data:t})=>{if(t.building)return r.jsxs("span",{className:"ml-1.5",children:["| ЖК ",t.building.name]})},CNe=({data:t})=>{var o,l,c;const e=t.last_message;if(!(e&&!Ye(e)))return;const n=ue(Ot),s=e.photos||[],i=(l=(o=e.files)==null?void 0:o.filter(u=>u.type==="video"))==null?void 0:l[0],a=(c=e.files)==null?void 0:c.filter(u=>u.type==="audio");return r.jsxs("div",{className:"flex gap-1",children:[r.jsxs("span",{className:"text-blue font-medium",children:[n.id===e.user.id?"Вы":e.user.name,":"]}),r.jsxs("div",{className:"flex items-center",children:[!!s.length&&r.jsx("div",{className:"flex gap-1 mr-1",children:s.map((u,d)=>r.jsx(Vp,{style:{width:15,height:15,borderRadius:2},children:r.jsx("img",{src:qt(u)})},d))}),!!i&&r.jsx(Vp,{style:{width:15,height:15,borderRadius:2,marginRight:4},children:r.jsx("img",{src:qt(i.preview||"")})}),!!a.length&&r.jsx("span",{className:"cut-one",children:"Голосовое сообщение"}),!!s.length&&!e.text&&r.jsx("span",{className:"cut-one",children:"Фотография"}),!!i&&!e.text&&r.jsx("span",{className:"cut-one",children:"Видео"}),!!e.text&&r.jsx("span",{className:"cut-one",children:e.text})]})]})},SNe=({data:t})=>{if(t.last_message&&!Ye(t.last_message))return r.jsx("span",{className:"min-w-max text-dark",children:S4(t.last_message.updated_at)?ct(t.last_message.updated_at).format("HH:mm"):ct(t.last_message.updated_at).format("D MMM")})},jNe=({data:t,currentDialog:e})=>{if(t.un_read_messages_count)return r.jsx("div",{className:`bg-count-circle ${e.id!==t.id?"_blue":"_white"} `,children:t.un_read_messages_count})},TNe=v.memo(({data:t,options:e})=>{var I,B;const{sidebarMini:n,showPopper:s,setShowPopper:i}=e,{currentDialog:a,setCurrentDialog:o,connectToChat:l,getDialog:c,setIsLoadingDialog:u,setIsVisibleBtnArrow:d,chatSearchDialog:h,setCachedDialog:f}=v.useContext(Pn),{closeSearchPanel:p}=h,g=ue(Ot),[m,_]=_r(),y=ue(rt),x=t.dialog_type===xt.CHAT,b=t.dialog_type===xt.CHANNEL,w=t.dialog_type===xt.GROUP,C=t.organization&&((I=g==null?void 0:g.role)==null?void 0:I.id)!==pn.id;let j={};C?j={...t.organization,isOrganization:!0}:x&&((B=t.companions)!=null&&B.length)?j={...t.companions.find(U=>U.id!==g.id),isOrganization:!1}:j={name:t.name,image:t.image,isOrganization:!1};const E=()=>{a.id!==t.id&&(u(!0),o(t),f({}),l(t.id),_({dialog:t.id}),d(!1),p())},T=U=>{y&&(U.preventDefault(),i(z=>z?!1:t.id))},N=C?j.name:uw(j.name,j.surname),P=a.id===t.id;return r.jsxs("button",{type:"button",className:He(at.ChatSidebarDialog,P&&at.ChatSidebarDialogActive),onClick:E,onContextMenu:T,children:[r.jsx(Vs,{sizeAvatar:54,avatar:j.image,textAvatar:N,name:r.jsxs("div",{className:"cut-one",children:[r.jsxs("span",{children:[w&&r.jsx(Z2,{className:He(P?"fill-[#fff]":"fill-dark","mr-1"),width:14,height:14}),b&&r.jsx(Ok,{className:He(P?"fill-[#fff]":"fill-dark","mr-1"),width:14,height:14}),N]}),r.jsx(wNe,{data:t})]}),className:"min-w-0 mr-4",classNameContent:He("flex-grow",n?"!hidden":""),posChildren:r.jsx("div",{className:He("flex flex-col mt-1 text-primary400 w-full",n?"!hidden":""),children:r.jsx(CNe,{data:t})}),centered:!0}),!n&&r.jsxs("div",{className:"flex flex-col items-end  gap-1.5",children:[r.jsx(SNe,{data:t}),r.jsxs("div",{className:"flex items-center gap-1 relative",children:[r.jsx(jNe,{data:t,currentDialog:a}),r.jsx(gq,{options:{data:t,showPopper:s,setShowPopper:i,classNameTarget:at.ChatSidebarDialogTooltip,ElementTargetLayout:r.jsx(Q2,{className:He("pointer-events-none fill-[#fff]"),width:16,height:16})}})]})]})]},t.id)}),ENe=v.memo(({sidebarMini:t=!1})=>{const{isLoadingDialogs:e,dialogs:n,resizeSidebarOptions:s,isLoadingDialog:i}=v.useContext(Pn),{sidebarWidth:a,sidebarOptions:o}=s,[l,c]=v.useState(!1);return r.jsx(Y_,{className:"overflow-y-auto mmd1:px-2",variant:"custom",children:r.jsx("div",{className:He("flex flex-col gap-1",!e&&i&&"opacity-85 pointer-events-none"),children:e?r.jsx(po,{count:12,children:r.jsxs("div",{className:"flex gap-3 items-center p-3",children:[r.jsx(Fe,{className:"w-[54px] h-[54px] rounded-full aspect-square"}),a>o.min_width&&r.jsx(Fe,{className:"w-[150px] h-6 rounded-lg"})]})}):r.jsx(r.Fragment,{children:n.map(u=>r.jsx(TNe,{data:u,options:{sidebarMini:t,showPopper:l,setShowPopper:c}},u.id))})})})}),NNe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='58'%20height='58'%20fill='none'%3e%3cg%20clip-path='url(%23a)'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M57.91%2029A29%2029%200%201%200%204.26%2044.26h49.32A28.82%2028.82%200%200%200%2057.91%2029Z'%20fill='%23AAE1FB'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.2%2044.26a29%2029%200%200%200%2049.32%200H4.2Z'%20fill='%2300599A'/%3e%3cpath%20d='m52.88%2020.97-13.95-2.36v-8.12L20.11%205.74v40.97l32.77-2.63V20.97Z'%20fill='%239CDFEF'/%3e%3cpath%20d='m20.1%205.74-7.6%202.54v9.05l-6.28%201.58v26.15l13.88%201.65h.01V5.74h-.01Z'%20fill='%238BC3D5'/%3e%3cpath%20d='M38.92%2018.61v-8.12L20.1%205.74l-7.61%202.54v9l-6.27%201.6v26.18l13.88%201.66%2032.8-2.66V21l-13.98-2.39Zm-27.58%2024.9-3-.27V32.88l3-.15v10.78Zm0-12.95-3%20.24V20.45l3-.67v10.78ZM29.27%2043.8l-9.27.51-6.34-.59V32.61l6.45-.27%209.21.21-.05%2011.25Zm0-13.44L20%2029.85l-6.34.51V19.24l6.34-1.4%209.32%201.39-.05%2011.13Zm8%2012.82-4.77.31V32.74h4.77v10.44Zm0-14.45-4.77-.35v-6.52l4.77.68v6.19Zm0-12.44L19.9%2013l-6.34%201.79v-4.45L19.9%208.2l17.39%204-.02%204.09Zm9.6%207.5%203.58.46v5.47l-3.58-.27v-5.66Zm-2.66%2019.05-4%20.22V33h4v9.84Zm.12-13.58L40.26%2029v-6l4.07.56v5.7Zm6.27%2013.12-3.72.22v-9.32h3.72v9.1Z'%20fill='%23fff'/%3e%3cpath%20d='M37.34%2012.18v4.14L20.1%2013.08v4.8l9.21%201.38v11.12l-9.21-.5v2.46l9.21.21V43.8l-9.21.5v2.42l32.8-2.66V21l-14-2.37v-8.12L20.12%205.76v2.53l17.22%203.89Zm0%2031.08-4.77.3v-10.8h4.77v10.5Zm0-14.45-4.77-.35v-6.52l4.77.68v6.19Zm9.6-4.94%203.58.46v5.47l-3.58-.28v-5.65Zm0%209.46h3.72v9.11l-3.72.22v-9.33ZM40.35%2023l4.07.56v5.79L40.35%2029v-6Zm0%2010.14h4v9.78l-4%20.16v-9.94Z'%20fill='%23429DB2'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23fff'%20d='M0%200h58v58H0z'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",kNe=({options:t})=>{const{setGroupFormModal:e,setChannelFormModal:n,setBlockedUserList:s,themeOptions:i}=v.useContext(Pn),{theme:a,toggleTheme:o}=i,{condition:l,set:c,setCreateDialogWithDevelopModal:u,setCreateDialogWithSpecialistModal:d}=t,h=ue(Ot),f=xm(h),p=Si(h),g=hd(h);return r.jsx(Ze,{condition:l,children:r.jsxs(gt,{options:{overlayClassNames:"_left",modalClassNames:"mmd1:!w-[400px]",modalContentClassNames:"md1:flex md1:flex-col !px-3"},condition:l,set:c,children:[!!h&&r.jsxs("div",{className:"flex flex-col items-center mb-5",children:[r.jsx(Nn,{src:h.image,title:ks(h.name,h.surname),size:72}),r.jsx(Rl,{to:Ji.profile.edit,className:"title-3-5 mt-3",children:`${h.surname||""} ${h.name||""}`})]}),r.jsx("div",{className:"flex flex-col border-top-lightgray",children:r.jsxs("div",{className:"mt-2",children:[(p||g)&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{c(!1),e(!0)},className:at.ChatMenuButton,children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(Z2,{className:"!fill-blue"}),r.jsx("span",{children:"Создать групповой чат"})]})}),r.jsx("button",{onClick:()=>{c(!1),n(!0)},className:at.ChatMenuButton,children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(Ok,{className:"fill-blue"}),r.jsx("span",{children:"Создать канал"})]})})]}),r.jsx("button",{onClick:()=>{c(!1),u(!0)},className:at.ChatMenuButton,children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(fae,{className:"fill-blue"}),r.jsx("span",{children:"Застройщики"})]})}),r.jsx("button",{onClick:()=>{c(!1),d(!0)},className:at.ChatMenuButton,children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(hae,{className:"fill-blue"}),r.jsx("span",{children:"Менеджеры"})]})}),!!f&&r.jsx("button",{onClick:()=>s(!0),className:at.ChatMenuButton,children:r.jsxs(Gt,{className:"flex items-center",children:[r.jsx(dae,{className:"fill-blue"}),r.jsx("span",{children:"Заблокированные пользователи"})]})}),r.jsx("button",{onClick:()=>{},className:at.ChatMenuButton,children:r.jsx(Gt,{className:"flex items-center",children:r.jsxs(md,{className:"items-center w-full",checked:a==="dark",set:m=>{o()},text:"",children:[r.jsx(uae,{className:"fill-blue -order-2"}),r.jsx("span",{className:"-order-1 ml-3 mr-auto",children:"Ночной режим"})]})})})]})})]})})},ANe="_PaginationPageRoot_155ms_1",DNe="_PaginationPageButton_155ms_10",PNe="_PaginationPageList_155ms_15",INe="_PaginationPageItem_155ms_21",MNe="_PaginationPageItemActive_155ms_37",Vg={PaginationPageRoot:ANe,PaginationPageButton:DNe,PaginationPageList:PNe,PaginationPageItem:INe,PaginationPageItemActive:MNe},zo=({currentPage:t=1,setCurrentPage:e=()=>{},total:n=1,textButton:s="Следующая страница",className:i="",showBtn:a=!0})=>{const o=()=>{const l=[];if(n<=5)for(let u=1;u<=n;u++)l.push(u);else{let u=Math.max(1,t-2),d=Math.min(n,t+2);u===1&&(d=u+4),d===n&&(u=d-4);for(let h=u;h<=d;h++)l.push(h);u>1&&(l.unshift("..."),l.unshift(1)),d<n&&(l.push("..."),l.push(n))}return l};return n<=1?"":r.jsxs("div",{className:He(Vg.PaginationPageRoot,i),children:[a&&r.jsx(_e,{variant:"secondary",className:Vg.PaginationPageButton,onClick:()=>{t<n&&e(t+1)},children:s}),r.jsx("ul",{className:Vg.PaginationPageList,children:o().map((l,c)=>l==="..."?r.jsx("li",{children:"..."},c):r.jsx("li",{className:`${Vg.PaginationPageItem} ${l===t?Vg.PaginationPageItemActive:""}`,onClick:()=>e(l),children:l},c))})]})},t8=({options:t,condition:e,set:n})=>{var h,f;const s=ue(Ci),i=ue(Vh),[a,o]=v.useState(!0),[l,c]=v.useState({city:{},search:"",page:1,limit:11}),[u,d]=v.useState({total:0});return v.useEffect(()=>{s&&c(p=>({...p,city:{value:s.id,label:s.name}}))},[s]),Qw(()=>{o(!0),Me(t.api,{...l,city:l.city.value}).then(p=>{o(!1),d(p.data)})},[JSON.stringify(l)],{wait:300}),r.jsxs(gt,{options:{overlayClassNames:"_left",modalClassNames:"mmd1:!w-[600px]",modalContentClassNames:"md1:flex md1:flex-col !px-0"},condition:e,set:n,children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 px-6",children:[r.jsx(vi,{nameLabel:"Город",options:i,value:l.city,onChange:p=>{c(g=>({...g,city:p,page:1}))}}),r.jsx(kn,{placeholder:t.inputPlaceholder,value:l.search,onChange:p=>{c(g=>({...g,search:p,page:1}))}})]}),r.jsx("div",{className:"mt-4",children:!a&&((h=u.items)==null?void 0:h.length)===0?r.jsx(Or,{block:!1}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-col",children:a?r.jsx(po,{count:l.limit,children:r.jsx("div",{className:"py-2 px-6",children:r.jsxs("div",{className:"flex items-center gap-3 w-full",children:[r.jsx(Fe,{className:"w-[40px] h-[40px] rounded-full"}),r.jsx(Fe,{className:"w-2/6 h-6 rounded-lg"})]})})}):(f=u.items)==null?void 0:f.map((p,g)=>r.jsxs("button",{type:"button",className:"relative py-2 px-6 flex gap-3 items-center hover:bg-pageColor",onClick:()=>{t.onSubmit(p)},children:[r.jsx(Nn,{size:40,src:p.photo||p.image,title:p.name}),r.jsx("h3",{className:"title-4",children:t.type==="specialists"?ks(p.name,p.surname):p.name})]},g))}),r.jsx(zo,{className:"mt-8 px-6",currentPage:l.page,setCurrentPage:p=>{c(g=>({...g,page:p}))},total:u.pages})]})})]})},lq="/assets/avatar-CkuQd2SY.png",n8=({condition:t,set:e,type:n})=>{const{updateDialogsAndDialogSettings:s}=v.useContext(Pn),{handleSubmit:i,control:a,setValue:o,reset:l,formState:{errors:c}}=en({defaultValues:{name:""}}),[u,d]=v.useState(null),h=ue(rt),[f,p]=v.useState(!1),[g,m]=v.useState(!1),_={title:n===xt.GROUP?"Новая группа":"Новый канал",inputPlaceholder:n===xt.GROUP?"Название группы":"Название канала",label:n===xt.GROUP?"группы":"канала"},y=async x=>{try{m(!0);const b={...x,type:n,recipients_id:[]},w=await $s(b);console.log(b),console.log(w),await s(),m(!1),l(),e(!1),p(w)}catch{}};return r.jsxs(r.Fragment,{children:[r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_left",modalClassNames:"mmd1:!w-[500px]",modalContentClassNames:"flex flex-col"},children:[r.jsx("h2",{className:"title-2 mb-8",children:_.title}),r.jsxs("form",{className:"flex flex-col items-center flex-grow",onSubmit:i(y),children:[r.jsx(IA,{defaultLayout:()=>r.jsx("img",{className:"w-full h-full",src:lq}),image:u==null?void 0:u.image,onChange:x=>{d(x?cr(x)[0]:null)},size:175,className:"!rounded-full",changeAvatarChildren:!h&&r.jsx("div",{className:"blue-link mt-3",children:"Изменить аватарку"})}),r.jsxs("div",{className:"w-full mt-8 flex flex-col gap-5",children:[r.jsx(Qe,{control:a,name:"name",beforeText:_.inputPlaceholder,requiredValue:!0,errors:c}),n===xt.CHANNEL&&r.jsx(ps,{variant:"toggle",control:a,option:{value:"allow_comments",label:"Разрешить комментарии"},name:"allow_comments"})]}),r.jsx(_e,{isLoading:g,className:"w-full mt-auto",children:"Сохранить"})]})]})}),r.jsx(Ze,{condition:f,children:r.jsx(OA,{condition:f,set:p,selectedType:"add_to_dialog",options:{title:"Добавить участников"},onChange:async(x,b)=>{try{await Me(`/api/dialogs/${x}/user/add`,{user_ids:b}),await s(),console.log(`к диалогу ${x} успешно добавлены участники ${b}`)}catch(w){console.log(w)}}})})]})},OA=({condition:t,set:e,options:n={},selectedType:s="",onChange:i=()=>{}})=>{const{title:a="Добавить"}=n,[o,l]=v.useState([]),[c,u]=v.useState([]),[d,h]=v.useState("");Qw(()=>{f(d)},[d],{wait:400});const f=async p=>{try{if(s==="add_to_dialog"){const{data:{result:g}}=await Me(`/api/dialogs/${t}/user/all`,{search:p});l(g)}}catch(g){console.log(g)}};return r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content-desktop",modalClassNames:"mmd1:!w-[400px] mmd1:!h-[700px] flex-col",modalContentClassNames:"!py-8 !pb-4 !px-0"},ModalFooter:()=>r.jsxs("div",{className:"ModalFooter !gap-4",children:[r.jsx("button",{type:"button",onClick:()=>e(null),className:"blue-link",children:s==="single"?"Отменить":"Пропустить"}),s==="add_to_dialog"&&r.jsx("button",{type:"button",onClick:()=>{i(t,c),e(null)},className:"blue-link",children:"Добавить"})]}),children:[r.jsxs("div",{className:"px-8",children:[r.jsx("h2",{className:"title-2-5 mb-4",children:a}),r.jsx(kn,{placeholder:"Поиск",search:!0,value:d,onChange:p=>h(p)})]}),r.jsx("div",{className:"mt-4",children:o.length>0?r.jsx("div",{className:"flex flex-col",children:o.map(p=>r.jsxs("button",{type:"button",disabled:p.is_member,className:He("flex justify-between items-center gap-4 hover:bg-hoverPrimary",p.is_member&&"pointer-events-none"),onClick:()=>{p.is_member||(s==="single"&&(i(t,p.id),e(null)),s==="add_to_dialog"&&(c.includes(p.id)?u(g=>g.filter(m=>m!==p.id)):u(g=>[...g,p.id])))},children:[r.jsx(Vs,{sizeAvatar:45,avatar:p.image,name:`${p.name||""} ${p.surname||""}`,className:"text-left w-full py-3 px-8 items-center",centered:!0}),!!p.is_member&&r.jsx("div",{className:"bg-primary400 opacity-50 w-5 h-5 rounded-full flex-center-all flex-shrink-0 mr-8","aria-hidden":!0,children:r.jsx(Op,{className:"fill-none stroke-white",width:10,height:10})}),c.includes(p.id)&&r.jsx("div",{className:"bg-blue w-5 h-5 rounded-full flex-center-all flex-shrink-0 mr-8","aria-hidden":!0,children:r.jsx(Op,{className:"fill-none stroke-white",width:10,height:10})})]},p.id))}):r.jsx("p",{className:"text-primary400 text-center",children:"Чаты не найдены"})})]})},ONe=({condition:t,set:e})=>r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content-desktop",modalClassNames:"mmd1:!w-[400px] mmd1:!h-[700px] flex-col",modalContentClassNames:"!py-8 !pb-4 !px-8 md1:px-6"},children:[r.jsx("h2",{className:"title-2 mb-8",children:"TEST Редактировать канал"}),r.jsx(kn,{before:"Название"})]})}),RNe=({condition:t,set:e,dialog:n})=>{var m;const{updateDialogsAndDialogSettings:s}=v.useContext(Pn),[i,a]=v.useState(!1),[o,l]=v.useState(!1),{dialog_type:c,owner:u,companions:d}=n,h=ue(Ot);if(!n)return;const f=(n.dialog_type===xt.CHANNEL||n.dialog_type===xt.GROUP)&&((m=n.owner)==null?void 0:m.id)===h.id,p={[xt.CHAT]:"диалоге",[xt.CHANNEL]:"канале",[xt.GROUP]:"группе"},g=t$((d==null?void 0:d.length)+(u?1:0));return r.jsxs(r.Fragment,{children:[r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content-desktop",modalClassNames:"mmd1:!w-[400px] mmd1:!h-[700px] flex-col",modalContentClassNames:"!py-8 !pb-4 !px-8 md1:px-6"},children:[r.jsxs("h2",{className:"title-2 mb-8",children:["Информация о ",p[c]]}),Ye(n)?r.jsx(r.Fragment,{children:r.jsx(Fe,{className:"w-[100px] h-10 rounded-lg"})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(Nn,{size:110,src:n.image,title:n.name||"без названия"}),r.jsx("h3",{className:"title-3 mt-4",children:n.name||"без названия"}),r.jsx("p",{className:"text-primary400 mt-1 text-small",children:g})]}),r.jsxs("div",{className:"mt-6 pt-6 border-top-lightgray",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Z2,{width:16,height:16,className:"fill-primary400"}),r.jsx("h3",{className:"title-3-5 uppercase",children:g}),f&&r.jsx("button",{type:"button",onClick:()=>a(n.id),className:"flex-center-all ml-auto",title:"Добавить участника",children:r.jsx(Xi,{className:"fill-primary400"})})]}),r.jsxs("div",{className:"mt-4 flex flex-col gap-4",children:[u&&r.jsxs("div",{className:"flex gap-2 justify-between items-center",children:[r.jsx(Vs,{avatar:u.image,name:u.name,classListName:"!text-defaultMax",centered:!0}),r.jsx("span",{className:"text-blue",children:"Владелец"})]}),d.map(_=>r.jsxs("div",{className:"flex gap-2 justify-between items-center",children:[r.jsx(Vs,{avatar:_.image,name:_.name,classListName:"!text-defaultMax",centered:!0}),f&&r.jsx("button",{type:"button",className:"flex-center-all",onClick:()=>l(_),children:r.jsx(un,{className:"fill-red",width:14,height:14})})]},_.id))]})]})]})]})}),f&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{condition:i,children:r.jsx(OA,{condition:i,set:a,selectedType:"add_to_dialog",options:{title:"Добавить участников"},onChange:async(_,y)=>{try{await Me(`/api/dialogs/${_}/user/add`,{user_ids:y}),await s()}catch(x){console.log(x)}}})}),r.jsx(Ze,{condition:o,children:r.jsx(Ro,{condition:o,title:r.jsx(r.Fragment,{children:"Вы действительно хотите удалить ?"}),set:l,request:async _=>{await Me(`/api/dialogs/${n.id}/user/delete`,{user_ids:[_.id]}),await s(),l(!1)}})})]})]})},LNe=({deleteMessagesModal:t,setDeleteMessagesModal:e})=>{const{setMessages:n,dialogRemoveMessageIds:s}=v.useContext(Pn),[i,a]=v.useState(!1);v.useEffect(()=>{a(!1)},[t]);const o=async()=>{n(c=>s(c,t.ids)),l(),await Me("/api/messages/delete-message",{id:t.ids[0],dialog_id:t.dialog_id,flag:i?2:1})},l=()=>{e(!1)};return r.jsx(Ze,{condition:t,children:r.jsx(gt,{condition:!!t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[400px]",modalContentClassNames:"!pt-8 !px-8"},children:t&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3",children:t.ids.length===1?"Удалить это сообщение?":`Удалить ${xde(t.ids.length)}?`}),!!t.all&&r.jsx(Ph,{className:"mt-4",checked:i,onChange:c=>a(c.target.checked),option:{value:"delete-all",label:"Удалить для всех"}}),r.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[r.jsx("button",{className:"blue-link text-defaultMax",onClick:l,children:"Отмена"}),r.jsx("button",{className:"blue-link text-defaultMax",onClick:o,children:"Удалить"})]})]})})})},BNe=({condition:t,set:e})=>{const{blockUserOptins:n,setCurrentDialog:s,setDialogs:i}=v.useContext(Pn),{isLoading:a,blockUsersList:o,blockUsersGetAll:l,blockUserDelete:c}=n;return v.useEffect(()=>{(async()=>{try{await l()}catch{}})()},[]),r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content-desktop",modalClassNames:"mmd1:!w-[400px] mmd1:!h-[700px] flex-col",modalContentClassNames:"!py-8 !pb-4 !px-0"},children:[r.jsx("div",{className:"px-6",children:r.jsx("h2",{className:"title-2-5 mb-4",children:"Заблокированные пользователи"})}),a?r.jsx(po,{count:8,children:r.jsxs("div",{className:"px-6 py-2 flex items-center gap-3",children:[r.jsx(Fe,{className:"w-10 h-10 rounded-full"}),r.jsx(Fe,{className:"w-3/4 h-8 rounded-xl"})]})}):r.jsx(r.Fragment,{children:o.length?r.jsx("div",{className:"flex flex-col",children:o.map(u=>r.jsxs("div",{type:"button",className:"relative py-2 px-6 flex gap-3 items-center",onClick:()=>{},children:[r.jsx(Nn,{size:40,src:u.user.image,title:u.user.name}),r.jsx("h3",{className:"title-4 cut-one",children:ks(u.user.name,u.user.surname)}),r.jsx("button",{type:"button",className:"blue-link ml-auto",onClick:async()=>{await c(u.user.id),s(d=>d.companions.find(h=>h.id===u.user.id)?{...d,my_block:!1}:d),i(d=>d.map(h=>h.companions.find(f=>f.id===u.user.id)&&h.dialog_type===xt.CHAT?{...h,my_block:!1}:h)),l()},children:"Разблокировать"})]},u.id))}):r.jsx("div",{className:"px-6 text-primary400 text-center mt-8",children:"Нет заблокированных пользователей"})})]})},FNe=()=>{const{setIsLoadingDialog:t,setCurrentDialog:e,connectToChat:n,getDialog:s,setIsVisibleBtnArrow:i,getDialogs:a,setCachedDialog:o,resizeSidebarOptions:l,themeOptions:{theme:c}}=v.useContext(Pn),[u,d]=v.useState(!1),[h,f]=v.useState(!1),[p,g]=v.useState(!1),{sidebarRef:m,sidebarWidth:_,startResizing:y,sidebarMini:x,sidebarOptions:b}=l,w=ue(rt),[C,j]=_r(),E=async T=>{t(!0);const N=await $s(T);let I=(await a()).find(B=>B.id===N);I&&(o({}),e(I),n(I.id),s(I.id),j({dialog:I.id})),i(!1),f(!1),g(!1),d(!1),t(!1)};return r.jsxs("div",{className:He(at.ChatSidebar,x&&at.ChatSidebarMini),ref:m,style:{width:w?`${_<=b.min_width?`${b.mini_width}px`:`${_}px`}`:"100%"},children:[r.jsx("div",{className:He("min-h-16 h-16 px-4 flex items-center border-b border-b-primary800",x&&"justify-center"),children:r.jsx("button",{className:He(Kt.MenuBtn,x?"!mx-0":"!-ml-2"),onClick:()=>d(!0),children:r.jsx("div",{className:He(Kt.burger,"md1:!text-dark"),children:r.jsx("span",{className:Kt.burgerLine})})})}),r.jsx(_v,{widthScreen:9999,className:"mt-3 mb-4 px-2 w-full",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_e,{size:"26",variant:c==="dark"?"dark":"secondary",children:"Все"}),r.jsx(_e,{size:"26",variant:c==="dark"?"dark":"secondary",children:"Чаты"}),r.jsx(_e,{size:"26",variant:c==="dark"?"dark":"secondary",children:"Групповые чаты"}),r.jsx(_e,{size:"26",variant:c==="dark"?"dark":"secondary",children:"Каналы"})]})}),r.jsx(ENe,{sidebarMini:x}),w&&r.jsx("div",{className:at.ChatSidebarResizer,onMouseDown:y}),!w&&r.jsx("button",{className:"fixed bottom-4 right-4 flex-center-all w-14 h-14 bg-blue rounded-xl z-[99]",onClick:()=>d(!0),children:r.jsx(Xi,{width:22,height:22,className:"fill-[#fff]"})}),r.jsx(kNe,{options:{condition:u,set:d,setCreateDialogWithDevelopModal:f,setCreateDialogWithSpecialistModal:g}}),r.jsx(Ze,{condition:h,children:r.jsx(t8,{condition:h,set:f,options:{type:"developers",api:"/api/developers/page",inputPlaceholder:"Название застройщика",onSubmit:T=>{E({organization_id:T.id,type:xt.CHAT})}}})}),r.jsx(Ze,{condition:p,children:r.jsx(t8,{condition:p,set:g,options:{type:"specialists",api:"/api/specialists/page",inputPlaceholder:"ФИО менеджера",onSubmit:T=>{E({recipients_id:[T.id],type:xt.CHAT})}}})})]})},$Ne=()=>{const{currentDialog:t,currentDialogUserInfo:e,setVideoCallActive:n,chatSearchDialog:s,isOrganization:i,isLoadingDialog:a,setCurrentDialogSettings:o,setChannelGroupInfoModal:l}=v.useContext(Pn),[c,u]=v.useState(!1);if(a)return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Fe,{className:"w-[38px] h-[38px] rounded-full"}),r.jsx(Fe,{className:"w-[150px] h-8 rounded-lg"})]});if(Ye(t))return;const d=t.dialog_type===xt.CHANNEL||t.dialog_type===xt.GROUP;return r.jsxs(r.Fragment,{children:[r.jsx(Vs,{className:He(d&&"cursor-pointer"),onClick:()=>{d&&(o(t),l(!0))},avatar:e.image,name:uw(e.name,e.surname),pos:r.jsx(r.Fragment,{children:(t.dialog_type===xt.CHANNEL||t.dialog_type===xt.GROUP)&&r.jsx(r.Fragment,{children:t$(t.companions.length+(t.owner?1:0))})}),centered:!0,nameHref:t.dialog_type===xt.CHAT?`${e.isOrganization?`${ke.developers.inner}${e.id}`:`${ke.specialists.inner}${e.id}`}
                  `:null}),r.jsx("button",{className:"ml-auto flex-center-all",children:r.jsx(gq,{options:{data:t,showPopper:c,setShowPopper:u,ElementTargetLayout:r.jsx(Q2,{className:He("pointer-events-none rotate-90 fill-dark"),width:20,height:20})}})})]})},UNe=()=>{const{isLoadingDialog:t,dialogBuilding:e,chatBuildingInfoRef:n}=v.useContext(Pn);if(t)return r.jsxs("div",{className:"px-4 py-2 flex items-center gap-3 bg-white",children:[r.jsx(Fe,{className:"w-[55px] h-[45px] rounded-lg"}),r.jsx(Fe,{className:"w-[200px] h-[40px] rounded-lg"})]});if(e)return r.jsx("div",{className:"bg-white p-2",children:r.jsxs("a",{href:`${ke.building}${e.id}`,target:"_blank",className:"flex items-center gap-3 group bg-pageColor p-1.5 rounded-lg",ref:n,children:[r.jsx(Vp,{style:{width:55,height:45,borderRadius:8},children:r.jsx("img",{src:qt(e.images[0])})}),r.jsxs("div",{children:[r.jsxs("h4",{className:"title-4 hover:!text-blue",children:["ЖК ",e.name]}),r.jsx("p",{className:"mt-1 text-dark",children:e.address})]}),r.jsx(wa,{width:26,height:26,className:"ml-auto self-center fill-dark"})]})})},VNe=()=>{const{data:t,videoData:e}=v.useContext(Ml);if(e)return r.jsxs("div",{className:"overflow-hidden relative",children:[r.jsx(Ry,{data:{video_url:e.url,video_url_test:e.test_url},variant:"default",className:"h-full w-full",autoplay:!1,classNameButtonPlay:He("z-[97]",t.loading&&"hidden")}),t.loading&&r.jsx("div",{className:"rounded-xl absolute top-0 left-0 w-full h-full flex-center-all z-[98] bg-[rgba(70,70,70,0.55)]",children:r.jsx(Ol,{className:"mx-auto !border-white !border-b-[transparent]"})})]})};var cq={exports:{}},zg={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s8;function zNe(){if(s8)return zg;s8=1;var t=Xe,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var d,h={},f=null,p=null;u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(p=c.ref);for(d in c)s.call(c,d)&&!a.hasOwnProperty(d)&&(h[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)h[d]===void 0&&(h[d]=c[d]);return{$$typeof:e,type:l,key:f,ref:p,props:h,_owner:i.current}}return zg.Fragment=n,zg.jsx=o,zg.jsxs=o,zg}cq.exports=zNe();var HNe=cq.exports;const qNe=(t,e,n,s,i)=>{const a=t.getChannelData(0),o=n/(s+i),l=Math.floor(a.length/o),c=e/2;let u=[],d=0;for(let h=0;h<o;h++){const f=[];let p=0;const g=[];let m=0;for(let x=0;x<l&&h*l+x<t.length;x++){const b=a[h*l+x];b<=0&&(f.push(b),p++),b>0&&(g.push(b),m++)}const _=f.reduce((x,b)=>x+b,0)/p,y={max:g.reduce((x,b)=>x+b,0)/m,min:_};y.max>d&&(d=y.max),Math.abs(y.min)>d&&(d=Math.abs(y.min)),u.push(y)}if(c*.8>d*c){const h=c*.8/d;u=u.map(f=>({max:f.max*h,min:f.min*h}))}return u},Mj=(t,e,n,s,i,a,o,l=0,c=1)=>{const u=e.height/2,d=e.getContext("2d");if(!d)return;d.clearRect(0,0,e.width,e.height),i!=="transparent"&&(d.fillStyle=i,d.fillRect(0,0,e.width,e.height));const h=(l||0)/c;t.forEach((f,p)=>{const g=p/t.length,m=h>g;d.fillStyle=m&&o?o:a;const _=p*(n+s),y=u+f.min,x=n,b=u+f.max-y;d.beginPath(),d.roundRect?(d.roundRect(_,y,x,b,50),d.fill()):d.fillRect(_,y,x,b)})},uq=v.forwardRef(({blob:t,width:e,height:n,barWidth:s=2,gap:i=1,currentTime:a,style:o,backgroundColor:l="transparent",barColor:c="rgb(184, 184, 184)",barPlayedColor:u="rgb(160, 198, 255)"},d)=>{const h=v.useRef(null),[f,p]=v.useState([]),[g,m]=v.useState(0);return v.useImperativeHandle(d,()=>h.current,[]),v.useEffect(()=>{(async()=>{if(!h.current)return;if(!t){const y=Array.from({length:100},()=>({max:0,min:0}));Mj(y,h.current,s,i,l,c,u);return}const _=await t.arrayBuffer();await new AudioContext().decodeAudioData(_,y=>{if(!h.current)return;m(y.duration);const x=qNe(y,n,e,s,i);p(x),Mj(x,h.current,s,i,l,c,u)})})()},[t,h.current]),v.useEffect(()=>{h.current&&Mj(f,h.current,s,i,l,c,u,a,g)},[a,g]),HNe.jsx("canvas",{ref:h,width:e,height:n,style:{...o}})});uq.displayName="AudioVisualizer";const WNe="_VoicePlayerRoot_vlur9_1",GNe="_VoicePlayerBtn_vlur9_8",YNe="_VoicePlayerProgress_vlur9_20",XNe="_VoicePlayerProgressInner_vlur9_31",Hg={VoicePlayerRoot:WNe,VoicePlayerBtn:GNe,VoicePlayerProgress:YNe,VoicePlayerProgressInner:XNe},KNe=({audioUrl:t,defaultBlob:e=null,onPlay:n=()=>{},onStop:s=()=>{},downloadParams:i=null,className:a})=>{var x;const[o,l]=v.useState(!1),c=v.useRef(null),u=v.useRef(null),d=v.useRef(null),[h,f]=v.useState(null),[p,g]=v.useState(0);v.useEffect(()=>{(async()=>{if(t)try{e?f(e):Me("/api/messages/message/get-message-file",i,{responseType:"blob",Accept:"audio/ogg"}).then(w=>{const C=new Blob([w.data],{type:"audio/ogg"});f(C)})}catch{}})()},[]);const m=()=>{!c.current||!t||(c.current.play(),l(!0),n(c.current,()=>l(!1)))},_=()=>{c.current&&(c.current.pause(),l(!1),s())},y=b=>{if(!c.current||!d.current)return;const w=d.current.offsetWidth,j=b.nativeEvent.offsetX/w*100;m(),setTimeout(()=>{const E=c.current.duration;E!==1/0&&(c.current.currentTime=j/100*E,g(j))},10)};return v.useEffect(()=>{if(!c.current)return;const b=()=>{const C=c.current.currentTime,j=c.current.duration,E=C/j*100;g(E)},w=()=>{l(!1),g(0),s()};return c.current.addEventListener("timeupdate",b),c.current.addEventListener("ended",w),()=>{c.current&&(c.current.removeEventListener("timeupdate",b),c.current.removeEventListener("ended",w))}},[]),r.jsxs("div",{className:He(Hg.VoicePlayerRoot,a),children:[r.jsx("audio",{ref:c,controls:!0,src:t,type:"audio/ogg",style:{display:"none"},children:"Your browser does not support the audio element."}),!o||(x=c.current)!=null&&x.paused?r.jsx(r.Fragment,{children:r.jsx("button",{onClick:m,className:Hg.VoicePlayerBtn,children:r.jsx(lv,{className:"fill-white"})})}):r.jsx("button",{onClick:_,className:Hg.VoicePlayerBtn,children:r.jsx(Mk,{className:"fill-white"})}),!!((e||h)&&t)&&r.jsxs("div",{className:"relative h-8",children:[r.jsx(uq,{audioContext:u,blob:null,style:{width:"100%",position:"relative",zIndex:"99",display:"block",height:"100%"},width:366,height:44,barWidth:4,gap:1,barColor:"#3390ec"}),r.jsx("div",{className:Hg.VoicePlayerProgress,onClick:y,ref:d,children:r.jsx("div",{className:Hg.VoicePlayerProgressInner,style:{width:`${p}%`}})})]})]})},QNe=()=>{const{handlePlayAudio:t,handleStopAudio:e}=v.useContext(py),{data:n,audioData:s,currentDialog:i}=v.useContext(Ml);if(s)return r.jsx("div",{className:"voice-player mt-3 mb-6",children:r.jsx(KNe,{className:"px-[10px]",defaultBlob:s.blob,audioUrl:s.test_url||`${Wi}${s.url}`,onPlay:t,onStop:e,downloadParams:{dialog_id:i.id,message_id:n.id}})})},ZNe=t=>{const e=[];let n=[];return t.forEach(s=>{s.aspectRatio>=1.5?(n.length>0&&(e.push(n),n=[]),e.push([s])):(n.push(s),n.length===2&&(e.push(n),n=[]))}),n.length>0&&e.push(n),e},JNe=()=>{const{data:t}=v.useContext(Ml),e=t.photos;if(!(e!=null&&e.length))return;const[n,s]=v.useState([]);v.useEffect(()=>{(async()=>{const o=await Promise.all(e.map(l=>qt(l)).map(async l=>{const c=new Image;return c.src=l,await c.decode(),{src:l,width:c.naturalWidth,height:c.naturalHeight,aspectRatio:c.naturalWidth/c.naturalHeight}}));s(o)})()},[e]);const i=ZNe(n);return r.jsx("div",{className:"gallery-image-grid",children:i.map((a,o)=>r.jsx("div",{className:"gallery-image-row",children:a.map((l,c)=>r.jsx("div",{className:`gallery-image-item ${a.length===1?"wide":a.length===2?"square":""}`,style:{backgroundImage:`url(${l.src})`}},c))},o))})},r8=["🎯","😁","🖐️","👍","👌","👎","💪","🤝"],e3e=["👍","👌","👎","💪","🤝","🎯","🤔"],i8=["🎰","🎯","😀","😁","🤣","😂","🙂","🙃","😉","😊","🤩","🥰","☺️","🤪","🤑","🤗","🤔","🤐","😐","😏","😬","😌","😪","🥳","😎","😭","😱","😡","😠","🤬","💋","😻","👋","🖐️","👌","🤞","🤏","✌️","👆","👍","👎","👏","🤝","✍️","💪","🤦‍♂️","🤦‍♀️","🤷‍♂️","🤷‍♀️","🎂","🥂","🧨","🎉","🏠","🚀","🔥","🏆","📞","📱","💰","💸","🤑","💳","🎁","❓","👈","👉"],dq=({item:t,onClick:e,active:n=!1,className:s,disabled:i,children:a})=>r.jsxs("button",{type:"button",className:He("hover:bg-primary700 p-2.5 rounded-lg",s,n&&"bg-primary700",i&&"pointer-events-none"),onClick:e,children:[a,t]}),Qx=({title:t="",data:e=[],setMessageText:n})=>r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 pl-2.5 mb-1.5",children:t}),r.jsx("div",{className:"grid grid-cols-7 gap-1.5 text-big mmd1:pr-3 md1:bg-white md1:py-2 md1:px-2",children:e.map((s,i)=>r.jsx(dq,{item:s,onClick:()=>n(s)},i))})]}),RA=({setMessageText:t})=>{const{isOpenSmileMenu:e,setIsOpenSmileMenu:n,setIsOpenMenu:s}=v.useContext(Pn),i=ue(rt);return r.jsxs(r.Fragment,{children:[e&&on.createPortal(r.jsx(Y_,{children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(Qx,{title:"Часто используемые",data:r8,setMessageText:t}),r.jsx(Qx,{title:"Все",data:i8,setMessageText:t})]})}),document.getElementById("chat-mobile-smile")),r.jsx("div",{className:"self-center mr-3",children:i?r.jsx($t,{mobile:!0,color:"white",ElementTarget:()=>r.jsx("button",{type:"button",className:"flex items-center justify-center",children:r.jsx(LI,{className:"stroke-primary400",width:24,height:24})}),placement:"top-start",offset:[0,24],classNameRoot:"-ml-[95px] md1:-ml-[40px]",children:r.jsx("div",{className:"mmd1:w-[400px]",children:r.jsx(Y_,{children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(Qx,{title:"Часто используемые",data:r8,setMessageText:t}),r.jsx(Qx,{title:"Все",data:i8,setMessageText:t})]})})})}):r.jsx(r.Fragment,{children:r.jsx("button",{type:"button",className:"flex items-center justify-center",onClick:()=>{n(a=>!a),s(!1)},children:r.jsx(LI,{className:"stroke-primary400",width:20,height:20})})})})]})},t3e=t=>{navigator.clipboard.writeText(t)},n3e=()=>{const{cachedDialog:t,setCachedDialog:e}=v.useContext(Pn),{data:n,showPopper:s,setShowPopper:i,myMessage:a,userInfo:o,getDialog:l,currentDialog:c,currentDialogUserInfo:u,chatPinMessages:d,deleteMessage:h,setIsEdit:f,setForwardMessageId:p,setFilesUpload:g,audioData:m,messageCommentsOptions:_}=v.useContext(Ml),{chatReactionCreate:y,chatReactionDelete:x,chatReactionCreateFake:b,chatReactionDeleteFake:w}=ZH(),{pinMessageCreate:C,pinMessageDelete:j,pinMessageCreateFake:E,pinMessageDeleteFake:T,pinMessageGetAll:N}=d;return r.jsx($t,{mobileDefault:!0,color:"white",ElementTarget:()=>r.jsx(Q2,{className:"fill-white pointer-events-none",width:16,height:16}),classNameTarget:He(at.ChatMessageMore,a?at.ChatMessageMoreMe:at.ChatMessageMoreOther),classNameContent:"!p-0 !shadow-none bg-transparent-imp !rounded-none",placement:"bottom-start",event:"click",value:s===n.id,classNameTargetActive:at.ChatMessageMoreActive,onChange:P=>{n.loading||i(P?I=>I?!1:n.id:!1)},children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"bg-white shadow-primary p-1 rounded-[24px] flex gap-1",children:e3e.map((P,I)=>{var U;const B=(U=n.reactions)==null?void 0:U.filter(z=>z.user.id===o.id).find(z=>z.value===P);return r.jsx(dq,{className:"text-littleBig !rounded-full",item:P,onClick:async()=>{if(!n.reactions)return;i(!1);const z=t[c.id];z&&(B?w(z.result,e,n,o):b(z.result,e,P,n,o)),B?await x(B.id,c.id,n.id):await y(c.id,n.id,P),await l(c.id)}},I)})}),r.jsxs("div",{className:"bg-white shadow-primary flex flex-col items-start rounded-[10px] overflow-hidden min-w-64",children:[r.jsx(T3e,{}),c.dialog_type!==xt.CHANNEL&&r.jsx(r.Fragment,{children:r.jsxs("button",{className:at.ChatMessageButton,onClick:async()=>{i(!1);const P=t[c.id],I=n.is_pin;P&&(I?T(P.result,n):E(P.result,n)),I?await j(c.id,n.id):await C(c.id,n.id),N(c.id)},children:[r.jsx(wa,{width:15,height:15}),n.is_pin?"Открепить":" Закрепить"]})}),n.text&&r.jsxs("button",{className:at.ChatMessageButton,onClick:()=>{i(!1),t3e(n.text)},children:[r.jsx(wa,{width:15,height:15}),"Копировать текст"]}),!!(a&&!n.is_json&&!m)&&r.jsxs("button",{className:at.ChatMessageButton,onClick:()=>{i(!1);const P=n.photos?n.photos.map((I,B)=>({id:B+1,image:I,type:"image"})):[];g([...P]),f({text:n.text||"",text_old:n.text||"",id:n.id,dialog_id:c.id})},children:[r.jsx(Ns,{width:16,height:16,className:"stroke-blue stroke-[1.5px]"}),"Редактировать"]}),(!(c.dialog_type===xt.CHANNEL&&!u.myChannelOrGroup)||_.messageCommentsIsOpen)&&a&&r.jsxs("button",{className:at.ChatMessageButton,onClick:()=>{i(!1),h==null||h({ids:[n.id],dialog_id:c.id,myMessage:!!a,message_id:n.message_id})},children:[r.jsx(un,{width:15,height:15,className:"fill-red"}),"Удалить"]})]})]})})},s3e=()=>{const{data:t,messageCommentsOptions:e}=v.useContext(Ml),{messageCommentPanelOpen:n}=e,s=t.comments.reduce((i,a)=>(i.find(l=>l.id===a.user.id)||i.push(a.user),i),[]).slice(0,3);return r.jsxs("button",{type:"button",className:at.ChatMessageCommentsButton,onClick:()=>{n(t.dialog_id,t.id)},children:[!!s.length&&r.jsx("div",{className:"flex items-center gap-1",children:s.map((i,a)=>r.jsx("div",{style:{marginLeft:a>0?"-12px":"0"},children:r.jsx(Nn,{size:22,src:i.image,title:i.name})},i.id))}),n$(t.comment_count||0),r.jsx(wa,{className:"ml-auto fill-primary400"})]})},hq=({options:t})=>{const{textareaTriggers:e={},value:n="",onChange:s=()=>{},onFocus:i=()=>{},messageText:a,send:o=()=>{}}=t,{textareaRef:l,chatRootRef:c}=v.useContext(Pn),u=ue(rt),d=h=>{h.style.height="1em",h.style.height=h.scrollHeight+"px",h.scrollHeight>125?h.style.overflowY="auto":h.style.overflowY="hidden",c.current.style.setProperty("--viewportHeight",`${window.visualViewport.height}px`)};return v.useEffect(()=>{l.current&&d(l.current)},[{...e}]),v.useEffect(()=>{const h=()=>{c.current.style.setProperty("--viewportHeight",`${window.visualViewport.height}px`)};return h(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[]),r.jsx("textarea",{maxLength:2e3,ref:l,className:at.ChatTextarea,value:n,onChange:h=>{s(h),d(h.target)},onFocus:i,onKeyDown:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),a.trim()!==""&&o())},placeholder:`${u?"Введите сообщение":"Сообщение"}`})},r3e=()=>{const{messageCommentsOptions:t,getDialog:e}=v.useContext(Pn),{messageComments:n,messageCommentsIsOpen:s,messageCommentPanelClose:i,messageCommentCreate:a,messageCommentDelete:o,messageCommentGetAll:l,messagesLength:c,isLoadingComments:u}=t,[d,h]=v.useState(""),[f,p]=v.useState(!1),g=async()=>{try{h(""),await a(n.dialog_id,n.message_id,d),await e(n.dialog_id),await l(n.dialog_id,n.message_id)}catch{}};v.useEffect(()=>{const _=setTimeout(()=>{p(s)},20);return()=>clearTimeout(_)},[s]);const m={send:g,messageText:d,value:d,onChange:_=>{h(_.target.value)},onFocus:()=>{},textareaTriggers:{messageText:d}};return r.jsxs("div",{className:He("bg-white absolute w-full h-full z-[999] top-0 left-0 transition-all duration-300 flex flex-col",!s&&"hidden",!f&&"left-full invisible"),children:[r.jsxs("div",{className:"min-h-16 h-16 px-4 flex items-center border-b border-b-primary800 bg-white",children:[r.jsx("button",{type:"button",className:"flex-center-all",onClick:i,children:r.jsx(wa,{className:"rotate-180 fill-primary400",width:32,height:32})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("h3",{className:"title-3-5",children:"Обсуждение"}),r.jsx("p",{className:"text-primary400",children:n$(c)})]})]}),r.jsx("div",{className:"bg-[#e3efff] flex-grow flex flex-col overflow-hidden",children:f&&!u&&r.jsxs(r.Fragment,{children:[r.jsx(LA,{messages:n.data,variant:"pin",comments:!1,deleteMessage:async _=>{_&&(await o(_.ids[0],_.dialog_id,_.message_id),await l(_.dialog_id,_.message_id),await e(_.dialog_id),console.log("asd"))}}),r.jsxs("div",{className:"flex items-center gap-2 mmd1:max-w-[920px] w-full mmd1:mx-auto mb-4",children:[r.jsx("div",{className:at.ChatBottom,children:r.jsxs("div",{className:at.ChatBottomWrapper,children:[r.jsx(RA,{setMessageText:_=>{h(y=>`${y}${_}`)}}),r.jsx(hq,{options:m})]})}),r.jsx("button",{className:at.ChatBtnBlue,onClick:g,children:r.jsx(K2,{width:24,height:24,className:"fill-white"})})]})]})})]})},fq=t=>`${t.rooms===0?"Студия":`${t.rooms}-ком. квартира`} ${t.area} м²,  ${t.floor}/${t.building_floors} эт.`,i3e=()=>{var s,i;const{data:t,dataText:e,videoData:n}=v.useContext(Ml);return r.jsxs("div",{className:He(at.ChatMessageTime,(((s=t.photos)==null?void 0:s.length)||n)&&!e&&at.ChatMessageTimeBg),children:[ct(t.created_at).format("HH:mm"),t.loading?r.jsx("div",{className:"flex-center-all",title:"Сообщение отправляется",children:r.jsx(H7,{width:14,height:14,className:"fill-graySecond"})}):r.jsx(F1,{width:14,height:14,className:He("translate-y-[2px] fill-graySecond",((i=t.reads)==null?void 0:i.length)&&"!fill-blue")})]})},a3e=t=>!!(/^(https?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w\-\.\/?%&=@#]*)?$/.test(t)||/^www\.[\w-]+\.[\w-]+(\/.*)?$/.test(t)||/^[\w-]+\.[\w-]+(\/.*)?$/.test(t)&&!t.includes(" ")),o3e=t=>/^https?:\/\//i.test(t)?t:/^[a-zA-Z0-9-]+\.[a-zA-Z]{2,}/.test(t)||/^www\.[a-zA-Z0-9-]+\.[a-zA-Z]{2,}/.test(t)?`https://${t.replace(/^www\./,"")}`:t,l3e=()=>{const{data:t,dataText:e}=v.useContext(Ml);return t.is_json||!e?void 0:a3e(e)?r.jsx("a",{href:o3e(e),target:"_blank",className:at.ChatMessageTextLink,children:e}):r.jsx("span",{className:at.ChatMessageText,children:e})},c3e=()=>{const{currentDialog:t,setCurrentDialog:e,isLoadingDialog:n,setIsOpenSmileMenu:s,setIsOpenMenu:i,messages:a,deleteMessages:o,setCachedDialog:l}=v.useContext(Pn),c=ue(rt),[u,d]=_r();return r.jsxs("div",{className:He(at.ChatMain,!c&&`${Ye(t)?"":at.ChatMainActive}`),children:[r.jsxs("div",{className:at.ChatMainInner,children:[r.jsxs("div",{className:"min-h-16 h-16 px-4 flex items-center border-b border-b-primary800 bg-white",children:[!c&&!Ye(t)&&r.jsx("button",{onClick:()=>{s(!1),i(!1),e({}),l({}),u.delete("dialog"),d(u)},className:"mr-4",children:r.jsx(wa,{className:"rotate-180 fill-dark",width:26,height:26})}),r.jsx($Ne,{})]}),r.jsx(UNe,{}),r.jsx(h3e,{}),Ye(t)?r.jsx("div",{className:"title-2-5 h-full w-full flex items-center justify-center gap-3",children:n?r.jsxs(r.Fragment,{children:[r.jsx(oae,{width:25,height:25,className:"fill-dark"}),"Защищено сквозным шифрованием"]}):r.jsx(r.Fragment,{children:"Выберите, кому хотели бы написать"})}):r.jsx(LA,{messages:a,comments:t.dialog_type===xt.CHANNEL,deleteMessage:h=>{h&&o(h.ids,h.dialog_id,h.myMessage)}})]}),r.jsx(f3e,{}),r.jsx(r3e,{})]})},u3e=()=>{var m,_;const{chatBottomRef:t,isEdit:e,setIsEdit:n,messageText:s,sendMessage:i,isVoiceRecording:a,setMessageText:o,variantChat:l,filesUpload:c,setFilesUpload:u}=v.useContext(Pn),{deleteFile:d}=v.useContext(py),h=ue(rt),f=!!((e&&((m=e.text)!=null&&m.length)||s.length)&&!a||c.length),p=v.useCallback(()=>{if(c.length)return c.map((y,x)=>r.jsxs(Vp,{style:{width:75,height:75,borderRadius:8,flex:"0 0 75px",position:"relative"},children:[r.jsx("button",{onClick:()=>d(y.id),className:"absolute -right-1 -top-1 bg-dark rounded-full shadow-primary w-6 h-6 flex items-center justify-center pointer-events-auto",children:r.jsx(Pr,{width:18,height:18,className:"fill-white pointer-events-none"})}),r.jsx("img",{src:qt(y.image)})]},x))},[c]),g=v.useCallback(()=>r.jsxs(r.Fragment,{children:[e&&r.jsxs("div",{className:"py-3 mb-3 flex border-b border-b-primary800",children:[r.jsx(Ns,{width:22,height:22,className:"mr-3 mt-2 stroke-blue stroke-[1.5px] flex-shrink-0"}),r.jsxs("div",{className:"w-full",children:[r.jsx("p",{className:"text-blue mb-1",children:"Редактируемое сообщение"}),!!c.length&&r.jsx("div",{className:"mt-4 mb-2 py-3 flex items-center gap-3 overflow-x-auto scrollbarPrimary pointer-events-none",children:r.jsx(p,{})}),e.text_old]}),r.jsx("button",{className:"ml-auto h-max mt-2",onClick:()=>{n(!1),u([])},children:r.jsx(Pr,{width:24,height:24,className:"fill-primary400"})})]}),!!(!e&&c.length)&&r.jsx("div",{className:"py-3 mb-3 flex items-center gap-3 border-b border-b-primary800 overflow-x-auto scrollbarPrimary pointer-events-none",children:r.jsx(p,{})})]}),[c,e]);return r.jsxs("div",{className:"flex items-center gap-2 mmd1:max-w-[920px] mmd1:mx-auto",ref:t,children:[!a&&r.jsxs(r.Fragment,{children:[h&&l==="page"&&r.jsx(o8,{}),r.jsxs("div",{className:at.ChatBottom,children:[r.jsx(g,{}),r.jsxs("div",{className:at.ChatBottomWrapper,children:[(!h||l==="mini")&&r.jsx(o8,{}),r.jsx(RA,{setMessageText:y=>{o(x=>`${x}${y}`)}}),r.jsx(j3e,{}),r.jsx(g3e,{})]})]}),f&&r.jsx("button",{className:at.ChatBtnBlue,onClick:()=>i(),children:e?r.jsx(qie,{className:"fill-[#fff]"}):r.jsx(K2,{width:24,height:24,className:"fill-[#fff]"})})]}),!((_=e.text)!=null&&_.length)&&!s.length&&!c.length&&r.jsx(C3e,{})]})},LA=({messages:t=[],variant:e="default",comments:n=!0,deleteMessage:s})=>{const{currentDialog:i,currentDialogUserInfo:a,isLoadingDialog:o,mainBlockBar:l,filesUpload:c,setFilesUpload:u,isVisibleBtnArrow:d,setIsVisibleBtnArrow:h,isOrganization:f,blockUserOptins:p,getDialogs:g,setCurrentDialog:m,setDialogs:_}=v.useContext(Pn),y=ue(Ot),x=ue(rt),[b,w]=v.useState(!1),C=e==="default"&&!(i.dialog_type===xt.CHANNEL&&!a.myChannelOrGroup)&&!i.my_block&&!i.not_my_block,j=i.dialog_type===xt.CHAT||i.dialog_type===xt.GROUP,{handlePlayAudio:E,handleStopAudio:T,addFile:N,deleteFile:P,getInputProps:I,uploadFileOpen:B,filesLimitModal:U,setFilesLimitModal:z}=qEe({mainBlockBar:l,filesUpload:c,setFilesUpload:u,setIsVisibleBtnArrow:h,isLoadingDialog:o,currentDialog:i,messages:t});return r.jsxs(py.Provider,{value:{handlePlayAudio:E,handleStopAudio:T,addFile:N,deleteFile:P,getInputProps:I,uploadFileOpen:B,deleteMessage:s,showPopper:b,setShowPopper:w},children:[r.jsx(Y_,{className:He("pr-2 w-full",at.ChatMessages),ref:l,variant:"custom",children:r.jsx("div",{className:He(at.ChatMessagesInner,o&&"opacity-0"),children:t.length===0?r.jsxs("div",{className:"white-block w-max flex flex-col items-center mx-auto",children:[r.jsx(Nn,{size:90,src:a.image,title:a.name}),r.jsx("h3",{className:"title-3 mt-4",children:f?a.name:ks(a.name,a.surname)}),r.jsxs("div",{className:"mt-4 text-center text-primary400",children:[r.jsx("p",{children:"Здесь пока ничего нет..."}),r.jsx("p",{children:"Отправьте первое сообщение"})]})]}):t.map(G=>{var V;return r.jsxs("div",{children:[G.date&&r.jsx("div",{className:at.ChatDate,children:ct(G.date).format("D MMMM")}),(V=G.blocks)==null?void 0:V.map((J,Q)=>{const Y=J.user,oe=Y.id===y.id;return r.jsxs("div",{className:He(at.ChatMessageWrapper,oe&&at.ChatMessageWrapperMe),children:[x&&j&&!oe&&r.jsx(Nn,{size:40,src:Y.image,title:Y.name,className:at.ChatMessageUser}),!x&&i.dialog_type===xt.GROUP&&!oe&&r.jsx(Nn,{size:40,src:Y.image,title:Y.name,className:at.ChatMessageUser}),r.jsx("div",{className:He("flex flex-col flex-grow",oe&&"items-end"),children:J.messages.map(he=>r.jsx(d3e,{data:he,comments:n},he.id))})]},Q)})]},G.date)})})}),r.jsx("div",{id:"chat-mobile-actions"}),C&&r.jsx("div",{className:"py-4 mt-auto mr-2 mx-4",children:r.jsx(u3e,{})}),!!(i.my_block||i.not_my_block)&&r.jsx("div",{className:"py-4 mt-auto mr-2 mx-4",children:i.my_block?r.jsx(_e,{isLoading:p.isLoadingAction,variant:"red",className:"w-full uppercase",onClick:async()=>{p.setIsLoadingAction(!0),await p.blockUserDelete(a.id),m(G=>({...G,my_block:!1})),_(G=>G.map(V=>V.id===i.id?{...V,my_block:!1}:V)),p.setIsLoadingAction(!1)},children:"Разблокировать"}):i.not_my_block?r.jsx("div",{className:"w-full text-center bg-white px-4 py-4 font-medium rounded-xl",children:"Вас заблокировали"}):""}),r.jsx("div",{id:"chat-mobile-smile"}),r.jsx(Ze,{condition:U,children:r.jsxs(gt,{condition:!!U,set:z,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[400px]",modalContentClassNames:"!pt-8 !px-8"},children:[r.jsx("h3",{className:"title-3 mb-1",children:"Произошла ошибка"}),r.jsxs("p",{children:["Вы загрузили больше 10 файлов (",U,")"]})]})})]})},d3e=({data:t,comments:e=!0})=>{var C,j,E;const{currentDialog:n,currentDialogUserInfo:s,setIsEdit:i,setForwardMessageId:a,chatPinMessages:o,getDialog:l,setFilesUpload:c,messageCommentsOptions:u}=v.useContext(Pn),{deleteMessage:d,showPopper:h,setShowPopper:f}=v.useContext(py),p=ue(Ot),g=ue(rt),m=t.user.id===p.id,_=(C=t.files)==null?void 0:C.filter(T=>T.type==="video")[0],y=(j=t.files)==null?void 0:j.filter(T=>T.type==="audio")[0],x=t.is_json?JSON.parse(t.text):t.text,b=(E=t.photos)==null?void 0:E.length,w=He(at.ChatMessageBlock,m&&at.ChatMessageBlockMe,b&&at.ChatMessageBlockPhotos,y&&at.ChatMessageBlockAudio,_&&at.ChatMessageBlockVideo);if(!(!x&&!_&&!y&&!b))return r.jsx(Ml.Provider,{value:{data:t,myMessage:m,showPopper:h,setShowPopper:f,getDialog:l,userInfo:p,currentDialog:n,currentDialogUserInfo:s,chatPinMessages:o,deleteMessage:d,setIsEdit:i,setForwardMessageId:a,setFilesUpload:c,messageCommentsOptions:u,videoData:_,audioData:y,dataText:x},children:r.jsx("div",{className:He(at.ChatMessage,m&&at.ChatMessageMe,t.loading&&at.ChatMessageLoading),onClick:()=>{g||t.loading||f(T=>T?!1:t.id)},onContextMenu:T=>{g&&(t.loading||(T.preventDefault(),f(N=>N?!1:t.id)))},children:r.jsxs("div",{className:w,children:[r.jsxs("div",{className:"overflow-hidden rounded-[12px] relative",children:[t.user_visible&&r.jsx("span",{className:at.ChatMessageUserName,style:{color:F7(t.user.name)},children:p.id===t.user.id?"Вы":t.user.name}),!!(b||_||t.is_json)&&r.jsxs("div",{className:"flex flex-col gap-1 p-1.5",children:[r.jsx(JNe,{}),r.jsx(VNe,{})]}),r.jsx(QNe,{}),r.jsx(l3e,{}),r.jsx(i3e,{}),r.jsx(S3e,{})]}),r.jsx(n3e,{}),e&&r.jsx(s3e,{})]})})})},h3e=()=>{const{chatPinMessages:t}=v.useContext(Pn),{hasPinMessage:e,pinMessagePanelOpen:n,pinMessagesList:s,pinMessagesLength:i}=t;if(!e)return;const a=i===1?"min-h-full":i===2?"h-[19px]":"min-h-[13px]",o=HH(s);return r.jsx("div",{className:"min-h-16 h-16 px-4 py-3 border-b border-b-primary800 bg-white overflow-hidden",children:r.jsxs("div",{className:"flex gap-2 h-full",children:[r.jsx("div",{className:"flex flex-col gap-[1px] overflow-y-auto scrollbarPrimary scrollbarPrimaryNoVisible flex-shrink-0",children:s.map(l=>r.jsx("div",{className:He("bg-blue w-0.5 h-full opacity-60",o.id===l.id&&"opacity-100",a)},l.id))}),r.jsxs("div",{className:"flex flex-col justify-between",children:[r.jsx("h3",{className:"title-3-5",children:"Закреплённые сообщения"}),r.jsx("div",{className:"cut cut-1 max-w-[90%] text-dark",children:o.text})]}),r.jsx("button",{type:"button",className:"self-center ml-auto",onClick:n,children:r.jsx(lae,{width:24,height:24,className:"fill-dark"})})]})})},f3e=()=>{const{chatPinMessages:t,currentDialog:e}=v.useContext(Pn),{isPinMessagePanelOpen:n,pinMessagePanelClose:s,pinMessages:i,pinMessagesLength:a}=t,[o,l]=v.useState(!1);return v.useEffect(()=>{const c=setTimeout(()=>{l(n)},20);return()=>clearTimeout(c)},[n]),r.jsxs("div",{className:He("bg-white absolute w-full h-full z-[999] top-0 left-0 transition-all duration-300 flex flex-col",!n&&"hidden",!o&&"left-full invisible"),children:[r.jsxs("div",{className:"min-h-16 h-16 px-4 flex items-center border-b border-b-primary800 bg-white",children:[r.jsx("button",{type:"button",className:"flex-center-all",onClick:s,children:r.jsx(wa,{className:"rotate-180 fill-primary400",width:32,height:32})}),r.jsx("h3",{className:"title-3-5 ml-4",children:bde(a)})]}),r.jsx("div",{className:"bg-[#e3efff] flex-grow flex flex-col overflow-hidden",children:o&&r.jsx(LA,{messages:i,variant:"pin",comments:e.dialog_type===xt.CHANNEL})})]})},p3e="_SpecialOfferCreateRoot_8n3mk_1",m3e={SpecialOfferCreateRoot:p3e},Es=({control:t,errors:e,requiredValue:n="",placeholderText:s="Не выбрано",name:i="",nameLabel:a="",options:o=[],defaultValue:l=[],search:c,btnsActions:u,searchLabel:d,calcProp:h,setValue:f,paramsVisible:p=!1,disabled:g=!1,onClose:m=()=>{},setValuePermit:_=!1})=>{const[y,x]=v.useState(!1),[b,w]=_r();v.useEffect(()=>{_||f&&(o.length>0?f(i,l.filter(j=>o.find(E=>E.value===j.value))):f(i,[]))},[o,y]),v.useEffect(()=>{_||!l||!l.length||!f||y||(f(i,l),x(!0))},[l.length,f,i]);const C=(j,E)=>{if(h){const T=E.map(N=>N.id);j.onChange(E),T.length!==0&&!T.includes(1)&&!T.includes(2)&&!T.includes(3)&&!T.includes(6)&&f(i,[])}else if(j.onChange(E),p){const T=new URLSearchParams(b);E.length>0?E.forEach(N=>{T.set([i],N.value||""),w(T)}):(T.delete([i]),w(T))}};return r.jsx(Ir,{name:i,control:t,defaultValue:l,rules:{required:n,validate:j=>{if(n&&Ye(j))return typeof n=="string"?n:!1}},render:({field:j})=>r.jsx(yh,{nameLabel:a,options:o,value:j.value,onChange:E=>C(j,E),search:c,btnsActions:u,isValid:e?e[i]:!1,searchLabel:d,calcProp:h,placeholderText:s,onClose:m,disabled:g})})},a8=[{label:"ЖК",value:"complex"},{label:"Квартиры",value:"apartments"}],pq=({condition:t,set:e,id:n,defaultRecipient:s=null,defaultBuilding:i=null,request:a=null})=>{const{handleSubmit:o,control:l,watch:c,setValue:u,reset:d,formState:{errors:h}}=en(),[f,p]=v.useState([{label:"Скидка в рублях",value:"price"},{label:"Скидка в процентах",value:"percent"}]),g=ue(rt),m=c("type");c("complex");const _=c("apartments"),y=c("discount-price"),x=c("discount-percent"),b=c("special-condition"),[w,C]=v.useState([]),[j,E]=v.useState([]),T=c("date"),[N,P]=v.useState([]),[I,B]=v.useState([]),[U,z]=v.useState(!1),[G,V]=v.useState(Nm),J=s?{label:`${s.name||""} ${s.surname||""}`,value:s.id,image:s.image||"default"}:{};v.useEffect(()=>{u("type",f[0]),Ue(`/api/special-condition/building/${n}`).then(Y=>{B(Y.data),Y.data.length>0&&p(oe=>[...oe,{label:"Специальное условие",value:"special-condition"}])}),Ye(J)&&Ue("/seller-api/expanded-metrics",{type:"users",building_id:n}).then(Y=>{console.log(Y),P(Y.data)}),Oh(n).then(Y=>{E(Y)})},[]);const Q=Y=>{const oe={users:Y.users.map(he=>he.value),type:Y.type.value,discountable_type:Y.complex?"building":Y.apartments?"apartment":null,discountable_ids:Y.complex?[n]:Y.apartments?w.map(he=>he.value):null,discount:Y.type.value==="price"?Y["discount-price"]:Y["discount-percent"],"special-condition":Y.type.value==="special-condition"?Y["special-condition"].value:null,valid_till:Y.date};if(s&&i)oe.discountable_ids=[i.id],oe.discountable_type="building";else if(!oe.discountable_type)return;oe["discount-price"]===null&&delete oe["discount-price"],oe["discount-percent"]===null&&delete oe["discount-percent"],oe["special-condition"]===null&&delete oe["special-condition"],z(!0),Me("/seller-api/special-offers/send",oe).then(he=>{d(),z(!1),e(!1),a&&a()})};return r.jsx(gt,{options:{overlayClassNames:"_right",modalClassNames:m3e.SpecialOfferCreateRoot},set:e,condition:t,children:r.jsxs("form",{onSubmit:o(Q),className:"grid mmd1:grid-cols-[350px_1fr] gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"title-2",children:"Специальное предложение"}),r.jsx("p",{className:"mt-4",children:"Отправим его тем, кто интересовался вашим объявлением, но пока не связался с вами."}),r.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[r.jsx(Es,{control:l,nameLabel:"Получатели",options:s?[J]:N.map(Y=>({label:`${Y.name} ${Y.surname}`,value:Y.id,image:Y.image||"default"})),name:"users",search:!0,btnsActions:!0,searchLabel:"Поиск по имени",requiredValue:!0,errors:h,disabled:!Ye(J),defaultValue:s?[J]:[]}),i?r.jsx(s4,{data:{...i,title:i.name||i.title}}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex items-center gap-4",children:r.jsx(km,{control:l,setValue:u,checkboxes:a8,defaultValue:a8[0]})}),!!_&&r.jsx(Fm,{building_id:n,frames:j,setData:C,title:"",className:"!flex !flex-col",areaField:!1,filterFields:G,setFilterFields:V})]}),r.jsx(fn,{control:l,nameLabel:"Тип предложения",options:f,name:"type",requiredValue:!0,errors:h}),(m==null?void 0:m.value)==="price"&&r.jsx(Qe,{control:l,name:"discount-price",beforeText:"Скидка",afterText:"₽",requiredValue:!0,errors:h,onlyNumber:!0,convertNumber:!0}),(m==null?void 0:m.value)==="percent"&&r.jsx(Qe,{control:l,name:"discount-percent",beforeText:"Скидка",afterText:"%",requiredValue:!0,errors:h,onlyNumberSemicolon:!0,maxLength:4}),(m==null?void 0:m.value)==="special-condition"&&r.jsx(fn,{control:l,nameLabel:"Специальное условие",options:I.map(Y=>({value:Y.id,label:Y.name})),name:"special-condition",requiredValue:!0,errors:h}),r.jsx(Qe,{control:l,datePicker:!0,beforeText:"Срок действия до",name:"date",requiredValue:!0,errors:h})]}),r.jsx(_e,{className:"mt-4 w-full",disabled:U,children:U?r.jsx(fd,{size:16,variant:"second"}):"Отправить предложение"})]}),g&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3",children:"Покупатели получат такое сообщение"}),r.jsxs("div",{className:"white-block-small mt-6",children:[r.jsxs("p",{children:["Продавец предлагает вам ",(m==null?void 0:m.value)==="price"&&`скидку ${y||0} ₽`,(m==null?void 0:m.value)==="percent"&&`скидку ${x||0} %`,(m==null?void 0:m.value)==="special-condition"&&`${(b==null?void 0:b.label)||""}`,". Это потому, что вы интересовались его объявлением."]}),r.jsxs("p",{className:"mt-3",children:["Если вам интересно это предложение, нажмите кнопку ниже. ",r.jsx("br",{})," Оно будет действовать до ",T?`${ct(h_(T,"DD-MM-YYYY"),"DD.MM.YYYY").format("D MMMM")} включительно — до 23:59 по Москве. `:"..."]})]})]})]})})},o8=()=>{const{setVideoCallActive:t,dialogBuilding:e,currentDialog:n,getDialog:s,chatRootRef:i,isOpenMenu:a,setIsOpenMenu:o,setIsOpenSmileMenu:l,variantChat:c,setCreateEventModal:u}=v.useContext(Pn),{getInputProps:d,uploadFileOpen:h,addFile:f}=v.useContext(py),p=ue(rt),g=ue(Ot),m=hd(g),_=xm(g),[y,x]=v.useState(!1),b=v.useRef(null),w=v.useRef(null),C=E=>{const T=E.target.files[0];T&&(f([T]),E.target.value=null)},j=()=>{var E;return r.jsxs("div",{className:at.ChatMenuRoot,children:[(!n.organization||((E=g==null?void 0:g.role)==null?void 0:E.id)===pn.id)&&r.jsxs("button",{type:"button",className:at.ChatMenuItem,onClick:()=>t(!0),children:[r.jsx("div",{className:at.ChatMenuItemIcon,children:r.jsx(tae,{className:"stroke-orange stroke-[2px]"})}),r.jsx("span",{className:at.ChatMenuText,children:"Видеозвонок"})]}),r.jsxs("button",{type:"button",className:at.ChatMenuItem,onClick:h,children:[r.jsx("div",{className:at.ChatMenuItemIcon,children:r.jsx(IE,{className:"fill-blue"})}),r.jsx("span",{className:at.ChatMenuText,children:p?"Фото/видео/документ":"Галерея"})]}),!p&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.ChatMenuItem,children:[r.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:C,style:{display:"none"},ref:b}),r.jsxs("button",{type:"button",onClick:T=>{T.preventDefault(),b.current.click()},className:at.ChatMenuItemBtn,children:[r.jsx("div",{className:at.ChatMenuItemIcon,children:r.jsx(Zie,{className:"fill-red"})}),r.jsx("span",{className:at.ChatMenuText,children:"Сделать фото"})]})]}),!_&&r.jsxs("div",{className:at.ChatMenuItem,children:[r.jsx("input",{type:"file",accept:"video/*",capture:"environment",onChange:C,style:{display:"none"},ref:w}),r.jsxs("button",{type:"button",onClick:T=>{T.preventDefault(),w.current.click()},className:at.ChatMenuItemBtn,children:[r.jsx("div",{className:at.ChatMenuItemIcon,children:r.jsx(rae,{className:"fill-blue"})}),r.jsx("span",{className:at.ChatMenuText,children:"Видеозаметка"})]})]})]}),m&&e&&n.companion&&r.jsx(r.Fragment,{children:r.jsxs("button",{type:"button",onClick:()=>x(!0),className:at.ChatMenuItem,children:[r.jsx("div",{className:at.ChatMenuItemIcon,children:r.jsx(iae,{className:"fill-blue"})}),r.jsx("span",{className:at.ChatMenuText,children:"Специальное предложение"})]})}),(m||!1)&&r.jsx(r.Fragment,{children:r.jsxs("button",{type:"button",className:at.ChatMenuItem,onClick:()=>u(!0),children:[r.jsx("div",{className:at.ChatMenuItemIcon,children:r.jsx(IE,{className:"fill-blue"})}),r.jsx("span",{className:at.ChatMenuText,children:"Мероприятие"})]})})]})};return r.jsxs(r.Fragment,{children:[a&&!p&&on.createPortal(r.jsx(j,{}),document.getElementById("chat-mobile-actions")),r.jsxs("div",{className:He("flex-center-all self-center md1:self-center",(c==="mini"||!p)&&"mr-2"),children:[p?r.jsxs(r.Fragment,{children:[r.jsx("input",{...d()}),r.jsx($t,{color:"white",ElementTarget:()=>r.jsx(r.Fragment,{children:c==="page"?r.jsx("button",{type:"button",className:at.ChatMenuBtn,children:"Меню"}):r.jsx("button",{type:"button",className:"flex-center-all",children:r.jsx(RI,{className:"stroke-primary400"})})}),placement:"top-start",offset:[0,12],classNameContent:"!p-0 overflow-hidden",children:r.jsx(j,{})})]}):r.jsx("button",{type:"button",className:at.ChatMenuBtn,onClick:()=>{o(E=>!E),l(!1)},children:r.jsx(RI,{className:"stroke-primary400"})}),(e==null?void 0:e.id)&&r.jsx(Ze,{condition:y,children:r.jsx(pq,{condition:y,set:x,id:e.id,defaultRecipient:n.companion,defaultBuilding:e,request:()=>{s(n.id)}})})]})]})},g3e=()=>{v.useContext(Pn);const[t,e]=v.useState(!1),[n,s]=v.useState(null),[i,a]=v.useState(null),[o,l]=v.useState(""),[c,u]=v.useState(""),d=ue(Ot),h=ue(rt);return r.jsxs("div",{className:"self-center ml-3",children:[r.jsx("button",{type:"button",className:"flex items-center justify-center",title:"Отправить подарок",onClick:()=>e(!0),children:r.jsx(aae,{className:"fill-blue",width:24,height:24})}),r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[470px]",modalContentClassNames:"!px-6"},children:[r.jsxs("div",{className:"text-defaultMax font-medium text-right mb-4",children:["Баланс ",r.jsx("br",{}),"0 ₽"]}),i?r.jsx(kn,{label:"Сумма",size:"48",className:"mt-4",placeholder:"Введите желаемую сумму",after:"₽",onChange:f=>l(f),value:o,onlyNumber:!0,convertNumber:!0,maxValue:"1000000000",maxLength:9}):r.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4",children:[r.jsxs("button",{type:"button",className:"bg-primary700 rounded-[20px] p-5 flex flex-col items-center gap-2",onClick:()=>s(1e4),children:[r.jsx(Px,{width:55,height:55,className:"stroke-dark"}),r.jsx("p",{className:"text-defaultMax",children:"10 000 ₽"})]}),r.jsxs("button",{type:"button",className:"bg-primary700 rounded-[20px] p-5 flex flex-col items-center gap-2",onClick:()=>s(2e4),children:[r.jsx(Px,{width:55,height:55,className:"stroke-dark"}),r.jsx("p",{className:"text-defaultMax",children:"20 000 ₽"})]}),r.jsxs("button",{type:"button",className:"bg-primary700 rounded-[20px] p-5 flex flex-col items-center gap-2",onClick:()=>s(5e4),children:[r.jsx(Px,{width:55,height:55,className:"stroke-dark"}),r.jsx("p",{className:"text-defaultMax",children:"50 000 ₽"})]})]}),r.jsxs("div",{className:"mt-4 flex justify-between gap-4 items-center",children:[r.jsx("button",{className:"blue-link text-defaultMax",onClick:()=>a(f=>!f),children:i?"Скрыть":"Своя сумма"}),i&&r.jsx("button",{type:"button",className:"blue-link",onClick:()=>{o.length?s(o):console.log("ошибка")},children:"Отправить"})]})]})}),r.jsx(Ze,{condition:!!n,children:r.jsxs(gt,{condition:!!n,set:s,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[470px]",modalContentClassNames:"!px-6"},children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("h3",{className:"text-defaultMax text-center",children:["Вам отправил(а) ",r.jsx("span",{className:"font-medium",children:d.name}),r.jsx("br",{}),"подарок на сумму ",r.jsxs("span",{className:"font-medium",children:[pt(n||"")," ₽"]})]}),r.jsxs("div",{className:"bg-primary700 rounded-[20px] py-5 px-8 flex justify-center flex-col items-center gap-2 mt-4",children:[r.jsx(Px,{width:55,height:55,className:"stroke-dark"}),r.jsx("div",{className:"text-defaultMax",children:r.jsxs("p",{children:["Подарок от ",d.name]})})]})]}),r.jsx($y,{className:"mt-4",classNameTextarea:"!pr-10",maxLength:200,value:c,onChange:f=>u(f),placeholder:"Ваше сообщение",minHeight:80,smile:h}),r.jsxs(_e,{className:"w-full mt-6",children:["Отправить подарок  ",pt(n||"")," ₽"]})]})})]})},v3e=[{name:"access",title:"Ошибка доступа к микрофону",descr:"Убедитесь что у вас подключён микрофон"}],y3e=async(t,e,n,s,i,a)=>{try{const o=await navigator.mediaDevices.getUserMedia({audio:!0}),l=new MediaRecorder(o);t.current=l;const c=[];l.ondataavailable=u=>{u.data.size>0&&c.push(u.data)},l.onstop=async()=>{const u=new Blob(c,{type:"audio/ogg"});e(!1),a(u)},l.start(),e(!0),w3e(s,i)}catch(o){let l="access";n({...v3e.find(c=>c.name===l),error:o})}},x3e=(t,e,n)=>{t.current=null,e(!1),mq(n)},b3e=(t,e,n)=>{t.current.stop(),t.current=null,e(!1),mq(n)},_3e=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/60),s=e%60,i=Math.floor(t%1e3/100);return`${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}:${i}`},w3e=(t,e)=>{e(0),t.current=setInterval(()=>{e(n=>n+100)},100)},mq=t=>{clearInterval(t.current),t.current=null},C3e=()=>{const{sendVoiceRecorder:t,isVoiceRecording:e,setIsVoiceRecording:n,variantChat:s}=v.useContext(Pn),[i,a]=v.useState(""),o=v.useRef(null),[l,c]=v.useState(0),u=v.useRef(null);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:e?at.ChatBottom:"",children:e?r.jsxs("div",{className:"h-8 flex justify-between items-center w-full",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-[72px]",children:[r.jsx("div",{className:at.ChatBlinkCircle}),_3e(l)]}),r.jsx("button",{className:"text-blue font-medium text-defaultMax",onClick:()=>x3e(o,n,u),children:"Отмена"})]}):r.jsx("button",{className:at.ChatBtnBlue,onClick:()=>y3e(o,n,a,u,c,t),children:r.jsx(Jie,{width:24,height:24,className:"stroke-[#fff]"})})}),e&&r.jsx("button",{className:at.ChatBtnBlue,onClick:()=>b3e(o,n,u),children:r.jsx(K2,{width:24,height:24,className:"fill-white"})}),r.jsx(Ze,{condition:i,children:r.jsx(gt,{condition:!!i,set:a,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[400px]",modalContentClassNames:"!pt-[50px]"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"title-3",children:i.title}),r.jsx("p",{className:"mt-1",children:i.descr})]})})})]})},S3e=()=>{const{cachedDialog:t,setCachedDialog:e}=v.useContext(Pn),{data:n,userInfo:s,getDialog:i,currentDialog:a}=v.useContext(Ml),o=n.reactions,l=3,{chatReactionCreate:c,chatReactionDelete:u,chatReactionCreateFake:d,chatReactionDeleteFake:h}=ZH();if(!(o!=null&&o.length))return;const f=[...o].sort((m,_)=>(_.user.id===s.id)-(m.user.id===s.id)),p=Object.values(f.reduce((m,_)=>(m[_.value]||(m[_.value]={value:_.value,items:[]}),m[_.value].items.push(_),m[_.value].count=m[_.value].items.length,m),{})),g=async(m,_)=>{var x;const y=t[a.id];if(_)y&&h(y.result,e,n,s),await u(_.id,_.dialog_id,_.message_id),await i(_.dialog_id);else{const b=(x=m.items)==null?void 0:x[0];if(!b)return;y&&d(y.result,e,b.value,n,s),await c(b.dialog_id,b.message_id,b.value),await i(b.dialog_id)}};return r.jsx("div",{className:"ml-2 mb-2 flex flex-wrap gap-2",children:p.map((m,_)=>{const y=m.items.find(x=>x.user.id===s.id);return r.jsxs("div",{className:He("flex items-center gap-1 bg-primary100 py-1 px-2 rounded-full cursor-pointer",y&&"!bg-lightBlue"),onClick:()=>{g(m,y)},children:[r.jsx("span",{children:m.value}),m.count>l?r.jsx("span",{className:He(y&&"!text-white"),children:m.count}):r.jsx(r.Fragment,{children:m.items.map((x,b)=>r.jsx("div",{style:{marginLeft:b>0?"-10px":"0"},children:r.jsx(Nn,{size:18,src:x.user.image,title:x.user.name})},x.id))})]},_)})})},j3e=()=>{const{sendMessage:t,isEdit:e,setIsEdit:n,messageText:s,setMessageText:i,setIsOpenSmileMenu:a,setIsOpenMenu:o,filesUpload:l}=v.useContext(Pn),c={send:t,messageText:s,value:e?e.text:s,onChange:u=>{e?n(d=>({...d,text:u.target.value})):i(u.target.value)},onFocus:()=>{a(!1),o(!1)},textareaTriggers:{isEdit:e,filesUpload:l,messageText:s}};return r.jsx(hq,{options:c})},T3e=()=>{const{userInfo:t,currentDialog:e}=v.useContext(Pn),{myMessage:n,data:{reads:s}}=v.useContext(Ml),[i,a]=v.useState(!1),o=s==null?void 0:s.length,l=e.dialog_type;if(!(l===xt.CHANNEL||!o)){if(l===xt.CHAT){if(!n)return;const c=s[0];return c?r.jsxs("div",{className:"flex items-center gap-2 p-3 border-b border-b-primary700 w-full",children:[r.jsx(F1,{width:16,height:16,className:"!fill-blue"}),r.jsx("span",{className:"text-dark text-small",children:U$(c.updated_at)})]}):void 0}return r.jsx("div",{className:"mb-2 border-b border-b-primary700 w-full",children:r.jsx($t,{mobile:!0,color:"white",onChange:a,value:i,ElementTarget:()=>r.jsxs("div",{className:He("flex gap-3 items-center p-3 cursor-pointer",i&&"bg-hoverPrimary"),children:[r.jsx(F1,{width:16,height:16,className:"!fill-blue"}),r.jsx("span",{className:"text-defaultMax",children:_de(o)}),r.jsx("div",{className:"flex ml-auto",children:s.slice(0,3).map((c,u)=>r.jsx("div",{style:{marginLeft:u>0?"-8px":"0"},children:r.jsx(Nn,{size:25,src:c.user.image,title:c.user.name})},u))})]}),classNameContent:"!shadow-none !p-0",placement:"right-start",offset:[0,0],children:r.jsx("div",{className:"bg-white shadow-primary px-3 py-3 rounded-xl flex flex-col gap-4",children:s.map(c=>r.jsxs("div",{className:"flex gap-3 items-center",children:[r.jsx(Nn,{size:32,src:c.user.image,title:c.user.name}),r.jsxs("div",{className:"text-verySmall flex flex-col gap-0.5",children:[r.jsx("span",{className:"font-medium",children:t.id===c.user.id?"Вы":c.user.name}),r.jsxs("span",{className:"min-w-max text-primary400",children:[r.jsx(F1,{width:12,height:12,className:He("translate-y-[2px] mr-1 !fill-blue")}),S4(c.updated_at)?ct(c.updated_at).format("HH:mm"):ct(c.updated_at).format("D MMM в HH:mm")]})]})]},c.id))})})})}},E3e=()=>{const{chatSearchDialog:t}=v.useContext(Pn),{isSearchPanelOpen:e,closeSearchPanel:n,searchValue:s,setSearchValue:i,isLoading:a,data:o}=t;if(e)return r.jsxs("div",{className:He(at.ChatSidebarRight),style:{width:"350px"},children:[r.jsxs("div",{className:"min-h-16 h-16 flex items-center gap-4",children:[r.jsx("button",{type:"button",onClick:n,children:r.jsx(Pr,{width:24,height:24})}),r.jsx("h3",{className:"title-3",children:"Поиск сообщения"})]}),r.jsx("div",{className:"",children:r.jsx(kn,{placeholder:"Поиск",onChange:l=>i(l),value:s})}),r.jsx("div",{children:r.jsxs("p",{className:"text-center my-8",children:[a&&"Поиск сообщений...",!a&&!o.length&&"Сообщения не найдены"]})})]})},gq=({options:t})=>{var T;const[e,n]=v.useState(!1),{setChannelGroupSettingsModal:s,setChannelGroupInfoModal:i,setCurrentDialog:a,setCurrentDialogSettings:o,updateDialogsAndDialogSettings:l,userInfo:c,setCachedDialog:u,blockUserOptins:d,currentDialogUserInfo:h,getDialogs:f,setDialogs:p,currentDialog:g}=v.useContext(Pn),{data:m,showPopper:_,setShowPopper:y,classNameTarget:x,ElementTargetLayout:b}=t,w=m.dialog_type===xt.CHAT,C=m.dialog_type===xt.CHANNEL,j=m.dialog_type===xt.GROUP,E=!!((C||j)&&((T=m.owner)==null?void 0:T.id)===c.id);return r.jsxs(r.Fragment,{children:[r.jsx($t,{mobile:!0,color:"white",ElementTarget:()=>b,classNameContent:"!p-0 overflow-hidden",classNameTarget:He(x),placement:"bottom",event:"click",value:_==m.id,onChange:N=>{y(N?P=>P?!1:m.id:!1)},children:r.jsxs("div",{className:"flex flex-col items-center",children:[(C||j)&&r.jsxs("div",{className:at.ChatMessageButton,onClick:()=>{y(!1),o(m),i(!0)},children:[r.jsx(Xi,{width:15,height:15}),"Информация"]}),E&&r.jsxs("div",{className:at.ChatMessageButton,onClick:()=>{y(!1),s(m)},children:[r.jsx(Xi,{width:15,height:15}),"Управление"]}),(C||j)&&E&&r.jsxs("div",{className:at.ChatMessageButton,onClick:()=>{y(!1),n(m.id)},children:[r.jsx(Xi,{width:15,height:15}),"Добавить участников"]}),r.jsxs("div",{className:at.ChatMessageButton,onClick:async()=>{y(!1),E?await Ue(`/api/dialogs/${m.id}/delete`):C||j?await Ue(`/api/dialogs/${m.id}/user/leave`):w&&await Ue(`/api/dialogs/${m.id}/delete`),a({}),u({}),o({}),l()},children:[r.jsx(un,{width:15,height:15,className:"fill-red"}),E?"Удалить и покинуть":`${C?"Покинуть канал":j?"Покинуть группу":"Удалить диалог"}`]}),!m.organization&&w&&c.role.id===sn.id&&r.jsxs("div",{className:at.ChatMessageButton,onClick:async()=>{y(!1);const N=m.companions.find(P=>P.id!==c.id);N!=null&&N.id&&(m.my_block?(await d.blockUserDelete(N.id),a(P=>P.id===g.id?{...P,my_block:!1}:P),p(P=>P.map(I=>I.id===m.id?{...I,my_block:!1}:I))):(await d.blockUserCreate(N.id),a(P=>P.id===g.id?{...P,my_block:!0}:P),p(P=>P.map(I=>I.id===m.id?{...I,my_block:!0}:I))))},children:[r.jsx(cae,{className:"stroke-red"}),m.my_block?"Разблокировать пользователя":"Заблокировать пользователя"]})]})}),E&&r.jsx(Ze,{condition:e,children:r.jsx(OA,{condition:e,set:n,selectedType:"add_to_dialog",options:{title:"Добавить участников"},onChange:async(N,P)=>{try{await Me(`/api/dialogs/${N}/user/add`,{user_ids:P}),await l()}catch(I){console.log(I)}}})})]})},$y=t=>{const{className:e="",classNameTextarea:n="",placeholder:s,name:i,onChange:a=()=>{},value:o="",maxLength:l=null,isValid:c,children:u,minHeight:d=140,smile:h=!1}=t,f=v.useRef(null),p=`${kj.TextareaRoot} ${e}`,g=()=>{a(f.current.value),f.current.style.height="0",f.current.style.height=`${f.current.scrollHeight}px`};return v.useEffect(()=>{f.current&&(f.current.style.height="0",f.current.style.height=`${f.current.scrollHeight}px`)},[f.current]),r.jsxs("div",{className:`${p}`,"data-error":c?c.ref.name:void 0,children:[r.jsx("textarea",{ref:f,name:i,maxLength:l,className:`${kj.TextareaWrapper} ${c?kj.TextareaError:""} ${n}`,value:o||"",onChange:g,placeholder:s,style:{minHeight:`${qk(d)?`${d}px`:d}`}}),h&&r.jsx("div",{className:"absolute top-3 right-0",children:r.jsx(RA,{setMessageText:l?o.length<l?m=>{a(`${f.current.value}${m}`),f.current.style.height="0",f.current.style.height=`${f.current.scrollHeight}px`}:()=>{}:m=>{a(`${f.current.value}${m}`),f.current.style.height="0",f.current.style.height=`${f.current.scrollHeight}px`}})}),u]})},bi=({control:t,errors:e,requiredValue:n="",name:s="",defaultValue:i="",maxLength:a,placeholder:o,minHeight:l=140})=>r.jsx(Ir,{control:t,name:s,defaultValue:i,rules:{required:n},render:({field:c})=>r.jsx($y,{maxLength:a,value:c.value,onChange:u=>c.onChange(u),placeholder:o,minHeight:l,isValid:e?e[s]:!1,children:r.jsx(iw,{errors:e,field:s})})});function N3e(t){let e=t.split(":");for(let n=0;n<e.length;n++)e[n].length<2&&(e[n]=e[n].padStart(2,"0"));return e.join(":")}const sm=({conditionModal:t,setModal:e,options:n,sending:s=()=>{},sendingError:i=()=>{}})=>{var B,U,z,G;const{handleSubmit:a,control:o,formState:{errors:l}}=en(),[c,u]=v.useState(!1),[d,h]=v.useState({}),[f,p]=v.useState({}),[g,m]=v.useState([]),[_,y]=v.useState([]),[x,b]=v.useState([]),[w,C]=v.useState(null),[j,E]=v.useState(null),[T,N]=v.useState(Nm);v.useEffect(()=>{var V;(V=n.currentVideoData)!=null&&V.url&&Ue("/api/video-url",{url:[n.currentVideoData.url]}).then(J=>{const Q=J.data[0];h(Q),Ye(Q.interactiveEl)||p(Q.interactiveEl),Ye(Q.timeCodes)||b(Q.timeCodes),Q.image_url&&setTimeout(()=>{C({id:1,image:qt(Q.image_url)})},100),Q.filters_info&&N(JSON.parse(Q.filters_info)),Ue(`/api/video/${Q.id}/apartments`).then(Y=>{y(Y.data)})})},[(B=n.currentVideoData)==null?void 0:B.url]);const P=()=>{b(V=>[...V,{id:hc(),time:"",title:""}])},I=async V=>{var Y,oe,he;u(!0);const J={...V,building_id:n.building_id,timeCodes:x,interactiveEl:f,is_short:n.is_short,cards:g.map(me=>me.value),author:V.author&&!Ye(V.author)?V.author.value:"",video:[{new_video:!1,video:d.video_url,id:1}],image:w?[w]:null,tags:V.tags||[],filtersInfo:JSON.stringify(T)};j&&await nje(j).then(me=>{J.image=[cr([me])[0]]});const Q=new FormData;J.video=ts(J.video,"video","video"),ss(J.video,Q,"video","video"),J.video=ns(J.video,"video","video"),J.video=J.video[0],(oe=(Y=J.interactiveEl)==null?void 0:Y.type)!=null&&oe.value||(J.interactiveEl={}),(he=J.interactiveEl)!=null&&he.time&&(J.interactiveEl.time=N3e(J.interactiveEl.time)),J.image&&(J.image=ts(J.image),ss(J.image,Q),J.image=ns(J.image),J.image={...J.image[0],image:J.image[0].image.replace(Wi,"")}),Q.append("data",JSON.stringify(J)),Me(`/admin-api/edit/video/${d.id}`,Q,{"Content-Type":"multipart/form-data"}).then(()=>{Me(`/admin-api/assign/video/${d.id}/apartments`,{apartments_ids:J.cards}).then(()=>{e(!1),s()})}).catch(me=>{e(!1),i()})};return r.jsx(gt,{set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:t,style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1250px"},closeBtn:!1,ModalHeader:()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:n.is_short?"Редактировать Клип":"Редактировать видео"})}),ModalFooter:()=>r.jsx("div",{className:"px-14 py-6",children:r.jsx(_e,{onClick:a(I),className:"w-full",children:"Сохранить"})}),ModalChildren:c?()=>r.jsx(d4,{className:"absolute inset-0 z-[100] flex flex-col items-center justify-center",classNameSpinner:"!w-[60px] !h-[60px]",children:r.jsx("span",{className:"mt-8 text-bigSmall",children:"Видео загружается..."})}):null,children:!Ye(d)&&r.jsxs(ea,{className:"grid-cols-[70%_1fr] !gap-6",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"grid grid-cols-2 gap-2"}),r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-4",children:"Обложка"}),r.jsxs(Xs,{modules:[xi],slidesPerView:6.5,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:12,className:"md1:px-4 md1:-mx-4",children:[r.jsx(Tn,{children:r.jsx(IA,{className:`!w-full !h-[200px] block-hover-overlay ${w!=null&&w.image&&j===null?"block-hover-overlay-active":""}`,effect:!1,defaultLayout:()=>r.jsx("div",{className:"bg-dark w-full h-full flex items-center justify-center",children:r.jsx(IE,{width:32,height:32,className:"fill-white"})}),image:w==null?void 0:w.image,onChange:V=>{C(V?cr(V)[0]:null),E(null)},children:r.jsx(Ph,{readOnly:!0,className:`!absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 group-hover:opacity-100 transition-all ${w&&(w!=null&&w.image)?"":"opacity-0"} ${j!==null?"opacity-0":""}`,checked:j===null})})}),Array.from({length:10},(V,J)=>(J*(d.video_duration?d.video_duration-.5:10)/9).toFixed(1)).map((V,J)=>{const Q=`${Wi}/api/video/${d.id}/preview/${V}`;return r.jsxs(Tn,{onClick:()=>{E(Q)},className:`block-hover-overlay rounded-xl group ${j===Q?"block-hover-overlay-active":""}`,children:[r.jsx(Ph,{readOnly:!0,className:`!absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 group-hover:opacity-100 transition-all ${j!==Q?"opacity-0":""}`,checked:j===Q}),r.jsx("img",{src:Q,className:"!h-[200px]"})]},J)}),r.jsx(ho,{centery:"true",disabled:!0,className:"slider-btn-prev !left-1.5 !w-8 !h-8"}),r.jsx(fo,{centery:"true",className:"slider-btn-next !right-1.5 !w-8 !h-8"})]})]}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Введите название или описание"}),r.jsx(bi,{control:o,maxLength:3e3,name:"name",placeholder:"Напишите что-нибудь...",defaultValue:d.name,requiredValue:!0,errors:l})]}),r.jsx("div",{className:"mt-3 w-1/2",children:r.jsx(fn,{control:o,nameLabel:"Автор",defaultOption:!0,placeholderName:n.developer?`${n.developer.pos} ${n.developer.name}`:"Не выбрано",options:n.specialists,name:"author",defaultValue:(U=n.specialists)==null?void 0:U.find(V=>{var J;return V.value===((J=d.author)==null?void 0:J.id)||V.value===n.authorDefault}),disabled:n.authorDefault})}),r.jsx("div",{className:"mt-8",children:r.jsx(ps,{variant:"toggle",control:o,option:{value:"show_on_homepage",label:"Показать на главной"},name:"show_on_homepage",defaultValue:d.show_on_homepage})}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Интерактивный элемент"}),r.jsxs("div",{className:"grid grid-cols-[400px_320px] gap-4",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(vi,{className:"flex-grow",nameLabel:"Тип",options:[{label:"Записаться на просмотр",value:"record-viewing"}],onChange:V=>p(J=>({...J,type:V})),value:f.type,defaultOption:!0})}),((z=f.type)==null?void 0:z.value)&&r.jsx(kn,{before:"Появляется на",after:"(чч.мм.сс)",mask:"hhmmssMask",value:f.time||"00:00:00",onChange:V=>p(J=>({...J,time:V}))})]})]}),r.jsx("div",{className:"mt-8",children:r.jsx(Fm,{className:"!flex !flex-col",building_id:n.building_id,frames:n.frames,setData:m,defaultValue:_,filterFields:T,setFilterFields:N})}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Таймкоды"}),x.length>0&&r.jsx("div",{className:"flex flex-col gap-4 mb-4",children:x.map(V=>r.jsxs("div",{className:"grid grid-cols-[250px_300px_max-content] gap-2",children:[r.jsx(kn,{before:"Время",after:"(чч.мм.сс)",mask:"hhmmssMask",value:x.find(J=>J.id===V.id).time||"00:00:00",onChange:J=>{b(Q=>Q.map(Y=>Y.id===V.id?{...Y,time:J}:Y))}}),r.jsx(kn,{before:"Название",value:x.find(J=>J.id===V.id).title,onChange:J=>{b(Q=>Q.map(Y=>Y.id===V.id?{...Y,title:J}:Y))}}),r.jsx(Xu,{className:"ml-2",onClick:()=>{b(J=>J.filter(Q=>Q.id!==V.id))}})]},V.id))}),r.jsx(_e,{type:"button",size:"Small",onClick:P,children:"Добавить"})]}),!!((G=n.tags)!=null&&G.length)&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Теги"}),r.jsx(_c,{className:"w-full",control:o,options:n.tags,name:"tags",type:"multiple",defaultValue:d.tags.map(V=>V.id)})]})]}),r.jsx(lo,{className:"!top-0",children:r.jsx("div",{className:"h-[415px]",children:r.jsx(Ry,{data:d,variant:"default",className:"h-full",autoplay:!1,poster:j||(w!=null&&w.image?w.image:`${Wi}/api/video/${d.id}/preview/0`)})})})]})})},BA=({data:t,set:e,is_short:n=!1,refetchData:s})=>{const[i,a]=v.useState({});return v.useEffect(()=>{if(!t)return;(async()=>{const l=await _4(t.building_id),c=await Oh(t.building_id),u=await Xh(t.building_id),d={frames:c,tags:l.tags.map(h=>({value:h.id,label:h.name})),specialists:u.map(h=>({avatar:h.avatar,label:h.name,value:h.id})),building_id:t.building_id,developer:l.user,is_short:n,video_url:t.video_url};a(d)})()},[t]),r.jsx(sm,{conditionModal:!!t,setModal:e,options:{frames:i.frames,tags:i.tags,is_short:n,specialists:i.specialists,building_id:i.building_id,developer:i.developer,currentVideoData:{url:i.video_url}},sending:()=>{s&&s()}})};function k3e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return v.useMemo(()=>s=>{e.forEach(i=>i(s))},e)}const Zw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vm(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function FA(t){return"nodeType"in t}function ji(t){var e,n;return t?Vm(t)?t:FA(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function $A(t){const{Document:e}=ji(t);return t instanceof e}function Uy(t){return Vm(t)?!1:t instanceof ji(t).HTMLElement}function vq(t){return t instanceof ji(t).SVGElement}function zm(t){return t?Vm(t)?t.document:FA(t)?$A(t)?t:Uy(t)||vq(t)?t.ownerDocument:document:document:document}const ao=Zw?v.useLayoutEffect:v.useEffect;function Jw(t){const e=v.useRef(t);return ao(()=>{e.current=t}),v.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e.current==null?void 0:e.current(...s)},[])}function A3e(){const t=v.useRef(null),e=v.useCallback((s,i)=>{t.current=setInterval(s,i)},[]),n=v.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Pv(t,e){e===void 0&&(e=[t]);const n=v.useRef(t);return ao(()=>{n.current!==t&&(n.current=t)},e),n}function Vy(t,e){const n=v.useRef();return v.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function X_(t){const e=Jw(t),n=v.useRef(null),s=v.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,s]}function K_(t){const e=v.useRef();return v.useEffect(()=>{e.current=t},[t]),e.current}let Oj={};function zy(t,e){return v.useMemo(()=>{if(e)return e;const n=Oj[t]==null?0:Oj[t]+1;return Oj[t]=n,t+"-"+n},[t,e])}function yq(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((a,o)=>{const l=Object.entries(o);for(const[c,u]of l){const d=a[c];d!=null&&(a[c]=d+t*u)}return a},{...e})}}const bp=yq(1),Q_=yq(-1);function D3e(t){return"clientX"in t&&"clientY"in t}function eC(t){if(!t)return!1;const{KeyboardEvent:e}=ji(t.target);return e&&t instanceof e}function P3e(t){if(!t)return!1;const{TouchEvent:e}=ji(t.target);return e&&t instanceof e}function Z_(t){if(P3e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return D3e(t)?{x:t.clientX,y:t.clientY}:null}const ed=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[ed.Translate.toString(t),ed.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),l8="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function I3e(t){return t.matches(l8)?t:t.querySelector(l8)}const M3e={display:"none"};function O3e(t){let{id:e,value:n}=t;return Xe.createElement("div",{id:e,style:M3e},n)}function R3e(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Xe.createElement("div",{id:e,style:i,role:"status","aria-live":s,"aria-atomic":!0},n)}function L3e(){const[t,e]=v.useState("");return{announce:v.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const xq=v.createContext(null);function B3e(t){const e=v.useContext(xq);v.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function F3e(){const[t]=v.useState(()=>new Set),e=v.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[v.useCallback(s=>{let{type:i,event:a}=s;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,a)})},[t]),e]}const $3e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},U3e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function V3e(t){let{announcements:e=U3e,container:n,hiddenTextDescribedById:s,screenReaderInstructions:i=$3e}=t;const{announce:a,announcement:o}=L3e(),l=zy("DndLiveRegion"),[c,u]=v.useState(!1);if(v.useEffect(()=>{u(!0)},[]),B3e(v.useMemo(()=>({onDragStart(h){let{active:f}=h;a(e.onDragStart({active:f}))},onDragMove(h){let{active:f,over:p}=h;e.onDragMove&&a(e.onDragMove({active:f,over:p}))},onDragOver(h){let{active:f,over:p}=h;a(e.onDragOver({active:f,over:p}))},onDragEnd(h){let{active:f,over:p}=h;a(e.onDragEnd({active:f,over:p}))},onDragCancel(h){let{active:f,over:p}=h;a(e.onDragCancel({active:f,over:p}))}}),[a,e])),!c)return null;const d=Xe.createElement(Xe.Fragment,null,Xe.createElement(O3e,{id:s,value:i.draggable}),Xe.createElement(R3e,{id:l,announcement:o}));return n?on.createPortal(d,n):d}var rr;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(rr||(rr={}));function J_(){}function bq(t,e){return v.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function _q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return v.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const Lo=Object.freeze({x:0,y:0});function z3e(t,e){const n=Z_(t);if(!n)return"0 0";const s={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function H3e(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function q3e(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function W3e(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),o=i-s,l=a-n;if(s<i&&n<a){const c=e.width*e.height,u=t.width*t.height,d=o*l,h=d/(c+u-d);return Number(h.toFixed(4))}return 0}const G3e=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const i=[];for(const a of s){const{id:o}=a,l=n.get(o);if(l){const c=W3e(l,e);c>0&&i.push({id:o,data:{droppableContainer:a,value:c}})}}return i.sort(H3e)};function Y3e(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function wq(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Lo}function X3e(t){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const K3e=X3e(1);function Cq(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Q3e(t,e,n){const s=Cq(e);if(!s)return t;const{scaleX:i,scaleY:a,x:o,y:l}=s,c=t.left-o-(1-i)*parseFloat(n),u=t.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?t.width/i:t.width,h=a?t.height/a:t.height;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c}}const Z3e={ignoreTransform:!1};function Hm(t,e){e===void 0&&(e=Z3e);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:d}=ji(t).getComputedStyle(t);u&&(n=Q3e(n,u,d))}const{top:s,left:i,width:a,height:o,bottom:l,right:c}=n;return{top:s,left:i,width:a,height:o,bottom:l,right:c}}function c8(t){return Hm(t,{ignoreTransform:!0})}function J3e(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function eke(t,e){return e===void 0&&(e=ji(t).getComputedStyle(t)),e.position==="fixed"}function tke(t,e){e===void 0&&(e=ji(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?n.test(a):!1})}function UA(t,e){const n=[];function s(i){if(e!=null&&n.length>=e||!i)return n;if($A(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Uy(i)||vq(i)||n.includes(i))return n;const a=ji(t).getComputedStyle(i);return i!==t&&tke(i,a)&&n.push(i),eke(i,a)?n:s(i.parentNode)}return t?s(t):n}function Sq(t){const[e]=UA(t,1);return e??null}function Rj(t){return!Zw||!t?null:Vm(t)?t:FA(t)?$A(t)||t===zm(t).scrollingElement?window:Uy(t)?t:null:null}function jq(t){return Vm(t)?t.scrollX:t.scrollLeft}function Tq(t){return Vm(t)?t.scrollY:t.scrollTop}function VN(t){return{x:jq(t),y:Tq(t)}}var mr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(mr||(mr={}));function Eq(t){return!Zw||!t?!1:t===document.scrollingElement}function Nq(t){const e={x:0,y:0},n=Eq(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,o=t.scrollTop>=s.y,l=t.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:o,isRight:l,maxScroll:s,minScroll:e}}const nke={x:.2,y:.2};function ske(t,e,n,s,i){let{top:a,left:o,right:l,bottom:c}=n;s===void 0&&(s=10),i===void 0&&(i=nke);const{isTop:u,isBottom:d,isLeft:h,isRight:f}=Nq(t),p={x:0,y:0},g={x:0,y:0},m={height:e.height*i.y,width:e.width*i.x};return!u&&a<=e.top+m.height?(p.y=mr.Backward,g.y=s*Math.abs((e.top+m.height-a)/m.height)):!d&&c>=e.bottom-m.height&&(p.y=mr.Forward,g.y=s*Math.abs((e.bottom-m.height-c)/m.height)),!f&&l>=e.right-m.width?(p.x=mr.Forward,g.x=s*Math.abs((e.right-m.width-l)/m.width)):!h&&o<=e.left+m.width&&(p.x=mr.Backward,g.x=s*Math.abs((e.left+m.width-o)/m.width)),{direction:p,speed:g}}function rke(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:n,right:s,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:i,width:t.clientWidth,height:t.clientHeight}}function kq(t){return t.reduce((e,n)=>bp(e,VN(n)),Lo)}function ike(t){return t.reduce((e,n)=>e+jq(n),0)}function ake(t){return t.reduce((e,n)=>e+Tq(n),0)}function Aq(t,e){if(e===void 0&&(e=Hm),!t)return;const{top:n,left:s,bottom:i,right:a}=e(t);Sq(t)&&(i<=0||a<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const oke=[["x",["left","right"],ike],["y",["top","bottom"],ake]];class VA{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=UA(n),i=kq(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,o,l]of oke)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(s),d=i[a]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class M0{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var i;(i=this.target)==null||i.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function lke(t){const{EventTarget:e}=ji(t);return t instanceof e?t:zm(t)}function Lj(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var Ua;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ua||(Ua={}));function u8(t){t.preventDefault()}function cke(t){t.stopPropagation()}var _n;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(_n||(_n={}));const Dq={start:[_n.Space,_n.Enter],cancel:[_n.Esc],end:[_n.Space,_n.Enter]},uke=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case _n.Right:return{...n,x:n.x+25};case _n.Left:return{...n,x:n.x-25};case _n.Down:return{...n,y:n.y+25};case _n.Up:return{...n,y:n.y-25}}};class Pq{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new M0(zm(n)),this.windowListeners=new M0(ji(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ua.Resize,this.handleCancel),this.windowListeners.add(Ua.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ua.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&Aq(s),n(Lo)}handleKeyDown(e){if(eC(e)){const{active:n,context:s,options:i}=this.props,{keyboardCodes:a=Dq,coordinateGetter:o=uke,scrollBehavior:l="smooth"}=i,{code:c}=e;if(a.end.includes(c)){this.handleEnd(e);return}if(a.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=s.current,d=u?{x:u.left,y:u.top}:Lo;this.referenceCoordinates||(this.referenceCoordinates=d);const h=o(e,{active:n,context:s.current,currentCoordinates:d});if(h){const f=Q_(h,d),p={x:0,y:0},{scrollableAncestors:g}=s.current;for(const m of g){const _=e.code,{isTop:y,isRight:x,isLeft:b,isBottom:w,maxScroll:C,minScroll:j}=Nq(m),E=rke(m),T={x:Math.min(_===_n.Right?E.right-E.width/2:E.right,Math.max(_===_n.Right?E.left:E.left+E.width/2,h.x)),y:Math.min(_===_n.Down?E.bottom-E.height/2:E.bottom,Math.max(_===_n.Down?E.top:E.top+E.height/2,h.y))},N=_===_n.Right&&!x||_===_n.Left&&!b,P=_===_n.Down&&!w||_===_n.Up&&!y;if(N&&T.x!==h.x){const I=m.scrollLeft+f.x,B=_===_n.Right&&I<=C.x||_===_n.Left&&I>=j.x;if(B&&!f.y){m.scrollTo({left:I,behavior:l});return}B?p.x=m.scrollLeft-I:p.x=_===_n.Right?m.scrollLeft-C.x:m.scrollLeft-j.x,p.x&&m.scrollBy({left:-p.x,behavior:l});break}else if(P&&T.y!==h.y){const I=m.scrollTop+f.y,B=_===_n.Down&&I<=C.y||_===_n.Up&&I>=j.y;if(B&&!f.x){m.scrollTo({top:I,behavior:l});return}B?p.y=m.scrollTop-I:p.y=_===_n.Down?m.scrollTop-C.y:m.scrollTop-j.y,p.y&&m.scrollBy({top:-p.y,behavior:l});break}}this.handleMove(e,bp(Q_(h,this.referenceCoordinates),p))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Pq.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=Dq,onActivation:i}=e,{active:a}=n;const{code:o}=t.nativeEvent;if(s.start.includes(o)){const l=a.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function d8(t){return!!(t&&"distance"in t)}function h8(t){return!!(t&&"delay"in t)}class zA{constructor(e,n,s){var i;s===void 0&&(s=lke(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:o}=a;this.props=e,this.events=n,this.document=zm(o),this.documentListeners=new M0(this.document),this.listeners=new M0(s),this.windowListeners=new M0(ji(o)),this.initialCoordinates=(i=Z_(a))!=null?i:Lo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(Ua.Resize,this.handleCancel),this.windowListeners.add(Ua.DragStart,u8),this.windowListeners.add(Ua.VisibilityChange,this.handleCancel),this.windowListeners.add(Ua.ContextMenu,u8),this.documentListeners.add(Ua.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(h8(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(d8(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ua.Click,cke,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ua.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:l}}=a;if(!i)return;const c=(n=Z_(e))!=null?n:Lo,u=Q_(i,c);if(!s&&l){if(d8(l)){if(l.tolerance!=null&&Lj(u,l.tolerance))return this.handleCancel();if(Lj(u,l.distance))return this.handleStart()}return h8(l)&&Lj(u,l.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===_n.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const dke={move:{name:"pointermove"},end:{name:"pointerup"}};class tC extends zA{constructor(e){const{event:n}=e,s=zm(n.target);super(e,dke,s)}}tC.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const hke={move:{name:"mousemove"},end:{name:"mouseup"}};var zN;(function(t){t[t.RightClick=2]="RightClick"})(zN||(zN={}));class fke extends zA{constructor(e){super(e,hke,zm(e.event.target))}}fke.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===zN.RightClick?!1:(s==null||s({event:n}),!0)}}];const Bj={move:{name:"touchmove"},end:{name:"touchend"}};class pke extends zA{constructor(e){super(e,Bj)}static setup(){return window.addEventListener(Bj.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Bj.move.name,e)};function e(){}}}pke.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:i}=n;return i.length>1?!1:(s==null||s({event:n}),!0)}}];var O0;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(O0||(O0={}));var e2;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(e2||(e2={}));function mke(t){let{acceleration:e,activator:n=O0.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:o=5,order:l=e2.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:f}=t;const p=vke({delta:h,disabled:!a}),[g,m]=A3e(),_=v.useRef({x:0,y:0}),y=v.useRef({x:0,y:0}),x=v.useMemo(()=>{switch(n){case O0.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case O0.DraggableRect:return i}},[n,i,c]),b=v.useRef(null),w=v.useCallback(()=>{const j=b.current;if(!j)return;const E=_.current.x*y.current.x,T=_.current.y*y.current.y;j.scrollBy(E,T)},[]),C=v.useMemo(()=>l===e2.TreeOrder?[...u].reverse():u,[l,u]);v.useEffect(()=>{if(!a||!u.length||!x){m();return}for(const j of C){if((s==null?void 0:s(j))===!1)continue;const E=u.indexOf(j),T=d[E];if(!T)continue;const{direction:N,speed:P}=ske(j,T,x,e,f);for(const I of["x","y"])p[I][N[I]]||(P[I]=0,N[I]=0);if(P.x>0||P.y>0){m(),b.current=j,g(w,o),_.current=P,y.current=N;return}}_.current={x:0,y:0},y.current={x:0,y:0},m()},[e,w,s,m,a,o,JSON.stringify(x),JSON.stringify(p),g,u,C,d,JSON.stringify(f)])}const gke={x:{[mr.Backward]:!1,[mr.Forward]:!1},y:{[mr.Backward]:!1,[mr.Forward]:!1}};function vke(t){let{delta:e,disabled:n}=t;const s=K_(e);return Vy(i=>{if(n||!s||!i)return gke;const a={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[mr.Backward]:i.x[mr.Backward]||a.x===-1,[mr.Forward]:i.x[mr.Forward]||a.x===1},y:{[mr.Backward]:i.y[mr.Backward]||a.y===-1,[mr.Forward]:i.y[mr.Forward]||a.y===1}}},[n,e,s])}function yke(t,e){const n=e!==null?t.get(e):void 0,s=n?n.node.current:null;return Vy(i=>{var a;return e===null?null:(a=s??i)!=null?a:null},[s,e])}function xke(t,e){return v.useMemo(()=>t.reduce((n,s)=>{const{sensor:i}=s,a=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...n,...a]},[]),[t,e])}var Iv;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Iv||(Iv={}));var HN;(function(t){t.Optimized="optimized"})(HN||(HN={}));const f8=new Map;function bke(t,e){let{dragging:n,dependencies:s,config:i}=e;const[a,o]=v.useState(null),{frequency:l,measure:c,strategy:u}=i,d=v.useRef(t),h=_(),f=Pv(h),p=v.useCallback(function(y){y===void 0&&(y=[]),!f.current&&o(x=>x===null?y:x.concat(y.filter(b=>!x.includes(b))))},[f]),g=v.useRef(null),m=Vy(y=>{if(h&&!n)return f8;if(!y||y===f8||d.current!==t||a!=null){const x=new Map;for(let b of t){if(!b)continue;if(a&&a.length>0&&!a.includes(b.id)&&b.rect.current){x.set(b.id,b.rect.current);continue}const w=b.node.current,C=w?new VA(c(w),w):null;b.rect.current=C,C&&x.set(b.id,C)}return x}return y},[t,a,n,h,c]);return v.useEffect(()=>{d.current=t},[t]),v.useEffect(()=>{h||p()},[n,h]),v.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),v.useEffect(()=>{h||typeof l!="number"||g.current!==null||(g.current=setTimeout(()=>{p(),g.current=null},l))},[l,h,p,...s]),{droppableRects:m,measureDroppableContainers:p,measuringScheduled:a!=null};function _(){switch(u){case Iv.Always:return!1;case Iv.BeforeDragging:return n;default:return!n}}}function HA(t,e){return Vy(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function _ke(t,e){return HA(t,e)}function wke(t){let{callback:e,disabled:n}=t;const s=Jw(e),i=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,n]);return v.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function nC(t){let{callback:e,disabled:n}=t;const s=Jw(e),i=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[n]);return v.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Cke(t){return new VA(Hm(t),t)}function p8(t,e,n){e===void 0&&(e=Cke);const[s,i]=v.useReducer(l,null),a=wke({callback(c){if(t)for(const u of c){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(t)){i();break}}}}),o=nC({callback:i});return ao(()=>{i(),t?(o==null||o.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),a==null||a.disconnect())},[t]),s;function l(c){if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=e(t);return JSON.stringify(c)===JSON.stringify(d)?c:d}}function Ske(t){const e=HA(t);return wq(t,e)}const m8=[];function jke(t){const e=v.useRef(t),n=Vy(s=>t?s&&s!==m8&&t&&e.current&&t.parentNode===e.current.parentNode?s:UA(t):m8,[t]);return v.useEffect(()=>{e.current=t},[t]),n}function Tke(t){const[e,n]=v.useState(null),s=v.useRef(t),i=v.useCallback(a=>{const o=Rj(a.target);o&&n(l=>l?(l.set(o,VN(o)),new Map(l)):null)},[]);return v.useEffect(()=>{const a=s.current;if(t!==a){o(a);const l=t.map(c=>{const u=Rj(c);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,VN(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),s.current=t}return()=>{o(t),o(a)};function o(l){l.forEach(c=>{const u=Rj(c);u==null||u.removeEventListener("scroll",i)})}},[i,t]),v.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,o)=>bp(a,o),Lo):kq(t):Lo,[t,e])}function g8(t,e){e===void 0&&(e=[]);const n=v.useRef(null);return v.useEffect(()=>{n.current=null},e),v.useEffect(()=>{const s=t!==Lo;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?Q_(t,n.current):Lo}function Eke(t){v.useEffect(()=>{if(!Zw)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Nke(t,e){return v.useMemo(()=>t.reduce((n,s)=>{let{eventName:i,handler:a}=s;return n[i]=o=>{a(o,e)},n},{}),[t,e])}function Iq(t){return v.useMemo(()=>t?J3e(t):null,[t])}const Fj=[];function kke(t,e){e===void 0&&(e=Hm);const[n]=t,s=Iq(n?ji(n):null),[i,a]=v.useReducer(l,Fj),o=nC({callback:a});return t.length>0&&i===Fj&&a(),ao(()=>{t.length?t.forEach(c=>o==null?void 0:o.observe(c)):(o==null||o.disconnect(),a())},[t]),i;function l(){return t.length?t.map(c=>Eq(c)?s:new VA(e(c),c)):Fj}}function Mq(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Uy(e)?e:t}function Ake(t){let{measure:e}=t;const[n,s]=v.useState(null),i=v.useCallback(u=>{for(const{target:d}of u)if(Uy(d)){s(h=>{const f=e(d);return h?{...h,width:f.width,height:f.height}:f});break}},[e]),a=nC({callback:i}),o=v.useCallback(u=>{const d=Mq(u);a==null||a.disconnect(),d&&(a==null||a.observe(d)),s(d?e(d):null)},[e,a]),[l,c]=X_(o);return v.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const Dke=[{sensor:tC,options:{}},{sensor:Pq,options:{}}],Pke={current:{}},eb={draggable:{measure:c8},droppable:{measure:c8,strategy:Iv.WhileDragging,frequency:HN.Optimized},dragOverlay:{measure:Hm}};class R0 extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const Ike={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new R0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:J_},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eb,measureDroppableContainers:J_,windowRect:null,measuringScheduled:!1},Oq={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:J_,draggableNodes:new Map,over:null,measureDroppableContainers:J_},Hy=v.createContext(Oq),Rq=v.createContext(Ike);function Mke(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new R0}}}function Oke(t,e){switch(e.type){case rr.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case rr.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case rr.DragEnd:case rr.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case rr.RegisterDroppable:{const{element:n}=e,{id:s}=n,i=new R0(t.droppable.containers);return i.set(s,n),{...t,droppable:{...t.droppable,containers:i}}}case rr.SetDroppableDisabled:{const{id:n,key:s,disabled:i}=e,a=t.droppable.containers.get(n);if(!a||s!==a.key)return t;const o=new R0(t.droppable.containers);return o.set(n,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case rr.UnregisterDroppable:{const{id:n,key:s}=e,i=t.droppable.containers.get(n);if(!i||s!==i.key)return t;const a=new R0(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function Rke(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:i}=v.useContext(Hy),a=K_(s),o=K_(n==null?void 0:n.id);return v.useEffect(()=>{if(!e&&!s&&a&&o!=null){if(!eC(a)||document.activeElement===a.target)return;const l=i.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const h=I3e(d);if(h){h.focus();break}}})}},[s,e,i,o,a]),null}function Lq(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...s}),n):n}function Lke(t){return v.useMemo(()=>({draggable:{...eb.draggable,...t==null?void 0:t.draggable},droppable:{...eb.droppable,...t==null?void 0:t.droppable},dragOverlay:{...eb.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Bke(t){let{activeNode:e,measure:n,initialRect:s,config:i=!0}=t;const a=v.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;ao(()=>{if(!o&&!l||!e){a.current=!1;return}if(a.current||!s)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=wq(d,s);if(o||(h.x=0),l||(h.y=0),a.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const f=Sq(u);f&&f.scrollBy({top:h.y,left:h.x})}},[e,o,l,s,n])}const sC=v.createContext({...Lo,scaleX:1,scaleY:1});var yu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(yu||(yu={}));const Bq=v.memo(function(e){var n,s,i,a;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:d=Dke,collisionDetection:h=G3e,measuring:f,modifiers:p,...g}=e;const m=v.useReducer(Oke,void 0,Mke),[_,y]=m,[x,b]=F3e(),[w,C]=v.useState(yu.Uninitialized),j=w===yu.Initialized,{draggable:{active:E,nodes:T,translate:N},droppable:{containers:P}}=_,I=E?T.get(E):null,B=v.useRef({initial:null,translated:null}),U=v.useMemo(()=>{var _t;return E!=null?{id:E,data:(_t=I==null?void 0:I.data)!=null?_t:Pke,rect:B}:null},[E,I]),z=v.useRef(null),[G,V]=v.useState(null),[J,Q]=v.useState(null),Y=Pv(g,Object.values(g)),oe=zy("DndDescribedBy",o),he=v.useMemo(()=>P.getEnabled(),[P]),me=Lke(f),{droppableRects:Oe,measureDroppableContainers:xe,measuringScheduled:Pe}=bke(he,{dragging:j,dependencies:[N.x,N.y],config:me.droppable}),qe=yke(T,E),Ie=v.useMemo(()=>J?Z_(J):null,[J]),Ve=tn(),ot=_ke(qe,me.draggable.measure);Bke({activeNode:E?T.get(E):null,config:Ve.layoutShiftCompensation,initialRect:ot,measure:me.draggable.measure});const fe=p8(qe,me.draggable.measure,ot),$=p8(qe?qe.parentElement:null),X=v.useRef({activatorEvent:null,active:null,activeNode:qe,collisionRect:null,collisions:null,droppableRects:Oe,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),W=P.getNodeFor((n=X.current.over)==null?void 0:n.id),ce=Ake({measure:me.dragOverlay.measure}),ne=(s=ce.nodeRef.current)!=null?s:qe,ee=j?(i=ce.rect)!=null?i:fe:null,ge=!!(ce.nodeRef.current&&ce.rect),q=Ske(ge?null:fe),re=Iq(ne?ji(ne):null),ie=jke(j?W??qe:null),Ee=kke(ie),Ne=Lq(p,{transform:{x:N.x-q.x,y:N.y-q.y,scaleX:1,scaleY:1},activatorEvent:J,active:U,activeNodeRect:fe,containerNodeRect:$,draggingNodeRect:ee,over:X.current.over,overlayNodeRect:ce.rect,scrollableAncestors:ie,scrollableAncestorRects:Ee,windowRect:re}),Ae=Ie?bp(Ie,N):null,Se=Tke(ie),Le=g8(Se),tt=g8(Se,[fe]),lt=bp(Ne,Le),it=ee?K3e(ee,Ne):null,Pt=U&&it?h({active:U,collisionRect:it,droppableRects:Oe,droppableContainers:he,pointerCoordinates:Ae}):null,H=q3e(Pt,"id"),[M,R]=v.useState(null),te=ge?Ne:bp(Ne,tt),ye=Y3e(te,(a=M==null?void 0:M.rect)!=null?a:null,fe),Te=v.useCallback((_t,Hn)=>{let{sensor:rs,options:is}=Hn;if(z.current==null)return;const ae=T.get(z.current);if(!ae)return;const be=_t.nativeEvent,Ce=new rs({active:z.current,activeNode:ae,event:be,options:is,context:X,onStart(Je){const et=z.current;if(et==null)return;const yt=T.get(et);if(!yt)return;const{onDragStart:ut}=Y.current,Vt={active:{id:et,data:yt.data,rect:B}};on.unstable_batchedUpdates(()=>{ut==null||ut(Vt),C(yu.Initializing),y({type:rr.DragStart,initialCoordinates:Je,active:et}),x({type:"onDragStart",event:Vt})})},onMove(Je){y({type:rr.DragMove,coordinates:Je})},onEnd:We(rr.DragEnd),onCancel:We(rr.DragCancel)});on.unstable_batchedUpdates(()=>{V(Ce),Q(_t.nativeEvent)});function We(Je){return async function(){const{active:yt,collisions:ut,over:Vt,scrollAdjustedTranslate:zt}=X.current;let Tt=null;if(yt&&zt){const{cancelDrop:Et}=Y.current;Tt={activatorEvent:be,active:yt,collisions:ut,delta:zt,over:Vt},Je===rr.DragEnd&&typeof Et=="function"&&await Promise.resolve(Et(Tt))&&(Je=rr.DragCancel)}z.current=null,on.unstable_batchedUpdates(()=>{y({type:Je}),C(yu.Uninitialized),R(null),V(null),Q(null);const Et=Je===rr.DragEnd?"onDragEnd":"onDragCancel";if(Tt){const Ht=Y.current[Et];Ht==null||Ht(Tt),x({type:Et,event:Tt})}})}}},[T]),$e=v.useCallback((_t,Hn)=>(rs,is)=>{const ae=rs.nativeEvent,be=T.get(is);if(z.current!==null||!be||ae.dndKit||ae.defaultPrevented)return;const Ce={active:be};_t(rs,Hn.options,Ce)===!0&&(ae.dndKit={capturedBy:Hn.sensor},z.current=is,Te(rs,Hn))},[T,Te]),wt=xke(d,$e);Eke(d),ao(()=>{fe&&w===yu.Initializing&&C(yu.Initialized)},[fe,w]),v.useEffect(()=>{const{onDragMove:_t}=Y.current,{active:Hn,activatorEvent:rs,collisions:is,over:ae}=X.current;if(!Hn||!rs)return;const be={active:Hn,activatorEvent:rs,collisions:is,delta:{x:lt.x,y:lt.y},over:ae};on.unstable_batchedUpdates(()=>{_t==null||_t(be),x({type:"onDragMove",event:be})})},[lt.x,lt.y]),v.useEffect(()=>{const{active:_t,activatorEvent:Hn,collisions:rs,droppableContainers:is,scrollAdjustedTranslate:ae}=X.current;if(!_t||z.current==null||!Hn||!ae)return;const{onDragOver:be}=Y.current,Ce=is.get(H),We=Ce&&Ce.rect.current?{id:Ce.id,rect:Ce.rect.current,data:Ce.data,disabled:Ce.disabled}:null,Je={active:_t,activatorEvent:Hn,collisions:rs,delta:{x:ae.x,y:ae.y},over:We};on.unstable_batchedUpdates(()=>{R(We),be==null||be(Je),x({type:"onDragOver",event:Je})})},[H]),ao(()=>{X.current={activatorEvent:J,active:U,activeNode:qe,collisionRect:it,collisions:Pt,droppableRects:Oe,draggableNodes:T,draggingNode:ne,draggingNodeRect:ee,droppableContainers:P,over:M,scrollableAncestors:ie,scrollAdjustedTranslate:lt},B.current={initial:ee,translated:it}},[U,qe,Pt,it,T,ne,ee,Oe,P,M,ie,lt]),mke({...Ve,delta:N,draggingRect:it,pointerCoordinates:Ae,scrollableAncestors:ie,scrollableAncestorRects:Ee});const Ut=v.useMemo(()=>({active:U,activeNode:qe,activeNodeRect:fe,activatorEvent:J,collisions:Pt,containerNodeRect:$,dragOverlay:ce,draggableNodes:T,droppableContainers:P,droppableRects:Oe,over:M,measureDroppableContainers:xe,scrollableAncestors:ie,scrollableAncestorRects:Ee,measuringConfiguration:me,measuringScheduled:Pe,windowRect:re}),[U,qe,fe,J,Pt,$,ce,T,P,Oe,M,xe,ie,Ee,me,Pe,re]),Rt=v.useMemo(()=>({activatorEvent:J,activators:wt,active:U,activeNodeRect:fe,ariaDescribedById:{draggable:oe},dispatch:y,draggableNodes:T,over:M,measureDroppableContainers:xe}),[J,wt,U,fe,y,oe,T,M,xe]);return Xe.createElement(xq.Provider,{value:b},Xe.createElement(Hy.Provider,{value:Rt},Xe.createElement(Rq.Provider,{value:Ut},Xe.createElement(sC.Provider,{value:ye},u)),Xe.createElement(Rke,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Xe.createElement(V3e,{...l,hiddenTextDescribedById:oe}));function tn(){const _t=(G==null?void 0:G.autoScrollEnabled)===!1,Hn=typeof c=="object"?c.enabled===!1:c===!1,rs=j&&!_t&&!Hn;return typeof c=="object"?{...c,enabled:rs}:{enabled:rs}}}),Fke=v.createContext(null),v8="button",$ke="Droppable";function Uke(t){let{id:e,data:n,disabled:s=!1,attributes:i}=t;const a=zy($ke),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:f}=v.useContext(Hy),{role:p=v8,roleDescription:g="draggable",tabIndex:m=0}=i??{},_=(c==null?void 0:c.id)===e,y=v.useContext(_?sC:Fke),[x,b]=X_(),[w,C]=X_(),j=Nke(o,e),E=Pv(n);ao(()=>(h.set(e,{id:e,key:a,node:x,activatorNode:w,data:E}),()=>{const N=h.get(e);N&&N.key===a&&h.delete(e)}),[h,e]);const T=v.useMemo(()=>({role:p,tabIndex:m,"aria-disabled":s,"aria-pressed":_&&p===v8?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[s,p,m,_,g,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:T,isDragging:_,listeners:s?void 0:j,node:x,over:f,setNodeRef:b,setActivatorNodeRef:C,transform:y}}function Fq(){return v.useContext(Rq)}const Vke="Droppable",zke={timeout:25};function Hke(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:i}=t;const a=zy(Vke),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=v.useContext(Hy),d=v.useRef({disabled:n}),h=v.useRef(!1),f=v.useRef(null),p=v.useRef(null),{disabled:g,updateMeasurementsFor:m,timeout:_}={...zke,...i},y=Pv(m??s),x=v.useCallback(()=>{if(!h.current){h.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),p.current=null},_)},[_]),b=nC({callback:x,disabled:g||!o}),w=v.useCallback((T,N)=>{b&&(N&&(b.unobserve(N),h.current=!1),T&&b.observe(T))},[b]),[C,j]=X_(w),E=Pv(e);return v.useEffect(()=>{!b||!C.current||(b.disconnect(),h.current=!1,b.observe(C.current))},[C,b]),ao(()=>(l({type:rr.RegisterDroppable,element:{id:s,key:a,disabled:n,node:C,rect:f,data:E}}),()=>l({type:rr.UnregisterDroppable,key:a,id:s})),[s]),v.useEffect(()=>{n!==d.current.disabled&&(l({type:rr.SetDroppableDisabled,id:s,key:a,disabled:n}),d.current.disabled=n)},[s,a,n,l]),{active:o,rect:f,isOver:(c==null?void 0:c.id)===s,node:C,over:c,setNodeRef:j}}function qke(t){let{animation:e,children:n}=t;const[s,i]=v.useState(null),[a,o]=v.useState(null),l=K_(n);return!n&&!s&&l&&i(l),ao(()=>{if(!a)return;const c=s==null?void 0:s.key,u=s==null?void 0:s.props.id;if(c==null||u==null){i(null);return}Promise.resolve(e(u,a)).then(()=>{i(null)})},[e,s,a]),Xe.createElement(Xe.Fragment,null,n,s?v.cloneElement(s,{ref:o}):null)}const Wke={x:0,y:0,scaleX:1,scaleY:1};function Gke(t){let{children:e}=t;return Xe.createElement(Hy.Provider,{value:Oq},Xe.createElement(sC.Provider,{value:Wke},e))}const Yke={position:"fixed",touchAction:"none"},Xke=t=>eC(t)?"transform 250ms ease":void 0,Kke=v.forwardRef((t,e)=>{let{as:n,activatorEvent:s,adjustScale:i,children:a,className:o,rect:l,style:c,transform:u,transition:d=Xke}=t;if(!l)return null;const h=i?u:{...u,scaleX:1,scaleY:1},f={...Yke,width:l.width,height:l.height,top:l.top,left:l.left,transform:ed.Transform.toString(h),transformOrigin:i&&s?z3e(s,l):void 0,transition:typeof d=="function"?d(s):d,...c};return Xe.createElement(n,{className:o,style:f,ref:e},a)}),Qke=t=>e=>{let{active:n,dragOverlay:s}=e;const i={},{styles:a,className:o}=t;if(a!=null&&a.active)for(const[l,c]of Object.entries(a.active))c!==void 0&&(i[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(a!=null&&a.dragOverlay)for(const[l,c]of Object.entries(a.dragOverlay))c!==void 0&&s.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(i))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},Zke=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:ed.Transform.toString(e)},{transform:ed.Transform.toString(n)}]},Jke={duration:250,easing:"ease",keyframes:Zke,sideEffects:Qke({styles:{active:{opacity:"0"}}})};function e4e(t){let{config:e,draggableNodes:n,droppableContainers:s,measuringConfiguration:i}=t;return Jw((a,o)=>{if(e===null)return;const l=n.get(a);if(!l)return;const c=l.node.current;if(!c)return;const u=Mq(o);if(!u)return;const{transform:d}=ji(o).getComputedStyle(o),h=Cq(d);if(!h)return;const f=typeof e=="function"?e:t4e(e);return Aq(c,i.draggable.measure),f({active:{id:a,data:l.data,node:c,rect:i.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(u)},droppableContainers:s,measuringConfiguration:i,transform:h})})}function t4e(t){const{duration:e,easing:n,sideEffects:s,keyframes:i}={...Jke,...t};return a=>{let{active:o,dragOverlay:l,transform:c,...u}=a;if(!e)return;const d={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},h={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},f={x:c.x-d.x,y:c.y-d.y,...h},p=i({...u,active:o,dragOverlay:l,transform:{initial:c,final:f}}),[g]=p,m=p[p.length-1];if(JSON.stringify(g)===JSON.stringify(m))return;const _=s==null?void 0:s({active:o,dragOverlay:l,...u}),y=l.node.animate(p,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{y.onfinish=()=>{_==null||_(),x()}})}}let y8=0;function n4e(t){return v.useMemo(()=>{if(t!=null)return y8++,y8},[t])}const $q=Xe.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:s,style:i,transition:a,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:d,active:h,activeNodeRect:f,containerNodeRect:p,draggableNodes:g,droppableContainers:m,dragOverlay:_,over:y,measuringConfiguration:x,scrollableAncestors:b,scrollableAncestorRects:w,windowRect:C}=Fq(),j=v.useContext(sC),E=n4e(h==null?void 0:h.id),T=Lq(o,{activatorEvent:d,active:h,activeNodeRect:f,containerNodeRect:p,draggingNodeRect:_.rect,over:y,overlayNodeRect:_.rect,scrollableAncestors:b,scrollableAncestorRects:w,transform:j,windowRect:C}),N=HA(f),P=e4e({config:s,draggableNodes:g,droppableContainers:m,measuringConfiguration:x}),I=N?_.setRef:void 0;return Xe.createElement(Gke,null,Xe.createElement(qke,{animation:P},h&&E?Xe.createElement(Kke,{key:E,id:h.id,ref:I,as:l,activatorEvent:d,adjustScale:e,className:c,transition:a,rect:N,style:{zIndex:u,...i},transform:T},n):null))});function rC(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function s4e(t,e){return t.reduce((n,s,i)=>{const a=e.get(s);return a&&(n[i]=a),n},Array(t.length))}function Zx(t){return t!==null&&t>=0}function r4e(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function i4e(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Uq=t=>{let{rects:e,activeIndex:n,overIndex:s,index:i}=t;const a=rC(e,s,n),o=e[i],l=a[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Vq="Sortable",zq=Xe.createContext({activeIndex:-1,containerId:Vq,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Uq,disabled:{draggable:!1,droppable:!1}});function Hq(t){let{children:e,id:n,items:s,strategy:i=Uq,disabled:a=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=Fq(),h=zy(Vq,n),f=l.rect!==null,p=v.useMemo(()=>s.map(j=>typeof j=="object"&&"id"in j?j.id:j),[s]),g=o!=null,m=o?p.indexOf(o.id):-1,_=u?p.indexOf(u.id):-1,y=v.useRef(p),x=!r4e(p,y.current),b=_!==-1&&m===-1||x,w=i4e(a);ao(()=>{x&&g&&d(p)},[x,p,g,d]),v.useEffect(()=>{y.current=p},[p]);const C=v.useMemo(()=>({activeIndex:m,containerId:h,disabled:w,disableTransforms:b,items:p,overIndex:_,useDragOverlay:f,sortedRects:s4e(p,c),strategy:i}),[m,h,w.draggable,w.droppable,b,p,_,c,f,i]);return Xe.createElement(zq.Provider,{value:C},e)}const a4e=t=>{let{id:e,items:n,activeIndex:s,overIndex:i}=t;return rC(n,s,i).indexOf(e)},o4e=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:i,items:a,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!s||l!==a&&i===o?!1:n?!0:o!==i&&e===c},l4e={duration:200,easing:"ease"},qq="transform",c4e=ed.Transition.toString({property:qq,duration:0,easing:"linear"}),u4e={roleDescription:"sortable"};function d4e(t){let{disabled:e,index:n,node:s,rect:i}=t;const[a,o]=v.useState(null),l=v.useRef(n);return ao(()=>{if(!e&&n!==l.current&&s.current){const c=i.current;if(c){const u=Hm(s.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}n!==l.current&&(l.current=n)},[e,n,s,i]),v.useEffect(()=>{a&&o(null)},[a]),a}function h4e(t){let{animateLayoutChanges:e=o4e,attributes:n,disabled:s,data:i,getNewIndex:a=a4e,id:o,strategy:l,resizeObserverConfig:c,transition:u=l4e}=t;const{items:d,containerId:h,activeIndex:f,disabled:p,disableTransforms:g,sortedRects:m,overIndex:_,useDragOverlay:y,strategy:x}=v.useContext(zq),b=f4e(s,p),w=d.indexOf(o),C=v.useMemo(()=>({sortable:{containerId:h,index:w,items:d},...i}),[h,i,w,d]),j=v.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:E,node:T,isOver:N,setNodeRef:P}=Hke({id:o,data:C,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...c}}),{active:I,activatorEvent:B,activeNodeRect:U,attributes:z,setNodeRef:G,listeners:V,isDragging:J,over:Q,setActivatorNodeRef:Y,transform:oe}=Uke({id:o,data:C,attributes:{...u4e,...n},disabled:b.draggable}),he=k3e(P,G),me=!!I,Oe=me&&!g&&Zx(f)&&Zx(_),xe=!y&&J,Pe=xe&&Oe?oe:null,Ie=Oe?Pe??(l??x)({rects:m,activeNodeRect:U,activeIndex:f,overIndex:_,index:w}):null,Ve=Zx(f)&&Zx(_)?a({id:o,items:d,activeIndex:f,overIndex:_}):w,ot=I==null?void 0:I.id,fe=v.useRef({activeId:ot,items:d,newIndex:Ve,containerId:h}),$=d!==fe.current.items,X=e({active:I,containerId:h,isDragging:J,isSorting:me,id:o,index:w,items:d,newIndex:fe.current.newIndex,previousItems:fe.current.items,previousContainerId:fe.current.containerId,transition:u,wasDragging:fe.current.activeId!=null}),W=d4e({disabled:!X,index:w,node:T,rect:E});return v.useEffect(()=>{me&&fe.current.newIndex!==Ve&&(fe.current.newIndex=Ve),h!==fe.current.containerId&&(fe.current.containerId=h),d!==fe.current.items&&(fe.current.items=d)},[me,Ve,h,d]),v.useEffect(()=>{if(ot===fe.current.activeId)return;if(ot&&!fe.current.activeId){fe.current.activeId=ot;return}const ne=setTimeout(()=>{fe.current.activeId=ot},50);return()=>clearTimeout(ne)},[ot]),{active:I,activeIndex:f,attributes:z,data:C,rect:E,index:w,newIndex:Ve,items:d,isOver:N,isSorting:me,isDragging:J,listeners:V,node:T,overIndex:_,over:Q,setNodeRef:he,setActivatorNodeRef:Y,setDroppableNodeRef:P,setDraggableNodeRef:G,transform:W??Ie,transition:ce()};function ce(){if(W||$&&fe.current.newIndex===w)return c4e;if(!(xe&&!eC(B)||!u)&&(me||X))return ed.Transition.toString({...u,property:qq})}}function f4e(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(s=t==null?void 0:t.droppable)!=null?s:e.droppable}}_n.Down,_n.Right,_n.Up,_n.Left;const p4e="/assets/pdf-CJAvL6mt.webp",m4e="/assets/videoImage-DraujCZP.png",g4e=v.memo(({src:t,deleteItem:e})=>{if(t)return r.jsxs("div",{className:wn.DragDropImage,style:{backgroundImage:`url(${qt(t)})`,backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[r.jsx("div",{type:"button",className:`${wn.DragDropImageIcon} top-2 left-2`,children:r.jsx(Pk,{width:15,height:15,className:"fill-blue"})}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-2 right-2`,onClick:e,children:r.jsx(un,{width:15,height:15,className:"fill-red"})})]})}),qA=({src:t,deleteItem:e})=>{if(t)return r.jsxs("a",{href:t,className:wn.DragDropImage,target:"_blank",rel:"noopener noreferrer",children:[r.jsx("div",{type:"button",className:`${wn.DragDropImageIcon} top-2 left-2`,children:r.jsx(Pk,{width:15,height:15,className:"fill-blue"})}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-2 right-2`,onClick:e,children:r.jsx(un,{width:15,height:15,className:"fill-red"})}),r.jsx("img",{src:p4e,alt:""})]})},v4e=({src:t,deleteItem:e})=>{if(t)return r.jsxs("div",{className:wn.DragDropImage,children:[r.jsx("a",{href:t,className:"absolute inset-0 z-10",target:"_blank",rel:"noopener noreferrer"}),r.jsx("div",{type:"button",className:`${wn.DragDropImageIcon} top-2 left-2`,children:r.jsx(Pk,{width:15,height:15,className:"fill-blue"})}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-2 right-2 !z-20`,onClick:e,children:r.jsx(un,{width:15,height:15,className:"fill-red"})}),r.jsx("img",{src:m4e,alt:""})]})},t2=({item:t,deleteItem:e,dataCurrentId:n,type:s="default"})=>{const{setNodeRef:i,attributes:a,listeners:o,transform:l,transition:c,isDragging:u}=h4e({id:t.id,data:{type:"Item",item:t}}),d={transition:c,transform:ed.Transform.toString(l)};return u?r.jsx("div",{ref:i,style:d,className:wn.DragDropOverlay}):r.jsx("div",{ref:i,style:d,...a,...o,children:s==="default"?r.jsx(g4e,{src:t.image,deleteItem:()=>e(n,t.id)}):s==="element"?t.el:""})},Bo=v.memo(({items:t,dataCurrentId:e,deleteItem:n=()=>{},className:s,onChange:i=()=>{}})=>{const[a,o]=v.useState([...t]);v.useEffect(()=>{o([...t])},[t]);const l=v.useMemo(()=>a.map(p=>p.id),[a]),[c,u]=v.useState(null),d=_q(bq(tC,{activationConstraint:{distance:3}})),h=p=>{var g;if(((g=p.active.data.current)==null?void 0:g.type)==="Item"){u(p.active.data.current.item);return}},f=p=>{const{active:g,over:m}=p;if(!m)return;const _=g.id,y=m.id;if(_===y)return;const x=a.findIndex(C=>C.id===_),b=a.findIndex(C=>C.id===y),w=rC(a,x,b);o(w),setTimeout(()=>{i(w)},250)};return r.jsxs(Bq,{sensors:d,onDragStart:h,onDragEnd:f,children:[r.jsx("div",{className:"grid grid-cols-4 gap-4",children:r.jsx(Hq,{items:l,children:a.map(p=>r.jsx(t2,{item:p,deleteItem:n,dataCurrentId:e},p.id))})}),on.createPortal(r.jsx($q,{className:"!z-[9999]",children:c&&r.jsx(t2,{item:c})}),document.body)]})}),x8=({items:t,className:e="",onChange:n=()=>{}})=>{const[s,i]=v.useState([...t].map((h,f)=>({id:f+1,el:h})));v.useEffect(()=>{i([...t].map((h,f)=>({id:f+1,el:h})))},[t]);const a=v.useMemo(()=>s.map(h=>h.id),[s]),[o,l]=v.useState(null),c=_q(bq(tC,{activationConstraint:{distance:3}})),u=h=>{var f;if(((f=h.active.data.current)==null?void 0:f.type)==="Item"){l(h.active.data.current.item);return}},d=h=>{const{active:f,over:p}=h;if(!p)return;const g=f.id,m=p.id;if(g===m)return;const _=s.findIndex(b=>b.id===g),y=s.findIndex(b=>b.id===m),x=rC(s,_,y);i(x),setTimeout(()=>{n(x)},250)};return r.jsxs(Bq,{sensors:c,onDragStart:u,onDragEnd:d,children:[r.jsx("div",{className:e,children:r.jsx(Hq,{items:a,children:s.map(h=>r.jsx(t2,{item:h,type:"element"},h.id))})}),on.createPortal(r.jsx($q,{className:"!z-[9999]",children:o&&r.jsx(t2,{item:o,type:"element"})}),document.body)]})},y4e="_FileDropZoneRoot_nj881_1",x4e="_FileDropZoneRootActive_nj881_17",b4e="_FileDropZoneOverlay_nj881_21",_p={FileDropZoneRoot:y4e,FileDropZoneRootActive:x4e,FileDropZoneOverlay:b4e},ta=({addFiles:t,multiple:e=!0,className:n="",acceptType:s={"image/*":[]},textBtn:i="Выберите фото"})=>{const a=u=>{t(u)},{getRootProps:o,getInputProps:l,isDragActive:c}=Fy({onDrop:a,multiple:e,accept:s});return r.jsxs("div",{...o(),className:`${_p.FileDropZoneRoot} ${c?_p.FileDropZoneRootActive:""} ${n}`,children:[r.jsx("input",{...l()}),r.jsx(_e,{Selector:"div",children:i}),r.jsx("div",{className:"text-primary400 ml-4",children:"или перетащите в эту область"}),c&&r.jsx("div",{className:_p.FileDropZoneOverlay,children:"Отпустите изображения"})]})},Hd=({conditionModal:t,setModal:e,specialists:n,options:s={},type:i="create",values:a={},dataObject:o,frames:l,authorDefault:c})=>{const[u,d]=v.useState([]),[h,f]=v.useState([]),[p,g]=v.useState([]),m={id:a.id,name:a.name||"",start:a.start?ct(a.start*1e3).format("DD.MM.YYYY"):"",end:a.end?ct(a.end*1e3).format("DD.MM.YYYY"):"",image:[a.image],descr:a.descr||"",show_on_homepage:!!a.show_on_homepage,is_banner:!!a.is_banner,author:a.author||null,tags:a.tags||[],apartments_ids:[],filterFields:a!=null&&a.filters_info?JSON.parse(a==null?void 0:a.filters_info):Nm},[_,y]=v.useState([]);v.useEffect(()=>{i==="edit"&&(d(a.image?[a.image].map((G,V)=>({id:V+1,image:G})):[]),f(a.banner_image?[a.banner_image].map((G,V)=>({id:V+1,image:G})):[]),Ue(`/api/promo/${m.id}/apartments`).then(G=>{y(G.data)}))},[a]);const{handleSubmit:x,control:b,reset:w,watch:C,formState:{errors:j}}=en(),[E,T]=v.useState(m.filterFields),N=C("is_banner"),P=()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:s.title})}),I=()=>r.jsx("div",{className:"px-14 py-6",children:r.jsx(_e,{onClick:x(z),className:"w-full",children:"Сохранить"})}),B=(G,V)=>{const J=cr([...G]);V(J)},U=(G,V,J)=>{const Q=V.filter(Y=>Y.id!==G).map((Y,oe)=>({...Y,id:oe+1}));J(Q)},z=G=>{const V={...G,author_id:G.author?G.author.value:null,image:u,apartments_ids:p.map(Q=>Q.value),filtersInfo:JSON.stringify(E)};V.is_banner?V.banner_image=h:delete V.banner_image;const J=()=>{w()};s.onSubmitForm(V,J,i,m.id||null)};return r.jsx(gt,{set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:t,style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1150px"},closeBtn:!1,ModalHeader:P,ModalFooter:I,children:r.jsxs("form",{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Qe,{control:b,beforeText:"Название",name:"name",defaultValue:m.name}),r.jsx(fn,{control:b,nameLabel:"Автор",defaultOption:!0,placeholderName:o.developer?`${o.developer.pos} ${o.developer.name}`:"Не выбрано",options:n,name:"author",defaultValue:n==null?void 0:n.find(G=>{var V;return G.value===((V=m.author)==null?void 0:V.id)||G.value===c}),disabled:c}),r.jsx(Qe,{control:b,datePicker:!0,beforeText:"Начало",name:"dateStart",defaultValue:m.start,requiredValue:!0,errors:j}),r.jsx(Qe,{control:b,datePicker:!0,beforeText:"Окончание",name:"dateEnd",defaultValue:m.end,requiredValue:!0,errors:j})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Описание"}),r.jsx(bi,{control:b,maxLength:3e3,name:"descr",placeholder:"Расскажите об скидках и спецпредложениях",requiredValue:!0,defaultValue:m.descr,errors:j})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Основная фотография"}),r.jsx(Bo,{items:u,deleteItem:(G,V)=>U(V,u,d)}),r.jsx(ta,{addFiles:G=>B(G,d),multiple:!1,className:`${u.length>0?"mt-6":""} mb-4`})]}),N&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Баннер"}),r.jsx(Bo,{items:h,deleteItem:(G,V)=>U(V,h,f)}),r.jsx(ta,{addFiles:G=>B(G,f),multiple:!1,className:`${h.length>0?"mt-6":""} mb-4`})]}),!!(o.tags&&o.tags.length)&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Теги"}),r.jsx(_c,{className:"w-full",control:b,options:o.tags.map(G=>({value:G.id,label:G.name})),defaultValue:m.tags.map(G=>G.id),name:"tags",type:"multiple"})]}),r.jsxs("div",{className:"mt-8 flex items-center gap-8",children:[r.jsx(ps,{control:b,option:{value:"show_on_homepage",label:"Показать на главной"},name:"show_on_homepage",defaultValue:m.show_on_homepage}),r.jsx(ps,{control:b,option:{value:"is_banner",label:"Баннер"},name:"is_banner",defaultValue:m.is_banner}),r.jsx(ps,{control:b,option:{value:"show_on_stories",label:"Показать в stories"},name:"show_on_stories",defaultValue:m.show_on_stories})]}),r.jsx("div",{className:"mt-8",children:r.jsx(Fm,{building_id:o.id,frames:l,setData:g,defaultValue:_,filterFields:E,setFilterFields:T})})]})})},Wq=({data:t,set:e,refetchData:n})=>{const[s,i]=v.useState({}),a=async(o,l,c,u)=>{const d={...o,building_id:s.building.id,is_calculation:t.is_calculation,is_news:t.is_news},h=new FormData;d.image=ts(d.image),ss(d.image,h),d.image=ns(d.image),d.image=d.image[0],d.is_banner&&(d.banner_image=ts(d.banner_image),ss(d.banner_image,h),d.banner_image=ns(d.banner_image),d.banner_image=d.banner_image[0]),h.append("data",JSON.stringify(d));const{data:f}=await Me(`/admin-api/promo/${u}/update`,h,{"Content-Type":"multipart/form-data"});await Me(`/admin-api/assign/promo/${f.id}/apartments`,{apartments_ids:d.apartments_ids}),e(!1),n&&n()};if(v.useEffect(()=>{if(!t)return;(async()=>{const l=await Yh(t.building_id),c=await Oh(t.building_id),u=await Xh(t.building_id);let d=l[`${t.type==="calculation"?"calculations":t.type==="news"?"news":"stock"}`].find(f=>f.id===t.id);if(!d)return;const h={frames:c,specialists:u.map(f=>({avatar:f.avatar,label:f.name,value:f.id})),building:l,promo:d};i(h)})()},[t]),!!(s!=null&&s.promo))return r.jsx(Hd,{conditionModal:!!t,setModal:e,specialists:s.specialists||[],dataObject:s.building||{},values:s.promo,frames:s.frames,type:"edit",options:{title:"Редактировать скидку",onSubmitForm:a}})},_4e=[{id:0,value:"all",label:"Всё"},{id:1,value:"stocks",label:"Скидки"},{id:2,value:"news",label:"Подарки"},{id:3,value:"calculations",label:"Расчеты"},{id:4,value:"videos",label:"Видео"},{id:5,value:"shorts",label:"Клипы"}],Nf=({data:t=[],type:e=""})=>{const[n,s]=v.useState(!1),[i,a]=v.useState(""),[o,l]=v.useState(t);return v.useEffect(()=>{l(t)},[t]),v.useEffect(()=>{const c=t.filter(u=>["title","name","descr"].some(d=>{var h;return(h=u[d])==null?void 0:h.toLowerCase().includes(i.toLowerCase())}));l(c)},[i]),r.jsxs(r.Fragment,{children:[r.jsx(kn,{before:"Поиск по названию",value:i,onChange:c=>{a(c.trim())}}),r.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-10 md3:grid-cols-2 border-t border-t-primary800 mt-5 pt-5",children:o.length?r.jsx(r.Fragment,{children:e==="shorts"?r.jsxs(r.Fragment,{children:[o.map(c=>r.jsx("div",{className:"col-span-1",children:r.jsx(Ly,{data:c,setShortsOpen:()=>s(!0),contentVisible:!1})},c.id)),r.jsx(Oy,{condition:n!==!1,set:s,data:o,startData:o.find(c=>c.id===n),startIndex:o.findIndex(c=>c.id===n)})]}):r.jsx(r.Fragment,{children:o.map(c=>{if(c.type==="stock"||c.type==="news"||c.type==="calculation")return r.jsx("div",{className:"col-span-4",children:r.jsx(rve,{...c})},c.id);if(c.type==="video"||c.type==="short")return r.jsx("div",{className:"col-span-4",children:r.jsx($i,{data:c,userVisible:!0,playerIn:!0,userTop:!0,playerInVisibleControls:c.type==="video"})},c.id)})})}):r.jsx("div",{className:"col-span-3",children:r.jsx(Or,{block:!1})})})]})},w4e=({data:t=[],type:e=""})=>{const[n,s]=v.useState(!1),[i,a]=v.useState(""),[o,l]=v.useState(t),c=e!=="all"&&e!=="objects"&&e!=="specialists";return v.useEffect(()=>{a(""),l(t)},[t]),v.useEffect(()=>{if(c){const u=t.filter(d=>["title","name","descr"].some(h=>{var f;return(f=d[h])==null?void 0:f.toLowerCase().includes(i.toLowerCase())}));l(u)}},[i]),r.jsx(r.Fragment,{children:r.jsx("div",{children:o.length?r.jsxs(r.Fragment,{children:[e==="shorts"&&r.jsxs("div",{children:[r.jsx("h2",{className:"title-2-5 mb-4",children:"Клипы"}),r.jsxs("div",{className:"grid grid-cols-5 gap-x-3 gap-y-10 md2:grid-cols-4 md3:grid-cols-3 md4:grid-cols-2",children:[o.map(u=>r.jsx("div",{children:r.jsx(Ly,{data:u,setShortsOpen:()=>s(u.id),contentVisible:!1})},u.id)),r.jsx(Oy,{condition:n!==!1,set:s,data:o,startData:o.find(u=>u.id===n),startIndex:o.findIndex(u=>u.id===n)})]})]}),e==="videos"&&r.jsxs("div",{children:[r.jsx("h2",{className:"title-2-5 mb-4",children:"Клипы"}),r.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-10 md2:grid-cols-2 md4:grid-cols-1",children:o.map(u=>r.jsx("div",{children:r.jsx($i,{data:u,userVisible:!0})},u.id))})]}),(e==="stocks"||e==="news"||e==="calculations")&&r.jsxs("div",{children:[r.jsx("h2",{className:"title-2-5 mb-4",children:e==="stocks"?"Скидки":e==="calculations"?"Расчёты":"Подарки"}),r.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-10 md2:grid-cols-2 md4:grid-cols-1",children:o.map(u=>r.jsx("div",{children:r.jsx(ww,{...u})},u.id))})]})]}):r.jsx("div",{children:r.jsx(Or,{block:!1})})})})},Gq=({data:t=[],emptyText:e="",isLoadingData:n=!1})=>{const[s,i]=_r(),a=vs(),[o,l]=v.useState({}),[c,u]=v.useState(!0),[d,h]=v.useState(0),f=Xw(o);return v.useEffect(()=>{(async()=>{u(!0);const g=t.filter(C=>C.type==="stock"),m=t.filter(C=>C.type==="calculation"),_=t.filter(C=>C.type==="news"),y=t.filter(C=>C.type==="video"),x=t.filter(C=>C.type==="short"),b=y.length?await Ue("/api/video-url",{url:y.map(C=>C.link)}).then(C=>C.data):[],w=x.length?await Ue("/api/video-url",{url:x.map(C=>C.link)}).then(C=>C.data):[];l({stocks:g,calculations:m,news:_,videos:b.filter(C=>!Ye(C)).map(C=>({...C,type:"video"})),shorts:w.filter(C=>!Ye(C)).map(C=>({...C,type:"short"}))}),u(!1)})()},[t==null?void 0:t.length]),v.useEffect(()=>{var p;if(!Ye(o)&&a.tab){const g={...o};Object.keys(g).forEach(_=>{Array.isArray(g[_])&&g[_].length===0&&delete g[_]});const m=_4e.filter(_=>g.hasOwnProperty(_.value)).map((_,y)=>({..._,id:y+1}));h(((p=m.find(_=>_.value===a.tab))==null?void 0:p.id)||0)}},[o]),r.jsx("section",{children:c||n?r.jsxs(r.Fragment,{children:[r.jsx(Fe,{className:"w-full h-[43px] rounded-lg"}),r.jsx(Fe,{className:"mt-6 w-full h-[40px] rounded-lg"}),r.jsx("div",{className:"flex flex-col gap-y-10 border-t border-t-primary800 mt-5 pt-5",children:[...new Array(3)].map((p,g)=>r.jsxs("div",{className:"select-none rounded-xl",children:[r.jsxs("div",{className:"mb-3 flex items-center gap-3 w-full",children:[r.jsx(Fe,{className:"w-10 h-10 rounded-full"}),r.jsx(Fe,{className:"w-4/5 h-10 rounded-lg"})]}),r.jsx(Fe,{className:"rounded-xl h-[480px] w-full"}),r.jsx("div",{className:"mt-4 flex justify-between gap-3",children:r.jsx(Fe,{className:"w-full h-12 rounded-xl"})})]},g))})]}):r.jsx(r.Fragment,{children:f.length?r.jsx(Uo,{defaultValue:d,data:[sr(f.length,{name:"Всё",valueName:"all",body:r.jsx(Nf,{data:f}),count:f.length}),sr(o.stocks.length,{name:"Скидки",valueName:"stocks",body:r.jsx(Nf,{data:o.stocks}),count:o.stocks.length}),sr(o.news.length,{name:"Подарки",valueName:"news",body:r.jsx(Nf,{data:o.news}),count:o.news.length}),sr(o.calculations.length,{name:"Расчеты",valueName:"calculations",body:r.jsx(Nf,{data:o.calculations}),count:o.calculations.length}),sr(o.videos.length,{name:"Видео",valueName:"videos",body:r.jsx(Nf,{data:o.videos}),count:o.videos.length}),sr(o.shorts.length,{name:"Клипы",valueName:"shorts",body:r.jsx(Nf,{data:o.shorts,type:"shorts"}),count:o.shorts.length})].filter(p=>!Ye(p)),onChange:(p,g)=>{const m=new URLSearchParams(s);m.set("tab",g.valueName),i(m)}}):e&&r.jsx(Wa,{block:!1,children:r.jsx("h3",{className:"title-3 mt-4",children:e})})})})},Rh=({data:t=[],currentComplexId:e,onClickShowAll:n,data_type:s="default",customHref:i="",refetchData:a})=>{const o=ue(rt),l=ue(Qs),[c,u]=v.useState([]),[d,h]=v.useState(!1),[f,p]=v.useState(!1),[g,m]=v.useState(!1),_=[e&&`complex=${e}`].filter(Boolean).join("&"),y=i||`${ke.feed}?${_?`${_}`:""}`;if(v.useEffect(()=>{(async()=>{const b=t.filter(N=>N.type==="video"),w=t.filter(N=>N.type==="short"),C=t.filter(N=>N.type==="object"),j=b.length&&s==="default"?await Ue("/api/video-url",{url:b.map(N=>N.link)}).then(N=>N.data):s==="data"?b:[],E=w.length&&s==="default"?await Ue("/api/video-url",{url:w.map(N=>N.link)}).then(N=>N.data):s==="data"?w:[],T=C.length&&s==="default"?await Xa({visibleObjects:C.map(N=>N.id),per_page:4}).then(N=>N.cards):s==="data"?C:[];u([[{name:"Объекты застройщика",valueName:"objects",data:T}],[{name:"Менеджеры отдела продаж",valueName:"specialists",data:t.filter(N=>N.type==="specialist")}],[{name:"Клипы",valueName:"shorts",data:E.filter(N=>!Ye(N))},{name:"Видео",valueName:"videos",data:j.filter(N=>!Ye(N))}],[{name:"Скидки",valueName:"stocks",data:t.filter(N=>N.type==="stock")},{name:"Подарки",valueName:"news",data:t.filter(N=>N.type==="news")},{name:"Расчеты",valueName:"calculations",data:t.filter(N=>N.type==="calculation")}]])})()},[JSON.stringify(t)]),!!t.length)return r.jsxs("div",{className:"flex flex-col gap-3",children:[c.map((x,b)=>{if(x.reduce((C,j)=>C+j.data.length,0))return r.jsx("div",{className:"white-block flex flex-col gap-12",children:x.filter(C=>C.data.length).map((C,j)=>{if(C.data.length!==0)return r.jsxs("div",{className:"",children:[r.jsxs("div",{className:"flex justify-between items-center gap-4 mb-5",children:[r.jsx("h2",{className:"title-2-5",children:C.name}),C.data.length>=0&&r.jsx("div",{className:"self-start",children:n?r.jsx("button",{className:"blue-link _active",onClick:()=>n==null?void 0:n(j),children:"Смотреть всё"}):r.jsx(Rl,{to:`${y}&tab=${C.valueName}`,className:"blue-link _active",children:"Смотреть всё"})})]}),r.jsxs(Xs,{modules:[xi],navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},observeParents:!0,observer:!0,slidesPerView:C.valueName==="shorts"||C.valueName==="specialists"?2:1.3,spaceBetween:16,breakpoints:{540:{slidesPerView:(C.valueName==="shorts"||C.valueName==="specialists",2)},722:{slidesPerView:C.valueName==="shorts"||C.valueName==="specialists"?3:2},940:{slidesPerView:C.valueName==="shorts"||C.valueName==="specialists"?4:3}},children:[C.data.map((E,T)=>{if(C.valueName==="shorts"&&T<7)return r.jsx(Tn,{children:r.jsx(Ly,{data:E,setShortsOpen:()=>h(E.id),contentVisible:!1,controlsAdmin:!0,deleteCard:async N=>{await $_(N,E.building_id,l),a.shorts&&a.shorts()},edit:N=>p({data:N,is_short:!0,refetchData:a==null?void 0:a.shorts})})},E.id);if(C.valueName==="videos"&&T<5)return r.jsx(Tn,{children:r.jsx($i,{data:E,userVisible:!0,controlsAdmin:!0,deleteCard:async N=>{await $_(N,E.building_id,l),a.videos&&a.videos()},edit:N=>p({data:N,is_short:!1,refetchData:a==null?void 0:a.videos})})},E.id);if(C.valueName==="objects"&&T<5)return r.jsx(Tn,{children:r.jsx(Ll,{...E})},E.id);if(C.valueName==="specialists"&&T<5)return r.jsx(Tn,{children:r.jsx(_y,{...E,link:!0,visibleChat:!0,onClickChat:async()=>{const N=await $s({recipients_id:[E.id],type:xt.CHAT});xr(N)}})},E.id);if(T<5)return r.jsx(Tn,{children:r.jsx(ww,{...E,controlsAdmin:!0,editCard:()=>{const N={...E,building_id:E.building_id,is_calculation:E.type==="calculation",is_news:E.type==="news"};m({data:N,refetchData:a==null?void 0:a.promos})},deleteCard:async()=>{await new Promise(N=>setTimeout(N,2e3)),a.promos&&a.promos()}})},E.id)}),o&&r.jsxs(r.Fragment,{children:[r.jsx(ho,{disabled:!0,className:"slider-btn-prev !absolute left-4 top-[80px]"}),r.jsx(fo,{className:"slider-btn-next !absolute right-4 top-[80px]"})]})]}),C.valueName==="shorts"&&r.jsx(Oy,{condition:d!==!1,set:h,data:C.data,startData:C.data.find(E=>E.id===d),startIndex:C.data.findIndex(E=>E.id===d)})]},j)})},b)}),r.jsx(Ze,{condition:f,children:r.jsx(BA,{data:f==null?void 0:f.data,set:p,is_short:f==null?void 0:f.is_short,refetchData:f==null?void 0:f.refetchData})}),r.jsx(Ze,{condition:g,children:r.jsx(Wq,{data:g==null?void 0:g.data,set:m,refetchData:g==null?void 0:g.refetchData})})]})},WA=({condition:t,set:e,specialists:n=[],building_id:s})=>{if(n.length>0)return r.jsx(Ze,{condition:t,children:r.jsx(gt,{condition:!!t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[800px]"},children:r.jsx(j4,{specialists:n,building_id:s,title:"Выберите менеджера для консультации",block:!1})})})},Yq=({children:t,block:e,container:n,condition:s,heightGap:i=0})=>{const a=(o,l)=>{let c,u;return function(){const d=this,h=arguments;u?(clearTimeout(c),c=setTimeout(()=>{Date.now()-u>=l&&(o.apply(d,h),u=Date.now())},l-(Date.now()-u))):(o.apply(d,h),u=Date.now())}};return v.useEffect(()=>{if(!e||!n)return;if(!s){e.style.position="relative";return}const o=()=>{if(!s){n.style.marginTop="0px";return}const c=e.clientHeight-40;window.scrollY>=c-i||(n.style.marginTop=`${c-window.scrollY}px`)},l=a(o,0);return e.style.position="absolute",n.style.position="relative",n.style.zIndex="99",n.style.transition="margin-top 0.2s linear",o(),window.addEventListener("scroll",l,{passive:!0}),()=>{window.removeEventListener("scroll",l,{passive:!0})}},[e,n,s]),t},C4e="_FixedBlockRoot_14i9c_1",S4e="_FixedBlockRootActive_14i9c_15",b8={FixedBlockRoot:C4e,FixedBlockRootActive:S4e},Dl=({children:t,condition:e,activeDefault:n=!1,conditionWidth:s=null,className:i})=>{const[a,o]=v.useState(n);if(v.useEffect(()=>{if(n||s!==null)return;const l=()=>{const c=window.pageYOffset;e.el.current.getBoundingClientRect().top>innerHeight&&c>e.top&&e.el.current.offsetTop+e.el.current.clientHeight>c+innerHeight?o(!0):o(!1)};return window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)}},[s]),!(!s&&s!==null))return r.jsx("div",{className:He(b8.FixedBlockRoot,a&&b8.FixedBlockRootActive,i),children:t})},j4e="_GalleryRowSlide_15rwj_1",T4e="_GalleryRowSlideFull_15rwj_11",E4e="_GalleryRowVideo_15rwj_15",N4e="_GalleryRowImage_15rwj_28",k4e="_GalleryRowTag_15rwj_41",A4e="_GalleryRowVideoBadge_15rwj_54",D4e="_GalleryRowVideoBadgeCircle_15rwj_72",xo={GalleryRowSlide:j4e,GalleryRowSlideFull:T4e,GalleryRowVideo:E4e,GalleryRowImage:N4e,GalleryRowTag:k4e,GalleryRowVideoBadge:A4e,GalleryRowVideoBadgeCircle:D4e},P4e="_SliderPaginationRoot_ed6hx_1",I4e="_SliderPaginationRootStatic_ed6hx_24",M4e="_SliderPaginationCounter_ed6hx_29",O4e="_SliderPaginationItems_ed6hx_36",R4e="_SliderPaginationItem_ed6hx_36",L4e="_SliderPaginationItemActive_ed6hx_53",ri={SliderPaginationRoot:P4e,SliderPaginationRootStatic:I4e,SliderPaginationCounter:M4e,SliderPaginationItems:O4e,SliderPaginationItem:R4e,SliderPaginationItemActive:L4e},B4e=({current:t,total:e,staticPos:n=!1,className:s=""})=>{if(!(e<=1))return r.jsxs("div",{className:`${ri.SliderPaginationRoot} ${n?ri.SliderPaginationRootStatic:""} ${s}`,children:[r.jsxs("div",{className:ri.SliderPaginationCounter,children:[r.jsx("span",{children:t+1}),r.jsx("span",{children:"из"}),r.jsx("span",{children:e})]}),e===2&&r.jsxs("div",{className:ri.SliderPaginationItems,children:[r.jsx("span",{className:`${ri.SliderPaginationItem} ${t===0?ri.SliderPaginationItemActive:""}`}),r.jsx("span",{className:`${ri.SliderPaginationItem} ${t===e-1?ri.SliderPaginationItemActive:""}`})]}),e>2&&r.jsxs("div",{className:ri.SliderPaginationItems,children:[r.jsx("span",{className:`${ri.SliderPaginationItem} ${t===0?ri.SliderPaginationItemActive:""}`}),r.jsx("span",{className:`${ri.SliderPaginationItem} ${t>0&&t!==e-1?ri.SliderPaginationItemActive:""}`}),r.jsx("span",{className:`${ri.SliderPaginationItem} ${t===e-1?ri.SliderPaginationItemActive:""}`})]})]})},F4e="_FullscreenBtnRoot_qfai1_1",$4e="_FullscreenBtnDark_qfai1_22",_8={FullscreenBtnRoot:F4e,FullscreenBtnDark:$4e},U4e=t=>{if(ue(rt))return r.jsx("div",{...t,className:He(_8.FullscreenBtnRoot,t.variant==="dark"&&_8.FullscreenBtnDark,t.className),children:r.jsx($h,{className:He(t.variant==="dark"&&"!fill-white")})})},n2=(t,e="auto",n=()=>{})=>{const s=t.slides,i=s[t.activeIndex];s.forEach((a,o)=>{const l=a.querySelector("video"),c=l?je.getPlayer(l.id):null;c&&(e==="auto"&&(t.activeIndex===o?(c.volume(localStorage.getItem("video_volume")||.5),setTimeout(()=>{c.play()},300)):c.paused()||c.pause()),e==="off"&&c.pause())}),i&&i.querySelector("video")?n(!1):n(!0)},Xq=({options:t})=>{const{swiperRef:e,dataGallery:n,onSlideChange:s,visiblePagination:i,setVisiblePagination:a,videosData:o,setIsOpenModal:l,galleryHeight:c=420,fullscreen:u=!0,imageFit:d="cover",mode:h="default",galleryVariant:f}=t,p=ue(rt),[g,m]=v.useState(0),_=n==null?void 0:n.reduce((b,w)=>{var C,j;return b+=((C=w.images)==null?void 0:C.length)||((j=w.videos)==null?void 0:j.length)||0},0),y=n==null?void 0:n.reduce((b,w)=>{const C=w.videos?w.videos:w.images;return b=[...b,...C]},[]),x=(b=null)=>{const w=e.current.swiper;m(b||w.activeIndex),b||s(b)};return r.jsxs(Xs,{slidesPerView:"auto",modules:[xi],navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:4,speed:500,noSwiping:!0,noSwipingSelector:".vjs-control",ref:e,onSlideChange:()=>x(),allowTouchMove:!0,observeParents:!0,observer:!0,preventClicks:!0,preventClicksPropagation:!0,onReachEnd:b=>{x(b.activeIndex+1)},className:"w-full cursor-pointer gallery-target-modal overflow-visible",style:{height:c},children:[y.map((b,w)=>{const C=n.findIndex(j=>(j.images||j.videos).find(E=>E===b));if(rw(b))return r.jsx(Tn,{"data-gallery-group-index":C,className:`${xo.GalleryRowSlide} ${h==="modal"?xo.GalleryRowSlideFull:""}`,children:r.jsx("div",{className:"w-full h-full",onClick:()=>{h==="default"&&l(w||!0)},children:r.jsx("div",{className:"flex flex-col h-full",children:r.jsx("img",{src:qt(b),alt:"",className:`${xo.GalleryRowImage} ${d==="contain"?"!object-contain":""}   
                                 ${h==="modal"&&p?"!object-contain bg-dark":""}`})})})},w);{const j=o.find(E=>E.id===b.id);return r.jsxs(Tn,{"data-gallery-group-index":C,className:`${xo.GalleryRowSlide} ${h==="modal"?xo.GalleryRowSlideFull:""}`,children:[h==="default"&&r.jsx("div",{className:"w-full h-full",onClick:()=>{l(w||!0)},children:r.jsxs("div",{className:"flex flex-col h-full relative",children:[r.jsx("img",{src:jH(j),className:`${xo.GalleryRowImage} ${d==="contain"?"!object-contain":""}
                                    ${h==="modal"&&p?"!object-contain bg-dark":""}
                                    `,alt:j.name}),r.jsxs("div",{className:xo.GalleryRowVideoBadge,children:[r.jsx("div",{className:xo.GalleryRowVideoBadgeCircle,children:r.jsx(lv,{className:"fill-dark",width:22,height:22})}),r.jsx("span",{className:"mt-2",children:"Смотреть видео"})]})]})}),h==="modal"&&r.jsx(TH,{data:j,className:xo.GalleryRowVideo})]},w)}}),i&&r.jsx(B4e,{current:g,total:_,className:f==="top"?"md1:!bottom-10":""}),p&&r.jsxs(r.Fragment,{children:[r.jsx(ho,{centery:"true",disabled:!0,className:"slider-btn-prev"}),r.jsx(fo,{centery:"true",className:"slider-btn-next"})]}),u&&r.jsx(U4e,{className:"!top-auto bottom-4",onClick:()=>{n2(e.current.swiper,"off",a),l(!0)}})]})},GA=({swiperRef:t,onSlideChange:e=()=>{},dataGallery:n=[],visiblePagination:s=!1,setVisiblePagination:i=()=>{},videosData:a=[],galleryHeight:o=420,isOpenModal:l=!1,setIsOpenModal:c=()=>{},imageFit:u="cover",tabsMobile:d=!0,galleryVariant:h="default",galleryType:f="thumbs"})=>{const p={swiperRef:t,visiblePagination:s,setVisiblePagination:i,dataGallery:n,onSlideChange:e,videosData:a,isOpenModal:l,setIsOpenModal:c,galleryHeight:o,imageFit:u,tabsMobile:d};return r.jsxs("div",{className:"min-w-0 w-full overflow-hidden rounded-[20px]",children:[r.jsx(Xq,{options:{...p,galleryVariant:h}}),r.jsx(Ze,{condition:l,children:r.jsx(gt,{options:{overlayClassNames:"_full",modalContentClassNames:"!p-8 !pt-0 md1:!px-0 bg-[#0e1319] flex flex-col items-center"},closeBtnWhite:!0,set:c,condition:l,children:r.jsx(V4e,{data:n,setIsOpenModal:c,imageFit:u,type:f})})})]})},YA=({data:t,videosData:e=[],sidebar:n,activeIndex:s=0,mode:i="default",galleryHeight:a=420,isOpenModal:o=!1,setIsOpenModal:l=()=>{},imageFit:c="cover",tabsMobile:u=!0})=>{var x,b,w,C,j,E,T,N;const[d,h]=v.useState(0),f=v.useRef(null),[p,g]=v.useState(!0),m=P=>{const I=f.current.swiper,B=I.slides[I.activeIndex];h(+B.dataset.galleryGroupIndex),n2(I,"auto",g)},_=P=>{let I=0;t.forEach(B=>{var U,z;P>=B.id&&B.id!==P&&(I+=((U=B.images)==null?void 0:U.length)||((z=B.videos)==null?void 0:z.length)||0)}),h(P),f.current&&f.current.swiper&&f.current.swiper.slideTo(I)};v.useEffect(()=>{f.current&&(n2(f.current.swiper,"off",g),f.current.swiper.slideTo(s,0))},[]);const y={value:((x=t[d])==null?void 0:x.distance)||((b=t[d])==null?void 0:b.price),prefix:(w=t[d])!=null&&w.distance?"м²":(C=t[d])!=null&&C.price?"₽":""};if(i==="default")return r.jsxs("div",{children:[u&&r.jsx(jl,{children:t.map((P,I)=>r.jsx(Tl,{border:!0,onChange:()=>_(I),value:d===I,children:P.title},I))}),r.jsxs(zp,{className:"min-w-0 overflow-hidden relative",children:[r.jsx(GA,{dataGallery:t,videosData:e,swiperRef:f,onSlideChange:m,visiblePagination:p,setVisiblePagination:g,sidebar:n,galleryHeight:a,isOpenModal:o,setIsOpenModal:l,imageFit:c}),((j=t[d])==null?void 0:j.description)&&r.jsxs("div",{className:"mt-3 md1:!mx-4",children:[r.jsx("div",{className:"cut cut-4",children:r.jsx(Ku,{data:(E=t[d])==null?void 0:E.description})}),r.jsx("button",{type:"button",className:"blue-link mt-3",onClick:()=>l(!0),children:"Подробнее"}),!!(y.prefix&&y.value)&&r.jsxs("div",{className:xo.GalleryRowTag,children:[y.value," ",y.prefix]})]})]})]});if(i==="modal")return r.jsxs("div",{className:"container-desktop !max-w-[1600px]",children:[u&&r.jsx(jl,{children:t.map((P,I)=>r.jsx(Tl,{border:!0,onChange:()=>_(I),value:d===I,children:P.title},I))}),r.jsxs("div",{className:"grid mmd1:grid-cols-[1fr_minmax(auto,350px)] gap-x-5",children:[r.jsxs(zp,{className:"min-w-0  overflow-hidden",children:[r.jsx(Xq,{options:{dataGallery:t,onSlideChange:m,fullscreen:!1,videosData:e,swiperRef:f,visiblePagination:p,setVisiblePagination:g,galleryHeight:a,isOpenModal:o,setIsOpenModal:l,imageFit:c,mode:i}}),((T=t[d])==null?void 0:T.description)&&r.jsx("div",{className:"mt-3 md1:!mx-4",children:r.jsx(Ku,{data:(N=t[d])==null?void 0:N.description})})]}),r.jsx("div",{className:`md1:!mx-4 ${u?"mt-6":""} md1:border-t md1:pt-4 md1:border-primary700 md1:mt-4`,children:n})]})]})},V4e=({data:t,imageFit:e})=>{const n=ue(rt);return r.jsx("div",{className:"!pt-14 flex flex-col items-center",children:r.jsx("div",{className:"max-w-[1400px] flex flex-col gap-6 justify-center",children:t.map((s,i)=>r.jsx("div",{children:r.jsxs("div",{className:"flex flex-col gap-3",children:[s.type==="images"&&s.images.map((a,o)=>r.jsx("img",{src:qt(a),alt:"",className:He("h-full",xo.GalleryRowImage,e==="contain"&&"!object-contain",n&&"bg-[#0e1319]")},o)),s.type==="videos"&&s.videos.map((a,o)=>r.jsx(TH,{data:a},o))]})},i))})})},Kq=async t=>{try{return(await Ue(`/api/apartment/${t}`)).data}catch(e){console.log(e)}},z4e=t=>{const e=vs();ur();const n=ue(Ot),s=ue(Ks),i=xm(n),[a,o]=v.useState([]),[l,c]=v.useState(null),[u,d]=v.useState([]),[h,f]=v.useState(!1),[p,g]=v.useState({}),[m,_]=v.useState(null),[y,x]=v.useState(null),b=ue(E=>E.apartment),w=Dt(),C=async E=>{try{const{data:T}=await Ue(`/buyer-api/my-application/apartment/${E}`);g(T)}catch{}},j=async()=>{var E;if(s)if(u.length)f(!0);else{const T=await $s({building_id:l.building_id,organization_id:(E=l.developer)==null?void 0:E.id,type:xt.CHAT});xr(T)}else w(Bs(!0))};return v.useEffect(()=>{(async()=>{var B;const T=await Kq(t),N=Object.values(T.gift_groups).flat(2).filter(U=>!U.is_main_group).slice(-1)[0],P=bw(T==null?void 0:T.buildingDiscount,T==null?void 0:T.priceOld,T==null?void 0:T.area),I=(P||T.priceOld)/100*((T.cashback||0)+(((B=T.buildingCashback)==null?void 0:B.value)||0));c({...T,title:fq(T),history_price_old:Ye(T.historyPrice)?T.priceOld:pTe(T.historyPrice).value,gift_group:N&&!Ye(N)?{count:N.count||null,sum:N.sum||null,max_sum:N.max_sum||null}:{},promos:T.promos.filter(U=>ct().isBefore(ct.unix(U.end))),cashbackValue:I,priceByDiscount:P}),Xh(T.building_id).then(U=>d(U))})(),e.purchase&&(Ue("/api/object-types").then(T=>{T.data&&o(T.data.map(N=>({value:N.id,label:N.name})))}),Ue(`/api/purchase-orders/${e.purchase}`).then(T=>x(T.data)))},[]),v.useEffect(()=>{if(s&&i&&l){C(t);try{Ue(`/buyer-api/my-personal-discount/apartment/${t}`).then(E=>{E.data&&Ue(`/api/special-condition/building/${l.building_id}`).then(T=>{_(E.data.map(N=>{const P=T.data.find(I=>I.id===N.special_condition_id);return{id:N.id,property_type:N.discountable_type==="App\\Models\\Building"?"complex":"apartment",type:N.is_absolute?"price":N.is_special_condition?"special-condition":"prc",object_id:N.discountable_id,valid_till:N.valid_till,discount:N.discount,author:N.author,special_condition:N.special_condition_id!==null?P:null}}))})})}catch{}}},[n,l]),{apartmentData:l,types:a,myDiscount:m,goToChat:j,purchaseRequest:y,isOpenChoiceSpecialist:h,setIsOpenChoiceSpecialist:f,specialistsData:u,apartmentSelector:b,suggestions:p,getSuggestions:C}},XA=({classNames:t,building_id:e,organization_id:n,isSpecialist:s,specialist_id:i})=>{const a=ue(Ks),o=Dt(),[l,c]=v.useState("Здравствуйте, хочу записаться на видеоконсультацию"),u=async(d=!1)=>{if(a)try{let h;if(i?h=await $s({building_id:e,recipients_id:[i],type:xt.CHAT}):s?h=await $s({building_id:e,type:xt.CHAT}):h=await $s({building_id:e,organization_id:n,type:xt.CHAT}),!h)throw new Error;if(d)xr(h,d);else{const f=new FormData;f.append("dialog_id",h),f.append("text",l||""),await Me("/api/messages/new-message",f,{"Content-Type":"multipart/form-data","Accept-Encodin":"gzip, deflate, br, zstd",Accept:"application/json"}),xr(h)}c("")}catch(h){console.log(h)}else o(Bs(!0))};return r.jsxs("div",{className:He(t),children:[r.jsx("h2",{className:"title-2 mb-5",children:"Задайте вопрос застройщику"}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:VH.map((d,h)=>r.jsx(An,{size:"medium",onClick:()=>u(d.id),hoverEnable:!0,children:r.jsxs("div",{className:"flex items-center gap-2",children:[d.title,d.icon==="iconAdd"&&r.jsx(Xi,{width:15,height:15})]})},h))}),r.jsxs("div",{className:"mt-4 relative",children:[r.jsx($y,{placeholder:"Напечатайте сообщеие",onChange:d=>c(d),value:l,minHeight:80,maxLength:200}),r.jsx("button",{type:"button",className:"absolute bottom-2 right-0 px-2.5 flex-center-all self-end",onClick:()=>{l!==""&&u()},children:r.jsx(K2,{width:22,height:22})})]})]})},Qq=({condition:t,set:e})=>r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"mmd1:!w-[400px]",modalContentClassNames:"!px-10 md1:!px-6"},children:[r.jsx("h2",{className:"title-2 text-center mb-4",children:"Заявка отправлена"}),r.jsxs("div",{className:"text-center mb-2 text-primary400 flex flex-col gap-2",children:[r.jsx("p",{children:"Продавец должен ответить в течение указанного времени, иначе она отклонится автоматически."}),r.jsx("p",{children:"Вы можете напомнить о себе и связаться с продавцом самостоятельно на странице объявления."})]}),r.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[r.jsx(Rl,{to:Fn.view,className:"w-full",children:r.jsx(_e,{Selector:"div",children:"Перейти к моим записям"})}),r.jsx(_e,{variant:"secondary",onClick:()=>e(!1),children:"Закрыть"})]})]})}),Yn={buyerOnly:{id:1,endpoint:"/buyer-api/suggestions",title:"Записи на просмотр",author_is_user:[{value:null,label:"Все"},{value:!0,label:"Мои запросы"},{value:!1,label:"От продавца"}]},buyerAll:{id:2,endpoint:"/buyer-api/suggestions",title:"Записи на просмотр",author_is_user:[{value:null,label:"Все"},{value:!0,label:"Мои запросы"},{value:!1,label:"От продавца"}]},sellerHistory:{id:3,endpoint:"/seller-api/suggestions-cabinet",title:"История записей на просмотр"},sellerAll:{id:4,endpoint:"/seller-api/suggestions",title:"Записи на просмотр",author_is_user:[{value:null,label:"Все"},{value:!0,label:"От покупателя"},{value:!1,label:"Мои запросы"}]}},qN=[{value:"all",label:"Все",emptyText:"Заявок нет"},{value:"created",label:"Новые",emptyText:"Новых заявок нет"},{value:"confirmed",label:"Принятые",emptyText:"Принятых заявок нет"},{value:"declined",label:"Отклонённые",emptyText:"Отклонённых заявок нет"},{value:"purchased",label:"Забронированные",emptyText:"Забронированных заявок нет"}],s2=[{days:365*5,value:"all",label:"За всё время"},{days:7,value:"week",label:"За последнию неделю"},{days:3,value:"3-days",label:"За последние 3 дня"}],KA=(t=1)=>{const e=ct(),n=e.subtract(t,"day");return{from:ct(n).format("YYYY-MM-DD HH:mm:ss"),to:ct(e).format("YYYY-MM-DD HH:mm:ss")}},H4e=({buyer_id:t,order_id:e,suggestions_type:n,customUpdate:s})=>{const[i,a]=v.useState({items:[],pages:0,total:0}),[o,l]=v.useState(!0),[c,u]=v.useState(!1),[d,h]=v.useState(!1),[f,p]=v.useState(!1),[g,m]=v.useState(null),[_,y]=v.useState(!1),[x,b]=v.useState({per_page:15,page:1,...n.author_is_user&&{author_is_user:n.author_is_user[0].value},...n.id===Yn.sellerHistory.id&&{buyer_id:t},order_id:e,status:qN[0].value,dateRange:s2[0].value,...KA(s2[0].days),order_by_created_at:0,order_by_view_time:null}),w=async I=>{try{const B={...I};delete B.dateRange;const{data:U}=await Me(n.endpoint,B);a(U),l(!1)}catch(B){console.log(B)}},C=async I=>{p(!1),l(!0);const B={date:I.date,time:I.time};await Me(`${n.endpoint}/${I.status_id}/confirm`,B),s?await s():await w({...x,page:1}),m({title:"Вы успешно подтвердили заявку на просмотр"})},j=async I=>{try{u(!1),p(!1),l(!0),await Me(`${n.endpoint}/${I.status_id}/decline`,I),s?await s():await w({...x,page:1}),m({title:"Вы успешно отменили заявку на просмотр"})}catch(B){console.log(B)}},E=async I=>{try{h(!1),p(!1),l(!0);const B={date:I.date,time:I.time};await Me(`${n.endpoint}/${I.status_id}/update`,B),s?await s():await w({...x,page:1}),m({title:"Вы успешно изменили дату"})}catch(B){console.log(B)}},T=async I=>{try{y(!1),l(!0);const B={date:I.date,time:I.time};await Me(`/buyer-api/suggestions/${I.status_id}/create`,B),s?await s():await w({...x,page:1}),m({title:"Вы успешно записались заново на просмотр"})}catch(B){console.log(B)}},N=async I=>{try{p(!1),l(!0),await Me(`${n.endpoint}/${I}/purchase`),s?await s():await w({...x,page:1}),m({title:"Вы успешно забронировали объект"})}catch(B){console.log(B)}},P=qN.find(I=>I.value===x.status);return{data:i,isLoading:o,setIsLoading:l,filterFields:x,setFilterFields:b,getSuggestions:w,currentStatusInfo:P,onHandlerCancel:j,cancelModalOpen:c,setCancelModalOpen:u,actionsModalOpen:f,setActionsModalOpen:p,notificationData:g,setNotificationData:m,changeDateModalOpen:d,setChangeDateModalOpen:h,onHandlerChangeDate:E,onHandlerConfirmed:C,onHandlerPurchase:N,againSuggestionsModalOpen:_,setAgainSuggestionsModalOpen:y,onHandlerAgainDate:T}},q4e=({condition:t,set:e,onSubmit:n})=>{const{handleSubmit:s,control:i,setValue:a}=en(),o=["Не подходит время","Объект под задатком","Объект продан, снимаю объявление с продажи","Другое"].map(c=>({label:c,value:c})),l=c=>{const u={cause:W$(o,c),description:c.description};n(u)};return r.jsx(gt,{options:{overlayClassNames:"_right",modalClassNames:"!w-[600px]"},set:e,condition:t,children:r.jsxs("form",{onSubmit:s(l),children:[r.jsx("h3",{className:"title-3",children:"Укажите параметры по которым вы не сможете показать объект"}),r.jsx("p",{className:"mt-4 text-small",children:"Это поможет менеджерам и собственникам делать более точное предложение и не предлагать вам объект, который не подходит под ваши пожелания."}),r.jsx("div",{className:"mt-6 flex flex-col gap-3",children:r.jsx(km,{control:i,setValue:a,checkboxes:o})}),r.jsx("h3",{className:"title-3 mt-6 mb-3",children:"Комментарий"}),r.jsx(bi,{control:i,maxLength:4e3,name:"description",placeholder:"Расскажите подробнее в чем проблема"}),r.jsx(_e,{className:"mt-6 w-full",children:"Отправить"})]})})},Kh=({children:t,order_id:e=null,buyer_id:n=null,suggestions_type:s=null,customUpdate:i=null})=>{var u,d,h,f,p,g;if(!s)return;const a=H4e({order_id:e,buyer_id:n,suggestions_type:s,customUpdate:i}),{setIsLoading:o,getSuggestions:l,filterFields:c}=a;return v.useEffect(()=>{o(!0)},[JSON.stringify(c),e]),v.useEffect(()=>{(async()=>{})()},[]),Qw(()=>{l(c)},[JSON.stringify(c),e],{wait:550}),r.jsxs(co.Provider,{value:{order_id:e,suggestions_type:s,...a},children:[t,r.jsx(Ze,{condition:a.cancelModalOpen,children:r.jsx(q4e,{condition:a.cancelModalOpen!==!1,set:a.setCancelModalOpen,onSubmit:m=>{a.onHandlerCancel({...m,status_id:a.cancelModalOpen})}})}),r.jsx(Ze,{condition:a.changeDateModalOpen,children:r.jsx(wv,{condition:a.changeDateModalOpen,set:a.setChangeDateModalOpen,type:(u=a.changeDateModalOpen)==null?void 0:u.type,id:(d=a.changeDateModalOpen)==null?void 0:d.id,objectData:a.changeDateModalOpen,editData:a.changeDateModalOpen,title:"Изменить дату просмотра",customSubmit:async m=>{a.onHandlerChangeDate({...m,status_id:a.changeDateModalOpen.status_id})}})}),r.jsx(Ze,{condition:a.againSuggestionsModalOpen,children:r.jsx(wv,{condition:!!a.againSuggestionsModalOpen,set:a.setAgainSuggestionsModalOpen,type:(h=a.againSuggestionsModalOpen)==null?void 0:h.type,id:(f=a.againSuggestionsModalOpen)==null?void 0:f.id,objectData:a.againSuggestionsModalOpen,orderId:(p=a.againSuggestionsModalOpen)==null?void 0:p.status_id,title:"Записаться заново на просмотр",customSubmit:async m=>{a.onHandlerAgainDate({...m,status_id:a.againSuggestionsModalOpen.status_id})}})}),a.notificationData&&on.createPortal(r.jsx(yi,{show:a.notificationData,set:a.setNotificationData,onClose:()=>a.setNotificationData(null),classListRoot:"!pr-12",children:r.jsx("h3",{className:"title-3 !text-white",children:(g=a.notificationData)==null?void 0:g.title})}),document.getElementById("overlay-wrapper"))]})},Jx=({children:t,className:e})=>r.jsx("div",{className:He("grid grid-cols-[max-content_1fr] gap-2",e),children:t}),e1=({className:t})=>{const{suggestions_type:e}=v.useContext(co),{user:n,is_active:s,specialist:i,organization:a,type:o,id:l,building_id:c}=v.useContext(Il),u=ue(Ks),d=Dt(),h=async()=>{if(s)if(u){const f=e.id===Yn.buyerOnly.id||e.id===Yn.buyerAll.id,p=e.id===Yn.sellerAll.id,g=f?i||a:p?n:null,m=o==="apartment"?+c:+l;if(g.pos==="Застройщик"){const _=await $s({building_id:m,organization_id:+g.id,type:xt.CHAT});xr(_)}if(g.role===Wt.id||g.role===sn.id){const _=await $s({building_id:m,recipients_id:[+g.id],type:xt.CHAT});xr(_)}}else d(Bs(!0))};return r.jsxs(_e,{className:He("!px-4 !gap-2 text-dark",t),variant:"secondary",size:"34",title:"Перейти в чат",onClick:h,children:[r.jsx(vm,{className:"fill-primary400",width:16,height:16}),"Перейти в чат"]})},t1=({title:t="Изменить дату и время"})=>{const{setChangeDateModalOpen:e}=v.useContext(co),n=v.useContext(Il);return r.jsx(_e,{onClick:()=>{n.is_active&&e({...n,date:ct(n.date).format("DD.MM.YYYY")})},children:t})},$j=({title:t="Отменить запись"})=>{const{setCancelModalOpen:e}=v.useContext(co),{status_id:n,is_active:s}=v.useContext(Il);return r.jsx(_e,{onClick:()=>{s&&e(n)},children:t})},w8=({title:t="Принять"})=>{const{onHandlerConfirmed:e}=v.useContext(co),{status_id:n,date:s,time:i,is_active:a}=v.useContext(Il),[o,l]=v.useState(!1);return r.jsx(_e,{isLoading:o,onClick:async()=>{a&&(l(!0),await e({status_id:n,date:s,time:i}),l(!1))},children:t})},Zq=({title:t="Забронировать",size:e})=>{const{onHandlerPurchase:n}=v.useContext(co),{status_id:s,is_active:i}=v.useContext(Il),[a,o]=v.useState(!1);return r.jsx(_e,{size:e,isLoading:a,onClick:async()=>{i&&(o(!0),await n(s),o(!1))},children:t})},W4e=()=>{const{suggestions_type:t,actionsModalOpen:e,setActionsModalOpen:n}=v.useContext(co),{user:s,buyer_confirmed:i,seller_confirmed:a,status_id:o,status:l,is_active:c,id:u,specialist:d,author_is_user:h}=v.useContext(Il),f=t.id===Yn.buyerOnly.id||t.id===Yn.buyerAll.id,p=t.id===Yn.sellerAll.id,g=(h?s.role:d.role)===sn.id,m=(h?s.role:d.role)===Wt.id;return r.jsxs(r.Fragment,{children:[r.jsx(_e,{size:"34",variant:"secondary",className:"max-w-[200px]",onClick:()=>{c&&n(o)},children:"Изменить"}),r.jsx(Ze,{condition:e===o,children:r.jsx(gt,{options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[300px]",modalContentClassNames:"!px-8"},condition:e===o,set:n,children:r.jsxs("div",{className:"flex flex-col gap-2",children:[!!(l==="created"&&f&&g&&!a)&&r.jsxs(r.Fragment,{children:[r.jsx($j,{}),r.jsx(t1,{})]}),!!(l==="created"&&f&&m&&!i)&&r.jsxs(r.Fragment,{children:[r.jsx($j,{}),r.jsx(w8,{})]}),!!(l==="created"&&p&&g&&!a)&&r.jsxs(r.Fragment,{children:[r.jsx(t1,{}),r.jsx(w8,{})]}),!!(l==="created"&&p&&m&&!i)&&r.jsx(r.Fragment,{children:r.jsx(t1,{})}),!!(l==="confirmed"&&f&&(g||m))&&r.jsxs(r.Fragment,{children:[r.jsx($j,{}),r.jsx(t1,{}),r.jsx(Zq,{})]})]})})})]})},G4e=({title:t="Записаться заново"})=>{const{setAgainSuggestionsModalOpen:e}=v.useContext(co),n=v.useContext(Il);return r.jsx(_e,{size:"34",variant:"secondary",onClick:()=>{n.is_active&&e({...n,date:ct(n.date).format("DD.MM.YYYY")})},children:t})},Jq=()=>{const{status:t}=v.useContext(Il),{suggestions_type:e}=v.useContext(co),n=e.id===Yn.buyerOnly.id||e.id===Yn.buyerAll.id,s=e.id===Yn.sellerAll.id;if(e.id!==Yn.sellerHistory.id)return t==="created"||t==="confirmed"&&n?r.jsxs(Jx,{children:[r.jsx(e1,{}),r.jsx(W4e,{status:t})]}):t==="confirmed"&&s?r.jsxs(Jx,{children:[r.jsx(e1,{}),r.jsx(Zq,{size:34})]}):t==="declined"&&n?r.jsxs(Jx,{children:[r.jsx(e1,{}),r.jsx(G4e,{})]}):r.jsx(Jx,{className:"!grid-cols-1",children:r.jsx(e1,{})})},Y4e=()=>r.jsx(H7,{width:14,height:14,className:"fill-primary400"}),X4e=()=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"red",viewBox:"0 0 16 16",className:"",children:[r.jsx("g",{children:r.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0ZM4.91 4.91a.833.833 0 0 1 1.18 0L8 6.822l1.91-1.91a.833.833 0 0 1 1.18 1.178L9.178 8l1.91 1.91a.833.833 0 0 1-1.178 1.18L8 9.178l-1.91 1.91A.833.833 0 0 1 4.91 9.91L6.822 8l-1.91-1.91a.833.833 0 0 1 0-1.18Z",clipRule:"evenodd"})}),r.jsx("defs",{children:r.jsx("clipPath",{children:r.jsx("path",{fill:"red",d:"M0 0h16v16H0z"})})})]}),C8=()=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",width:17,height:17,className:"fill-green",children:r.jsx("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm3.8-8.3a1 1 0 0 0-1.42-1.4L7.2 8.46a.28.28 0 0 1-.4 0l-1.1-1.1A1 1 0 0 0 4.3 8.8l2.08 2.09c.34.34.9.34 1.24 0L11.8 6.7z"})}),eW=({status:t,user:e,author_is_user:n,specialist:s})=>{const{suggestions_type:i}=v.useContext(co),a=i.id===Yn.buyerOnly.id||i.id===Yn.buyerAll.id,o=i.id===Yn.sellerAll.id,l=(n?e.role:s.role)===sn.id,c=()=>{switch(t){case"created":return"Новая заявка на просмотр.";case"confirmed":return"Заявка подтверждена.";case"declined":return"Заявка на просмотр отклонена.";case"purchased":return"Объект забронирован.";default:return""}},u=()=>{switch(t){case"created":return r.jsx(Y4e,{});case"confirmed":return r.jsx(C8,{});case"declined":return r.jsx(X4e,{});case"purchased":return r.jsx(C8,{});default:return""}},d=()=>{switch(t){case"created":return a?l?r.jsx(r.Fragment,{children:"Ждём подтверждения от продавца"}):r.jsx(r.Fragment,{children:"Ждём вашего подтверждения"}):l?r.jsx(r.Fragment,{children:"Ждём вашего подтверждения"}):r.jsx(r.Fragment,{children:"Ждём подтверждения от покупателя"});case"confirmed":return a?l?r.jsx(r.Fragment,{children:"Вы записаны на просмотр объекта"}):r.jsx(r.Fragment,{children:"Вы записаны на просмотр объекта"}):l?r.jsx(r.Fragment,{children:"Вы приняли заявку на просмотр объекта"}):r.jsx(r.Fragment,{children:"Покупатель принял заявку на просмотр объекта"});default:return""}},h=c(),f=u(),p=d();if(!(!h&&!p))return r.jsxs("div",{className:"mt-3 flex gap-2",children:[r.jsx("div",{className:"flex-center-all h-[17px]",children:f}),r.jsxs("div",{children:[!!h&&r.jsx("p",{children:h}),(a||o)&&p&&r.jsx("p",{children:p})]})]})},K4e="_SuggestionsCardRoot_hsol7_1",Q4e="_SuggestionsCardDefaultRoot_hsol7_11",Z4e="_SuggestionsCardInactiveRoot_hsol7_18",J4e="_SuggestionsCardInactive_hsol7_18",r2={SuggestionsCardRoot:K4e,SuggestionsCardDefaultRoot:Q4e,SuggestionsCardInactiveRoot:Z4e,SuggestionsCardInactive:J4e},iC=({card:t,variant:e,className:n})=>{const s=t.is_active,i=t.images,a=t.type==="building"?`${ke.building}${t.id}`:`${ke.apartment}${t.id}`;return r.jsxs("article",{className:He(r2.SuggestionsCardRoot,e==="default"&&r2.SuggestionsCardDefaultRoot,n),children:[!!s&&r.jsx("a",{href:a,className:"CardLinkElement z-50"}),r.jsxs("div",{className:He("flex flex-col h-full"),children:[r.jsxs("p",{className:"font-medium text-defaultMax mb-4",children:[ct(t.date).format("DD MMMM YYYY"),", ",t.time]}),r.jsxs("div",{className:"flex gap-3 relative",children:[r.jsx("img",{src:qt((i==null?void 0:i[0])||""),className:"w-[70px] h-[70px] rounded-xl",width:70,height:70,alt:""}),r.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[!!t.price&&r.jsxs("p",{className:"cut-one font-medium",children:[pt(t.price)," ₽"]}),r.jsx("p",{className:"cut-one",children:t.type==="apartment"?fq(t):t.title}),r.jsxs("p",{className:"cut-one text-primary400 mb-1",children:[t.city," ",t.address]})]})]}),r.jsx(eW,{...t}),r.jsx("div",{className:"mt-auto",children:r.jsxs("div",{className:"mt-6 relative z-[60]",children:[!!s&&r.jsx(Il.Provider,{value:{...t},children:r.jsx(Jq,{})}),!s&&r.jsx(_e,{size:"34",Selector:"div",className:"flex-center-all gap-2 !bg-[#fff5e2] w-full !text-dark",children:"Объявление снято с продажи"})]})})]})]})},eAe=({card:t,variant:e,className:n})=>{const s=t.is_active;return r.jsx("article",{className:He(r2.SuggestionsCardRoot,e==="default"&&r2.SuggestionsCardDefaultRoot,n),children:r.jsxs("div",{className:He("flex flex-col h-full"),children:[r.jsxs("p",{className:"font-medium text-defaultMax",children:["Запись на ",ct(t.date).format("DD MMMM YYYY"),", ",t.time]}),r.jsx(eW,{...t}),r.jsx("div",{className:"mt-auto",children:r.jsxs("div",{className:"mt-6 relative z-[60]",children:[!!s&&r.jsx(Il.Provider,{value:{...t},children:r.jsx(Jq,{})}),!s&&r.jsx(_e,{size:"34",Selector:"div",className:"flex-center-all gap-2 !bg-[#fff5e2] w-full !text-dark",children:"Объявление снято с продажи"})]})})]})})},tW=({condition:t,set:e,customUpdate:n=null,suggestions:s=[]})=>r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"mmd1:!w-[450px]",modalContentClassNames:"!px-10 !pt-8 md1:!px-6"},children:[r.jsx("h3",{className:"title-2 mb-6",children:"Свяжитесь с продавцом"}),r.jsx("div",{className:"flex flex-col gap-3",children:r.jsx(Kh,{suggestions_type:Yn.buyerAll,customUpdate:n,children:s.map(i=>r.jsx(eAe,{card:i,suggestions_type:Yn.buyerAll,variant:"default",className:"!bg-pageColor !p-4 !rounded-lg !min-h-0"},i.status_id))})})]})}),tAe=({type:t})=>{var z,G;ur();const{id:e}=Mn(),n=ue(rt),s=vs(),{apartmentData:i,types:a,myDiscount:o,goToChat:l,purchaseRequest:c,isOpenChoiceSpecialist:u,setIsOpenChoiceSpecialist:d,specialistsData:h,apartmentSelector:f,suggestions:p,getSuggestions:g}=z4e(e),[m,_]=v.useState(!1),[y,x]=v.useState(!1),[b,w]=v.useState(!1),[C,j]=v.useState(!1),E=v.useRef(null),T=v.useRef(null),N=v.useRef(null),[P,I]=v.useState(""),B=ue(Ot),U=ue(Ks);return v.useEffect(()=>{var V;i&&(Si(B)?I(pn.name):hd(B)&&((V=B.associated_objects)!=null&&V.includes(+i.building_id))?I(Wt.name):I(sn.name))},[B,i]),i?r.jsxs(Vn,{helmet:r.jsx(F0e,{data:i||{}}),children:[r.jsx(zn,{}),r.jsxs(dy.Provider,{value:{...i,myDiscount:o,setIsOpenRecordView:_,setIsOpenChoiceSpecialist:d,setIsOpenShareModal:w,goToChat:l,userRole:P,purchaseId:s.purchase},children:[r.jsxs("main",{className:`main ${n?"":"!pb-[120px]"}`,children:[r.jsx("div",{className:"main-wrapper md1:pt-0",children:r.jsx("div",{className:"container-desktop",children:r.jsxs(Yq,{condition:!n,block:E.current,container:N.current,children:[!!(P===Wt.name&&s.purchase)&&c&&r.jsx("div",{className:"mb-3",children:r.jsx(Cy,{className:"mmd1:!flex",bg:!0,data:{...c,current_type:a.find(V=>V.value===c.building_type_id),calc_props:c.pricing_attributes},href:`${ke.purchase.inner}${c.id}`})}),r.jsxs(ea,{children:[r.jsxs("div",{className:"flex flex-col gap-3 min-w-0 ",children:[r.jsxs("section",{ref:E,className:"md1:w-full",children:[r.jsx("div",{className:"white-block !p-2.5",children:r.jsx(GA,{imageFit:"contain",dataGallery:[{id:2,type:"images",images:i.images||[]}],swiperRef:T,isOpenModal:C,setIsOpenModal:j,tabsMobile:!1,galleryType:"default"})}),!n&&r.jsxs("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-2",children:[r.jsx(Uc,{id:e,type:"apartment",variant:"circle",className:P===Wt.name&&s.purchase?"opacity-60 pointer-events-none":""}),r.jsx(zh,{id:e,type:"apartment",variant:"circle",className:P===Wt.name&&s.purchase?"opacity-60 pointer-events-none":""}),r.jsx(yw,{variant:"circle",set:w})]})]}),!!p.length&&r.jsx(Kh,{suggestions_type:Yn.buyerAll,customUpdate:()=>{g(e)},children:p.map(V=>r.jsx("section",{children:r.jsx("div",{className:"white-block",children:r.jsx(iC,{card:V,suggestions_type:Yn.buyerAll,variant:"default"})})},V.status_id))}),r.jsx("section",{className:"will-change-[margin-top]",ref:N,style:{marginTop:n?0:480},children:r.jsx(Afe,{})}),!!(P===sn.name&&!s.purchase&&h.length)&&r.jsxs(r.Fragment,{children:[r.jsx("section",{className:"relative z-10",children:r.jsx(j4,{specialists:h,building_id:i.building_id})}),o&&!Ye(o)&&o.map(V=>r.jsx("section",{className:"relative z-10",children:r.jsx(r4,{data:V,mainData:i,variant:"block"})},V.id))]}),!n&&r.jsx(b6,{}),(((z=i==null?void 0:i.presents.main_items)==null?void 0:z.length)||((G=i==null?void 0:i.presents.second_items)==null?void 0:G.length))&&i.gift_group&&r.jsx("section",{className:"relative z-10",children:r.jsx(Jfe,{data:i.gift_group,mainGift:i.presents.main_items,secondGift:i.presents.second_items})}),r.jsx(XA,{classNames:"white-block",building_id:i.building_id,organization_id:i.developer.id,isSpecialist:!!h.length}),(i==null?void 0:i.historyPrice)&&(i==null?void 0:i.historyPrice.length)>0&&r.jsx("section",{className:"relative z-10",children:r.jsx(B0e,{data:i.historyPrice})}),r.jsx(Rh,{data:[...i==null?void 0:i.videos.filter(V=>!V.is_short).map(V=>({link:V.video_url,type:"video"})),...i==null?void 0:i.videos.filter(V=>V.is_short).map(V=>({link:V.video_url,type:"short"}))],currentComplexId:i==null?void 0:i.building_id}),r.jsx(Rh,{data:[...i==null?void 0:i.promos.filter(V=>!V.is_calculation&&!V.is_news).map(V=>({...V,building_id:i.building_id,type:"stock"})),...i==null?void 0:i.promos.filter(V=>V.is_calculation).map(V=>({...V,building_id:i.building_id,type:"calculation"}))],currentComplexId:i==null?void 0:i.building_id}),r.jsx("section",{children:r.jsx(w4,{coordinates:i==null?void 0:i.location,variant:"block"})})]}),n&&r.jsx(b6,{})]})]})})}),P===sn.name&&r.jsx(Dl,{activeDefault:!0,conditionWidth:!n,children:r.jsxs("div",{className:`pb-2.5 px-4 gap-2 grid grid-cols-2 md3:grid-cols-1  ${f.selectedPresents.length+f.defaultPresents.length?"md3:gap-4 pt-4":"pt-2.5"}`,children:[r.jsxs(_e,{size:"Small",onClick:l,className:"relative",children:[!!(f.selectedPresents.length+f.defaultPresents.length)&&r.jsx(b$,{color:"dark",variant:"absolute",className:"-top-3 -right-3",animated:!0,children:"Подарки закреплены за вами"}),"Задать вопрос в чат"]}),r.jsx(_e,{size:"Small",variant:"secondary",onClick:()=>_(!0),className:"relative",children:r.jsx(_m,{texts:["Записаться на просмотр","Записаться на онлайн-показ"],intervalTime:3e3})})]})})]}),U?r.jsx(r.Fragment,{children:p.length?r.jsx(tW,{condition:m,set:_,suggestions:p,customUpdate:async()=>{_(!1),await g(e)}}):r.jsx(r.Fragment,{children:r.jsx(Ze,{condition:m,children:r.jsx(wv,{condition:m,set:_,type:"apartment",id:i==null?void 0:i.id,developName:i==null?void 0:i.developer.name,objectData:i,specialists:h,onUpdate:()=>{g(e),_(!1),x(!0)}})})})}):r.jsx(bm,{condition:m,set:_}),r.jsx(Qq,{condition:y,set:x}),r.jsx(WA,{condition:u,set:d,specialists:h,building_id:i.building_id}),r.jsx(Bm,{condition:b,set:w})]})]}):""};var ws={},QA={},qy={},Wy={},Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.addPassiveEventListener=function(e,n,s){var i=s.name;i||(i=n,console.warn("Listener must be a named function.")),tb.has(n)||tb.set(n,new Set);var a=tb.get(n);if(!a.has(i)){var o=function(){var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,c)}catch{}return l}();e.addEventListener(n,s,o?{passive:!0}:!1),a.add(i)}};Gy.removePassiveEventListener=function(e,n,s){e.removeEventListener(n,s),tb.get(n).delete(s.name||n)};var tb=new Map;Object.defineProperty(Wy,"__esModule",{value:!0});var nAe=WH,sAe=iAe(nAe),rAe=Gy;function iAe(t){return t&&t.__esModule?t:{default:t}}var aAe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,sAe.default)(e,n)},as={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,n){if(e){var s=aAe(function(i){as.scrollHandler(e)},n);as.scrollSpyContainers.push(e),(0,rAe.addPassiveEventListener)(e,"scroll",s)}},isMounted:function(e){return as.scrollSpyContainers.indexOf(e)!==-1},currentPositionX:function(e){if(e===document){var n=window.pageYOffset!==void 0,s=(document.compatMode||"")==="CSS1Compat";return n?window.pageXOffset:s?document.documentElement.scrollLeft:document.body.scrollLeft}else return e.scrollLeft},currentPositionY:function(e){if(e===document){var n=window.pageXOffset!==void 0,s=(document.compatMode||"")==="CSS1Compat";return n?window.pageYOffset:s?document.documentElement.scrollTop:document.body.scrollTop}else return e.scrollTop},scrollHandler:function(e){var n=as.scrollSpyContainers[as.scrollSpyContainers.indexOf(e)].spyCallbacks||[];n.forEach(function(s){return s(as.currentPositionX(e),as.currentPositionY(e))})},addStateHandler:function(e){as.spySetState.push(e)},addSpyHandler:function(e,n){var s=as.scrollSpyContainers[as.scrollSpyContainers.indexOf(n)];s.spyCallbacks||(s.spyCallbacks=[]),s.spyCallbacks.push(e),e(as.currentPositionX(n),as.currentPositionY(n))},updateStates:function(){as.spySetState.forEach(function(e){return e()})},unmount:function(e,n){as.scrollSpyContainers.forEach(function(s){return s.spyCallbacks&&s.spyCallbacks.length&&s.spyCallbacks.indexOf(n)>-1&&s.spyCallbacks.splice(s.spyCallbacks.indexOf(n),1)}),as.spySetState&&as.spySetState.length&&as.spySetState.indexOf(e)>-1&&as.spySetState.splice(as.spySetState.indexOf(e),1),document.removeEventListener("scroll",as.scrollHandler)},update:function(){return as.scrollSpyContainers.forEach(function(e){return as.scrollHandler(e)})}};Wy.default=as;var qm={},Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});var oAe=function(e,n){var s=e.indexOf("#")===0?e.substring(1):e,i=s?"#"+s:"",a=window&&window.location,o=i?a.pathname+a.search+i:a.pathname+a.search;n?history.pushState(history.state,"",o):history.replaceState(history.state,"",o)},lAe=function(){return window.location.hash.replace(/^#/,"")},cAe=function(e){return function(n){return e.contains?e!=n&&e.contains(n):!!(e.compareDocumentPosition(n)&16)}},uAe=function(e){return getComputedStyle(e).position!=="static"},Uj=function(e,n){for(var s=e.offsetTop,i=e.offsetParent;i&&!n(i);)s+=i.offsetTop,i=i.offsetParent;return{offsetTop:s,offsetParent:i}},dAe=function(e,n,s){if(s)return e===document?n.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(e).position!=="static"?n.offsetLeft:n.offsetLeft-e.offsetLeft;if(e===document)return n.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(uAe(e)){if(n.offsetParent!==e){var i=function(d){return d===e||d===document},a=Uj(n,i),o=a.offsetTop,l=a.offsetParent;if(l!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return o}return n.offsetTop}if(n.offsetParent===e.offsetParent)return n.offsetTop-e.offsetTop;var c=function(d){return d===document};return Uj(n,c).offsetTop-Uj(e,c).offsetTop};Yy.default={updateHash:oAe,getHash:lAe,filterElementInContainer:cAe,scrollOffset:dAe};var aC={},ZA={};Object.defineProperty(ZA,"__esModule",{value:!0});ZA.default={defaultEasing:function(e){return e<.5?Math.pow(e*2,2)/2:1-Math.pow((1-e)*2,2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};var JA={};Object.defineProperty(JA,"__esModule",{value:!0});var hAe=Gy,fAe=["mousedown","mousewheel","touchmove","keydown"];JA.default={subscribe:function(e){return typeof document<"u"&&fAe.forEach(function(n){return(0,hAe.addPassiveEventListener)(document,n,e)})}};var Xy={};Object.defineProperty(Xy,"__esModule",{value:!0});var WN={registered:{},scrollEvent:{register:function(e,n){WN.registered[e]=n},remove:function(e){WN.registered[e]=null}}};Xy.default=WN;Object.defineProperty(aC,"__esModule",{value:!0});var pAe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},mAe=Yy;oC(mAe);var gAe=ZA,S8=oC(gAe),vAe=JA,yAe=oC(vAe),xAe=Xy,rl=oC(xAe);function oC(t){return t&&t.__esModule?t:{default:t}}var nW=function(e){return S8.default[e.smooth]||S8.default.defaultEasing},bAe=function(e){return typeof e=="function"?e:function(){return e}},_Ae=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},GN=function(){return _Ae()||function(t,e,n){window.setTimeout(t,n||1e3/60,new Date().getTime())}}(),sW=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},rW=function(e){var n=e.data.containerElement;if(n&&n!==document&&n!==document.body)return n.scrollLeft;var s=window.pageXOffset!==void 0,i=(document.compatMode||"")==="CSS1Compat";return s?window.pageXOffset:i?document.documentElement.scrollLeft:document.body.scrollLeft},iW=function(e){var n=e.data.containerElement;if(n&&n!==document&&n!==document.body)return n.scrollTop;var s=window.pageXOffset!==void 0,i=(document.compatMode||"")==="CSS1Compat";return s?window.pageYOffset:i?document.documentElement.scrollTop:document.body.scrollTop},wAe=function(e){var n=e.data.containerElement;if(n&&n!==document&&n!==document.body)return n.scrollWidth-n.offsetWidth;var s=document.body,i=document.documentElement;return Math.max(s.scrollWidth,s.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth)},CAe=function(e){var n=e.data.containerElement;if(n&&n!==document&&n!==document.body)return n.scrollHeight-n.offsetHeight;var s=document.body,i=document.documentElement;return Math.max(s.scrollHeight,s.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)},SAe=function t(e,n,s){var i=n.data;if(!n.ignoreCancelEvents&&i.cancel){rl.default.registered.end&&rl.default.registered.end(i.to,i.target,i.currentPositionY);return}if(i.delta=Math.round(i.targetPosition-i.startPosition),i.start===null&&(i.start=s),i.progress=s-i.start,i.percent=i.progress>=i.duration?1:e(i.progress/i.duration),i.currentPosition=i.startPosition+Math.ceil(i.delta*i.percent),i.containerElement&&i.containerElement!==document&&i.containerElement!==document.body?n.horizontal?i.containerElement.scrollLeft=i.currentPosition:i.containerElement.scrollTop=i.currentPosition:n.horizontal?window.scrollTo(i.currentPosition,0):window.scrollTo(0,i.currentPosition),i.percent<1){var a=t.bind(null,e,n);GN.call(window,a);return}rl.default.registered.end&&rl.default.registered.end(i.to,i.target,i.currentPosition)},eD=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},Ky=function(e,n,s,i){n.data=n.data||sW(),window.clearTimeout(n.data.delayTimeout);var a=function(){n.data.cancel=!0};if(yAe.default.subscribe(a),eD(n),n.data.start=null,n.data.cancel=!1,n.data.startPosition=n.horizontal?rW(n):iW(n),n.data.targetPosition=n.absolute?e:e+n.data.startPosition,n.data.startPosition===n.data.targetPosition){rl.default.registered.end&&rl.default.registered.end(n.data.to,n.data.target,n.data.currentPosition);return}n.data.delta=Math.round(n.data.targetPosition-n.data.startPosition),n.data.duration=bAe(n.duration)(n.data.delta),n.data.duration=isNaN(parseFloat(n.data.duration))?1e3:parseFloat(n.data.duration),n.data.to=s,n.data.target=i;var o=nW(n),l=SAe.bind(null,o,n);if(n&&n.delay>0){n.data.delayTimeout=window.setTimeout(function(){rl.default.registered.begin&&rl.default.registered.begin(n.data.to,n.data.target),GN.call(window,l)},n.delay);return}rl.default.registered.begin&&rl.default.registered.begin(n.data.to,n.data.target),GN.call(window,l)},lC=function(e){return e=pAe({},e),e.data=e.data||sW(),e.absolute=!0,e},jAe=function(e){Ky(0,lC(e))},TAe=function(e,n){Ky(e,lC(n))},EAe=function(e){e=lC(e),eD(e),Ky(e.horizontal?wAe(e):CAe(e),e)},NAe=function(e,n){n=lC(n),eD(n);var s=n.horizontal?rW(n):iW(n);Ky(e+s,n)};aC.default={animateTopScroll:Ky,getAnimationType:nW,scrollToTop:jAe,scrollToBottom:EAe,scrollTo:TAe,scrollMore:NAe};Object.defineProperty(qm,"__esModule",{value:!0});var kAe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},AAe=Yy,DAe=tD(AAe),PAe=aC,IAe=tD(PAe),MAe=Xy,n1=tD(MAe);function tD(t){return t&&t.__esModule?t:{default:t}}var s1={},j8=void 0;qm.default={unmount:function(){s1={}},register:function(e,n){s1[e]=n},unregister:function(e){delete s1[e]},get:function(e){return s1[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return j8=e},getActiveLink:function(){return j8},scrollTo:function(e,n){var s=this.get(e);if(!s){console.warn("target Element not found");return}n=kAe({},n,{absolute:!1});var i=n.containerId,a=n.container,o=void 0;i?o=document.getElementById(i):a&&a.nodeType?o=a:o=document,n.absolute=!0;var l=n.horizontal,c=DAe.default.scrollOffset(o,s,l)+(n.offset||0);if(!n.smooth){n1.default.registered.begin&&n1.default.registered.begin(e,s),o===document?n.horizontal?window.scrollTo(c,0):window.scrollTo(0,c):o.scrollTop=c,n1.default.registered.end&&n1.default.registered.end(e,s);return}IAe.default.animateTopScroll(c,n,e,s)}};var cC={};Object.defineProperty(cC,"__esModule",{value:!0});var OAe=Yy,Vj=RAe(OAe);function RAe(t){return t&&t.__esModule?t:{default:t}}var LAe={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,n){this.containers[e]=n},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,n=this.getHash();n?window.setTimeout(function(){e.scrollTo(n,!0),e.initialized=!0},10):this.initialized=!0},scrollTo:function(e,n){var s=this.scroller,i=s.get(e);if(i&&(n||e!==s.getActiveLink())){var a=this.containers[e]||document;s.scrollTo(e,{container:a})}},getHash:function(){return Vj.default.getHash()},changeHash:function(e,n){this.isInitialized()&&Vj.default.getHash()!==e&&Vj.default.updateHash(e,n)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};cC.default=LAe;Object.defineProperty(qy,"__esModule",{value:!0});var r1=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},BAe=function(){function t(e,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),FAe=v,T8=Qy(FAe),$Ae=Wy,i1=Qy($Ae),UAe=qm,VAe=Qy(UAe),zAe=ly,Xn=Qy(zAe),HAe=cC,ou=Qy(HAe);function Qy(t){return t&&t.__esModule?t:{default:t}}function qAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WAe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function GAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var E8={to:Xn.default.string.isRequired,containerId:Xn.default.string,container:Xn.default.object,activeClass:Xn.default.string,activeStyle:Xn.default.object,spy:Xn.default.bool,horizontal:Xn.default.bool,smooth:Xn.default.oneOfType([Xn.default.bool,Xn.default.string]),offset:Xn.default.number,delay:Xn.default.number,isDynamic:Xn.default.bool,onClick:Xn.default.func,duration:Xn.default.oneOfType([Xn.default.number,Xn.default.func]),absolute:Xn.default.bool,onSetActive:Xn.default.func,onSetInactive:Xn.default.func,ignoreCancelEvents:Xn.default.bool,hashSpy:Xn.default.bool,saveHashHistory:Xn.default.bool,spyThrottle:Xn.default.number};qy.default=function(t,e){var n=e||VAe.default,s=function(a){GAe(o,a);function o(l){qAe(this,o);var c=WAe(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,l));return i.call(c),c.state={active:!1},c}return BAe(o,[{key:"getScrollSpyContainer",value:function(){var c=this.props.containerId,u=this.props.container;return c&&!u?document.getElementById(c):u&&u.nodeType?u:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var c=this.getScrollSpyContainer();i1.default.isMounted(c)||i1.default.mount(c,this.props.spyThrottle),this.props.hashSpy&&(ou.default.isMounted()||ou.default.mount(n),ou.default.mapContainer(this.props.to,c)),i1.default.addSpyHandler(this.spyHandler,c),this.setState({container:c})}}},{key:"componentWillUnmount",value:function(){i1.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var c="";this.state&&this.state.active?c=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():c=this.props.className;var u={};this.state&&this.state.active?u=r1({},this.props.style,this.props.activeStyle):u=r1({},this.props.style);var d=r1({},this.props);for(var h in E8)d.hasOwnProperty(h)&&delete d[h];return d.className=c,d.style=u,d.onClick=this.handleClick,T8.default.createElement(t,d)}}]),o}(T8.default.PureComponent),i=function(){var o=this;this.scrollTo=function(l,c){n.scrollTo(l,r1({},o.state,c))},this.handleClick=function(l){o.props.onClick&&o.props.onClick(l),l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault(),o.scrollTo(o.props.to,o.props)},this.spyHandler=function(l,c){var u=o.getScrollSpyContainer();if(!(ou.default.isMounted()&&!ou.default.isInitialized())){var d=o.props.horizontal,h=o.props.to,f=null,p=void 0,g=void 0;if(d){var m=0,_=0,y=0;if(u.getBoundingClientRect){var x=u.getBoundingClientRect();y=x.left}if(!f||o.props.isDynamic){if(f=n.get(h),!f)return;var b=f.getBoundingClientRect();m=b.left-y+l,_=m+b.width}var w=l-o.props.offset;p=w>=Math.floor(m)&&w<Math.floor(_),g=w<Math.floor(m)||w>=Math.floor(_)}else{var C=0,j=0,E=0;if(u.getBoundingClientRect){var T=u.getBoundingClientRect();E=T.top}if(!f||o.props.isDynamic){if(f=n.get(h),!f)return;var N=f.getBoundingClientRect();C=N.top-E+c,j=C+N.height}var P=c-o.props.offset;p=P>=Math.floor(C)&&P<Math.floor(j),g=P<Math.floor(C)||P>=Math.floor(j)}var I=n.getActiveLink();if(g){if(h===I&&n.setActiveLink(void 0),o.props.hashSpy&&ou.default.getHash()===h){var B=o.props.saveHashHistory,U=B===void 0?!1:B;ou.default.changeHash("",U)}o.props.spy&&o.state.active&&(o.setState({active:!1}),o.props.onSetInactive&&o.props.onSetInactive(h,f))}if(p&&(I!==h||o.state.active===!1)){n.setActiveLink(h);var z=o.props.saveHashHistory,G=z===void 0?!1:z;o.props.hashSpy&&ou.default.changeHash(h,G),o.props.spy&&(o.setState({active:!0}),o.props.onSetActive&&o.props.onSetActive(h,f))}}}};return s.propTypes=E8,s.defaultProps={offset:0},s};Object.defineProperty(QA,"__esModule",{value:!0});var YAe=v,N8=aW(YAe),XAe=qy,KAe=aW(XAe);function aW(t){return t&&t.__esModule?t:{default:t}}function QAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ZAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var JAe=function(t){ZAe(e,t);function e(){var n,s,i,a;QAe(this,e);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=(s=(i=k8(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(l))),i),i.render=function(){return N8.default.createElement("a",i.props,i.props.children)},s),k8(i,a)}return e}(N8.default.Component);QA.default=(0,KAe.default)(JAe);var nD={};Object.defineProperty(nD,"__esModule",{value:!0});var eDe=function(){function t(e,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),tDe=v,A8=oW(tDe),nDe=qy,sDe=oW(nDe);function oW(t){return t&&t.__esModule?t:{default:t}}function rDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iDe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function aDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var oDe=function(t){aDe(e,t);function e(){return rDe(this,e),iDe(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return eDe(e,[{key:"render",value:function(){return A8.default.createElement("button",this.props,this.props.children)}}]),e}(A8.default.Component);nD.default=(0,sDe.default)(oDe);var sD={},uC={};Object.defineProperty(uC,"__esModule",{value:!0});var lDe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},cDe=function(){function t(e,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),uDe=v,D8=dC(uDe),dDe=on;dC(dDe);var hDe=qm,P8=dC(hDe),fDe=ly,I8=dC(fDe);function dC(t){return t&&t.__esModule?t:{default:t}}function pDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mDe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function gDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}uC.default=function(t){var e=function(n){gDe(s,n);function s(i){pDe(this,s);var a=mDe(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,i));return a.childBindings={domNode:null},a}return cDe(s,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(a){this.props.name!==a.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;P8.default.unregister(this.props.name)}},{key:"registerElems",value:function(a){P8.default.register(a,this.childBindings.domNode)}},{key:"render",value:function(){return D8.default.createElement(t,lDe({},this.props,{parentBindings:this.childBindings}))}}]),s}(D8.default.Component);return e.propTypes={name:I8.default.string,id:I8.default.string},e};Object.defineProperty(sD,"__esModule",{value:!0});var M8=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},vDe=function(){function t(e,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),yDe=v,O8=rD(yDe),xDe=uC,bDe=rD(xDe),_De=ly,R8=rD(_De);function rD(t){return t&&t.__esModule?t:{default:t}}function wDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CDe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function SDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lW=function(t){SDe(e,t);function e(){return wDe(this,e),CDe(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return vDe(e,[{key:"render",value:function(){var s=this,i=M8({},this.props);return delete i.name,i.parentBindings&&delete i.parentBindings,O8.default.createElement("div",M8({},i,{ref:function(o){s.props.parentBindings.domNode=o}}),this.props.children)}}]),e}(O8.default.Component);lW.propTypes={name:R8.default.string,id:R8.default.string};sD.default=(0,bDe.default)(lW);var zj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},L8=function(){function t(e,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}();function B8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a1=v,Md=Wy,Hj=qm,os=ly,lu=cC,U8={to:os.string.isRequired,containerId:os.string,container:os.object,activeClass:os.string,spy:os.bool,smooth:os.oneOfType([os.bool,os.string]),offset:os.number,delay:os.number,isDynamic:os.bool,onClick:os.func,duration:os.oneOfType([os.number,os.func]),absolute:os.bool,onSetActive:os.func,onSetInactive:os.func,ignoreCancelEvents:os.bool,hashSpy:os.bool,spyThrottle:os.number},jDe={Scroll:function(e,n){console.warn("Helpers.Scroll is deprecated since v1.7.0");var s=n||Hj,i=function(o){$8(l,o);function l(c){B8(this,l);var u=F8(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c));return a.call(u),u.state={active:!1},u}return L8(l,[{key:"getScrollSpyContainer",value:function(){var u=this.props.containerId,d=this.props.container;return u?document.getElementById(u):d&&d.nodeType?d:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var u=this.getScrollSpyContainer();Md.isMounted(u)||Md.mount(u,this.props.spyThrottle),this.props.hashSpy&&(lu.isMounted()||lu.mount(s),lu.mapContainer(this.props.to,u)),this.props.spy&&Md.addStateHandler(this.stateHandler),Md.addSpyHandler(this.spyHandler,u),this.setState({container:u})}}},{key:"componentWillUnmount",value:function(){Md.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var u="";this.state&&this.state.active?u=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():u=this.props.className;var d=zj({},this.props);for(var h in U8)d.hasOwnProperty(h)&&delete d[h];return d.className=u,d.onClick=this.handleClick,a1.createElement(e,d)}}]),l}(a1.Component),a=function(){var l=this;this.scrollTo=function(c,u){s.scrollTo(c,zj({},l.state,u))},this.handleClick=function(c){l.props.onClick&&l.props.onClick(c),c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault(),l.scrollTo(l.props.to,l.props)},this.stateHandler=function(){s.getActiveLink()!==l.props.to&&(l.state!==null&&l.state.active&&l.props.onSetInactive&&l.props.onSetInactive(),l.setState({active:!1}))},this.spyHandler=function(c){var u=l.getScrollSpyContainer();if(!(lu.isMounted()&&!lu.isInitialized())){var d=l.props.to,h=null,f=0,p=0,g=0;if(u.getBoundingClientRect){var m=u.getBoundingClientRect();g=m.top}if(!h||l.props.isDynamic){if(h=s.get(d),!h)return;var _=h.getBoundingClientRect();f=_.top-g+c,p=f+_.height}var y=c-l.props.offset,x=y>=Math.floor(f)&&y<Math.floor(p),b=y<Math.floor(f)||y>=Math.floor(p),w=s.getActiveLink();if(b)return d===w&&s.setActiveLink(void 0),l.props.hashSpy&&lu.getHash()===d&&lu.changeHash(),l.props.spy&&l.state.active&&(l.setState({active:!1}),l.props.onSetInactive&&l.props.onSetInactive()),Md.updateStates();if(x&&w!==d)return s.setActiveLink(d),l.props.hashSpy&&lu.changeHash(d),l.props.spy&&(l.setState({active:!0}),l.props.onSetActive&&l.props.onSetActive(d)),Md.updateStates()}}};return i.propTypes=U8,i.defaultProps={offset:0},i},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var n=function(s){$8(i,s);function i(a){B8(this,i);var o=F8(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,a));return o.childBindings={domNode:null},o}return L8(i,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(o){this.props.name!==o.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;Hj.unregister(this.props.name)}},{key:"registerElems",value:function(o){Hj.register(o,this.childBindings.domNode)}},{key:"render",value:function(){return a1.createElement(e,zj({},this.props,{parentBindings:this.childBindings}))}}]),i}(a1.Component);return n.propTypes={name:os.string,id:os.string},n}},TDe=jDe;Object.defineProperty(ws,"__esModule",{value:!0});ws.Helpers=ws.ScrollElement=ws.ScrollLink=aD=ws.animateScroll=ws.scrollSpy=ws.Events=ws.scroller=ws.Element=ws.Button=iD=ws.Link=void 0;var EDe=QA,cW=Bl(EDe),NDe=nD,uW=Bl(NDe),kDe=sD,dW=Bl(kDe),ADe=qm,hW=Bl(ADe),DDe=Xy,fW=Bl(DDe),PDe=Wy,pW=Bl(PDe),IDe=aC,mW=Bl(IDe),MDe=qy,gW=Bl(MDe),ODe=uC,vW=Bl(ODe),RDe=TDe,yW=Bl(RDe);function Bl(t){return t&&t.__esModule?t:{default:t}}var iD=ws.Link=cW.default;ws.Button=uW.default;ws.Element=dW.default;ws.scroller=hW.default;ws.Events=fW.default;ws.scrollSpy=pW.default;var aD=ws.animateScroll=mW.default;ws.ScrollLink=gW.default;ws.ScrollElement=vW.default;ws.Helpers=yW.default;ws.default={Link:cW.default,Button:uW.default,Element:dW.default,scroller:hW.default,Events:fW.default,scrollSpy:pW.default,animateScroll:mW.default,ScrollLink:gW.default,ScrollElement:vW.default,Helpers:yW.default};const LDe="_BuildingInfoChars_re91q_1",BDe="_BuildingInfoCharsItems_re91q_5",V8={BuildingInfoChars:LDe,BuildingInfoCharsItems:BDe},FDe="_AdvantageCardRoot_1caps_1",$De="_AdvantageCardRootActive_1caps_6",UDe="_AdvantageCardCheck_1caps_6",VDe="_AdvantageCardTitle_1caps_11",zDe="_AdvantageCardImage_1caps_21",qg={AdvantageCardRoot:FDe,AdvantageCardRootActive:$De,AdvantageCardCheck:UDe,AdvantageCardTitle:VDe,AdvantageCardImage:zDe},Zy=({data:t,onChange:e=()=>{},value:n=!1,textVisible:s=!0,className:i=""})=>r.jsxs("article",{onClick:()=>e(!n),className:`${qg.AdvantageCardRoot} ${n?qg.AdvantageCardRootActive:""} ${i}`,children:[r.jsx("div",{className:qg.AdvantageCardCheck,"aria-hidden":!0,children:r.jsx(Op,{})}),r.jsxs(g$,{className:qg.AdvantageCardImage,children:[r.jsx("h3",{className:`title-3-5 ${qg.AdvantageCardTitle}`,children:t.name}),r.jsx("img",{src:qt(t.image||"")})]}),s&&r.jsxs("div",{className:"mt-3 font-medium",children:[mv(t.count||0),!!(t.max_price&&t.min_price)&&r.jsxs(r.Fragment,{children:[" от ",Qu(t.min_price)," ",t.max_price!==t.min_price?`до ${Qu(t.max_price)}`:""]})]})]}),HDe=()=>{const{title:t,cashback:e,present:n,stickers:s,address:i,metro:a,minPrice:o,max_price:l,attributes:c,tags:u,deadline:d,city:h,advantages:f,main_gifts:p=[],second_gifts:g=[],description:m,buildingDiscount:_}=v.useContext($o),[y,x]=v.useState(!1),[b,w]=v.useState([]);v.useEffect(()=>{const T=c||[],N=[{name:"Срок сдачи",value:d}],P=T.find(I=>I.tabName==="Общая");P?P.items=[...P.items,...N]:T.unshift({tabName:"Общая",items:[...N]}),w(T.map(I=>({...I,items:I.items.filter(B=>B.value.trim()!=="Нет")})).filter(I=>I.items.length))},[]);const C=b.reduce((T,N)=>{if(N)return T+N.items.length},0),j=({data:T})=>T.tabName?r.jsx("h3",{className:"title-3 mb-5",children:T.tabName}):"",E=({data:T,classNameContent:N})=>r.jsxs(vn,{children:[r.jsx("span",{children:T.name}),r.jsx("div",{className:He("flex items-start gap-2 ",N),children:r.jsx("div",{className:"flex flex-wrap gap-x-2 gap-y-1",children:T.value.split(", ").map((P,I,B)=>r.jsxs("span",{children:[P,I<B.length-1&&r.jsx(r.Fragment,{children:","})]},I))})})]});return r.jsx("section",{children:r.jsxs("div",{className:"white-block",children:[!!(e||n||s!=null&&s.length)&&r.jsxs("div",{className:"flex gap-2 flex-wrap mb-4",children:[!!_&&r.jsx("div",{children:r.jsx(Ac,{discount:_.value,type_id:_.type,prefix:"Скидка",tooltip:!0,start_date:ct(_.start_date).format("DD.MM.YYYY"),end_date:ct(_.end_date).format("DD.MM.YYYY"),unit:_.unit,building_info:!0})}),e&&l?r.jsx(Sa,{cashback:l/100*e}):"",!!(p.length||n||g.length)&&r.jsx(xw,{dataMainGifts:no(p)?p.filter(T=>T):[],dataSecondGifts:no(g)?g.filter(T=>T):[],title:"Есть подарок"}),!!s.length&&s.map(T=>r.jsx(Ah,{top:T.name},T.id))]}),u.length>0&&r.jsx("div",{className:"mt-2 mb-4 flex gap-2 flex-wrap",children:u.map((T,N)=>r.jsx(An,{size:"small",color:"default",children:T.name},N))}),r.jsx("h1",{className:"title-1",children:t}),r.jsxs("div",{className:"mt-1 mb-4 md1:my-1",children:[h,",  ",i||""]}),r.jsx(Em,{data:a,visibleItems:99,className:"mb-4"}),r.jsx("div",{className:"flex items-center gap-3 mb-4 md1:my-3",children:r.jsxs("h3",{className:"title-2",children:["от ",pt(o||0)," ₽"]})}),b.length&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mt-6",children:b.map((T,N)=>{if(!(N!==0&&!y))return r.jsxs("div",{className:V8.BuildingInfoChars,children:[N!==0&&r.jsx(j,{data:T}),r.jsx("div",{className:He(V8.BuildingInfoCharsItems,N>0&&"!grid-cols-1"),children:T.items.map((P,I)=>{if(!(N===0&&I>=4&&!y))return r.jsx(E,{data:P,classNameContent:N>0?"!min-w-[68%] !max-w-[68%]":""},I)})})]},N)})}),C>4&&r.jsx(f4,{className:"mt-5 md1:mt-4",onClick:()=>x(T=>!T),active:y,children:y?"Скрыть":"Показать полностью"})]}),!!m&&r.jsx(Hfe,{title:"О проекте",descr:m}),!!f.length&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-2 mb-4",children:"Уникальные квартиры"}),r.jsx("div",{className:"grid grid-cols-4 gap-4 md1:grid-cols-3 md2:grid-cols-2",children:f.map(T=>r.jsx(iD,{to:"section-apartments-id",smooth:!0,offset:-64,duration:500,children:r.jsx(Zy,{data:T,textVisible:!1})},T.id))})]})]})})},qj=v.memo(({setIsOpenRecordView:t,controls:e,className:n=""})=>{const{id:s,developer:i,city:a,setIsOpenShareModal:o,title:l,goToChat:c,isVisibleNotification:u,setIsVisibleNotification:d,notifOnClose:h,userRole:f}=v.useContext($o);ur();const p=ue(rt),[g,m]=v.useState(!1),_=v.useRef(null);return r.jsxs(lo,{className:`!top-[68px] ${n}`,children:[!!(e&&p&&f===pn.name)&&r.jsx(r.Fragment,{children:r.jsx("div",{className:"white-block-small !py-2 mb-3",ref:f!==pn.name?_:null,children:r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ke,{to:`${ht.objects.edit}${s}`,className:"w-full h-full block",children:r.jsx(mi,{title:"Редактировать",children:r.jsx(Ns,{className:"!stroke-[currentColor] !stroke-[1.5px] !fill-none",width:18,height:18})})}),r.jsx(mi,{title:"Удалить",onClick:()=>m(s),children:r.jsx(un,{className:"fill-red",width:16,height:16})})]})})}),r.jsxs("div",{className:"flex flex-col text-center items-center white-block-small",children:[r.jsx(Nn,{size:95,src:i.avatar_url,title:i.name}),r.jsx(Ke,{to:`${ke.developers.inner}${i.id}?city=${a}`,className:"font-medium mt-5 blue-link-hover",children:i.name}),r.jsx("span",{className:"text-primary400 mt-1.5",children:i.pos}),(i.underConstruction||i.handedOver)&&r.jsxs("div",{className:"mt-5 font-medium",children:[i.underConstruction&&r.jsxs("span",{children:[i.underConstruction," Строиться, "]}),i.handedOver&&r.jsxs("span",{children:[i.handedOver," сдано"]})]}),f===sn.name&&p&&r.jsxs("div",{className:"mt-5 flex flex-col gap-2 w-full",children:[r.jsx(_e,{onClick:c,children:"Задать вопрос в чат"}),r.jsx(_e,{variant:"secondary",onClick:()=>t(!0),children:r.jsx(_m,{texts:["Записаться на просмотр","Записаться на онлайн-показ"],intervalTime:3e3})})]})]}),r.jsx(b4,{options:{condition:g,set:m,title:l,redirectUrl:`${ke.listing}`}})]})}),qDe="_RoomInfoCardRoot_1k60y_1",WDe="_RoomInfoCardLink_1k60y_25",GDe="_RoomInfoCardTitle_1k60y_33",YDe="_RoomInfoCardAttr_1k60y_37",o1={RoomInfoCardRoot:qDe,RoomInfoCardLink:WDe,RoomInfoCardTitle:GDe,RoomInfoCardAttr:YDe},xW=v.memo(({data:t,room:e,userRole:n})=>{var c,u;const[s,i]=v.useState(!1),a=bw(t.buildingDiscount,t.price,t.area),o=t.price/100*((t.cashback/t.price*100||0)+(((c=t.buildingCashback)==null?void 0:c.value)||0)),l=ue(rt);return r.jsxs("div",{className:o1.RoomInfoCardRoot,children:[r.jsx(Ke,{to:`${ke.apartment}${t.id}`,className:o1.RoomInfoCardLink,target:"_blank",rel:"noopener noreferrer"}),r.jsx(yv,{children:r.jsx("img",{src:qt(t.image),width:85,height:85,alt:""})}),r.jsxs("div",{className:"flex flex-col gap-1 md3:gap-3",children:[r.jsxs("div",{className:"flex items-center gap-4 md3:flex-col md3:items-start md3:gap-1",children:[t.oldPrice!==t.price&&r.jsxs(cd,{children:[pt(t.oldPrice)," ₽"]}),r.jsxs("h3",{className:`title-3 ${o1.RoomInfoCardTitle}`,children:[pt(a||t.price)," ₽"]}),r.jsxs("span",{className:o1.RoomInfoCardAttr,children:[e===0?"Студия":`${e}-комн.`," ",t.area," м², ",t.floor," эт."]})]}),r.jsxs("div",{className:"flex items-center gap-4 md3:flex-col md3:items-start md3:gap-1",children:[t.frame&&r.jsxs("span",{children:["Корпус: ",t.frame]}),t.deadline&&r.jsxs("span",{children:["Срок сдачи: ",t.deadline]})]})]}),r.jsxs("div",{className:"flex gap-4 md1:gap-3 md1:items-start relative md1:col-span-2 md1:mt-4",children:[r.jsx(Sa,{cashback:o,increased:!!t.buildingCashback,prefix:"Кешбэк"}),!!(t.main_gifts.length||t.present||t.second_gifts.length)&&r.jsx(xw,{dataMainGifts:no(t.main_gifts)?t.main_gifts.filter(d=>d):[],dataSecondGifts:no(t.second_gifts)?t.second_gifts.filter(d=>d):[],title:"Есть подарок"}),!!t.buildingDiscount&&r.jsx(Ac,{discount:t.buildingDiscount.value,type_id:t.buildingDiscount.type,unit:t.buildingDiscount.unit,prefix:"Скидка",tooltip:!0,start_date:ct(t.buildingDiscount.start_date).format("DD.MM.YYYY"),end_date:ct(t.buildingDiscount.end_date).format("DD.MM.YYYY")}),!!((u=t.tags)!=null&&u.length)&&r.jsx(Sl,{data:t.tags,className:"pointer-events-none !w-auto"})]}),r.jsx("div",{className:"flex gap-4 md1:gap-2 md1:flex-col md1:col-start-3 md1:col-end-4 md1:row-start-1 md1:row-end-2",children:n===pn.name?r.jsxs(r.Fragment,{children:[r.jsx($t,{ElementTarget:()=>r.jsx(Ke,{to:`${ht.apartment.edit}${t.id}`,children:r.jsx(Ts,{Selector:"div",className:"relative z-50",children:r.jsx(Ns,{className:"stroke-blue stroke-[1.5px]",width:18,height:18})})}),children:"Редактировать"}),r.jsx($t,{ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>i(t.id),children:r.jsx(un,{className:"fill-red",width:16,height:16})}),children:"Удалить"})]}):r.jsx(r.Fragment,{children:l&&r.jsxs(r.Fragment,{children:[r.jsx(zh,{id:t.id,type:"apartment",variant:"tooltip"}),r.jsx(Uc,{id:t.id,type:"apartment",variant:"tooltip"})]})})}),r.jsx(vy,{options:{condition:s,set:i}})]})}),bW=async(t,e)=>{try{return(await Ue(`/api/building/${t}/apartments`,e)).data}catch(n){console.log(n)}},XDe="_RoomInfoRootMain_3kdt8_1",KDe="_RoomInfoRoot_3kdt8_1",QDe="_RoomInfoAttr_3kdt8_40",ZDe="_RoomInfoActiveRoot_3kdt8_72",a0={RoomInfoRootMain:XDe,RoomInfoRoot:KDe,RoomInfoAttr:QDe,RoomInfoActiveRoot:ZDe},JDe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAJ30lEQVR4nO1be1BU5xU/KCqg1YmZkKTp458+MukknbYziW2aTrRNmjZ/+EhSo02NTSbGDCGddjqpiq+A8QE+eEXAFZYQNREjBe5FojUJiLCXBeShgAK7uCiPFVg0St27dTydcy+77n3t3mWXIiln5swwd7/73e/8vvP+PgAmaZImaZJCTMjCA3wJLOcZSOFZOO5ioZ1nwcEz4BKYBcfIs+MjY5bROzCRCQvgXhcL7/AM1LhYwNEwz4LZxUIszQUThYaPwbd4FpJ5FoZHK7gCCAZu8CzsGWbgIbhbCWthmouBv/AsXA+V4CoaMcwzsBmPwQy4m8hZCj90sdDgYwexNw+wJRmwZgvg6Y2AZesAv1grMv1Nz+g3GtP3oSCsNhgM1DtL4AdwN5CzBF7Q2vVrRwCbdgGeigMsjwPkEgDP7AA8u0sUtDVFZPqbntFvXLw4tny9+OxavqY2fOVkYPG4Cs+zsJJn4D/yxV3/FLB+B2DZWkDz+4DNewA7PgDs2HuHu4p+i47eVnT0tGBX4TOS32gsvWPeIs7RsAPw+lFVEG65imH1uAjvYuFNtZ2xZog7WLcNsC1NKrQ3D3a34NWrVwUe7G7WHNeWDli7VZyzM1PTLGLHQ+1veS/CWSSqcNUmwPOp2oK72S28m/2Nb00FrNwkahZ9S64JzmJY9D8R/mYRfI9n4Jr3Av5dJKpr7TbAdpmqhwoAN9e+D1idIH5TBsJ1ZzE8PKbCYz5Ml3t72o3qLYCNifoEsH36C7TXZygA6KtLQ9uRebrmIJ9AgDuLFdHhDIXjMQPAxcIauf3VbwdsTPK/aMv+e/DKuQMKweVsbzKiZd8s/yAkATYkqvqDv4+J8MMMPEQZmcThZYrOzt9irdlzcaDztF/h3TzQWaELBHKOnVlKU8BSeDDkAPAsJEtC3VHRFtt1qKz9rP+dV2hCQ47fecnf0BquFyhA2BVS4bEA7pXn9qT2erw92bxcuJ4L5Vi779dYvmk2lq2PwJrMp7Gvg1OMsx15wu/8tIamncraIaQFlIuFdyQZXr5o+3ocVk9tpkL4yvci8dwuMcbTLp7bDXj6vQgFCD3mVF3foLVQ1inxBSUQEzIAeFlJS6mr3nDX39UoEarR+Cy2qbxL89VnL5CMvWI7o+sb7enimmRmUB0S4bEUHuQZuO01MTbu1Cc8sWPALhGqOW225tjmlAjJ2KGBPt3fIZOkosvLDG5jEdwf/O6XwHJvZPvy9Nm+B4Arl6UJT/YDPp1a/6U7KXL/Je0UWeELUsS1SbSgGJYGDwADKd6TWjL1Cy/4gPNlEgAunYzxbc/ZzwggkPD1+38T0LcoLMvMYE/wALBCD88zaSALIm4rXSNT61686CPjoxJYKIfjROcYyLcsGYpocCxoAFwsWLwnVXNgPm0zJRod/T3SEDfkQHuDAbv+uQAtmeEBg6oJ9l5FVtgevAYwMOg9KXncQBZ1IQ3w7OGVmgmPw27FvrpUtBXMx46MKcGBkC6u8ecHDfjkgSwygf7gAWCBlwAQoAYQU87eykpNQY0Hu2qFRsloAaCslNYIuZzAPAPOkAPQMQoAiKlmqDM8i32WGr9A9FSs0TXnr15bjo+veBXNyVGeZ1oAVM5cHG2KWlRjilz4eVAmYA0wCsgdXMXGKVibNR8t5ak40GvVBOHyiZV+5yPhoxatwcdeeR3rUiI8HSNS/18ezPSYQNXsl+aaIhee5aIWIRe1MLAEycVAhzcANkNwjqp9BAjqIZSvD8farAVorTTg0JBDFi160Jpzn8+5aOdJeAIhdcMjaNuv7gSrZi7+IwlPIJAmBBUGu43BASBnCnVU0ZnT56FjoFcCQvcp/6ZAO5+68RFsTZ+KPbnqYfAYPDfDNHPRKxVznr8nIOHVEqH+Q4EJ6LP768XUBW4ueFtaErd9EdC3Bg6NTSK0TN4HCGRReru/xE1p35RGBbstoG/dUPYF/hA0AFgE93sXQ8TUhdG7KMdAn0QoS1aE5ti2zNl+i6HWvdNwlSEGo42sx9uPgrvByG2H/HPT9WqB2RuAKwf0A2C/WC9tchx9WnOsrfA5qQlcbFCMedMQE4zgUiYQ9JCLhVhvAG4WAlp0AmA9nSbt913ksENFCyz7orDfWiEZ21m5VzHOvfNTnnoD4afLR8VTnlo1AoKpV39LjJE2RKn01ANAU/Y8ZcZn44Q6gICwGGYLzpEaofJxTfuVLTH37kX87q9C+BsN07seLdBLPAt7JOcBxeJRlT8AyLt3crkBN0U7TUbxTFEDgNEK7+aAARhWaYtfzdenBeZts7C3TbnDmqnwhXI0J85RnWvcACBysfAP+UGEHlOgCrIyYRZ2mnJ07HwOmrbM0Sy71QD4zooELKtvRbaqcWwBQPEWyBk5CHqyQwKBzv7N6U8IdYBccMupdDSnPS6M8dVzkAPw7T/FY3Vzh2eeVcmfePjlrR/id19NCB0AWoej1IzsztFnDmTXVAfIAaCzPjWb9wfAloOlPjXqysAgxn90DL+xZF1oACCimxny43ECQW9kIJYvVO97cgAeeysJO7q6PfOkF5Z5mEzCMTQkPN/+8YnQAUDkYmGV3BTcjlFPdAi0+0vZJ82t5gN+ErMT223dWH+hU6Hqz2/Yh4MOh8APv7EtdAD4uiJzsxjQ/pHYpAy2+0tz2PPuHIVrRYH7lm7A6GUbVe394MlqAejVKYdDCwAR3cygC0tq2nCzSEyb1WoHf91feqf/gDiH95yjCYNJ+ScFAN41FIUeACInA99Xiw7eTJUalatUs1PjgjpLlE4T09/UaKHfaIy8qgsGgDkvxKF5JEosic8eGwCI8EsIH7koqaoNoWA6odYLwMzFa/HRt5Lw0OdmQfgW6yWc+9L6sQNAdpa4W541huCq7C7hArXRdIMWHrl0k0eYf9Wc8xkKu+39OP/ddM94encEgK9gTC9LM/A2zwAn7yfoFPo2z4CJjrnxM5jrmTiXaxWKoT8negQ6oQGA9VIPGj+rEjRBUgy9luguhxvHDABvwuMQTQeVVFDxDJS6GDhP3WZquQtMnWfxWakwphiW0jugRrmckRY/bV3eqOuAaXF5bg1IhQlHOabf0+LDssowSpbd6eIl6zAsq9wNwM9gwhFimKC6uRyGbzoUMADhmz8eUX9TAUxYMlY9CUbuFgky/W/7dAtPY0ds/zIYTMFfnhhXMlbFukNZePxhjHoxTlv4F9dj+ObDd4TPrf4RfC3IWL0ajCZe8AmZZTg99gOF8DNWJ2NYxpdutS8EY/XE/l8kBWVzPwYjV+3WhqmJDEas2Crw1KRid/NzGIzc6/C1JcQwyOVWgJGzq7S+WyCn6lH4vyBD1VzI5VLAaBoY4d2QXxU53suapEmaJJgw9F8/HpBYgZUZiwAAAABJRU5ErkJggg==",_W=v.memo(({onClick:t,data:e,planning:n=!0,active:s})=>{const i=ue(rt);return r.jsxs("div",{className:`${a0.RoomInfoRoot} ${s?a0.RoomInfoActiveRoot:""}`,"data-layout-btn":!0,children:[r.jsx("div",{className:"CardLinkElement z-50",onClick:t}),r.jsx("div",{className:"flex items-center gap-4 justify-between md1:flex-col md1:items-start",children:r.jsxs("div",{className:"flex items-center gap-4 md1:flex-col md1:items-start md1:gap-2",children:[r.jsxs("div",{className:"md1:flex items-center gap-3 title-3 whitespace-nowrap",children:[r.jsx("span",{children:e.room===0?"Студии":`${e.room}-${i?"комнатные":"комн."}`}),!i&&r.jsxs("span",{children:["от ",e.minArea," м²"]})]}),i&&r.jsxs("div",{children:["от ",e.minArea," м²"]}),r.jsxs("div",{className:"title-3",children:["от ",pt(e.minPrice)," ₽"]})]})}),i&&r.jsxs("div",{className:"flex gap-6 md1:flex-col md1:gap-4 md1:items-start relative",children:[!!e.cashback&&r.jsxs("div",{className:"flex items-center gap-2 w-max font-medium leading-none",children:[r.jsx("img",{src:JDe,width:16,height:16,alt:"Кешбэк",className:"mb-0.5"}),"Кешбэк до ",pt(e.max_price/100*e.cashback)," ₽"]}),!!(e.main_gifts.length||e.haveGift)&&r.jsxs("div",{className:"flex items-center gap-2 w-max font-medium leading-none",children:[r.jsx("img",{src:_$,width:15,height:15,alt:"Подарок",className:"mb-0.5"}),"Есть подарок"]})]}),r.jsx(An,{size:"small",color:"blue",children:r.jsxs("div",{className:a0.RoomInfoAttr,children:[!!(n&&i)&&r.jsxs("span",{children:[e.totalLayout," планировок"]}),r.jsxs("span",{children:[e.totalApartment," квартир"]})]})}),r.jsx(Yu,{width:25,height:25,className:`fill-black ${a0.RoomInfoIcon}`})]})}),Yt=(t,e,n,s="array")=>{t.delete(e),n&&(s==="array"&&n.forEach(i=>{t.append(e,i)}),s==="number"&&t.append(e,n.replace(/\s+/g,"")),s==="string"&&t.append(e,n),s==="bool"&&t.append(e,1))},e5e=v.memo(({data:t,onClick:e,activeRoomId:n})=>{const{id:s}=v.useContext($o),i=v.useContext(dd),a=ue(g=>g.buildingApartFilter.sortBy),[o,l]=v.useState({cards:[],totalPages:null}),[c,u]=v.useState(!1),[d,h]=v.useState(1);v.useEffect(()=>{if(t.room===n){u(!0);const g={sort:a||"",tags:[...i.filtersResult.tags,...i.filtersResult.advantages],is_gift:i.filtersResult.is_gift,is_video:i.filtersResult.is_video,filters:{primary:{...i.filtersResult.filters.primary,rooms:[n]}},page:d};bW(s,g).then(m=>{u(!1),l(m)})}},[n,d]);const f=v.useCallback(()=>{var m;const g=new URLSearchParams;return Yt(g,"sort",a,"string"),Yt(g,"rooms",[n],"array"),Yt(g,"price_from",i.filtersResult.filters.primary.price_from,"number"),Yt(g,"price_to",i.filtersResult.filters.primary.price_to,"number"),Yt(g,"area_from",i.filtersResult.filters.primary.area_from,"number"),Yt(g,"area_to",i.filtersResult.filters.primary.area_to,"number"),Yt(g,"frames",(m=i.filtersResult.filters.primary.frames)==null?void 0:m.value,"string"),Yt(g,"tags",i.filtersResult.tags,"array"),Yt(g,"advantages",i.filtersResult.advantages,"array"),Yt(g,"is_gift",i.filtersResult.is_gift,"bool"),Yt(g,"is_video",i.filtersResult.is_video,"bool"),r.jsxs(r.Fragment,{children:[o&&o.cards.map((_,y)=>r.jsx(xW,{data:_,room:n,userRole:i.userRole},y)),(o==null?void 0:o.totalPages)>1&&r.jsxs(r.Fragment,{children:[r.jsx(zo,{currentPage:d,setCurrentPage:_=>h(_),total:o?o.totalPages:0,className:"my-6",showBtn:!1}),r.jsx(Ke,{to:`${ke.listingFlats}?complex=${s}&${g.toString()}`,target:"_blank",className:"w-full md1:px-4",children:r.jsx(_e,{variant:"secondary",Selector:"div",children:"Смотреть списком"})})]})]})},[o]),p=g=>{e();const m=g.currentTarget&&g.currentTarget.closest("[data-layout-btn]");m&&setTimeout(()=>{const y=m.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:y-52-16,behavior:"smooth"})},100)};return r.jsxs("div",{className:a0.RoomInfoRootMain,children:[r.jsx(_W,{data:t,planning:!1,onClick:p,active:t.room===n}),t.room===n&&r.jsx("div",{className:"mt-4",children:r.jsx(f,{})})]})}),z8=v.memo(()=>{const t=v.useContext(dd),[e,n]=v.useState(null),s=i=>{n(e===i?null:i)};return r.jsx("div",{className:"flex flex-col gap-3",children:t.layoutsIsLoading?r.jsx(Ol,{className:"mx-auto mt-8"}):r.jsx(r.Fragment,{children:t.layouts?r.jsx(r.Fragment,{children:t.layouts.items.length>0?t.layouts.items.map((i,a)=>r.jsx(e5e,{data:i,activeRoomId:e,onClick:()=>s(i.room)},a)):r.jsx("div",{className:"mt-8 mb-4",children:r.jsx(Or,{block:!1})})}):"Произошла ошибка, перезагрузите страницу"})})}),t5e=async(t,e={})=>{try{return(await Ue(`/api/building/${t}/plannings`,e)).data}catch(n){console.log(n)}},n5e="_CardSchemeRoot_xj6gv_1",s5e="_CardSchemeActiveRoot_xj6gv_21",r5e="_CardSchemeContent_xj6gv_25",i5e="_CardSchemeImage_xj6gv_32",a5e="_CardSchemeImageIbg_xj6gv_44",o5e="_CardSchemeAttr_xj6gv_53",kf={CardSchemeRoot:n5e,CardSchemeActiveRoot:s5e,CardSchemeContent:r5e,CardSchemeImage:i5e,CardSchemeImageIbg:a5e,CardSchemeAttr:o5e},l5e=({data:t,room:e,onClick:n,active:s})=>{const{image:i,totalApartment:a,deadline:o,floors:l,frame:c,minArea:u,minPrice:d,max_price:h,tags:f,haveGift:p,cashback:g}=t;return r.jsxs("article",{className:`${kf.CardSchemeRoot} ${s?kf.CardSchemeActiveRoot:""}`,children:[r.jsx("div",{className:"CardLinkElement z-50",onClick:n}),r.jsx("div",{className:kf.CardSchemeImage,children:r.jsx("div",{className:`${kf.CardSchemeImageIbg} ibg-contain`,children:r.jsx("img",{src:qt(i),width:340,height:245,alt:""})})}),r.jsxs("div",{className:kf.CardSchemeContent,children:[!!(g||p||f)&&r.jsxs("div",{className:"flex flex-wrap gap-4",children:[g?r.jsx(Sa,{cashback:h/100*g}):"",p?r.jsx(pd,{present:p,title:"Подарок на выбор"}):"",!!(f!=null&&f.length)&&r.jsx(Sl,{data:f,className:"pointer-events-none !w-auto flex-grow overflow-hidden"})]}),r.jsxs("h3",{className:"title-3 mt-4 mb-1",children:["от ",pt(d||0)," ₽"]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("span",{className:"font-medium",children:e===0?"Студия":`${e}-комн.`}),r.jsxs("span",{className:"font-medium",children:[" ",u," м² "]}),r.jsxs("span",{children:["этажи: ",[...new Set(l)].join(", ")]}),r.jsxs("div",{className:kf.CardSchemeAttr,children:[c&&r.jsxs("span",{children:["Корпус: ",c]}),o&&r.jsxs("span",{children:["Срок сдачи: ",o]})]})]}),r.jsxs(_e,{Selector:"div",variant:"secondary",size:"Small",className:"mt-auto",children:["Выбрать из ",a," квартир"]})]})]})},c5e=({data:t,onClick:e,room:n,active:s})=>r.jsx(l5e,{data:t,onClick:i=>e(i,t.minArea),room:n,active:s}),u5e=v.memo(({data:t,onClick:e,activeRoomId:n})=>{const{id:s}=v.useContext($o),i=v.useRef(null),a=ue(rt),o=ue(B=>B.buildingApartFilter.sortBy),l={"--modal-space":"0px","--modal-height":"var(--vh)","--modal-width":a?"1150px":"100%"},c=v.useContext(dd),[u,d]=v.useState([]),[h,f]=v.useState(!1),[p,g]=v.useState([]),[m,_]=v.useState(!1),[y,x]=v.useState({cards:[],totalPages:null}),[b,w]=v.useState(!1),[C,j]=v.useState(null),[E,T]=v.useState(1),N=t.room===n&&(u==null?void 0:u.find(B=>B.minArea===C)),P=B=>{j(null),e();const U=B.currentTarget&&B.currentTarget.closest("[data-layout-btn]");U&&setTimeout(()=>{const G=U.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:G-52-16,behavior:"smooth"})},100)};v.useEffect(()=>{if(t.room===n){f(!0);const B={sort:o||"",tags:[...c.filtersResult.tags,...c.filtersResult.advantages],is_gift:c.filtersResult.is_gift,is_video:c.filtersResult.is_video,filters:{primary:{...c.filtersResult.filters.primary,rooms:[n]}}};t5e(s,B).then(U=>{f(!1),T(1),U&&d(U)}).catch(()=>{})}},[n]),v.useEffect(()=>{if(t.room===n&&p&&m){w(!0);const B={sort:o||"",tags:[...c.filtersResult.tags,...c.filtersResult.advantages],is_gift:c.filtersResult.is_gift,is_video:c.filtersResult.is_video,filters:{primary:{...c.filtersResult.filters.primary,rooms:[n],area:C}},page:E};bW(s,B).then(U=>{w(!1),x(U)})}},[E,C,m]),v.useEffect(()=>{if(!C)return;const B=u.find(U=>U.minArea===C);g(B)},[u,C]);const I=()=>{var U;const B=new URLSearchParams;return Yt(B,"sort",o,"string"),Yt(B,"rooms",[n],"array"),Yt(B,"price_from",c.filtersResult.filters.primary.price_from,"number"),Yt(B,"price_to",c.filtersResult.filters.primary.price_to,"number"),Yt(B,"area_from",c.filtersResult.filters.primary.area_from,"number"),Yt(B,"area_to",c.filtersResult.filters.primary.area_to,"number"),Yt(B,"frames",(U=c.filtersResult.filters.primary.frames)==null?void 0:U.value,"string"),Yt(B,"tags",c.filtersResult.tags,"array"),Yt(B,"advantages",c.filtersResult.advantages,"array"),Yt(B,"is_gift",c.filtersResult.is_gift,"bool"),Yt(B,"is_video",c.filtersResult.is_video,"bool"),Yt(B,"area",C,"string"),r.jsxs(r.Fragment,{children:[y.cards.map((z,G)=>r.jsx(xW,{data:z,room:n},G)),(y==null?void 0:y.totalPages)>1&&r.jsxs(r.Fragment,{children:[r.jsx(zo,{currentPage:E,setCurrentPage:z=>T(z),total:y?y.totalPages:0,className:"my-6",showBtn:!1}),r.jsx(Ke,{to:`${ke.listingFlats}?complex=${s}&${B.toString()}`,target:"_blank",className:"w-full md1:px-4",children:r.jsx(_e,{variant:"secondary",Selector:"div",children:"Смотреть списком"})})]})]})};return r.jsxs("div",{children:[r.jsx(_W,{data:t,onClick:P,active:t.room===n}),t.room===n&&r.jsx(r.Fragment,{children:h?r.jsx("div",{className:"flex items-center justify-center mt-10 mb-8",children:r.jsx(Ol,{})}):r.jsxs(Xs,{className:"-m-2 mt-4 p-2 md1:mx-2",modules:[xi],slidesPerView:1.15,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},ref:i,spaceBetween:16,wrapperClass:"items-stretch",breakpoints:{599:{slidesPerView:1.8},799:{slidesPerView:2.2},1e3:{slidesPerView:2.7}},children:[u==null?void 0:u.map((B,U)=>r.jsx(Tn,{className:"h-auto",children:r.jsx(c5e,{data:B,onClick:(z,G)=>{G!==C&&(T(1),j(G),_(!0))},room:n,active:B.minArea===C})},U)),a&&r.jsxs("div",{children:[r.jsx(ho,{centery:"true",disabled:!0,gray:"true",className:"slider-btn-prev !top-1/3"}),r.jsx(fo,{centery:"true",gray:"true",className:"slider-btn-next !top-1/3"})]})]})}),r.jsx(Ze,{condition:N,children:r.jsx(gt,{options:{overlayClassNames:"_center-max-content-desktop",modalContentClassNames:"!px-10 md1:!px-4 mmd1:min-h-[744px]"},style:l,condition:N,set:()=>{j(null),_(!1)},children:r.jsx(I,{})})})]})}),d5e=v.memo(()=>{const t=v.useContext(dd),[e,n]=v.useState(null),s=i=>{n(e===i?null:i)};return r.jsx("div",{className:"flex flex-col gap-3",children:t.layoutsIsLoading?r.jsx(Ol,{className:"mx-auto mt-8"}):r.jsx(r.Fragment,{children:t.layouts?r.jsx(r.Fragment,{children:t.layouts.items.length>0?t.layouts.items.map((i,a)=>r.jsx(u5e,{data:i,activeRoomId:e,onClick:()=>s(i.room)},a)):r.jsx("div",{className:"mt-8 mb-4",children:r.jsx(Or,{block:!1})})}):"Произошла ошибка, перезагрузите страницу"})})}),h5e=()=>{const{userRole:t}=v.useContext(dd),e=[{name:"Планировки",body:r.jsx(d5e,{})},{name:"Квартиры",body:r.jsx(z8,{})}];return t===pn.name?r.jsx("div",{className:"mt-6",children:r.jsx(z8,{})}):r.jsx(Uo,{data:e,navClassName:"md1:mx-4"})},f5e="_FormRowContainer_1vb11_1",p5e="_FormRowRoot_1vb11_6",Wj={FormRowContainer:f5e,FormRowRoot:p5e},yd=({children:t,className:e="",shadow:n=!0})=>r.jsx(r.Fragment,{children:n?r.jsx("div",{className:`${Wj.FormRowContainer}`,children:r.jsx("div",{className:`${Wj.FormRowRoot} ${e} mt-2 pb-3 scrollbarPrimary scrollbar-none-mobile`,children:t})}):r.jsx("div",{className:`${Wj.FormRowRoot} ${e} scrollbar-none-mobile`,children:t})}),m5e="_FilterButtonRoot_3irkw_1",g5e="_FilterButtonMiniRoot_3irkw_22",v5e="_FilterButtonIcon_3irkw_36",y5e="_FilterButtonCount_3irkw_43",Wg={FilterButtonRoot:m5e,FilterButtonMiniRoot:g5e,FilterButtonIcon:v5e,FilterButtonCount:y5e},hC=({label:t="Фильтры",onClick:e=()=>{},count:n=0,mini:s=!1})=>s?r.jsx("button",{type:"button",className:Wg.FilterButtonMiniRoot,onClick:e,children:r.jsx(MI,{width:20,height:20,className:Wg.FilterButtonIcon})}):r.jsxs("button",{type:"button",className:Wg.FilterButtonRoot,onClick:e,children:[r.jsx(MI,{width:20,height:20,className:Wg.FilterButtonIcon}),r.jsx("span",{children:t}),n&&n>0?r.jsx("span",{className:Wg.FilterButtonCount,children:n}):null]}),Wm=({dispatchChange:t,roomsSelector:e})=>{const n=Dt(),s=(i,a)=>{n(t({id:a,value:i.target.checked}))};return r.jsx(AA,{children:e.options.map((i,a)=>r.jsx(DA,{checked:e.value.includes(i.value),onChange:o=>s(o,i.value),label:i.label,size:i.value===0?"Studio":"Default"},a))})},Gm=({dispatchChange:t,priceSelector:e,nameLabelFirst:n="Цена от"})=>{const s=Dt(),i=(a,o,l)=>{s(t({name:o,value:l,path:`filtersMain.${a}`}))};return r.jsxs(_l,{children:[r.jsx(kn,{value:e.value.priceFrom,onChange:a=>i("price",e.from.name,a),before:n,convertNumber:!0,onlyNumber:!0,maxLength:12}),r.jsx(kn,{value:e.value.priceTo,onChange:a=>i("price",e.to.name,a),before:"До",after:"₽",convertNumber:!0,onlyNumber:!0,maxLength:12})]})},x5e=({filterCount:t,setIsOpenMoreFilter:e})=>{const{rooms:n,price:s}=ue(i=>i.buildingApartFilter.filtersMain);return r.jsxs(yd,{shadow:!1,className:"grid-cols-[145px_max-content_450px] scrollbarPrimary md1:mx-4",children:[r.jsx(hC,{count:t,onClick:()=>e(i=>!i)}),r.jsx(Wm,{dispatchChange:S7,roomsSelector:n}),r.jsx(Gm,{dispatchChange:TE,priceSelector:s})]})},b5e="_FieldRowRoot_byony_1",_5e="_FieldRowRootCol_byony_12",w5e="_FieldRowName_byony_17",C5e="_FieldRowChildren_byony_21",l1={FieldRowRoot:b5e,FieldRowRootCol:_5e,FieldRowName:w5e,FieldRowChildren:C5e},nn=({name:t="",widthName:e=180,widthChildren:n=300,children:s,className:i="",classNameName:a="",classNameChildren:o="",col:l=!1,fontWeight:c="normal",infoTooltip:u})=>{const d={"--width-name":`${e}px`,"--width-children":`${n}px`};return r.jsxs("div",{className:He(l1.FieldRowRoot,i,l&&l1.FieldRowRootCol),style:d,children:[r.jsxs("div",{className:He(l1.FieldRowName,a,c==="medium"?"font-medium":""),children:[t,u&&r.jsx($t,{mobile:!0,ElementTarget:()=>r.jsx(Lp,{width:16,height:16}),classNameTarget:"h-4 mt-1",classNameContent:"mmd1:!p-6",placement:"right",offset:[10,0],children:r.jsx("div",{children:u})})]}),r.jsx("div",{className:He(l1.FieldRowChildren,o),children:s})]})},Ha=[{label:"Сначала дешёвые",value:"priceAsc"},{label:"Сначала дорогие",value:"priceDesc"}],S5e=({condition:t,set:e,filterCount:n})=>{const s=Dt(),i=ue(rt),a=ue(b=>b.buildingApartFilter.tags),o=ue(b=>b.buildingApartFilter.advantages),l=ue(b=>b.buildingApartFilter),c=ue(b=>b.buildingApartFilter.sortBy),{rooms:u,price:d}=ue(b=>b.buildingApartFilter.filtersMain),h=ue(b=>b.buildingApartFilter.filtersAdditional),f=v.useContext(dd),p={"--modal-width":"700px"},g={"--modal-width":"100%"},m=()=>r.jsx(Sr,{set:e,className:"px-8 py-6 md1:px-4 md1:py-4",children:r.jsx("h2",{className:"title-2",children:"Фильтры"})}),_=()=>r.jsxs("div",{className:"ModalFooter",children:[n>0&&r.jsxs(_e,{variant:"secondary",size:"Small",onClick:()=>s(Ise()),children:["Очистить ",i&&`фильтр ⋅ ${n}`]}),r.jsx(_e,{size:"Small",onClick:()=>e(!1),className:"min-w-[220px] md1:flex-grow",children:f.layoutsIsLoading?r.jsx(fd,{size:16,variant:"second"}):r.jsxs(r.Fragment,{children:["Показать ",mv((f==null?void 0:f.layouts.totalApart)||0)]})})]}),y=(b,w)=>{s(Mse({name:b,selectedOptions:w}))},x=(b,w,C)=>{s(TE({name:w,value:C,path:`filtersAdditional.${b}`}))};return r.jsx(gt,{options:{overlayClassNames:"_right",modalClassNames:"HeaderSticky !px-0 !pb-0",modalContentClassNames:"!py-0 !pl-8 !pr-12 md1:!px-4"},style:window.innerWidth>1222?p:g,set:e,condition:t,closeBtn:!1,ModalHeader:m,ModalFooter:_,children:r.jsxs("div",{className:"flex flex-col gap-6 mt-6 mb-4",children:[[C4].map((b,w)=>r.jsxs("div",{className:"bg-primary700 rounded-lg py-4 px-4 flex justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"title-4",children:b.label}),r.jsx("p",{className:"text-small text-primary400 mt-1",children:b.descr})]}),r.jsx(md,{checked:l[b.value],set:C=>{s(Rse({name:b.value,value:C.target.checked}))}})]},w)),r.jsx(nn,{name:"Цена",widthChildren:999,classNameName:"font-medium",children:r.jsx(Gm,{dispatchChange:TE,priceSelector:d,nameLabelFirst:"От"})}),r.jsx(nn,{name:"Количество комнат",widthChildren:999,classNameName:"font-medium",children:r.jsx(Wm,{dispatchChange:S7,roomsSelector:u})}),h.frame&&r.jsx(nn,{name:h.frame.nameLabel,widthChildren:999,classNameName:"font-medium",children:r.jsx(vi,{nameLabel:"",options:h.frame.options,onChange:b=>y(h.frame.name,b),value:h.frame.value,defaultOption:!0})}),r.jsx(nn,{name:h.area.nameLabel,widthChildren:999,classNameName:"font-medium",children:r.jsxs(_l,{children:[r.jsx(kn,{value:h[h.area.name].value[h.area.from.name],onChange:b=>x(h.area.name,h.area.from.name,b),before:h.area.from.label,convertNumber:!0,onlyNumber:!0,maxLength:3}),r.jsx(kn,{value:h[h.area.name].value[h.area.to.name],onChange:b=>x(h.area.name,h.area.to.name,b),before:h.area.to.label,after:h.area.postfix,convertNumber:!0,onlyNumber:!0,maxLength:3})]})}),i?r.jsx(nn,{name:"Сортировка",widthChildren:999,classNameName:"font-medium !mt-0",children:r.jsx(vi,{options:Ha,value:Ha.find(b=>b.value===c)||Ha[0],onChange:b=>s(wI(b.value)),className:"min-w-[320px]",variant:"second",iconArrow:!1})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sy,{width:16,height:16}),r.jsx(vi,{options:Ha,value:Ha.find(b=>b.value===c)||Ha[0],onChange:b=>s(wI(b.value)),className:"min-w-[320px]",variant:"second",iconArrow:!1})]}),r.jsx("div",{className:"border-top-lightgray"}),!!f.tags.length&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-3",children:"Часто ищут"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:f.tags.map((b,w)=>{const C={value:b.id,label:b.name};return r.jsx(An,{color:"select",onClick:j=>s(CI({value:j,option:C,type:"tags"})),value:a.find(j=>j===C.value),children:C.label},w)})})]}),!!f.advantages.length&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-3",children:"Уникальные преимущества объекта"}),r.jsx("div",{className:"grid grid-cols-3 gap-4 md3:grid-cols-2",children:f.advantages.map(b=>{const w={value:b.id,label:b.name};return r.jsx(Zy,{data:b,onChange:C=>s(CI({value:C,option:w,type:"advantages"})),value:o.find(C=>C===w.value),textVisible:!1},b.id)})})]})]})})};function oD(t){let e=0;return t.forEach(n=>{Object.keys(n).forEach(s=>{n[s]&&(n[s]===!0||!Ye(n[s].value)&&!Ye(n[s])&&n[s]!==!1)&&e++})}),e}function j5e(t,e=[],n={}){let s=0;return Object.keys(t).forEach(i=>{const a=t[i];a&&i!=="page"&&(e.includes(i)||(Array.isArray(a)||typeof a=="object"?Ye(a)||s++:a&&n[i]!==a&&s++))}),s}const T5e=async(t,e)=>{try{return(await Ue(`/api/building/${t}/layout`,e)).data}catch(n){console.log(n)}},E5e=()=>{const{id:t,tags:e,advantages:n}=v.useContext($o),s=Dt(),i=v.useContext(dd),[a,o]=v.useState(!1),[l,c]=v.useState(0),u=ue(f=>f.buildingApartFilter),d=f=>{f.preventDefault()};v.useEffect(()=>{const{filtersMain:f,filtersAdditional:p}=u;c(oD([f,p])),u.tags.length&&c(g=>g+1),u.advantages.length&&c(g=>g+1),u.is_gift&&c(g=>g+1),u.is_video&&c(g=>g+1),h(u)},[u]);const h=v.useCallback(es(f=>{var g;let p={filters:{primary:{price_from:f.filtersMain.price.value.priceFrom,price_to:f.filtersMain.price.value.priceTo,rooms:f.filtersMain.rooms.value,area_from:f.filtersAdditional.area.value.areaFrom,area_to:f.filtersAdditional.area.value.areaTo,frames:(g=f.filtersAdditional.frame)==null?void 0:g.value}}};i&&(i.setFiltersResult({...p,tags:f.tags,advantages:f.advantages,is_gift:f.is_gift||null,is_video:f.is_video||null}),i.setLayoutsIsLoading(!0),T5e(t,{...p,tags:[...f.tags,...f.advantages],is_gift:f.is_gift||null,is_video:f.is_video||null}).then(m=>{const _=m.items.reduce((y,x)=>y+=x.totalApartment,0);i.setLayouts({...m,totalApart:_}),i.setLayoutsIsLoading(!1)}))},350),[]);return v.useEffect(()=>{const f=i==null?void 0:i.frames;f&&(f==null?void 0:f.length)>0&&s(Ose({frame:{name:"frame",nameLabel:"Корпус",type:"list-single",options:f,value:{}}}))},[i==null?void 0:i.frames]),r.jsxs("form",{onSubmit:d,className:"mt-6 mb-4",children:[r.jsx(x5e,{filterCount:l,setIsOpenMoreFilter:o}),r.jsx(Ze,{condition:a,children:r.jsx(S5e,{condition:a,set:o,filterCount:l,complexTags:e,complexAdvantages:n})})]})},N5e=({conditionModal:t,setModal:e,mainData:n,frames:s,advantages:i=[],tags:a=[]})=>{const{handleSubmit:o,control:l,setValue:c,watch:u,formState:{errors:d}}=en(),h=Mn(),[f,p]=v.useState([]),[g,m]=v.useState(Nm),_=u("type_tags"),y=u("type_advantages"),x=()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:"Добавить теги/уникальные преимущества"})}),b=()=>r.jsx("div",{className:"px-14 py-6",children:r.jsx(_e,{onClick:o(w),className:"w-full",children:"Сохранить"})}),w=C=>{var E,T;const j={apartments_ids:f.map(N=>N.value),advantage_ids:(E=C.advantages)==null?void 0:E.map(N=>N.value),tag_ids:(T=C.tags)==null?void 0:T.map(N=>N.value),filtersInfo:g};C.type_tags&&delete j.advantage_ids,C.type_advantages&&delete j.tag_ids,console.log(j),j.apartments_ids.length?Me(`${C.type_advantages?"/admin-api/massive/advantage/attach":"/admin-api/massive/tags/attach"}`,j).then(N=>{e(!1)}):e(!1)};return r.jsxs(gt,{set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:t,style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1150px"},closeBtn:!1,ModalHeader:x,ModalFooter:b,children:[r.jsx("h3",{className:"title-3",children:"Выберите тип"}),r.jsx("div",{className:"mt-4 flex items-center gap-8 mb-6",children:r.jsx(km,{control:l,setValue:c,checkboxes:[{value:"type_tags",label:"Теги"},{value:"type_advantages",label:"Уникальные преимущества"}]})}),!!_&&r.jsx("div",{className:"max-w-[400px] mb-8",children:r.jsx(Es,{name:"tags",control:l,nameLabel:"Выбрать тег",options:a.map(C=>({value:C.id,label:C.name})),errors:d,requiredValue:!0,defaultOption:!0})}),!!y&&r.jsx("div",{className:"max-w-[400px] mb-8",children:r.jsx(Es,{name:"advantages",control:l,nameLabel:"Выбрать преимущество",options:i.map(C=>({value:C.id,label:C.name})),errors:d,requiredValue:!0,defaultOption:!0})}),r.jsx(Fm,{building_id:h.id,frames:s,setData:p,filterFields:g,setFilterFields:m})]})},k5e=({data:t,frames:e})=>{const[n,s]=v.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(_e,{type:"button",size:"Small",onClick:()=>s(!0),children:"Добавить теги/уникальные преимущества"}),r.jsx(Ze,{condition:n,children:r.jsx(N5e,{conditionModal:n,setModal:s,mainData:t,frames:e,advantages:t.advantages,tags:t.tags})})]})},i2=[{id:2,value:"summ",label:"Скидка в рублях"},{id:1,value:"prc",label:"Скидка в процентах"}],YN=[{id:1,value:"discount_summ",label:"Относительно цены"},{id:2,value:"discount_square",label:"Относительно кв.м"}],A5e=t=>{const{handleSubmit:e,control:n,setValue:s,watch:i,formState:{errors:a}}=en(),{condition:o,set:l,options:c,fetchData:u}=t,[d,h]=v.useState([]),[f,p]=v.useState(Nm),[g,m]=v.useState([]),[_,y]=v.useState(!0),[x,b]=v.useState({});v.useEffect(()=>{(async()=>{if(!qk(o)||!c.is_edit){y(!1);return}const I=c.type==="discount"?"/admin-api/building-discount/show":"/admin-api/building-cashback/show",B={building_id:+c.id};c.type==="discount"&&(B.discount_id=+o),c.type==="cashback"&&(B.cashback_id=+o);const{data:{result:U}}=await Me(I,B);if(p(JSON.parse(U.filters_info)),m(U.apartments.map(z=>z.id)),s("start_date",ct(U.start_date).format("DD.MM.YYYY")),s("end_date",ct(U.end_date).format("DD.MM.YYYY")),s("type",i2.find(z=>z.id===U.type)),(U.type===1||c.type==="cashback")&&s("type_prc",String(U.value)),U.type===2&&s("type_summ",String(U.value)),c.type==="discount"){const z=YN.find(G=>G.id===U.unit);z&&(s(z.value,!0),z.value==="discount_summ"&&s("discount_square",!1),z.value==="discount_square"&&s("discount_summ",!1))}b(U),setTimeout(()=>{y(!1)},200)})()},[o]);const w=async P=>{var G;if(d.length===0)return;const I=(G=P.type)==null?void 0:G.value,B=I==="prc",U=I==="summ",z={building_id:+c.id,start_date:ct(h_(P.start_date,"DD-MM-YYYY"),"DD.MM.YYYY").format("YYYY-MM-DD"),end_date:ct(h_(P.end_date,"DD-MM-YYYY"),"DD.MM.YYYY").format("YYYY-MM-DD"),apartment_ids:d.map(V=>V.value),filters_info:JSON.stringify(f),value:B?To(P.type_prc):U?To(P.type_summ):null};if(c.type==="discount"){const V={building_id:z.building_id,type:B?1:U?2:null,unit:U?P.discount_summ?1:P.discount_square?2:null:1,value:B?To(P.type_prc):U?To(P.type_summ):null,filters_info:z.filters_info,start_date:z.start_date,end_date:z.end_date,apartment_ids:z.apartment_ids};c.is_edit?await Me("/admin-api/building-discount/update",{...V,discount_id:x.id}):await Me("/admin-api/building-discount/create",V)}if(c.type==="cashback"){const V={building_id:z.building_id,unit:1,value:To(P.type_prc),filters_info:z.filters_info,start_date:z.start_date,end_date:z.end_date,apartment_ids:z.apartment_ids};c.is_edit?await Me("/admin-api/building-cashback/update",{...V,discount_id:x.id}):await Me("/admin-api/building-cashback/create",V)}l(!1),u&&await u()},C=c.type==="discount"?i("type"):i2[1],j=c.type==="discount"&&!c.is_edit&&"Добавить скидку на квартиры",E=c.type==="cashback"&&!c.is_edit&&"Добавить скидку на квартиры",T=c.type==="discount"&&c.is_edit&&"Редактировать скидку на квартиры",N=c.type==="cashback"&&c.is_edit&&"Редактировать кешбэк на квартиры";return{setSelectedApartments:h,filterFields:f,setFilterFields:p,defaultApartmentIds:g,isLoading:_,handleSubmit:e,control:n,setValue:s,watch:i,errors:a,onSubmitHandler:w,isCreateDiscountTitle:j,isCreateCashbackTitle:E,isEditDiscountTitle:T,isEditCashbackTitle:N,watch_type:C}},D5e=({condition:t,set:e,options:n,fetchData:s})=>{const{setSelectedApartments:i,filterFields:a,setFilterFields:o,defaultApartmentIds:l,isLoading:c,handleSubmit:u,control:d,setValue:h,watch:f,errors:p,onSubmitHandler:g,isCreateDiscountTitle:m,isCreateCashbackTitle:_,isEditDiscountTitle:y,isEditCashbackTitle:x,watch_type:b}=A5e({condition:t,set:e,options:n,fetchData:s});if(n)return r.jsxs(gt,{condition:!!t,set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1100px"},closeBtn:!1,ModalHeader:()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:m||_||y||x})}),ModalFooter:()=>r.jsx(r.Fragment,{children:!c&&r.jsx("div",{className:"px-14 py-6",children:r.jsx(_e,{type:"button",onClick:u(g),className:"w-full",children:"Сохранить"})})}),children:[c&&r.jsx("span",{className:"text-primary400",children:"Загрузка..."}),!c&&r.jsxs(r.Fragment,{children:[n.type==="discount"&&r.jsx(fn,{className:"w-[365px] mb-3",control:d,nameLabel:"Тип",options:i2,defaultValue:i2[0],name:"type",requiredValue:!0,errors:p}),(b==null?void 0:b.value)==="summ"&&r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-[365px]",children:r.jsx(Qe,{control:d,beforeText:"Скидка в рублях",name:"type_summ",errors:p,afterText:"₽",requiredValue:!0,convertNumber:!0,onlyNumber:!0,maxLength:11})}),r.jsx(km,{control:d,setValue:h,checkboxes:YN,defaultValue:n.is_edit?{}:YN[0],required:!0,watch:f})]}),(b==null?void 0:b.value)==="prc"&&r.jsx("div",{className:"w-[365px] mb-3",children:r.jsx(Qe,{control:d,beforeText:"Скидка в процентах",name:"type_prc",errors:p,afterText:"%",requiredValue:!0,onlyNumberSemicolon:!0,maxLength:4})}),r.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[r.jsx(Qe,{control:d,datePicker:!0,beforeText:"Начало",name:"start_date",requiredValue:!0,errors:p}),r.jsx(Qe,{control:d,datePicker:!0,beforeText:"Окончание",name:"end_date",requiredValue:!0,errors:p})]}),r.jsx("div",{className:"mt-8",children:r.jsx(Fm,{building_id:n.id,frames:n.frames,setData:i,filterFields:a,setFilterFields:o,defaultValue:l})})]})]})},H8=v.memo(D5e),P5e=({condition:t,set:e,options:n={}})=>{const[s,i]=v.useState([]),[a,o]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!0),h=async()=>{d(!0);const p=n.type==="discount"?"/admin-api/building-discount/all":"/admin-api/building-cashback/all",{data:{result:g}}=await Me(p,{building_id:n.id});i(g.map(m=>({...m,item_type:n.type}))),d(!1)};v.useEffect(()=>{t&&h()},[t]);const f=async p=>{const g=n.type==="discount"?"/admin-api/building-discount/delete":"/admin-api/building-cashback/delete";n.type==="discount"&&await Me(g,{discount_id:p,building_id:n.id}),n.type==="cashback"&&await Me(g,{cashback_id:p,building_id:n.id}),h()};return r.jsxs(r.Fragment,{children:[r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:!!t,set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1100px"},closeBtn:!1,ModalHeader:()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:n.type==="discount"?"Скидки на квартиры":"Кешбэк на квартиры"})}),ModalFooter:()=>r.jsx(r.Fragment,{children:!s.length&&!u&&r.jsx("div",{className:"px-14 py-6 grid grid-cols-[1fr_max-content] gap-2",children:r.jsxs(_e,{onClick:()=>o(!0),className:"w-full",children:["Добавить ",n.type==="discount"?"скидку":"кешбэк"]})})}),children:[u&&r.jsx("div",{className:"text-primary400",children:"Загрузка..."}),!u&&r.jsxs(r.Fragment,{children:[s.length===0&&r.jsxs("span",{className:"text-primary400",children:["Вы пока не добавили ни ",n.type==="discount"?"одной скидки":"одного кешбэка"]}),s.length>0&&r.jsx("div",{className:"grid grid-cols-3 gap-3",children:s.map(p=>{var g;return r.jsxs("article",{className:"rounded-lg bg-primary700 h-[150px] p-6 group relative",children:[r.jsx("div",{className:"CardLinkElement",onClick:()=>c(p.id)}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("p",{children:["Тип: ",p.item_type==="discount"?"Скидка":"Кешбэк"]}),r.jsxs("p",{children:["Количество квартир: ",pt(((g=p.apartments)==null?void 0:g.length)||0)]})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("p",{children:["Начало: ",ct(p.start_date).format("DD.MM.YYYY")]}),r.jsxs("p",{children:["Конец: ",ct(p.end_date).format("DD.MM.YYYY")]})]})]}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-4 right-14 group-hover:opacity-100 group-hover:visible`,onClick:()=>c(p.id),children:r.jsx(Ns,{width:15,height:15,className:"stroke-blue stroke-[1.5px]"})}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-4 right-4 group-hover:opacity-100 group-hover:visible`,onClick:()=>f(p.id),children:r.jsx(un,{width:15,height:15,className:"fill-red"})})]},p.id)})})]})]})}),r.jsx(Ze,{condition:a,children:r.jsx(H8,{condition:a,set:o,options:n,fetchData:h})}),r.jsx(Ze,{condition:l,children:r.jsx(H8,{condition:l,set:c,options:{...n,is_edit:!0},fetchData:h})})]})},I5e=({data:t=null,frames:e=[],tags:n=[],advantages:s=[],userRole:i,children:a})=>{const{apartmentsLastUpdate:o}=v.useContext($o),l=Mn(),[c,u]=v.useState({}),[d,h]=v.useState({}),[f,p]=v.useState(!0),[g,m]=v.useState(!1);return r.jsx(dd.Provider,{value:{layouts:d,setLayouts:h,filtersResult:c,setFiltersResult:u,layoutsIsLoading:f,setLayoutsIsLoading:p,frames:e,tags:n,advantages:s,userRole:i},children:r.jsxs("div",{className:"white-block md1:px-0",children:[i===pn.name?r.jsxs("div",{className:"flex justify-between gap-2 md1:mx-4",children:[r.jsx("h2",{className:"title-2",children:"Квартиры комплекса"}),r.jsxs("div",{className:"flex gap-2",children:[t&&r.jsx(k5e,{data:t,frames:e}),r.jsx(_e,{size:"Small",onClick:()=>m("discount"),children:"Скидка"}),r.jsx(_e,{size:"Small",onClick:()=>m("cashback"),children:"Кешбэк"}),r.jsx(Ke,{to:`${ht.apartment.create}${l.id}`,target:"_blank",children:r.jsx(_e,{Selector:"div",size:"Small",children:"Добавить квартиру"})})]})]}):r.jsx("h2",{className:"title-2 md1:mx-4",children:"Квартиры от застройщика"}),i!==pn.name&&r.jsxs("p",{className:"mt-2 text-primary400 text-small md1:mx-4",children:["Информация о квартирах обновлена ",o]}),r.jsx(E5e,{}),r.jsx(h5e,{}),r.jsx(P5e,{condition:g,set:m,options:{type:g,frames:e,id:l.id,is_edit:!1}}),a]})})},wW=v.memo(I5e),M5e="_ProgressCardRoot_15tx1_1",O5e="_ProgressCardControls_15tx1_24",R5e="_ProgressCardImage_15tx1_30",L5e="_ProgressCardBadges_15tx1_38",Gg={ProgressCardRoot:M5e,ProgressCardControls:O5e,ProgressCardImage:R5e,ProgressCardBadges:L5e},B5e=({data:t,isAdmin:e,deleteCard:n,onClick:s=()=>{},editCard:i})=>{const a=ue(rt);return r.jsxs("article",{style:{height:`${a?400:420}px`},className:Gg.ProgressCardRoot,children:[r.jsx("div",{className:"CardLinkElement z-10",onClick:s}),r.jsxs("div",{className:Gg.ProgressCardBadges,children:[t.images.length>0&&r.jsxs(An,{size:"small",color:"white",children:[t.images.length," фото"]}),t.ytVideo&&r.jsx(An,{size:"small",color:"white",children:"видео"})]}),e&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>i(t.id),title:"Редактировать",type:"button",className:`${wn.DragDropImageIcon} top-4 right-14 !z-20 ${Gg.ProgressCardControls}`,children:r.jsx(Ns,{width:15,height:15,className:"stroke-blue stroke-[1.5px]"})}),r.jsx("button",{title:"Удалить",type:"button",className:`${wn.DragDropImageIcon} top-4 right-4 !z-20 ${Gg.ProgressCardControls}`,onClick:()=>n(t.id),children:r.jsx(un,{width:15,height:15,className:"fill-red"})})]}),r.jsx("img",{className:Gg.ProgressCardImage,src:qt(t.images?t.images[0]:"")})]})},CW=({addFiles:t,multiple:e=!0,className:n=""})=>{const s=l=>{t(l)},{getRootProps:i,getInputProps:a,isDragActive:o}=Fy({onDrop:s,multiple:e,accept:{"video/*":[]}});return r.jsxs("div",{...i(),className:`${_p.FileDropZoneRoot} ${o?_p.FileDropZoneRootActive:""} ${n}`,children:[r.jsx("input",{...a()}),r.jsx(_e,{Selector:"div",children:"Выберите видео"}),r.jsx("div",{className:"text-primary400 ml-4",children:"или перетащите в эту область"}),o&&r.jsx("div",{className:_p.FileDropZoneOverlay,children:"Отпустите изображения"})]})},a2=({conditionModal:t,setModal:e,options:n,sending:s=()=>{},sendingError:i=()=>{}})=>{const[a,o]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!1),h=f=>{const p={name:f[0].file.name.replace(/\.[^/.]+$/,""),video:f,building_id:n.building_id,is_short:n.is_short,timeCodes:[],cards:[],interactiveEl:{},tags:[],show_on_homepage:!1,author:"",image:null},g=new FormData;p.video=ts(p.video,"video","video"),ss(p.video,g,"video","video"),p.video=ns(p.video,"video","video"),p.video=p.video[0],g.append("data",JSON.stringify(p)),Me("/api/upload/video",g,{"Content-Type":"multipart/form-data"}).then(m=>{n.onSubmitForm({...m.data,is_short:n.is_short}).then(_=>{o(!1),e(!1),c(m.data)})}).catch(m=>{d(!0),o(!1),e(!1)})};return r.jsxs(r.Fragment,{children:[r.jsx(Ze,{condition:t,children:r.jsx(gt,{set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:t,style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1070px"},closeBtn:!1,ModalHeader:()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:n.is_short?"Создать Клип":"Создать видео"})}),ModalChildren:a?()=>r.jsx(d4,{className:"absolute inset-0 z-[100] flex flex-col items-center justify-center",classNameSpinner:"!w-[60px] !h-[60px]",children:r.jsx("span",{className:"mt-8 text-bigSmall",children:"Видео загружается..."})}):null,children:r.jsx(CW,{multiple:!1,addFiles:f=>{o(!0),h(ON([...f]))}})})}),r.jsx(Ze,{condition:l,children:r.jsx(sm,{conditionModal:!!l,setModal:c,options:{...n,currentVideoData:l},sending:s,sendingError:i})}),u&&on.createPortal(r.jsxs(yi,{show:u,set:d,onClose:()=>d(!1),classListRoot:"min-w-[300px] !pt-6",children:[r.jsx("p",{className:"font-medium text-defaultMax",children:"Произошла ошибка."}),r.jsx("p",{className:"mt-0.5",children:"Повторите попытку позже или напишите нам"})]}),document.getElementById("overlay-wrapper"))]})},td=async t=>{try{return(t.length?await Ue("/api/video-url",{url:t}).then(n=>n.data):[]).filter(n=>n&&!Ye(n))}catch(e){console.log(e)}},SW=({conditionModal:t,setModal:e,options:n,type:s="create",values:i={},sending:a=()=>{}})=>{const[o,l]=v.useState(!1),[c,u]=v.useState(!1),[d,h]=v.useState(s),{handleSubmit:f,control:p,formState:{errors:g}}=en(),m={id:i.id,liter:n.frames.find(P=>P.value===i.liter)||null,year:rj.find(P=>P.value===i.year)||null,quarter:G1.find(P=>P.value===i.quarter)||null,description:i.description||""},[_,y]=v.useState([]),[x,b]=v.useState(i.ytVideo||""),[w,C]=v.useState(null);v.useEffect(()=>{x&&td([x]).then(P=>{C(P[0])})},[x]),v.useEffect(()=>{var P;d==="edit"&&y(((P=i==null?void 0:i.images)==null?void 0:P.map((I,B)=>({id:B+1,image:I})))||[])},[d]);const j=async(P,I={video:null,modalCondition:!1})=>{var G,V,J;const B={year:(G=P.year)==null?void 0:G.value,quarter:(V=P.quarter)==null?void 0:V.value,liter:(J=P.liter)==null?void 0:J.value,photos:_,description:P.descr,ytVideo:I.video!==void 0?I.video:x||"",author_id:P.author?P.author.value:null},U=new FormData;B.photos=ts(B.photos),ss(B.photos,U),B.photos=ns(B.photos),U.append("data",JSON.stringify(B));const z=d==="create"?`/admin-api/building/${n.dataObject.id}/history/create`:d==="edit"?`/admin-api/building/${n.dataObject.id}/history/${m.id}/update`:"";await Me(z,U,{"Content-Type":"multipart/form-data"}).then(Q=>{a().then(()=>{I.modalCondition||e(!1)})}).catch(Q=>{})},E=P=>{const I=cr([..._,...P]);y(I)},T=(P,I)=>{const B=_.filter(U=>U.id!==I).map((U,z)=>({...U,id:z+1}));y(B)},N=[{name:"Фото",body:r.jsxs(r.Fragment,{children:[r.jsx(Bo,{items:_,deleteItem:T}),r.jsx(ta,{addFiles:P=>E(P),className:`${_.length>0?"mt-6":""} mb-4`}),r.jsx(bi,{control:p,maxLength:3e3,defaultValue:m.description,name:"descr",placeholder:"Описание"})]})},{name:"Видео",body:r.jsxs("div",{children:[x&&w?r.jsx("div",{className:"grid grid-cols-4 gap-4",children:r.jsx($i,{data:w,controlsAdmin:!0,deleteCard:P=>{Me(`/admin-api/building/${n.dataObject.id}/unlink-video/${P.id}`).then(I=>{b(""),n.onUpdate({videos:n.dataObject.videos.filter(B=>B!==P.url)}),f(j)({video:"",modalCondition:!0})})},edit:P=>u(P)})}):r.jsx("span",{className:"text-primary400",children:"Вы пока не добавили видео"}),!(x&&w)&&r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>{l(!0)},children:"Создать Видео"}),r.jsx(a2,{conditionModal:o,setModal:l,options:{onSubmitForm:async P=>{P.url&&(h("edit"),b(P.url),f(j)({video:P.url,modalCondition:!0}))},frames:n.frames,tags:n.tags,specialists:n.specialists,building_id:n.dataObject.id,developer:n.dataObject.developer,is_short:!1},sending:async()=>{h("edit"),f(j)({modalCondition:!0})}}),r.jsx(Ze,{condition:c,children:r.jsx(sm,{conditionModal:!!c,setModal:u,options:{onSubmitForm:async P=>{P.url&&(h("edit"),b(P.url),f(j)({video:P.url,modalCondition:!0}))},frames:n.frames,tags:n.tags,specialists:n.specialists,building_id:n.dataObject.id,developer:n.dataObject.developer,is_short:!1,currentVideoData:{url:c.video_url}},sending:async()=>{h("edit"),await f(j)({modalCondition:!0}),await a(),td([x]).then(P=>{C(P[0])})}})})]})}];return r.jsx(gt,{set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:t,style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1070px"},closeBtn:!1,ModalHeader:()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:d==="create"?"Ход строительства":"Редактировать ход строительства"})}),ModalFooter:()=>r.jsx("div",{className:"px-14 py-6",children:r.jsx(_e,{onClick:f(j),className:"w-full",children:"Сохранить"})}),children:r.jsxs("form",{children:[r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[r.jsx(fn,{control:p,nameLabel:"Корпус",options:n.frames,name:"liter",requiredValue:!0,errors:g,defaultOption:!0,defaultValue:m.liter||n.frames[0]}),r.jsx(fn,{control:p,nameLabel:"Год",options:rj,name:"year",requiredValue:!0,errors:g,defaultValue:m.year||rj[0]}),r.jsx(fn,{control:p,nameLabel:"Квартал",options:G1,name:"quarter",requiredValue:!0,errors:g,defaultValue:m.quarter||G1[0]})]}),r.jsx("div",{className:"mb-4",children:r.jsx(fn,{control:p,nameLabel:"Автор",defaultOption:!0,placeholderName:n.dataObject.developer?`${n.dataObject.developer.pos} ${n.dataObject.developer.name}`:"Не выбрано",options:n.specialists,name:"author",defaultValue:n.specialists.find(P=>{var I;return P.value===((I=m.author)==null?void 0:I.id)||P.value===n.authorDefault}),disabled:n.authorDefault})}),r.jsx("div",{children:r.jsx(Uo,{data:N})})]})})},jW=({data:t,isAdmin:e=!1,desktopLength:n=3,sidebar:s,sending:i=()=>{},options:a})=>{const[o,l]=v.useState(!1),c=ue(rt),{viewportHeight:u}=ue(tw),[d,h]=v.useState(!1),[f,p]=v.useState({frame:{},year:{},quarter:{}}),g=async y=>{const x=t.find(b=>b.id===y);if(x.ytVideo){const b=await td([x.ytVideo]);b[0]&&await Me(`/admin-api/building/${a.dataObject.id}/unlink-video/${b[0].id}`)}await Me(`/admin-api/building/${a.dataObject.id}/history/${y}/delete`).then(b=>{i()})},[m,_]=v.useState(t);return v.useEffect(()=>{_(t),p({frame:{},year:{},quarter:{}})},[t]),v.useEffect(()=>{(async()=>{const x=[];let b=t.map(w=>({url:w.ytVideo,id:w.id})).filter(w=>w.url);return await td(b.map(w=>w.url)).then(w=>{w.forEach(C=>{const j=t.find(E=>E.ytVideo===C.video_url);x.push({...j,video:C})})}),x})().then(x=>{_(b=>b.map(w=>w.ytVideo?x.find(C=>C.video.video_url===w.ytVideo):w))})},[m==null?void 0:m.length]),v.useEffect(()=>{_(y=>y.map(x=>(x.isHidden=!Ye(f.frame)&&x.liter!==f.frame.value||!Ye(f.quarter)&&x.quarter!==f.quarter.value||!Ye(f.year)&&x.year!==f.year.value,x)))},[JSON.stringify(f)]),r.jsxs(r.Fragment,{children:[t.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"grid grid-cols-[repeat(3,minmax(240px,1fr))] gap-2 mb-6",children:r.jsx(vi,{options:G1,nameLabel:"Квартал",onChange:y=>p(x=>({...x,quarter:y})),value:f.quarter,defaultOption:!0})}),m.filter(y=>!y.isHidden).length?r.jsxs(Xs,{modules:[xi],slidesPerView:1,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:16,breakpoints:{799:{slidesPerView:2.5,spaceBetween:24},1222:{slidesPerView:n,spaceBetween:24}},children:[m.filter(y=>!y.isHidden).map((y,x)=>r.jsx(Tn,{children:r.jsx(B5e,{data:y,isAdmin:e,deleteCard:g,editCard:()=>l(y),onClick:()=>h(y)})},x)),r.jsx(ho,{centery:"true",className:"slider-btn-prev",disabled:!0}),r.jsx(fo,{centery:"true",className:"slider-btn-next"})]}):r.jsx(Or,{block:!1})]}),r.jsx(Ze,{condition:d,children:r.jsx(gt,{condition:d!==!1,set:h,options:{overlayClassNames:"_full",modalContentClassNames:"md1:!px-0"},children:r.jsx(YA,{sidebar:s,data:d&&d.images.length?[d.images.length?{title:"Фото",id:0,type:"images",images:d.images}:null,d.video?{title:"Видео",id:1,type:"videos",videos:[d.video]}:null].filter(y=>y):[],videosData:d&&d.video?[d.video]:[],mode:"modal",setIsOpenModal:h,galleryHeight:c?(u>=900?900:u)-117-32:550})})}),r.jsx(Ze,{condition:o,children:r.jsx(SW,{conditionModal:o!==!1,setModal:l,options:{frames:a.frames,dataObject:a.dataObject,specialists:a.specialists,authorDefault:a.authorDefault,tags:a.tags,onUpdate:async y=>{await a.onUpdate(y||{})}},type:"edit",values:o,sending:i})})]})},F5e=({data:t,options:e,sidebar:n})=>r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Ход строительства"}),r.jsx(jW,{data:t,options:e,sidebar:n})]}),$5e="_GalleryThumbRoot_1vxca_1",U5e="_GalleryThumbs_1vxca_21",V5e="_GalleryThumbOverlay_1vxca_28",z5e="_GalleryThumbOverlayActive_1vxca_53",H5e="_GalleryThumbMainImage_1vxca_60",q5e="_GalleryThumbPrev_1vxca_72",W5e="_GalleryThumbNext_1vxca_84",G5e={GalleryThumbRoot:$5e,GalleryThumbs:U5e,GalleryThumbOverlay:V5e,GalleryThumbOverlayActive:z5e,GalleryThumbMainImage:H5e,GalleryThumbPrev:q5e,GalleryThumbNext:W5e},Y5e=({sidebar:t,items:e=[],videosGallery:n=[],children:s})=>{const[i,a]=v.useState(!0),[o,l]=v.useState(!1),[c,u]=v.useState([]),[d,h]=v.useState(e==null?void 0:e.map((y,x)=>({title:y.title,images:y.images,id:x,type:"images"})));v.useEffect(()=>{n.length&&td(n).then(y=>{u(y),h(x=>[{title:"Видео",videos:y,id:99,type:"videos"},...x])})},[]);const[f,p]=v.useState(0),g=v.useRef(null),m=v.useRef(null),_=(y=null)=>{const x=g.current.swiper,b=y?x.slides[y]:x.slides[x.activeIndex];p(+(b==null?void 0:b.dataset.galleryGroupIndex)||1),n2(x,"auto",a)};return v.useEffect(()=>{m.current&&m.current.swiper.slideTo(f)},[f]),r.jsx(r.Fragment,{children:!!d&&r.jsxs("div",{className:G5e.GalleryThumbRoot,children:[r.jsx(GA,{dataGallery:d,videosData:c,swiperRef:g,onSlideChange:_,visiblePagination:i,setVisiblePagination:a,sidebar:t,isOpenModal:o,setIsOpenModal:l,galleryVariant:"top"}),s]})})},X5e=({data:t,sidebar:e,videosData:n=[]})=>{const[s,i]=v.useState(!1),[a,o]=v.useState(t.map((l,c)=>({...l,id:c,type:"images"})));return v.useEffect(()=>{n.length&&td(n).then(l=>{o(c=>[...c,{title:"Видео",videos:l,type:"videos",id:99}])})},[]),r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Отделка квартир"}),r.jsx(YA,{data:a,videosData:n,sidebar:e,isOpenModal:s,setIsOpenModal:i})]})},K5e=({data:t,sidebar:e,videosData:n=[]})=>{const[s,i]=v.useState(!1),[a,o]=v.useState(t.map((l,c)=>({...l,id:c,type:"images"})));return v.useEffect(()=>{n.length&&td(n).then(l=>{o(c=>[...c,{title:"Видео",videos:l,type:"videos",id:99}])})},[]),r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Экология и парки"}),r.jsx(YA,{data:a,videosData:n,sidebar:e,isOpenModal:s,setIsOpenModal:i})]})},Q5e="_HeaderFixedNavRoot_1xurj_1",Z5e="_HeaderFixedNavRootActive_1xurj_16",J5e="_HeaderFixedNavLink_1xurj_20",ePe="_HeaderFixedNavLinkActive_1xurj_41",c1={HeaderFixedNavRoot:Q5e,HeaderFixedNavRootActive:Z5e,HeaderFixedNavLink:J5e,HeaderFixedNavLinkActive:ePe},tPe=[{id:"section-apartments-id",label:"Квартиры"},{id:"section-promo-id",label:"Скидки"},{id:"section-video-id",label:"Видео"},{id:"section-descr-id",label:"Описание"},{id:"section-apartRenov-id",label:"Отделка квартир"},{id:"section-location-id",label:"Расположение"},{id:"section-ecologyParks-id",label:"Экология и парки"},{id:"section-constPrgs-id",label:"Ход строительства"}],nPe=()=>tPe.filter(t=>document.querySelector(`#${t.id}`)),sPe=()=>{const t=Xr(),[e,n]=v.useState([]),[s,i]=v.useState((window.pageYOffset||document.documentElement.scrollTop)>100);return v.useLayoutEffect(()=>{n(nPe())},[]),v.useEffect(()=>{if(t.hash){const a=document.querySelector(t.hash);a&&aD.scrollTo(a.offsetTop+-64,{duration:500,smooth:!0})}},[t]),v.useEffect(()=>{const a=()=>{const o=window.pageYOffset||document.documentElement.scrollTop;i(o>100)};return window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a)}},[]),r.jsx(r.Fragment,{children:e.length>0&&r.jsx("header",{className:`${c1.HeaderFixedNavRoot} ${s?c1.HeaderFixedNavRootActive:""}`,children:r.jsx("ul",{className:"container flex items-center gap-8 h-full",children:e.map(a=>r.jsx("li",{children:r.jsx(iD,{to:a.id,activeClass:c1.HeaderFixedNavLinkActive,className:c1.HeaderFixedNavLink,spy:!0,smooth:!0,offset:-64,duration:500,children:a.label})},a.id))})})})},Gj=({setIsOpenRecordView:t})=>{const{cashback:e,present:n,tags:s,minPrice:i,minPricePerMeter:a,title:o,address:l,metro:c,max_price:u,stickers:d,goToChat:h,userRole:f}=v.useContext($o);return r.jsxs("div",{children:[!!(e||n||d.length)&&r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e&&u?r.jsx(Sa,{cashback:u/100*e}):"",n&&r.jsx(pd,{present:n}),!!d.length&&d.map(p=>r.jsx(Ah,{top:p.name},p.id))]}),s.length>0&&r.jsx("div",{className:"mt-2 flex gap-2 flex-wrap",children:s.map((p,g)=>r.jsx(An,{size:"small",color:"default",children:p.name},g))}),r.jsx("h3",{className:"mt-4 mb-2 title-4",children:o}),r.jsx("p",{children:l}),r.jsx(Em,{data:c,visibleItems:99,className:"mt-2"}),r.jsxs("div",{className:"flex items-center gap-3 my-4",children:[r.jsxs("h3",{className:"title-2",children:["от ",pt(i||0)," ₽"]}),r.jsxs("div",{className:"text-primary500",children:[pt(a||0)," ₽/м²"]})]}),f===sn.name&&r.jsxs("div",{className:"mt-5 flex flex-col gap-2 w-full",children:[r.jsx(_e,{onClick:h,children:"Задать вопрос в чат"}),r.jsx(_e,{variant:"secondary",onClick:()=>t(!0),children:r.jsx(_m,{texts:["Записаться на просмотр","Записаться на онлайн-показ"],intervalTime:3e3})})]})]})},rPe="_StatisticsBlockRoot_dm0a9_1",iPe="_StatisticsBlockWrapper_dm0a9_6",aPe="_StatisticsBlockItems_dm0a9_24",oPe="_StatisticsColRoot_dm0a9_30",lPe="_StatisticsColRootActive_dm0a9_42",cPe="_StatisticsColBody_dm0a9_46",uPe="_StatisticsColDate_dm0a9_69",xh={StatisticsBlockRoot:rPe,StatisticsBlockWrapper:iPe,StatisticsBlockItems:aPe,StatisticsColRoot:oPe,StatisticsColRootActive:lPe,StatisticsColBody:cPe,StatisticsColDate:uPe},dPe=({children:t,height:e=200})=>r.jsx("div",{className:xh.StatisticsBlockRoot,children:r.jsx("div",{className:xh.StatisticsBlockWrapper,style:{height:`${e}px`},children:r.jsx("div",{className:xh.StatisticsBlockItems,children:t})})}),hPe=({data:t=[],maxHeight:e="50"})=>{if(t.length===0)return;const n=t.reduce((s,i)=>i.value>s?i.value:s,t[0].value);return t.map((s,i)=>{const a=`${s.value===n?e:`${s.value/n*100/(100/e)}`}`,[o,l]=v.useState(null),[c,u]=v.useState(null),[d,h]=v.useState(!1),{styles:f,attributes:p}=Hk(o,c,{placement:"auto-start",modifiers:[{name:"offset",options:{offset:[0,5]}}]});return r.jsxs("div",{ref:l,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:`${xh.StatisticsColRoot} ${d?xh.StatisticsColRootActive:""}`,style:{"--height-body":a<=10?"10%":`${a}%`},children:[d&&on.createPortal(r.jsx("div",{className:"z-10",ref:u,style:f.popper,...p.popper,children:s.tooltipBody}),document.getElementById("overlay-wrapper")),s.body]},i)})},fPe=({value:t=0,date:e})=>r.jsxs(r.Fragment,{children:[r.jsx("div",{className:xh.StatisticsColBody,"data-value":t}),r.jsx("div",{className:xh.StatisticsColDate,children:ct(e).format("DD MMM")})]}),pPe="_header_1b33w_1",mPe="_headerSticky_1b33w_16",q8={header:pPe,headerSticky:mPe},rm=({children:t,className:e="",sticky:n=!1})=>r.jsx("div",{className:He(q8.header,e,n&&q8.headerSticky),children:t}),im=({children:t,className:e=""})=>r.jsx("div",{className:e,children:t}),Jy=({className:t,children:e})=>r.jsx("div",{className:He("px-6 select-none rounded-xl bg-white shadow grid items-center gap-5 justify-start",t),children:e}),W8=[{value:"building_visited",label:"Просмотры ЖК"},{value:"apartment_visited",label:"Просмотры объектов"},{value:"likes",label:"Добавили в избранное"},{value:"added_to_compare",label:"Добавили в сравнение"},{value:"promo_visited",label:"Просмотр скидки, рассчёты и подарков"}],gPe=({condition:t,set:e,defaultType:n="building_visited",id:s})=>{const[i,a]=v.useState(!0),[o,l]=v.useState({items:[],pages:1,total:0}),[c,u]=v.useState(W8.find(p=>p.value===(n===!0?"building_visited":n))),[d,h]=v.useState(1),f=async(p=1)=>{c&&(a(!0),Ue(`/seller-api/building/${s}/stats/detailed`,{type:c.value,limit:8,page:p}).then(g=>{l(g.data),a(!1)}))};return v.useEffect(()=>{f()},[c]),r.jsxs(gt,{options:{overlayClassNames:"_full",modalContentClassNames:"!p-0 !pt-12 flex flex-col"},set:e,condition:t,children:[r.jsx("div",{className:"container",children:r.jsx("h2",{className:"title-2 !text-left px-14 mb-6",children:"Подробная статистика по посетителям"})}),r.jsx("form",{className:"bg-pageColor flex-grow rounded-xl px-0 py-4",children:r.jsxs("div",{className:"container",children:[r.jsx("div",{className:"mb-6 max-w-[400px]",children:r.jsx(vi,{nameLabel:"Поиск по",options:W8,value:c,onChange:p=>u(p)})}),r.jsxs(rm,{className:"grid-cols-[215px_200px_90px_120px_90px_90px_90px_90px_1fr]",children:[r.jsx("span",{children:"Имя"}),r.jsx("span",{children:"Последняя активность"}),r.jsx("span",{children:"ЖК"}),r.jsx("span",{children:"Объектов ЖК"}),r.jsx("span",{children:"Избранное"}),r.jsx("span",{children:"Сравнение"}),r.jsx("span",{children:"На просмотр"}),r.jsx("span",{children:"Звонок"})]}),r.jsx(im,{className:"mt-3 flex flex-col gap-3",children:i?[...new Array(5)].map((p,g)=>r.jsxs(Jy,{className:"grid-cols-[350px_300px_1fr_max-content] h-[96px]",children:[r.jsxs("div",{className:"flex gap-3 items-center",children:[r.jsx(Fe,{className:"w-12 h-12 rounded-full"}),r.jsx(Fe,{className:"w-[150px] h-6 rounded-lg"})]}),r.jsx(Fe,{className:"w-3/6 h-10 rounded-lg"}),r.jsx(Fe,{className:"w-3/6 h-10 rounded-lg"}),r.jsx(Fe,{className:"w-[100px] h-10 rounded-lg"})]},g)):r.jsxs(r.Fragment,{children:[o.items.map((p,g)=>r.jsxs(R0e,{data:p,children:[r.jsxs("div",{title:"Просмотров ЖК",className:"z-10 flex gap-2",children:[r.jsx(ci,{className:"fill-blue",width:16,height:16}),Ef(p.building.building_visited)]}),r.jsxs("div",{title:"Просмотр объектов ЖК",className:"z-10 flex gap-2",children:[r.jsx(ci,{className:"fill-blue",width:16,height:16}),Ef(p.apartments.apartment_visited)]}),r.jsxs("div",{title:"Добавили в избранное",className:"z-10 flex gap-2",children:[r.jsx(ku,{className:"fill-red",width:14,height:14}),p.added_to_favorites,Ef(p.building.likes)]}),r.jsxs("div",{title:"Добавили в сравнение",className:"z-10 flex gap-2",children:[r.jsx(ov,{className:"fill-green",width:16,height:16}),Ef(p.building.added_to_compare)]}),r.jsxs("div",{title:"Записалось на просмотр",className:"z-10 flex gap-2",children:[r.jsx(ci,{className:"fill-dark",width:16,height:16}),Ef(p.building.application,p.apartments.application)]}),r.jsxs("div",{title:"Заказали звонок",className:"z-10 flex gap-2",children:[r.jsx(ci,{className:"fill-dark",width:16,height:16}),Ef(p.building.consultation,p.apartments.consultation)]})]},g)),r.jsx(zo,{className:"mt-8",currentPage:d,setCurrentPage:p=>{h(p),f(p)},total:o.pages})]})})]})})]})};function vPe(t){const e=[],n=new Set;for(const s in t.building)n.add(s);for(const s in t.apartments)n.add(s);return n.forEach(s=>{const i=t.building[s]||{},a=t.apartments[s]||{},o={date:s,building_compare:i.added_to_compare||0,building_visited:i.building_visited||0,building_application:i.application||0,building_consultation:i.consultation||0,building_likes:i.likes||0,building_replied_to_special_offer:i.replied_to_special_offer||0,apartment_compare:a.added_to_compare||0,apartment_visited:a.apartment_visited||0,apartment_application:a.application||0,apartment_consultation:a.consultation||0,apartment_likes:a.likes||0,apartment_replied_to_special_offer:a.replied_to_special_offer||0};e.push(o)}),e.sort((s,i)=>new Date(s.date)-new Date(i.date))}function yPe(t){const{building:e,apartments:n}=t;return{building_compare:e.added_to_compare||0,building_visited:e.building_visited||0,building_application:e.application||0,building_consultation:e.consultation||0,building_likes:e.likes||0,building_replied_to_special_offer:e.replied_to_special_offer||0,apartment_compare:n.added_to_compare||0,apartment_visited:n.apartment_visited||0,apartment_application:n.application||0,apartment_consultation:n.consultation||0,apartment_likes:n.likes||0,apartment_replied_to_special_offer:n.replied_to_special_offer||0}}const Od=({children:t,onClick:e=()=>{}})=>r.jsx("li",{className:"text-small grid grid-cols-[15px_30px_1fr] gap-3 group cursor-pointer",onClick:e,children:t}),xPe=({buildingData:t})=>{const[e,n]=v.useState(!1),[s,i]=v.useState(!1),[a,o]=v.useState(null),[l,c]=v.useState(null);return v.useEffect(()=>{Ue("/seller-api/expanded-metrics",{type:"total_metrics",building_id:t.id}).then(u=>{o(yPe(u.data))}),Ue("/seller-api/expanded-metrics",{type:"dated_metrics",building_id:t.id}).then(u=>{c(vPe(u.data))})},[]),r.jsxs("section",{className:"white-block mb-3 grid grid-cols-[1fr_27%] gap-10",children:[r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Статистика просмотров"}),l?r.jsxs(r.Fragment,{children:[r.jsx(dPe,{height:250,children:r.jsx(hPe,{maxHeight:"65",data:l.map((u,d)=>({value:u.building_visited||0,tooltipBody:r.jsxs("div",{className:"white-block-small min-w-[300px]",children:[r.jsx("p",{className:"font-medium text-left mb-3",children:ct(u.date).format("DD.MM.YYYY")}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{className:"text-left",children:"Просмотров карточки ЖК"}),r.jsx("span",{className:"!font-medium",children:u.building_visited})]}),r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{className:"text-left",children:"Просмотров объектов ЖК"}),r.jsx("span",{className:"!font-medium",children:u.apartment_visited})]}),r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{className:"text-left",children:"Добавили в избранное"}),r.jsx("span",{className:"!font-medium",children:u.building_likes+u.apartment_likes})]}),r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{className:"text-left",children:"Добавили в сравнение"}),r.jsx("span",{className:"!font-medium",children:u.building_compare+u.apartment_compare})]}),r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{className:"text-left",children:"Записалось на просмотр"}),r.jsx("span",{className:"!font-medium",children:u.building_application+u.apartment_application})]}),r.jsxs(vn,{justifyBetween:!0,children:[r.jsx("span",{className:"text-left",children:"Заказали звонок"}),r.jsx("span",{className:"!font-medium",children:u.building_consultation+u.apartment_consultation})]}),r.jsxs(vn,{justifyBetween:!0,children:[r.jsxs("span",{className:"text-left",children:["Откликнулись на рассылку ",r.jsx("br",{})," спецпредложений"]}),r.jsx("span",{className:"!font-medium",children:u.building_replied_to_special_offer+u.apartment_replied_to_special_offer})]})]})]}),body:r.jsx(fPe,{value:u.building_visited,date:u.date},d)}))})}),r.jsx(_e,{variant:"secondary",className:"mt-6 w-full",onClick:()=>n(!0),children:"Рассылка спецпредложений"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-end gap-4 min-h-[250px]",children:[r.jsx(Fe,{className:"w-[36px] min-h-[162.5px] rounded-lg"}),r.jsx(Fe,{className:"w-[36px] min-h-[120px] rounded-lg"}),r.jsx(Fe,{className:"w-[36px] min-h-[150px] rounded-lg"}),r.jsx(Fe,{className:"w-[36px] min-h-[68px] rounded-lg"}),r.jsx(Fe,{className:"w-[36px] min-h-[130px] rounded-lg"}),r.jsx(Fe,{className:"w-[36px] min-h-[130px] rounded-lg"}),r.jsx(Fe,{className:"w-[36px] min-h-[130px] rounded-lg"}),r.jsx(Fe,{className:"w-[36px] min-h-[120px] rounded-lg"}),r.jsx(Fe,{className:"w-[36px] min-h-[68px] rounded-lg"}),r.jsx(Fe,{className:"w-[36px] min-h-[150px] rounded-lg"})]}),r.jsx(Fe,{className:"h-[50px] min-w-[250px] mt-6 rounded-lg"})]})]}),r.jsx("div",{className:"flex flex-col",children:a?r.jsx(r.Fragment,{children:r.jsxs("div",{className:"bg-primary100 p-6 rounded-xl flex-grow mt-8 flex flex-col",children:[r.jsxs("h4",{className:"title-4 mb-4",children:["Объект размещён ",ct(t.creation_at||"","DD.MM.YYYY").format("D MMMM YYYY г.")]}),r.jsxs("ul",{className:"flex flex-col gap-3",children:[r.jsxs(Od,{onClick:()=>i("building_visited"),children:[r.jsx(ci,{className:"fill-blue",width:15,height:15}),r.jsxs("span",{children:[a.building_visited," "]}),r.jsx("span",{className:"group-hover:text-blue",children:"Просмотров карточки ЖК"})]}),r.jsxs(Od,{onClick:()=>i("apartment_visited"),children:[r.jsx(ci,{className:"fill-blue",width:15,height:15}),r.jsxs("span",{children:[a.apartment_visited||0," "]}),r.jsx("span",{className:"group-hover:text-blue",children:"Просмотров объектов ЖК"})]}),r.jsxs(Od,{onClick:()=>i("likes"),children:[r.jsx(ku,{className:"fill-red",width:15,height:15}),r.jsxs("span",{children:[a.building_likes+a.apartment_likes," "]}),r.jsx("span",{className:"group-hover:text-blue",children:"Добавили в избранное"})]}),r.jsxs(Od,{onClick:()=>i("added_to_compare"),children:[r.jsx(ci,{className:"fill-dark",width:15,height:15}),r.jsxs("span",{children:[a.building_compare+a.apartment_compare," "]}),r.jsx("span",{className:"group-hover:text-blue",children:"Добавили в сравнение"})]}),r.jsxs(Od,{children:[r.jsx(ci,{className:"fill-dark",width:15,height:15}),r.jsx("span",{children:a.building_application+a.apartment_application}),r.jsx("span",{children:"Записалось на просмотр"})]}),r.jsxs(Od,{children:[r.jsx(ci,{className:"fill-dark",width:15,height:15}),r.jsx("span",{children:a.building_consultation+a.apartment_consultation}),r.jsx("span",{children:"Заказали звонок"})]}),r.jsxs(Od,{children:[r.jsx(ci,{className:"fill-dark",width:15,height:15}),r.jsx("span",{children:a.building_replied_to_special_offer+a.apartment_replied_to_special_offer}),r.jsx("span",{children:"Откликнулись на рассылку спецпредложений"})]})]}),r.jsx("div",{className:"mt-auto flex justify-center",children:r.jsx("button",{className:"blue-link",onClick:()=>i(!0),children:"Подробная статистика"})})]})}):r.jsxs("div",{className:"select-none h-full flex flex-col flex-grow",children:[r.jsx(Fe,{className:"w-full h-1/5 rounded-lg flex-grow"}),r.jsx(Fe,{className:"w-full h-[50px] mt-6 rounded-lg"})]})}),r.jsx(Ze,{condition:e,children:r.jsx(pq,{condition:e,set:n,id:t.id})}),r.jsx(Ze,{condition:s,children:r.jsx(gPe,{condition:s,set:i,id:t.id,defaultType:s})})]})},Lh=({variant:t="",className:e=""})=>r.jsxs("div",{className:`p-4 select-none rounded-xl ${t==="shadow"?"shadow bg-white":""} ${e}`,children:[r.jsx(Fe,{className:"rounded-xl h-[222px] w-full"}),r.jsxs("div",{className:"mt-4 flex justify-between gap-3",children:[r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx(Fe,{className:"w-full h-12 rounded-xl"}),r.jsx(Fe,{className:"w-full h-8 rounded-xl mt-4"}),r.jsx(Fe,{className:"w-full h-8 rounded-xl mt-2"})]}),r.jsxs("div",{className:"w-[32px]",children:[r.jsx(Fe,{className:"w-8 h-8 rounded-lg"}),r.jsx(Fe,{className:"w-8 h-8 rounded-lg mt-2"})]})]}),r.jsxs("div",{className:"mt-10 flex items-center gap-3 w-full",children:[r.jsx(Fe,{className:"w-10 h-10 rounded-full"}),r.jsx(Fe,{className:"w-4/5 h-10 rounded-lg"})]})]}),bPe=({id:t,currentCity:e,defaultPrice:n})=>{const{minPriceAllObjects:s,maxPriceAllObjects:i}=v.useContext($o),a=ue(Qs),{handleSubmit:o,control:l,setValue:c}=en(),[u,d]=v.useState([]),[h,f]=v.useState(!0),p=oy({control:l});v.useEffect(()=>{c("city",a.filter(_=>_.name!==e).map(_=>({value:_.id,label:_.name}))[0])},[a]);const g=_=>{f(!0),Ue(`/api/building/${t}/similar-in-city/${_.city}`,{price:_.price,percentage_offset:.05,limit:3,building_type_id:1}).then(y=>{f(!1),d(y.data)})},m=v.useCallback(es(_=>{g(_)},400),[]);if(v.useEffect(()=>{var _;m({city:(_=p.city)==null?void 0:_.value,price:p.price})},[p]),!!i&&s)return r.jsx(r.Fragment,{children:r.jsx("section",{className:"mt-3",children:r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Новостройки за этот бюджет в других городах"}),r.jsxs("form",{className:"grid grid-cols-3 md1:grid-cols-[repeat(2,minmax(300px,1fr))] gap-3 scrollbarPrimary md1:overflow-x-auto md1:overflow-y-hidden min-h-[50px]",children:[r.jsx(fn,{control:l,nameLabel:"Город",options:a==null?void 0:a.filter(_=>_.name!==e).map(_=>({value:_.id,label:_.name})),name:"city"}),!!(i&&s)&&r.jsx(jce,{name:"price",start:n,range:{min:s,"1%":[5e5,1e5],"50%":[Math.round(i/100*2/1e5)*1e5,5e5],max:i},step:1,control:l,beforeText:"Стоимость объекта"})]}),r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(320px,1fr))] gap-6 mt-4",children:h?[...new Array(3)].map((_,y)=>r.jsx(Lh,{},y)):r.jsx(r.Fragment,{children:u.length>0?u.map((_,y)=>v.createElement(Ll,{..._,key:y})):r.jsx("div",{className:"col-span-full",children:r.jsx(Or,{block:!1})})})})]})})})},_Pe=({data:t})=>r.jsxs(dn,{children:[r.jsx("title",{children:t.title||""}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),wPe=()=>r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("h1",{className:"title-2",children:"Не удалось загрузить данные"}),r.jsx("p",{className:"mt-2 text-primary400",children:"Попробуйте ещё раз"}),r.jsx(_e,{className:"mt-6",onClick:()=>{window.location.reload()},children:"Обновить"})]}),CPe=t=>{const e=Xr(),n=ue(Ot),s=ue(Ks),i=xm(n),a=Dt(),[o,l]=v.useState({}),[c,u]=v.useState(!1),[d,h]=v.useState([]),[f,p]=v.useState([]),[g,m]=v.useState([]),[_,y]=v.useState(!1),[x,b]=v.useState({}),[w,C]=v.useState({}),[j,E]=v.useState(0),[T,N]=v.useState(0),[P,I]=v.useState([]),[B,U]=v.useState(!0),z=async V=>{try{const{data:J}=await Ue(`/buyer-api/my-application/building/${V}`);b(J)}catch{}},G=async()=>{var V;if(s)if(d.length)y(!0);else{const J=await $s({building_id:+t,organization_id:(V=o.developer)==null?void 0:V.id,type:xt.CHAT});xr(J)}else a(Bs(!0))};return v.useEffect(()=>{(async()=>{U(!0);const J=await Ue(`/api/building/${t}`).then(Q=>{const Y=Q==null?void 0:Q.data;if(Y)return l({...Y,stock:Y.stock.filter(oe=>ct().isBefore(ct.unix(oe.end))),calculations:Y.calculations.filter(oe=>ct().isBefore(ct.unix(oe.end))),news:Y.news.filter(oe=>ct().isBefore(ct.unix(oe.end)))}),Y}).catch(Q=>{const Y=+Q.message.split(" ").pop();if(Y)return u(+Y),"error"});J!=="error"&&(await Ue("/api/tags",{type:"advantages",building_id:t}).then(Q=>{const Y=J.advantages.map(oe=>Q.data.find(me=>me.id===oe.id));I(Y)}),await Xh(t).then(Q=>h(Q)),Oh(t).then(Q=>p(Q)),Ue(`/api/building/${t}/history`).then(Q=>m(Q.data)),Ue("/api/price-extreme/min").then(Q=>E(Q.data)),Ue("/api/price-extreme/max").then(Q=>N(Q.data)),U(!1))})()},[]),v.useEffect(()=>{if(s&&i){z(t);try{Ue(`/buyer-api/my-personal-discount/building/${t}`).then(V=>{V.data&&Ue(`/api/special-condition/building/${t}`).then(J=>{C(V.data.map(Q=>{const Y=J.data.find(oe=>oe.id===Q.special_condition_id);return{id:Q.id,property_type:Q.discountable_type==="App\\Models\\Building"?"complex":"apartment",type:Q.is_absolute?"price":Q.is_special_condition?"special-condition":"prc",object_id:Q.discountable_id,valid_till:Q.valid_till,discount:Q.discount,author:Q.author,special_condition:Q.special_condition_id!==null?Y:null}}))})})}catch{}}},[n]),v.useEffect(()=>{if(!o||!e.hash)return;const V=document.querySelector(e.hash);V&&setTimeout(()=>{aD.scrollTo(V.offsetTop+-64,{duration:500,smooth:!0})},250)},[e,o]),{buildingData:o,minPriceAllObjects:j,maxPriceAllObjects:T,advantages:P,setIsOpenChoiceSpecialist:y,specialistsData:d,goToChat:G,buildingDataError:c,suggestions:x,getSuggestions:z,myDiscount:w,frames:f,constructItems:g,isOpenChoiceSpecialist:_,isLoading:B}},SPe=()=>{const t=ue(rt);return r.jsx("main",{className:`main ${t?"":"!pb-[110px]"}`,children:r.jsx("div",{className:"main-wrapper md1:pt-0",children:r.jsxs("div",{className:"container-desktop",children:[r.jsxs("div",{className:"bg-white shadow-primary rounded-[20px] p-[10px] h-[440px] mb-3",children:[r.jsx(Fe,{className:"mr-2 w-[calc(60%-8px)] h-full rounded-[20px]"}),r.jsx(Fe,{className:"w-[40%] h-full rounded-[20px]"})]}),r.jsxs(ea,{children:[r.jsxs("div",{className:"flex flex-col gap-3 white-block-small",children:[r.jsx(Fe,{className:"w-full rounded-xl h-[150px]"}),r.jsx(Fe,{className:"w-full rounded-xl h-[150px]"}),r.jsx(Fe,{className:"w-full rounded-xl h-[150px]"})]}),r.jsx("div",{className:"white-block-small",children:r.jsx(Fe,{className:"w-full min-h-[250px] h-full rounded-xl"})})]}),r.jsxs("div",{className:"mt-3 white-block-small",children:[r.jsx(Fe,{className:"w-2/5 rounded-xl h-[40px] mb-3"}),r.jsx(Fe,{className:"w-full rounded-xl h-[40px] mb-6"}),r.jsx(Fe,{className:"w-full rounded-xl h-[80px] mb-2"}),r.jsx(Fe,{className:"w-full rounded-xl h-[80px] mb-2"}),r.jsx(Fe,{className:"w-full rounded-xl h-[80px] mb-2"})]})]})})})},jPe=()=>{const{id:t}=Mn(),e=v.useRef(null),n=v.useRef(null),[s,i]=v.useState(!1),[a,o]=v.useState(!1),[l,c]=v.useState(!1),u=ue(rt),{isVisibleNotification:d,setIsVisibleNotification:h,onClose:f}=Q9("building_notif_status"),[p,g]=v.useState(""),m=ue(Ot),_=ue(Ks);v.useEffect(()=>{var V;Si(m)?g(pn.name):hd(m)&&((V=m.associated_objects)!=null&&V.includes(+t))?g(Wt.name):g(sn.name)},[m]);const{buildingData:y,minPriceAllObjects:x,maxPriceAllObjects:b,advantages:w,setIsOpenChoiceSpecialist:C,specialistsData:j,goToChat:E,buildingDataError:T,myDiscount:N,frames:P,constructItems:I,isOpenChoiceSpecialist:B,suggestions:U,getSuggestions:z,isLoading:G}=CPe(t);return r.jsxs(Vn,{helmet:r.jsx(_Pe,{data:y}),children:[r.jsx(zn,{}),G&&r.jsx(SPe,{}),!T&&!G&&r.jsxs($o.Provider,{value:{...y,minPriceAllObjects:x,maxPriceAllObjects:b,advantages:w,setIsOpenChoiceSpecialist:C,setIsOpenShareModal:c,specialistsData:j,goToChat:E,isVisibleNotification:d,setIsVisibleNotification:h,notifOnClose:f,userRole:p},children:[r.jsxs("main",{className:`main ${u?"":"!pb-[110px]"}`,children:[u&&r.jsx(sPe,{}),r.jsx(Yq,{condition:!u,block:n.current,container:e.current,children:r.jsx(Jre,{block:e.current,targets:["building_sidebar_el_1","building_sidebar_el_2"],children:r.jsxs("div",{className:"main-wrapper md1:pt-0",children:[r.jsxs("div",{className:"container-desktop",children:[p===Wt.name&&r.jsx(xPe,{buildingData:y}),!Ye(y.gallery)&&r.jsx("section",{className:"mb-3",ref:n,children:r.jsx(Y5e,{items:y.gallery,videosGallery:y.videos_gallery,children:r.jsxs("div",{className:"absolute top-[26px] right-[26px]  md1:top-4 md1:right-4 z-10 flex items-center gap-2",children:[r.jsx(Uc,{id:t,type:"complex",variant:"circle",className:p===Wt.name?"opacity-60 pointer-events-none":""}),r.jsx(zh,{id:t,type:"complex",variant:"circle",className:p===Wt.name?"opacity-60 pointer-events-none":""}),r.jsx(yw,{variant:"circle",set:c})]})})}),r.jsxs(ea,{className:"relative",children:[r.jsxs("div",{className:"flex flex-col gap-3 min-w-0",style:{marginTop:u?0:400},ref:e,children:[!!U.length&&r.jsx(Kh,{suggestions_type:Yn.buyerAll,customUpdate:()=>{z(t)},children:U.map(V=>r.jsx("section",{children:r.jsx("div",{className:"white-block",children:r.jsx(iC,{card:V,suggestions_type:Yn.buyerAll,variant:"default"})})},V.status_id))}),r.jsx(HDe,{}),p===sn.name&&r.jsx(r.Fragment,{children:N&&!Ye(N)&&N.map(V=>r.jsx("section",{children:r.jsx(r4,{data:V,mainData:y,variant:"block"})},V.id))})]}),u&&r.jsx(qj,{className:"building_sidebar_el_1",setIsOpenRecordView:i,controls:!0,specialists:j})]})]}),r.jsx("section",{className:"mt-3 relative z-10",id:"section-apartments-id",children:r.jsx("div",{className:"container-desktop",children:r.jsx(wW,{frames:P,tags:y.tags,advantages:w,userRole:p})})}),r.jsxs("div",{className:"container-desktop",children:[r.jsxs(ea,{className:"mt-3",children:[r.jsxs("div",{className:"flex flex-col gap-3 min-w-0",children:[!!j.length&&r.jsx("section",{children:r.jsx(j4,{descr:"",specialists:j,building_id:y.id})}),r.jsx(XA,{classNames:"white-block",building_id:y.id,organization_id:y.developer.id,isSpecialist:!!j.length}),r.jsx(Rh,{data:[...y.videos.map(V=>({link:V,type:"video"})),...y.shorts.map(V=>({link:V,type:"short"}))],currentComplexId:y.id}),r.jsx(Rh,{data:[...y.stock.map(V=>({...V,building_id:y.id,type:"stock"})),...y.calculations.map(V=>({...V,building_id:y.id,type:"calculation"})),...y.news.map(V=>({...V,building_id:y.id,type:"news"}))],currentComplexId:y.id}),!!(y.apartmentRenov.length||y.videos_apartRenov.length)&&r.jsx("section",{id:"section-apartRenov-id",children:r.jsx(X5e,{videosData:y.videos_apartRenov,data:y.apartmentRenov,sidebar:r.jsx(Gj,{setIsOpenRecordView:i})})}),!!(y.ecologyParks.length||y.videos_ecologyParks.length)&&r.jsx("section",{id:"section-ecologyParks-id",children:r.jsx(K5e,{videosData:y.videos_ecologyParks,data:y.ecologyParks,sidebar:r.jsx(Gj,{setIsOpenRecordView:i})})}),!!I.length&&r.jsx("section",{id:"section-constPrgs-id",children:r.jsx(F5e,{data:I,frames:P,options:{frames:P,dataObject:y},sidebar:r.jsx(Gj,{setIsOpenRecordView:i})})}),!u&&r.jsx(qj,{setIsOpenRecordView:i,controls:!0,specialists:j})]}),u&&r.jsx(qj,{className:"building_sidebar_el_2",setIsOpenRecordView:i})]}),r.jsx("section",{className:"mt-3",id:"section-location-id",children:r.jsx(w4,{currentBuilding:y,coordinates:y.location,variant:"block"})}),r.jsx(bPe,{id:y.id,currentCity:y.city,defaultPrice:y.minPrice||0})]})]})})}),p===sn.name&&r.jsx(Dl,{activeDefault:!0,conditionWidth:!u,children:r.jsxs("div",{className:"py-2.5 px-4 gap-2 grid grid-cols-2 md3:grid-cols-1",children:[r.jsx(_e,{size:"Small",onClick:E,children:"Задать вопрос в чат"}),r.jsx(_e,{size:"Small",variant:"secondary",onClick:()=>i(!0),children:r.jsx(_m,{texts:["Записаться на просмотр","Записаться на онлайн-показ"],intervalTime:3e3})})]})})]}),_?r.jsx(r.Fragment,{children:U.length?r.jsx(tW,{condition:s,set:i,suggestions:U,customUpdate:async()=>{i(!1),await z(t)}}):r.jsx(r.Fragment,{children:r.jsx(Ze,{condition:s,children:r.jsx(wv,{condition:s,set:i,type:"building",id:y==null?void 0:y.id,developName:y.developer.name,objectData:y,specialists:j,onUpdate:()=>{z(t),i(!1),o(!0)}})})})}):r.jsx(bm,{condition:s,set:i}),r.jsx(Qq,{condition:a,set:o}),r.jsx(WA,{condition:B,set:C,specialists:j,building_id:y.id}),r.jsx(Bm,{condition:l,set:c})]}),T&&r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper flex flex-col",children:r.jsx("div",{className:"white-block !py-16 text-center flex flex-col items-center flex-grow",children:T===404?r.jsxs(r.Fragment,{children:[r.jsx("h1",{className:"title-2",children:"Объявление снято с публикации"}),r.jsx("a",{href:ke.home,className:"mt-6",children:r.jsx(_e,{Selector:"div",children:"Перейти на главную страницу"})})]}):r.jsx(wPe,{})})})})]})},TPe="_PrivacyPolicyRoot_kxkew_1",EPe="_PrivacyPolicyTable_kxkew_40",NPe={PrivacyPolicyRoot:TPe,PrivacyPolicyTable:EPe},kPe=()=>r.jsx(r.Fragment,{children:r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Политика конфиденциальности и обработки персональных данных на inrut.ru"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsx("div",{children:r.jsx("div",{className:"container mt-8 mb-8",children:r.jsxs("div",{className:NPe.PrivacyPolicyRoot,children:[r.jsx("h1",{className:"title-1 text-center max-w-[500px] ml-auto mr-auto mb-8",children:"Условия акции «Кешбэк»"}),r.jsx("p",{children:"Акция «Кешбэк» (далее по тексту — Акция) организуется ООО «Бизнес гарант» (далее — Организатор) в интересах и за счет застройщиков/продавцов объектов недвижимости (квартир) (далее — Правообладатель или Правообладатели) и является стимулирующим мероприятием в целях повышения лояльности к проектам, реализуемым Организатором, и увеличения активности покупателей в приобретении объектов недвижимости (квартир) у Правообладателей. Действующая редакция настоящих условий доступна на сайте по адресу inrut.ru. Настоящий документ является публичной офертой (далее — Условия), адресованной неопределенному кругу лиц и выраженной в письменной форме."}),r.jsx("h3",{className:"title-3",children:"1. Термины и определения"}),r.jsx("p",{children:"1.1. Организатор Акции — общество с ограниченной ответственностью «Бизнес гарант». 358000, г. Элиста, ул. им Б.Басангова, дом 2А, оф. помещ. 1"}),r.jsx("p",{children:"1.2. Квартира, участвующая в Акции, — квартира, размещенная на сайте inrut.ru, находящаяся в свободной продаже, с отметкой «Кешбэк» (далее по тексту — Квартира)."}),r.jsx("p",{children:"1.3. Участник Акции — любое дееспособное физическое лицо, которому на момент участия в Акции исполнилось 18 (восемнадцать) лет, имеющее гражданство РФ и допущенное Организатором к участию в Акции в соответствии с настоящими Условиями."}),r.jsx("p",{children:"1.4. Правообладатель, Правообладатели — лицо (или лица), являющееся застройщиком многоквартирного дома или продавцом Квартиры, интересы которого представляет Организатор Акции."}),r.jsx("p",{children:"1.5. Договор о приобретении Квартиры — договор участия в долевом строительстве или договор купли-продажи (далее по тексту — Договор приобретения) установленной формы, заключаемый Участником Акции с Правообладателем в отношении Квартиры, подлежащий государственной регистрации и считающийся заключенным с момента такой регистрации (в отношении Договоров купли- продажи — считающийся заключенным с момента подписания)."}),r.jsx("p",{children:"1.6. Кошелёк Участника — виртуальная (электронная) карта."}),r.jsx("p",{children:"1.7. Счет для перечисления Кешбэка — банковский счет, открытый на имя Участника Акции в любом российском банке, на который будет перечислен (списан) Кешбэк в денежной форме."}),r.jsx("p",{children:"1.8. Цена по Договору приобретения — цена строящегося объекта долевого строительства (квартиры), указанная в договоре долевого участия (ДДУ), либо цена готовой квартиры, указанная в договоре купли-продажи (ДКП)."}),r.jsx("h3",{className:"title-3",children:"2. Кто может участвовать в Акции?"}),r.jsx("p",{children:"2.1. Участниками Акции являются физические лица, приобретающие Квартиру на сайте inrut.ru по любой доступной программе в условиях выбора покупки."}),r.jsx("p",{children:"2.2. У Участника Акции должна быть Карта Участника. В момент акцепта Условий Акции Участником Акции Организатор автоматически выпускает Карту Участника. Карта Участника активируется в момент выпуска и становится доступна в личном кабинете Участника Акции на сайте inrut.ru."}),r.jsx("p",{children:"2.3. Участник Акции обязуется самостоятельно отслеживать информацию об изменениях условий Акции на сайте inrut.ru."}),r.jsx("h3",{className:"title-3",children:"3. Как участвовать в Акции?"}),r.jsx("p",{children:"3.1. Для участия в Акции в период проведения акции необходимо забронировать Квартиру с отметкой «Кешбэк» на сайте inrut.ru. по любой доступной программе, кроме Рассрочки."}),r.jsx("p",{children:"3.2. При приобретении Квартиры с использованием кредитных средств, необходимо подать заявку на одобрение ипотеки в банке на сайте inrut.ru и получить кредит в соответствии с выбранной программой кредитования."}),r.jsx("p",{children:"3.3. Необходимо произвести полную оплату Цены по Договору приобретения в соответствии с условиями Договора приобретения."}),r.jsx("p",{children:"3.4. Акцептом Условий Акции является выполнение пунктов 1–3 настоящего раздела Условий."}),r.jsx("p",{children:"3.5. Акцептуя Условия Акции, в соответствии с пунктом 4 настоящего раздела Условий, Участник Акции соглашается на выпуск Организатором Акции Карты Участника в соответствии с настоящими Условиями и ее размещение в личном кабинете Участника Акции на inrut.ru."}),r.jsx("p",{children:"3.6. При соблюдении условий, установленных в п. 1–3 настоящего раздела Условий, Организатор Акции начисляет Участнику Акции на Карту Участника Кешбэка от Цены по Договору приобретения. Сумма начисленного Кешбэка будет доступна для просмотра в Кошельке в личном кабинете Участника Акции на inrut.ru. При приобретении Участником Акции нескольких Квартир, участвующих в Акции, при соблюдении Условий Кешбэка начисляются на Карту Участника, держателем которой является Участник Акции."}),r.jsx("p",{children:"3.7. Участник Акции имеет право получить начисленные Кешбэк в денежной форме не позднее 25-го числа месяца, следующего за месяцем, в котором была произведена полная оплата Цены по Договору приобретения в соответствии с условиями Договора приобретения. Для получения Кешбэка в денежной форме Участник Акции обязан предоставить реквизиты Счета Организатору Акции для перечисления Кешбэка в личном кабинете на inrut.ru до передачи Договора приобретения на регистрацию."}),r.jsx("p",{children:"3.8. Если Участник Акции отказывается от получения начисленных Кешбэка в денежной форме, он обязан уведомить Организатора позвонив на горячую линию, либо в чате на сайте inrut.ru не позднее чем в течение 3 рабочих дней после полной оплаты Цены по договору приобретения. Выплата (списание) Кешбэка в денежной форме не производится, размер начисленных Кешбэка на Карте Участника становится равен 0."}),r.jsx("p",{children:"3.9. Организатор Акции обязан осуществить выплату (списание) Кешбэка в денежной форме путем перечисления с Карты Участника не позднее 25-го числа месяца, следующего за месяцем, в котором была произведена полная оплата Цены по Договору приобретения в соответствии с условиями Договора приобретения, на Счет для перечисления Кешбэка."}),r.jsx("p",{children:"3.10. Кешбэк выплачиваются (списываются) в денежной форме единоразово, единым платежом. Списание Кешбэка частями не допускается."}),r.jsx("p",{children:"3.11. В случае расторжения Договора приобретения выплата (списание) не производится, размер начисленного Кешбэка на Карте Участника становится равен 0."}),r.jsx("p",{children:"3.12. В случае если на момент выплаты (списания) Счет для перечисления Кешбэка является закрытым или находится в любом другом состоянии, препятствующем Организатору Акции произвести выплату (списание), Участник Акции исключается из Акции и не получает выплату."}),r.jsx("p",{children:"3.13. В случае приобретения Квартиры в общую совместную собственность или долевую собственность Участником Акции становится тот, на кого зарегистрирован личный кабинет на inrut.ru, через который совершалась покупка, и выпущена Карта Участника."}),r.jsx("h3",{className:"title-3",children:"4. Прочие условия"}),r.jsx("p",{children:"4.1. В соответствии с п. 68 ст. 217 НК РФ начисление Кешбэка и выплата (списание) Кешбэка с Карты Участника на счет Участника Акции в денежной форме не облагается НДФЛ."}),r.jsx("p",{children:"4.2. Акция является публичной. Организатор Акции вправе вносить изменения в Условия, уведомив об этом Участников Акции путем размещения актуальной версии Условий на сайте inrut.ru. При несоблюдении и/или нарушении Условий настоящей Акции, а также обнаружении недобросовестности в действиях Участника Акции Организатор Акции оставляет за собой право не производить выплаты без уведомления и объяснения причин такому Участнику Акции."}),r.jsx("p",{children:"4.3. Организатор Акции не несет ответственность за неисполнение либо ненадлежащее исполнение своих обязательств перед Участниками Акции вследствие сбоев в телекоммуникационных и энергетических сетях, действий вредоносных программ, недобросовестных действий третьих лиц."}),r.jsx("p",{children:"4.4. Организатор Акции не несёт ответственность за невозможность перечисления Кешбэка Участника Акции на Счет для перечисления Кешбэка Участника Акции, указанный в представленных реквизитах, в случае его блокировок и закрытия."}),r.jsx("h3",{className:"title-3",children:"5. Правила пользования Дисконтной картой Участника"}),r.jsx("p",{children:"5.1. Кошелёк Участника не имеет пластикового носителя и размещается в личном кабинете Участника Акции на inrut.ru."}),r.jsx("p",{children:"5.2. Кошелёк Участника автоматически выпускается Организатором Акции Участнику Акции в момент акцепта Условий Акции Участником Акции. Кошелёк Участника активируется в момент выпуска и становится доступна в личном кабинете Участника Акции на сайте inrut.ru."}),r.jsx("p",{children:"5.3. В случае списания Кешбэка в денежной форме в результате получения третьими лицами доступа к Кошельку Участника и/или личному кабинету Участника Акции (в том числе по инициативе Участника Акции), а также в результате недобросовестных действий Участника Акции и/или третьих лиц, списанные Кешбэка не подлежат восстановлению."}),r.jsx("p",{children:"5.4. На одного Участника Акции может быть выпущен только один Кошелёк Участника, в том числе при покупке нескольких Квартир."}),r.jsx("p",{children:"5.5. Кошелёк Участника не является кредитной или платежной картой, если она не будет в специальном порядке определена таковой."}),r.jsxs("p",{children:[r.jsx("strong",{children:"Организатор акции"}),"   «Бизнес гарант». 358000, г. Элиста, ул. им Б.Басангова, дом 2А, оф. помещ. 1"]}),r.jsxs("p",{children:["Эл.почта- ",r.jsx("a",{href:"mailto:Domstv@bk.ru",children:"Domstv@bk.ru"})]})]})})})})]})}),APe=t=>Array.from({length:t},(e,n)=>n),DPe="_ComparisonBody_1hbnk_1",PPe="_ComparisonWrapper_1hbnk_6",IPe="_ComparisonTop_1hbnk_13",MPe="_ComparisonActions_1hbnk_19",OPe="_ComparisonName_1hbnk_26",RPe="_ComparisonCol_1hbnk_31",LPe="_ComparisonMore_1hbnk_43",BPe="_ComparisonOption_1hbnk_54",FPe="_ComparisonOptionName_1hbnk_77",$Pe="_ComparisonPrev_1hbnk_96",UPe="_ComparisonNext_1hbnk_103",Di={ComparisonBody:DPe,ComparisonWrapper:PPe,ComparisonTop:IPe,ComparisonActions:MPe,ComparisonName:OPe,ComparisonCol:RPe,ComparisonMore:LPe,ComparisonOption:BPe,ComparisonOptionName:FPe,ComparisonPrev:$Pe,ComparisonNext:UPe},lD=(t,e)=>{if(!t||t.length===0)return;let n=t[0],s=t[0][e];for(let i=1;i<t.length;i++)t[i][e]<s&&(s=t[i][e],n=t[i]);return n},VPe=({totalCount:t,index:e,dataCard:n,type:s,deleteCard:i})=>{const a=n.title||`${n.rooms===0?"Студия":`${n.rooms}-комн.`} ${n.area} м², 
   ${n.floor}/${n.building_floors} эт.`;return r.jsxs("article",{className:"relative",children:[r.jsxs("span",{className:"block mb-2 text-center text-primary400 text-small",children:[e+1,"/",t]}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-8 right-2 !opacity-100 !visible ${Di.ComparisonCardDeleteBtn}`,onClick:()=>i(s,n.id),children:r.jsx(un,{width:15,height:15,className:"fill-red"})}),r.jsx(Ke,{to:s==="complex"?`${ke.building}${n.id}`:`${ke.apartment}${n.id}`,className:"ibg overflow-hidden pb-[68%] rounded-xl block",children:r.jsx("img",{src:qt(n.images?n.images[0]:""),alt:"",className:s==="apartment"?"!object-contain":""})}),r.jsx("h4",{className:"title-4 line-clamp-1 mt-3 mb-1",children:a}),r.jsxs("p",{className:"text-small text-primary400 mb-1",children:["Срок сдачи: ",n.deadline]}),r.jsx("p",{className:"line-clamp-1 text-small",children:n.address}),s==="complex"&&r.jsx(Ke,{to:`${ke.building}${n.id}#section-apartments-id`,target:"_blank",rel:"noopener noreferrer",className:"block mt-4",children:r.jsx(_e,{Selector:"div",variant:"secondary",size:"Small",children:"Выбрать квартиру"})})]})},G8=()=>r.jsx("svg",{width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 17C11.866 17 15 13.866 15 10C15 6.13401 11.866 3 8 3C4.13401 3 1 6.13401 1 10C1 13.866 4.13401 17 8 17ZM11.7929 8.70712C12.1834 8.31659 12.1834 7.68343 11.7929 7.2929C11.4024 6.90238 10.7692 6.90238 10.3787 7.2929L7.2 10.4716C7.08954 10.582 6.91046 10.582 6.8 10.4716L5.70711 9.37868C5.31658 8.98816 4.68342 8.98816 4.29289 9.37869C3.90237 9.76921 3.90237 10.4024 4.29289 10.7929L6.37923 12.8792C6.72207 13.2221 7.27792 13.2221 7.62076 12.8792L11.7929 8.70712Z",fill:"#53B374"})}),zPe=()=>r.jsx("svg",{width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 10C15 13.866 11.866 17 8 17C4.13401 17 1 13.866 1 10C1 6.13401 4.13401 3 8 3C11.866 3 15 6.13401 15 10ZM11 7C10.6095 6.60948 9.97633 6.60948 9.5858 7L8.00002 8.58578L6.41424 7C6.02372 6.60948 5.39055 6.60948 5.00003 7C4.60951 7.39052 4.60951 8.02369 5.00003 8.41421L6.58581 9.99999L5.00002 11.5858C4.60949 11.9763 4.60949 12.6095 5.00002 13C5.39054 13.3905 6.02371 13.3905 6.41423 13L8.00002 11.4142L9.58582 13C9.97634 13.3905 10.6095 13.3905 11 13C11.3906 12.6095 11.3906 11.9763 11 11.5858L9.41424 9.99999L11 8.41421C11.3905 8.02369 11.3905 7.39052 11 7Z",fill:"#F6A623"})}),Y8=({dataNames:t,data:e,type:n,deleteAll:s,deleteCard:i,isLoading:a})=>{v.useState(!1);const o=v.useRef(null),[l,c]=v.useState(!0),[u,d]=v.useState(!0),h=({field:m,typeField:_,postfix:y})=>{if(_==="boolean")return typeof m=="string"?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(G8,{}),m]}):m?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(G8,{}),"Да"]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zPe,{}),"Нет"]});if(_==="developer"||_==="user")return r.jsxs("div",{children:[r.jsx(Nn,{src:m.avatarUrl,title:m.name,size:46}),r.jsx("p",{className:"title-4 mt-2.5",children:m.name}),m.handedOver&&r.jsxs("p",{className:"mt-2",children:["Сдано",r.jsxs("span",{className:"text-blue ml-1.5",children:[m.handedOver," дома"]})]}),m.underСonstruction&&r.jsxs("p",{className:"mt-2",children:["Строиться",r.jsxs("span",{className:"text-blue ml-1.5",children:[m.underСonstruction," дома"]})]})]});if(_==="text")return m&&y?r.jsxs("div",{children:[pt(m)," ",y]}):r.jsx("div",{children:m||"—"});if(_==="metro")return m&&m.length>0?r.jsx(Em,{data:m,visibleItems:99}):r.jsx("div",{children:"—"})},f=()=>{if(!o.current)return;o.current.scrollLeft<50&&c(!0);const m=o.current.scrollWidth+50,_=o.current.scrollLeft+263.65*3+335;m>_&&m-_<=100?d(!0):d(!1)},p=(m,_)=>{c(!1),d(!1);const y=o.current.scrollLeft,x=263.65;o.current.scrollTo({left:m==="next"?y+x:y-x,behavior:"smooth"}),setTimeout(()=>{f()},400)},g=()=>{const m=t.map(_=>({button:r.jsxs("button",{className:Di.ComparisonMore,children:[r.jsx("p",{className:"title-3",children:_.title}),r.jsx(Yu,{className:"fill-dark",width:30,height:25})]}),body:r.jsx("div",{className:"pb-4",children:_.items.map((y,x)=>r.jsxs("div",{className:Di.ComparisonOption,children:[r.jsx("p",{className:`${Di.ComparisonName} ${Di.ComparisonOptionName}`,children:y.label}),r.jsx("div",{className:"flex",children:e.map((b,w)=>{var j;let C=b[y.value];return y.value==="livingArea"&&(C=b.minPrice/b.minPricePerMeter),y.value==="pricePerMeter"&&(C=b.price/b.area),y.value==="type"&&(C="Вторичка"),y.value==="floor"&&(C=`${b.floor} из ${b.building_floors}`),y.value==="address"&&(C=`${b.city}, ${b.address}`),y.value==="min_price_complex"&&(C=((j=lD(b.apartments,"price"))==null?void 0:j.price.toString())||0),y.value==="cashback"&&(C=(b.max_price||b.price)/100*b.cashback),r.jsx("div",{className:Di.ComparisonCol,children:r.jsx(h,{field:C,typeField:y.typeField,postfix:y.postfix})},w)})})]},x))})}));return r.jsx(W9,{data:m,multiple:!0,defaultValue:APe(t.length)})};return v.useEffect(()=>{f()},[o.current,e]),a?r.jsxs("div",{className:"select-none rounded-xl bg-white shadow p-4",children:[r.jsx(Fe,{className:"rounded-xl h-[270px] w-full"}),r.jsx(Fe,{className:"rounded-xl h-[55px] w-1/5 mt-4"}),r.jsx(Fe,{className:"rounded-xl h-[65px] w-full mt-4"}),r.jsx(Fe,{className:"rounded-xl h-[65px] w-full mt-4"}),r.jsx(Fe,{className:"rounded-xl h-[65px] w-full mt-4"}),r.jsx(Fe,{className:"rounded-xl h-[65px] w-full mt-4"}),r.jsx(Fe,{className:"rounded-xl h-[55px] w-1/5 mt-4"}),r.jsx(Fe,{className:"rounded-xl h-[65px] w-full mt-4"}),r.jsx(Fe,{className:"rounded-xl h-[55px] w-1/5 mt-4"}),r.jsx(Fe,{className:"rounded-xl h-[65px] w-full mt-4"}),r.jsx(Fe,{className:"rounded-xl h-[65px] w-full mt-4"})]}):e.length?r.jsx("section",{className:"white-block relative",children:r.jsx("div",{className:Di.ComparisonBody,ref:o,children:r.jsxs("div",{className:Di.ComparisonWrapper,children:[r.jsx("div",{className:Di.ComparisonTop,children:r.jsxs("div",{className:"flex w-full md1:flex-col md1:gap-8",children:[r.jsxs("div",{className:`${Di.ComparisonActions} ${Di.ComparisonName}`,children:[r.jsxs("p",{className:"font-medium mb-8",children:["В сравнении ",e.length," ",n==="apartment"?"квартир":"ЖК"]}),r.jsx("div",{className:"flex flex-col gap-3",children:r.jsxs(h4,{className:"!px-0",onClick:()=>s(n),children:[r.jsx(un,{width:16,height:16,className:"!fill-red"}),r.jsx("span",{className:"text-dark font-medium",children:"Удалить весь список"})]})})]}),r.jsx("div",{className:"flex",children:e.map((m,_)=>r.jsx("div",{className:Di.ComparisonCol,children:r.jsx(VPe,{totalCount:e.length,index:_,dataCard:m,type:n,deleteCard:i})},_))})]})}),r.jsx("div",{className:"mt-4",children:r.jsx(g,{})}),r.jsx(ho,{onClick:()=>p("prev"),className:`${Di.ComparisonPrev} ${l?"_disabled opacity-0":""} md1:!hidden`}),r.jsx(fo,{onClick:()=>p("next"),className:`${Di.ComparisonNext} ${u?"_disabled opacity-0":""} md1:!hidden`})]})})}):r.jsxs(Wa,{className:"col-span-full",children:[r.jsx("h3",{className:"title-3 mt-4",children:"Добавляйте объявления в сравнение"}),r.jsx("p",{className:"mt-3",children:"Отмечайте интересные объявления чтобы получать персональные скидки от застройщика"}),r.jsx(Ke,{to:ke.listing,className:"mt-6",children:r.jsx(_e,{Selector:"div",children:"Искать объявления"})})]})},HPe=[{title:"Общая информация",items:[{label:"Входит в топ продаж",value:"top",typeField:"boolean"},{label:"Застройщик",value:"user",typeField:"user"},{label:"Кешбэк за покупку до",value:"cashback",typeField:"text",postfix:"₽"},{label:"Подарок",value:"present",typeField:"boolean"},{label:"Срок сдачи",value:"deadline",typeField:"text"}]},{title:"Адрес",items:[{label:"Город, улица",value:"address",typeField:"text"},{label:"Метро",value:"metro",typeField:"metro"}]},{title:"Об объекте",items:[{label:"Цена от",value:"min_price_complex",typeField:"text",postfix:"₽"}]}],qPe=[{title:"Общая информация",items:[{label:"Общая стоимость",value:"price",typeField:"text",postfix:"₽"},{label:"Цена за м²",value:"pricePerMeter",typeField:"text",postfix:" ₽/м²"},{label:"Тип недвижимости",value:"type",typeField:"text"},{label:"Количество комнат",value:"rooms",typeField:"text"}]},{title:"Площадь",items:[{label:"Общая",value:"area",typeField:"text",postfix:"м²"}]},{title:"Адрес",items:[{label:"Город, улица",value:"address",typeField:"text"},{label:"Метро",value:"metro",typeField:"metro"}]},{title:"Параметры",items:[{label:"Этаж",value:"floor",typeField:"text"}]},{title:"О доме",items:[{label:"Застройщик",value:"developer",typeField:"developer"},{label:"Кешбэк за покупку",value:"cashback",typeField:"text",postfix:"₽"},{label:"Подарок",value:"present",typeField:"boolean"},{label:"Срок сдачи",value:"deadline",typeField:"text"}]}],WPe=()=>{const t=vs(),[e,n]=v.useState([]),[s,i]=v.useState([]),[a,o]=v.useState([]),l=[{id:0,name:"complexes"},{id:1,name:"apartments"}],[c,u]=_r(),[d,h]=v.useState(null),[f,p]=v.useState(!0),[g,m]=v.useState(!0);v.useEffect(()=>{var w;h((w=l.find(C=>C.name===t.type))==null?void 0:w.id);const x=JSON.parse(localStorage.getItem("comparison_complex")),b=JSON.parse(localStorage.getItem("comparison_apartment"));x&&Xa({visibleObjects:x,page:1}).then(C=>{p(!1),n(C.cards)}),b&&Me("/api/apartments",{ids:b,per_page:99,building_id:null,page:1}).then(C=>{m(!1),i(C.data.items)})},[]);const _=x=>{localStorage.removeItem(`comparison_${x}`),x==="complex"&&n([]),x==="apartment"&&i([])},y=(x,b)=>{const C=JSON.parse(localStorage.getItem(`comparison_${x}`)).filter(j=>j!==b);localStorage.setItem(`comparison_${x}`,JSON.stringify(C)),x==="complex"&&n(j=>j.filter(E=>E.id!==b)),x==="apartment"&&i(j=>j.filter(E=>E.id!==b))};return v.useEffect(()=>{o([{name:"ЖК",body:r.jsx(Y8,{dataNames:HPe,data:e,type:"complex",deleteAll:_,deleteCard:y,isLoading:f})},{name:"Квартиры ЖК",body:r.jsx(Y8,{dataNames:qPe,data:s,type:"apartment",deleteAll:_,deleteCard:y,isLoading:g})}])},[e,s]),r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Сравнение новостроек"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper--title",children:r.jsxs("div",{className:"container-desktop",children:[r.jsx("h1",{className:"title-1-5 mb-6 md1:mx-4 md1:mb-5",children:"Сравнение новостроек"}),r.jsx(Uo,{data:a,defaultValue:d,navClassName:"md1:px-0 md1:!mx-4",onChange:x=>{var b;u({type:(b=l.find(w=>w.id===x))==null?void 0:b.name})}})]})})})]})},GPe=()=>{const{developerId:t,data:e,citiesItems:n,currentCity:s}=v.useContext(ym),i=n.filter(a=>e.cities.includes(a==null?void 0:a.id));if(i.length)return r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3-5",children:"Регионы работы:"}),r.jsx("div",{className:"mt-3 flex gap-2",children:i.map((a,o)=>{const l=s===a.name||s===""&&o===0;return r.jsx(An,{color:"choice",value:l,children:r.jsx("a",{href:`${ke.developers.inner}${t}?city=${a.name}`,children:a.name})},a.id)})})]})},TW=({className:t,size:e="34"})=>{const{data:n}=v.useContext(ym),s=ue(Ks),i=Dt(),a=async()=>{if(s){const o=await $s({organization_id:n.id,type:xt.CHAT});xr(o)}else i(Bs(!0))};return r.jsx(_e,{size:e,className:t,onClick:a,children:"Написать сообщение"})},YPe=()=>{const{data:t}=v.useContext(ym),[e,n]=v.useState([]),[s,i]=v.useState(!0),a=ue(rt);if(v.useEffect(()=>{(async()=>{i(!0);const{cards:l}=await Xa({visibleObjects:t.objects.slice(0,5),page:1,per_page:5});n(l),i(!1)})()},[]),!(e.length===0&&!s))return r.jsx("div",{className:"p-[10px] md1:p-0 bg-white shadow-primary mb-3 rounded-[20px]",children:r.jsx("div",{className:"min-w-0 w-full overflow-hidden rounded-[20px]",children:r.jsxs(Xs,{modules:[xi],slidesPerView:"auto",observeParents:!0,observer:!0,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:8,className:"rounded-[20px] w-full overflow-visible",style:{height:"380px"},children:[s?r.jsxs(r.Fragment,{children:[r.jsx(Tn,{className:"w-3/5",children:r.jsx(Fe,{className:"h-full w-full rounded-xl"})}),r.jsx(Tn,{className:"w-2/5",children:r.jsx(Fe,{className:"h-full w-full rounded-xl"})}),r.jsx(Tn,{className:"w-2/3",children:r.jsx(Fe,{className:"h-full w-full rounded-xl"})})]}):r.jsx(r.Fragment,{children:e.map((o,l)=>{var u;const c=((u=lD(o.apartments,"price"))==null?void 0:u.price.toString())||0;return r.jsx(Tn,{className:"h-full w-auto flex-center-all flex-grow flex-shrink-0 basis-auto max-w-full",children:r.jsx(Rl,{to:`${ke.building}${o.id}`,className:"w-full h-full",children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"absolute top-4 left-4",children:r.jsxs("div",{className:"bg-[#242629a3] rounded-full py-2.5 px-3 text-white text-small",children:[o.title,", от ",pt(c)," ₽"]})}),r.jsx("img",{src:qt(o.images[0]),alt:"",className:"h-full max-h-full max-w-full rounded-[20px]"})]})})},l)})}),a&&r.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center gap-2",children:[r.jsx(ho,{disabled:!0,className:"slider-btn-prev"}),r.jsx(fo,{className:"slider-btn-next"})]})]})})})},XPe=()=>{const t=ue(rt),{data:e,tabActiveValue:n,setTabActiveValue:s,userIsAdmin:i,setConfirmDeleteModal:a}=v.useContext(ym),o=[{name:"Год основания",value:`${e.year?`${e.year} г.`:""}`,className:"items-center"},{name:"Строиться",value:e.building_houses?`${e_(e.building_houses)}`:"Нет строящихся домов",className:"items-center"},{name:"Сдано",value:e.ready_houses?`${e_(e.ready_houses)}`:"Нет строящихся домов",className:"items-center"}];return r.jsxs("section",{className:"rounded-[20px] relative",children:[r.jsxs("div",{className:"w-full relative",children:[r.jsx(YPe,{}),i&&r.jsxs("div",{className:"flex gap-2 absolute top-4 right-4",children:[r.jsx(Rl,{to:`${ht.developers.edit}${e.id}`,className:"w-10 min-w-10",children:r.jsx(mi,{title:"Редактировать",children:r.jsx(Ns,{className:"!stroke-[currentColor] !stroke-[1.5px] !fill-none",width:18,height:18})})}),r.jsx(mi,{className:"w-10 min-w-10",title:"Удалить",onClick:()=>a(e.id),children:r.jsx(un,{className:"fill-red",width:16,height:16})})]})]}),r.jsxs("div",{className:"rounded-[20px] bg-white relative shadow-primary",children:[r.jsxs("div",{className:"flex gap-4 flex-col p-5 !px-8 md1:!px-4",children:[r.jsxs("div",{className:"gap-4 mmd1:items-end flex mmd1:justify-between md1:flex-col",children:[r.jsx(Nn,{size:105,src:e.photoUrl,title:e.name}),!t&&r.jsx("h3",{className:"title-2-5 mb-2",children:e.name})]}),r.jsx("div",{className:"flex-grow flex justify-between md1:flex-col md1:justify-start",children:r.jsxs("div",{className:"w-full",children:[t&&r.jsxs("div",{className:"flex justify-between gap-4 w-full mb-4",children:[r.jsxs("h3",{className:"title-2",children:["Застройщик ",e.name]}),r.jsx(TW,{})]}),r.jsx(Dk,{data:o,className:"md4:flex-col !gap-y-5",classNameValue:"text-defaultMax"}),r.jsx(GPe,{})]})})]}),r.jsx("div",{className:"px-6 mmd1:pt-3",children:r.jsx(jl,{children:e.tabsData.map((l,c)=>r.jsx(Tl,{border:!0,onChange:()=>{s(c)},value:n===c,count:l.data.length,children:l.name},c))})})]})]})},Qh=({children:t,theme:e="white",maxWidth:n=null})=>{const s=ue(rt);return r.jsx("header",{className:Kt.header,children:r.jsxs(s$,{theme:e,isAdmin:!0,children:[r.jsx(Z9,{maxWidth:n}),s&&r.jsx(J9,{maxWidth:n}),t]})})},cD=()=>{const{data:t,options:e,setOptions:n,title:s="",EmptyBlockContent:i,skeletonCount:a=3}=v.useContext(pw);return r.jsxs(r.Fragment,{children:[s&&r.jsxs(U7,{className:"mb-6 md3:flex-col md3:!items-start justify-between",children:[r.jsx("h2",{className:"title-2",children:s}),r.jsxs("span",{children:[t.objectsCount," ",fv(t.objectsCount,"объект","объекта","объектов")]})]}),t.objectsCount!==0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(276px,1fr))] gap-4",children:e.loading||e.init?r.jsx(po,{count:a,children:r.jsx(Lh,{className:"p-0"})}):e.items.map((o,l)=>v.createElement(Ll,{...o,key:l}))}),r.jsx(zo,{className:"mt-8",currentPage:e.page,setCurrentPage:o=>{n({...e,page:o})},total:Math.ceil(t.objectsCount/e.per_page)})]}):r.jsx(Wa,{block:!1,children:i})]})},KPe=()=>{var g;const{data:t,tabActiveValue:e,setTabActiveValue:n,setObjectsOptions:s,objectsOptions:i,userIsAdmin:a,citiesItems:o,paramsString:l,isFullscreenMap:c,setIsFullscreenMap:u,specialistsData:d}=v.useContext(ym),[h,f]=v.useState([]);v.useEffect(()=>{const m=t.tabsData.find(x=>x.valueName==="videos"),_=t.tabsData.find(x=>x.valueName==="shorts");(async()=>{const x=m!=null&&m.data.length?await Ue("/api/video-url",{url:m.data}).then(w=>w.data):[],b=_!=null&&_.data.length?await Ue("/api/video-url",{url:_.data}).then(w=>w.data):[];f(t.tabsData.map(w=>{if(w.valueName==="objects"||w.valueName==="specialists")return w;const C=w.valueName==="videos"?x:w.valueName==="shorts"?b:w.data;return{...w,body:r.jsx(w4e,{data:C,type:w.valueName})}}))})()},[t.tabsData]);const p=h[e];if(p)return p.valueName==="all"?r.jsx(Rh,{data:[...t.objects.map(m=>({id:m,type:"object"})),...d.map(m=>({...m,type:"specialist"})),...p.data.videos.map(m=>({link:m,type:"video"})),...p.data.shorts.map(m=>({link:m,type:"short"})),...p.data.stocks.map(m=>({...m,type:"stock"})),...p.data.calculations.map(m=>({...m,type:"calculation"})),...p.data.news.map(m=>({...m,type:"news"}))],onClickShowAll:m=>{n(m+1)}}):p.valueName==="objects"?r.jsxs("div",{children:[i.mapData&&r.jsx("div",{className:"white-block mb-2",children:r.jsx(c_,{coordinates:i.mapData.coordinates,zoom:9,currentCityId:o&&l.city?(g=o.find(m=>m.name===l.city))==null?void 0:g.id:t.cities[0],className:"!h-[284px]",sale:i.mapData.placemarks.map(m=>({id:m.id,geo:m.coordinates,minPrice:m.minPrice})),isFullscreen:c,setIsFullscreen:u})}),r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2-5 mb-4",children:"Объекты застройщика"}),r.jsx(pw.Provider,{value:{data:t,setOptions:s,options:i,title:"",EmptyBlockContent:r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"title-3 mt-4",children:"У этого застройщика пока нету объектов"}),r.jsx(Ke,{to:ke.developers.list,children:r.jsx(_e,{className:"mt-6",children:"К списку застройщиков"})})]})},children:r.jsx("div",{ref:i.ref,children:r.jsx(cD,{})})})]})]}):p.valueName==="specialists"?r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2-5 mb-4",children:"Менеджеры отдела продаж"}),r.jsx("div",{className:"grid grid-cols-4 gap-x-3 gap-y-10 md2:grid-cols-3 md3:grid-cols-2",children:p.data.map(m=>r.jsx(_y,{...m,link:!0,visibleChat:!0,onClickChat:async()=>{const _=await $s({recipients_id:[m.id],type:xt.CHAT});xr(_)}},m.id))})]}):r.jsx("div",{className:"white-block",children:p.body})},uD=async(t,e=null)=>{try{return(await Ue("/api/data-map-buildings",{city:t,visibleIds:e})).data}catch(n){console.log(n)}},QPe=()=>{const t=Mn(),e=vs(),n=ue(Qs),[s,i]=v.useState(0),[a,o]=v.useState({}),l=ue(Ot),c=Si(l),[u,d]=v.useState(null),[h,f]=v.useState([]),[p,g]=v.useState(!1),[m,_]=v.useState({init:!1,items:[],loading:!0,page:1,ref:v.useRef(null),per_page:12,fetch:async function(y){_(x=>({...x,init:!1,loading:!0})),await Xa({visibleObjects:y,page:this.page,per_page:this.per_page}).then(x=>{_(b=>({...b,items:x.cards,loading:!1}))})}});return v.useEffect(()=>{(async()=>{const x=await Ue(`/api/developers/${t.id}`,{city:e.city||""}).then(C=>C.data),b=await DH(t.id),w={stocks:x.stocks,calculations:x.calculations,news:x.news,videos:x.videos,shorts:x.shorts};o({id:+t.id,...x,tabsData:[sr(Xw(w).length,{name:"Всё",valueName:"all",data:w}),sr(x.objects.length,{name:"Объекты застройщика",valueName:"objects",data:x.objects}),sr(b.length,{name:"Менеджеры отдела продаж",valueName:"specialists",data:b}),sr(w.shorts.length,{name:"Клипы",valueName:"shorts",data:w.shorts}),sr(w.videos.length,{name:"Видео",valueName:"videos",data:w.videos}),sr(w.stocks.length,{name:"Скидки",valueName:"stocks",data:w.stocks}),sr(w.news.length,{name:"Подарки",valueName:"news",data:w.news}),sr(w.calculations.length,{name:"Расчеты",valueName:"calculations",data:w.calculations})].filter(C=>!Ye(C))}),f(b)})()},[]),v.useEffect(()=>{var y;if(n.length){if(!a.objects||a.objectsCount===0){if(a.objectsCount===0){_(x=>({...x,loading:!1}));return}return}uD(e.city||((y=n.find(x=>x.id===a.cities[0]))==null?void 0:y.name),a.objects).then(x=>{_(b=>({...b,mapData:x}))}),m.fetch(a.objects)}},[a.objects,n]),v.useEffect(()=>{if(!a.objects||a.objectsCount===0){if(a.objectsCount===0){_(y=>({...y,loading:!1}));return}return}m.fetch(a.objects).then(()=>{setTimeout(()=>{var y;window.scrollTo({top:((y=m.ref.current)==null?void 0:y.offsetTop)-16,behavior:"smooth"})},0)})},[m.page]),{params:t,paramsString:e,citiesItems:n,tabActiveValue:s,setTabActiveValue:i,data:a,userIsAdmin:c,specialistsData:h,confirmDeleteModal:u,setConfirmDeleteModal:d,isFullscreenMap:p,setIsFullscreenMap:g,objectsOptions:m,setObjectsOptions:_}},ZPe=()=>{const{params:t,paramsString:e,citiesItems:n,tabActiveValue:s,setTabActiveValue:i,data:a,userIsAdmin:o,specialistsData:l,confirmDeleteModal:c,setConfirmDeleteModal:u,isFullscreenMap:d,setIsFullscreenMap:h,objectsOptions:f,setObjectsOptions:p}=QPe(),g=ue(rt);if(!Ye(a))return r.jsx(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Застройщик"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:r.jsxs(ym.Provider,{value:{developerId:t.id,data:a,specialistsData:l,citiesItems:n,currentCity:e.city||"",tabActiveValue:s,setTabActiveValue:i,objectsOptions:f,setObjectsOptions:p,userIsAdmin:o,paramsString:e,isFullscreenMap:d,setIsFullscreenMap:h,setConfirmDeleteModal:u},children:[o?r.jsx(Qh,{maxWidth:972}):r.jsx(zn,{maxWidth:972}),r.jsxs("main",{className:He("main",g?"":"!pb-[60px]"),children:[r.jsx("div",{className:"main-wrapper md1:!pt-0",children:r.jsxs("div",{className:"container-desktop mmd1:!max-w-[972px]",children:[r.jsx(XPe,{}),r.jsx("div",{className:"mmd1:mt-3 md1:pt-2",children:r.jsx(KPe,{})})]})}),r.jsx(Dl,{activeDefault:!0,conditionWidth:!g,children:r.jsx("div",{className:"py-2.5 px-4 w-full",children:r.jsx(TW,{size:"Small",className:"w-full"})})}),r.jsx(Ze,{condition:c,children:r.jsx(Ro,{condition:c,set:u,request:m=>{Sk(`/admin-api/developers/${m}`).then(()=>{window.location.href=ke.developers.list})}})})]})]})})},Yj=({currentCity:t,control:e,citiesData:n,setValue:s})=>r.jsx("form",{children:r.jsxs(yd,{className:"grid-cols-[350px_minmax(350px,1fr)] container",children:[r.jsx(fn,{name:"city",nameLabel:"Город",control:e,setValue:s,options:n,defaultValue:t.id?{value:t.id,label:t.name}:{}}),r.jsx(Qe,{control:e,name:"search",placeholder:"Название застройщика"})]})}),JPe=({data:t=[],className:e})=>r.jsx("nav",{className:He("flex flex-col gap-2 items-start white-block !p-4",e),children:t.map((n,s)=>r.jsx(Ke,{to:n.link||"#",className:"w-full group",children:r.jsxs(Gt,{active:!!n.active,children:[n.label,qk(n.count)&&r.jsx(uu,{active:!!n.active,children:n.count})]})},s))}),dD=({className:t,dataVariant:e="primary",activeObj:n={name:"",count:0}})=>{const s=ue(Ot),i=xm(s),{data:a}=ue(Ci),o=eIe(e,n,{userIsBuyer:i,cityData:a,userInfo:s});return r.jsx(JPe,{data:o,className:t})},eIe=(t,e={},n)=>{var i,a,o,l,c;let s=[];return t==="primary"&&(s=[{name:"developers",label:"Застройщики",link:ke.developers.list,count:n.cityData&&((i=n.cityData.find(u=>u.name==="Каталог застройщиков"))==null?void 0:i.count)||0},{name:"specialists",label:"Менеджеры",link:ke.specialists.list,count:n.cityData&&((a=n.cityData.find(u=>u.name==="Каталог специалистов"))==null?void 0:a.count)||0},sr(n.userIsBuyer,{name:"my-purchase",label:"Мои заявки на покупку",link:Fn.purchase.list,count:((o=n.userInfo.counts)==null?void 0:o.orders)||0}),sr(n.userIsBuyer,{name:"view-purchase",label:"Записи на просмотр",link:Fn.view,count:((l=n.userInfo.counts)==null?void 0:l.suggestions)||0}),sr(n.userIsBuyer,{name:"create-purchase",label:"Создать заявку",link:Fn.purchase.create})]),t==="second"&&(s=[{name:"purchases",label:"Заявки на покупку",link:ke.purchase.list,count:0},sr(n.userIsBuyer,{name:"my-purchase",label:"Мои заявки на покупку",link:Fn.purchase.list,count:((c=n.userInfo.counts)==null?void 0:c.orders)||0}),sr(n.userIsBuyer,{name:"create-purchase",label:"Создать заявку",link:Fn.purchase.create})]),s.map(u=>u.name&&u.name===e.name?{...u,active:!0,count:e.count}:u).filter(u=>!Ye(u))},hD={москва:["москва","москве"],"краснодарский край":["краснодарский край","краснодарском крае"],краснодар:["краснодар","краснодаре"],сочи:["сочи","сочи"],анапа:["анапа","анапе"],туапсе:["туапсе","туапсе"],новороссийск:["новороссийск","новороссийске"]},tIe=()=>{var g;const t=ue(Ci),{control:e,reset:n,setValue:s}=en(),[i,a]=v.useState(!0),[o,l]=v.useState(1),c=oy({control:e}),[u,d]=v.useState({total:0}),h=m=>{a(!0),Me("/api/developers/page",{...m,page:m.page}).then(_=>{a(!1),d(_.data),window.scrollTo({top:0,behavior:"smooth"})})},f=v.useCallback(es(m=>{h(m)},400),[]);v.useEffect(()=>{var m;f({city:(m=c.city)==null?void 0:m.value,search:c.search,page:o})},[o]),v.useEffect(()=>{var m;l(1),f({city:((m=c.city)==null?void 0:m.value)||t.id,search:c.search,page:1})},[c]);const p=t?`Каталог застройщиков в ${cw(i4(((g=c.city)==null?void 0:g.label)||t.name,hD,1))}`:"";return{currentCity:t,control:e,reset:n,setValue:s,isLoading:i,currentPage:o,setCurrentPage:l,watchedValues:c,dataItems:u,titleText:p}},nIe=()=>{var _,y;const t=ue(rt),e=ue(Ot),n=Si(e),s=ue(Vh),i=ue(Ks),a=Dt(),{currentCity:o,control:l,reset:c,setValue:u,isLoading:d,currentPage:h,setCurrentPage:f,watchedValues:p,dataItems:g,titleText:m}=tIe();return r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:m}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[n?r.jsx(Qh,{children:!t&&r.jsx(Yj,{currentCity:o,control:l,reset:c,citiesData:s,setValue:u})}):r.jsx(zn,{children:!t&&r.jsx(Yj,{currentCity:o,control:l,reset:c,citiesData:s,setValue:u})}),r.jsxs("main",{className:"main main-headerForm",children:[t&&r.jsx(Yj,{currentCity:o,control:l,reset:c,citiesData:s,setValue:u}),r.jsx("div",{className:"main-wrapper--title",children:r.jsxs("div",{className:"container-desktop",children:[r.jsxs("div",{className:"flex justify-between gap-4 mb-6 md1:mx-4",children:[r.jsx("h1",{className:"title-1",children:m}),n&&r.jsx("div",{className:"flex items-center justify-between",children:r.jsx(Ke,{to:ht.developers.create,target:"_blank",rel:"noopener noreferrer",children:r.jsx(_e,{size:"Small",Selector:"div",children:"Создать застройщика"})})})]}),r.jsxs(ea,{className:"!grid-cols-[1fr_345px]",children:[r.jsx("div",{className:"flex flex-col white-block !px-0 !py-5 mmd1:self-start md1:!py-3",children:!d&&((_=g.items)==null?void 0:_.length)===0?r.jsx(Or,{block:!1}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-col",children:d?r.jsx(po,{count:8,children:r.jsx(q$,{})}):(y=g.items)==null?void 0:y.map(x=>{var w;const b=[{name:"Строиться",value:x.building_houses?`${e_(x.building_houses)}`:"Нет строящихся ЖК",className:"w-[195px]"},{name:"Сдано",value:x.ready_houses?`${e_(x.ready_houses)}`:"Нет сданных ЖК",className:"w-[180px]"}];return r.jsx(H$,{data:x,charsData:b,onClickMessage:async()=>{if(i){const C=await $s({organization_id:x.id,type:xt.CHAT});xr(C)}else a(Bs(!0))},href:`${ke.developers.inner}${x.id}?city=${((w=p.city)==null?void 0:w.label)||o.name}`},x.id)})}),r.jsx(zo,{className:"mt-8 px-8",currentPage:h,setCurrentPage:x=>f(x),total:g.pages})]})}),t&&r.jsx(lo,{children:r.jsx(dD,{activeObj:{name:"developers",count:g.total}})})]})]})})]})]})},sIe=()=>r.jsx("h1",{className:"title-2",children:"Страница не найдена 404"}),rIe="_CardSecondRoot_1s1q2_1",iIe="_CardSecondRootShadow_1s1q2_7",aIe="_CardSecondLink_1s1q2_14",oIe="_CardSecondName_1s1q2_20",lIe="_CardSecondTerm_1s1q2_27",cIe="_CardSecondMeter_1s1q2_33",uIe="_CardSecondContent_1s1q2_40",dIe="_CardSecondBottom_1s1q2_48",hIe="_CardSecondAddress_1s1q2_54",cu={CardSecondRoot:rIe,CardSecondRootShadow:iIe,CardSecondLink:aIe,CardSecondName:oIe,CardSecondTerm:lIe,CardSecondMeter:cIe,CardSecondContent:uIe,CardSecondBottom:dIe,CardSecondAddress:hIe},fIe=({options:t})=>{const{title:e,id:n}=t,[s,i]=v.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx($t,{placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ke,{to:`${ht.apartment.edit}${n}`,target:"_blank",children:r.jsx(Ts,{Selector:"div",className:"relative z-50",children:r.jsx(Ns,{className:"stroke-blue stroke-[1.5px]",width:18,height:18})})}),children:"Редактировать"}),r.jsx($t,{placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>i(n),children:r.jsx(un,{className:"fill-red",width:16,height:16})}),children:"Удалить"}),r.jsx(vy,{options:{title:e,condition:s,set:i,redirectUrl:ke.listing}})]})},pIe=()=>{const t=ue(Ot),e=Si(t),{customControls:n,title:s,id:i,geoVisible:a=!0,setIsOpenModalLocation:o}=v.useContext(EW);return n||(e?r.jsx(fIe,{options:{title:s,id:i},children:a&&r.jsx($t,{placement:"bottom",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>o(!0),children:r.jsx(wl,{width:14,height:14,className:"pointer-events-none"})}),children:"Показать на карте"})}):r.jsxs(r.Fragment,{children:[r.jsx(Uc,{id:i,type:"apartment",variant:"tooltip",placement:"bottom"}),a&&r.jsx($t,{placement:"bottom",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>o(!0),children:r.jsx(wl,{width:14,height:14,className:"pointer-events-none"})}),children:"Показать на карте"})]}))},EW=v.createContext(),fD=t=>{const{images:e,name:n,address:s,history:i,user:a,developer:o,rooms:l,area:c,floor:u,price:d,priceOld:h,frame:f,deadline:p,id:g,childrenContent:m="",badge:_,variant:y,geo:x,location:b,cashback:w,present:C,tags:j,buildingCashback:E,buildingDiscount:T}=t,{className:N=""}=t,[P,I]=v.useState(!1),B=`${l===0?"Студия":`${l}-комн квартира`}, ${c} м², ${u} эт.`,U=a||o,z=()=>{switch(y){case"":return"";case"shadow":return cu.CardSecondRootShadow;default:return""}},G=h||d,V=bw(T,G,c),J=(V||G)/100*((w||0)+((E==null?void 0:E.value)||0));return r.jsx(EW.Provider,{value:{...t,setIsOpenModalLocation:I},children:r.jsx("article",{className:`${cu.CardSecondRoot} ${z()} ${N}`,children:r.jsxs("div",{className:"relative flex flex-col flex-grow",children:[r.jsx("a",{href:`${ke.apartment}${g}`,className:cu.CardSecondLink}),r.jsx(xy,{images:e,title:B,href:`${ke.apartment}${g}`,badge:_,imageFit:"contain"}),r.jsx("div",{className:"flex gap-2 absolute top-3 right-3",children:r.jsx(pIe,{})}),r.jsxs("div",{className:cu.CardSecondContent,children:[m,r.jsx("div",{className:"flex gap-3 justify-between mb-3 flex-grow",children:r.jsxs("div",{className:"flex flex-col",children:[!!(J||C||T)&&r.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-1.5",children:[!!T&&r.jsx(Ac,{discount:T.value,type_id:T.type,prefix:"Скидка",tooltip:!0,start_date:ct(T.start_date).format("DD.MM.YYYY"),end_date:ct(T.end_date).format("DD.MM.YYYY"),unit:T.unit}),!!J&&r.jsx(Sa,{cashback:J,increased:!!E,prefix:"Кешбэк"}),!!C&&r.jsx(pd,{present:C})]}),!!(j!=null&&j.length)&&r.jsx("div",{className:"flex flex-wrap gap-1.5 w-full",children:r.jsx(Sl,{data:j,increaseHeight:!0})}),r.jsxs("div",{className:"flex items-center gap-2 [&:not(:first-child)]:mt-3",children:[!V&&r.jsxs("h3",{className:"text-bigSmall font-medium",children:[pt(G)," ₽"]}),V&&r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsxs(cd,{children:[pt(G)," ₽"]}),r.jsx("div",{className:"flex gap-2 items-center mb-1 mt-1",children:r.jsxs("h3",{className:"text-bigSmall font-medium",children:[pt(V)," ₽"]})})]}),i&&i.length>0?r.jsx(bfe,{data:i,className:"z-50 relative"}):""]}),r.jsx("div",{className:"title-4 mt-1",children:B}),r.jsxs("p",{className:cu.CardSecondTerm,children:["Корпус: ",f," Срок сдачи: ",p]}),!!n&&r.jsx("p",{className:cu.CardSecondName,children:n}),r.jsx("p",{className:cu.CardSecondAddress,children:s})]})}),U&&r.jsx("div",{className:cu.CardSecondBottom,children:r.jsx(Vs,{avatar:U.avatarUrl,name:U.name,pos:U.pos})})]}),r.jsx(by,{condition:P,set:I,geo:x||b})]})})})},mIe=()=>{const[t]=ur(),[e,n]=v.useState([]),[s,i]=_r(),[a,o]=v.useState(null),l=vs(),[c,u]=v.useState(!0),[d,h]=v.useState(!0),[f,p]=v.useState([]),[g,m]=v.useState([]),_=[{id:0,name:"complexes"},{id:1,name:"apartments"}];return v.useEffect(()=>{var x;if(o((x=_.find(b=>b.name===l.type))==null?void 0:x.id),!t.loggedIn)return;(async()=>{u(!0),h(!0);const b=await Ue("/api/likes").then(T=>T.data),w=b.filter(T=>T.type==="building").map(T=>T.id),C=b.filter(T=>T.type==="apartment").map(T=>T.id),j=await Xa({visibleObjects:w}).then(T=>T.cards),E=C.length?await Me("/api/apartments",{ids:C,per_page:99}).then(T=>T.data):{};p(j),m(E.items||[]),u(!1),h(!1)})()},[]),v.useEffect(()=>{n([{name:"ЖК",body:r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(320px,1fr))] gap-4",children:t.loggedIn?r.jsx(r.Fragment,{children:c?[...new Array(3)].map((y,x)=>r.jsx(Lh,{variant:"shadow"},x)):f.length>0?f.map((y,x)=>r.jsx(Ll,{...y,variant:"shadow"},x)):r.jsxs(Wa,{className:"col-span-full",children:[r.jsx("h3",{className:"title-3 mt-4",children:"Добавляйте объявления в избранное"}),r.jsx("p",{className:"mt-3",children:"Отмечайте интересные объявления чтобы получать персональные скидки от застройщика"}),r.jsx(Ke,{to:ke.listing,className:"mt-6",children:r.jsx(_e,{Selector:"div",children:"Искать объявления"})})]})}):r.jsxs(Wa,{className:"col-span-full",children:[r.jsx("h3",{className:"title-3 mt-4",children:"Добавляйте объявления в избранное"}),r.jsx("p",{className:"mt-3",children:"Авторизируйтесь что-бы получать персональные скидки от застройщиков"})]})}),count:f.length},{name:"Квартиры ЖК",body:r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(320px,1fr))] gap-4",children:t.loggedIn?r.jsx(r.Fragment,{children:d?[...new Array(3)].map((y,x)=>r.jsx(Lh,{variant:"shadow"},x)):g.length>0?g.map((y,x)=>r.jsx(fD,{...y,variant:"shadow"},x)):r.jsx(r.Fragment,{children:r.jsxs(Wa,{className:"col-span-full",children:[r.jsx("h3",{className:"title-3 mt-4",children:"Добавляйте объявления в избранное"}),r.jsx("p",{className:"mt-3",children:"Отмечайте интересные объявления чтобы получать персональные скидки от застройщика"}),r.jsx(Ke,{to:ke.listing,className:"mt-6",children:r.jsx(_e,{Selector:"div",children:"Искать объявления"})})]})})}):r.jsxs(Wa,{className:"col-span-full",children:[r.jsx("h3",{className:"title-3 mt-4",children:"Добавляйте объявления в избранное"}),r.jsx("p",{className:"mt-3",children:"Авторизируйтесь что-бы получать персональные скидки от застройщиков"})]})}),count:g.length}])},[f,g]),r.jsx(r.Fragment,{children:r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Избранное"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper--title",children:r.jsxs("div",{className:"container-desktop",children:[r.jsx("h1",{className:"title-1-5 mb-6 md1:mx-4 md1:mb-5",children:"Избранное"}),r.jsx(Uo,{data:e,defaultValue:a,navClassName:"md1:mx-4",onChange:y=>{var x;i({type:(x=_.find(b=>b.id===y))==null?void 0:x.name})}})]})})})]})})},NW=({bg:t=!0})=>r.jsxs("div",{className:`select-none rounded-xl ${t?"bg-white shadow p-4":""}`,children:[r.jsx(Fe,{className:"rounded-xl h-[226px] w-full"}),r.jsx("div",{className:"mt-4 flex justify-between gap-3",children:r.jsx(Fe,{className:"w-full h-12 rounded-xl"})}),r.jsxs("div",{className:"mt-6 flex items-center gap-3 w-full",children:[r.jsx(Fe,{className:"w-10 h-10 rounded-full"}),r.jsx(Fe,{className:"w-4/5 h-10 rounded-lg"})]})]}),gIe=()=>r.jsxs(dn,{children:[r.jsx("title",{children:"Скидки, акции"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),kW=({text:t,className:e="",onClick:n=()=>{}})=>r.jsx("button",{onClick:n,className:`red-link ${e}`,children:t}),vIe=()=>{const t=Dt(),{citiesData:e,filters:n,values:s}=v.useContext(t4);return r.jsxs(r.Fragment,{children:[r.jsx(vi,{nameLabel:"Город",options:e,value:s.city||{},onChange:i=>{t(cc({name:"city",value:i}))},search:!0}),r.jsx(yh,{nameLabel:"Застройщик",options:n.developers,onChange:i=>{t(cc({name:"developers",value:i}))},value:s.developers||[],search:!0,btnsActions:!0}),r.jsx(yh,{nameLabel:"Комплекс",options:n.complexes,onChange:i=>{t(cc({name:"complexes",value:i}))},value:s.complexes||[],search:!0,btnsActions:!0}),r.jsx(yh,{nameLabel:"Автор",options:n.authors,onChange:i=>{t(cc({name:"authors",value:i}))},value:s.authors||[],search:!0,btnsActions:!0})]})},yIe=()=>{const{reset:t}=v.useContext(t4);return r.jsxs(yd,{className:"grid-cols-[275px_275px_285px_255px_max-content] container",children:[r.jsx(vIe,{}),r.jsx(kW,{text:"Очистить",onClick:e=>{e.preventDefault(),t()}})]})},X8=(t,e="name",n="id")=>ew(t)?{label:t[e],value:t[n]}:{},XN=(t,e="name",n="id")=>no(t)?t.map(s=>({label:s[e],value:s[n]})):[],pl=(t={type:"tags"},e=!0)=>{const[n,s]=v.useState([]),i=async()=>{try{const a=await Ue("/api/tags",t);s(a.data)}catch{}};return v.useEffect(()=>{e&&i()},[e]),{tags:n,refetch:i}},AW=(t=!0,e=!0,n=!0)=>{const[s,i]=v.useState({tags:[],stickers:[],advantages:[]}),[a,o]=v.useState(!0),l=async(c=!1,u=!1,d=!1)=>{o(!0);try{const h=t||c?await Ue("/api/tags",{type:"tags"}):[],f=e||u?await Ue("/api/tags",{type:"stickers"}):[],p=n||d?await Ue("/api/tags",{type:"advantages"}):[];i({tags:h.data||[],stickers:f.data||[],advantages:p.data||[]})}catch{}finally{o(!1)}};return v.useEffect(()=>{l()},[]),{data:s,refetch:l,isLoading:a}},xIe=t=>{const{searchParamsTab:e,setTags:n,isLoading:s,setIsLoading:i,setBuildingData:a,fetch:o=()=>{},feedType:l="promo",totalPages:c,fetching:u,setFetching:d}=t,h=Dt(),f=ue(T=>T.feed),[p,g]=v.useState(!1),m=ue(Ci),_=ue(Qs),[y,x]=_r(),b=vs(),{tags:w}=pl({type:"tags",assigned:f.type},f.type);v.useEffect(()=>{const T=e.find(N=>N.value===b.tab)||e[0];h(Tk(T==null?void 0:T.value)),b.type==="complex"&&b.complex&&(Yh(b.complex).then(N=>{a(N)}),h(cc({name:"complexes",value:rw(b.complex)?[{value:+b.complex}]:b.complex.map(N=>({value:+N}))}))),b.developer&&Me("/api/developers/all",{city:f.values.city.value,assigned:l}).then(N=>{h(cc({name:"developers",value:XN(N.data).filter(P=>b.developer.includes(P.value.toString()))}))}),typeof b.author=="string"&&Ue(`/api/specialists/${b.author}`).then(N=>{h(cc({name:"authors",value:[{value:b.author,label:ks(N.data.name,N.data.surname),avatar:N.data.image}]}))})},[]),v.useEffect(()=>{if(m&&_.length!==0)if(b.city){const T=_.find(N=>N.name===b.city);h(cc({name:"city",value:X8(T)}))}else h(cc({name:"city",value:X8(m)}))},[_]),v.useEffect(()=>{b.filterHidden||Ye(f.values.city)||Me("/api/developers/all",{city:f.values.city.value,assigned:l}).then(T=>{h(FS({name:"developers",value:XN(T.data)}))})},[f.values.city]),v.useEffect(()=>{var T;b.filterHidden||Me("/api/developers/complexes",{developer_ids:(T=f.values.developers)==null?void 0:T.map(N=>N.value),assigned:l}).then(N=>{h(FS({name:"complexes",value:N.data}))})},[f.values.developers]),v.useEffect(()=>{var T,N;b.filterHidden||Me("/api/organization/specialists/all",{developer_ids:(T=f.values.developers)==null?void 0:T.map(P=>P.value),complex_ids:(N=f.values.complexes)==null?void 0:N.map(P=>P.value),assigned:l}).then(P=>{h(FS({name:"authors",value:P.data.map(I=>({value:I.id,label:ks(I.name,I.surname),avatar:I.image}))}))})},[f.values.complexes]);const C=v.useCallback(es(T=>{h($S(T.currentPage||1));const N={city:T.city?T.city.label:"",developer:Ye(T.developers)?null:T.developers.map(P=>P.value),complex:Ye(T.complexes)?null:T.complexes.map(P=>P.value),author:Ye(T.authors)?null:T.authors.map(P=>P.value),tags:Ye(T.tags)?null:T.tags,type:T.activeType,page:T.currentPage||1};o(N).then(()=>{const P=new URLSearchParams(y);Yt(P,"city",N.city,"string"),Yt(P,"developer",N.developer,"array"),Yt(P,"tags",N.tags,"array"),Yt(P,"tab",N.type,"string"),x(P),i(!1),d(!1),p||g(!0)})},350),[]);v.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"}),i(!0),h($S(1)),C({...f.values,activeType:f.type||(l==="promo"?"stocks":"videos")})},[f.values,f.type]),v.useEffect(()=>{n(w.filter(T=>T.city===m.name).map(T=>({value:T.id,label:T.name})))},[w]),v.useEffect(()=>(document.addEventListener("scroll",T=>{j(T,p)}),()=>{document.removeEventListener("scroll",T=>{j(T,p)})}),[p]);const j=v.useCallback(es((T,N)=>{const P=T.target.documentElement.scrollHeight;P-(T.target.documentElement.scrollTop+window.innerHeight)<P*1.05+700-P&&N&&d(!0)},100),[]),E=()=>{h(w7())};return v.useEffect(()=>{if(u&&!s){if(f.page+1>c){d(!1);return}C({...f.values,activeType:f.type||(l==="promo"?"stocks":"videos"),currentPage:f.page+1}),h($S(f.page+1))}},[u]),{cities:_,currentCity:m,feedSelector:f,params:b,reset:E}},DW=({children:t})=>{const e=Dt(),n=v.useContext(fw),{cities:s,currentCity:i,feedSelector:a,params:o}=xIe(n);return r.jsxs(t4.Provider,{value:{currentCity:{value:i.id,label:i.name},reset:()=>{e(w7())},filters:a.filters,values:a.values,params:o,citiesData:s==null?void 0:s.map(l=>({value:l.id,label:l.name})),tags:n.tags,isLoading:n.isLoading},children:[r.jsx(zn,{children:!o.filterHidden&&r.jsx("form",{children:r.jsx(yIe,{})})}),r.jsx("main",{className:He("main",!o.filterHidden&&"main-headerForm"),children:r.jsx("div",{className:"main-wrapper",children:t})})]})},PW=({tags:t=[],feedSelector:e})=>{const n=Dt();return!!t.length&&r.jsx(p4,{className:"flex gap-1.5 mb-5",data:t.map((s,i)=>({id:i,value:e.values.tags.find(a=>a===s.value),label:s.label,onClick:a=>{n(kse({value:a,option:s}))}}))})},IW=({title:t=""})=>{var i,a,o,l;const e=vs(),{buildingData:n}=v.useContext(fw),s=ue(c=>c.feed);return r.jsxs("h1",{className:"title-2 mb-4",children:[t,e.type==="complex"&&(n!=null&&n.title)?` в ${n==null?void 0:n.title}`:"",e.type==="developer"&&((i=s.values.developers[0])!=null&&i.label)?` застройщика «${(a=s.values.developers[0])==null?void 0:a.label}»`:"",e.type==="author"&&((o=s.values.authors[0])!=null&&o.label)?` менеджера «${(l=s.values.authors[0])==null?void 0:l.label}»`:""]})},bIe=({data:t,isLoading:e=!1,onDeleteCard:n=()=>{},type:s})=>{const[i,a]=v.useState(!1);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 md1:grid-cols-2 md3:grid-cols-1",children:[e?[...new Array(3)].map((o,l)=>r.jsx(NW,{bg:!1},l)):t&&t.length>0?t.map((o,l)=>v.createElement(ww,{deleteCard:()=>n(o.id),...o,key:l,controlsAdmin:!0,editCard:()=>{const c={...o,building_id:o.building_id,is_calculation:o.type==="calculations",is_news:o.type==="news"};a({data:c,refetchData:()=>{window.location.reload()}})}})):r.jsx("div",{className:"w-full col-span-3",children:r.jsx(Or,{block:!1})}),r.jsx(Ze,{condition:i,children:r.jsx(Wq,{data:i==null?void 0:i.data,set:a,refetchData:i==null?void 0:i.refetchData})})]})},_Ie=()=>{const t=vs(),e=ue(b=>b.feed),n=[{id:0,value:"stocks",label:"Скидки, акции"},{id:1,value:"news",label:"Подарки"},{id:2,value:"calculations",label:"Расчеты"}],s=Dt(),[i,a]=v.useState({}),[o,l]=v.useState(!0),[c,u]=v.useState(1),[d,h]=v.useState(!1),[f,p]=_r(),[g,m]=v.useState(null),[_,y]=v.useState([]),x=async b=>{const w={...b,limit:15};let C;t.type==="home"?C=await Ue("/api/home/promo",{per_page_promo:16,per_page_news:16,per_page_calc:16,city:b.city}).then(j=>({calculations:j.data.calculations||[],news:j.data.news||[],stocks:j.data.promos||[]})):C=await Me("/api/promos",w).then(j=>j.data),u(C.pages||1),a(j=>b.page===1?{...C}:{...C,[b.type]:[...j[b.type],...C[b.type]]})};return r.jsx(Vn,{helmet:r.jsx(gIe,{}),children:r.jsx(fw.Provider,{value:{searchParamsTab:n,tags:_,setTags:y,isLoading:o,setIsLoading:l,setDataCards:a,buildingData:g,setBuildingData:m,fetch:x,feedType:"promo",setTotalPages:u,totalPages:c,fetching:d,setFetching:h},children:r.jsx(DW,{children:r.jsxs("div",{className:"container-desktop",children:[r.jsxs("div",{className:"white-block",children:[r.jsx(IW,{title:"Скидки, акции"}),r.jsx(jl,{children:n.map((b,w)=>r.jsx(Tl,{border:!0,onChange:()=>{var E;const C=new URLSearchParams(f),j=(E=n.find(T=>T.id===w))==null?void 0:E.value;C.set("tab",j),p(C),s(Tk(j))},value:e.type===b.value,children:b.label},w))})]}),r.jsxs("div",{className:"white-block mt-3",children:[!!(_.length&&t.type!=="home")&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"title-3 mb-4",children:"Часто ищут"}),r.jsx(PW,{tags:_,feedSelector:e})]}),r.jsxs(zp,{className:"!mt-0",children:[r.jsx(bIe,{data:i[e.type],isLoading:o,onDeleteCard:b=>{a(w=>({...w,[e.type]:w[e.type].filter(C=>C.id!==b)}))},type:e.type}),!!(d&&c>=e.page)&&r.jsx("div",{className:"flex items-center mt-10",children:r.jsx(Ol,{className:"mx-auto"})})]}),t.type==="home"&&r.jsx("a",{href:`${ke.feedPromos}?tab=${e.type}`,className:"w-full mt-8",children:r.jsx(_e,{variant:"secondary",Selector:"div",children:"Смотреть всё"})})]})]})})})})},MW=({data:t,onDeleteCard:e=()=>{},onEditCard:n,controlsAdmin:s=!1,onlyImage:i=!1})=>{const[a,o]=v.useState(!1);return r.jsxs(r.Fragment,{children:[t.map((l,c)=>r.jsx(Ly,{data:l,setShortsOpen:()=>o(l.id),deleteCard:e,controlsAdmin:s,edit:n?()=>n(l):null,onlyImage:i},c)),r.jsx(Oy,{condition:a!==!1,set:o,data:t,startData:t.find(l=>l.id===a),startIndex:t.findIndex(l=>l.id===a)})]})},wIe=()=>r.jsxs(dn,{children:[r.jsx("title",{children:"Видео и Клипы"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),CIe=({data:t,isLoading:e=!1,onDeleteCard:n=()=>{}})=>{const s=ue(Qs),[i,a]=v.useState(!1);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 md1:grid-cols-2 md3:grid-cols-1",children:[e?[...new Array(6)].map((o,l)=>r.jsx(NW,{bg:!1},l)):t&&t.length>0?t.map((o,l)=>r.jsx($i,{data:o,userVisible:!0,controlsAdmin:!0,deleteCard:async c=>{await $_(c,o.building_id,s),n(c.id)},edit:c=>a({data:c,is_short:!1,refetchData:()=>{window.location.reload()}})},l)):r.jsx("div",{className:"w-full col-span-full",children:r.jsx(Or,{block:!1})}),r.jsx(Ze,{condition:i,children:r.jsx(BA,{data:i==null?void 0:i.data,set:a,is_short:i==null?void 0:i.is_short,refetchData:i==null?void 0:i.refetchData})})]})},SIe=({data:t,isLoading:e=!1,onDeleteCard:n=()=>{}})=>{const s=ue(Qs),[i,a]=v.useState(!1);return r.jsxs("div",{className:"grid grid-cols-5 gap-4 md1:grid-cols-4 md2:grid-cols-3 md3:grid-cols-2",children:[e?[...new Array(10)].map((o,l)=>r.jsxs("div",{className:"select-none rounded-xl",children:[r.jsx(Fe,{className:"rounded-xl h-[361px] w-full"}),r.jsx(Fe,{className:"mt-4 w-full h-8 rounded-xl"})]},l)):t&&t.length>0?r.jsx(MW,{data:t,controlsAdmin:!0,onDeleteCard:async o=>{await $_(o,o.building_id,s),n(o.id)},onEditCard:o=>{a({data:o,is_short:!0,refetchData:()=>{window.location.reload()}})}}):r.jsx("div",{className:"w-full col-span-full",children:r.jsx(Or,{block:!1})}),r.jsx(Ze,{condition:i,children:r.jsx(BA,{data:i==null?void 0:i.data,set:a,is_short:i==null?void 0:i.is_short,refetchData:i==null?void 0:i.refetchData})})]})},jIe=()=>{const t=vs(),e=Dt(),n=ue(b=>b.feed),s=[{id:0,value:"videos",label:"Видео"},{id:1,value:"shorts",label:"Клипы"}],[i,a]=v.useState({}),[o,l]=v.useState(!0),[c,u]=v.useState(1),[d,h]=v.useState(!1),[f,p]=_r(),[g,m]=v.useState(null),[_,y]=v.useState([]),x=async b=>{const w={...b,per_page:b.type==="videos"?18:b.type==="shorts"?25:16};if(t.type==="home"){await Ue("/api/home/video",{per_page_videos:40,per_page_shorts:40,city:w.city}).then(E=>{a({[w.type]:E.data[w.type],total:E.data[w.type].length})});return}const C=await Me("/api/feed/videos",w).then(E=>E.data),j=C[w.type].length?await Ue("/api/video-url",{url:C[w.type]}).then(E=>E.data):[];u(C.pages||1),a(E=>({pages:C.pages,total:C.total,[b.type]:b.page===1?[...j]:[...E[b.type],...j]}))};return r.jsx(Vn,{helmet:r.jsx(wIe,{}),children:r.jsx(fw.Provider,{value:{searchParamsTab:s,tags:_,setTags:y,isLoading:o,setIsLoading:l,setDataCards:a,buildingData:g,setBuildingData:m,fetch:x,feedType:"video",setTotalPages:u,totalPages:c,fetching:d,setFetching:h},children:r.jsx(DW,{children:r.jsxs("div",{className:"container-desktop",children:[r.jsxs("div",{className:"white-block",children:[r.jsx(IW,{title:"Видео и Клипы"}),r.jsx(jl,{children:s.map((b,w)=>r.jsx(Tl,{border:!0,onChange:()=>{var E;const C=new URLSearchParams(f),j=(E=s.find(T=>T.id===w))==null?void 0:E.value;C.set("tab",j),p(C),e(Tk(j))},value:n.type===b.value,children:b.label},w))})]}),r.jsxs("div",{className:"white-block mt-3",children:[!!(_.length&&t.type!=="home")&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"title-3 mb-4",children:"Часто ищут"}),r.jsx(PW,{tags:_,feedSelector:n})]}),r.jsxs(zp,{className:"!mt-0",children:[n.type==="videos"?r.jsx(CIe,{data:i.videos,isLoading:o,onDeleteCard:b=>{a(w=>({...w,[n.type]:w[n.type].filter(C=>C.id!==b)}))}}):r.jsx(SIe,{data:i.shorts,isLoading:o,onDeleteCard:b=>{a(w=>({...w,[n.type]:w[n.type].filter(C=>C.id!==b)}))}}),!!(d&&c>=n.page)&&r.jsx("div",{className:"flex items-center mt-10",children:r.jsx(Ol,{className:"mx-auto"})})]}),t.type==="home"&&r.jsx("a",{href:`${ke.feedVideos}?tab=${n.type}`,className:"w-full mt-8",children:r.jsx(_e,{variant:"secondary",Selector:"div",children:"Смотреть всё"})})]})]})})})})},TIe=()=>r.jsxs("div",{className:"white-block-small grid grid-cols-[1fr_500px] gap-8 md1:gap-4 relative md1:flex md1:flex-col-reverse",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx(Fe,{className:"w-2/5 h-6 rounded-lg"}),r.jsx(Fe,{className:"w-4/5 h-10 rounded-lg mt-4"}),r.jsx(Fe,{className:"w-3/5 h-4 rounded-lg mt-2"}),r.jsx(Fe,{className:"w-3/5 h-4 rounded-lg mt-2"}),r.jsx(Fe,{className:"w-full h-10 rounded-lg mt-4"}),r.jsxs("div",{className:"mt-6 flex items-center gap-3 w-full",children:[r.jsx(Fe,{className:"w-10 h-10 rounded-full"}),r.jsx(Fe,{className:"w-4/5 h-10 rounded-lg"})]}),r.jsxs("div",{className:"mt-6 flex gap-2 items-center",children:[r.jsx(Fe,{className:"w-6/12 h-10 rounded-lg"}),r.jsx(Fe,{className:"w-10 h-10 rounded-lg"}),r.jsx(Fe,{className:"w-10 h-10 rounded-lg"}),r.jsx(Fe,{className:"w-10 h-10 rounded-lg"})]})]}),r.jsx(Fe,{className:"w-full h-full rounded-xl min-h-[240px]"})]}),OW=({data:t,specialists:e=[],loading:n=!1})=>{var a,o,l,c,u,d,h;const[s,i]=v.useState(!1);return n?r.jsx(TIe,{}):r.jsxs("div",{className:"white-block-small grid grid-cols-[1fr_500px] gap-8 md1:gap-4 relative md1:flex md1:flex-col-reverse",children:[r.jsx(Ke,{to:`${ke.building}${t.id}`,className:"CardLinkElement"}),r.jsxs("div",{className:"flex flex-col",children:[!!(t.cashback||t.present||(a=t.stickers)!=null&&a.length)&&r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.cashback&&t.max_price?r.jsx(Sa,{cashback:t.max_price/100*t.cashback}):"",t.present&&r.jsx(pd,{present:t.present}),!!((o=t.stickers)!=null&&o.length)&&t.stickers.map(f=>r.jsx(Ah,{top:f.name},f.id))]}),!!((l=t.tags)!=null&&l.length)&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5 w-full",children:r.jsx(Sl,{data:t.tags})}),r.jsx("h2",{className:"title-2 mt-4 mb-2",children:t.title}),r.jsxs("p",{className:"mb-1 text-primary400",children:["Срок сдачи: ",t.deadline]}),r.jsx("div",{className:"mb-1",children:[t.city,t.address].filter(f=>f).join(", ")}),r.jsx(Em,{data:t.metro,visibleItems:99}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[r.jsxs("h3",{className:"title-2",children:["от ",pt(t.minPrice||0)," ₽"]}),r.jsxs("div",{className:"text-primary500",children:[pt(t.minPricePerMeter||0)," ₽/м²"]})]}),r.jsx("div",{className:"mt-6 mb-3",children:r.jsx(Vs,{avatar:(c=t.developer)==null?void 0:c.avatarUrl,name:(u=t.developer)==null?void 0:u.name,pos:(d=t.developer)==null?void 0:d.pos})}),r.jsxs("div",{className:"mt-auto flex gap-2 items-center",children:[r.jsx(_e,{Selector:"div",variant:"secondary",size:"Small",children:"Подробнее о ЖК"}),r.jsx(zh,{id:t.id,type:"complex",variant:"tooltip",placement:"bottom",className:"relative z-10"}),r.jsx(Uc,{id:t.id,type:"complex",variant:"tooltip",placement:"bottom",className:"relative z-10"}),r.jsx($t,{placement:"bottom",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>i(!0),children:r.jsx(wl,{width:15,height:15,className:"pointer-events-none"})}),children:"Показать на карте"})]})]}),t.gallery&&r.jsx(xy,{href:`${ke.building}${t.id}`,images:(h=t.gallery)==null?void 0:h.map(f=>f.images).flat(),title:t.title,className:"h-full !max-h-none"}),r.jsx(by,{condition:s,set:i,geo:t.location})]})},EIe=()=>{const t=vs(),[e,n]=v.useState({}),[s,i]=v.useState(!0),[a,o]=v.useState([]);return v.useEffect(()=>{t.complex&&(Yh(t.complex).then(l=>{n({...l,feed:Kw(l.stock.map(c=>({...c,type:"stock"})),l.calculations.map(c=>({...c,type:"calculation"})),l.news.map(c=>({...c,type:"news"})),l.videos.map(c=>({link:c,type:"video"})),l.shorts.map(c=>({link:c,type:"short"})))}),i(!1)}),Xh(t.complex).then(l=>o(l)))},[]),r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Лента"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[r.jsx(zn,{maxWidth:972}),r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper",children:r.jsxs("div",{className:"container-desktop mmd1:!max-w-[972px]",children:[!!t.complex&&r.jsx("div",{className:"mb-3",children:e&&r.jsx(OW,{data:e,specialists:a,loading:s})}),r.jsxs(ea,{className:"!grid-cols-[615px_1fr]",children:[r.jsx("div",{className:"flex flex-col gap-3 min-w-0",children:r.jsx("div",{className:"white-block !p-5",children:r.jsx(Gq,{data:e.feed,emptyText:"",isLoadingData:s})})}),r.jsx(lo,{children:r.jsxs("div",{className:"white-block-small !p-5",children:[r.jsxs("h3",{className:"title-4",children:["Менеджеры отдела продаж",r.jsx("span",{className:"ml-2 text-primary400 font-medium",children:a.length})]}),!!a.length&&r.jsx("div",{className:"mt-4 grid grid-cols-4 gap-x-2 gap-y-4",children:a.map(l=>r.jsxs(Rl,{to:`${ke.specialists.inner}${l.id}`,className:"flex flex-col items-stretch",children:[r.jsx(Nn,{src:l.avatar,className:"mx-auto",size:64,title:l.name}),r.jsx("p",{className:"mt-1 cut-one text-small",children:uw(l.name,l.surname)})]},l.id))})]})})]})]})})})]})},NIe=()=>r.jsxs(dn,{children:[r.jsx("title",{children:"Главная"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),Rd={loading:!0,isVisible:!0,data:[]},kIe=()=>{const t=ue(Ci),[e,n]=v.useState(sn.name),s=ue(Ot),i=ue(n9),[a,o]=v.useState(Rd),[l,c]=v.useState(Rd),[u,d]=v.useState(Rd),[h,f]=v.useState(Rd),[p,g]=v.useState(Rd),[m,_]=v.useState(Rd),[y,x]=v.useState(Rd),b=async()=>{try{const{data:C}=await Ue("/api/home/video",{per_page_videos:20,per_page_shorts:20,city:t.name});d({loading:!1,data:C.videos,isVisible:C.videos.length>0}),f({loading:!1,data:C.shorts,isVisible:C.shorts.length>0})}catch(C){console.log(C)}},w=async()=>{try{const{data:C}=await Ue("/api/home/promo",{per_page_promo:3,per_page_news:3,per_page_calc:3,city:t.name});c({loading:!1,data:C})}catch(C){console.log(C)}};return v.useEffect(()=>{if(!t.id)return;(async()=>{await Ue("/api/banners?page=1&limit=10",{city:t.name}).then(j=>{x({loading:!1,data:j.data.items,isVisible:j.data.items.length>0})}),await Ue("/api/home/cashback",{per_page_cashback:3,city:t.name}).then(j=>{o({loading:!1,data:j.data,isVisible:j.data.length>0})}),await w(),await b(),await Ue("/api/home/recommended",{per_page_recommended_apartment:3,per_page_recommended_building:3,city:t.name}).then(j=>{const E=Xw(j.data);g({loading:!1,data:E,isVisible:E.length>0,apartments:j.data.apartments,buildings:j.data.buildings})}),Ue("/api/home/orders",{per_page_order:5,city:t.id}).then(j=>{_({loading:!1,data:j.data,isVisible:j.data.length>0})})})()},[t.id]),v.useEffect(()=>{Si(s)?n(pn.name):hd(s)?n(Wt.name):n(sn.name)},[s]),{cashbackCards:a,promoCards:l,videoCards:u,shortsCards:h,recommendedCards:p,ordersCards:m,banners:y,userRole:e,authLoading:i,getVideo:b,getPromo:w}},AIe=[{name:"Новостройки",link:ke.listing,image:"https://statics.dmclk.ru/confer/static/3610/998908/c946d7f/ec6aeb92321cfd50c2da.png"},{name:"Застройщики",link:ke.developers.list,image:"https://img.dmclk.ru/s200x200q80/blog/frame-270988339.webp"},{name:"Менеджеры",link:ke.specialists.list,image:"https://statics.dmclk.ru/confer/static/3610/998908/c946d7f/4b5da8dd76d8771779a0.png"},{name:"Заявки",link:ke.purchase.list,image:"https://statics.dmclk.ru/confer/static/3610/998908/c946d7f/7303e2cd8f5dc323b76e.png"},{name:"Скидки и подарки",link:ke.feedPromos,image:"https://statics.dmclk.ru/confer/static/3610/998908/c946d7f/098a7ca7a63fd7c0a6a1.png"},{name:"Видео и Клипы",link:ke.feedVideos,image:"https://statics.dmclk.ru/confer/static/3610/998908/c946d7f/919e993efd94bbaa921e.png"},{name:"Чат",link:Ji.chat,image:"https://statics.dmclk.ru/confer/static/3610/998908/c946d7f/fe9881e6babbec2bd8ff.png",authRequired:!0,mobileFull:!0}],DIe=()=>{const t=Dt(),e=ue(Ks),n=ue(rt);return r.jsx("section",{children:r.jsx("div",{className:"container-desktop",children:r.jsx("div",{className:"white-block-small flex gap-2 w-full md1:grid md1:grid-cols-2 md1:gap-2",children:AIe.map((s,i)=>r.jsxs("button",{onClick:()=>{s.authRequired&&!e?t(Bs(!0)):window.open(s.link,"_blank")},style:{width:`${n?s.width||150:115}px`,minWidth:`${n?s.width||150:115}px`},className:He("h-[90px] border border-solid border-primary800 bg-white rounded-xl relative hover:bg-primary100 hover:-translate-y-1.5 transition-all flex-grow flex-shrink basis-0 md1:flex items-center md1:!w-full md1:h-[60px] md1:px-4 md1:gap-2",s.mobileFull&&"col-span-2 justify-center"),children:[r.jsx("div",{className:"mmd1:absolute bottom-0 right-0",children:r.jsx("img",{src:s.image,width:n?44:24,height:n?44:24})}),r.jsx("span",{className:"text-left block mmd1:absolute top-3 left-3 z-20 font-medium",children:s.name})]},i))})})})},PIe="_titleIconRoot_sx45p_1",IIe="_icon_sx45p_13",MIe="_link_sx45p_29",Xj={titleIconRoot:PIe,icon:IIe,link:MIe},pD=({icon:t,text:e="",link:n,className:s=""})=>{const i=ue(rt);return r.jsxs("div",{className:He(Xj.titleIconRoot,s),children:[r.jsx("div",{className:Xj.icon,children:t}),r.jsx("h2",{className:`title-2 ${i?"":"title-3"}`,children:e}),i&&n&&r.jsx("a",{href:n.href,target:"_blank",className:Xj.link,children:n.name})]})},OIe="_bannerInfo_1vf1g_1",RIe={bannerInfo:OIe},LIe=({backgroundColor:t,children:e,className:n=""})=>r.jsx("div",{className:`${RIe.bannerInfo} ${n}`,style:{backgroundColor:t},children:e}),BIe=()=>{const[t,e]=v.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs(LIe,{className:"mt-3",children:[r.jsx("h3",{className:"title-3",children:"Получите кешбэк при покупке квартиры"}),r.jsx(_e,{className:"md1:w-full",onClick:()=>e(!0),children:"Узнать больше"})]}),r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_right",modalClassNames:"mmd1:!max-w-[550px]"},children:[r.jsx("h2",{className:"title-2 mb-6",children:"Вопросы и ответы"}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"bg-primary700 rounded-[20px] p-5",children:[r.jsx("h3",{className:"title-3 mb-2",children:"Как получить кешбэк?"}),r.jsxs("ul",{className:"list-disc ml-5 mb-3",children:[r.jsxs("li",{children:["Авторизуйтесь на портале ",r.jsx(Ke,{to:"/",className:"blue-link",children:"Inrut.ru"})]}),r.jsxs("li",{children:["Найдите недвижимость с бейджиком ",r.jsx(An,{size:"small",color:"green",className:"!inline",children:"Кешбэк"}),", на котором указана сумма кешбэка, которую вы получите после покупки квартиры."]}),r.jsxs("li",{children:["Совершите покупку с помощью портала ",r.jsx(Ke,{to:"/",className:"blue-link",children:"Inrut.ru"})]}),r.jsxs("li",{children:["После покупки в течение 30 суток кешбэк будет начислен в ваш ",r.jsx(Ke,{to:Fn.walletPage,className:"blue-link",target:"_blank",children:"кошелёк."})]})]})]}),r.jsxs("div",{className:"bg-primary700 rounded-[20px] p-5",children:[r.jsx("h3",{className:"title-3 mb-2",children:"В каком случае я не получу кешбэк?"}),r.jsxs("ul",{className:"list-disc ml-5 mb-3",children:[r.jsxs("li",{children:["Если вы не авторизовались на портале ",r.jsx(Ke,{to:"/",className:"blue-link",children:"Inrut.ru"})]}),r.jsxs("li",{children:["Если вы совершили покупку не через портал ",r.jsx(Ke,{to:"/",className:"blue-link",children:"Inrut.ru"})]}),r.jsx("li",{children:"Если вы отменили покупку."})]})]})]}),r.jsx(Ke,{to:ke.cashbackConditions,className:"blue-link font-medium mt-4",target:"_blank",children:"Условия акции «Кешбэк»"})]})})]})},FIe=()=>{const{cashbackCards:t}=v.useContext(Ym),e=ue(rt);if(t.data.length)return r.jsx("section",{className:"mt-3",children:r.jsxs("div",{className:"container-desktop",children:[r.jsxs("div",{className:"white-block",children:[r.jsx(pD,{icon:r.jsx(Fie,{width:24,height:24}),text:"Повышенный кешбэк",link:{href:`${ke.listing}?home=1`,name:"Смотреть всё"}}),r.jsxs(Xs,{modules:[xi],slidesPerView:t.data.length>1?1.05:1,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:16,breakpoints:{799:{slidesPerView:2,spaceBetween:24},1222:{slidesPerView:3,spaceBetween:24}},className:"md1:px-4 md1:-mx-4",children:[t.data.map((n,s)=>r.jsx(Tn,{children:r.jsx(Ll,{...n,className:"h-full"})},s)),e&&r.jsxs(r.Fragment,{children:[r.jsx(ho,{disabled:!0,className:"slider-btn-prev !absolute top-[95px] left-4"}),r.jsx(fo,{className:"slider-btn-next !absolute top-[95px] right-4"})]})]})]}),r.jsx(BIe,{})]})})},$Ie=()=>{const{videoCards:t,shortsCards:e,getVideo:n}=v.useContext(Ym);if(Kw(t.data,e.data).length)return r.jsx("section",{className:"mt-3",children:r.jsx("div",{className:"container-desktop",children:r.jsx(Rh,{data:[...t.data.map(s=>({...s,type:"video"})),...e.data.map(s=>({...s,type:"short"}))],data_type:"data",customHref:`${ke.feedVideos}?type=home&filterHidden=1`,refetchData:{videos:n,shorts:n}})})})},UIe=()=>{const{promoCards:t,getPromo:e}=v.useContext(Ym);if(Xw(t.data).length)return r.jsx("section",{className:"mt-3",children:r.jsx("div",{className:"container-desktop",children:r.jsx(Rh,{data:[...t.data.promos.map(n=>({...n,type:"stock"})),...t.data.calculations.map(n=>({...n,type:"calculation"})),...t.data.news.map(n=>({...n,type:"news"}))],data_type:"data",customHref:`${ke.feedPromos}?type=home&filterHidden=1`,refetchData:{promos:e}})})})},VIe=()=>{var n;const{recommendedCards:t}=v.useContext(Ym),e=ue(rt);if((n=t.data)!=null&&n.length)return r.jsx(r.Fragment,{children:!!t.buildings.length&&r.jsx("section",{className:"mt-3",children:r.jsx("div",{className:"container-desktop",children:r.jsxs("div",{className:"white-block",children:[r.jsx(pD,{icon:r.jsx(zie,{width:24,height:24}),text:"Скидки",link:{name:"Смотреть всё"}}),r.jsxs(Xs,{modules:[xi],slidesPerView:t.buildings.length>1?1.05:1,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:16,breakpoints:{799:{slidesPerView:2,spaceBetween:24},1222:{slidesPerView:3,spaceBetween:24}},className:"md1:px-4 md1:-mx-4",children:[t.buildings.map(s=>r.jsx(Tn,{children:r.jsx(Ll,{...s})},s.id)),e&&r.jsxs(r.Fragment,{children:[r.jsx(ho,{disabled:!0,className:"slider-btn-prev !absolute top-[95px] left-4"}),r.jsx(fo,{className:"slider-btn-next !absolute top-[95px] right-4"})]})]})]})})})})},RW=()=>{var a;const t=ue(Ks),e=ue(Ot),n=Dt(),s=((a=e==null?void 0:e.counts)==null?void 0:a.dialogs)||0,i=()=>{t?e4():n(Bs(!0))};return r.jsxs("button",{type:"button",onClick:i,className:He("fixed bottom-4 right-4 flex-center-all w-14 h-14 bg-blue rounded-xl z-[9999]"),children:[!!s&&r.jsx("div",{className:"bg-dark text-white rounded-full w-5 h-5 text-[12px] leading-none flex-center-all -top-2 -right-2 absolute",children:s}),r.jsx(vm,{width:22,height:22,className:"fill-white"})]})},K8=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[e[n],e[s]]=[e[s],e[n]]}return e},zIe=()=>{const{videoCards:t,shortsCards:e,getVideo:n}=v.useContext(Ym);ue(rt);const[s,i]=v.useState([]),[a,o]=v.useState([]);if(v.useEffect(()=>{t.data.length&&i(K8(t.data).slice(0,5))},[t.data]),v.useEffect(()=>{e.data.length&&o(K8(e.data).slice(0,3))},[e.data]),!!Kw(t.data,e.data).length)return r.jsx("div",{className:"container mt-3",children:r.jsxs("div",{className:"white-block",children:[r.jsx(pD,{icon:r.jsx(mae,{width:20,height:20}),text:"Видео и клипы"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[!!s[0]&&r.jsx($i,{data:s[0],userVisible:!0,visibleContent:!1}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("div",{className:"w-[240px]",children:!!s[1]&&r.jsx($i,{data:s[1],userVisible:!0,visibleContent:!1})}),r.jsx("div",{className:"w-[290px]",children:!!s[2]&&r.jsx($i,{data:s[2],userVisible:!0,visibleContent:!1})})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex gap-2 items-end",children:[r.jsx("div",{className:"w-[290px]",children:!!s[3]&&r.jsx($i,{data:s[3],userVisible:!0,visibleContent:!1})}),r.jsx("div",{className:"w-[240px]",children:!!s[4]&&r.jsx($i,{data:s[4],userVisible:!0,visibleContent:!1})})]}),r.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:r.jsx(MW,{data:a,onlyImage:!0})})]})]})]})})},Ym=v.createContext(),Q8=()=>{const t=kIe(),[e]=ur(),{userRole:n,authLoading:s,banners:i}=t,a=Mr(),o=ue(rt);if(v.useEffect(()=>{n===Wt.name&&a(At.home)},[n]),!(e.loggedIn&&s))return r.jsxs(Vn,{helmet:r.jsx(NIe,{}),children:[r.jsx(zn,{}),r.jsxs("main",{className:"main",children:[r.jsx("h1",{className:"visually-hidden",children:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),r.jsx("div",{className:"main-wrapper",children:r.jsxs(Ym.Provider,{value:{...t},children:[r.jsx(DIe,{}),o&&r.jsx(zIe,{}),r.jsx(FIe,{}),!o&&r.jsx($Ie,{}),r.jsx(UIe,{}),r.jsx(VIe,{})]})})]}),r.jsx(RW,{})]})},HIe="_ModalFormRoot_1nbac_2",qIe={ModalFormRoot:HIe},Z8=({options:t,type:e="single",onChange:n=()=>{},value:s=[]})=>{const[i,a]=v.useState(s),o=(l,c)=>{e==="multiple"&&a(l?[...i,c]:[...i].filter(u=>u.value!==c.value)),e==="single"&&a(l?[c]:[])};return v.useEffect(()=>{n(i)},[i]),v.useEffect(()=>{a(s)},[s]),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((l,c)=>r.jsx(An,{color:"select",onClick:u=>o(u,l),value:i.find(u=>u.value===l.value),children:l.label},c))})},WIe=({control:t,errors:e,name:n="",options:s=[],defaultValue:i=[],className:a=""})=>{const o=(l,c)=>{l?c.onChange([s[0].value]):c.onChange([s[1].value])};return r.jsx(Ir,{name:n,control:t,defaultValue:i,render:({field:l})=>r.jsx(An,{color:"select",onClick:c=>{o(c,l)},value:l.value.includes(s[0].value),children:s[0].label})})},mD=t=>{var d,h,f;const{data:e,control:n,nameOptions:s="options",defaultValues:i=[],className:a=""}=t,o=((d=e.name)==null?void 0:d.toString())||"",l=((h=e[s])==null?void 0:h.map(p=>({label:p,value:p})))||[],c=i.filter(p=>p&&!Ye(p)&&p.name===o);let u=null;if(c&&!Ye(c)&&(e.type==="list-multiple"?u=c.map(p=>({value:p.value.split(", "),label:p.name})):u={value:c[0].value,label:c[0].value}),e.type==="text-field"||e.type==="number-field")return r.jsx(Qe,{className:a,control:n,onlyNumber:e.type==="number-field",beforeText:e.name,afterText:e.postfix,name:o,defaultValue:(u==null?void 0:u.value)||""});if(e.type==="list-single")return r.jsx(nn,{name:e.name,widthChildren:460,className:a,children:r.jsx(_c,{control:n,options:l,name:e.name,type:"single",defaultValue:u?[u.value]:[]})});if(e.type==="list-multiple")return r.jsx(nn,{name:e.name,widthChildren:460,className:a,children:r.jsx(_c,{control:n,options:[{value:"all",label:"Не важно"},...l],name:e.name,type:"placeholder-required",defaultValue:((f=u==null?void 0:u[0])==null?void 0:f.value)||["all"]})});if(e.type==="flag")return r.jsx(nn,{name:o,widthChildren:460,className:a,children:r.jsx(WIe,{control:n,options:l,name:o,defaultValue:u?u.value:l[1].value})})},J8=t=>{const{data:e,filtersSelector:n,widthChildren:s=460}=t;if(e.type==="list-multiple"&&!Ye(e.options))return r.jsx(nn,{name:e.nameLabel||e.label,widthChildren:s,classNameName:"font-medium",children:r.jsx(yh,{options:e.options,value:e.value,onChange:i=>t.handleChange(e.name,i,e.type),search:!0,btnsActions:!0})});if(e.type==="list-single"&&!Ye(e.options))return r.jsx(nn,{name:e.nameLabel||e.label,widthChildren:s,classNameName:"font-medium",children:r.jsx(vi,{options:e.options,value:e.value,onChange:i=>t.handleChange(e.name,i,e.type),defaultOption:!0})});if(e.type==="tags-single"&&!Ye(e.options))return r.jsx(nn,{name:e.nameLabel||e.label,widthChildren:s,classNameName:"font-medium",children:r.jsx(Z8,{onChange:i=>t.handleChange(e.name,i,e.type),value:e.value,options:e.options.filter(i=>i.value)})});if(e.type==="tags-multiple"&&!Ye(e.options))return r.jsx(nn,{name:e.nameLabel||e.label,widthChildren:99999,classNameName:"font-medium",infoTooltip:e.name==="Отделка"&&r.jsxs("div",{className:"max-w-[220px] flex flex-col gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"title-4 !text-white",children:"Черновая"}),r.jsx("p",{className:"mt-1.5",children:"В черновой отделке встречаются помещения без межкомнатных перегородок. Электричество проведено до щитка в подъезде. Радиаторов отопления может не быть — только трубы. Стены не оштукатурены. Нет откосов, подоконников и сантехники"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"title-4 !text-white",children:"Предчистовая"}),r.jsx("p",{className:"mt-1.5",children:"В предчистовой отделке или whitebox стены и потолки белые, покрыты шпаклёвкой. На полу ровная чистовая стяжка. Сделана электрика. Трубы в ванной и на кухне разведены"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"title-4 !text-white",children:"Чистовая"}),r.jsx("p",{className:"mt-1.5",children:"Квартира с такой отделкой готова к переезду: на стенах — обои или краска, на полу — ламинат или линолеум. Розетки и выключатели установлены. Есть сантехника. Иногда застройщики устанавливают базовую мебель"})]})]}),children:r.jsx(Z8,{type:"multiple",onChange:i=>t.handleChange(e.name,i,e.type),value:e.value,options:e.options.filter(i=>i.value)})});if(e.type==="field-fromTo"&&!Ye(e.options)){const{from:i,to:a}=e;return r.jsx(nn,{name:e.nameLabel||e.label,widthChildren:s,classNameName:"font-medium",children:r.jsxs(_l,{children:[r.jsx(kn,{value:n[e.name].value[i.name],onChange:o=>t.handleChangeInput(e.name,i.name,o),before:i.label,convertNumber:!0,onlyNumber:!0,maxLength:3}),r.jsx(kn,{value:n[e.name].value[a.name],onChange:o=>t.handleChangeInput(e.name,a.name,o),before:a.label,after:e.postfix,convertNumber:!0,onlyNumber:!0,maxLength:3})]})})}},GIe="_MapLocationRoot_1g4sb_1",YIe="_MapLocationGo_1g4sb_9",eR={MapLocationRoot:GIe,MapLocationGo:YIe};function fC(){ymaps.modules.define("ext.paintOnMap",["meta","util.extend","pane.EventsPane","Event"],function(t,e,n,s,i){var a=500,o=["drag","scrollZoom"],l={strokeColor:"#0000ff",strokeWidth:1,strokeOpacity:1},c=16,u=function(){throw new Error("(ymaps.ext.paintOnMap) некорректный вызов PaintingProcess#finishPaintingAt. Рисование уже завершено.")};function d(p,g,m){m=m||{};var _=n(l,m.style||{}),y=m.unwantedBehaviors===void 0?o:m.unwantedBehaviors,x=new s(p,{css:{position:"absolute",width:"100%",height:"100%"},zIndex:a+50,transparent:!0});p.panes.append("ext-paint-on-map",x),y&&p.behaviors.disable(y);var b=document.createElement("canvas"),w=b.getContext("2d"),C=p.container.getParentElement().getBoundingClientRect();b.width=C.width,b.height=C.height,w.globalAlpha=_.strokeOpacity,w.strokeStyle=_.strokeColor,w.lineWidth=_.strokeWidth,b.style.width="100%",b.style.height="100%",x.getElement().appendChild(b);var j=g?h(g):null,E=j?[j]:[],T=p.getBounds(),N=T[1][0]-T[0][0],P=T[1][1]-T[0][1];b.onmousemove=(function(B){E.push([B.offsetX,B.offsetY]),w.clearRect(0,0,b.width,b.height),w.beginPath(),w.moveTo(E[0][0],E[0][1]);for(var U=1;U<E.length;U++)w.lineTo(E[U][0],E[U][1]);w.stroke()}).bind(this);var I={finishPaintingAt:function(B){I.finishPaintingAt=u,B&&E.push(h(B)),p.panes.remove(x),y&&p.behaviors.enable(y);var U=m.tolerance===void 0?c:Number(m.tolerance);return U&&(E=f(E,U)),E.map(function(z){var G=T[0][1]+z[0]/b.width*P,V=T[0][0]+(1-z[1]/b.height)*N;return e.coordinatesOrder==="latlong"?[V,G]:[G,V]})}};return I}function h(p){return p instanceof i?[p.get("offsetX"),p.get("offsetY")]:p}function f(p,g){for(var m=g*g,_=[p[0]],y=p[0],x=1;x<p.length;x++){var b=p[x];Math.pow(y[0]-b[0],2)+Math.pow(y[1]-b[1],2)>m&&(_.push(b),y=b)}return _}t(d)})}function LW(t,e){const n=t[0],s=t[1];let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a][0],c=e[a][1],u=e[o][0],d=e[o][1];c>s!=d>s&&n<(u-l)*(s-c)/(d-c)+l&&(i=!i)}return i}const BW=t=>{for(var e=0,n=0,s=t.length,i=0;i<s;i++)e+=t[i][0],n+=t[i][1];var a=e/s,o=n/s;return[a,o]};let du=[],lc={};const KN=()=>{var t;du=[],(t=lc.removeAll)==null||t.call(lc)},XIe=({setModal:t})=>{const e=Dt(),n=ue(rt),s=ue(nw),i=ue(z=>z.listing.resultFilters),a=ue(z=>z.listing),[o,l]=v.useState(!1),[c,u]=v.useState(null),d=v.useRef(null);let h=!1;const[f,p]=v.useState(!1),[g,m]=v.useState(!1),[_,y]=v.useState({}),x=v.useRef(null),[b,w]=v.useState(null),[C,j]=v.useState([]),[E,T]=v.useState(!0);v.useEffect(()=>{const z=S$();z?z.then(()=>{l(!0)}):l(!0)},[]),v.useEffect(()=>{a.mapLocationCoordinates.length===0&&Ye(lc)},[a.mapLocationCoordinates]),v.useEffect(()=>{if(!s)return;(async()=>{try{const G=await uD(s);y(G)}catch{}})()},[s]),v.useEffect(()=>{if(!C||!s||Ye(i))return;T(!0);const z={...i,...du.length>0?{visibleObjects:[...C]}:{},city:s,sort:a.sortBy};z.visibleObjects&&z.visibleObjects.length===0&&(z.visibleObjects=null),Me("/api/catalog/geo",z).then(G=>{T(!1),w(G.data.placemarks.length)})},[C,s,i]);const N=()=>{try{ymaps.ready(I)}catch{}};v.useEffect(()=>{o&&!Ye(_)&&!c&&N()},[o,c,_]);const P=z=>{const G=[];z.forEach(V=>{LW(V.coordinates,du.flat(1))&&G.push(V)}),j(G.map(V=>V.id))};function I(){fC(),ymaps.ready(["ext.paintOnMap"]).then(function(){const z=new ymaps.Map("customMap2",{center:_.coordinates,zoom:12,controls:[]});u(z);let G;lc=new ymaps.GeoObjectCollection,z.geoObjects.add(lc),x.current.addEventListener("click",()=>{h=!h,p(V=>!V),h?x.current&&x.current.classList.add("ymap-action-active"):x.current&&x.current.classList.remove("ymap-action-active")}),z.events.add("mousedown",function(V){h&&(G=ymaps.ext.paintOnMap(z,V,{style:zu}))}),z.events.add("mouseup",function(V){if(G){let J;h=!1,p(!1);let Q=G.finishPaintingAt(V);e(B1([...du,Q])),du.push(Q),G=null;let Y=new ymaps.Polygon([Q],{},zu);Y.myCoordinates=Q,Y.events.add("mouseenter",oe=>{oe.get("target").options.set(s_);const he=oe.get("target").myCoordinates,me=ymaps.templateLayoutFactory.createClass(`
                           <button class="ymap-action ymap-action-btn !w-[32px] !h-[32px] -translate-x-4 -translate-y-4">
                           <svg width="14" height="14" viewBox="0 0 512 512" xml:space="preserve"><g><path d="M490.667,96c0-17.673-14.327-32-32-32h-80.555C364.632,25.757,328.549,0.13,288,0h-64   c-40.549,0.13-76.632,25.757-90.112,64H53.333c-17.673,0-32,14.327-32,32l0,0c0,17.673,14.327,32,32,32H64v266.667   C64,459.468,116.532,512,181.333,512h149.333C395.468,512,448,459.468,448,394.667V128h10.667   C476.34,128,490.667,113.673,490.667,96z M384,394.667C384,424.122,360.122,448,330.667,448H181.333   C151.878,448,128,424.122,128,394.667V128h256V394.667z"></path><path d="M202.667,384c17.673,0,32-14.327,32-32V224c0-17.673-14.327-32-32-32s-32,14.327-32,32v128   C170.667,369.673,184.994,384,202.667,384z"></path><path d="M309.333,384c17.673,0,32-14.327,32-32V224c0-17.673-14.327-32-32-32s-32,14.327-32,32v128   C277.333,369.673,291.66,384,309.333,384z"></path></g></svg>
                           </button>
                        `);J=new ymaps.Placemark(BW(he),{},{iconLayout:me}),z.geoObjects.add(J)}).add("mouseleave",oe=>{oe.get("target").options.set(r_),z.geoObjects.remove(J)}).add("click",async oe=>{let he=oe.get("target");e(B1(du.filter(me=>me!==he.myCoordinates))),du=du.filter(me=>me!==he.myCoordinates),lc.remove(he),J&&z.geoObjects.remove(J),P(_.placemarks),lc.getLength()||m(!1)}),lc.add(Y),m(!0),P(_.placemarks)}else h=!1})})}const B=()=>{e(B1([])),h=!1,KN(),P(_.placemarks),m(!1)},U=()=>{e(jk(C)),t(!1)};return r.jsxs("div",{className:eR.MapLocationRoot,children:[r.jsx("div",{className:"absolute top-5 right-[80px] title-4",children:s}),r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("div",{ref:d,id:"customMap2",className:"remove-copyrights-pane",style:v4}),o&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"ymap-actions top-4 right-4 ymap-actions-group !w-auto items-end",children:g?r.jsxs(r.Fragment,{children:[r.jsx("button",{className:`ymap-action ymap-action-btn !w-auto font-medium gap-1 px-3 ${f?"!w-auto px-4 gap-2":""}`,children:f?r.jsxs(r.Fragment,{children:[r.jsx(Rp,{width:24,height:24}),"Начните рисовать",r.jsx(Hb,{className:"!text-primary400 opacity-80"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ja,{className:"stroke-black",width:15,height:15}),r.jsx("span",{children:"Добавить ещё область"})]})}),r.jsx("button",{onClick:B,className:"ymap-action ymap-action-btn !w-auto font-medium gap-1 px-3",children:r.jsx(un,{width:15,height:15})})]}):r.jsx(r.Fragment,{children:r.jsxs("button",{ref:x,className:`ymap-action ymap-action-btn ${f?"!w-auto px-4 gap-2":""}`,children:[r.jsx(Rp,{width:24,height:24}),f&&r.jsxs(r.Fragment,{children:["Начните рисовать",r.jsx(Hb,{className:"!text-primary400 opacity-80"})]})]})})}),n&&r.jsxs("div",{className:"ymap-actions ymap-top-right-center ymap-actions-group ymap-actions-group-join",children:[r.jsx("button",{onClick:()=>qh(c),className:"ymap-action",children:r.jsx(Ja,{className:"stroke-black"})}),r.jsx("button",{onClick:()=>Wh(c),className:"ymap-action",children:r.jsx(Uh,{})})]})]}),b!==null&&r.jsx(_e,{size:"Small",onClick:U,className:`${eR.MapLocationGo} min-w-[220px]`,children:E?r.jsx(fd,{size:16,variant:"second"}):r.jsxs(r.Fragment,{children:["Показать ",b," новостроек"]})})]})]})},KIe=({condition:t,set:e,filterCount:n,options:s})=>{const i=Dt(),a=ue(rt),{type:o,mapLocationCoordinates:l}=ue(x=>x.listing),c=ue(x=>x.listing.filtersOther),{rooms:u,price:d}=ue(x=>x.listing.filtersMain),h=ue(x=>x.listing.filtersAdditional),f={"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1000px"},p={"--modal-space":"0","--modal-height":"var(--vh)","--modal-width":"100%"},g=()=>r.jsx(Sr,{set:e,className:"px-8 py-6 md1:px-4 md1:py-4",children:r.jsx("h2",{className:"title-2",children:"Фильтры"})}),m=()=>r.jsxs("div",{className:"ModalFooter",children:[n>0?r.jsxs(_e,{variant:"secondary",size:"Small",onClick:()=>{KN(),i(dse())},children:["Очистить ",a&&`фильтр ⋅ ${n}`]}):r.jsx("div",{}),r.jsx(_e,{size:"Small",onClick:()=>e(!1),className:"min-w-[220px]",children:s.isLoading?r.jsx(fd,{size:16,variant:"second"}):r.jsxs(r.Fragment,{children:["Показать ",s.total," новостроек"]})})]}),_=(x,b)=>{i(hse({name:x,selectedOptions:b}))},y=(x,b,w)=>{i(CE({name:b,value:w,path:`filtersAdditional.${x}`}))};return r.jsx(gt,{options:{modalClassNames:`HeaderSticky !px-0 ${qIe.ModalFormRoot}`,modalContentClassNames:"!py-0 !pl-8 !pr-12 md1:!px-4"},style:window.innerWidth>1222?f:p,set:e,condition:t,closeBtn:!1,ModalHeader:g,ModalFooter:m,children:r.jsxs("div",{className:"flex flex-col gap-7 mt-6 mb-4",children:[r.jsx("div",{children:s.additionalParameters.map((x,b)=>r.jsxs("div",{className:"bg-primary700 rounded-lg py-4 px-4 flex justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"title-4",children:x.label}),r.jsx("p",{className:"text-small text-primary400 mt-1",children:x.descr})]}),r.jsx(md,{checked:c[x.value],set:w=>{i(vse({value:w.target.checked,option:x}))}})]},b))}),r.jsx("div",{className:"border-top-lightgray"}),!!s.stickers.length&&r.jsx("div",{children:r.jsx(nn,{name:"Лидер продаж",widthChildren:512,classNameName:"font-medium",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:s.stickers.map((x,b)=>{const w={value:x.id,label:x.name};return r.jsx(An,{color:"select",onClick:C=>i(x0({value:C,option:w,type:"stickers"})),value:c.stickers.find(C=>C===w.value),children:w.label},b)})})})}),Object.keys(h).map((x,b)=>{if(x!=="filter_developer_ids"&&x!=="filter_building_ids"&&x!=="area")return;const w=h[x];let C=w.type;return w.type==="list-multiple"&&!L6(w.label)&&w.options.length<=10&&(C="tags-multiple"),w.type==="list-single"&&w.options.length<=10&&(C="tags-single"),r.jsx(J8,{data:{...w,type:C},handleChangeInput:y,handleChange:_,filtersSelector:h,widthChildren:512},b)}),r.jsx(nn,{name:"Цена",widthChildren:512,classNameName:"font-medium",children:r.jsx(Gm,{dispatchChange:CE,priceSelector:d,nameLabelFirst:"От"})}),Object.keys(h).map((x,b)=>{if(x==="filter_developer_ids"||x==="filter_building_ids"||x==="area")return;const w=h[x];let C=w.type;return w.type==="list-multiple"&&!L6(w.label)&&w.options.length<=50&&(C="tags-multiple"),w.type==="list-single"&&w.options.length<=50&&(C="tags-single"),r.jsx(J8,{data:{...w,type:C},handleChangeInput:y,handleChange:_,filtersSelector:h,widthChildren:512},b)}),r.jsx(nn,{name:"Количество комнат",widthChildren:512,classNameName:"font-medium",children:r.jsx(Wm,{dispatchChange:p7,roomsSelector:u})}),o==="list"&&r.jsx(nn,{name:"Расположение",widthChildren:512,classNameName:"font-medium",children:r.jsxs("div",{className:"flex items-center gap-2 w-full",children:[r.jsx(_e,{variant:"secondary",size:"Small",className:"!rounded-xl w-full",onClick:()=>s.setLocationModal(!0),active:l&&l.length,children:l&&l.length?r.jsx(r.Fragment,{children:"Вы указали область на карте"}):r.jsxs(r.Fragment,{children:["Нарисовать область на карте",r.jsx(Rp,{width:18,height:18,className:"ml-3"})]})}),!!(l&&l.length)&&r.jsx("button",{type:"button",title:"Очистить",onClick:()=>{i(B1([])),KN()},children:r.jsx(un,{width:15,height:15,className:"fill-red"})})]})}),r.jsx("div",{className:"border-top-lightgray"}),!!s.tags.length&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-3",children:"Часто ищут"}),r.jsx("div",{className:"flex-wrap flex gap-1.5",children:s.tags.map((x,b)=>{const w={value:x.id,label:x.name};return r.jsx(An,{size:"medium",className:"!rounded-xl",onClick:C=>i(x0({value:C,option:w,type:"tags"})),value:c.tags.find(C=>C===w.value),children:w.label},b)})})]}),!!s.advantages.length&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3",children:"Уникальные преимущества объекта"}),r.jsx("div",{className:"mt-4 grid grid-cols-3 gap-x-3 gap-y-4 md3:grid-cols-2",children:s.advantages.map(x=>{const b={value:x.id,label:x.name};return r.jsx(Zy,{data:x,onChange:w=>i(x0({value:w,option:b,type:"advantages"})),value:c.advantages.find(w=>w===b.value),textVisible:!1},x.id)})})]})]})})},QIe="_ListingMapContainer_1udz1_2",ZIe="_ListingMap_1udz1_2",JIe="_ListingMapCards_1udz1_23",e6e="_ListingMobile_1udz1_45",t6e="_ShowTypeRoot_1udz1_57",n6e="_ShowTypeItem_1udz1_67",s6e="_ShowTypeItemActive_1udz1_74",Cu={ListingMapContainer:QIe,ListingMap:ZIe,ListingMapCards:JIe,ListingMobile:e6e,ShowTypeRoot:t6e,ShowTypeItem:n6e,ShowTypeItemActive:s6e},r6e=({className:t=""})=>{Dt();const e=ue(n=>n.listing);return _r(),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-2 font-medium",children:"Поиск"}),r.jsxs("div",{className:`flex items-center ${Cu.ShowTypeRoot} ${t}`,children:[r.jsx("div",{className:"h-full",children:r.jsx("button",{onClick:()=>window.location.href=`${ke.listing}?type=list`,className:`${Cu.ShowTypeItem} ${e.type==="list"?Cu.ShowTypeItemActive:""}`,children:"Списком"})}),r.jsx("div",{className:"h-full",children:r.jsx("button",{onClick:()=>window.location.href=`${ke.listing}?type=map`,className:`${Cu.ShowTypeItem} ${e.type==="map"?Cu.ShowTypeItemActive:""}`,children:"На карте"})})]})]})},i6e=({filterCount:t,setIsOpenMoreFilter:e,isAdmin:n,shadow:s})=>{const i=ue(d=>d.listing.type),{rooms:a,price:o}=ue(d=>d.listing.filtersMain),u=ue(rt)?i==="list"?"grid-cols-[145px_max-content_1fr_max-content]":"grid-cols-[145px_max-content_500px_max-content]":"grid-cols-[145px_max-content_400px_max-content]";return r.jsxs(yd,{shadow:s,className:He("!px-0 !mt-0 md1:!pb-2",u,s&&"!px-4"),children:[r.jsx(hC,{count:t,onClick:()=>e(d=>!d)}),r.jsx(Wm,{dispatchChange:p7,roomsSelector:a}),r.jsx(Gm,{dispatchChange:CE,priceSelector:o}),!n&&r.jsx(r6e,{}),n&&r.jsx(Ke,{to:ht.objects.create,className:"ml-auto",target:"_blank",children:r.jsx(_e,{Selector:"div",size:"Small",children:"Добавить объект"})})]})},u1=({options:t,isAdmin:e=!1,shadow:n=!1,className:s})=>{const i=Dt(),[a,o]=v.useState(!1),l=ue(p=>p.listing),c=ue(nw),[u,d]=v.useState(0),h=p=>{p.preventDefault()};v.useEffect(()=>{c&&i(L1({building_type:"Новостройки",city:c}))},[c]),v.useEffect(()=>{const{filtersMain:p,filtersAdditional:g,filtersOther:m}=l;let _=oD([p,g,m]);l.type==="list"&&l.mapLocationCoordinates&&l.mapLocationCoordinates.length&&_++,d(_),f(l)},[l.filtersMain,l.filtersAdditional,l.mapVisiblePlacemarks,l.type,l.filtersOther]);const f=v.useCallback(es(p=>{let g={filters:{},...p.filtersOther};const m=p.filtersMain,_=p.filtersAdditional;[m,_].map(y=>{for(const x in y){const b=y[x].value;Ye(b)||(g.filters[y[x].name]=y[x].type==="list-single"&&y[x].options.length>10?[b]:b)}}),i(fse(g))},550),[]);return r.jsxs("form",{onSubmit:h,className:He(s),children:[r.jsx(i6e,{filterCount:u,setIsOpenMoreFilter:o,isAdmin:e,options:t,shadow:n}),r.jsx(Ze,{condition:a,children:r.jsx(KIe,{condition:a,set:o,filterCount:u,options:t})})]})},FW=()=>r.jsxs("div",{className:"min-h-[355px] p-4 select-none rounded-xl bg-white shadow grid grid-cols-[350px_1fr] gap-4",children:[r.jsx(Fe,{className:"rounded-xl"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex gap-10",children:[r.jsxs("div",{className:"flex-grow flex flex-col",children:[r.jsx(Fe,{className:"w-full h-6 rounded-xl"}),r.jsx(Fe,{className:"w-3/5 h-5 rounded-xl mt-5"}),r.jsx(Fe,{className:"w-4/5 h-5 rounded-xl mt-2"}),r.jsx(Fe,{className:"w-3/5 h-5 rounded-xl mt-2"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6 w-full",children:[r.jsx(Fe,{className:"h-12 rounded-xl"}),r.jsx(Fe,{className:"h-12 rounded-xl"})]})]}),r.jsxs("div",{className:"w-[235px]",children:[r.jsx(Fe,{className:"w-full h-6 rounded-xl"}),r.jsx(Fe,{className:"w-4/5 h-5 rounded-xl mt-4"}),r.jsx(Fe,{className:"w-4/5 h-5 rounded-xl mt-1.5"})]}),r.jsxs("div",{className:"w-[32px]",children:[r.jsx(Fe,{className:"w-8 h-8 rounded-lg"}),r.jsx(Fe,{className:"w-8 h-8 rounded-lg mt-2"})]})]}),r.jsxs("div",{className:"mt-auto flex items-center gap-3 w-full",children:[r.jsx(Fe,{className:"w-10 h-10 rounded-full"}),r.jsx(Fe,{className:"w-2/5 h-10 rounded-lg"})]})]})]}),a6e="_CardPrimaryRowRoot_tkb6g_1",o6e="_CardPrimaryRowRootShadow_tkb6g_11",l6e="_CardPrimaryRowContainer_tkb6g_18",c6e="_CardPrimaryRowLink_tkb6g_24",u6e="_CardPrimaryRowGallery_tkb6g_30",d6e="_CardPrimaryRowWrapper_tkb6g_35",h6e="_CardPrimaryRowContent_tkb6g_41",f6e="_CardPrimaryRowQuantity_tkb6g_47",p6e="_CardPrimaryRowTerm_tkb6g_55",m6e="_CardPrimaryRowAddress_tkb6g_60",g6e="_CardPrimaryRowAdd_tkb6g_60",v6e="_CardPrimaryRowPrices_tkb6g_69",y6e="_CardPrimaryRowBottom_tkb6g_78",Pi={CardPrimaryRowRoot:a6e,CardPrimaryRowRootShadow:o6e,CardPrimaryRowContainer:l6e,CardPrimaryRowLink:c6e,CardPrimaryRowGallery:u6e,CardPrimaryRowWrapper:d6e,CardPrimaryRowContent:h6e,CardPrimaryRowQuantity:f6e,CardPrimaryRowTerm:p6e,CardPrimaryRowAddress:m6e,CardPrimaryRowAdd:g6e,CardPrimaryRowPrices:v6e,CardPrimaryRowBottom:y6e},x6e=t=>{switch(t){case"":return"";case"shadow":return Pi.CardPrimaryRowRootShadow;default:return""}},b6e=t=>{const e=t.length;if(e===0)return"";if(e<=2)return"!grid-rows-[1fr]";if(e<=4)return"!grid-rows-[1fr_1fr]";if(e<=6)return"!grid-rows-[1fr_1fr_1fr]";if(e>=7)return"!grid-rows-[1fr_1fr_1fr_1fr]"},_6e=()=>{const{apartments:t,visibleRooms:e=[],max_price:n}=v.useContext(gD);if(t&&t.length>0)return r.jsx("div",{className:He(Pi.CardPrimaryRowPrices,b6e(t)),children:t.map((s,i)=>r.jsxs(Y2,{isActive:Ye(e)?!0:e.includes(s.rooms),children:[r.jsxs("span",{children:[s.rooms===0?"Студии":`${s.rooms}-комн`,"  ",n<1e9&&`от ${s.min_area} м²`]}),r.jsxs("span",{children:["от ",Qu(s.price)," ₽"]})]},i))})},w6e=()=>{const{isBlockCard:t,setIsBlockCard:e,title:n,id:s,setIsOpenModalLocation:i}=v.useContext(gD),a=ue(Ot),o=Si(a);return r.jsx("div",{className:"ml-auto flex flex-col gap-2",children:o?r.jsx(F$,{options:{isBlockCard:t,setIsBlockCard:e,title:n,id:s},children:r.jsx($t,{placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>i(!0),children:r.jsx(wl,{width:15,height:15,className:"pointer-events-none"})}),children:"Показать на карте"})}):r.jsxs(r.Fragment,{children:[r.jsx(zh,{id:s,type:"complex",variant:"tooltip",placement:"left"}),r.jsx(Uc,{id:s,type:"complex",variant:"tooltip",placement:"left"}),r.jsx($t,{placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>i(!0),children:r.jsx(wl,{width:15,height:15,className:"pointer-events-none"})}),children:"Показать на карте"})]})})},gD=v.createContext(),C6e=t=>{var U;const{city:e,title:n,deadline:s,images:i,address:a,quantity:o,apartments:l,user:c,cashback:u,present:d,tags:h,metro:f,className:p="",variant:g="",id:m,geo:_,is_active:y=!0,max_price:x,visibleRooms:b=[],main_gifts:w=[],second_gifts:C=[],stickers:j,buildingDiscount:E}=t,[T,N]=v.useState(!1),[P,I]=v.useState(y),B=((U=lD(b.length?l.filter(z=>b.includes(z.rooms)):l,"price"))==null?void 0:U.price.toString())||0;return r.jsx(gD.Provider,{value:{...t,minPrice:B,isBlockCard:P,setIsOpenModalLocation:N,setIsBlockCard:I},children:r.jsxs("article",{className:He(Pi.CardPrimaryRowRoot,p,x6e(g)),children:[!P&&r.jsx("span",{className:"absolute inset-0 z-[90] bg-dark opacity-50"}),r.jsxs("div",{className:Pi.CardPrimaryRowContainer,children:[r.jsx(Ke,{target:"_blank",rel:"noopener noreferrer",to:`${ke.building}${m}`,className:Pi.CardPrimaryRowLink}),r.jsx(xy,{images:i,title:n,href:`${ke.building}${m}`,className:Pi.CardPrimaryRowGallery}),r.jsxs("div",{className:Pi.CardPrimaryRowWrapper,children:[r.jsxs("div",{className:Pi.CardPrimaryRowContent,children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("h3",{className:"title-2 mb-2",children:n}),r.jsxs("p",{className:Pi.CardPrimaryRowTerm,children:["Срок сдачи: ",s]}),r.jsx("div",{className:Pi.CardPrimaryRowAddress,children:[e,a].filter(z=>z).join(", ")}),r.jsx("div",{className:Pi.CardPrimaryRowMetro,children:r.jsx(Em,{data:f})}),!!o&&r.jsxs("span",{className:Pi.CardPrimaryRowQuantity,children:[pt(o)," квартир от застройщика"]}),r.jsx(_6e,{})]}),r.jsxs("div",{className:Pi.CardPrimaryRowAdd,children:[l&&l.length>0?r.jsxs("h3",{className:"title-2 mb-3",children:["от ",pt(B)," ₽"]}):"",!!E&&r.jsx("div",{className:"mb-2",children:r.jsx(Ac,{discount:E.value,type_id:E.type,prefix:"Скидка",tooltip:!0,start_date:ct(E.start_date).format("DD.MM.YYYY"),end_date:ct(E.end_date).format("DD.MM.YYYY"),unit:E.unit,building_info:!0})}),!!(u||d)&&r.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-1.5",children:[u&&x?r.jsx(Sa,{cashback:x/100*u}):"",!!(w.length||d||C.length)&&r.jsx(xw,{dataMainGifts:no(w)?w.filter(z=>z):[],dataSecondGifts:no(C)?C.filter(z=>z):[],title:"Есть подарок"})]}),!!(j!=null&&j.length)&&r.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5 w-full",children:r.jsx(Sl,{data:[...j.map(z=>({...z,type:"sticker"}))],increaseHeight:!0,maxHeightDefault:50})})]}),r.jsx(w6e,{})]}),!!(h!=null&&h.length)&&r.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5 w-full",children:r.jsx(Sl,{data:h,increaseHeight:!0,maxHeightDefault:23})}),c&&r.jsx("div",{className:Pi.CardPrimaryRowBottom,children:r.jsx(Vs,{centered:!0,avatar:c.avatarUrl,name:c.name,pos:c.pos})})]})]}),r.jsx(by,{condition:T,set:N,geo:_})]})})},S6e=({options:t,children:e})=>{const n=Dt(),{lastTrigger:s,resultFilters:i}=ue(o=>o.listing),a=vs();return v.useEffect(()=>{n(mse())},[]),r.jsxs("div",{className:"container",children:[e,r.jsxs("div",{className:"flex flex-col gap-3",children:[t.isLoading&&(s==="filter"||s==="sort")?[...new Array(16)].map((o,l)=>r.jsx(FW,{},l)):t.cards.length>0?r.jsxs(r.Fragment,{children:[t.cards.map(o=>{if(o.type!=="promo")return r.jsx(C6e,{variant:"shadow",...o,visibleRooms:i.filters.rooms},o.id)}),t.isLoadingMore&&r.jsx("div",{className:"flex items-center my-5",children:r.jsx(Ol,{className:"mx-auto"})})]}):r.jsx(Or,{}),a.home&&r.jsx("a",{href:`${ke.listing}`,className:"w-full mt-4",children:r.jsx(_e,{variant:"secondary",Selector:"div",children:"Смотреть всё"})})]})]})};var o2={exports:{}};o2.exports;(function(t,e){var n=200,s="__lodash_hash_undefined__",i=1,a=2,o=9007199254740991,l="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",h="[object Date]",f="[object Error]",p="[object Function]",g="[object GeneratorFunction]",m="[object Map]",_="[object Number]",y="[object Null]",x="[object Object]",b="[object Promise]",w="[object Proxy]",C="[object RegExp]",j="[object Set]",E="[object String]",T="[object Symbol]",N="[object Undefined]",P="[object WeakMap]",I="[object ArrayBuffer]",B="[object DataView]",U="[object Float32Array]",z="[object Float64Array]",G="[object Int8Array]",V="[object Int16Array]",J="[object Int32Array]",Q="[object Uint8Array]",Y="[object Uint8ClampedArray]",oe="[object Uint16Array]",he="[object Uint32Array]",me=/[\\^$.*+?()[\]{}|]/g,Oe=/^\[object .+?Constructor\]$/,xe=/^(?:0|[1-9]\d*)$/,Pe={};Pe[U]=Pe[z]=Pe[G]=Pe[V]=Pe[J]=Pe[Q]=Pe[Y]=Pe[oe]=Pe[he]=!0,Pe[l]=Pe[c]=Pe[I]=Pe[d]=Pe[B]=Pe[h]=Pe[f]=Pe[p]=Pe[m]=Pe[_]=Pe[x]=Pe[C]=Pe[j]=Pe[E]=Pe[P]=!1;var qe=typeof hn=="object"&&hn&&hn.Object===Object&&hn,Ie=typeof self=="object"&&self&&self.Object===Object&&self,Ve=qe||Ie||Function("return this")(),ot=e&&!e.nodeType&&e,fe=ot&&!0&&t&&!t.nodeType&&t,$=fe&&fe.exports===ot,X=$&&qe.process,W=function(){try{return X&&X.binding&&X.binding("util")}catch{}}(),ce=W&&W.isTypedArray;function ne(L,K){for(var ve=-1,ze=L==null?0:L.length,Mt=0,bt=[];++ve<ze;){var an=L[ve];K(an,ve,L)&&(bt[Mt++]=an)}return bt}function ee(L,K){for(var ve=-1,ze=K.length,Mt=L.length;++ve<ze;)L[Mt+ve]=K[ve];return L}function ge(L,K){for(var ve=-1,ze=L==null?0:L.length;++ve<ze;)if(K(L[ve],ve,L))return!0;return!1}function q(L,K){for(var ve=-1,ze=Array(L);++ve<L;)ze[ve]=K(ve);return ze}function re(L){return function(K){return L(K)}}function ie(L,K){return L.has(K)}function Ee(L,K){return L==null?void 0:L[K]}function Ne(L){var K=-1,ve=Array(L.size);return L.forEach(function(ze,Mt){ve[++K]=[Mt,ze]}),ve}function Ae(L,K){return function(ve){return L(K(ve))}}function Se(L){var K=-1,ve=Array(L.size);return L.forEach(function(ze){ve[++K]=ze}),ve}var Le=Array.prototype,tt=Function.prototype,lt=Object.prototype,it=Ve["__core-js_shared__"],Pt=tt.toString,H=lt.hasOwnProperty,M=function(){var L=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return L?"Symbol(src)_1."+L:""}(),R=lt.toString,te=RegExp("^"+Pt.call(H).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=$?Ve.Buffer:void 0,Te=Ve.Symbol,$e=Ve.Uint8Array,wt=lt.propertyIsEnumerable,Ut=Le.splice,Rt=Te?Te.toStringTag:void 0,tn=Object.getOwnPropertySymbols,_t=ye?ye.isBuffer:void 0,Hn=Ae(Object.keys,Object),rs=Jr(Ve,"DataView"),is=Jr(Ve,"Map"),ae=Jr(Ve,"Promise"),be=Jr(Ve,"Set"),Ce=Jr(Ve,"WeakMap"),We=Jr(Object,"create"),Je=qs(rs),et=qs(is),yt=qs(ae),ut=qs(be),Vt=qs(Ce),zt=Te?Te.prototype:void 0,Tt=zt?zt.valueOf:void 0;function Et(L){var K=-1,ve=L==null?0:L.length;for(this.clear();++K<ve;){var ze=L[K];this.set(ze[0],ze[1])}}function Ht(){this.__data__=We?We(null):{},this.size=0}function Sn(L){var K=this.has(L)&&delete this.__data__[L];return this.size-=K?1:0,K}function xn(L){var K=this.__data__;if(We){var ve=K[L];return ve===s?void 0:ve}return H.call(K,L)?K[L]:void 0}function On(L){var K=this.__data__;return We?K[L]!==void 0:H.call(K,L)}function Nt(L,K){var ve=this.__data__;return this.size+=this.has(L)?0:1,ve[L]=We&&K===void 0?s:K,this}Et.prototype.clear=Ht,Et.prototype.delete=Sn,Et.prototype.get=xn,Et.prototype.has=On,Et.prototype.set=Nt;function ys(L){var K=-1,ve=L==null?0:L.length;for(this.clear();++K<ve;){var ze=L[K];this.set(ze[0],ze[1])}}function Aa(){this.__data__=[],this.size=0}function Da(L){var K=this.__data__,ve=Ia(K,L);if(ve<0)return!1;var ze=K.length-1;return ve==ze?K.pop():Ut.call(K,ve,1),--this.size,!0}function zc(L){var K=this.__data__,ve=Ia(K,L);return ve<0?void 0:K[ve][1]}function Qr(L){return Ia(this.__data__,L)>-1}function gn(L,K){var ve=this.__data__,ze=Ia(ve,L);return ze<0?(++this.size,ve.push([L,K])):ve[ze][1]=K,this}ys.prototype.clear=Aa,ys.prototype.delete=Da,ys.prototype.get=zc,ys.prototype.has=Qr,ys.prototype.set=gn;function Hs(L){var K=-1,ve=L==null?0:L.length;for(this.clear();++K<ve;){var ze=L[K];this.set(ze[0],ze[1])}}function Hc(){this.size=0,this.__data__={hash:new Et,map:new(is||ys),string:new Et}}function eg(L){var K=Rr(this,L).delete(L);return this.size-=K?1:0,K}function tg(L){return Rr(this,L).get(L)}function ng(L){return Rr(this,L).has(L)}function Jh(L,K){var ve=Rr(this,L),ze=ve.size;return ve.set(L,K),this.size+=ve.size==ze?0:1,this}Hs.prototype.clear=Hc,Hs.prototype.delete=eg,Hs.prototype.get=tg,Hs.prototype.has=ng,Hs.prototype.set=Jh;function Ho(L){var K=-1,ve=L==null?0:L.length;for(this.__data__=new Hs;++K<ve;)this.add(L[K])}function qc(L){return this.__data__.set(L,s),this}function $l(L){return this.__data__.has(L)}Ho.prototype.add=Ho.prototype.push=qc,Ho.prototype.has=$l;function Pa(L){var K=this.__data__=new ys(L);this.size=K.size}function bd(){this.__data__=new ys,this.size=0}function Wc(L){var K=this.__data__,ve=K.delete(L);return this.size=K.size,ve}function Gc(L){return this.__data__.get(L)}function ef(L){return this.__data__.has(L)}function Ul(L,K){var ve=this.__data__;if(ve instanceof ys){var ze=ve.__data__;if(!is||ze.length<n-1)return ze.push([L,K]),this.size=++ve.size,this;ve=this.__data__=new Hs(ze)}return ve.set(L,K),this.size=ve.size,this}Pa.prototype.clear=bd,Pa.prototype.delete=Wc,Pa.prototype.get=Gc,Pa.prototype.has=ef,Pa.prototype.set=Ul;function Vl(L,K){var ve=Wl(L),ze=!ve&&rf(L),Mt=!ve&&!ze&&Gl(L),bt=!ve&&!ze&&!Mt&&af(L),an=ve||ze||Mt||bt,Xt=an?q(L.length,String):[],xs=Xt.length;for(var ln in L)H.call(L,ln)&&!(an&&(ln=="length"||Mt&&(ln=="offset"||ln=="parent")||bt&&(ln=="buffer"||ln=="byteLength"||ln=="byteOffset")||nf(ln,xs)))&&Xt.push(ln);return Xt}function Ia(L,K){for(var ve=L.length;ve--;)if(Sd(L[ve][0],K))return ve;return-1}function mo(L,K,ve){var ze=K(L);return Wl(L)?ze:ee(ze,ve(L))}function zl(L){return L==null?L===void 0?N:y:Rt&&Rt in Object(L)?Ti(L):sf(L)}function _d(L){return Oa(L)&&zl(L)==l}function tf(L,K,ve,ze,Mt){return L===K?!0:L==null||K==null||!Oa(L)&&!Oa(K)?L!==L&&K!==K:sg(L,K,ve,ze,tf,Mt)}function sg(L,K,ve,ze,Mt,bt){var an=Wl(L),Xt=Wl(K),xs=an?c:Ei(L),ln=Xt?c:Ei(K);xs=xs==l?x:xs,ln=ln==l?x:ln;var As=xs==x,Lr=ln==x,Ds=xs==ln;if(Ds&&Gl(L)){if(!Gl(K))return!1;an=!0,As=!1}if(Ds&&!As)return bt||(bt=new Pa),an||af(L)?Hl(L,K,ve,ze,Mt,bt):wd(L,K,xs,ve,ze,Mt,bt);if(!(ve&i)){var dr=As&&H.call(L,"__wrapped__"),Zs=Lr&&H.call(K,"__wrapped__");if(dr||Zs){var Wo=dr?L.value():L,Ni=Zs?K.value():K;return bt||(bt=new Pa),Mt(Wo,Ni,ve,ze,bt)}}return Ds?(bt||(bt=new Pa),Zr(L,K,ve,ze,Mt,bt)):!1}function Ma(L){if(!Td(L)||ig(L))return!1;var K=Yl(L)?te:Oe;return K.test(qs(L))}function Yc(L){return Oa(L)&&go(L.length)&&!!Pe[zl(L)]}function rg(L){if(!ag(L))return Hn(L);var K=[];for(var ve in Object(L))H.call(L,ve)&&ve!="constructor"&&K.push(ve);return K}function Hl(L,K,ve,ze,Mt,bt){var an=ve&i,Xt=L.length,xs=K.length;if(Xt!=xs&&!(an&&xs>Xt))return!1;var ln=bt.get(L);if(ln&&bt.get(K))return ln==K;var As=-1,Lr=!0,Ds=ve&a?new Ho:void 0;for(bt.set(L,K),bt.set(K,L);++As<Xt;){var dr=L[As],Zs=K[As];if(ze)var Wo=an?ze(Zs,dr,As,K,L,bt):ze(dr,Zs,As,L,K,bt);if(Wo!==void 0){if(Wo)continue;Lr=!1;break}if(Ds){if(!ge(K,function(Ni,aa){if(!ie(Ds,aa)&&(dr===Ni||Mt(dr,Ni,ve,ze,bt)))return Ds.push(aa)})){Lr=!1;break}}else if(!(dr===Zs||Mt(dr,Zs,ve,ze,bt))){Lr=!1;break}}return bt.delete(L),bt.delete(K),Lr}function wd(L,K,ve,ze,Mt,bt,an){switch(ve){case B:if(L.byteLength!=K.byteLength||L.byteOffset!=K.byteOffset)return!1;L=L.buffer,K=K.buffer;case I:return!(L.byteLength!=K.byteLength||!bt(new $e(L),new $e(K)));case d:case h:case _:return Sd(+L,+K);case f:return L.name==K.name&&L.message==K.message;case C:case E:return L==K+"";case m:var Xt=Ne;case j:var xs=ze&i;if(Xt||(Xt=Se),L.size!=K.size&&!xs)return!1;var ln=an.get(L);if(ln)return ln==K;ze|=a,an.set(L,K);var As=Hl(Xt(L),Xt(K),ze,Mt,bt,an);return an.delete(L),As;case T:if(Tt)return Tt.call(L)==Tt.call(K)}return!1}function Zr(L,K,ve,ze,Mt,bt){var an=ve&i,Xt=ql(L),xs=Xt.length,ln=ql(K),As=ln.length;if(xs!=As&&!an)return!1;for(var Lr=xs;Lr--;){var Ds=Xt[Lr];if(!(an?Ds in K:H.call(K,Ds)))return!1}var dr=bt.get(L);if(dr&&bt.get(K))return dr==K;var Zs=!0;bt.set(L,K),bt.set(K,L);for(var Wo=an;++Lr<xs;){Ds=Xt[Lr];var Ni=L[Ds],aa=K[Ds];if(ze)var Kc=an?ze(aa,Ni,Ds,K,L,bt):ze(Ni,aa,Ds,L,K,bt);if(!(Kc===void 0?Ni===aa||Mt(Ni,aa,ve,ze,bt):Kc)){Zs=!1;break}Wo||(Wo=Ds=="constructor")}if(Zs&&!Wo){var Xl=L.constructor,Br=K.constructor;Xl!=Br&&"constructor"in L&&"constructor"in K&&!(typeof Xl=="function"&&Xl instanceof Xl&&typeof Br=="function"&&Br instanceof Br)&&(Zs=!1)}return bt.delete(L),bt.delete(K),Zs}function ql(L){return mo(L,Xc,qo)}function Rr(L,K){var ve=L.__data__;return Cd(K)?ve[typeof K=="string"?"string":"hash"]:ve.map}function Jr(L,K){var ve=Ee(L,K);return Ma(ve)?ve:void 0}function Ti(L){var K=H.call(L,Rt),ve=L[Rt];try{L[Rt]=void 0;var ze=!0}catch{}var Mt=R.call(L);return ze&&(K?L[Rt]=ve:delete L[Rt]),Mt}var qo=tn?function(L){return L==null?[]:(L=Object(L),ne(tn(L),function(K){return wt.call(L,K)}))}:of,Ei=zl;(rs&&Ei(new rs(new ArrayBuffer(1)))!=B||is&&Ei(new is)!=m||ae&&Ei(ae.resolve())!=b||be&&Ei(new be)!=j||Ce&&Ei(new Ce)!=P)&&(Ei=function(L){var K=zl(L),ve=K==x?L.constructor:void 0,ze=ve?qs(ve):"";if(ze)switch(ze){case Je:return B;case et:return m;case yt:return b;case ut:return j;case Vt:return P}return K});function nf(L,K){return K=K??o,!!K&&(typeof L=="number"||xe.test(L))&&L>-1&&L%1==0&&L<K}function Cd(L){var K=typeof L;return K=="string"||K=="number"||K=="symbol"||K=="boolean"?L!=="__proto__":L===null}function ig(L){return!!M&&M in L}function ag(L){var K=L&&L.constructor,ve=typeof K=="function"&&K.prototype||lt;return L===ve}function sf(L){return R.call(L)}function qs(L){if(L!=null){try{return Pt.call(L)}catch{}try{return L+""}catch{}}return""}function Sd(L,K){return L===K||L!==L&&K!==K}var rf=_d(function(){return arguments}())?_d:function(L){return Oa(L)&&H.call(L,"callee")&&!wt.call(L,"callee")},Wl=Array.isArray;function jd(L){return L!=null&&go(L.length)&&!Yl(L)}var Gl=_t||lg;function og(L,K){return tf(L,K)}function Yl(L){if(!Td(L))return!1;var K=zl(L);return K==p||K==g||K==u||K==w}function go(L){return typeof L=="number"&&L>-1&&L%1==0&&L<=o}function Td(L){var K=typeof L;return L!=null&&(K=="object"||K=="function")}function Oa(L){return L!=null&&typeof L=="object"}var af=ce?re(ce):Yc;function Xc(L){return jd(L)?Vl(L):rg(L)}function of(){return[]}function lg(){return!1}t.exports=og})(o2,o2.exports);var j6e=o2.exports;const $W=In(j6e);let Af=[],Df={},ii=[];function UW({currentMouseEnterId:t,currentMouseEvent:e}){const n=ue(rt),s=ue(he=>he.listing),i=ue(he=>he.listing.resultFilters),a=v.useRef(i),o=Dt(),l=ue(Ci),[c,u]=v.useState(!1),[d,h]=v.useState(null),[f,p]=v.useState([]),g=v.useRef(null),[m,_]=v.useState(null),[y,x]=v.useState(null);let b=!1,w=!1;const[C,j]=v.useState(!1),[E,T]=v.useState(!1),N=v.useRef(null);v.useEffect(()=>{P(m)},[m]);const P=v.useCallback(es(he=>{he&&z(he.id).then(me=>{B(he.hint,me)})},450),[]),I=he=>{const me=[];he.forEach(Oe=>{LW(Oe.mark.geometry._coordinates,Af.flat(1))&&me.push(Oe)}),p(me.map(Oe=>Oe.id))};function B(he,me){Cp.createRoot(he).render(r.jsx(Bpe,{data:me}))}const U=v.useRef(null),z=async he=>{var Oe;const me=await Xa({visibleObjects:[he],page:1});return(Oe=me==null?void 0:me.cards)==null?void 0:Oe[0]},G=v.useCallback(es(he=>{Af.length>0||p(V(he.myMap,he.placemarks))},400),[]),V=(he,me)=>{if(!he)return;const Oe=he.getBounds(),xe=[];return me.forEach(function(Pe){const qe=Pe.mark.properties.get("id"),Ie=Pe.mark.geometry.getCoordinates();ymaps.util.bounds.contains(Oe,Ie)&&xe.push(qe)}),xe};v.useEffect(()=>{const he=S$();he?he.then(()=>{u(!0)}):u(!0)},[]);const J=()=>{try{ymaps.ready(Y)}catch{}};function Q(he,me=[]){if(!he)return;const Oe=he.getBounds(),xe=Oe[0],Pe=Oe[1],qe=me.filter(Ie=>{const Ve=Ie.mark.geometry.getCoordinates(),ot=Ve[0],fe=Ve[1];return ot>=xe[0]&&ot<=Pe[0]&&fe>=xe[1]&&fe<=Pe[1]});me.forEach(Ie=>{he.geoObjects.remove(Ie.mark)}),qe.forEach(Ie=>{he.geoObjects.add(Ie.mark),he.events.add("mousemove",Ve=>{b&&(b=!1,Ve.get("target")!==Ie.mark&&g.current.querySelectorAll("[data-balloon]").forEach(fe=>{fe.remove()}))})})}function Y(){fC(),ymaps.ready(["ext.paintOnMap"]).then(function(){const he=new ymaps.Map("customMap",{center:l.geo||[],zoom:12.4,controls:[]});Sm(he,g,U),jm(he,g,U),h(he),he.events.add("boundschange",Oe=>{Q(he,ii),G({myMap:he,placemarks:ii})});let me;Df=new ymaps.GeoObjectCollection,he.geoObjects.add(Df),N.current.addEventListener("click",()=>{w=!w,j(Oe=>!Oe),w?N.current&&N.current.classList.add("ymap-action-active"):N.current&&N.current.classList.remove("ymap-action-active")}),he.events.add("mousedown",function(Oe){w&&(me=ymaps.ext.paintOnMap(he,Oe,{style:zu}))}),he.events.add("mouseup",function(Oe){if(me){w=!1;let xe;j(!1);let Pe=me.finishPaintingAt(Oe);Af.push(Pe),me=null;let qe=new ymaps.Polygon([Pe],{},zu);qe.myCoordinates=Pe,qe.events.add("mouseenter",Ie=>{Ie.get("target").options.set(s_);const Ve=Ie.get("target").myCoordinates,ot=ymaps.templateLayoutFactory.createClass(`
                           <button class="ymap-action ymap-action-btn !w-[32px] !h-[32px] -translate-x-4 -translate-y-4">
                           <svg width="14" height="14" viewBox="0 0 512 512" xml:space="preserve"><g><path d="M490.667,96c0-17.673-14.327-32-32-32h-80.555C364.632,25.757,328.549,0.13,288,0h-64   c-40.549,0.13-76.632,25.757-90.112,64H53.333c-17.673,0-32,14.327-32,32l0,0c0,17.673,14.327,32,32,32H64v266.667   C64,459.468,116.532,512,181.333,512h149.333C395.468,512,448,459.468,448,394.667V128h10.667   C476.34,128,490.667,113.673,490.667,96z M384,394.667C384,424.122,360.122,448,330.667,448H181.333   C151.878,448,128,424.122,128,394.667V128h256V394.667z"></path><path d="M202.667,384c17.673,0,32-14.327,32-32V224c0-17.673-14.327-32-32-32s-32,14.327-32,32v128   C170.667,369.673,184.994,384,202.667,384z"></path><path d="M309.333,384c17.673,0,32-14.327,32-32V224c0-17.673-14.327-32-32-32s-32,14.327-32,32v128   C277.333,369.673,291.66,384,309.333,384z"></path></g></svg>
                           </button>
                        `);xe=new ymaps.Placemark(BW(Ve),{},{iconLayout:ot}),he.geoObjects.add(xe)}).add("mouseleave",Ie=>{Ie.get("target").options.set(r_),he.geoObjects.remove(xe)}).add("click",async Ie=>{let Ve=Ie.get("target");Af=Af.filter(ot=>ot!==Ve.myCoordinates),Df.remove(Ve),xe&&he.geoObjects.remove(xe),I(ii),Df.getLength()||(T(!1),p(V(he,ii)))}),Df.add(qe),T(!0),I(ii)}else w=!1})})}v.useEffect(()=>{l.name&&c&&!d&&J()},[c,d,g,l.name]),v.useEffect(()=>{if(l.name&&d&&!Ye(i)&&(!$W(a.current,i)&&!Ye(i)||!s.isInitMap)){o(xse(!0)),a.current=i;const he={...i,city:l.name};Ye(he.visibleObjects)&&delete he.visibleObjects,Me("/api/catalog/geo",he).then(me=>{const Oe=me.data.placemarks;ii.forEach(xe=>{d.geoObjects.remove(xe.mark)}),ii=Oe.map(xe=>{const Pe=new ymaps.Placemark([xe.coordinates[0],xe.coordinates[1]],{id:xe.id,minPrice:xe.minPrice,title:xe.name},{iconLayout:ymaps.templateLayoutFactory.createClass(`<div class=${gr.MapCircle} data-placemark-id="${xe.id}"></div>`),iconShape:{type:"Rectangle",coordinates:[[0,0],[15,15]]}});return Pe.events.add("mouseenter",qe=>{if(window.innerWidth>1212){g.current.querySelectorAll("[data-balloon]").forEach(Ve=>{Ve.remove()}),b=!0;let Ie=document.createElement("a");Ie.setAttribute("href",`${ke.building}${xe.id}`),Ie.setAttribute("target","_blank"),Ie.style.position="absolute",Ie.style.paddingTop="20px",Ie.style.paddingBottom="20px",Ie.style.zIndex="20001",Ie.style.minWidth="450px",Ie.style.minHeight="180px",Ie.style.pointerEvents="all",Ie.setAttribute("data-balloon",xe.id),g.current.appendChild(Ie),_({...xe,hint:Ie}),setTimeout(()=>{const Ve=setInterval(()=>{const ot=Ie.firstChild;ot&&(Ie.style.minWidth=`${ot.clientWidth}px`,Ie.style.minHeight=`${ot.clientHeight}px`,Ie.classList.add("show"),clearInterval(Ve))},100);zk(Pe.getOverlaySync().getElement().querySelector("[data-placemark-id]"),Ie,{placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,0]}}]})},.1)}}),Pe.events.add("click",qe=>{window.innerWidth>1212?window.open(`${ke.building}${xe.id}`,"_blank"):z(xe.id).then(Ie=>{x(Ie)})}),{id:xe.id,mark:Pe}}),o(yse(ii.map(xe=>xe.id))),Q(d,ii),p(V(d,ii))})}},[l.name,d,i,s.isInitMap]),v.useEffect(()=>{o(jk([...f]))},[f]);const oe=()=>{Af=[],w=!1,Df.removeAll(),T(!1),I(ii),p(V(d,ii))};return v.useEffect(()=>{d&&ii.forEach(he=>{f.includes(he.id)&&(he.id===t?H1(d,he):(d.getZoom()>12.4?H1(d,he):KE(d,he),e==="enter"&&setTimeout(()=>{const me=document.querySelector(`[data-placemark-id="${he.id}"]`);me&&me.classList.add(d.getZoom()>12.4?gr.MapPlacemarkActive:gr.MapCircleActive)},150),e==="leave"&&setTimeout(()=>{const me=document.querySelector(`[data-placemark-id="${he.id}"]`);me&&(me.classList.remove(gr.MapCircleActive),me.classList.remove(gr.MapPlacemarkActive))},150)))})},[t]),v.useEffect(()=>{d&&(d.getZoom()>12.4?ii.forEach(he=>{f.includes(he.id)&&H1(d,he)}):ii.forEach(he=>{f.includes(he.id)&&KE(d,he)}))},[f]),r.jsxs("div",{className:"relative w-full h-full md1:flex-grow md1:absolute md1:!h-[calc(var(--vh,100vh)-114px)]",children:[r.jsx("div",{ref:U,id:"customMap",className:"remove-copyrights-pane map-fullscreen",style:v4}),c&&r.jsxs("div",{className:"ymap-actions-container",ref:g,children:[r.jsx("div",{className:"ymap-actions ymap-actions-group ymap-action-left-top",children:r.jsx("button",{onClick:()=>Cm(d,g),className:"ymap-action ymap-action-btn",children:r.jsx($h,{})})}),r.jsx("div",{className:"ymap-actions top-4 right-4 ymap-actions-group !w-auto items-end",children:E?r.jsxs(r.Fragment,{children:[r.jsx("button",{className:`ymap-action ymap-action-btn !w-auto font-medium gap-1 px-3 ${C?"!w-auto px-4 gap-2":""}`,children:C?r.jsxs(r.Fragment,{children:[r.jsx(Rp,{width:24,height:24}),"Начните рисовать",r.jsx(Hb,{className:"!text-primary400 opacity-80"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ja,{className:"stroke-black",width:15,height:15}),r.jsx("span",{children:"Добавить ещё область"})]})}),r.jsx("button",{onClick:oe,className:"ymap-action ymap-action-btn !w-auto font-medium gap-1 px-3",children:r.jsx(un,{width:15,height:15})})]}):r.jsx(r.Fragment,{children:r.jsxs("button",{ref:N,className:`ymap-action ymap-action-btn ${C?"!w-auto px-4 gap-2":""}`,children:[r.jsx(Rp,{width:24,height:24}),C&&r.jsxs(r.Fragment,{children:["Начните рисовать",r.jsx(Hb,{className:"!text-primary400 opacity-80"})]})]})})}),n&&r.jsxs("div",{className:"ymap-actions ymap-top-right-center ymap-actions-group ymap-actions-group-join",children:[r.jsx("button",{onClick:()=>qh(d),className:"ymap-action",children:r.jsx(Ja,{className:"stroke-black"})}),r.jsx("button",{onClick:()=>Wh(d),className:"ymap-action",children:r.jsx(Uh,{})})]}),!n&&r.jsx(Ze,{condition:y,children:r.jsx(gt,{condition:y,set:x,options:{modalClassNames:"",overlayClassNames:"_bottom _full !z-[9999999]",modalContentClassNames:"!px-4"},children:r.jsx(Ll,{...y})})})]})]})}const tR=({options:t})=>{const e=ue(d=>d.listing.lastTrigger),[n,s]=v.useState(null),[i,a]=v.useState(null),o=vs(),l=ue(rt),c=es(d=>{d!==n&&(s(d),a("enter"))},300),u=es(d=>{s(d),a("leave")},300);return r.jsxs("div",{className:`mmd1:px-4 ${Cu.ListingMapContainer}`,children:[r.jsx("div",{className:`${Cu.ListingMapCards} scrollbarPrimary`,ref:t.listingMapCardsRef,onMouseLeave:()=>{s(null),a("leave")},children:t.isLoading&&e==="filter"?[...new Array(16)].map((d,h)=>r.jsx(Lh,{variant:"shadow"},h)):t.cards.length>0?r.jsxs(r.Fragment,{children:[t.cards.map(d=>{if(d.type!=="promo")return r.jsx(Ll,{variant:"shadow",...d,onMouseEnter:()=>{c(d.id)},onMouseLeave:()=>{u(null)},geoVisible:!l},d.id)}),t.isLoadingMore&&r.jsx("div",{className:"flex items-center my-5",children:r.jsx(Ol,{className:"mx-auto"})})]}):r.jsx(Or,{})}),!!(o.home&&!l)&&r.jsx("a",{href:`${ke.listing}`,className:"w-full my-4 px-4",children:r.jsx(_e,{variant:"secondary",Selector:"div",children:"Смотреть всё"})}),l&&r.jsx("div",{className:Cu.ListingMap,children:r.jsx(UW,{currentMouseEnterId:n,currentMouseEvent:i})})]})},Kj=(t=[],e=[])=>{const n=e.map(s=>({...s,type:"promo"}));return t.splice(4,0,n[0]),t.splice(13,0,n[1]),t.filter(s=>!!s)},T6e=t=>{const e=ue(nw),n=ue(Y=>Y.listing),s=vs(),i=Dt(),{tags:a}=pl({type:"tags",assigned:"building"}),{tags:o}=pl({type:"advantages",assigned:"building"}),{tags:l}=pl({type:"stickers",assigned:"building"}),c=a.filter(Y=>Y.city===e),u=o.filter(Y=>Y.city===e),d=l.filter(Y=>Y.city===e),h=`Новостройки (ЖК) в ${cw(i4(e,hD,1))} от застройщика`,f=v.useRef({...n.resultFilters,mapVisiblePlacemarks:n.mapVisiblePlacemarks}),[p,g]=v.useState([]),[m,_]=v.useState(!0),[y,x]=v.useState(!1),[b,w]=v.useState(0),[C,j]=v.useState(!1),[E,T]=v.useState(!1),[N,P]=v.useState(!1),I=v.useRef(null),{width:B}=ue(tw),[U,z]=v.useState(1),G={cards:p,setCards:g,total:b,setTotal:w,isLoading:m,setIsLoading:_,listingMapCardsRef:I,width:B,tags:c,stickers:d,advantages:u,additionalParameters:[C4],locationModal:C,setLocationModal:j,isLoadingMore:y,scrollResolution:N,setScrollResolution:P,setFetching:T,setIsLoadingMore:x};v.useEffect(()=>{s.home&&e&&Ue("/api/home/cashback",{per_page_cashback:50,city:e}).then(Y=>{i(jk(Y.data.map(oe=>+oe.id)))})},[e]),v.useEffect(()=>{e&&t&&i(use("list"))},[e]);const V=v.useCallback(es(({listingSelector:Y,currentCity:oe})=>{var he;i(BS("filter")),i(LS(1)),Y.type==="map"&&I.current?I.current.scrollTo({top:0,behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"}),Xa({...Y.resultFilters,page:1,city:oe,visibleObjects:((he=Y.mapVisiblePlacemarks)==null?void 0:he.length)>0?Y.mapVisiblePlacemarks:null,sort:Y.type==="list"?Y.sortBy:"",show_hidden:t,building_type_id:1}).then(me=>{z(me.pages),Ue("/api/banners?page=1&limit=2").then(Oe=>{me.total===0?G.setCards(me.cards):G.setCards(Kj(me.cards,Oe.data.items)),G.setTotal(me.total),_(!1),N||P(!0)})})},450),[t]);v.useEffect(()=>{if(!E){if(n.startIsLoading){i(pse());return}Ye(n.resultFilters)||$W(f.current,{...n.resultFilters,mapVisiblePlacemarks:n.mapVisiblePlacemarks})||(f.current={...n.resultFilters,mapVisiblePlacemarks:n.mapVisiblePlacemarks},_(!0),V({listingSelector:n,currentCity:e}))}},[n.resultFilters,n.mapVisiblePlacemarks]),v.useEffect(()=>{var Y;n.startIsLoading||E||(i(BS("sort")),_(!0),Xa({...n.resultFilters,page:1,city:e,visibleObjects:((Y=n.mapVisiblePlacemarks)==null?void 0:Y.length)>0?n.mapVisiblePlacemarks:null,sort:n.type==="list"?n.sortBy:"",show_hidden:t,building_type_id:1}).then(oe=>{z(oe.pages),Ue("/api/banners?page=1&limit=2").then(he=>{oe.total===0?G.setCards(oe.cards):G.setCards(Kj(oe.cards,he.data.items)),G.setTotal(oe.total),i(LS(1)),_(!1)})}))},[n.sortBy]),v.useEffect(()=>{_(!0),x(!1),P(!1),T(!1)},[n.type]),v.useEffect(()=>{var Y;if(E&&!m){if(n.page+1>U){T(!1);return}i(BS("pagination")),_(!0),x(!0),Xa({...n.resultFilters,page:n.page+1,city:e,visibleObjects:((Y=n.mapVisiblePlacemarks)==null?void 0:Y.length)>0?n.mapVisiblePlacemarks:null,sort:n.type==="list"?n.sortBy:"",show_hidden:t,building_type_id:1}).then(oe=>{Ue(`/api/banners?page=${n.page+1}&limit=2`).then(he=>{G.setCards([...p,...Kj(oe.cards,he.data.items)]),G.setTotal(oe.total),i(LS(n.page+1)),T(!1),_(!1),x(!1)})})}},[E]),v.useEffect(()=>{if(n.type==="list")return document.addEventListener("scroll",Y=>{J(Y,N)}),()=>{document.removeEventListener("scroll",Y=>{J(Y,N)})};if(n.type==="map")return I.current&&I.current.addEventListener("scroll",Y=>{Q(Y,N)}),()=>{I.current&&I.current.removeEventListener("scroll",Y=>{Q(Y,N)})}},[n.type,N]);const J=v.useCallback(es((Y,oe)=>{const he=Y.target.documentElement.scrollHeight;he-(Y.target.documentElement.scrollTop+window.innerHeight)<he*1.05+700-he&&oe&&T(!0)},100),[]),Q=v.useCallback(es((Y,oe)=>{const he=I.current.scrollHeight;he-(I.current.scrollTop+window.innerHeight)<he*1.05+700-he&&oe&&T(!0)},100),[]);return{tags:c,titleText:h,options:G}},Qj=[{label:"Сначала дешёвые",value:"price_asc"},{label:"Сначала дорогие",value:"price_desc"},{label:"Высокий кешбэк",value:"cashback_desc"}],E6e=()=>{const t=Dt(),e=ue(d=>d.listing),n=ue(rt),s=ue(Ot),i=Si(s),{tags:a,titleText:o,options:l}=T6e(i),c=e.type==="list",u=e.type==="map";return r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:o}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[i?r.jsx(Qh,{}):r.jsx(zn,{children:!n&&u&&r.jsx(u1,{options:l,shadow:!0,isAdmin:i})}),r.jsxs("main",{className:"main md1:flex md1:flex-col",children:[r.jsx("div",{children:r.jsx(qoe,{condition:l.locationModal,set:l.setLocationModal,options:{overlayClassNames:"_full",modalContentClassNames:"!p-0 !pt-10"},children:r.jsx(XIe,{setModal:l.setLocationModal})})}),n&&r.jsx(r.Fragment,{children:c?r.jsx("div",{className:"main-wrapper",children:r.jsx(S6e,{options:l,children:r.jsxs("div",{className:"white-block mb-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("h1",{className:"title-2",children:o}),r.jsx("div",{className:"max-w-[300px] mb-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sy,{width:16,height:16}),r.jsx(vi,{options:Qj,value:Qj.find(d=>d.value===e.sortBy)||Qj[0],onChange:d=>t(gse(d.value)),nameLabel:"",variant:"second",iconArrow:!1})]})})]}),r.jsx(u1,{options:l,isAdmin:i,className:"mt-6 mb-8"}),!!a.length&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mt-4 mb-3",children:"Часто ищут"}),r.jsx(p4,{className:"flex gap-1.5",data:a.map((d,h)=>{const f={value:d.id,label:d.name};return{id:h,value:e.filtersOther.tags.find(p=>p===f.value),label:f.label,onClick:p=>{t(x0({value:p,option:f,type:"tags"}))}}})})]})]})})}):r.jsxs(r.Fragment,{children:[r.jsx(u1,{options:l,isAdmin:i,shadow:!0}),r.jsx("div",{className:"bg-pageColor py-4",children:r.jsx(tR,{options:l})})]})}),!n&&r.jsx(r.Fragment,{children:c?r.jsxs("div",{className:"mt-5",children:[r.jsx("h1",{className:"title-2 mb-5 !px-4",children:o}),r.jsx(u1,{options:l,isAdmin:i,className:"mt-2 mb-4 !top-[52px] sticky z-[999] !px-4"}),r.jsx(_v,{widthScreen:9999,className:"mb-4 !px-4",children:r.jsx("div",{className:"flex items-center gap-1.5",children:a.map(d=>{const h={value:d.id,label:d.name};return r.jsx(An,{size:"medium",className:"!rounded-xl",onClick:f=>t(x0({value:f,option:h,type:"tags"})),value:e.filtersOther.tags.find(f=>f===h.value),children:h.label})})})}),r.jsx(tR,{options:l})]}):r.jsx("div",{className:"flex-grow flex flex-col",children:r.jsx(UW,{})})})]}),r.jsx(RW,{})]})},N6e=({setIsOpenMoreFilter:t,filterCount:e})=>{Dt();const{rooms:n,price:s}=ue(i=>i.listingFlats.filters.filtersMain);return r.jsxs(yd,{className:"grid-cols-[145px_max-content_385px] container !mt-0",children:[r.jsx(hC,{count:e,onClick:()=>t(i=>!i)}),r.jsx(Wm,{dispatchChange:x7,roomsSelector:n}),r.jsx(Gm,{dispatchChange:SE,priceSelector:s})]})},k6e=({filterCount:t,condition:e,set:n})=>{const s=Dt(),i=ue(rt),{isLoading:a,total:o,advantages:l,tags:c}=v.useContext(hw),u=ue(x=>x.listingFlats),d=u.filters.filtersMain,h=u.filters.filtersAdditional,f={"--modal-width":"700px"},p={"--modal-width":"100%"},g=()=>r.jsx(Sr,{set:n,className:"px-8 py-6 md1:px-4 md1:py-4",children:r.jsx("h2",{className:"title-2",children:"Фильтры"})}),m=()=>r.jsxs("div",{className:"ModalFooter",children:[t>0&&r.jsxs(_e,{variant:"secondary",size:"Small",onClick:()=>s(wse()),children:["Очистить ",i&&`фильтр ⋅ ${t}`]}),r.jsx(_e,{size:"Small",onClick:()=>n(!1),className:"min-w-[220px]",children:a?r.jsx(fd,{size:16,variant:"second"}):r.jsxs(r.Fragment,{children:["Показать ",mv(o||0)]})})]}),_=(x,b)=>{s(Cse({name:x,selectedOptions:b}))},y=(x,b,w)=>{s(SE({name:b,value:w,path:`filtersAdditional.${x}`}))};return r.jsx(gt,{options:{overlayClassNames:"_right",modalClassNames:"HeaderSticky !px-0",modalContentClassNames:"!py-0 !pl-8 !pr-12 md1:!px-4"},style:window.innerWidth>1222?f:p,set:n,condition:e,closeBtn:!1,ModalHeader:g,ModalFooter:m,children:r.jsxs("div",{className:"flex flex-col gap-6 mt-6 mb-4",children:[[C4].map((x,b)=>r.jsxs("div",{className:"bg-primary700 rounded-lg py-4 px-4 flex justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"title-4",children:x.label}),r.jsx("p",{className:"text-small text-primary400 mt-1",children:x.descr})]}),r.jsx(md,{checked:u.filters[x.value],set:w=>{s(jse({name:x.value,value:w.target.checked}))}})]},b)),r.jsx(nn,{name:"Цена",widthChildren:999,classNameName:"font-medium",children:r.jsx(Gm,{dispatchChange:SE,priceSelector:d.price,nameLabelFirst:"От"})}),r.jsx(nn,{name:"Количество комнат",widthChildren:999,classNameName:"font-medium",children:r.jsx(Wm,{dispatchChange:x7,roomsSelector:d.rooms})}),!!h.frame&&r.jsx(nn,{name:h.frame.nameLabel,widthChildren:999,classNameName:"font-medium",children:r.jsx(vi,{options:h.frame.options,onChange:x=>_(h.frame.name,x),value:h.frame.value,defaultOption:!0})}),r.jsx(nn,{name:h.area.nameLabel,widthChildren:999,classNameName:"font-medium",children:r.jsxs(_l,{children:[r.jsx(kn,{value:h[h.area.name].value[h.area.from.name],onChange:x=>y(h.area.name,h.area.from.name,x),before:h.area.from.label,convertNumber:!0,onlyNumber:!0,maxLength:3}),r.jsx(kn,{value:h[h.area.name].value[h.area.to.name],onChange:x=>y(h.area.name,h.area.to.name,x),before:h.area.to.label,after:h.area.postfix,convertNumber:!0,onlyNumber:!0,maxLength:3})]})}),!i&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sy,{width:16,height:16}),r.jsx(vi,{options:Ha,value:Ha.find(x=>x.value===u.filters.sortBy)||Ha[0],onChange:x=>s(b7(x.value)),className:"max-w-[300px]",variant:"second",iconArrow:!1})]}),r.jsx("div",{className:"border-top-lightgray"}),!!(c!=null&&c.length&&!i)&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-3",children:"Часто ищут"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((x,b)=>{const w={value:x.id,label:x.name};return r.jsx(An,{color:"select",onClick:C=>s(jE({value:C,option:w,type:"tags"})),value:u.filters.tags.find(C=>C===w.value),children:w.label},b)})})]}),!!(l!=null&&l.length)&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-3",children:"Уникальные преимущества объекта"}),r.jsx("div",{className:"grid grid-cols-3 gap-4 md3:grid-cols-2",children:l.map(x=>{const b={value:x.id,label:x.name};return r.jsx(Zy,{data:x,onChange:w=>s(jE({value:w,option:b,type:"advantages"})),value:u.filters.advantages.find(w=>w===b.value),textVisible:!1},x.id)})})]})]})})},nR=({})=>{const{filterCount:t}=v.useContext(hw),[e,n]=v.useState(!1),s=i=>{i.preventDefault()};return r.jsxs("form",{onSubmit:s,className:"form-row-sticky",children:[r.jsx(N6e,{filterCount:t,setIsOpenMoreFilter:n}),r.jsx(Ze,{condition:e,children:r.jsx(k6e,{condition:e,set:n,filterCount:t})})]})},A6e="_CardSecondRowRoot_pxpan_1",D6e="_CardSecondRowRootShadow_pxpan_11",P6e="_CardSecondRowContainer_pxpan_18",I6e="_CardSecondRowLink_pxpan_24",M6e="_CardSecondRowName_pxpan_30",O6e="_CardSecondRowTerm_pxpan_37",R6e="_CardSecondRowMeter_pxpan_42",L6e="_CardSecondRowWrapper_pxpan_48",B6e="_CardSecondRowContent_pxpan_54",F6e="_CardSecondRowBottom_pxpan_60",$6e="_CardSecondRowAdd_pxpan_65",U6e="_CardSecondRowGallery_pxpan_70",Ba={CardSecondRowRoot:A6e,CardSecondRowRootShadow:D6e,CardSecondRowContainer:P6e,CardSecondRowLink:I6e,CardSecondRowName:M6e,CardSecondRowTerm:O6e,CardSecondRowMeter:R6e,CardSecondRowWrapper:L6e,CardSecondRowContent:B6e,CardSecondRowBottom:F6e,CardSecondRowAdd:$6e,CardSecondRowGallery:U6e},V6e=t=>{const{images:e,name:n,address:s,history:i,user:a,developer:o,rooms:l,area:c,floor:u,price:d,priceOld:h,frame:f,deadline:p,id:g,complex:m,childrenBottom:_="",badge:y,variant:x,geo:b,location:w,geoVisible:C=!0,purchase:j,btnComparisonVisible:E=!0,btnFavoriteVisible:T=!0,classNameBottom:N="",controlsAdmin:P,buildingDiscount:I,buildingCashback:B}=t,{cashback:U,present:z,top:G,tags:V,className:J=""}=t,[Q,Y]=v.useState(!1),[oe,he]=v.useState(!1),me=`${l===0?"Студия":`${l}-комн квартира`}, ${c} м², ${u} эт.`,Oe=a||o,xe=`${ke.apartment}${g}${j?`?purchase=${j}`:""}`,Pe=()=>{switch(x){case"":return"";case"shadow":return Ba.CardSecondRowRootShadow;default:return""}},qe=h||d,Ie=bw(I,qe,c),Ve=(Ie||qe)/100*((U||0)+((B==null?void 0:B.value)||0));return r.jsxs("article",{className:`${Ba.CardSecondRowRoot} ${Pe()} ${J}`,children:[r.jsxs("div",{className:Ba.CardSecondRowContainer,children:[r.jsx("a",{href:xe,className:Ba.CardSecondRowLink}),r.jsx(xy,{images:e,title:me,href:xe,badge:y,imageFit:"contain",className:Ba.CardSecondRowGallery}),r.jsxs("div",{className:Ba.CardSecondRowWrapper,children:[r.jsxs("div",{className:Ba.CardSecondRowContent,children:[r.jsx("div",{className:"flex gap-3 justify-between mb-8 flex-grow",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"title-2 mb-2",children:me}),r.jsx("p",{className:Ba.CardSecondRowName,children:n||m}),r.jsxs("p",{className:Ba.CardSecondRowTerm,children:["Корпус: ",f," Срок сдачи: ",p]}),r.jsx("p",{className:Ba.CardSecondRowAddress,children:s})]})}),r.jsxs("div",{className:Ba.CardSecondRowAdd,children:[r.jsxs("div",{className:"mb-2",children:[!Ie&&r.jsxs("h3",{className:"title-2",children:[pt(qe)," ₽"]}),Ie&&r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsxs(cd,{children:[pt(qe)," ₽"]}),r.jsx("div",{className:"flex gap-2 items-center mb-1 mt-1",children:r.jsxs("h3",{className:"title-2",children:[pt(Ie)," ₽"]})})]})]}),!!(I||Ve||z)&&r.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-1.5",children:[!!I&&r.jsx(Ac,{discount:I.value,type_id:I.type,prefix:"Скидка",tooltip:!0,start_date:ct(I.start_date).format("DD.MM.YYYY"),end_date:ct(I.end_date).format("DD.MM.YYYY"),unit:I.unit}),Ve?r.jsx(Sa,{cashback:Ve,prefix:"Кешбэк"}):"",z&&r.jsx(pd,{present:z})]}),!!(V!=null&&V.length)&&r.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5 w-full",children:r.jsx(Sl,{data:V,increaseHeight:!0})})]}),r.jsx("div",{className:"ml-auto flex flex-col gap-2",children:P?r.jsxs(r.Fragment,{children:[r.jsx($t,{placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ke,{to:`${ht.apartment.edit}${g}`,target:"_blank",children:r.jsx(Ts,{Selector:"div",className:"relative z-50",children:r.jsx(Ns,{className:"stroke-blue stroke-[1.5px]",width:18,height:18})})}),children:"Редактировать"}),r.jsx($t,{placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>he(g),children:r.jsx(un,{className:"fill-red",width:16,height:16})}),children:"Удалить"})]}):r.jsxs(r.Fragment,{children:[E&&r.jsx(zh,{id:g,type:"apartment",variant:"tooltip",placement:"left"}),T&&r.jsx(Uc,{id:g,type:"apartment",variant:"tooltip",placement:"left"}),C&&r.jsx($t,{placement:"left",offset:[10,5],ElementTarget:()=>r.jsx(Ts,{className:"relative z-50",onClick:()=>Y(!0),children:r.jsx(wl,{width:15,height:15,className:"pointer-events-none"})}),children:"Показать на карте"})]})})]}),Oe&&r.jsxs("div",{className:`${Ba.CardSecondRowBottom} ${N}`,children:[r.jsx(Vs,{avatar:Oe.avatarUrl,name:Oe.name,pos:Oe.pos}),_]})]})]}),r.jsx(by,{condition:Q,set:Y,geo:b||w}),r.jsx(vy,{options:{condition:oe,set:he,title:r.jsxs(r.Fragment,{children:[r.jsx("br",{})," ",me]}),redirectUrl:!1}})]})},z6e=()=>{const{params:t,cards:e,isLoading:n,isLoadingMore:s,lastTrigger:i,isAdmin:a}=v.useContext(hw),[o,l]=v.useState(!1),c=ue(rt),u=({id:d})=>{if(t.purchase)return r.jsx(_e,{size:"Small",className:"relative z-[99]",onClick:()=>{const h=ct(),f={order_id:t.purchase,property_type:"apartment",property_id:d,date:h.format("YYYY-MM-DD"),time:h.format("HH:mm")};Me("/seller-api/suggestions/create",f).then(p=>{l(!0)})},children:"Предложить объект"})};return r.jsxs("div",{className:"container-desktop flex flex-col gap-3 md1:grid md1:grid-cols-2 md2:grid-cols-1",children:[n&&i==="filter"?r.jsx(po,{count:16,children:c?r.jsx(FW,{}):r.jsx(Lh,{})}):e.length>0?r.jsxs(r.Fragment,{children:[e.map(d=>c?v.createElement(V6e,{variant:"shadow",...d,key:d.id,purchase:t.purchase,btnComparisonVisible:!t.purchase,btnFavoriteVisible:!t.purchase,childrenBottom:r.jsx(u,{id:d.id}),classNameBottom:"flex justify-between items-center",controlsAdmin:a}):v.createElement(fD,{variant:"shadow",...d,key:d.id,purchase:t.purchase,btnComparisonVisible:!t.purchase,btnFavoriteVisible:!t.purchase,childrenBottom:r.jsx(u,{id:d.id})})),s&&r.jsx("div",{className:"flex items-center my-5",children:r.jsx(Ol,{className:"mx-auto"})})]}):r.jsx(Or,{}),t.ids&&r.jsx("a",{href:`${ke.listingFlats}`,className:"w-full mt-4",children:r.jsx(_e,{variant:"secondary",Selector:"div",children:"Смотреть всё"})}),o&&on.createPortal(r.jsxs(yi,{show:o,set:l,classListRoot:"min-w-[300px] !pt-6",children:[r.jsx("p",{className:"font-medium text-defaultMax",children:"Ваше предложение отправлено."}),r.jsx(Ke,{className:"block underline mt-2",to:`${ke.purchase.inner}${t.purchase}`,children:"Перейти к заявке"})]}),document.getElementById("overlay-wrapper"))]})},VW=async(t,e,n=3)=>{try{if(t&&e){const s=await Ue(`/api/${e}/${t}/apartments`).then(a=>a.data);return{data:await s.length?Me("/api/apartments",{ids:s,per_page:n,page:1}).then(a=>a.data):[],apartments:s}}}catch(s){console.log(s)}},sR=t=>{var e;return{filters:{primary:{price_from:t.filters.filtersMain.price.value.priceFrom,price_to:t.filters.filtersMain.price.value.priceTo,rooms:t.filters.filtersMain.rooms.value,area:t.filters.filtersMain.area,area_from:t.filters.filtersAdditional.area.value.areaFrom,area_to:t.filters.filtersAdditional.area.value.areaTo,frames:(e=t.filters.filtersAdditional.frame)==null?void 0:e.value}},tags:[...t.filters.tags,...t.filters.advantages],is_gift:t.filters.is_gift||null,is_video:t.filters.is_video||null,sort:t.filters.sortBy,page:t.page}},H6e=()=>{const t=Dt(),e=vs(),[n,s]=_r(),i=new URLSearchParams(window.location.search),a=ue(me=>me.listingFlats),[o,l]=v.useState([]),[c,u]=v.useState([]),[d,h]=v.useState(0),[f,p]=v.useState(!1),[g,m]=v.useState(!0),[_,y]=v.useState(!1),[x,b]=v.useState([]),[w,C]=v.useState(0),[j,E]=v.useState(1),[T,N]=v.useState(!1),[P,I]=v.useState(!1),[B,U]=v.useState({}),[z,G]=v.useState({}),[V,J]=v.useState([]),{tags:Q}=pl({type:"tags",assigned:"apartment"}),{tags:Y}=pl({type:"advantages",assigned:"apartment"});v.useEffect(()=>{Ue("/api/object-types").then(me=>{me.data&&l(me.data.map(Oe=>({value:Oe.id,label:Oe.name})))}),e.complex?(Yh(e.complex).then(me=>{U(me)}),Oh(e.complex).then(me=>{me.length&&t(Sse({frame:{name:"frame",nameLabel:"Корпус",type:"list-single",options:me,value:me.find(Oe=>Oe.value===i.get("frames"))||{}}})),p(!0)}),Xh(e.complex).then(me=>{u(me)})):e.purchase?Ue("/seller-api/associated-apartments").then(me=>{J(me.data),Ue(`/api/purchase-orders/${e.purchase}`).then(Oe=>{G(Oe.data),p(!0)}).catch(()=>{p(!0)})}).catch(()=>{J([]),p(!0)}):e.promo?VW(e.promo,"promo",9999999).then(me=>{J(me.apartments)}).finally(()=>{p(!0)}):p(!0)},[]),v.useEffect(()=>(document.addEventListener("scroll",me=>{he(me,T)}),()=>{document.removeEventListener("scroll",me=>{he(me,T)})}),[T]),v.useEffect(()=>{var Pe,qe;if(!f)return;const{filtersMain:me,filtersAdditional:Oe}=a.filters;h(oD([me,Oe])),a.filters.tags.length&&h(Ie=>Ie+1),a.filters.advantages.length&&h(Ie=>Ie+1),a.filters.is_gift&&h(Ie=>Ie+1),a.filters.is_video&&h(Ie=>Ie+1);const xe=new URLSearchParams(n);Yt(xe,"sort",a.filters.sortBy,"string"),Yt(xe,"rooms",a.filters.filtersMain.rooms.value,"array"),Yt(xe,"price_from",a.filters.filtersMain.price.value.priceFrom,"number"),Yt(xe,"price_to",a.filters.filtersMain.price.value.priceTo,"number"),Yt(xe,"area_from",a.filters.filtersAdditional.area.value.areaFrom,"number"),Yt(xe,"area_to",a.filters.filtersAdditional.area.value.areaTo,"number"),Yt(xe,"frames",(qe=(Pe=a.filters.filtersAdditional.frame)==null?void 0:Pe.value)==null?void 0:qe.value,"string"),Yt(xe,"tags",a.filters.tags,"array"),Yt(xe,"advantages",a.filters.advantages,"array"),Yt(xe,"is_gift",a.filters.is_gift,"bool"),Yt(xe,"is_video",a.filters.is_video,"bool"),s(xe),oe({...a,customIds:V})},[a.filters,f]);const oe=v.useCallback(es(me=>{t(bI("filter")),t(_I(1)),window.scrollTo({top:0}),m(!0),Me("/api/apartments",{ids:e.purchase||e.promo?me.customIds:i.getAll("id"),per_page:16,building_id:i.getAll("id").length?null:+e.complex,...sR({...me,page:1})}).then(Oe=>{m(!1),b(Oe.data.items),E(Oe.data.pages),C(Oe.data.total),T||N(!0)})},350),[]);v.useEffect(()=>{if(P&&!g){if(a.page+1>j){I(!1);return}t(bI("pagination")),m(!0),y(!0),Me("/api/apartments",{ids:e.purchase||e.promo?V:i.getAll("id"),per_page:16,building_id:i.getAll("id").length?null:+e.complex,...sR({...a,page:a.page+1})}).then(me=>{m(!1),y(!1),I(!1),b([...x,...me.data.items]),E(me.data.pages),C(me.data.total),t(_I(a.page+1))})}},[P]);const he=v.useCallback(es((me,Oe)=>{const xe=me.target.documentElement.scrollHeight;xe-(me.target.documentElement.scrollTop+window.innerHeight)<xe*1.05+700-xe&&Oe&&I(!0)},100),[]);return{types:o,tags:Q,advantages:Y,specialists:c,filterCount:d,buildingData:B,purchaseRequest:z,isLoading:g,isLoadingMore:_,params:e,cards:x,total:w,totalPages:j,listingFlatsSelector:a}},zW=()=>{const t=ue(rt),e=ue(Ot),n=Si(e),{types:s,tags:i,advantages:a,specialists:o,filterCount:l,buildingData:c,purchaseRequest:u,isLoading:d,isLoadingMore:h,params:f,cards:p,total:g,totalPages:m,listingFlatsSelector:_}=H6e();return r.jsx(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Каталог"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:r.jsxs(hw.Provider,{value:{tags:i,advantages:a,filterCount:l,isLoading:d,params:f,cards:p,total:g,totalPages:m,isLoadingMore:h,lastTrigger:_.lastTrigger,buildingData:c,isAdmin:n},children:[n?r.jsx(Qh,{}):r.jsx(zn,{children:!t&&r.jsx(nR,{})}),r.jsxs("main",{className:"main main-headerForm",children:[t&&r.jsx(nR,{}),r.jsxs("div",{className:"main-wrapper",children:[r.jsxs("div",{className:"container-desktop",children:[!!f.complex&&r.jsx("div",{className:"mb-3 md1:mb-6",children:c&&r.jsx(OW,{data:c,specialists:o})}),!!f.purchase&&r.jsx("div",{children:u&&r.jsx("div",{className:"mb-3 md1:mb-6",children:r.jsx(Cy,{className:"mmd1:!flex",bg:!0,data:{...u,current_type:s.find(y=>y.value===u.building_type_id),calc_props:u.pricing_attributes},href:`${ke.purchase.inner}${u.id}`})})}),t?r.jsxs("div",{className:"mb-3 white-block",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"flex flex-col gap-2",children:r.jsx("h1",{className:"title-2",children:mv(g||0)})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sy,{width:16,height:16}),r.jsx(vi,{options:Ha,value:Ha.find(y=>y.value===_.filters.sortBy)||Ha[0],onChange:y=>dispatch(b7(y.value)),className:"max-w-[300px]",nameLabel:"",variant:"second",iconArrow:!1})]})]}),!!i.length&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"title-3 mt-4 mb-3",children:"Часто ищут"}),r.jsx(p4,{className:"flex gap-1.5",data:i.map((y,x)=>{const b={value:y.id,label:y.name};return{id:x,value:_.filters.tags.find(w=>w===b.value),label:b.label,onClick:w=>{dispatch(jE({value:w,option:b,type:"tags"}))}}})})]})]}):r.jsx("h1",{className:"title-2 container mb-5",children:mv(g||0)})]}),r.jsx(z6e,{})]})]})]})})},q6e=()=>{const t=Mn(),[e,n]=v.useState(null),[s,i]=v.useState(!0);return v.useEffect(()=>{Ue(`/api/video/${t.id}`).then(a=>{n([a.data])}).finally(()=>{i(!1)})},[]),r.jsxs(r.Fragment,{children:[r.jsxs(dn,{children:[r.jsx("title",{children:"Смотреть Shorts"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),r.jsx("div",{className:"site-container",children:r.jsx("main",{className:"main !px-8 !pt-8 flex flex-col",children:r.jsxs("div",{children:[r.jsx("img",{src:U9,width:120,alt:"inrut"}),s?r.jsx("div",{className:"w-full flex-grow flex items-center justify-center",children:r.jsx(Ol,{className:"!w-[80px] !h-[80px]"})}):r.jsx("div",{children:e?r.jsx(SH,{data:e,single:!0}):"404"})]})})})]})},rR=({data:t,title:e=""})=>{const n=ue(rt);return r.jsx(r.Fragment,{children:!!t.length&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-4",children:e}),r.jsx("div",{className:"grid grid-cols-1 gap-1 scrollbarPrimary mmd1:overflow-y-auto mmd1:overflow-x-hidden mmd1:max-h-[508px] md1:grid-cols-2 md1:gap-6 md3:grid-cols-1",children:t.map(s=>r.jsx($i,{data:s,variant:n?"row":""},s.id))})]})})},W6e=({data:t,player:e})=>{const[n,s]=v.useState(!1);return r.jsx(r.Fragment,{children:!!t.length&&r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-2",children:"Клипы этого ЖК"}),r.jsx(Xs,{modules:[xi],slidesPerView:2.2,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:12,className:"w-full min-h-max",breakpoints:{799:{slidesPerView:4,spaceBetween:16},1222:{slidesPerView:2.2,spaceBetween:16}},children:t.map(i=>r.jsx(Tn,{children:r.jsx(Ly,{data:i,setShortsOpen:()=>{s(i.id),e&&e.pause()},onlyImage:!0},i.id)},i.id))}),r.jsx(Oy,{condition:n!==!1,set:s,data:t,startData:t.find(i=>i.id===n),startIndex:t.findIndex(i=>i.id===n)})]})})},G6e=()=>{var p,g,m,_;const t=Mn(),[e,n]=v.useState(null),[s,i]=v.useState(!0),a=ue(rt),[o,l]=v.useState([]),[c,u]=v.useState([]),[d,h]=v.useState([]),f=v.useRef(null);return((p=e==null?void 0:e.author)==null?void 0:p.role)===pn.id?e==null||e.developer:e==null||e.author,v.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"}),i(!0),(async()=>{try{const x=await Ue(`/api/video/${t.id}`).then(E=>E.data);n(x),i(!1),Me("/api/metric",{type:"views_video",metricable_type:"App\\Models\\Video",metricable_id:+t.id}).then(E=>{});const b=await _4(x.building_id),w=await Me("/api/feed/videos",{complex:[x.building_id],type:"shorts"}).then(E=>{var N;const T=(N=E.data.shorts)==null?void 0:N.filter(P=>P&&P!==x.video_url);return T!=null&&T.length?Ue("/api/video-url",{url:T}).then(P=>P.data.filter(I=>I&&!Ye(I))):[]}),C=await Me("/api/feed/videos",{complex:[x.building_id],type:"videos"}).then(E=>{var N;const T=(N=E.data.videos)==null?void 0:N.filter(P=>P&&P!==x.video_url);return T!=null&&T.length?Ue("/api/video-url",{url:T}).then(P=>P.data.filter(I=>I&&!Ye(I))):[]}),j=await Me("/api/feed/videos",{type:"videos",city:b.city}).then(E=>{const T=E.data.videos.filter(N=>N&&N!==x.video_url);return T.length?Ue("/api/video-url",{url:T}).then(N=>N.data.filter(P=>P&&!Ye(P)).filter(P=>!C.some(I=>P.id===I.id))):[]});l(w),u(C),h(j)}catch(x){console.log(x)}})()},[t.id]),r.jsxs(r.Fragment,{children:[r.jsxs(dn,{children:[r.jsx("title",{children:e?e.name:""}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),r.jsxs("div",{className:"site-container",children:[r.jsx(zn,{}),r.jsx("main",{className:"main mmd1:py-2",children:r.jsx("div",{className:"main-wrapper",children:r.jsx("div",{className:"container relative md1:px-0",children:s?r.jsx(r.Fragment,{children:a?r.jsxs("div",{className:"grid grid-cols-[1fr_350px] gap-4 text-white",children:[r.jsxs("div",{className:"select-none rounded-xl",children:[r.jsx(Fe,{className:"w-full pt-[56.25%] rounded-xl mt-2"}),r.jsx(Fe,{className:"w-3/4 h-8 rounded-xl mt-2"}),r.jsxs("div",{className:"mt-4 flex items-center gap-3 w-full",children:[r.jsx(Fe,{className:"w-10 h-10 rounded-full"}),r.jsx(Fe,{className:"w-2/5 h-10 rounded-lg"})]})]}),r.jsx("div",{children:r.jsx(Fe,{className:"w-full h-[90vh] rounded-xl mt-2"})})]}):r.jsx("div",{className:"text-white",children:r.jsxs("div",{className:"select-none rounded-xl",children:[r.jsx(Fe,{className:"w-full pt-[56.25%] rounded-xl mt-2"}),r.jsx(Fe,{className:"w-3/4 h-8 rounded-xl mt-2"}),r.jsxs("div",{className:"mt-4 flex items-center gap-3 w-full",children:[r.jsx(Fe,{className:"w-10 h-10 rounded-full"}),r.jsx(Fe,{className:"w-2/5 h-10 rounded-lg"})]})]})})}):r.jsx("div",{children:e?r.jsx(Ry,{variant:"page",data:e,className:"grid mmd1:grid-cols-[1fr_350px] gap-4 md1:gap-3",refElement:f,childrenVideo:r.jsxs(r.Fragment,{children:[!!((g=e.cards)!=null&&g.length)&&r.jsx(MN,{data:e,variant:"page",maxLength:15}),r.jsx(XA,{classNames:"white-block mt-3",building_id:e.building_id,organization_id:e.developer.id,specialist_id:((m=e==null?void 0:e.author)==null?void 0:m.role)===Wt.id?(_=e==null?void 0:e.author)==null?void 0:_.id:null})]}),children:r.jsxs("div",{className:"flex flex-col gap-8 md1:px-4 md1:pb-4 min-w-0 white-block-small self-start",children:[r.jsx(W6e,{player:f.current,data:o}),r.jsx(rR,{data:c,title:"Видео этого ЖК"}),r.jsx(rR,{data:d,title:"Смотрите также"})]})}):"404"})})})})]})]})},Y6e="_PrivacyPolicyRoot_kxkew_1",X6e="_PrivacyPolicyTable_kxkew_40",Ld={PrivacyPolicyRoot:Y6e,PrivacyPolicyTable:X6e},K6e=()=>r.jsx(r.Fragment,{children:r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Политика конфиденциальности и обработки персональных данных на inrut.ru"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsx("div",{children:r.jsx("div",{className:"container mt-8 mb-8",children:r.jsxs("div",{className:Ld.PrivacyPolicyRoot,children:[r.jsx("h1",{className:"title-1 text-center max-w-[500px] ml-auto mr-auto mb-8",children:"Политика ООО «Бизнес гарант» в отношении обработки персональных данных"}),r.jsx("h3",{className:"title-3",children:"1. Общие положения"}),r.jsx("p",{children:"1.1. Политика ООО «Бизнес гарант» (ИНН 0816041040, далее оператор, общество) в отношении обработки персональных данных (далее - Политика) разработана в целях обеспечения защиты прав и свобод субъекта персональных данных при обработке его персональных данных, в том числе защиты прав на неприкосновенность частной жизни, личную и семейную тайну."}),r.jsx("p",{children:"1.2. Основные понятия, используемые в Политике:"}),r.jsx("p",{children:"1.2.1. Персональные данные - любая информация, относящаяся к прямо или косвенно определенному или определяемому физическому лицу (субъекту персональных данных);"}),r.jsxs("p",{children:["1.2.2. Обработка персональных данных - любое действие (операция) или совокупность действий (операций) с персональными данными, совершаемых с использованием средств автоматизации или без их использования. Обработка персональных данных включает в себя в том числе:",r.jsx("br",{}),"- сбор;",r.jsx("br",{}),"- запись;",r.jsx("br",{}),"- систематизацию;",r.jsx("br",{}),"- накопление;",r.jsx("br",{}),"- хранение;",r.jsx("br",{}),"- уточнение (обновление, изменение);",r.jsx("br",{}),"- извлечение;",r.jsx("br",{}),"- использование;",r.jsx("br",{}),"- передачу (распространение, предоставление, доступ);",r.jsx("br",{}),"- обезличивание;",r.jsx("br",{}),"- блокирование;",r.jsx("br",{}),"- удаление;",r.jsx("br",{}),"- уничтожение."]}),r.jsx("p",{children:"1.2.3. Автоматизированная обработка персональных данных - обработка персональных данных с помощью средств вычислительной техники;"}),r.jsx("p",{children:"1.2.4. Распространение персональных данных - действия, направленные на раскрытие персональных данных неопределенному кругу лиц;"}),r.jsx("p",{children:"1.2.5. Предоставление персональных данных - действия, направленные на раскрытие персональных данных определенному лицу или определенному кругу лиц;"}),r.jsx("p",{children:"1.2.6. Блокирование персональных данных - временное прекращение обработки персональных данных (за исключением случаев, если обработка необходима для уточнения персональных данных);"}),r.jsx("p",{children:"1.2.7. Уничтожение персональных данных - действия, в результате которых становится невозможным восстановить содержание персональных данных в информационной системе персональных данных и (или) в результате которых уничтожаются материальные носители персональных данных;"}),r.jsx("p",{children:"1.2.8. Обезличивание персональных данных - действия, в результате которых становится невозможным без использования дополнительной информации определить принадлежность персональных данных конкретному субъекту персональных данных;"}),r.jsx("p",{children:"1.2.9. Оператор персональных данных (оператор) - государственный орган, муниципальный орган, юридическое или физическое лицо, самостоятельно или совместно с другими лицами организующие и (или) осуществляющие обработку персональных данных, а также определяющие цели обработки персональных данных, состав персональных данных, подлежащих обработке, действия (операции), совершаемые с персональными данными."}),r.jsx("p",{children:"1.3. Оператор, получивший доступ к персональным данным, обязан соблюдать конфиденциальность персональных данных - не раскрывать третьим лицам и не распространять персональные данные без согласия субъекта персональных данных, если иное не предусмотрено федеральным законом."}),r.jsx("h3",{className:"title-3",children:"2. Цели сбора персональных данных"}),r.jsx("p",{children:"2.1. Обработка персональных данных ограничивается достижением конкретных, заранее определенных и законных целей. Не допускается обработка персональных данных, несовместимая с целями сбора персональных данных."}),r.jsx("p",{children:"2.2. Цели обработки персональных данных происходят в том числе из анализа правовых актов, регламентирующих деятельность оператора, целей фактически осуществляемой оператором деятельности, а также деятельности, которая предусмотрена учредительными документами оператора, и конкретных бизнес-процессов оператора в конкретных информационных системах персональных данных (по структурным подразделениям оператора и их процедурам в отношении определенных категорий субъектов персональных данных)."}),r.jsx("p",{children:"2.3. Оператор обрабатывает персональные данные в следующих случаях:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"При осуществлении Оператором деятельности как владельца программно-аппаратного комплекса «Бизнес гарант», расположенного по адресу www.inrut.ru"}),r.jsx("li",{children:"При оформлении и регулировании трудовых и иных непосредственно связанных с ними отношений оператора;"}),r.jsx("li",{children:"При осуществлении оператором обычной хозяйственной деятельности в качестве юридического лица."})]}),r.jsx("p",{children:r.jsx("b",{children:"2.4. К целям обработки персональных данных оператора относятся:"})}),r.jsxs("p",{children:["2.4.1. При осуществлении Оператором деятельности как владельца программно-аппаратного комплекса «Бизнес гарант», расположенного по адресу",r.jsx("a",{href:"https://inrut.ru/",children:"www.inrut.ru"}),":"]}),r.jsx("div",{className:Ld.PrivacyPolicyTable,children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx("b",{children:"Цель обработки персональных данных"})}),r.jsx("th",{children:r.jsx("b",{children:"Категории субъектов персональных данных"})}),r.jsx("th",{children:r.jsx("b",{children:"Перечень персональных данных"})})]})}),r.jsxs("tbody",{style:{verticalAlign:"top"},children:[r.jsxs("tr",{children:[r.jsx("td",{children:"Использование, в том числе посещение, сайта Оператора и соответствующих мобильных приложений (далее по тексту совместно также – «Сайты»), а также иных сервисов оператора в соответствии с предоставляемой функциональностью, включая регистрацию и авторизацию на Сайтах и в таких сервисах"}),r.jsx("td",{children:"Пользователи Сайтов и иных сервисов оператора"}),r.jsxs("td",{children:["• ФИО;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты, никнеймы и ID в мессенджерах, социальных сетях и пр.);",r.jsx("br",{}),"• Сведения об использовании функционала Сайтов или иных сервисов оператора",r.jsx("br",{}),"• Сведения, собираемые посредством метрических программ, в том числе технические сведения о пользовательских устройствах и идентификаторы (cookies, геолокация устройства, метаданные и пр.)"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Оформление заказов услуг на Сайте"})," ",r.jsx("td",{children:"Лица, оформляющие заказы"}),r.jsxs("td",{children:["• ФИО;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты, никнеймы и ID в мессенджерах, социальных сетях и пр.);",r.jsx("br",{}),"• Записи звонков (разговоров);",r.jsx("br",{}),"• Сведения, собираемые посредством метрических программ, в том числе технические сведения о пользовательских устройствах и идентификаторы (cookies, геолокация устройства, метаданные и пр.)"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Направление рекламы"})," ",r.jsx("td",{children:"Получатели рекламы, предварительно выразившие на это согласие"}),r.jsxs("td",{children:["• ФИО;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты, никнеймы и ID в мессенджерах, социальных сетях и пр.);",r.jsx("br",{}),"• Иные данные, самостоятельно предоставленные лицами в адрес Общества (в рамках выражения согласия на получения рекламы) – например, конкретные предпочтения и интересы для персонализации получаемой рекламы;",r.jsx("br",{}),"• Сведения, собираемые посредством метрических программ, в том числе технические сведения о пользовательских устройствах и идентификаторы (cookies, геолокация устройства, метаданные и пр.)"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Контроль качества использования Сайтов и иных сервисов Общества, а также сбор статистики и осуществление прочей аналитика в отношении Сайтов и иных сервисов Общества"}),r.jsx("td",{children:"Пользователи Сайтов и иных сервисов оператора"}),r.jsxs("td",{children:["• ФИО;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты, никнеймы и ID в мессенджерах, социальных сетях и пр.);",r.jsx("br",{}),"• Сведения об оформленных и доставленных заказах («история заказов»), а также сведения об использовании функционала Сайтов или иных сервисов Общества (например, о приобретенных услугах, подключенных подписках, балансе средств и пр.);",r.jsx("br",{}),"• Иные данные, самостоятельно предоставленные лицами в адрес Общества (в рамках использования Сайтов и иных сервисов Общества) – например, отзывы;",r.jsx("br",{}),"• Сведения, собираемые посредством метрических программ, в том числе технические сведения о пользовательских устройствах и идентификаторы (cookies, геолокация устройства, метаданные и пр.)"]})]})]})]})}),r.jsx("p",{children:r.jsx("b",{children:"2.4.2. При оформлении и регулировании трудовых и иных непосредственно связанных с ними отношений оператора:"})}),r.jsx("div",{className:Ld.PrivacyPolicyTable,children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx("b",{children:"Цель обработки персональных данных"})}),r.jsx("th",{children:r.jsx("b",{children:"Категории субъектов персональных данных"})}),r.jsx("th",{children:r.jsx("b",{children:"Перечень персональных данных"})})]})}),r.jsxs("tbody",{style:{verticalAlign:"top"},children:[r.jsxs("tr",{children:[r.jsx("td",{children:"Ведение кадрового документооборота, включая формирование, ведение и хранение личных дел работников, трудовых книжек и иных кадровых документов, а также ведение воинского учета и миграционного учета в обществе"}),r.jsxs("td",{children:["• Работники;",r.jsx("br",{}),"• Бывшие работники;",r.jsx("br",{}),"• Близкие родственники работников, в том числе бывших"]}),r.jsxs("td",{children:["• Гражданство;",r.jsx("br",{}),"• ФИО;",r.jsx("br",{}),"• Пол;",r.jsx("br",{}),"• Возраст;",r.jsx("br",{}),"• Дата и место рождения;",r.jsx("br",{}),"• Паспортные данные или данные иного документа, удостоверяющего личность;",r.jsx("br",{}),"• Сведения, содержащиеся в документах миграционного учета (в отношении физических лиц, не являющихся гражданами Российской Федерации);",r.jsx("br",{}),"• Адрес регистрации по месту жительства и адрес фактического проживания;",r.jsx("br",{}),"• Контактная информация (номер телефона, факса, адрес электронной почты, почтовый адрес);",r.jsx("br",{}),"• Сведения об образовании, данные документов об образовании, квалификации, профессиональной подготовке, сведения о повышении квалификации и иные аналогичные данные;",r.jsx("br",{}),"• Семейное положение, сведения о составе семьи и близких родственниках, которые могут понадобиться Обществу, в том числе, но не ограничиваясь, для предоставления работнику льгот, предусмотренных трудовым и налоговым законодательством Российской Федерации;",r.jsx("br",{}),"• Сведения о воинском учете и сведения, содержащиеся в документах воинского учета (в отношении физических лиц, подлежащих воинскому учету);",r.jsx("br",{}),"• Сведения, содержащиеся в трудовой книжке, сведения о трудовом стаже, предыдущих местах работы, доходах с предыдущих мест работы;",r.jsx("br",{}),"• ИНН, СНИЛС;",r.jsx("br",{}),"• Банковские реквизиты;",r.jsx("br",{}),"• Информация о приеме, переводе, увольнении и иных событиях, относящихся к трудовой деятельности работника у Общества;",r.jsx("br",{}),"• Сведения о доходах у Общества;",r.jsx("br",{}),"• Сведения о деловых и иных личных качествах, носящие оценочный характер;",r.jsx("br",{}),"• Биографические сведения;",r.jsx("br",{}),"• Сведения о временной нетрудоспособности и о состоянии здоровья;",r.jsx("br",{}),"• Фотоизображение;",r.jsx("br",{}),"• Иные данные, самостоятельно предоставленные работником, в том числе бывшим, в адрес Общества – например, сведения об индивидуальных достижениях для внесения в трудовую книжку"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Соблюдение и исполнение требований действующего трудового законодательства Российской Федерации (расчет и выплата заработной платы, осуществление иных причитающихся выплат в рамках трудового законодательства, предоставление отпусков, направление в командировки, привлечение к дисциплинарной или материальной ответственности и пр.)"}),r.jsx("td",{rowSpan:"5",children:"Работники"}),r.jsxs("td",{children:["• Гражданство;",r.jsx("br",{}),"• ФИО;",r.jsx("br",{}),"• Паспортные данные или данные иного документа, удостоверяющего личность, в том числе за пределами Российской Федерации (при заграничных командировках);",r.jsx("br",{}),"• Сведения об образовании, данные документов об образовании, квалификации, профессиональной подготовке, сведения о повышении квалификации и иные аналогичные данные;",r.jsx("br",{}),"• Адрес регистрации по месту жительства и адрес фактического проживания;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты, никнеймы и ID в мессенджерах, социальных сетях и пр.);",r.jsx("br",{}),"• Сведения, содержащиеся в трудовой книжке, сведения о трудовом стаже, предыдущих местах работы, доходах с предыдущих мест работы;",r.jsx("br",{}),"• ИНН, СНИЛС;",r.jsx("br",{}),"• Банковские реквизиты;",r.jsx("br",{}),"• Информация о приеме, переводе, увольнении и иных событиях, относящихся к трудовой деятельности работника у Общества;",r.jsx("br",{}),"• Сведения о доходах у Общества;",r.jsx("br",{}),"• Сведения о доходах с предыдущих мест работы;",r.jsx("br",{}),"• Сведения о проездных документах, бронировании гостиниц и иные сведения, предусмотренные законодательством и (или) необходимые для организации командировки;",r.jsx("br",{}),"• Сведения о деловых и иных личных качествах, носящие оценочный характер;",r.jsx("br",{}),"• Биографические сведения;",r.jsx("br",{}),"• Сведения о временной нетрудоспособности и о состоянии здоровья;",r.jsx("br",{}),"• Иные данные, самостоятельно предоставленные работником, в адрес Общества – например, сведения о конкретных жизненных обстоятельствах, являющихся основанием для осуществления Обществом причитающихся выплат в рамках трудового законодательства"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Контроль количества и качества выполняемой работы"}),r.jsxs("td",{children:["• ФИО;",r.jsx("br",{}),"• Контактная информация (номер телефона, факса, адрес электронной почты, почтовый адрес);",r.jsx("br",{}),"• Информация о приеме, переводе, увольнении и иных событиях, относящихся к трудовой деятельности работника у Общества;",r.jsx("br",{}),"• Сведения о деловых и иных личных качествах, носящие оценочный характер;",r.jsx("br",{}),"• Биографические сведения"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Предоставление различных гарантий, льгот и компенсаций"}),r.jsxs("td",{children:["• Гражданство;",r.jsx("br",{}),"• ФИО;",r.jsx("br",{}),"• Пол;",r.jsx("br",{}),"• Возраст;",r.jsx("br",{}),"• Дата и место рождения;",r.jsx("br",{}),"• Паспортные данные или данные иного документа, удостоверяющего личность;",r.jsx("br",{}),"• Адрес регистрации по месту жительства и адрес фактического проживания;",r.jsx("br",{}),"• Контактная информация (номер телефона, факса, адрес электронной почты, почтовый адрес);",r.jsx("br",{}),"• Информация о приеме, переводе, увольнении и иных событиях, относящихся к трудовой деятельности работника у Общества;",r.jsx("br",{}),"• Биографические сведения"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Связь с работниками и организация внутренних коммуникаций, в том числе посредством электронной почты, телефонной связи и мессенджеров, а также путем включения работников во внутрикорпоративные справочники Общества"}),r.jsxs("td",{children:["• ФИО;",r.jsx("br",{}),"• Пол;",r.jsx("br",{}),"• Возраст;",r.jsx("br",{}),"• Дата рождения;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты, никнеймы и ID в мессенджерах, социальных сетях и пр.);",r.jsx("br",{}),"• Информация о приеме, переводе, увольнении и иных событиях, относящихся к трудовой деятельности работника у Общества;",r.jsx("br",{}),"• Сведения о деловых и иных личных качествах, носящие оценочный характер;",r.jsx("br",{}),"• Биографические сведения;",r.jsx("br",{}),"• Фотоизображение"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Направление на любой вид обучения как внутри Общества, так и во внешние организации, платформы, ресурсы, оказывающие соответствующий вид услуг"}),r.jsxs("td",{children:["• Гражданство;",r.jsx("br",{}),"• ФИО;",r.jsx("br",{}),"• Пол;",r.jsx("br",{}),"• Возраст;",r.jsx("br",{}),"• Дата и место рождения;",r.jsx("br",{}),"• Паспортные данные или данные иного документа, удостоверяющего личность;",r.jsx("br",{}),"• Адрес регистрации по месту жительства и адрес фактического проживания;",r.jsx("br",{}),"• Контактная информация (номер телефона, факса, адрес электронной почты, почтовый адрес);",r.jsx("br",{}),"• Данные документов об образовании, квалификации, профессиональной подготовке, сведения о повышении квалификации и иные аналогичные данные;",r.jsx("br",{}),"• ИНН, СНИЛС;",r.jsx("br",{}),"• Информация о приеме, переводе, увольнении и иных событиях, относящихся к трудовой деятельности работника у Общества;",r.jsx("br",{}),"• Биографические сведения"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Обработка информации (резюме) кандидата на трудоустройство"}),r.jsx("td",{children:"Кандидаты на замещение вакантных должностей Общества"}),r.jsxs("td",{children:["• ФИО;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты, никнеймы и ID в мессенджерах, социальных сетях и пр.);",r.jsx("br",{}),"• Иные данные, самостоятельно предоставленные кандидатом в адрес Общества и содержащиеся в резюме"]})]})]})]})}),r.jsx("p",{children:r.jsx("b",{children:"2.4.3. При осуществлении оператором обычной хозяйственной деятельности в качестве юридического лица:"})}),r.jsx("div",{className:Ld.PrivacyPolicyTable,children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx("b",{children:"Цель обработки персональных данных"})}),r.jsx("th",{children:r.jsx("b",{children:"Категории субъектов персональных данных"})}),r.jsx("th",{children:r.jsx("b",{children:"Перечень персональных данных"})})]})}),r.jsxs("tbody",{style:{verticalAlign:"top"},children:[r.jsxs("tr",{children:[r.jsx("td",{rowSpan:"2",children:"Заключение, исполнение и расторжение иных гражданско-правовых договоров с третьими лицами"}),r.jsx("td",{children:"Физические лица – стороны гражданско- правовых договоров"}),r.jsxs("td",{children:["• Гражданство;",r.jsx("br",{}),"• ФИО;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты, никнеймы и ID в мессенджерах, социальных сетях и пр.);",r.jsx("br",{}),"• Адрес регистрации по месту жительства и адрес фактического проживания;",r.jsx("br",{}),"• Банковские реквизиты (только для возмездных договоров);",r.jsx("br",{}),"• Номер регистрации в качестве индивидуального предпринимателя и прочие данные, содержащиеся в ЕГР и иных открытых (публичных) реестрах (если физическое лицо также является индивидуальным предпринимателем);",r.jsx("br",{}),"• Иные данные в соответствии с условиями договоров (при необходимости)"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Представители сторон гражданско-правовых договоров"}),r.jsxs("td",{children:["• ФИО;",r.jsx("br",{}),"• Должность;",r.jsx("br",{}),"• Реквизиты доверенностей"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Проверка благонадежности физических лиц, с которыми Общество намеревается установить деловые отношения (например, заключить гражданско-правовой договор)"}),r.jsx("td",{children:"Физические лица, с которыми Общество намеревается установить деловые отношения"}),r.jsxs("td",{children:["• Гражданство;",r.jsx("br",{}),"• ФИО;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты, никнеймы и ID в мессенджерах, социальных сетях и пр.);",r.jsx("br",{}),"• Паспортные данные или данные иного документа, удостоверяющего личность;",r.jsx("br",{}),"• Адрес регистрации по месту жительства и адрес фактического проживания;",r.jsx("br",{}),"• Номер регистрации в качестве индивидуального предпринимателя и прочие данные, содержащиеся в ЕГР и иных открытых (публичных) реестрах (если физическое лицо также является индивидуальным предпринимателем);",r.jsx("br",{}),"• Сведения о применении особых режимов налогообложения (если физическое лицо также является индивидуальным предпринимателем);",r.jsx("br",{}),"• Фактическое место осуществления предпринимательской деятельности (при осуществлении такой деятельности);",r.jsx("br",{}),"• Банковские реквизиты (если планируемые к установлению деловые отношения носят возмездный характер);",r.jsx("br",{}),"• Иные данные, запрашиваемые/получаемые Обществом и сообщенные/предоставленные в рамках проверки благонадежности"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Выдача доверенностей представителям Общества"}),r.jsx("td",{children:"Потенциальные представители Общества, в том числе работники Общества"}),r.jsxs("td",{children:["• ФИО;",r.jsx("br",{}),"• Должность (в отношении работников Общества);",r.jsx("br",{}),"• Паспортные данные или данные иного документа, удостоверяющего личность;",r.jsx("br",{}),"• Контактная информация (номер телефона, адрес электронной почты);",r.jsx("br",{}),"• Иные сведения, подлежащие включению в доверенность в соответствии с условиями такой доверенности"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Соблюдение и исполнение иных требований действующего законодательства Российской Федерации (осуществление бухгалтерского и налогового учета, организация документооборота и архивного хранения, направление соответствующих сведений в государственные органы, исполнение требований и предписаний государственных органов, исполнение судебных актов, рассмотрение претензий правообладателей и обращений субъектов персональных данных, потребителей и пр.)"}),r.jsxs("td",{children:["• Все категории субъектов персональных данных, как они указаны выше, в той мере, в которой к ним применимы соответствующие требования законодательства Российской Федерации (например, хранение персональных данных в составе договора для бухгалтерских целей);",r.jsx("br",{}),"• Иные субъекты персональных данных, каким-либо образом взаимодействующие с Обществом в рамках заявленной цели (например, в рамках реагирования на претензию правообладателя)"]}),r.jsxs("td",{children:["• Все персональные данные, относящиеся к конкретной категории субъектов персональных данных, как они указаны выше, в той мере, в которой к ним применимы соответствующие требования законодательства Российской Федерации;",r.jsx("br",{}),"• Иные данные, самостоятельно предоставленные субъектами персональных данных в адрес Общества – например, в рамках соответствующих запроса или претензии"]})]})]})]})}),r.jsx("h3",{className:"title-3",children:"3. Правовые основания и сроки обработки персональных данных"}),r.jsx("p",{children:"3.1. Общество обрабатывает персональные данные только при наличии хотя бы одного из условий ниже в течение следующих сроков:"}),r.jsx("div",{className:Ld.PrivacyPolicyTable,children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx("b",{children:"Правовое основание обработки персональных данных"})}),r.jsx("th",{children:r.jsx("b",{children:"Срок обработки и хранения персональных данных"})})]})}),r.jsxs("tbody",{style:{verticalAlign:"top"},children:[r.jsxs("tr",{children:[r.jsx("td",{children:"С согласия субъекта персональных данных на обработку его персональных данных"}),r.jsx("td",{children:"В течение срока, на который было дано согласие на обработку персональных данных"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Для достижения целей, предусмотренных международным договором Российской Федерации или законом, для осуществления и выполнения возложенных законодательством Российской Федерации на оператора функций, полномочий и обязанностей"}),r.jsx("td",{children:"В течение срока, установленного соответствующими международными договорами или законами"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"При необходимости обработки персональных данных, подлежащих опубликованию или обязательному раскрытию в соответствии с федеральным законом"}),r.jsx("td",{children:"В течение срока, установленного соответствующими законами"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Для исполнения судебного акта, акта другого органа или должностного лица, подлежащих исполнению в соответствии с законодательством Российской Федерации об исполнительном производстве"}),r.jsx("td",{children:"В течение срока, необходимо для исполнения соответствующего акта"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"В связи с участием лица в конституционном, гражданском, административном, уголовном судопроизводстве, судопроизводстве в арбитражных судах"}),r.jsx("td",{children:"В течение срока участия в соответствующем судопроизводстве, включая сроки обжалования (оспаривания) судебных актов, кроме случаев, когда более длительный срок обработки персональных данных установлен действующим законодательством Российской Федерации"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Для исполнения договора, стороной которого либо выгодоприобретателем или поручителем по которому является субъект персональных данных, а также для заключения договора по инициативе субъекта персональных данных или договора, по которому субъект персональных данных будет являться выгодоприобретателем или поручителем"}),r.jsx("td",{children:"В течение срока действия такого договора, кроме случаев, когда более длительный срок обработки персональных данных установлен действующим законодательством Российской Федерации или договором"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Для защиты жизни, здоровья или иных жизненно важных интересов субъекта персональных данных, если получение согласия субъекта персональных данных невозможно"}),r.jsx("td",{children:"До момента, когда получение согласия субъекта персональных данных станет возможным или когда соответствующие основания, угрожающие жизни, здоровью или иным жизненно важным интересам, отпадут (в зависимости от того, какое обстоятельство наступит раньше)"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Для осуществления прав и законных интересов оператора или третьих лиц при условии, что при этом не нарушаются права и свободы субъекта персональных данных"}),r.jsxs("td",{children:["В течение срока, необходимого для осуществления прав и обеспечения законных интересов",r.jsx("br",{}),r.jsx("br",{}),"Конкретный срок определяется Обществом с учетом положений настоящей Политики, внутренних документов и локальных нормативных актов Общества, а также принципов обработки персональных данных и требований действующего законодательства Российской Федерации, в том числе в части прекращения обработки персональных данных при достижении конкретных, заранее определенных и законных целей такой обработки"]})]})]})]})}),r.jsx("p",{children:"3.2. Если иное не предусмотрено законодательством Российской Федерации, Общество прекращает обработку персональных данных (в отношении любой из заявленных выше целей) и уничтожает их в случаях:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"ликвидации Общества;"})," ",r.jsx("li",{children:"реорганизации Общества, влекущей прекращение его деятельности;"}),r.jsx("li",{children:"отпадения правовых оснований обработки персональных данных и/или достижения целей обработки персональных данных."})]}),r.jsx("p",{children:"Конкретный порядок уничтожения персональных данных на носителях, содержащих персональные данные, в том числе внешних/съемных электронных носителях, бумажных носителях и в информационных системах персональных данных, определяются Обществом в своих внутренних документах и локальных нормативных актах."}),r.jsx("h3",{className:"title-3",children:"4. Информация об условиях обработки и о наличии запретов и условий на обработку неограниченным кругом лиц персональных данных, разрешенных субъектом персональных данных для распространения"}),r.jsx("p",{children:"4.1. В отношении персональных данных, опубликованных на сайте Оператора, действуют следующие правила и ограничения:"}),r.jsx("p",{children:"передача персональных данных неограниченному кругу лиц не запрещена;"}),r.jsx("p",{children:"обработка персональных данных неограниченным кругом лиц не запрещена;"}),r.jsx("p",{children:"полученные Оператором персональные данные могут передаваться с использованием информационно-телекоммуникационных сетей."}),r.jsx("h3",{className:"title-3",children:"5. Передача персональных данных третьим лицам"}),r.jsx("p",{children:"В целях оказания услуг и повышения их качества оператор вправе передавать персональные данные следующим третьим лицам:"}),r.jsx("div",{className:Ld.PrivacyPolicyTable,children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx("b",{children:"Цель обработки"})}),r.jsx("th",{children:r.jsx("b",{children:"Третьи лица"})}),r.jsx("th",{children:r.jsx("b",{children:"Цель передачи"})}),r.jsx("th",{children:r.jsx("b",{children:"Адрес"})})]})}),r.jsxs("tbody",{style:{verticalAlign:"top"},children:[r.jsxs("tr",{children:[r.jsx("td",{children:"Сбор веб-аналитики"})," ",r.jsx("td",{children:"ООО «Яндекс» (Россия)"})," ",r.jsx("td",{children:"Провайдер услуг веб-аналитики (Яндекс Метрика)"}),r.jsx("td",{children:"Провайдер услуг веб-аналитики (Яндекс Метрика)"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Сбор веб-аналитики"})," ",r.jsx("td",{children:"Google LLC"})," ",r.jsx("td",{children:"Провайдер услуг веб-аналитики (Google Analytics)"}),r.jsx("td",{children:"Провайдер услуг веб-аналитики (Google Analytics)"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Партнеры общества – автодилеры, лизинговые компании, страховые компании, агрегаторы"}),r.jsx("td",{children:"Согласно договорам с обществом"}),r.jsx("td",{children:"Оказание Партнером услуг, продажа товаров субъекту персональных данных"})," ",r.jsx("td",{children:"По запросу"})]})]})]})}),r.jsx("h3",{className:"title-3",children:"6. Обработка данных по аналитике посещений Сайта"}),r.jsx("p",{children:"В ряде случаев, как это описано ниже, Общество получает и обрабатывает персональные данные автоматически с помощью метрических программ, используемых на веб-сайтах и в онлайн-сервисах Общества. Для работы с такими данными Общество использует cookies."}),r.jsx("p",{children:"Cookies — это небольшие текстовые файлы, содержащие некоторую информацию, которые загружаются на пользовательское устройство (ПК, смартфон и т.д.) во время просмотра веб-страницы."}),r.jsx("p",{children:"Cookies позволяют сайтам распознавать пользовательские устройства, определять пользовательские предпочтения, а также собирать статистику того, как пользователи взаимодействуют с сайтами, для улучшения опыта использования такого сайта или для устранения различных ошибок и багов, которые могут периодически возникать. При этом перечень целей, для достижения которых необходимы cookies, не является исчерпывающим и зависит от конкретного сайта, который пользователь посещает или иным образом использует."}),r.jsx("p",{children:"В частности, на сайтах Общества могут использоваться следующие cookies:"}),r.jsx("div",{className:Ld.PrivacyPolicyTable,children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx("b",{children:"Категория"})}),r.jsx("th",{children:r.jsx("b",{children:"Описание и цель использования"})})]})}),r.jsxs("tbody",{style:{verticalAlign:"top"},children:[r.jsxs("tr",{children:[r.jsx("td",{children:"Технические cookies"}),r.jsxs("td",{children:["Данные файлы cookie являются обязательными для обеспечения функциональности веб-сайтов и онлайн-сервисов Общества, без них корректное функционирование данных ресурсов невозможно.",r.jsx("br",{}),r.jsx("br",{}),"Технические файлы cookie обеспечивают возможность пользователям осуществлять навигацию по указанным сайтам и сервисам, просматривать различные разделы, заполнять формы и устанавливать отметки в чекбоксах."]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Аналитические cookies"}),r.jsx("td",{children:"Данные файлы cookie осуществляют сбор информации о частоте посещений пользователей веб-сайтов и онлайн-сервисов Общества, просматриваемых разделах, активности по нажатию ссылок, а также общем поведении при перемещении по указанным сайтам и сервисам."})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Cookies предпочтений"}),r.jsx("td",{children:"Данные файлы cookie сохраняют настройки и предпочтения, указанные пользователями на веб-сайтах и в онлайн-сервисах Общества, что обеспечивает получение персонализированного опыта при использовании указанных сайтов и сервисов."})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Маркетинговые cookies"}),r.jsx("td",{children:"Данные файлы cookie собирают информацию о действиях пользователей как на веб-сайтах и в онлайн-сервисах Общества, так и на сторонних сайтах с целью показа наиболее релевантной рекламы, оценки эффективности данной рекламы и управления частотой показа рекламы для таких пользователей на сайтах и в сервисах Общества."})]})]})]})}),r.jsx("p",{children:"Пользователи также могут самостоятельно ограничить или полностью отключить установку cookies через настройки своего веб-браузера. Однако без использования технических cookies веб-сайты и онлайн-сервисы Общества могут работать некорректно, а часть их функционала может оказаться недоступна."}),r.jsx("p",{children:"Общество, используя cookies, не преследует цели идентифицировать конкретного пользователя веб-сайтов и онлайн-сервисов Общества."}),r.jsx("h3",{className:"title-3",children:"7. Безопасность персональных данных"})," ",r.jsx("p",{children:"Общество при осуществлении обработки персональных данных:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"принимает меры, необходимые и достаточные для обеспечения выполнения требований законодательства Российской Федерации, внутренних документов и локальных нормативных актов Общества в области персональных данных;"}),r.jsx("li",{children:"принимает правовые, организационные и технические меры для защиты персональных данных от неправомерного или случайного доступа к ним, уничтожения, изменения, блокирования, копирования, предоставления, распространения персональных данных, а также от иных неправомерных действий в отношении персональных данных;"}),r.jsx("li",{children:"назначает лицо, ответственное за организацию обработки персональных данных в Обществе;"}),r.jsx("li",{children:"издает внутренние документы, определяющие политику Общества в отношении обработки персональных данных, локальные акты по вопросам обработки персональных данных, а также локальные акты, устанавливающие процедуры, направленные на предотвращение и выявление нарушений законодательства Российской Федерации, устранение последствий таких нарушений;"}),r.jsx("li",{children:"осуществляет ознакомление работников Общества, структурных подразделений, непосредственно осуществляющих обработку персональных данных, с положениями законодательства Российской Федерации, внутренних документов и локальных нормативных актов Общества в области персональных данных, в том числе с требованиями к защите персональных данных, и обучение указанных работников;"}),r.jsx("li",{children:"осуществляет внутренний контроль и (или) аудит соответствия обработки персональных данных требованиям законодательства Российской Федерации и принятым в соответствии с ним нормативным правовым актам, иным требованиям к защите персональных данных, настоящей Политике, внутренним документам и локальным нормативным актам Общества в области персональных данных;"}),r.jsx("li",{children:"публикует или иным образом обеспечивает неограниченный доступ к настоящей Политике;"}),r.jsx("li",{children:"прекращает обработку персональных данных и уничтожает их в случаях, предусмотренных законодательством Российской Федерации;"}),r.jsx("li",{children:"совершает иные действия, предусмотренные законодательством Российской Федерации в области персональных данных."})]}),r.jsx("h3",{className:"title-3",children:"8. Права субъектов персональных данных"})," ",r.jsx("p",{children:"Лицо, персональные данные которого обрабатываются Обществом, имеет:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"право на отзыв ранее данного им согласия на обработку персональных данных*;"}),r.jsx("li",{children:"право на получение информации, касающейся обработки персональных данных;"}),r.jsx("li",{children:"право требовать уточнения своих персональных данных, их блокирования или уничтожения, если персональные данные являются неполными, устаревшими, недостоверными, незаконно полученными, не являются необходимыми для заявленной цели обработки, а также требовать прекращения обработки персональных данных, если цель такой обработки достигнута Обществом."})]}),r.jsx("p",{children:"* Согласно ч. 2 ст. 9, ч. 4 и 5 ст. 21 Федерального закона «О персональных данных» Общество вправе продолжить обработку персональных данных при наличии иных правовых оснований."}),r.jsx("p",{children:"Если иной порядок взаимодействия Общества и субъекта персональных данных не предусмотрен соответствующим документом между ними (например, договором или текстом согласия на обработку персональных данных), для реализации указанных прав субъекту персональных данных необходимо направить Обществу заявление:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"в письменной форме и подписанное собственноручной подписью — по адресу ООО «Бизнес гарант» 358000, г. ЭЛИСТА, ул. ИМ Б.БАСАНГОВА, ДОМ 2А, оф. ПОМЕЩ. 1; либо"}),r.jsxs("li",{children:["в виде электронного документа и подписанное электронной подписью — на электронную почту",r.jsx("a",{href:"mailto:Domstv@bk.ru",children:"Domstv@bk.ru"})]})]}),r.jsx("p",{children:"Такое заявление должно в обязательном порядке содержать описание требований субъекта персональных данных, а также следующие сведения:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"ФИО субъекта персональных данных;"}),r.jsx("li",{children:"номер основного документа, удостоверяющего личность субъекта персональных данных или его представителя, сведения о дате выдачи указанного документа и выдавшем его органе ЛИБО иные данные, позволяющие однозначно идентифицировать субъекта персональных данных;"}),r.jsx("li",{children:"сведения, подтверждающие участие субъекта персональных данных в отношениях с Обществом, ЛИБО сведения, иным способом подтверждающие факт обработки персональных данных Обществом;"}),r.jsx("li",{children:"подпись субъекта персональных данных или его представителя."})]}),r.jsx("p",{children:"Субъект персональных данных также вправе обжаловать действия (бездействия) и решения Общества, нарушающие его права при обработке персональных данных, в уполномоченный орган по защите прав субъектов персональных данных (Роскомнадзор) и в суд в порядке, установленном законодательством Российской Федерации."}),r.jsx("h3",{className:"title-3",children:"9. Общие положения"}),r.jsx("p",{children:"9.1. Действие Политики распространяется на все персональные данные субъектов, обрабатываемые в Обществе с применением средств автоматизации и без применения таких средств."}),r.jsx("p",{children:"9.2 К настоящей Политике имеет доступ любой субъект персональных данных, в том числе с использованием сети «Интернет»."}),r.jsx("p",{children:"9.3. Общество периодически актуализирует настоящую Политику и вправе в одностороннем порядке в любой момент изменять ее условия. Общество рекомендует регулярно проверять содержание настоящей Политики на предмет ее возможных изменений."}),r.jsx("p",{children:"Если иное не предусмотрено Политикой, все вносимые в нее изменения вступают в силу с даты, указанной в Политике."})," ",r.jsx("p",{}),r.jsx("p",{children:"Вы можете использовать эти контакты для оперативной связи с нами по поводу обработки персональных данных:"}),r.jsx("p",{children:"ООО «Бизнес гарант»"}),r.jsx("p",{children:"358000, г. ЭЛИСТА, ул. ИМ Б.БАСАНГОВА, ДОМ 2А, оф. ПОМЕЩ. 1"}),r.jsxs("p",{children:["Эл.почта- ",r.jsx("a",{href:"mailto:Domstv@bk.ru",children:"Domstv@bk.ru"})]})]})})})})]})}),Q6e=()=>{const t=Mn(),e=ue(Ks),[n,s]=v.useState(null),[i,a]=v.useState([]),[o,l]=v.useState([]),[c,u]=v.useState(!1),d=Dt();return v.useEffect(()=>{(async()=>{const p=await Ue(`/api/promo/${t.id}`).then(g=>({...g.data,currentUser:g.data.author||g.data.user,typeUser:g.data.author?"author":"developer",isActual:G$(g.data.date_start,g.data.date_end)}));await VW(t.id,"promo",10).then(g=>{if(no(g.data)){s(p);return}g.data.then(m=>{p.apartments=m.items,s(p)}),a(g.apartments)}),await Xh(p.building_id).then(g=>{l(g)})})()},[]),{data:n,specialistsData:o,isOpenChoiceSpecialist:c,setIsOpenChoiceSpecialist:u,goToChat:async()=>{var f;if(e)if(console.log(n),n.typeUser==="author"){const p=await $s({building_id:n.building_id,recipients_id:[n.author.id],type:xt.CHAT});xr(p)}else if(o.length)u(!0);else{const p=await $s({building_id:n.building_id,organization_id:(f=n.user)==null?void 0:f.id,type:xt.CHAT});xr(p)}else d(Bs(!0))}}},Z6e=()=>{const t=vs(),[e,n]=v.useState(!1),s=ue(rt),{data:i,specialistsData:a,isOpenChoiceSpecialist:o,setIsOpenChoiceSpecialist:l,goToChat:c}=Q6e();if(i)return r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Скидка"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[r.jsx(zn,{}),r.jsxs("main",{className:`main ${s?"":"!pb-[70px]"}`,children:[r.jsx("div",{className:"main-wrapper",children:r.jsx("div",{className:"white-block",children:r.jsx("div",{className:"container-desktop",children:r.jsxs(ea,{className:"!gap-x-6",children:[r.jsxs("section",{className:"min-w-0",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("button",{size:"Small",className:"ml-auto mb-4 flex gap-2 items-center",onClick:()=>n(!0),children:[r.jsx(X2,{className:"fill-lightGray",width:15,height:15}),"Поделиться"]}),!i.isActual&&r.jsx(_e,{size:"34",Selector:"div",className:"mb-6 flex-center-all gap-2 !bg-[#fff5e2] w-full !text-dark",children:"Срок действия акции истёк"}),r.jsx("h1",{className:"title-1",children:i.title}),r.jsxs("p",{className:"mt-4 text-primary400",children:["Действует до ",ct(i.date_end*1e3).format("DD.MM.YYYY г.")]}),r.jsx("img",{className:"mt-6 mb-6 rounded-xl w-full max-h-[512px]",src:qt(i.image),alt:i.name}),r.jsx("div",{className:"text-littleBig",children:r.jsx(Ku,{data:i.descr})}),!!+t.visibleComplex&&r.jsx("div",{className:"mt-8 flex gap-4 items-center w-full",children:r.jsx(Ke,{to:`${ke.building}${i.building_id}`,className:"w-full",target:"_blank",children:r.jsx(_e,{Selector:"div",variant:"secondary",children:"Перейти в ЖК"})})})]}),!!i.currentUser&&r.jsxs("div",{className:"mt-10 flex items-center gap-4 p-6 bg-primary600 rounded-xl relative",children:[r.jsx(Ke,{to:`${i.typeUser==="author"?`${ke.specialists.inner}`:`${ke.developers.inner}`}${i.currentUser.id}`,target:"_blank",className:"CardLinkElement z-10"}),r.jsx(Nn,{size:65,src:i.currentUser.image||i.currentUser.avatar_url,title:i.currentUser.name}),r.jsxs("div",{children:[r.jsx("p",{className:"text-primary400",children:"Автор статьи"}),r.jsx("p",{className:"font-medium mt-1.5 blue-link-hover",children:ks(i.currentUser.name,i.currentUser.surname)}),r.jsx("p",{className:"text-primary400 mt-2",children:i.typeUser==="author"?r.jsxs(r.Fragment,{children:['Менеджер отдела продаж "',i.building_name,'"']}):r.jsx(r.Fragment,{children:"Застройщик"})})]}),s&&r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"ml-auto relative z-20",size:"Small",onClick:c,children:"Задать вопрос в чат"}),r.jsx(wa,{width:25,height:25})]})]}),!!(i.apartments&&i.apartments.length)&&r.jsxs("div",{className:"mt-10",children:[r.jsxs("div",{className:"flex justify-between items-start gap-4 mb-6",children:[r.jsx("h2",{className:"title-2",children:"Проходит в данных квартирах"}),i.apartments.length>2&&r.jsx("a",{href:`${ke.listingFlats}?promo=${i.id}`,className:"blue-link _active",target:"_blank",children:"Смотреть всё"})]}),r.jsx(Xs,{slidesPerView:1.2,spaceBetween:16,breakpoints:{799:{slidesPerView:2.5,spaceBetween:24},1222:{slidesPerView:2.5,spaceBetween:24}},children:i.apartments.map(u=>r.jsx(Tn,{children:r.jsx(fD,{...u})},u.id))})]})]}),r.jsx(lo,{children:!!i.user&&r.jsxs("div",{className:"flex flex-col text-center items-center mmd1:p-6 white-block-small-desktop md1:mt-8",children:[r.jsx(Nn,{size:95,src:i.user.avatar_url,title:i.user.name}),r.jsx(Ke,{to:`${ke.developers.inner}${i.user.id}`,className:"font-medium mt-5 blue-link-hover",children:ks(i.user.name,i.user.surname)}),r.jsx("p",{className:"text-primary400 mt-1.5",children:i.user.pos}),(i.user.underСonstruction||i.user.handedOver)&&r.jsxs("div",{className:"mt-5 font-medium",children:[i.user.underСonstruction&&r.jsxs("span",{children:[i.user.underСonstruction," Строиться, "]}),i.user.handedOver&&r.jsxs("span",{children:[i.user.handedOver," сдано"]})]})]})})]})})})}),r.jsx(Dl,{activeDefault:!0,conditionWidth:!s,children:r.jsx("div",{className:"py-2.5 px-4 gap-2 grid grid-cols-1",children:r.jsx(_e,{className:"w-full",onClick:c,children:"Задать вопрос в чат"})})})]}),r.jsx(Bm,{condition:e,set:n,title:"Поделиться"}),i.typeUser==="developer"&&r.jsx(WA,{condition:o,set:l,specialists:a,building_id:i.building_id})]})},J6e=({control:t,placeholder:e,name:n,options:s={}})=>{const i=ue(rt),[a,o]=v.useState(!1);if(i)return r.jsx(Qe,{control:t,placeholder:e,name:n});if(!i)return r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"h-full w-hull flex-center-all bg-primary700 rounded-[10px]",onClick:()=>o(!0),children:r.jsx(z7,{className:"fill-gray",width:18,height:18})}),r.jsx(Ze,{condition:a,children:r.jsxs(gt,{condition:a,set:o,options:{modalClassNames:"",overlayClassNames:"_bottom _full",modalContentClassNames:"!px-4"},children:[r.jsx("h3",{className:"title-3 mb-5",children:s.title}),r.jsx(Qe,{control:t,placeholder:e,name:n}),r.jsx(_e,{size:"Small",className:"w-full mt-3",onClick:()=>o(!1),children:s.text_show})]})})]})},eMe=()=>{const{filterCount:t,setIsOpenMoreFilter:e,reset:n,cities:s,currentCity:i,variant:a,control:o,setValue:l,complexes:c}=v.useContext(hy),u=ue(rt),d=ue(Ks),h=Dt();return r.jsxs(yd,{className:He("scrollbarPrimary",a!=="seller"&&`${u?"grid-cols-[145px_1fr_max-content]":"grid-cols-[50px_40px_minmax(max-content,300px)]"}`,a==="seller"&&"!px-0 grid-cols-[270px_max-content_270px]"),shadow:!1,children:[a!=="seller"&&r.jsxs(r.Fragment,{children:[r.jsx(hC,{count:t,onClick:()=>e(f=>!f),mini:!u}),r.jsx(J6e,{control:o,placeholder:"Поиск по параметрам и имени",name:"search",options:{title:"Поиск заявок",text_show:"Показать заявки"}}),r.jsx(_e,{type:"button",size:"Small",onClick:()=>{d?window.open(Fn.purchase.create,"_blank"):h(Bs(!0))},children:"Разместить заявку на покупку"})]}),a==="seller"&&r.jsxs(r.Fragment,{children:[r.jsx(Es,{nameLabel:"Комплекс",control:o,search:!0,btnsActions:!0,options:c,name:"complexes"}),r.jsx(_c,{control:o,options:wy,name:"rooms",type:"multiple"}),r.jsx(Es,{nameLabel:"Способ расчёта",name:"calc_props",control:o,calcProp:!0,options:u_,setValue:l})]})]})},pC=v.createContext(),tMe=({defaultValue:t={},nameLabel:e="Город"})=>{var u;const{values:n,control:s,setValue:i,setDevelopers:a=[],initFieldsForm:o,setInitFieldsForm:l}=v.useContext(pC),c=ue(Vh);return v.useEffect(()=>{const d=n==null?void 0:n.city;d&&Me("/api/developers/all",{city:d.value}).then(h=>{const f=XN(h.data);a(f),o.developers&&i("developers",[]),o.complexes&&i("complexes",[]),l(p=>({...p,developers:!0,complexes:!0}))})},[(u=n==null?void 0:n.city)==null?void 0:u.value]),r.jsx(fn,{nameLabel:e,options:c,control:s,defaultValue:t,setValue:i,name:"city"})},nMe=({nameLabel:t=""})=>{var c;const{values:e,control:n,setValue:s,developers:i=[],setComplexes:a,initFieldsForm:o,setInitFieldsForm:l}=v.useContext(pC);return v.useEffect(()=>{const u=e==null?void 0:e.developers;u&&Me("/api/developers/complexes",{developer_ids:u.map(d=>d.value)}).then(d=>{a(d.data),o.complexes&&s("complexes",[]),l(h=>({...h,complexes:!0}))})},[(c=e==null?void 0:e.developers)==null?void 0:c.length]),r.jsx(Es,{nameLabel:t,control:n,options:i,name:"developers",setValue:s,setValuePermit:!0,search:!0,btnsActions:!0})},sMe=({nameLabel:t=""})=>{const{control:e,setValue:n,complexes:s}=v.useContext(pC);return r.jsx(Es,{nameLabel:t,control:e,search:!0,btnsActions:!0,options:s,name:"complexes",setValue:n,setValuePermit:!0})},rMe=({nameLabel:t})=>r.jsx(nMe,{nameLabel:t}),iMe=({nameLabel:t=""})=>r.jsx(sMe,{nameLabel:t}),aMe=()=>{const{control:t,filterCount:e,setIsOpenMoreFilter:n,isOpenMoreFilter:s,reset:i,setValue:a,cities:o,currentCity:l}=v.useContext(hy),c=ue(rt),u=()=>r.jsx(Sr,{set:n,className:"px-8 py-6 mb-8 md1:px-4 md1:py-4 md1:mb-6",children:r.jsx("h2",{className:"title-2",children:"Фильтры"})}),d=()=>r.jsxs("div",{className:"ModalFooter",children:[e>0?r.jsxs(_e,{variant:"secondary",size:"Small",onClick:h=>{h.preventDefault(),i({city:o.find(f=>f.value===l.id)})},children:["Очистить ",c&&`фильтр ⋅ ${e}`]}):r.jsx("div",{}),r.jsx(_e,{size:"Small",onClick:()=>n(!1),children:"Показать заявки"})]});return r.jsx(Ze,{condition:s,children:r.jsx(gt,{options:{modalClassNames:"HeaderSticky !px-0 !pb-0",modalContentClassNames:"!py-0 !pl-8 !pr-12 md1:!px-4"},style:window.innerWidth>1222?{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"800px"}:{"--modal-space":"0","--modal-height":"var(--vh)","--modal-width":"100%"},set:n,condition:s,closeBtn:!1,ModalHeader:u,ModalFooter:d,children:r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsx(nn,{name:"Город",widthChildren:460,fontWeight:"medium",children:r.jsx(tMe,{nameLabel:"",defaultValue:o.find(h=>h.value===l.id)})}),r.jsx(nn,{name:"Комнатность",widthChildren:460,fontWeight:"medium",children:r.jsx(_c,{control:t,options:wy,name:"rooms",type:"multiple"})}),r.jsx(nn,{name:"Застройщик",widthChildren:460,fontWeight:"medium",children:r.jsx(rMe,{})}),r.jsx(nn,{name:"Комплекс",widthChildren:460,fontWeight:"medium",children:r.jsx(iMe,{})}),r.jsx(nn,{name:"Способ расчёта",widthChildren:460,fontWeight:"medium",children:r.jsx(Es,{name:"calc_props",control:t,calcProp:!0,options:u_,setValue:a})})]})})})},HW=()=>{const{control:t,cities:e,setValue:n,developers:s,complexes:i,setComplexes:a,setDevelopers:o,watchedValues:l,initFieldsForm:c,setInitFieldsForm:u}=v.useContext(hy);return r.jsx("form",{children:r.jsxs(pC.Provider,{value:{values:l,developers:s,setDevelopers:o,complexes:i,setComplexes:a,control:t,cities:e,setValue:n,initFieldsForm:c,setInitFieldsForm:u},children:[r.jsx(eMe,{}),r.jsx(aMe,{})]})})},oMe=()=>v.useState({developers:!1,complexes:!1}),qW=(t,e)=>{const n=ue(Ot),s=n.role?hd(n):t===Wt.id,i=ue(Ci),[a,o]=_r(),[l,c]=oMe(),u=Xr(),d=ue(Vh),{control:h,reset:f,setValue:p}=en({defaultValues:{search:"",calc_props:[],complexes:[],developers:[],rooms:[],city:d.find(Y=>Y.value===i.id)}}),[g,m]=v.useState([]),[_,y]=v.useState([]),[x,b]=v.useState([]),[w,C]=v.useState(null),[j,E]=v.useState(!0),[T,N]=v.useState(1),[P,I]=v.useState(0),[B,U]=v.useState(!1),[z,G]=v.useState({total:0,pages:0,items:[]}),V=oy({control:h}),J=Y=>{E(!0),I(j5e(Y,["defaultCity","userIsSeller","activeType"],{city:Y.defaultCity}));const oe={...Y,page:Y.page,per_page:16,show_all_purchase_orders:Y.activeType==="all"&&Y.userIsSeller};delete oe.defaultCity,delete oe.userIsSeller,delete oe.activeType,Me(`/${Y.userIsSeller?"seller-api":"api"}/purchase-orders`,oe).then(he=>{E(!1),G(he.data)})},Q=v.useCallback(es(Y=>{J(Y)},400),[]);return v.useEffect(()=>{d.length>0&&i.id&&p("city",d.find(Y=>Y.value===i.id))},[d,i]),v.useEffect(()=>{Ue("/api/object-types").then(Y=>{Y.data&&m(Y.data.map(oe=>({value:oe.id,label:oe.name})))})},[]),v.useEffect(()=>{s&&C(e)},[s]),v.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[T]),v.useEffect(()=>{var Y,oe,he,me,Oe;V.city&&(E(!0),Q({rooms:V.rooms,type:(Y=V.type)==null?void 0:Y.value,calc_props:(oe=V.calc_props)==null?void 0:oe.map(xe=>xe.label),developers:(he=V.developers)==null?void 0:he.map(xe=>xe.value),complexes:(me=V.complexes)==null?void 0:me.map(xe=>xe.value),city:(Oe=V.city)==null?void 0:Oe.value,page:T,defaultCity:i.id,userIsSeller:s,activeType:w||"all",search:V.search||""}))},[JSON.stringify(V),T,i.id,s,w,u.pathname]),{data:z,filterCount:P,isOpenMoreFilter:B,setIsOpenMoreFilter:U,currentCity:i,control:h,reset:f,types:g,setDevelopers:y,developers:_,complexes:x,setComplexes:b,setValue:p,watchedValues:V,initFieldsForm:l,setInitFieldsForm:c,userIsSeller:s,isLoading:j,currentPage:T,setCurrentPage:N,searchParams:a,setSearchParams:o,activeType:w,setActiveType:C,userInfo:n}},lMe=({role_id:t=sn.id})=>{var j;const e=ue(Vh),{data:n,filterCount:s,isOpenMoreFilter:i,setIsOpenMoreFilter:a,currentCity:o,control:l,reset:c,types:u,setDevelopers:d,developers:h,complexes:f,setComplexes:p,setValue:g,watchedValues:m,initFieldsForm:_,setInitFieldsForm:y,userIsSeller:x,isLoading:b,currentPage:w,setCurrentPage:C}=qW(t);return r.jsx(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Заявки на покупку"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:r.jsxs(hy.Provider,{value:{filterCount:s,isOpenMoreFilter:i,setIsOpenMoreFilter:a,currentCity:o,cities:e,control:l,reset:c,types:u,setDevelopers:d,developers:h,complexes:f,setComplexes:p,setValue:g,watchedValues:m,initFieldsForm:_,setInitFieldsForm:y},children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper",children:r.jsxs("div",{className:"container-desktop",children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Заявки на покупку"}),r.jsx(HW,{})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"flex flex-col white-block !px-0 !py-5 md1:!py-3 ",children:b?r.jsx(po,{count:8,children:r.jsxs(Jy,{className:"grid-cols-[700px_160px] h-[135px] !shadow-none mmd1:justify-between  md1:flex md1:flex-col md1:gap-3 md1:items-start",children:[r.jsx(Fe,{className:"h-10 md1:w-3/4 rounded-lg"}),r.jsx(Fe,{className:"h-10 md1:w-3/4 rounded-lg"})]})}):r.jsx(r.Fragment,{children:(j=n.items)!=null&&j.length?r.jsx(r.Fragment,{children:n.items.map((E,T)=>r.jsx(Cy,{classNameContent:"mmd1:grid mmd1:grid-cols-[940px_max-content]",className:"py-5 px-8",data:{...E,current_type:u.find(N=>N.value===E.type)},href:`${x?`${At.purchase.inner}`:`${ke.purchase.inner}`}${E.id}`},T))}):r.jsx(Or,{block:!1})})}),r.jsx(zo,{className:"mt-8",currentPage:w,setCurrentPage:E=>C(E),total:n.pages})]})]})})})]})})},cMe=()=>{const{data:t}=v.useContext(fy),{search_area:e,neighboring_areas:n}=t,[s,i]=v.useState(!1),[a,o]=v.useState(null),l=v.useRef(null),c=ue(rt);v.useEffect(()=>{wm(hm).then(()=>i(!0))},[]);const u=()=>{try{fC(),ymaps.ready(["ext.paintOnMap"]).then(function(){const d=e.reduce((m,_)=>_.length>m.length?_:m),h=d.reduce((m,_)=>m+_[0],0)/d.length,f=d.reduce((m,_)=>m+_[1],0)/d.length,p=new ymaps.Map("customMap",{center:[h,f],zoom:12,controls:[]}),g=new ymaps.GeoObjectCollection;if(p.geoObjects.add(g),e.length>0)for(let m=0;m<e.length;m++){let _=new ymaps.Polygon([e[m]],{},zu);_.myCoordinates=e[m],g.add(_)}o(p),Sm(p,l),jm(p,l)})}catch(d){console.log("error is",d)}};return v.useEffect(()=>{s&&!a&&u()},[s,a]),r.jsx("section",{children:r.jsxs("div",{className:"mt-8 overflow-hidden",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Расположение поиска"}),r.jsx("div",{id:"customMap",className:"mt-6 remove-copyrights-pane relative w-full h-[284px] md1:h-[350px] rounded-xl overflow-hidden",children:s&&a&&r.jsxs("div",{className:"ymap-actions-container",ref:l,children:[r.jsx("div",{className:"ymap-actions ymap-actions-group ymap-action-right-top",children:r.jsx("button",{type:"button",onClick:()=>Cm(a,l),className:"ymap-action ymap-action-btn",children:r.jsx($h,{})})}),r.jsxs("div",{className:"ymap-actions ymap-top-right-center ymap-actions-group ymap-actions-group-join",children:[r.jsx("button",{type:"button",onClick:()=>qh(a),className:"ymap-action",children:r.jsx(Ja,{className:"stroke-black"})}),r.jsx("button",{type:"button",onClick:()=>Wh(a),className:"ymap-action",children:r.jsx(Uh,{})})]})]})}),r.jsxs(vn,{className:"mt-4",justifyBetween:!c,children:[r.jsx("span",{className:"whitespace-nowrap",children:"Можно предлагать соседние районы"}),r.jsx("span",{children:n?"Да":"Нет"})]})]})})},uMe=()=>{var T,N,P,I;const{data:t}=v.useContext(fy),{created_at:e,city:n,developers:s,complexes:i,view_start:a,price:o,pricing_attributes:l,attributes:c,rooms:u,area_total_from:d,area_total_to:h,area_kitchen_from:f,area_kitchen_to:p,floor_from:g,floor_to:m,description:_,details:y,buildings:x,price_type:b}=t,w=ue(rt),C="md1:flex-col",j="!min-w-[65%] max-w-[65%] md1:!min-w-full md1:!max-w-full !font-medium md1:mt-1.5",E=u?u.sort((B,U)=>B-U).map(B=>B===0?"Студия":B):[];return r.jsx("section",{children:r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Параметры заявки на покупку"}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Создано"}),r.jsx("span",{className:j,children:ct(e).format("DD.MM.YYYY в HH:mm:ss")})]}),n&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Город"}),r.jsx("span",{className:j,children:n.name})]}),a&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Планирую смотреть"}),r.jsx("span",{className:j,children:(T=Y1.find(B=>B.value===a))==null?void 0:T.label})]}),!!(s&&s.length)&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Застройщик"}),r.jsx("span",{className:j,children:(N=s.map(B=>B.name))==null?void 0:N.join(", ")})]}),!!(x&&x.length)&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Жилой комплекс"}),r.jsx("span",{className:j,children:(P=x.map(B=>`ЖК ${B.name}`))==null?void 0:P.join(", ")})]}),!!i&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Комплекс"}),r.jsx("span",{className:j,children:(I=i.map(B=>B.label))==null?void 0:I.join(", ")})]}),r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:b==="object_price_from"?"Бюджет":b==="month_payment"?"Ежемесячный платёж до":""}),r.jsxs("div",{className:`flex flex-wrap gap-1.5 ${j}`,children:[r.jsxs("span",{className:"whitespace-nowrap mr-2",children:[pt(o||0)," ₽"]}),r.jsx(x$,{container:!1,data:l,className:""})]})]}),u&&u.length>0&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Кол-во комнат"}),r.jsx("span",{className:j,children:E.join(", ")})]}),d&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Площадь общая от"}),r.jsxs("span",{className:j,children:[d," м²"]})]}),h&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Площадь общая до"}),r.jsxs("span",{className:j,children:[h," м²"]})]}),(f||p)&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Площадь кухни"}),r.jsxs("div",{className:j,children:[f?r.jsxs("span",{children:["от ",f," м²  "]}):"",p?r.jsxs("span",{children:["до ",p," м²"]}):""]})]}),(g||m)&&r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:"Этаж"}),r.jsxs("div",{className:j,children:[g?r.jsxs("span",{children:["от ",g,"  "]}):"",m?r.jsxs("span",{children:["до ",m]}):""]})]}),c.map((B,U)=>r.jsxs(vn,{className:C,hiddenAfter:!w,children:[r.jsx("span",{children:B.name}),r.jsx("span",{className:j,children:B.value.join(", ")})]},U))]}),_&&r.jsxs("div",{children:[r.jsx("h2",{className:"title-2 mb-4 mt-8",children:"Описание"}),r.jsx(Ku,{data:_})]}),y&&r.jsxs("div",{children:[r.jsx("h2",{className:"title-2 mb-4 mt-8",children:"Важные детали в поиске объекта"}),r.jsx(qfe,{descr:y})]}),t.search_area&&t.search_area.length?r.jsx(cMe,{}):""]})})},dMe=({condition:t,set:e,onSubmit:n})=>{const{handleSubmit:s,control:i,setValue:a}=en(),o=["Вымышленная заявка","Заявка уже не актуальна","Некорректные параметры заявки","Другое"].map(c=>({label:c,value:c})),l=c=>{const u={cause:W$(o,c),description:c.description};n(u)};return r.jsx(gt,{options:{overlayClassNames:"_right",modalClassNames:"mmd1:!w-[500px]"},set:e,condition:t,children:r.jsxs("form",{onSubmit:s(l),children:[r.jsx("h3",{className:"title-3",children:"На что жалуетесь ?"}),r.jsx("div",{className:"mt-6 flex flex-col gap-3",children:r.jsx(km,{control:i,setValue:a,checkboxes:o})}),r.jsx("h3",{className:"title-3 mt-6 mb-3",children:"Комментарий"}),r.jsx(bi,{control:i,maxLength:4e3,name:"description",placeholder:"Расскажите подробнее в чем проблема"}),r.jsx(_e,{className:"mt-6 w-full",children:"Отправить"})]})})},iR=({className:t=""})=>r.jsxs("div",{className:`flex flex-col text-center items-center white-block-small p-6 ${t}`,children:[r.jsx("h3",{className:"title-3 mb-4",children:"История изменения заявки"}),r.jsx("div",{className:"flex flex-col gap-3 w-full",children:r.jsx(_e,{children:"Смотреть"})})]}),aR=({className:t=""})=>{var c;const{data:e,userIsSeller:n,userIsBuyer:s,myPurchaseRequest:i,emptyObjectModal:a,setEmptyObjectModal:o}=v.useContext(fy),l=Mn();if(e.user)return r.jsxs("div",{className:`flex flex-col text-center items-center white-block-small p-6 mmd1:mb-4 ${t}`,children:[r.jsx(Nn,{size:95,src:(c=e.user)==null?void 0:c.avatarUrl,title:e.user.name}),r.jsx("span",{className:"font-medium mt-5",children:i?"Вы":e.user.name}),(e.user.pos||e.user.last_seen_online)&&r.jsxs("span",{className:"text-primary400 mt-1.5",children:[e.user.pos," ",e.user.last_seen_online?`был в сети ${e.user.last_seen_online}`:""]}),n&&r.jsx("div",{className:"flex flex-col w-full mt-5",children:r.jsx(Ke,{target:"_blank",to:`${ke.listingFlats}?purchase=${l.id}`,children:r.jsx(_e,{Selector:"div",children:"Предложить объект"})})}),s&&!i&&r.jsx("div",{className:"flex flex-col w-full mt-5",children:r.jsx(_e,{onClick:()=>o(!0),children:"Предложить объект"})})]})},oR=({className:t=""})=>{const{data:e,setConfirmDeleteModal:n,setIsOpenComplainModal:s,setIsOpenShareModal:i,myPurchaseRequest:a}=v.useContext(fy),o=Mn();return r.jsx("div",{className:`white-block-small !py-2 mb-3 ${t}`,children:r.jsx("div",{className:"grid grid-cols-2 gap-3",children:a?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{target:"_blank",to:`${Fn.purchase.edit}${o.id}`,className:"w-full h-full block",children:r.jsx(mi,{title:"Редактировать",children:r.jsx(Ns,{width:16,height:16,className:"!stroke-[currentColor] !stroke-[1.5px] !fill-none"})})}),r.jsx(mi,{title:"Закрыть",onClick:()=>n(e.id),children:r.jsx(un,{width:16,height:16})})]}):r.jsxs(r.Fragment,{children:[r.jsx(yw,{set:i}),r.jsx(mi,{title:"Пожаловаться",onClick:()=>s(!0),children:r.jsx(Ik,{width:16,height:16})})]})})})},hMe=()=>{var h,f;const t=Mn(),[e,n]=v.useState(null),s=ue(Ot),i=hd(s),a=xm(s),o=Ye(s)?!1:((h=e==null?void 0:e.user)==null?void 0:h.id)===s.id,l=(f=s==null?void 0:s.role)==null?void 0:f.id,c=Mr();return v.useEffect(()=>{(async()=>{var _;const m=(_=(await Ue("/api/object-types").then(y=>y.data)).find(y=>y.name==="Новостройки"))==null?void 0:_.id;m&&await Ue(`/api/type/${m}`).then(y=>{const x=y.data.attributeComplex.reduce((b,w)=>[...b,...w.items.filter(C=>C.showInFilter)],[]);Ue(`/api/purchase-orders/${t.id}`).then(b=>{const w=Object.values(b.data.attributes.reduce((E,T)=>(E[T.name]||(E[T.name]={name:T.name,value:[]}),E[T.name].value.push(T.value),E),{})),C=x.map(E=>{const T=w.find(P=>P.name===E.name),N=E["available-values"].filter(P=>T==null?void 0:T.value.includes(P));return{name:E.name,value:(N==null?void 0:N.length)>0?N:["Не важно"]}}),j={...b.data,attributes:C};n(j)})})})()},[]),{data:e,onHandlerComplain:p=>{console.log(p)},onHandlerDelete:async p=>{await Ue(`/buyer-api/purchase-orders/${p}/delete`),c(Fn.purchase.list)},userIsSeller:i,userIsBuyer:a,myPurchaseRequest:o,role_id:l}},fMe=({className:t})=>{const{suggestions_type:e,setFilterFields:n,filterFields:s}=v.useContext(co);return r.jsxs("div",{className:He("white-block mb-3",t),children:[r.jsx("h2",{className:"title-2 mb-5",children:e.title}),r.jsxs("div",{className:"flex items-center mt-5 gap-4",children:[r.jsx(jl,{type:"second",children:qN.map(i=>r.jsx(Tl,{type:"second",onChange:()=>{n(a=>({...a,status:i.value,page:1}))},value:s.status===i.value,children:i.label},i.value))}),r.jsxs("div",{className:"ml-auto flex gap-3",children:[r.jsx($t,{mobile:!0,color:"white",event:"click",offset:[10,5],placement:"bottom-end",ElementTarget:()=>r.jsx("button",{className:"flex-center-all",children:r.jsx(sy,{})}),classNameContent:"!pr-12",classNameRoot:"-mr-[60px]",close:!0,children:r.jsxs("div",{className:"flex gap-2 overflow-x-auto scrollbarWidthNone",children:[r.jsx(_e,{size:"34",variant:"secondary",onClick:()=>n(i=>({...i,order_by_created_at:0,order_by_view_time:null,page:1})),active:s.order_by_created_at===0,children:"По дате создания"}),r.jsx(_e,{size:"34",variant:"secondary",onClick:()=>{n(i=>({...i,order_by_created_at:null,order_by_view_time:0,page:1}))},active:s.order_by_view_time===0,children:"По дате просмотра"})]})}),!!e.author_is_user&&r.jsx($t,{mobile:!0,color:"white",event:"click",offset:[10,5],placement:"bottom-end",ElementTarget:()=>r.jsx("button",{className:"flex-center-all",children:r.jsx(V7,{})}),classNameContent:"!pr-12",classNameRoot:"-mr-[60px]",close:!0,children:r.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbarWidthNone",children:e.author_is_user.map((i,a)=>r.jsx(_e,{size:"34",variant:"secondary",onClick:()=>n(o=>({...o,author_is_user:i.value,page:1})),active:s.author_is_user===i.value,children:i.label},a))})}),r.jsx($t,{mobile:!0,color:"white",event:"click",offset:[10,5],placement:"bottom-end",ElementTarget:()=>r.jsx("button",{className:"flex-center-all",children:r.jsx(Lie,{})}),classNameContent:"!pr-12",classNameRoot:"-mr-[60px]",close:!0,children:r.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbarWidthNone",children:s2.map(i=>r.jsx(_e,{size:"34",variant:"secondary",onClick:()=>n(a=>({...a,dateRange:i.value,...KA(i.days),page:1})),active:s.dateRange===i.value,children:i.label},i.value))})})]})]})]})},pMe=({className:t})=>{const{data:e,isLoading:n,filterFields:s,setFilterFields:i,currentStatusInfo:a,suggestions_type:o}=v.useContext(co);return r.jsxs("div",{className:He(t),children:[r.jsx("div",{className:"grid grid-cols-3 gap-2.5 md1:grid-cols-2 md3:grid-cols-1",children:n?r.jsx(po,{count:9,children:r.jsxs("div",{className:"p-5 rounded-[20px] select-none shadow-primary bg-white",children:[r.jsx(Fe,{className:"rounded-xl h-8 w-3/4 mb-4"}),r.jsxs("div",{className:"flex gap-3 relative",children:[r.jsx(Fe,{className:"w-[70px] h-[70px] rounded-xl"}),r.jsx("div",{className:"flex flex-col gap-1 w-full",children:r.jsx(Fe,{className:"w-full h-full rounded-xl"})})]}),r.jsx("div",{className:"mt-4",children:r.jsx(Fe,{className:"w-full h-[40px] rounded-xl"})})]})}):r.jsx(r.Fragment,{children:e.items.length===0?r.jsx("div",{className:"col-span-full",children:r.jsx(Wa,{children:r.jsx("h4",{className:"title-3 mt-4",children:a.emptyText})})}):e.items.map((l,c)=>r.jsx(iC,{card:l,suggestions_type:o},c))})}),!n&&r.jsx(zo,{className:"mt-8",currentPage:s.page,setCurrentPage:l=>{i(c=>({...c,page:l}))},total:e.pages})]})},l2=({className:t})=>r.jsxs("div",{className:He(t),children:[r.jsx(fMe,{}),r.jsx(pMe,{})]}),vD=()=>{const t=Mn(),e=ue(rt),{data:n,onHandlerComplain:s,onHandlerDelete:i,userIsSeller:a,userIsBuyer:o,myPurchaseRequest:l,role_id:c}=hMe(),[u,d]=v.useState(!1),[h,f]=v.useState(!1),[p,g]=v.useState(null),[m,_]=v.useState(!1);if(n)return r.jsx(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Заявка на покупку"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:r.jsx(fy.Provider,{value:{data:n,role_id:c,setConfirmDeleteModal:g,setIsOpenComplainModal:f,setIsOpenShareModal:d,userIsSeller:a,userIsBuyer:o,myPurchaseRequest:l,emptyObjectModal:m,setEmptyObjectModal:_},children:r.jsxs(Kh,{buyer_id:n.user_id,order_id:n.id,suggestions_type:c===Wt.id?Yn.sellerHistory:Yn.buyerOnly,children:[r.jsx(zn,{}),r.jsxs("main",{className:`main ${!e&&!l?"!pb-[70px]":""}`,children:[r.jsx("div",{className:"main-wrapper",children:r.jsxs("div",{className:"container-desktop",children:[r.jsxs(ea,{children:[r.jsx("div",{className:"flex flex-col gap-3 min-w-0",children:r.jsx(uMe,{})}),r.jsx(lo,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(oR,{}),r.jsx(aR,{className:"mt-3"}),r.jsx(iR,{className:"mt-3"})]})})]}),!!(l&&c===sn.id)&&r.jsx(l2,{className:"mt-3"}),c===Wt.id&&r.jsx(l2,{className:"mt-3"}),!e&&r.jsxs(r.Fragment,{children:[r.jsx(oR,{className:"mt-3"}),r.jsx(aR,{className:"mt-3"}),r.jsx(iR,{className:"mt-3"})]})]})}),r.jsx(Dl,{activeDefault:!0,conditionWidth:!e&&a,children:r.jsx("div",{className:"py-2.5 px-4 gap-2 grid grid-cols-1",children:r.jsx(Ke,{target:"_blank",to:`${ke.listingFlats}?purchase=${t.id}`,children:r.jsx(_e,{Selector:"div",children:"Предложить объект"})})})}),r.jsx(Dl,{activeDefault:!0,conditionWidth:!e&&o&&!l,children:r.jsx("div",{className:"py-2.5 px-4 gap-2 grid grid-cols-1",children:r.jsx(_e,{onClick:()=>_(!0),children:"Предложить объект"})})}),r.jsx(Bm,{condition:u,set:d,title:"Поделиться заявкой"}),r.jsx(Ze,{condition:h,children:r.jsx(dMe,{condition:h,set:f,onSubmit:s})}),r.jsx(Ze,{condition:p,children:r.jsx(Ro,{title:"Вы действительно хотите удалить заявку?",condition:p,set:g,request:i})}),r.jsx(Ze,{condition:m,children:r.jsx(gt,{condition:m,set:_,options:{overlayClassNames:"_center-max-content",modalClassNames:"mmd1:!w-[700px]"},children:r.jsx(Wa,{block:!1,children:r.jsx("h3",{className:"title-3 mt-4",children:"У вас нет объекта подходящего под эту заявку"})})})})]})]})})})},mMe=()=>{const t=ue(rt),{data:e,tabActiveValue:n,setTabActiveValue:s,tabsItems:i}=v.useContext(n4),a=[{name:"Стаж",value:e$(e.experience),className:"items-center"},{name:"В работе",value:`${e.objectsCount} ЖК`,className:"items-center"}];return r.jsxs("section",{className:"white-block !pb-0 md1:!rounded-t-none",children:[r.jsxs("div",{className:"flex gap-8 md1:flex-col flex-grow md1:gap-6 md1:mb-6",children:[r.jsxs("div",{className:"gap-4 items-center md1:flex",children:[r.jsx(Nn,{size:t?140:90,src:e.photoUrl,title:e.name}),!t&&r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h3",{className:"title-3",children:ks(e.name,e.surname)}),r.jsx("p",{className:"text-primary400 mt-1",children:"Менеджер отдела продаж"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"flex gap-4 justify-between items-start",children:t&&r.jsx("h2",{className:"title-2",children:ks(e.name,e.surname)})}),r.jsx(Vs,{avatar:e.developer.avatar_url,name:e.developer.name,pos:"Застройщик",className:"mmd1:mt-4",centered:!0,nameHref:`${ke.developers.inner}${e.developer.id}`}),r.jsx(Dk,{data:a,className:"mt-4 md4:flex-col !gap-y-5",classNameValue:"text-defaultMax"}),!!e.description&&r.jsx(yy,{descr:e.description,lines:2,className:"cut-2-imp mt-8"})]})]}),r.jsx("div",{className:"mmd1:pt-8 w-max",children:r.jsx(jl,{children:i.map(o=>r.jsx(Tl,{border:!0,onChange:()=>{s(o.value)},value:n===o.value,children:o.name},o.value))})})]})},gMe=()=>{const{data:t,goToChat:e}=v.useContext(n4);return r.jsxs("div",{className:"flex flex-col text-center items-center",children:[r.jsx("span",{className:"text-primary400 mb-3",children:"Менеджер отдела продаж"}),r.jsx("span",{className:"font-medium mb-1.5",children:ks(t.name,t.surname)}),r.jsx("span",{className:"text-primary400",children:t.lastSeenOnline}),r.jsx("div",{className:"mt-5 flex flex-col gap-2 w-full",children:r.jsx(_e,{onClick:e,children:"Задать вопрос в чат"})})]})},vMe=()=>{const t=Mn(),e=ue(Qs),n=ue(Ks),s=Dt(),[i,a]=v.useState({}),[o,l]=v.useState({}),[c,u]=v.useState(null),[d,h]=v.useState([{name:"Объекты менеджера",value:"objects"},{name:"Лента",value:"feed"}]),[f,p]=v.useState(!1),[g,m]=v.useState(d[0].value),_=ue(Ot),y=Si(_),[x,b]=v.useState({init:!1,items:[],loading:!0,page:1,ref:v.useRef(null),per_page:12,fetch:async function(C){b(j=>({...j,init:!1,loading:!0})),await Xa({visibleObjects:C,page:this.page,per_page:this.per_page}).then(j=>{b(E=>({...E,items:j.cards,loading:!1}))})}});return v.useEffect(()=>{Ue(`/api/specialists/${t.id}`).then(C=>{const j=C.data,E=Kw(j.promos.map(T=>({...T,type:"stock"})),j.calculations.map(T=>({...T,type:"calculation"})),j.news.map(T=>({...T,type:"news"})),j.videos.map(T=>({link:T,type:"video"})),j.shorts.map(T=>({link:T,type:"short"})));a({id:t.id,...j,feed:E}),E.length===0&&h(T=>T.filter(N=>N.value!=="feed"))})},[]),v.useEffect(()=>{if(!i.objects_ids||!i.objectsCount||!e.length){if(!i.objectsCount){b(j=>({...j,loading:!1}));return}return}const C=e.find(j=>+j.id==+i.cities[0]);C&&uD(C.name,i.objects_ids).then(j=>{l(j)}),x.fetch(i.objects_ids)},[i.objects_ids,e]),v.useEffect(()=>{if(!i.objects_ids||i.objectsCount===0){if(i.objectsCount===0){b(C=>({...C,loading:!1}));return}return}x.fetch(i.objects_ids).then(()=>{setTimeout(()=>{var C;window.scrollTo({top:((C=x.ref.current)==null?void 0:C.offsetTop)-16,behavior:"smooth"})},0)})},[x.page]),{params:t,data:i,dataMap:o,confirmDeleteModal:c,setConfirmDeleteModal:u,isFullscreenMap:f,setIsFullscreenMap:p,tabActiveValue:g,setTabActiveValue:m,userIsAdmin:y,objectsOptions:x,setObjectsOptions:b,goToChat:async()=>{if(n){const C=await $s({recipients_id:[+i.id],type:xt.CHAT});xr(C)}else s(Bs(!0))},tabsItems:d}},yMe=()=>{var m;const t=ue(rt),{params:e,data:n,dataMap:s,confirmDeleteModal:i,setConfirmDeleteModal:a,isFullscreenMap:o,setIsFullscreenMap:l,tabActiveValue:c,setTabActiveValue:u,userIsAdmin:d,objectsOptions:h,setObjectsOptions:f,goToChat:p,tabsItems:g}=vMe();if(!Ye(n))return r.jsx(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Менеджер"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:r.jsxs(n4.Provider,{value:{data:n,tabActiveValue:c,setTabActiveValue:u,goToChat:p,tabsItems:g},children:[d?r.jsx(Qh,{maxWidth:972}):r.jsx(zn,{maxWidth:972}),r.jsxs("main",{className:He("main",t?"":"!pb-[60px]"),children:[r.jsx("div",{className:"main-wrapper md1:!pt-0",children:r.jsx("div",{className:"container-desktop mmd1:!max-w-[972px]",children:r.jsxs(ea,{className:"!grid-cols-[615px_1fr] md1:!flex-col-reverse",children:[r.jsxs("div",{className:"flex flex-col gap-3 md1:gap-2 min-w-0",children:[r.jsx(mMe,{}),r.jsxs("div",{children:[c==="objects"&&r.jsx(pw.Provider,{value:{data:n,setOptions:f,options:h,title:"",EmptyBlockContent:r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"title-3 mt-4",children:"У этого менеджера пока нету объектов"}),r.jsx(Ke,{to:ke.specialists.list,children:r.jsx(_e,{className:"mt-6",children:"К списку менеджеров"})})]})},children:r.jsxs("div",{ref:h.ref,children:[r.jsxs("div",{className:"white-block !p-5 mb-3",children:[r.jsx("h2",{className:"title-2-5 mb-4",children:"Объекты менеджера на карте"}),s&&!Ye(s)&&r.jsx("div",{children:r.jsx(c_,{coordinates:s==null?void 0:s.coordinates,currentCityId:n.cities[0],zoom:10,className:"mt-4 !h-[300px]",sale:(m=s.placemarks)==null?void 0:m.map(_=>({id:_.id,geo:_.coordinates,minPrice:_.minPrice})),isFullscreen:o,setIsFullscreen:l})})]}),r.jsxs("div",{className:"white-block !p-5",children:[r.jsx("h2",{className:"title-2-5 mb-4",children:"Объекты менеджера"}),r.jsx(cD,{})]})]})}),c==="feed"&&r.jsx("div",{className:"white-block !p-5",children:r.jsx(Gq,{data:n.feed,emptyText:"Специалист ещё не добавил новости"})})]})]}),t&&r.jsxs(lo,{children:[d&&r.jsxs("div",{className:"white-block-small !py-2 mb-3 grid grid-cols-2 gap-3",children:[r.jsx(Ke,{to:`${ht.specialists.edit}${e.id}`,className:"w-full h-full block",children:r.jsx(mi,{title:"Редактировать",children:r.jsx(Ns,{className:"!stroke-[currentColor] !stroke-[1.5px] !fill-none",width:18,height:18})})}),r.jsx(mi,{title:"Удалить",onClick:()=>a(e.id),children:r.jsx(un,{className:"fill-red",width:16,height:16})})]}),r.jsx("div",{className:"white-block-small p-6",children:r.jsx(gMe,{})})]})]})})}),r.jsx(Dl,{activeDefault:!0,conditionWidth:!t,children:r.jsx("div",{className:"py-2.5 px-4 w-full",children:r.jsx(_e,{size:"Small",className:"w-full",onClick:p,children:"Задать вопрос в чат"})})}),r.jsx(Ze,{condition:i,children:r.jsx(Ro,{condition:i,set:a,request:_=>{Sk(`/admin-api/specialists/${_}`).then(()=>{window.location.href=ke.specialists.list})}})})]})]})})},Zj=({currentCity:t,control:e,citiesData:n,setValue:s})=>r.jsx("form",{children:r.jsxs(yd,{className:"grid-cols-[350px_minmax(350px,1fr)] container",children:[r.jsx(fn,{name:"city",nameLabel:"Город",control:e,setValue:s,options:n,defaultValue:t.id?{value:t.id,label:t.name}:{}}),r.jsx(Qe,{control:e,name:"search",placeholder:"ФИО менеджера"})]})}),xMe=()=>{var g;const{control:t,reset:e,setValue:n}=en(),s=ue(Ci),[i,a]=v.useState(!0),[o,l]=v.useState([]),[c,u]=v.useState(1),d=oy({control:t}),h=m=>{a(!0),Me("/api/specialists/page",{...m,page:m.page}).then(_=>{a(!1),l(_.data),window.scrollTo({top:0,behavior:"smooth"})})},f=v.useCallback(es(m=>{h(m)},400),[]);v.useEffect(()=>{var m;f({city:(m=d.city)==null?void 0:m.value,search:d.search,page:c})},[c]),v.useEffect(()=>{var m;u(1),f({city:((m=d.city)==null?void 0:m.value)||s.id,search:d.search,page:1})},[d]);const p=s?`Каталог менеджеров в ${cw(i4(((g=d.city)==null?void 0:g.label)||s.name,hD,1))}`:"";return{control:t,reset:e,setValue:n,currentCity:s,isLoading:i,setIsLoading:a,dataItems:o,setDataItems:l,currentPage:c,setCurrentPage:u,titleText:p}},bMe=()=>{var m,_;const t=ue(rt),e=ue(Ot),n=Si(e),s=ue(Vh),i=ue(Ks),a=Dt(),{control:o,reset:l,setValue:c,currentCity:u,isLoading:d,dataItems:h,currentPage:f,setCurrentPage:p,titleText:g}=xMe();return r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:g}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[n?r.jsx(Qh,{children:!t&&r.jsx(Zj,{currentCity:u,control:o,reset:l,citiesData:s,setValue:c})}):r.jsx(zn,{children:!t&&r.jsx(Zj,{currentCity:u,control:o,reset:l,citiesData:s,setValue:c})}),r.jsxs("main",{className:"main main-headerForm",children:[t&&r.jsx(Zj,{currentCity:u,control:o,reset:l,citiesData:s,setValue:c}),r.jsx("div",{className:"main-wrapper--title",children:r.jsxs("div",{className:"container-desktop",children:[r.jsxs("div",{className:"flex justify-between gap-4 mb-6 md1:mx-4",children:[r.jsx("h1",{className:"title-1",children:g}),n&&r.jsx("div",{className:"flex items-center justify-between",children:r.jsx(Ke,{to:ht.specialists.create,target:"_blank",rel:"noopener noreferrer",children:r.jsx(_e,{size:"Small",Selector:"div",children:"Создать менеджера"})})})]}),r.jsxs(ea,{className:"!grid-cols-[1fr_345px]",children:[r.jsx("div",{className:"flex flex-col white-block !px-0 !py-5 mmd1:self-start md1:!py-3",children:!d&&((m=h.items)==null?void 0:m.length)===0?r.jsx(Or,{block:!1}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-col",children:d?r.jsx(po,{count:8,children:r.jsx(q$,{})}):(_=h.items)==null?void 0:_.map(y=>{const x=[{name:"Стаж",value:e$(y.experience),className:"w-[185px]"},{name:"В работе",value:`${y.objects_count} ЖК`,className:"w-[185px]"}];return r.jsx(H$,{data:y,charsData:x,onClickMessage:async()=>{if(i){const b=await $s({recipients_id:[y.id],type:xt.CHAT});xr(b)}else a(Bs(!0))},href:`${ke.specialists.inner}${y.id}`},y.id)})}),r.jsx(zo,{className:"mt-8",currentPage:f,setCurrentPage:y=>p(y),total:h.pages})]})}),t&&r.jsx(lo,{children:r.jsx(dD,{activeObj:{name:"specialists",count:h.total}})})]})]})})]})]})},_Me=[{path:ke.home,body:r.jsx(Q8,{})},{path:"/home",body:r.jsx(Q8,{})},{path:`${ke.building}:id`,body:r.jsx(jPe,{})},{path:`${ke.apartment}:id`,body:r.jsx(tAe,{})},{path:ke.feed,body:r.jsx(EIe,{})},{path:ke.feedPromos,body:r.jsx(_Ie,{})},{path:ke.feedVideos,body:r.jsx(jIe,{})},{path:ke.loginPhone,body:r.jsx(xhe,{})},{path:ke.comparison,body:r.jsx(WPe,{})},{path:ke.favorites,body:r.jsx(mIe,{})},{path:ke.privacyPolicy,body:r.jsx(K6e,{})},{path:ke.cashbackConditions,body:r.jsx(kPe,{})},{path:`${ke.promo}:id`,body:r.jsx(Z6e,{})},{path:ke.specialists.list,body:r.jsx(bMe,{})},{path:`${ke.specialists.inner}:id`,body:r.jsx(yMe,{})},{path:ke.developers.list,body:r.jsx(nIe,{})},{path:`${ke.developers.inner}:id`,body:r.jsx(ZPe,{})},{path:ke.purchase.list,body:r.jsx(lMe,{role_id:sn.id})},{path:`${ke.purchase.inner}:id`,body:r.jsx(vD,{})},{path:ke.listing,body:r.jsx(E6e,{})},{path:ke.listingFlats,body:r.jsx(zW,{})},{path:`${ke.videosPage.videoPage}:id`,body:r.jsx(G6e,{})},{path:`${ke.videosPage.shortPage}:id`,body:r.jsx(q6e,{})},{path:"*",body:r.jsx(sIe,{})}],wMe=()=>{const t=ue(Ci),[e,n]=v.useState(sn.name),s=ue(Ot),i=ue(n9);return v.useEffect(()=>{t.id},[t.id]),v.useEffect(()=>{Si(s)?n(pn.name):hd(s)?n(Wt.name):n(sn.name)},[s]),{userInfo:s,userRole:e,authLoading:i}},xd=({children:t,pageTitle:e,className:n="",classNameContent:s})=>{var c;const{userInfo:i,authLoading:a}=wMe(),o=Xr(),l=ue(rt);return r.jsxs(r.Fragment,{children:[r.jsxs(dn,{children:[r.jsx("title",{children:`Мой профиль | ${e}`}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),r.jsxs("div",{className:He("site-container",n),children:[r.jsx(zn,{}),r.jsxs("main",{className:"main",children:[r.jsx("h1",{className:"visually-hidden",children:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),r.jsx("div",{className:"main-wrapper",children:r.jsx("div",{className:"container-desktop",children:r.jsxs(ea,{className:"!grid-cols-[280px_1fr]",children:[r.jsx(lo,{children:r.jsxs("div",{className:"white-block-small !px-0",children:[r.jsx("div",{className:"px-6",children:a?r.jsx(L0e,{}):r.jsxs(Ke,{to:Ji.profile.edit,className:"flex justify-between items-center",children:[r.jsx(Vs,{className:"w-[85%]",classListName:"text-defaultMax",classListUser:"!text-default",avatar:i.image,name:ks(i.name,i.surname),pos:r.jsxs(r.Fragment,{children:["Отдел продаж   ",r.jsxs("span",{className:"text-dark font-medium",children:['"',(c=i.organization)==null?void 0:c.name,'"']})]}),centered:!0}),r.jsx(wa,{className:""})]})}),l&&r.jsxs("div",{className:"mt-6",children:[r.jsx(Ke,{to:At.home,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",active:o.pathname===At.home,children:[r.jsx(ls,{}),r.jsx("span",{children:"Основное"})]})}),r.jsx(Ke,{to:Ji.chat,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",children:[r.jsx(ls,{}),r.jsx("span",{children:"Чат"})]})}),r.jsx(Ke,{to:At.wallet,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",active:o.pathname===At.wallet,children:[r.jsx(ls,{}),r.jsx("span",{children:"Кошелёк"})]})}),r.jsx(Ke,{to:At.view,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",active:o.pathname===At.view,children:[r.jsx(ls,{}),r.jsx("span",{children:"Записи на просмотр"})]})}),r.jsx("a",{href:At.purchase.list_buyers,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",active:o.pathname===At.purchase.list_buyers,children:[r.jsx(ls,{}),r.jsx("span",{children:"Мои покупатели"})]})}),r.jsx("a",{href:At.purchase.list_all,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",active:o.pathname===At.purchase.list_all,children:[r.jsx(ls,{}),r.jsx("span",{children:"Все заявки на покупку"})]})}),r.jsx(Ke,{to:At.calendar_view,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",active:o.pathname===At.calendar_view,children:[r.jsx(ls,{}),r.jsx("span",{children:"Календарь"})]})}),r.jsx(Ke,{to:At.object.list,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",active:o.pathname===At.object.list,children:[r.jsx(ls,{}),r.jsx("span",{children:"Мои объекты"})]})}),r.jsx(Ke,{to:At.objects_developer,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",active:o.pathname===At.objects_developer,children:[r.jsx(ls,{}),r.jsx("span",{children:"Объекты застройщика"})]})}),r.jsx(Ke,{to:At.specialists,className:"w-full",children:r.jsxs(Gt,{className:"!rounded-none !h-[52px]",active:o.pathname===At.specialists,children:[r.jsx(ls,{}),r.jsx("span",{children:"Менеджеры отдела продаж"})]})})]})]})}),r.jsx("div",{className:He("white-block",s),children:t})]})})})]}),r.jsx("footer",{className:"visually-hidden",children:"Недвижимость на inrut.ru"})]})]})},CMe=()=>r.jsx(xd,{pageTitle:"Календарь просмотров",children:"calendar"}),yD=({onCloseModal:t,defaultDialogId:e=null,videoCallData:n=null,variantChat:s="page",tag:i})=>{const a=LTe(e,n,i),o=zEe(),l=HEe(s==="mini"),[c,u]=v.useState(!1),[d,h]=v.useState(!1),[f,p]=v.useState(!1),[g,m]=v.useState(!1),[_,y]=v.useState(!1);return r.jsxs(Pn.Provider,{value:{onCloseModal:t,videoCallData:n,variantChat:s,chatSearchDialog:o,groupFormModal:c,setGroupFormModal:u,channelFormModal:d,setChannelFormModal:h,channelGroupSettingsModal:f,setChannelGroupSettingsModal:p,channelGroupInfoModal:g,setChannelGroupInfoModal:m,setBlockedUserList:y,...a,resizeSidebarOptions:l},children:[r.jsx("div",{className:He(at.ChatRoot,s==="mini"&&at.ChatRootMini,a.themeOptions.theme==="dark"&&at.ChatThemeDark),ref:a.chatRootRef,children:r.jsxs("div",{className:at.ChatContainer,children:[r.jsx(FNe,{}),r.jsx(c3e,{}),r.jsx(E3e,{})]})}),r.jsx(LNe,{deleteMessagesModal:a.deleteMessagesModal,setDeleteMessagesModal:a.setDeleteMessagesModal}),r.jsx(n8,{type:xt.GROUP,condition:c,set:u}),r.jsx(n8,{type:xt.CHANNEL,condition:d,set:h}),r.jsx(ONe,{condition:f,set:p}),r.jsx(RNe,{condition:g,set:m,dialog:a.currentDialogSettings}),r.jsx(Ze,{condition:_,children:r.jsx(BNe,{condition:_,set:y})})]})},WW=({summ:t=0,className:e})=>r.jsx("div",{className:He(e),children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("h3",{className:"title-2 mb-6",children:"Кошелёк"}),r.jsxs("div",{className:"flex justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-small text-primary400 mb-1.5",children:"Баланс"}),r.jsxs("p",{className:"title-2",children:[pt(t)," ₽"]})]}),r.jsx("div",{className:"flex gap-4",children:r.jsxs("button",{type:"button",className:"flex flex-col items-center gap-1.5",children:[r.jsx("div",{className:"bg-blue rounded-full w-7 h-7 flex-center-all",children:r.jsx(Xi,{width:12,height:12,className:"fill-white"})}),r.jsx("span",{children:"Вывести"})]})})]})]})}),SMe=()=>{var u;const t=vs(),e=Xr(),n=Mr(),[s,i]=v.useState(null),a=(u=e.state)==null?void 0:u.notificationCall,o=Yn.sellerAll,[l,c]=v.useState([]);return v.useEffect(()=>{(async()=>{const h={per_page:4,page:1,author_is_user:null,status:"all",...KA(s2[0].days),order_by_created_at:0,order_by_view_time:null},{data:f}=await Me(o.endpoint,h);c(f.items)})()},[]),v.useEffect(()=>{a&&(i(a),n(e.pathname,{replace:!0,state:{}}))},[a]),r.jsxs(xd,{pageTitle:"Основное",classNameContent:"!p-0 bg-transparent-imp !shadow-none min-w-0",children:[r.jsxs("div",{className:"flex md1:overflow-x-auto md1:overflow-y-hidden scrollbar-none-mobile w-full gap-4 pb-4",children:[r.jsxs(Ke,{to:At.purchase.list_buyers,className:"white-block-small flex-grow flex-shrink basis-0 min-w-[250px]",children:[r.jsx("h3",{className:"title-3",children:"Мои покупатели"}),r.jsx("p",{className:"text-primary400 mt-1",children:"text"})]}),r.jsxs(Ke,{to:At.view,className:"white-block-small flex-grow flex-shrink basis-0 min-w-[250px]",children:[r.jsx("h3",{className:"title-3",children:"Записи на просмотр"}),r.jsx("p",{className:"text-primary400 mt-1",children:"От покупателя и мои предложения"})]}),r.jsxs(Ke,{to:At.calendar_view,className:"white-block-small flex-grow flex-shrink basis-0 min-w-[250px]",children:[r.jsx("h3",{className:"title-3",children:"Календарь"}),r.jsx("p",{className:"text-primary400 mt-1",children:"Смотрите запланированные показы"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 min-h-[160px] md2:grid-cols-1",children:[r.jsx("div",{className:"white-block-small mmd2:col-span-2",children:l.length?r.jsxs("div",{className:"",children:[r.jsx("div",{className:"flex w-full mb-4",children:r.jsx(Ke,{to:At.view,className:"ml-auto blue-link",children:"Смотреть всё"})}),r.jsx(Kh,{suggestions_type:o,children:r.jsx(Xs,{slidesPerView:1.55,spaceBetween:24,breakpoints:{799:{slidesPerView:2},1222:{slidesPerView:1.55}},className:"min-w-0",children:l.map((d,h)=>r.jsx(Tn,{children:r.jsx(iC,{card:d,suggestions_type:o,variant:"default"})},h))})})]}):""}),r.jsx(WW,{summ:0,className:"white-block-small"})]}),r.jsx("div",{className:"white-block-small",children:r.jsx("div",{className:"rounded-xl",children:r.jsx(yD,{variantChat:"mini",defaultDialogId:s?+s.dialog_id:+t.dialog||null,videoCallData:s||null})})})]})},jMe=()=>{const{complexes:t}=v.useContext(G9);return r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"title-2 mb-6",children:"Мои объекты"}),r.jsx("div",{className:"grid grid-cols-2 gap-4 md3:grid-cols-1",children:t.isLoading?r.jsx(po,{count:3,children:r.jsx(Lh,{className:"p-0"})}):r.jsxs(r.Fragment,{children:[t.items.length===0&&r.jsx("div",{className:"col-span-full",children:r.jsx(Wa,{block:!1,children:r.jsx("h4",{className:"title-3 mt-4",children:"У вас пока нет объектов"})})}),t.items.map((e,n)=>v.createElement(Ll,{...e,key:n,userVisible:!1,customControls:r.jsxs(r.Fragment,{children:[r.jsxs("div",{title:`${e.building_visited||0} просмотров`,className:"z-10 flex items-center gap-2",children:[r.jsx(ci,{className:"fill-blue",width:14,height:14})," ",e.building_visited||0]}),r.jsxs("div",{title:`${e.likes||0} добавили в избранное`,className:"z-10 flex items-center gap-2",children:[r.jsx(ku,{className:"fill-red",width:14,height:14})," ",e.added_to_favorites||0]}),r.jsxs("div",{title:`${e.application||0} записалось на просмотр`,className:"z-10 flex items-center gap-2",children:[r.jsx(ci,{className:"fill-dark",width:14,height:14})," ",e.application||0]})]})},r.jsx(_e,{size:"34",variant:"secondary",Selector:"div",className:"mt-2 relative z-[99]",children:r.jsx(Ke,{to:"#",target:"_blank",className:"w-full h-full flex items-center justify-center",children:"Добавление к объекту"})})))]})})]})},TMe=()=>{const t=(s,i)=>{Ue(s,{all:1}).then(a=>{n(o=>({...o,[i]:{items:a.data.items||a.data,isLoading:!1}}))}).finally(()=>{n(a=>({...a,[i]:{...a[i],isLoading:!1}}))})},[e,n]=v.useState({complexes:{isLoading:!0,items:[]}});return v.useEffect(()=>{t("/seller-api/associated-objects","complexes")},[]),{dataCards:e}},EMe=()=>{const{dataCards:t}=TMe();return r.jsx(xd,{pageTitle:"Мои объекты",children:r.jsx(G9.Provider,{value:{complexes:t.complexes},children:r.jsx(jMe,{})})})},NMe=()=>r.jsx(xd,{pageTitle:"Запрос на просмотр",classNameContent:"!p-0 bg-transparent-imp !shadow-none min-w-0",children:r.jsx(Kh,{suggestions_type:Yn.sellerAll,children:r.jsx(l2,{})})}),kMe=(t,e)=>{var i;const[n,s]=v.useState({init:!1,items:[],loading:!0,page:1,ref:v.useRef(null),per_page:12,fetch:async function(a){s(o=>({...o,init:!1,loading:!0}));try{await Xa({visibleObjects:a,page:this.page,per_page:this.per_page}).then(o=>{s(l=>({...l,items:o.cards,loading:!1}))})}catch(o){console.log(o)}}});return v.useEffect(()=>{if(e){if(!t.objects_ids||!t.objectsCount){if(!t.objectsCount){s(a=>({...a,loading:!1}));return}return}n.fetch(t.objects_ids)}},[(i=t.objects_ids)==null?void 0:i.length,e]),v.useEffect(()=>{if(e){if(!t.objects_ids||t.objectsCount===0){if(t.objectsCount===0){s(a=>({...a,loading:!1}));return}return}n.fetch(t.objects_ids).then(()=>{setTimeout(()=>{var a;window.scrollTo({top:((a=n.ref.current)==null?void 0:a.offsetTop)-(t.offset||16),behavior:"smooth"})},0)})}},[n.page]),{objectsOptions:n,setObjectsOptions:s}},AMe=()=>{var a,o;const[t,e]=v.useState(null),{objectsOptions:n,setObjectsOptions:s}=kMe({objects_ids:t==null?void 0:t.objects,objectsCount:(a=t==null?void 0:t.objects)==null?void 0:a.length,offset:92},t),i=ue(Ot);return v.useEffect(()=>{if(Ye(i)||!i.organization.id)return;(async()=>{const c=await Ue(`/api/developers/${i.organization.id}`).then(u=>u.data);e(c)})()},[i]),r.jsxs(xd,{pageTitle:"Объекты застройщика",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Объекты застройщика"}),r.jsx(pw.Provider,{value:{data:{objectsCount:(o=t==null?void 0:t.objects)==null?void 0:o.length},setOptions:s,options:n,title:"",skeletonCount:6,EmptyBlockContent:r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"title-3 mt-4",children:"У этого застройщика пока нету объектов"}),r.jsx(Ke,{to:ke.developers.list,children:r.jsx(_e,{className:"mt-6",children:"К списку застройщиков"})})]})},children:r.jsx("div",{ref:n.ref,children:r.jsx(cD,{})})})]})},GW=({pageTitle:t,namePage:e})=>{var T;const n=ue(Vh),{data:s,filterCount:i,isOpenMoreFilter:a,setIsOpenMoreFilter:o,currentCity:l,control:c,reset:u,types:d,setDevelopers:h,developers:f,complexes:p,setComplexes:g,setValue:m,watchedValues:_,initFieldsForm:y,setInitFieldsForm:x,userIsSeller:b,isLoading:w,currentPage:C,setCurrentPage:j,userInfo:E}=qW(Wt.id,e);return v.useEffect(()=>{Ye(E)||Me("/api/developers/complexes",{developer_ids:[E.organization.id]}).then(N=>{const P=N.data.filter(I=>E.associated_objects.includes(I.value));g(P)})},[E]),r.jsx(xd,{pageTitle:t,classNameContent:"!p-0 bg-transparent-imp !shadow-none min-w-0",children:r.jsxs(hy.Provider,{value:{filterCount:i,isOpenMoreFilter:a,setIsOpenMoreFilter:o,currentCity:l,cities:n,control:c,reset:u,types:d,setDevelopers:h,developers:f,complexes:p,setComplexes:g,setValue:m,watchedValues:_,initFieldsForm:y,setInitFieldsForm:x,variant:"seller",sellerData:{}},children:[r.jsxs("div",{className:"white-block-small",children:[r.jsx("h2",{className:"title-2 mb-4",children:t}),r.jsx(HW,{})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"flex flex-col white-block !px-0 !py-5 md1:!py-3",children:w?r.jsx(po,{count:8,children:r.jsxs(Jy,{className:"grid-cols-[700px_160px] h-[135px] !shadow-none mmd1:justify-between  md1:flex md1:flex-col md1:gap-3 md1:items-start",children:[r.jsx(Fe,{className:"h-10 md1:w-3/4 rounded-lg"}),r.jsx(Fe,{className:"h-10 md1:w-3/4 rounded-lg"})]})}):r.jsx(r.Fragment,{children:(T=s.items)!=null&&T.length?r.jsx(r.Fragment,{children:s.items.map((N,P)=>r.jsx(Cy,{classNameContent:"mmd1:grid mmd1:grid-cols-[650px_max-content]",className:"py-5 px-8",data:{...N,current_type:d.find(I=>I.value===N.type)},href:`${b?`${At.purchase.inner}`:`${ke.purchase.inner}`}${N.id}`},P))}):r.jsx(Or,{block:!1})})}),r.jsx(zo,{className:"mt-8",currentPage:C,setCurrentPage:N=>j(N),total:s.pages})]})]})})},DMe=()=>r.jsx(GW,{pageTitle:"Мои покупатели",namePage:"all"}),PMe=()=>r.jsx(GW,{pageTitle:"Все заявки на просмотр",namePage:"buyers"}),IMe=()=>{const[t,e]=v.useState([]),n=ue(Ot);return v.useEffect(()=>{if(Ye(n)||!n.organization.id)return;(async()=>{const i=await DH(n.organization.id);e(i)})()},[n]),r.jsxs(xd,{pageTitle:"Менеджеры отдела продаж",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Менеджеры отдела продаж"}),r.jsx("div",{className:"grid grid-cols-5 gap-x-5 gap-y-10 md3:grid-cols-3 md4:grid-cols-2",children:t.map(s=>r.jsx(_y,{...s,link:!0,visibleChat:!0,onClickChat:async()=>{const i=await $s({recipients_id:[s.id],type:xt.CHAT});xr(i)}},s.id))})]})},YW=({className:t})=>r.jsxs("div",{className:He(t),children:[r.jsx("h2",{className:"title-2 mb-6",children:"История операций"}),r.jsxs(Wa,{block:!1,imageVisible:!1,children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"120",height:"90",children:[r.jsx("defs",{children:r.jsx("path",{d:"M0 2h16l-.545 2.18a7.685 7.685 0 0 1-14.91 0L0 2Z",id:"a"})}),r.jsxs("g",{fill:"none",fillRule:"evenodd",children:[r.jsx("rect",{stroke:"#242629",strokeWidth:"2",fill:"#F2F4F6",x:"19",y:"20",width:"82",height:"58",rx:"4"}),r.jsx("path",{d:"M58.916 73.916 27.908 29.464 67.916 6.366A4 4 0 0 1 73.38 7.83l23 39.837a4 4 0 0 1-1.464 5.464l-36 20.785Z",stroke:"#242629",strokeWidth:"2",fill:"#53B374"}),r.jsx("path",{d:"M19 26v54.556A3.444 3.444 0 0 0 22.444 84h75.112A3.444 3.444 0 0 0 101 80.556V29.444A3.444 3.444 0 0 0 97.556 26H19Z",stroke:"#242629",strokeWidth:"2",fill:"#F2F4F6"}),r.jsxs("g",{transform:"translate(41 40)",children:[r.jsx("path",{d:"M4.5 11C6.985 11 9 8.186 9 4.714 9 1.243 6.985 0 4.5 0S0 1.243 0 4.714C0 8.186 2.015 11 4.5 11Z",fill:"#242629"}),r.jsx("ellipse",{fill:"#FFF",cx:"2.7",cy:"2.75",rx:"2.7",ry:"2.75"})]}),r.jsxs("g",{transform:"translate(70 40)",children:[r.jsx("path",{d:"M4.5 11C6.985 11 9 8.186 9 4.714 9 1.243 6.985 0 4.5 0S0 1.243 0 4.714C0 8.186 2.015 11 4.5 11Z",fill:"#242629"}),r.jsx("ellipse",{fill:"#FFF",cx:"2.7",cy:"2.75",rx:"2.7",ry:"2.75"})]}),r.jsxs("g",{transform:"translate(52 59)",fillRule:"nonzero",children:[r.jsx("use",{fill:"#FF6A59",xlinkHref:"#a"}),r.jsx("rect",{fill:"#242629",width:"16",height:"4",rx:"2"})]}),r.jsx("path",{d:"M91 49a8 8 0 1 0 0 16h13a1 1 0 0 0 1-1V50a1 1 0 0 0-1-1H91Z",stroke:"#242629",strokeWidth:"2",fill:"#FFF"}),r.jsx("circle",{fill:"#242629",cx:"90",cy:"57",r:"2"})]})]}),r.jsx("h3",{className:"title-3 mt-4 mb-12",children:"Операций пока нет"})]})]}),MMe=()=>r.jsx(xd,{pageTitle:"Кошелёк",classNameContent:"!p-0 bg-transparent-imp !shadow-none min-w-0",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(WW,{summ:0,className:"white-block-small"}),r.jsx(YW,{className:"white-block-small"})]})}),OMe=[{path:At.home,body:r.jsx(SMe,{})},{path:At.object.list,body:r.jsx(EMe,{})},{path:At.view,body:r.jsx(NMe,{})},{path:At.purchase.list_all,body:r.jsx(PMe,{})},{path:At.purchase.list_buyers,body:r.jsx(DMe,{})},{path:At.specialists,body:r.jsx(IMe,{})},{path:At.objects_developer,body:r.jsx(AMe,{})},{path:At.wallet,body:r.jsx(MMe,{})},{path:At.calendar_view,body:r.jsx(CMe,{})},{path:`${At.purchase.inner}:id`,body:r.jsx(vD,{})}],RMe=({init:t,items:e,errors:n,watched:s})=>{const[i,a]=v.useState([]);return v.useEffect(()=>{if(!t)return;const o=[];for(const l in n){const c=document.querySelector(`[data-error="${l}"]`);if(!c)break;const u=c.closest("[data-block]");if(!u)break;const d=e.find(h=>h.name===u.dataset.block);for(const h of e)d.id===h.id&&o.push(h.id)}a(Array.from(new Set(o)))},[s]),r.jsx("nav",{className:"flex flex-col gap-4 items-start",children:e.map(o=>r.jsxs("button",{type:"button",className:"text-left flex items-center gap-2.5 text-primary400",children:[t&&i.includes(o.id)?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",width:17,height:17,className:"flex-shrink-0 fill-red",children:r.jsx("path",{fillRule:"evenodd",d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0zM7 5a1 1 0 0 1 2 0v3a1 1 0 0 1-2 0V5zm1 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",width:17,height:17,className:`flex-shrink-0 ${t&&!i.includes(o.id)?"fill-green":""}`,children:r.jsx("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm3.8-8.3a1 1 0 0 0-1.42-1.4L7.2 8.46a.28.28 0 0 1-.4 0l-1.1-1.1A1 1 0 0 0 4.3 8.8l2.08 2.09c.34.34.9.34 1.24 0L11.8 6.7z"})}),r.jsx("span",{className:`${t&&!i.includes(o.id)?"text-dark":"text-primary400"}`,children:o.title})]},o.id))})},LMe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='58'%20height='58'%20fill='none'%3e%3cg%20clip-path='url(%23a)'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15%2023.5C22.7%2028%2034.8%2034.3%2045.6%2031c4-1.4%208.3-1.9%2012.5-1.3v-.7a29%2029%200%200%200-56.8-8.4c3.4-2%209.1.2%2013.9%203Z'%20fill='%23AAE1FB'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M45.5%2030.9c-10.8%203.4-22.8-4.6-30.3-9.1-4.7-2.9-10.6-3.2-14-1.3A28.8%2028.8%200%200%200%205%2045.2h48l1-1.5c2.5-4.3%204-9.2%204-14.1-4.2-.6-8.5-.1-12.5%201.3Z'%20fill='%2316AF6F'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.4%2051.2a29%2029%200%200%200%2042.6-6H5c1.5%202.2%203.4%204.2%205.4%206Z'%20fill='%23007B56'/%3e%3cpath%20d='M19.7%2045.2v-28L35.3%206.9l15%209.9v28.5H19.8Z'%20fill='%23fff'/%3e%3cpath%20d='M33%2017.3h-6.6v6.5H33v-6.5Z'%20fill='%237AB5E5'/%3e%3cpath%20d='M25.6%207.4h-3.4v7.1h3.4v-7Z'%20fill='%23fff'/%3e%3cpath%20d='M44.5%2017.3h-6.6v6.5h6.6v-6.5Z'%20fill='%237AB5E5'/%3e%3cpath%20d='M44.5%2031.3h-6.6v14h6.6v-14Z'%20fill='%23FE9247'/%3e%3cpath%20d='M34.2%2031.3H23v6.5h11.2v-6.5Z'%20fill='%237AB5E5'/%3e%3cpath%20d='M16.5%2020.2a1%201%200%200%201-.8-.5%201%201%200%200%201%20.3-1.4L34.8%205.6A1%201%200%200%201%2036%207.3L17.1%2020a1%201%200%200%201-.6.2Z'%20fill='%2300599A'/%3e%3cpath%20d='M54.3%2020.2a1%201%200%200%201-.5-.2L34.9%207.3A1%201%200%201%201%2036%205.6l18.9%2012.7a1%201%200%200%201-.6%201.9Z'%20fill='%2300599A'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M20.2%2056.5%2038%2045.2h6.6L39%2055.8c-.1.7-10.7%204.2-18.9.7Z'%20fill='%23A6CDDF'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23fff'%20d='M0%200h58v58H0z'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",BMe=[{id:1,image:NNe,title:"Новостройку",value:"buildings"},{id:2,image:LMe,title:"Дома, коттеджи, дачи",value:"houses"}],FMe=[{id:1,title:"Тип недвижимости",name:"type",value:!1},{id:2,title:"Способ расчёта и цена",name:"price",value:!1},{id:3,title:"Параметры заявки",name:"parameters",value:!1},{id:4,title:"Описание",name:"descr",value:!1},{id:5,title:"Когда планируете начинать просмотр",name:"start-view",value:!1},{id:6,title:"Ваши контакты",name:"contacts",value:!1}],lR=[{value:"not_first",label:"Не первый"},{value:"not_last",label:"Не последний"}],$Me=()=>{const{errors:t,formValues:e,init:n}=v.useContext(Fc);return r.jsx(lo,{children:r.jsxs("div",{className:"flex flex-col white-block",children:[r.jsx("h3",{className:"title-3 mb-6",children:"Поля для заполнения"}),r.jsx(RMe,{items:FMe,errors:t,watched:e,init:n})]})})},UMe=()=>{const{typeActiveId:t,modalOpen:e,setModalOpen:n,stages:s,currentStage:i,setCurrentStage:a}=v.useContext(Fc);return r.jsxs("section",{className:"flex flex-col gap-3 min-w-0",children:[!e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"white-block",children:s.find(o=>o.id===0).body}),t===1&&r.jsx(r.Fragment,{children:s.map(o=>{if(o.id!==0)return r.jsx("div",{className:"white-block",children:o.body},o.id)})})]}),r.jsx(Ze,{condition:e,children:r.jsx(gt,{condition:e,set:n,usePortal:!1,closeBtn:!1,options:{modalClassNames:"HeaderSticky",overlayClassNames:"_full",modalContentClassNames:"!py-0 !px-4"},ModalHeader:()=>r.jsx(Sr,{set:n,className:"px-8 py-6 mb-8 md1:px-4 md1:py-4 md1:mb-6",children:i>=1?r.jsx("button",{type:"button",onClick:()=>a(o=>o-1),children:r.jsx(wa,{className:"rotate-180",width:26,height:26})}):r.jsx("span",{})}),ModalFooter:()=>r.jsxs("div",{className:"ModalFooter",children:[i>=8&&r.jsx(_e,{type:"button",variant:"secondary",className:"w-full",onClick:()=>n(!1),children:"Проверить"}),r.jsx(_e,{className:"w-full",children:i>=8?"Разместить":"Продолжить"})]}),children:s.map(o=>{if(o.id===i)return r.jsx("div",{children:o.body},o.id)})})})]})},VMe=()=>{const{control:t,errors:e,isEdit:n,defaultData:s}=v.useContext(Fc),i=ue(Ot);return r.jsxs("div",{"data-block":"contacts",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Ваши контакты"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 md3:grid-cols-1",children:[r.jsx(ow,{control:t,beforeText:"Номер телефона",name:"phone",errors:e,defaultValue:(i==null?void 0:i.phone)||(n?s.user_phone:"")||"",disabled:!!(i!=null&&i.phone)}),r.jsx(Qe,{control:t,beforeText:"Имя, фамилия",name:"name",errors:e,requiredValue:!0,defaultValue:(i==null?void 0:i.name)||(n?s.user_name:"")||""})]})]})},zMe=()=>{const{control:t,isEdit:e,defaultData:n}=v.useContext(Fc);return r.jsxs("div",{"data-block":"start-view",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Когда планируете начинать просмотр"}),r.jsx(fn,{control:t,nameLabel:"Дата",defaultValue:e?Y1.find(s=>s.value===n.view_start):Y1[0],options:Y1,name:"view_start",className:"max-w-[400px] md3:max-w-none"})]})},HMe=()=>{const{control:t,errors:e,isEdit:n,defaultData:s}=v.useContext(Fc);return r.jsxs("div",{className:"flex flex-col gap-8","data-block":"descr",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"title-2 mb-4",children:"Описание"}),r.jsx(bi,{maxLength:4e3,control:t,name:"description",placeholder:"Напишите подробное описание о недвижимости, собственниках, соседях, транспортной доступности иинфраструктуре",errors:e,requiredValue:!0,defaultValue:n&&s.description||""})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"title-2 mb-4",children:"Укажите важные детали в поиске объекта"}),r.jsx(bi,{maxLength:4e3,control:t,name:"details",placeholder:"Напишите что важно при выборе будующего объекта недвижимости. Например: близость метро, дом с подземным паркингом или минимальный ежемесячный платеж",defaultValue:n&&s.details||""})]})]})},qMe=()=>{const{control:t,isEdit:e,defaultData:n,setValue:s,developers:i,complexes:a,tags:o,advantages:l,errors:c}=v.useContext(Fc);return r.jsxs("div",{"data-block":"parameters",children:[r.jsx("h2",{className:"title-2 mb-8 md1:mb-6",children:"Параметры заявки"}),r.jsxs("div",{className:"flex flex-col gap-8",children:[r.jsx(nn,{name:"Застройщик",widthChildren:460,children:r.jsx(Es,{control:t,search:!0,btnsActions:!0,options:i,name:"developers",setValue:s,setValuePermit:!0,placeholderText:"Не важно"})}),r.jsx(nn,{name:"Комплекс",widthChildren:460,children:r.jsx(Es,{control:t,search:!0,btnsActions:!0,options:a,name:"complexes",setValue:s,setValuePermit:!0,placeholderText:"Не важно"})}),r.jsx(nn,{name:"Комнатность",widthChildren:460,children:r.jsx(_c,{control:t,options:wy,name:"rooms",type:"multiple",requiredValue:!0,errors:c,defaultValue:e&&n.rooms?n.rooms:[]})}),r.jsx(nn,{name:"Площадь общая",widthChildren:460,children:r.jsxs(_l,{children:[r.jsx(Qe,{name:"area_total_from",control:t,convertNumber:!0,onlyNumber:!0,maxLength:3,beforeText:"От",defaultValue:e&&n.area_from||""}),r.jsx(Qe,{name:"area_total_to",control:t,convertNumber:!0,onlyNumber:!0,maxLength:3,beforeText:"До",afterText:"м²",defaultValue:e&&n.area_to||""})]})}),r.jsx(nn,{name:"Площадь кухни",widthChildren:460,children:r.jsxs(_l,{children:[r.jsx(Qe,{name:"area_kitchen_from",control:t,convertNumber:!0,onlyNumber:!0,maxLength:3,beforeText:"От",defaultValue:e&&n.area_kitchen_from||""}),r.jsx(Qe,{name:"area_kitchen_to",control:t,convertNumber:!0,onlyNumber:!0,maxLength:3,beforeText:"До",afterText:"м²",defaultValue:e&&n.area_kitchen_to||""})]})}),r.jsxs(nn,{name:"Этаж",widthChildren:8e3,classNameChildren:"grid grid-cols-[1fr_max-content] gap-8 md3:grid-cols-1 md3:gap-4",children:[r.jsxs(_l,{children:[r.jsx(Qe,{name:"floor_from",control:t,convertNumber:!0,onlyNumber:!0,maxLength:3,beforeText:"От",defaultValue:e&&n.floor_from||""}),r.jsx(Qe,{name:"floor_to",control:t,convertNumber:!0,onlyNumber:!0,maxLength:3,beforeText:"До",afterText:"эт.",defaultValue:e&&n.floor_to||""})]}),r.jsx(_c,{className:"w-full",control:t,options:lR,name:"floor_options",type:"multiple",defaultValue:e?lR.filter(u=>{if(n.floor_not_first||n.floor_not_last)return u.value}).map(u=>u.value):[]})]})]}),!!o.length&&r.jsxs("div",{className:"mt-12",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Добавить теги к заявке"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:r.jsx(_c,{className:"w-full",control:t,tagColor:"default",tagSize:"medium",options:[{value:"all",label:"Не важно"},...o.map(u=>({value:u.id,label:u.name}))],name:"tags",type:"placeholder-required",defaultValue:["all"]})})]}),!!l.length&&r.jsxs("div",{className:"mt-12",children:[r.jsx("h2",{className:"title-2 mb-4",children:"Уникальные преимущества объекта"}),r.jsx("div",{className:"grid grid-cols-4 gap-4 md3:grid-cols-2",children:r.jsx(Ir,{name:"advantages",control:t,defaultValue:[],render:({field:u})=>l.map(d=>r.jsx(Zy,{textVisible:!1,data:d,onChange:h=>{h?u.onChange([...u.value,d.id]):u.onChange(u.value.filter(f=>f!==d.id))},value:u.value.includes(d.id)},d.id))})})]})]})},WMe=()=>{const{control:t,errors:e,isEdit:n,defaultData:s,calcPropsWatch:i,setValue:a}=v.useContext(Fc);return r.jsxs("div",{"data-block":"price",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Способ расчёта и цена"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 md3:grid-cols-1",children:[r.jsx("div",{className:"mmd3:row-start-1",children:r.jsx(Es,{name:"calc_props",nameLabel:"Способ расчёта",control:t,calcProp:!0,options:u_,defaultValue:n&&s.pricing_attributes?u_.filter(o=>s.pricing_attributes.includes(o.label)):[],setValue:a,errors:e,requiredValue:!0,setValuePermit:!0})}),i&&!Ye(i)&&r.jsxs(r.Fragment,{children:[i.find(o=>o.id===1)&&r.jsx(Qe,{onlyNumber:!0,convertNumber:!0,maxLength:13,beforeText:"Стоимость объекта",afterText:"₽",name:"object_price",control:t,requiredValue:`${Ye(i)?"":"Обязательное поле"}`,errors:e,defaultValue:n&&(s==null?void 0:s.price_type)==="object_price_from"?s.price:"",disabled:Ye(i)}),i.find(o=>o.id===2||o.id===3||o.id===6)&&r.jsxs(r.Fragment,{children:[r.jsx(Qe,{onlyNumber:!0,convertNumber:!0,maxLength:11,beforeText:"Ежемесячный платёж до",afterText:"₽/мес",name:"month_payment",control:t,requiredValue:"Обязательное поле",errors:e,defaultValue:n&&(s==null?void 0:s.price_type)==="month_payment"?s.price:""}),i.find(o=>o.id===2)&&r.jsx("div",{className:`${i.find(o=>o.id===2)?"mmd3:row-start-1 mmd3:row-end-1":""}`,children:r.jsx(Qe,{onlyNumber:!0,convertNumber:!0,maxLength:11,beforeText:"Одобренная сумма",afterText:"₽",name:"approved_amount",control:t,requiredValue:"Обязательное поле",errors:e,defaultValue:n?s.approved_amount:""})}),!i.find(o=>o.id===4)&&r.jsx(Qe,{onlyNumber:!0,convertNumber:!0,maxLength:11,beforeText:"Первоначальный взнос",afterText:"₽",name:"initial_payment",control:t,requiredValue:"Обязательное поле",errors:e,defaultValue:n?s.initial_payment:""})]}),i.find(o=>o.id===5)&&r.jsx("div",{children:r.jsx(Qe,{onlyNumber:!0,convertNumber:!0,maxLength:11,beforeText:"Сумма сертификата",afterText:"₽",name:"certificate_amount",control:t,requiredValue:"Обязательное поле",errors:e,defaultValue:n?s.certificate_amount:""})})]})]})]})};let Fa=[],nc={};const GMe=({center:t=[],coordinates:e=[],setCoordinates:n})=>{const s=v.useRef(null),i=v.useRef(null),[a,o]=v.useState(!1),l=v.useRef(null);let c=!1;v.useEffect(()=>{Fa=e},[]);const u=()=>{n([...Fa])},d=()=>{Fa=[],c=!1,nc.removeAll(),o(!1),u()},h=()=>(fC(),ymaps.ready(["ext.paintOnMap"]).then(function(){const p=new window.ymaps.Map("customMap",{center:t||[],zoom:11,controls:[]});let g;if(nc=new ymaps.GeoObjectCollection,p.geoObjects.add(nc),Fa.length>0)for(let m=0;m<Fa.length;m++){let _=new ymaps.Polygon([Fa[m]],{},zu);_.myCoordinates=Fa[m],nc.add(_),_.events.add("mouseenter",function(){_.options.set(s_)}).add("mouseleave",function(){_.options.set(r_)}).add("click",function(y){let x=y.get("target");Fa=Fa.filter(b=>b!==x.myCoordinates),nc.remove(x),u(),nc.getLength()||o(!1)}),u()}return l.current.addEventListener("click",()=>{c=!c,c?l.current&&l.current.classList.add("ymap-action-active"):l.current&&l.current.classList.remove("ymap-action-active")}),p.events.add("mousedown",function(m){c&&(g=ymaps.ext.paintOnMap(p,m,{style:zu}))}),p.events.add("mouseup",function(m){if(g){c=!1;let _=g.finishPaintingAt(m);Fa.push(_),g=null;let y=new ymaps.Polygon([_],{},zu);y.myCoordinates=_,y.events.add("mouseenter",x=>x.get("target").options.set(s_)).add("mouseleave",x=>x.get("target").options.set(r_)).add("click",async x=>{let b=x.get("target");Fa=Fa.filter(w=>w!==b.myCoordinates),nc.remove(b),u(),nc.getLength()||o(!1)}),nc.add(y),o(!0),u()}else c=!1}),Sm(p,i),jm(p,i),p}));return v.useEffect(()=>{!window.ymaps||(t==null?void 0:t.length)===0||window.ymaps.ready(()=>{s.current?t&&(d(),s.current.setCenter(t)):h().then(f=>{s.current=f})})},[t]),r.jsx("div",{id:"customMap",className:"mt-6 remove-copyrights-pane relative w-full h-[320px] rounded-xl overflow-hidden",children:s&&r.jsxs("div",{className:"ymap-actions-container",ref:i,children:[r.jsx("div",{className:"ymap-actions ymap-actions-group ymap-action-right-top",children:r.jsx("button",{type:"button",onClick:()=>Cm(s.current,i),className:"ymap-action ymap-action-btn",children:r.jsx($h,{})})}),r.jsxs("div",{className:"ymap-actions ymap-top-right-center ymap-actions-group ymap-actions-group-join",children:[r.jsx("button",{type:"button",onClick:()=>qh(s.current),className:"ymap-action",children:r.jsx(Ja,{className:"stroke-black"})}),r.jsx("button",{type:"button",onClick:()=>Wh(s.current),className:"ymap-action",children:r.jsx(Uh,{})})]}),r.jsx("div",{className:"ymap-actions bottom-4 right-4 ymap-actions-group !w-auto items-end",children:a?r.jsxs(r.Fragment,{children:[r.jsxs("button",{type:"button",className:"ymap-action ymap-action-btn !w-auto font-medium gap-1 px-3",children:[r.jsx(Ja,{className:"stroke-black",width:15,height:15}),r.jsx("span",{children:"Ещё"})]}),r.jsx("button",{type:"button",onClick:d,className:"ymap-action ymap-action-btn !w-auto font-medium gap-1 px-3",children:r.jsx(un,{width:15,height:15})})]}):r.jsx(r.Fragment,{children:r.jsx("button",{type:"button",ref:l,className:"ymap-action ymap-action-btn",children:r.jsx(Rp,{})})})})]})})},YMe=()=>{const{control:t,coordinates:e,setCoordinates:n,isEdit:s,defaultData:i,cityWatch:a,anyRegionWatch:o,locationRef:l,setValue:c,cities:u}=v.useContext(Fc),d=ue(Ci),[h,f]=v.useState(d),[p,g]=v.useState(!1),[m,_]=v.useState(!1);return v.useEffect(()=>{const y=s?i.city:d;f(y),c("city",{value:y.id,label:y.name,geo:y.geo})},[d]),v.useEffect(()=>{wm(hm).then(()=>g(!0))},[]),r.jsxs("div",{"data-block":"location",ref:l,children:[r.jsx("h2",{className:"title-2 mb-3",children:"Укажите расположение поиска"}),r.jsx("p",{className:"mb-8 md1:mb-6",children:"Выберите город и нарисуйте желаемый район вашей заявки на карте"}),r.jsx(nn,{name:"Радиус поиска",widthChildren:460,children:r.jsxs("div",{className:"flex flex-wrap gap-2 w-full",children:[r.jsx(An,{color:"select",value:!0,children:a==null?void 0:a.label}),r.jsxs(An,{color:"select",onClick:y=>{console.log(y)},value:"",children:[a==null?void 0:a.label," + 20км"]}),r.jsx("button",{type:"button",className:"blue-link _active self-center",onClick:()=>_(!0),children:"Сменить город"}),r.jsx(X9,{onSubmit:y=>{c("city",{value:y.id,label:y.name,geo:[y.latitude,y.longitude]}),_(!1)},currentCity:h,condition:m,set:_})]})}),r.jsx(ps,{className:"mt-4",control:t,name:"any_region",option:{value:!0,label:"Любой район"},defaultValue:s?!!i.is_any_area:!1}),p&&!o&&r.jsxs(r.Fragment,{children:[r.jsx(GMe,{center:a==null?void 0:a.geo,coordinates:e,setCoordinates:n}),r.jsx(ps,{className:"mt-4",control:t,name:"neighboring_areas",option:{value:!0,label:"Можно предлагать соседние районы"},defaultValue:s?!!i.suggest_neighbour:!1})]})]})},XMe=(t,e=100)=>{setTimeout(()=>{if(Object.keys(t).length>0){const n=document.querySelector(`[data-error="${Object.keys(t)[0]}"]`);n&&window.scrollTo({top:n.offsetTop-e,behavior:"smooth"})}},5)},KMe=t=>{const[e,n]=v.useState(1),s=Mn(),i=ue(rt),[a,o]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState(null),[h,f]=v.useState(!i&&!t),{handleSubmit:p,control:g,watch:m,setValue:_,formState:{errors:y},trigger:x}=en(),[b,w]=v.useState(0),C=m(),j=m("city"),E=m("any_region"),T=m("calc_props"),[N,P]=v.useState(!1),[I,B]=v.useState({developers:!1,complexes:!1}),[U,z]=v.useState([]),[G,V]=v.useState([]),[J,Q]=v.useState([]),[Y,oe]=v.useState([]),[he,me]=v.useState([]),[Oe,xe]=v.useState([]);return v.useEffect(()=>{(async()=>{var ot,fe,$;if(t){const X=await Ue(`/api/purchase-orders/${s.id}`).then(W=>W.data);X&&(d({...X,city:{...X.city,geo:[(ot=X.city)==null?void 0:ot.latitude,(fe=X.city)==null?void 0:fe.longitude]},attributes:Object.values(X.attributes.reduce((W,ce)=>(W[ce.name]||(W[ce.name]={name:ce.name,value:[]}),W[ce.name].value.push(ce.value),W),{})).map(W=>({...W,value:W.value.join(", ")}))}),n(X.building_type_id||1),c(X.search_area||[]),_("developers",X.developers.map(W=>({value:W.id,label:W.name}))),_("complexes",X.buildings.map(W=>({value:W.id,label:W.name}))))}const Ve=($=(await Ue("/api/object-types").then(X=>X.data)).find(X=>X.name==="Новостройки"))==null?void 0:$.id;await Ue(`/api/type/${Ve}`).then(X=>{o(X.data.attributeComplex.map(W=>({...W,items:W.items.filter(ce=>ce.showInFilter)})).filter(W=>W.items.length))}),await Ue("/api/tags?type=tags").then(X=>{Q(X.data)}),Ue("/api/create/purchase/order/advantages").then(X=>{me(X.data)})})()},[]),v.useEffect(()=>{j&&Me("/api/developers/all",{city:j.value}).then(qe=>{const Ie=qe.data.map(Ve=>({label:Ve.name,value:Ve.id}));z(Ie),I.developers&&_("developers",[]),I.complexes&&_("complexes",[]),B(Ve=>({...Ve,developers:!0,complexes:!0}))})},[j]),v.useEffect(()=>{C.developers&&Me("/api/developers/complexes",{developer_ids:C.developers.map(qe=>qe.value)}).then(qe=>{V(qe.data),I.complexes&&_("complexes",[]),B(Ie=>({...Ie,complexes:!0}))})},[C.developers]),v.useEffect(()=>{C.city&&(he.length&&xe(he.filter(qe=>qe.city===C.city.label)),J.length&&oe(J.filter(qe=>qe.city===C.city.label)))},[C.city,he,J]),{typeActiveId:e,setTypeActiveId:n,control:g,watch:m,setValue:_,errors:y,coordinates:l,setCoordinates:c,attributes:a,formValues:C,defaultData:u,cityWatch:j,anyRegionWatch:E,init:N,trigger:x,modalOpen:h,setModalOpen:f,currentStage:b,setCurrentStage:w,calcPropsWatch:T,developers:U,complexes:G,tags:Y,tagsAll:J,advantages:Oe,advantagesAll:he,onInvalidSubmit:qe=>{P(!0),XMe(qe,124)},handleSubmit:p,params:s}},cR=({isEdit:t=!1})=>{const e=KMe(t),n=v.useRef(null),s=v.useRef(null),i=ue(Qs),a=ue(rt),o=[{body:r.jsx(YMe,{})},{body:r.jsx(qMe,{})},...e.attributes.map((c,u)=>({notMain:!0,body:r.jsxs("div",{children:[r.jsx("h2",{className:"title-2 mb-8 md1:mb-6",children:c.name}),r.jsx("div",{className:"flex flex-col gap-6 mt-4",children:c.items.map((d,h)=>{var f;return r.jsx(mD,{className:d.type!=="flag"?"col-span-full":"",nameOptions:"available-values",defaultValues:((f=e.defaultData)==null?void 0:f.attributes)||[],data:d,control:e.control},h)})})]},u)})),{body:r.jsx(WMe,{})},{body:r.jsx(HMe,{})},{body:r.jsx(zMe,{})},{body:r.jsx(VMe,{})}].map((c,u)=>({...c,id:u})),l=c=>{const u=HH(o);if(e.modalOpen&&(e.setCurrentStage(f=>f+1),e.currentStage!==u.id)||!e.typeActiveId)return;const d={};e.attributes.forEach(f=>{f.items.forEach(p=>{var g,m,_;typeof c[p.name]=="string"?d[p.name]=c[p.name]?[c[p.name].trim()]:[]:no(c[p.name])?(g=c[p.name][0])!=null&&g.value?d[p.name]=c[p.name].map(y=>y.value):d[p.name]=c[p.name].filter(y=>y!=="all"):d[p.name]=(m=c[p.name])!=null&&m.value?[(_=c[p==null?void 0:p.name])==null?void 0:_.value]:[],delete c[p.name]})});const h={type:BMe.find(f=>f.id===e.typeActiveId).value,object_type_id:1,"metro-selected-stations":"",any_region:c.any_region,city_id:c.city.value,coordinates:e.coordinates,neighboring_areas:c.neighboring_areas,filters:d,type_house:c.type_house,developers:c.developers,complexes:c.complexes,rooms:c.rooms,area_total_from:c.area_total_from,area_total_to:c.area_total_to,area_kitchen_from:c.area_kitchen_from,area_kitchen_to:c.area_kitchen_to,floor_from:c.floor_from,floor_to:c.floor_to,floor_options:c.floor_options,tags:c.tags||[],advantages:c.advantages||[],description:c.description,details:c.details,view_start:c.view_start,calc_props:c.calc_props,...c.calc_props.find(f=>f.id===1)?{price_type:"object_price_from",price:c.object_price}:{},...c.calc_props.find(f=>f.id===2||f.id===3)?{price_type:"month_payment",price:c.month_payment}:{},month_payment:c.calc_props.find(f=>f.id===2||f.id===3||f.id===6)?To(c.month_payment):null,approved_amount:c.calc_props.find(f=>f.id===2)?To(c.approved_amount):null,certificate_amount:c.calc_props.find(f=>f.id===5)?To(c.certificate_amount):null,initial_payment:c.calc_props.find(f=>(f.id===2||f.id===3||f.id===6)&&f.id!==4)?To(c.initial_payment):null,user_phone:c.phone,user_name:c.name,is_one_time_payment:!!c.calc_props.find(f=>f.id===1),is_not_one_time_payment:!!c.calc_props.find(f=>f.id===2||f.id===3)};Me(`${t?`/buyer-api/purchase-orders/${e.params.id}/update`:"/buyer-api/purchase-orders/create"}`,h).then(f=>{window.location.href=`${Fn.purchase.inner}${f.data.id}`})};return r.jsx(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:t?"Редактировать заявку на покупку":"Разместить заявку на покупку"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:r.jsxs(Fc.Provider,{value:{typeActiveId:e.typeActiveId,setTypeActiveId:e.setTypeActiveId,control:e.control,watch:e.watch,setValue:e.setValue,errors:e.errors,coordinates:e.coordinates,setCoordinates:e.setCoordinates,attributes:e.attributes,formValues:e.formValues,defaultData:e.defaultData,cityWatch:e.cityWatch,anyRegionWatch:e.anyRegionWatch,init:e.init,trigger:e.trigger,modalOpen:e.modalOpen,setModalOpen:e.setModalOpen,currentStage:e.currentStage,setCurrentStage:e.setCurrentStage,calcPropsWatch:e.calcPropsWatch,developers:e.developers,complexes:e.complexes,tags:e.tags,tagsAll:e.tagsAll,advantages:e.advantages,advantagesAll:e.advantagesAll,stages:o,locationRef:s,isEdit:t,cities:i},children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsxs("form",{onSubmit:e.handleSubmit(l,e.onInvalidSubmit),className:"main-wrapper--title md1:!pb-[86px]",children:[r.jsxs("div",{className:"container-desktop",children:[r.jsx("h1",{className:"title-1-5 mb-6 md1:mx-4",children:t?"Редактировать заявку на покупку":"Разместить заявку на покупку"}),r.jsxs(ea,{className:"mmd1:!grid-cols-[1fr_280px]",children:[r.jsx(UMe,{}),a&&r.jsx($Me,{})]}),e.typeActiveId&&a&&r.jsx("div",{ref:n,children:r.jsx(_e,{className:"mt-8 w-full",children:t?"Сохранить":"Разместить"})})]}),e.typeActiveId&&r.jsx(Dl,{activeDefault:!a,condition:a?{top:50,el:n}:null,children:r.jsx("div",{className:"container py-2.5",children:r.jsx(_e,{className:"w-full",children:t?"Сохранить":"Разместить"})})})]})})]})})},QMe=()=>r.jsx(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Записи на просмотр"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:r.jsxs(Kh,{suggestions_type:Yn.buyerAll,children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper",children:r.jsx("div",{className:"container-desktop",children:r.jsx(l2,{})})})})]})}),ZMe=()=>{var j;const[t,e]=_r(),n=vs(),s=[{id:0,value:"open",label:"Открытые"},{id:1,value:"close",label:"Закрытые"}],[i,a]=v.useState([]),[o,l]=v.useState(!0),[c,u]=v.useState(1),[d,h]=v.useState(null),[f,p]=v.useState(null),[g,m]=v.useState(null),_=ue(rt),[y,x]=v.useState({total:0,pages:0,items:[]});v.useEffect(()=>{Ue("/api/object-types").then(E=>{E.data&&a(E.data.map(T=>({value:T.id,label:T.name})))})},[]);const b=v.useCallback(es(E=>{l(!0);const T={page:E.currentPage||1,per_page:12,active:E.status};Me("/buyer-api/purchase-orders",T).then(N=>{l(!1),x(N.data)})},350),[]);v.useEffect(()=>{const E=s.find(T=>T.value===n.tab)||s[0];h(E==null?void 0:E.value),u(1)},[d]),v.useEffect(()=>{b({currentPage:c,status:d==="open"})},[c,d]);const w=async E=>{await Ue(`/buyer-api/purchase-orders/${E}/delete`),p(null),b({status:d==="open"})},C=async E=>{await Ue(`/buyer-api/purchase-orders/${E.id}/${E.type}`),m(null),b({status:d==="open"})};return r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Мои заявки на покупку"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[r.jsx(zn,{}),r.jsxs("main",{className:"main",children:[r.jsx("div",{className:"main-wrapper",children:r.jsxs("div",{className:"container-desktop",children:[r.jsx("h1",{className:"visually-hidden",children:"Мои заявки на покупку"}),r.jsxs(ea,{className:"!grid-cols-[1fr_345px]",children:[r.jsxs("div",{children:[r.jsx("div",{className:"white-block mb-3",children:r.jsx(jl,{children:s.map((E,T)=>r.jsx(Tl,{border:!0,onChange:()=>{var I;l(!0);const N=new URLSearchParams(t),P=(I=s.find(B=>B.id===T))==null?void 0:I.value;N.set("tab",P),e(N),h(P)},value:d===E.value,children:E.label},T))})}),r.jsxs(zp,{className:"!mt-0",children:[r.jsx("div",{className:"flex flex-col white-block !px-0 !py-5 md1:!py-3",children:o?r.jsx(po,{count:8,children:r.jsxs(Jy,{className:"grid-cols-[200px_350px] mmd1:justify-between h-[135px] !shadow-none md1:flex md1:flex-col md1:gap-3 md1:items-start",children:[r.jsx(Fe,{className:"h-10 md1:w-3/4 rounded-lg"}),r.jsx(Fe,{className:"h-10 md1:w-3/4 rounded-lg"})]})}):r.jsx(r.Fragment,{children:(j=y.items)!=null&&j.length?r.jsx(r.Fragment,{children:y.items.map((E,T)=>r.jsx(Cy,{className:"py-5 px-8 mmd1:!flex",data:{...E,current_type:i.find(N=>N.value===E.type)},href:`${Fn.purchase.inner}${E.id}`,userVisible:!1,actionsChildren:r.jsx($t,{mobile:!0,color:"white",ElementTarget:()=>r.jsx("div",{className:"h-7 w-7 bg-primary800 flex-center-all rounded-lg cursor-pointer",children:r.jsx(Q2,{className:"fill-dark pointer-events-none rotate-90",width:18,height:18})}),event:"click",children:r.jsxs("div",{className:"flex flex-col gap-4 items-start",children:[r.jsxs("button",{className:"flex gap-2",onClick:()=>m({id:E.id,type:E.active?"close":"open"}),children:[r.jsx(Ik,{className:"fill-red",width:18,height:18}),E.active?"Заблокировать":"Разблокировать"]}),r.jsxs(Ke,{className:"flex gap-2",target:"_blank",to:`${Fn.purchase.edit}${E.id}`,children:[r.jsx(Ns,{className:"stroke-blue stroke-[1.5px]",width:18,height:18}),"Редактировать"]}),r.jsxs("button",{className:"flex gap-2",onClick:()=>p(E.id),children:[r.jsx(un,{className:"fill-red",width:16,height:16}),"Удалить заявку"]})]})})},T))}):r.jsx(Wa,{block:!1,children:r.jsx("h4",{className:"title-3 mt-4",children:d==="open"?"Открытых заявок нет":"Закрытых заявок нет"})})})}),r.jsx(zo,{className:"mt-8",currentPage:c,setCurrentPage:E=>u(E),total:y.pages})]})]}),_&&r.jsx(lo,{children:r.jsx(dD,{activeObj:{name:"my-purchase",count:y.total||0}})})]})]})}),r.jsx(Ze,{condition:f,children:r.jsx(Ro,{condition:f,set:p,request:E=>w(E),title:"Вы действительно хотите удалить заявку?"})}),r.jsx(Ze,{condition:g,children:r.jsx(Ro,{condition:g,set:m,request:E=>{C(E)},title:`Вы действительно хотите ${(g==null?void 0:g.type)==="open"?"разблокировать":"заблокировать"} заявку?`})})]})]})},JMe=({condition:t,set:e})=>{const[n,s]=v.useState(""),[i,a]=v.useState(""),o=.8,l=1/o;return r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[560px]"},children:[r.jsx("h2",{className:"title-2 mb-8 text-center",children:"Обмен"}),r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsx(nn,{name:"Вы платите",col:!0,widthChildren:400,classNameName:"font-medium",children:r.jsx(kn,{label:"Сумма",size:"48",placeholder:"0",after:"Баллов",value:n,onChange:c=>{s(c),a(pt(To(c)*o||""))},onlyNumber:!0,convertNumber:!0,maxLength:8})}),r.jsx(nn,{name:"Вы получите",col:!0,widthChildren:400,classNameName:"font-medium",children:r.jsx(kn,{label:"Сумма",size:"48",placeholder:"0",after:"₽",value:i,onChange:c=>{a(c),s(pt(To(c)*l||""))},onlyNumber:!0,convertNumber:!0,maxLength:8})})]}),r.jsx("p",{className:"mt-10 text-primary400 text-center font-medium",children:"1 балл = 0.8 ₽"}),r.jsx(_e,{className:"mt-3 w-full",children:"Обменять"})]})})},eOe=({condition:t,set:e})=>r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_right",modalClassNames:"mmd1:!max-w-[560px]"},children:[r.jsx("h2",{className:"title-2 mb-6",children:"Как получать и использовать баллы"}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"bg-primary700 rounded-[20px] p-5",children:[r.jsx("h3",{className:"title-3 mb-2",children:"1. Получение баллов:"}),r.jsxs("ul",{className:"list-disc ml-5 mb-3",children:[r.jsx("li",{children:"При покупке недвижимости начисляется кешбэк в виде баллов."}),r.jsx("li",{children:"1 балл эквивалентен 0.8 рублям."})]})]}),r.jsxs("div",{className:"bg-primary700 rounded-[20px] p-5",children:[r.jsx("h3",{className:"title-3 mb-2",children:"2. Использование баллов:"}),r.jsxs("ul",{className:"list-disc ml-5 mb-3",children:[r.jsx("li",{children:"Баллы можно обменять на рубли в кошельке и получить их на карту."}),r.jsx("li",{children:"Баллы можно использовать для покрытия стоимости покупки квартиры, парковки или кладовки."}),r.jsx("li",{children:"Баллы можно использовать как первоначальный взнос при покупке недвижимости."}),r.jsx("li",{children:"Баллы можно использовать для доната менеджеру отдела продаж."})]})]}),r.jsxs("div",{className:"bg-primary700 rounded-[20px] p-5",children:[r.jsx("h3",{className:"title-3 mb-2",children:"3. Срок действия баллов:"}),r.jsxs("ul",{className:"list-disc ml-5 mb-3",children:[r.jsx("li",{children:"Баллы хранятся в течение одного года."}),r.jsx("li",{children:"По истечении года неиспользованные баллы сгорают."})]})]}),r.jsxs("div",{className:"bg-primary700 rounded-[20px] p-5",children:[r.jsx("h3",{className:"title-3 mb-2",children:"4. Минимальное и максимальное использование:"}),r.jsx("ul",{className:"list-disc ml-5 mb-3",children:r.jsx("li",{children:"Можно использовать как один балл, так и все накопленные баллы сразу."})})]}),r.jsxs("div",{className:"bg-primary700 rounded-[20px] p-5",children:[r.jsx("h3",{className:"title-3 mb-2",children:"5. Обмен баллов на рубли:"}),r.jsxs("ul",{className:"list-disc ml-5 mb-3",children:[r.jsx("li",{children:"Обмен баллов на рубли осуществляется в кошельке."}),r.jsx("li",{children:"После обмена баллы переводятся на банковскую карту."})]})]}),r.jsxs("div",{className:"bg-primary700 rounded-[20px] p-5",children:[r.jsx("h3",{className:"title-3 mb-2",children:"6. Сгорание баллов:"}),r.jsx("ul",{className:"list-disc ml-5 mb-3",children:r.jsx("li",{children:"Если баллы не были использованы в течение года, они автоматически сгорают."})})]}),r.jsxs("div",{className:"bg-primary700 rounded-[20px] p-5",children:[r.jsx("h3",{className:"title-3 mb-2",children:"7. Информация о балансе:"}),r.jsx("ul",{className:"list-disc ml-5 mb-3",children:r.jsx("li",{children:"Информация о количестве накопленных баллов доступна в личном кабинете на сайте inrut.ru"})})]})]})]})}),tOe=t=>{const e=t.replace(/\s/g,"");return e.substring(0,6),/^4276|^5469|^4279|^63900|^67758/.test(e)?"Сбербанк":/^5213|^4377|^5536|^2200/.test(e)?"Тинькофф":/^4584|^4154|^4779|^5486/.test(e)?"Альфа-Банк":/^4189|^4190|^4191|^4272|^4693|^4790|^4837|^4851/.test(e)?"ВТБ":/^5209|^5489|^5578|^6777/.test(e)?"Газпромбанк":/^4627|^4678|^4693|^5100/.test(e)?"Райффайзенбанк":/^220[0-4]/.test(e)?"МИР":/^4/.test(e)?"Visa":/^5[1-5]/.test(e)?"Mastercard":/^3[47]/.test(e)?"American Express":""},nOe=({condition:t,set:e})=>{const[n,s]=v.useState(""),[i,a]=v.useState(!1),{handleSubmit:o,control:l,watch:c,formState:{errors:u}}=en({defaultValues:{card_number:"",valid_until:"",cvv:""}}),d=c("card_number");v.useEffect(()=>{s(tOe(d))},[d]);const h=async f=>{a(!0);const p={...f,cardType:n};console.log(p)};return r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[560px]",modalContentClassNames:"text-left"},children:[r.jsx("h2",{className:"title-2 mb-6",children:"Добавить карту"}),r.jsxs("form",{className:"grid grid-cols-2 gap-3",onSubmit:o(h),children:[r.jsx("div",{className:"col-span-2",children:r.jsx(Qe,{beforeText:"Номер карты",afterText:n,name:"card_number",control:l,requiredValue:!0,errors:u,mask:"bankCardMask",size:"48"})}),r.jsx(Qe,{beforeText:"Действует до",name:"valid_until",control:l,requiredValue:!0,errors:u,mask:"expiryMask",size:"48"}),r.jsx(Qe,{beforeText:"CVV",placeholder:"fas",name:"cvv",control:l,requiredValue:!0,errors:u,mask:"cvvMask",size:"48"}),r.jsx(_e,{className:"w-full col-span-2 mt-6",children:"Сохранить"})]})]})})},sOe=({condition:t,set:e})=>{const[n,s]=v.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(Ze,{condition:t,children:r.jsxs(gt,{condition:t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[560px]",modalContentClassNames:"text-left"},children:[r.jsx("h2",{className:"title-2 mb-6",children:"Пополнить"}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.jsxs("button",{type:"button",className:"border border-solid border-primary700 h-[100px] rounded-xl flex flex-col items-start text-left p-3 hover:bg-primary800",onClick:()=>{s(!0),e(!1)},children:[r.jsx("div",{className:"flex-center-all bg-pageColor w-9 h-6 rounded-md",children:r.jsx(Ja,{className:"stroke-graySecond"})}),r.jsxs("p",{className:"text-defaultMax mt-2 ",children:["Добавить ",r.jsx("br",{})," карту"]})]})})]})}),r.jsx(nOe,{condition:n,set:s})]})},rOe=({summ:t=0,points:e=0,className:n})=>{const[s,i]=v.useState(!1),[a,o]=v.useState(!1),[l,c]=v.useState(!1);return r.jsxs("div",{className:He("grid grid-cols-2 gap-3 md1:grid-cols-1",n),children:[r.jsx("div",{className:"white-block",children:r.jsx("div",{className:"flex flex-col h-full",children:r.jsxs("div",{className:"flex justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-small text-primary400 mb-1.5",children:"Баланс"}),r.jsxs("p",{className:"title-2",children:[pt(t)," ₽"]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{type:"button",className:"flex flex-col items-center gap-1.5",onClick:()=>c(!0),children:[r.jsx("div",{className:"bg-blue rounded-full w-7 h-7 flex-center-all",children:r.jsx(Xi,{width:12,height:12,className:"fill-white"})}),r.jsx("span",{children:"Вывести"})]}),r.jsxs("button",{type:"button",className:"flex flex-col items-center gap-1.5",onClick:()=>c(!0),children:[r.jsx("div",{className:"bg-blue rounded-full w-7 h-7 flex-center-all",children:r.jsx(Xi,{width:12,height:12,className:"fill-white"})}),r.jsx("span",{children:"Пополнить"})]})]})]})})}),r.jsx("div",{className:"white-block",children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-small text-primary400 mb-1.5",children:"Баллы"}),r.jsx("p",{className:"title-2",children:pt(e)})]}),r.jsx("div",{className:"flex gap-4",children:r.jsxs("button",{type:"button",className:"flex flex-col items-center gap-1.5",onClick:()=>o(!0),children:[r.jsx("div",{className:"bg-blue rounded-full w-7 h-7 flex-center-all",children:r.jsx(Xi,{width:12,height:12,className:"fill-white"})}),r.jsx("span",{children:"Обменять"})]})})]}),r.jsx("button",{className:"blue-link mt-1.5",onClick:()=>i(!0),children:"Как получать и на что тратить баллы"})]})}),r.jsx(JMe,{condition:a,set:o}),r.jsx(eOe,{condition:s,set:i}),r.jsx(sOe,{condition:l,set:c})]})},iOe=()=>{const t=ue(Ot);return r.jsxs(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Кошелёк"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper--title",children:r.jsxs("div",{className:"container-desktop",children:[r.jsx("h2",{className:"title-2 mb-3 md1:px-4",children:"Кошелёк"}),r.jsx(rOe,{points:0,summ:0,userInfo:t}),r.jsx(YW,{className:"white-block-small mt-3"})]})})})]})},aOe=[{path:Fn.purchase.list,body:r.jsx(ZMe,{})},{path:`${Fn.purchase.inner}:id`,body:r.jsx(vD,{})},{path:Fn.purchase.create,body:r.jsx(cR,{})},{path:`${Fn.purchase.edit}:id`,body:r.jsx(cR,{isEdit:!0})},{path:Fn.walletPage,body:r.jsx(iOe,{})},{path:Fn.view,body:r.jsx(QMe,{})}],Jj=({children:t,role_id:e})=>{var i,a;const[n]=ur(),s=ue(Ot);if(n.loggedIn){if(s&&!Ye(s)){if(e===Wt.id&&((i=s.role)==null?void 0:i.id)!==Wt.id)return r.jsx(Xf,{to:ht.login});if(e===sn.id&&((a=s.role)==null?void 0:a.id)!==sn.id)return r.jsx(Xf,{to:ke.loginPhone})}}else{if(e===Wt.id)return r.jsx(Xf,{to:ke.loginPhone});if(e===sn.id||e==="auth")return r.jsx(Xf,{to:ke.loginPhone})}return t},oOe=()=>{const[t,e]=ur(),n=Mr(),s=Dt(),{handleSubmit:i,control:a}=en(),o=ue(Ot),{notificationLogout:l}=ue(t9),{setAuthUser:c}=u4(),{logout:u}=dw(),[d,h]=v.useState(!1);v.useEffect(()=>{var p;t.loggedIn&&((p=o.role)==null?void 0:p.id)===pn.id&&n(ht.dashboardAdmin)},[o]);const f=async p=>{t.loggedIn&&await u(),Me("/api/login",{...p}).then(g=>{const m=g.data.result;e("loggedIn",!0,{maxAge:Zb,path:"/"}),e("access_token",m,{maxAge:Zb,path:"/"}),c().then(_=>{const y=_.role.id;y===pn.id?n(ht.dashboardAdmin):y===Wt.id?n(At.object.list):n(ke.home)})}).catch(g=>{console.log(g),h(g.response.data.result)})};return r.jsxs("div",{className:"site-container",children:[r.jsxs(dn,{children:[r.jsx("title",{children:"Вход в аккаунт"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper--title",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Вход в аккаунт"}),r.jsx("form",{onSubmit:i(f),className:"white-block",children:r.jsxs("div",{className:"max-w-[400px] flex flex-col gap-4 m-auto my-2",children:[r.jsx(Qe,{control:a,requiredValue:!0,beforeText:"Email",name:"email",size:"48"}),r.jsx(Qe,{control:a,requiredValue:!0,beforeText:"Пароль",name:"password",size:"48",type:"password"}),r.jsx(_e,{className:"w-full",children:"Войти"})]})})]})})}),l&&on.createPortal(r.jsxs(yi,{show:l,onClose:()=>s(qse(!1)),classListRoot:"min-w-[300px]",children:[r.jsx("h3",{className:"title-3 !text-white mt-2",children:"Ваша сессия истекла."}),r.jsx("h4",{className:"mt-1 text-defaultMax font-medium !text-white",children:"Чтобы продолжить, войдите в аккаунт заново"})]}),document.getElementById("overlay-wrapper")),d&&on.createPortal(r.jsx(yi,{show:d,set:h,onClose:()=>h(!1),classListRoot:"min-w-[400px]",children:r.jsxs("div",{className:"font-medium text-defaultMax",children:["Произошла ошибка. ",d.includes("not found")&&r.jsx(r.Fragment,{children:"Проверьте Email"}),d.includes("not valid")&&r.jsx(r.Fragment,{children:"Проверьте пароль"})]})}),document.getElementById("overlay-wrapper"))]})},XW=(t=null,e)=>{var j,E;const{handleSubmit:n,control:s,formState:{errors:i},setValue:a}=en(),o=Mn(),l=vs(),[c,u]=v.useState(e==="create"?t:null),[d,h]=v.useState(null),[f,p]=v.useState([]),[g,m]=v.useState([]),[_,y]=v.useState(!1),{data:x}=AW(!0,!1,!0),b=((j=x.tags)==null?void 0:j.filter(T=>T.city===(c==null?void 0:c.city)||T.city===(d==null?void 0:d.city)))||[],w=((E=x.advantages)==null?void 0:E.filter(T=>T.city===(c==null?void 0:c.city)||T.city===(d==null?void 0:d.city)))||[];return v.useEffect(()=>{e==="create"&&!l.copy&&(Yh(o.objectId).then(T=>{h(T)}),Oh(o.objectId).then(T=>{p(T)})),(e==="edit"||l.copy)&&Kq(o.id||l.copy).then(T=>{u({id:T.id,attributes:T.attributes,rooms:T.rooms,price:T.price,priceOld:T.priceOld,area:T.area,photos:T.images,building_id:T.building_id,deadline:T.deadline,apartment_tags:T.apartment_tags,advantages:T.advantages,housing:T.housing,floor:T.floor,show_cashback_on_homepage:T.show_cashback_on_homepage,show_on_homepage:T.show_on_homepage,city:T.city}),m(T.images.map((N,P)=>({id:P,image:N}))),Oh(T.building_id).then(N=>{p(N)})}),l.copy},[]),{onSubmitHandler:async T=>{var N,P;try{const I={rooms:T.room[0],area:T.area.replace(/,/g,"."),description:T.description,price:T.price,floor:T.floor.value,"recommend-catalog":T["recommend-catalog"],"cashback-catalog":T["cashback-catalog"],photos:g,attributes:[],tags:T.tags&&T.advantages?[...(N=T.tags)==null?void 0:N.map(U=>U.value),...(P=T.advantages)==null?void 0:P.map(U=>U.value)]:[],deadline:T.deadline};_?I.housing=T.custom_frame:I.housing=T.frame.value;const B=new FormData;if(I.photos=ts(I.photos),ss(I.photos,B),I.photos=ns(I.photos),B.append("data",JSON.stringify(I)),e==="create"){const{data:{apartment_id:U}}=await Me(`/admin-api/create/apartment/building/${o.objectId}`,B,{"Content-Type":"multipart/form-data"});window.location.href=`${ht.apartment.edit}${U}`}e==="edit"&&Me(`/admin-api/update/apartment/${c.id}`,B,{"Content-Type":"multipart/form-data"}).then(U=>{window.location.reload()})}catch(I){console.log(I)}},data:c,setData:u,frames:f,setFrames:p,dataPhotos:g,setDataPhotos:m,customFrame:_,setCustomFrame:y,tags:b,advantages:w,control:s,errors:i,handleSubmit:n}},uR={rooms:wy,floor:[...new Array(101)].map((t,e)=>({value:e.toString(),label:e.toString()})).slice(1)},lOe={rooms:"",photos:[],room:[],description:"",price:"",floor:"",show_on_homepage:!1,show_cashback_on_homepage:!1,attributes:[],apartment_tags:[],advantages:[],housing:""},cOe=({control:t,errors:e,requiredValue:n,name:s="",options:i=[],defaultValue:a=[],type:o="multiple"})=>r.jsx(AA,{children:r.jsx(Ir,{name:s,control:t,defaultValue:a,rules:{required:n,validate:l=>{if(n)return!Ye(l)}},render:({field:l})=>i.map((c,u)=>r.jsx(DA,{checked:l.value.includes(c.value),onChange:d=>{o==="single"&&l.onChange([c.value]),o==="multiple"&&(d.target.checked?l.onChange([...l.value,c.value]):l.onChange(l.value.filter(h=>h!==c.value)))},label:c.label,size:c.value===0?"Studio":"Default",isValid:e?e[s]:!1},u))})}),uOe=({images:t,setImages:e})=>{const n=i=>{const a=cr([...t,...i]);e(a)},s=(i,a)=>{const o=t.filter(l=>l.id!==a).map((l,c)=>({...l,id:c+1}));e(o)};return r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h3",{className:"title-2 mb-6",children:"Фото"}),r.jsx(Bo,{items:t,deleteItem:s}),r.jsx(ta,{addFiles:i=>n(i),className:t.length>0?"mt-6":""})]})},KW=({options:t})=>{var p,g,m;const{onSubmitHandler:e,data:n,frames:s,dataPhotos:i,setDataPhotos:a,customFrame:o,setCustomFrame:l,tags:c,advantages:u,control:d,errors:h,handleSubmit:f}=t;if(n)return r.jsxs("form",{onSubmit:f(e),className:"mt-6",children:[r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsxs("div",{className:"grid grid-cols-[max-content_1fr_1fr_1fr] gap-2",children:[r.jsx(cOe,{type:"single",control:d,options:uR.rooms,name:"room",requiredValue:!0,errors:h,defaultValue:(p=n.rooms)==null?void 0:p.toString()}),r.jsx(Qe,{control:d,name:"area",beforeText:"Площадь",afterText:"м²",requiredValue:!0,errors:h,defaultValue:n.area,onlyNumberSemicolon:!0}),r.jsx(Qe,{control:d,beforeText:"Срок сдачи",name:"deadline",defaultValue:n.deadline}),r.jsx(fn,{control:d,nameLabel:"Этаж",options:uR.floor,defaultValue:n.floor?{value:n.floor,label:n.floor}:{},name:"floor",requiredValue:!0,errors:h})]}),r.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2",children:[r.jsx(Es,{name:"tags",control:d,nameLabel:"Теги",options:c.map(_=>({value:_.id,label:_.name})),defaultValue:(g=n.apartment_tags)==null?void 0:g.map(_=>({value:_.id,label:_.name}))}),r.jsx(Es,{name:"advantages",control:d,nameLabel:"Уникальные преимущества квартиры",options:u.map(_=>({value:_.id,label:_.name})),defaultValue:(m=n.advantages)==null?void 0:m.map(_=>({value:_.id,label:_.name}))})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Корпус"}),r.jsxs("div",{className:"grid grid-cols-[400px_max-content] gap-2 items-center",children:[o?r.jsx(Qe,{control:d,beforeText:"Корпус",name:"custom_frame",requiredValue:!0,errors:h}):r.jsx(fn,{control:d,nameLabel:"Корпус",options:s,defaultValue:n.housing?{value:n.housing,label:n.housing}:{},name:"frame"}),r.jsx(md,{checked:o,set:_=>{l(_.target.checked)},text:"Другой корпус"})]})]})]}),r.jsx(uOe,{images:i,setImages:a}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Выводить в каталог"}),r.jsxs("div",{className:"flex gap-8",children:[r.jsx(ps,{defaultValue:n.show_on_homepage,control:d,option:{label:"Определенно рекомендуем"},name:"recommend-catalog"}),r.jsx(ps,{defaultValue:n.show_cashback_on_homepage,control:d,option:{label:"Повышенный кешбэк"},name:"cashback-catalog"})]})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Цена"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.jsx(Qe,{control:d,beforeText:"Цена",afterText:"₽",name:"price",defaultValue:n.priceOld,convertNumber:!0,onlyNumber:!0,requiredValue:!0,errors:h})})]})]}),r.jsx("div",{className:"container",children:r.jsx(_e,{type:"submit",className:"w-full mt-8",children:"Сохранить"})})]})},dOe=()=>{const t=vs(),e=XW(t.copy?null:lOe,"create");if(!(t.copy&&!e.data))return r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsx("h2",{className:"title-2",children:"Добавить квартиру"})}),r.jsx(KW,{options:e})]})})},hOe=()=>{var i,a;const t=XW(null,"edit"),[e,n]=v.useState(!1),s=Mn();return r.jsxs("main",{className:"main",children:[r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"title-2",children:"Редактировать квартиру"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Rl,{to:`${ht.apartment.create}${(i=t==null?void 0:t.data)==null?void 0:i.building_id}?copy=${s.id}`,children:r.jsx(_e,{size:"Small",Selector:"div",children:"Скопировать"})}),r.jsxs(h4,{className:"!px-0",onClick:()=>{n(s.id)},children:[r.jsx(un,{width:16,height:16,className:"!fill-red"}),r.jsx("span",{className:"text-dark font-medium",children:"Удалить квартиру"})]})]})]})}),r.jsx(KW,{options:t})]}),r.jsx(vy,{options:{condition:e,set:n,redirectUrl:`${ht.objects.edit}${(a=t==null?void 0:t.data)==null?void 0:a.building_id}`}})]})},QW=({data:t,setData:e,zoom:n=12})=>{const[s,i]=v.useState(!1),[a,o]=v.useState(null);let l=null;const c=v.useRef(null);v.useEffect(()=>{wm(hm).then(()=>i(!0))},[]);const u=()=>{try{ymaps.ready(()=>{const h=new ymaps.Map("customMap",{center:t.length?t:[55.7558,37.6176],zoom:n,controls:[]});Sm(h,c),jm(h,c),o(h),t.length>0?d(h,t):h.events.add("click",f=>{const p=f.get("coords");d(h,p),e(p)})})}catch(h){console.log("error is",h)}};v.useEffect(()=>{s&&!a&&u()},[s,a]);const d=(h,f)=>{if(h)if(l)l.geometry.setCoordinates(f),h.panTo(f,{delay:500,timingFunction:"ease-in-out"});else{const p=new ymaps.Placemark(f,{},{draggable:!0});h.geoObjects.add(p),l=p,p.events.add("dragend",g=>{const m=p.geometry.getCoordinates();e(m),h.panTo(m,{delay:500,timingFunction:"ease-in-out"})})}};return r.jsx("div",{id:"customMap",className:"remove-copyrights-pane relative w-full h-[650px] rounded-xl overflow-hidden",children:s&&a&&r.jsxs("div",{className:"ymap-actions-container",ref:c,children:[r.jsx("div",{className:"ymap-actions ymap-actions-group ymap-action-right-top",children:r.jsx("button",{type:"button",onClick:()=>Cm(a,c),className:"ymap-action ymap-action-btn",children:r.jsx($h,{})})}),r.jsxs("div",{className:"ymap-actions ymap-top-right-center ymap-actions-group ymap-actions-group-join",children:[r.jsx("button",{type:"button",onClick:()=>qh(a),className:"ymap-action",children:r.jsx(Ja,{className:"stroke-black"})}),r.jsx("button",{type:"button",onClick:()=>Wh(a),className:"ymap-action",children:r.jsx(Uh,{})})]})]})})},fOe=()=>{const{handleSubmit:t,control:e,formState:{errors:n}}=en(),[s,i]=v.useState([]),a=o=>{var c,u;const l={...o,latitude:((c=s[0])==null?void 0:c.toString())||null,longitude:((u=s[1])==null?void 0:u.toString())||null};Me("/admin-api/cities/create",l).then(d=>{d.data.success&&(window.location.href=`${ht.cities.list}`)})};return r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Создать ",r.jsx("span",{children:"город"})]})}),r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:"container",children:r.jsxs("form",{onSubmit:t(a),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsx("div",{className:"max-w-[400px]",children:r.jsx(Qe,{control:e,beforeText:"Название",name:"name",errors:n,requiredValue:!0})}),r.jsx("h2",{className:"title-2 mt-8 mb-4",children:"Укажите центр города на карте"}),r.jsx(QW,{data:s,setData:i,zoom:8})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})})})]})})},pOe=()=>{const t=Mn(),{handleSubmit:e,control:n,formState:{errors:s}}=en(),[i,a]=v.useState([]),o=ue(Qs),[l,c]=v.useState("");v.useEffect(()=>{if(o.length===0)return;const d=o.find(h=>+h.id==+t.cityId);d.latitude&&d.longitude&&a([d.latitude,d.longitude]),c(d.name)},[o]);const u=d=>{var f,p;const h={...d,latitude:((f=i[0])==null?void 0:f.toString())||null,longitude:((p=i[1])==null?void 0:p.toString())||null};Me(`/admin-api/cities/update/${t.cityId}`,h).then(g=>{g.data.success&&(window.location.href=`${ht.cities.list}`)})};if(l)return r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Редактировать ",r.jsx("span",{children:"город"})]})}),r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:"container",children:r.jsxs("form",{onSubmit:e(u),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsx("div",{className:"max-w-[400px]",children:r.jsx(Qe,{control:n,beforeText:"Название",name:"name",errors:s,requiredValue:!0,defaultValue:l})}),r.jsx("h2",{className:"title-2 mt-8 mb-4",children:"Укажите центр города на карте"}),r.jsx(QW,{data:i,setData:a,zoom:8})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})})})]})})},mOe=()=>{const t=ue(Qs),[e,n]=v.useState([]),[s,i]=v.useState(!1);v.useEffect(()=>{n(t)},[t]);const a=()=>{Number(s)&&Ue(`admin/cities/delete/${s}`).then(o=>{o.data.success&&(window.location.href=`${ht.cities.list}`)})};return r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsx("h2",{className:"title-2",children:"Города"})}),r.jsx("div",{className:"mt-6",children:r.jsxs("div",{className:"container",children:[r.jsxs(rm,{className:"grid-cols-[200px_1fr_max-content]",children:[r.jsx("span",{children:"ID"}),r.jsx("span",{children:"Название"}),r.jsx("span",{children:"Действие"})]}),r.jsx(im,{className:"mt-3 flex flex-col gap-3",children:e.map((o,l)=>r.jsxs(Hp,{className:"grid-cols-[200px_1fr_max-content]",children:[r.jsx("span",{children:o.id}),r.jsx("span",{children:o.name}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Ke,{to:`${ht.cities.edit}${o.id}`,children:r.jsx(bv,{Selector:"div"})}),r.jsx(Xu,{onClick:()=>i(o.id)})]})]},l))}),r.jsx(Ke,{to:ht.cities.create,className:"mt-8 w-full",children:r.jsx(_e,{Selector:"div",children:"Создать новый город"})})]})}),r.jsx(Ze,{condition:s,children:r.jsx(gt,{condition:!!s,set:i,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[700px]"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"title-2",children:"Вы действительно хотите удалить?"}),r.jsx("p",{className:"mt-2",children:"Это действие необратимо"}),r.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-2",children:[r.jsx(_e,{onClick:()=>i(!1),children:"Нет"}),r.jsx(_e,{onClick:a,children:"Да"})]})]})})})]})})},gOe=[{label:"Типы объектов",href:ht.types.list},{label:"Объекты",href:ke.listing},{label:"Город",href:ht.cities.list},{label:"Теги/стикеры/Уникальные преимущества объекта",href:ht.tags.list},{label:"Менеджеры",href:ke.specialists.list},{label:"Застройщики",href:ke.developers.list}],vOe=()=>r.jsxs(r.Fragment,{children:[r.jsxs(dn,{children:[r.jsx("title",{children:"Админ панель"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsx("h2",{className:"title-2",children:"Создание/настройка системы"})}),r.jsx("div",{className:"mt-6 container",children:r.jsx("div",{className:"white-block grid gap-4 grid-cols-5",children:gOe.map((t,e)=>r.jsx(Ke,{to:t.href,className:"border border-solid border-primary100 h-[200px] flex items-center justify-center font-medium hover:shadow-lg text-center",children:t.label},e))})})]})})]}),yOe=({children:t,onClick:e=()=>{},className:n=""})=>r.jsxs("button",{type:"button",onClick:e,className:`flex items-center gap-2 text-blue h-max leading-none ${n}`,children:[r.jsx(Ja,{width:14,height:14,className:"stroke-blue fill-blue"}),t]}),dR=({data:t,activeTab:e,editNameHandler:n=()=>{},deleteFieldHandler:s=()=>{},onClick:i,editModeIndex:a,setEditModeIndex:o,controls:l=!0})=>r.jsxs("div",{className:`${Eo.tabsBtn} ${e?Eo.tabsBtnActiveBorder:""} cursor-pointer h-10  max-w-80`,onClick:i,children:[a!==+t.id&&r.jsx("span",{className:"whitespace-nowrap overflow-hidden",children:t.name}),a===+t.id&&r.jsx("input",{autoFocus:!0,value:t.name,onChange:c=>n(t.id,c.target.value),onBlur:()=>o(!1),onKeyDown:c=>{c.key==="Enter"&&o(!1)}}),l&&r.jsxs("div",{className:"ml-3 flex items-center gap-2",children:[a!==+t.id?r.jsx(bv,{onClick:()=>o(+t.id)}):r.jsx(jhe,{onClick:()=>o(!1)}),r.jsx(Xu,{onClick:()=>s(t.id)})]})]}),xOe=v.memo(({data:t,activeTab:e=0,setActiveTab:n,children:s,bodyContent:i,editNameHandler:a=()=>{},deleteFieldHandler:o=()=>{},editModeIndex:l,setEditModeIndex:c,additionalTab:u})=>{const d=h=>{n(h)};return r.jsxs("div",{children:[r.jsxs("nav",{className:Eo.tabsNavControls,children:[t.map((h,f)=>r.jsx("div",{children:r.jsx(dR,{data:h,onClick:p=>d(f),editNameHandler:a,deleteFieldHandler:o,activeTab:e===f,editModeIndex:l,setEditModeIndex:c})},f)),u&&r.jsx("div",{children:r.jsx(dR,{data:u.structureTab,onClick:h=>d(u.structureTab.id),activeTab:e===u.structureTab.id,controls:!1})})]}),r.jsxs("div",{className:"mt-6",children:[t.map((h,f)=>e===f&&r.jsx("div",{children:h.body},f)),u&&e===u.structureTab.id&&r.jsx("div",{children:u.structureTab.body},u.structureTab.id),i]}),s]})}),mC=({title:t,data:e,setData:n,structureTabs:s,emptyField:i,onChangeParams:a={},onSubmit:o=()=>{},additionalTab:l=null})=>{const[c,u]=v.useState(0),[d,h]=v.useState([]),[f,p]=_r(),g=vs(),[m,_]=v.useState(null);v.useEffect(()=>{h(e.map(w=>s(w)))},[e]),v.useEffect(()=>{a.name&&p({attribute:c+1})},[c]),v.useEffect(()=>{!g.attribute||!a.name||u(+g[a.name]-1)},[]),v.useEffect(()=>{m===!1&&o(e.map(w=>w.name?w:{...w,name:"Без названия"}))},[m]);const y=(w,C)=>{const j=e.map(E=>E.id===w?{...E,name:C}:E);n(j)},x=w=>{const C=e.filter(j=>j.id!==w).map((j,E)=>({...j,id:E+1}));n(C),e.length===w&&setTimeout(()=>u(0),0),o(C.map(j=>j.name?j:{...j,name:"Без названия"}))},b=()=>{const w=[...e,{...i,id:e.length+1}];n(w),u(e.length),o(w.map(C=>C.name?C:{...C,name:"Без названия"})),_(e.length+1)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between mb-4",children:[r.jsx("h3",{className:"title-2",children:t}),r.jsx(yOe,{onClick:b,children:"Добавить новое поле"})]}),r.jsx(xOe,{data:d,activeTab:c,setActiveTab:u,editNameHandler:y,deleteFieldHandler:x,editModeIndex:m,setEditModeIndex:_,additionalTab:l})]})},xD=({options:t={},onSubmitVideo:e=()=>{},onUpdate:n=()=>{},id:s})=>{var u,d,h,f;const[i,a]=v.useState([]),[o,l]=v.useState(!1);v.useEffect(()=>{td(t.data||[]).then(p=>{a(p)})},[t.data]);const c=p=>{Me(`/admin-api/building/${t.dataObject.id}/unlink-video/${p.id}`).then(g=>{n({videos:t.dataObject.videos.filter(m=>m!==p.url),shorts:t.dataObject.shorts.filter(m=>m!==p.url),videos_apartRenov:t.dataObject.videos_apartRenov.filter(m=>m!==p.url),videos_ecologyParks:t.dataObject.videos_ecologyParks.filter(m=>m!==p.url),videos_gallery:t.dataObject.videos_gallery.filter(m=>m!==p.url)})})};return{required:!0,structureTab:{id:s,name:"Видео",body:r.jsxs("div",{children:[i.length?r.jsx("div",{className:"grid grid-cols-4 gap-4",children:i.map((p,g)=>r.jsx($i,{data:p,developer:t.dataObject.developer,controlsAdmin:!0,deleteCard:m=>c(m),edit:m=>l(m)},g+1))}):r.jsx("span",{className:"text-primary400",children:"Вы пока не добавили ни одного видео"}),r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>{t.setModal(!0)},children:"Создать Видео"}),r.jsx(a2,{conditionModal:t.conditionModal,setModal:t.setModal,options:{onSubmitForm:async p=>{p.url&&e(p)},frames:t.frames,tags:t.tags,specialists:t.specialists,building_id:(u=t.dataObject)==null?void 0:u.id,developer:(d=t.dataObject)==null?void 0:d.developer,is_short:!1},sending:n}),r.jsx(Ze,{condition:o,children:r.jsx(sm,{conditionModal:!!o,setModal:l,options:{onSubmitForm:e,frames:t.frames,tags:t.tags,is_short:!1,specialists:t.specialists,building_id:(h=t.dataObject)==null?void 0:h.id,developer:(f=t.dataObject)==null?void 0:f.developer,currentVideoData:{url:o.video_url}},sending:n})})]})}}},bOe={name:"",items:[]},ZW=v.memo(({data:t,setData:e,options:n={},sendingForm:s,dataVideos:i})=>{const[a,o]=v.useState(!1),l=(d,h)=>{const f=t.map(p=>p.id===h?{...p,items:[...cr([...d])]}:p);e(f)},c=(d,h)=>{const f=t.map(p=>p.id===d?{...p,items:[...cr([...p.items,...h])]}:p);e(f)},u=(d,h)=>{const f=t.map(p=>{if(p.id===d){const g=p.items.filter(m=>m.id!==h).map((m,_)=>({...m,id:_+1}));return{...p,items:g}}return p});e(f)};return r.jsx("div",{className:"white-block mt-4",children:r.jsx(mC,{data:t,setData:d=>e(d),structureTabs:d=>({id:d.id,name:d.name,body:r.jsxs("div",{children:[r.jsx(Bo,{items:d.items,dataCurrentId:d.id,deleteItem:u,onChange:h=>l(h,d.id)}),r.jsx(ta,{addFiles:h=>c(d.id,h),className:d.items.length>0?"mt-6":""})]})}),emptyField:bOe,title:"Фото",additionalTab:xD({onSubmitVideo:async d=>{await s({videos:[d.url,...n.dataObject.videos||[]],videos_gallery:[d.url,...n.dataObject.videos_gallery||[]]})},onUpdate:async d=>{await s(d||{})},options:{data:i,setModal:o,conditionModal:a,specialists:n.specialists,frames:n.frames,tags:n.tags,dataObject:n.dataObject},id:t.length?"video_add_gallery_id":0})})})}),_Oe={name:"",price:"",description:"",items:[]},JW=({data:t,setData:e,options:n={},sendingForm:s,dataVideos:i})=>{const[a,o]=v.useState(!1),l=(h,f)=>{const p=t.map(g=>g.id===f?{...g,items:[...cr([...h])]}:g);e(p)},c=(h,f)=>{const p=t.map(g=>g.id===h?{...g,items:[...cr([...g.items,...f])]}:g);e(p)},u=(h,f)=>{const p=t.map(g=>{if(g.id===h){const m=g.items.filter(_=>_.id!==f).map((_,y)=>({..._,id:y+1}));return{...g,items:m}}return g});e(p)},d=h=>({id:h.id,name:h.name,body:r.jsxs("div",{children:[r.jsx(Bo,{items:h.items,dataCurrentId:h.id,deleteItem:u,onChange:f=>l(f,h.id)}),r.jsx(ta,{addFiles:f=>c(h.id,f),className:h.items.length>0?"mt-6":""}),r.jsx($y,{className:"mt-4",maxLength:3e3,value:h.description,onChange:f=>{const p=t.map(g=>g.id===h.id?{...g,description:f}:g);e(p)},placeholder:"Описание к фотографии"}),r.jsx(kn,{className:"mt-4 max-w-[400px]",before:"Цена",after:"₽",onlyNumber:!0,convertNumber:!0,value:h.price,onChange:f=>{const p=t.map(g=>g.id===h.id?{...g,price:f}:g);e(p)}})]})});return r.jsx("div",{className:"white-block mt-4",children:r.jsx(mC,{data:t,setData:h=>e(h),structureTabs:d,emptyField:_Oe,title:"Отделка квартир",additionalTab:xD({onSubmitVideo:async h=>{await s({videos:[h.url,...n.dataObject.videos||[]],videos_apartRenov:[h.url,...n.dataObject.videos_apartRenov||[]]})},onUpdate:async h=>{await s(h||{})},options:{data:i,setModal:o,conditionModal:a,specialists:n.specialists,frames:n.frames,tags:n.tags,dataObject:n.dataObject},id:t.length?"video_add_apartRenov_id":0})})})},wOe={name:"",distance:"",description:"",items:[]},eG=({data:t,setData:e,options:n={},sendingForm:s,dataVideos:i})=>{const[a,o]=v.useState(!1),l=(h,f)=>{const p=t.map(g=>g.id===f?{...g,items:[...cr([...h])]}:g);e(p)},c=(h,f)=>{const p=t.map(g=>g.id===h?{...g,items:[...cr([...g.items,...f])]}:g);e(p)},u=(h,f)=>{const p=t.map(g=>{if(g.id===h){const m=g.items.filter(_=>_.id!==f).map((_,y)=>({..._,id:y+1}));return{...g,items:m}}return g});e(p)},d=h=>({id:h.id,name:h.name,body:r.jsxs("div",{children:[r.jsx(Bo,{items:h.items,dataCurrentId:h.id,deleteItem:u,onChange:f=>l(f,h.id)}),r.jsx(ta,{addFiles:f=>c(h.id,f),className:h.items.length>0?"mt-6":""}),r.jsx($y,{className:"mt-4",maxLength:3e3,value:h.description,onChange:f=>{const p=t.map(g=>g.id===h.id?{...g,description:f}:g);e(p)},placeholder:"Описание к фотографии"}),r.jsx(kn,{className:"mt-4 max-w-[400px]",before:"Расстояние от комплекса",after:"мин",onlyNumber:!0,convertNumber:!0,maxLength:4,value:h.distance,onChange:f=>{const p=t.map(g=>g.id===h.id?{...g,distance:f}:g);e(p)}})]})});return r.jsx("div",{className:"white-block mt-4",children:r.jsx(mC,{data:t,setData:h=>e(h),structureTabs:d,emptyField:wOe,title:"Экология и парки",additionalTab:xD({onSubmitVideo:async h=>{await s({videos:[h.url,...n.dataObject.videos||[]],videos_ecologyParks:[h.url,...n.dataObject.videos_ecologyParks||[]]})},onUpdate:async h=>{await s(h||{})},options:{data:i,setModal:o,conditionModal:a,specialists:n.specialists,frames:n.frames,tags:n.tags,dataObject:n.dataObject},id:t.length?"video_add_ecologyParks_id":0})})})};let sc=!1;const tG=({value:t="",setValue:e=()=>{},target:n=null,setGeoValue:s=()=>{},geoValue:i=[],currentCity:a})=>{const[o,l]=v.useState(!1),[c,u]=v.useState(""),[d,h]=v.useState(!1),[f,p]=v.useState([]),[g,m]=v.useState(null),_=v.useRef(null),[y,x]=v.useState(!1),[b,w]=v.useState(!1),[C,j]=v.useState(null);v.useEffect(()=>{const U=z=>{window.innerWidth<=1222||n&&!n.contains(z.target)&&(x(!1),sc=!1,p([]))};return document.addEventListener("click",U,{capture:!0}),()=>{document.removeEventListener("click",U,{capture:!0})}},[]);const E=v.useCallback(es(U=>{w(!1),u(U.value||"")},400),[]);v.useEffect(()=>{w(!0),sc=!0,o?E({value:t,isInit:o}):setTimeout(()=>{l(!0)},250)},[t,a==null?void 0:a.label]),v.useEffect(()=>{wm(hm).then(()=>h(!0))},[]),v.useEffect(()=>{!g||!(a!=null&&a.label)||g.setCenter(a.geo,10,{duration:500})},[a==null?void 0:a.label]);const T=()=>{try{ymaps.ready(()=>{const U=new ymaps.Map("customMap",{center:i.length?i:a.geo||[55.7558,37.6173],zoom:10,controls:[]});Sm(U,_),jm(U,_),i.length&&N(U,i),m(U)})}catch{}},N=(U,z)=>{if(!U)return;U.geoObjects.removeAll();const G=new ymaps.Placemark(z,{});U.geoObjects.add(G);const V=U.getZoom();U.setCenter(z,V>=18?V:18,{duration:500})};v.useEffect(()=>{d&&!g&&T()},[d,g]),v.useEffect(()=>{if(!(a!=null&&a.label)||!g||!d)return;x(!1),sc=!1,p([]);const U=z=>{const G=z.get("coords");N(g,G),s(G),ymaps.geocode(G,{results:1}).then(function(V){let Q=V.geoObjects.get(0).getAddressLine();Q=Q.split(",").slice(1).join(",").trim().replace(/, подъезд \d+/,""),x(!1),sc=!1,e(Q)})};return g.events.add("click",U),()=>{g&&g.events.remove("click",U)}},[a==null?void 0:a.label,g,d]),v.useEffect(()=>{g&&(c.length>0&&(a!=null&&a.label)?new ymaps.suggest(`${a==null?void 0:a.label}, ${c}`,{results:8}).then(U=>{const G=U.map(V=>{const J=V.value.split(",").slice(1).filter(Q=>!Q.includes("область")).join(",").trim().replace(/, подъезд \d+/,"");return{...V,value:J}}).reduce((V,J)=>V.find(Y=>Y.value===J.value)?V:V.concat([J]),[]).filter(V=>V.value);x(!0),sc=!0,p(G)}):(x(!1),sc=!1,p([])))},[c]);const P=U=>{x(!1),sc=!1,u(""),e(U.value),p([]),ymaps.geocode(`${a==null?void 0:a.label}, ${U.value}`,{boundedBy:[[55.5,30],[75,190]],results:1}).then(z=>{const V=z.geoObjects.get(0).geometry.getCoordinates();N(g,V),s(V)})},{styles:I,attributes:B}=Hk(n,C,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,5]}}]});return r.jsxs("div",{children:[y&&sc&&(b||f.length>1)?on.createPortal(r.jsxs("div",{ref:j,style:{...I.popper,width:n.clientWidth},...B.popper,className:`!z-[10000] ${Ln.SelectDropdown}`,children:[r.jsx("button",{type:"button",className:`${Ln.SelectClose} z-[999]`,onClick:()=>{x(!1),sc=!1,p([])},children:r.jsx(Pr,{})}),r.jsx("ul",{className:`w-auto ${Ln.SelectDropdownList} scrollbarPrimary ${b?"min-h-[50px]":""}`,children:b?r.jsx(fd,{className:"mx-auto"}):f.map((U,z)=>r.jsx("li",{onClick:()=>P(U),className:`${Ln.SelectDropdownItem}`,children:U.value},z))})]}),n):"",r.jsx("div",{id:"customMap",className:"remove-copyrights-pane relative w-full h-[650px] rounded-xl overflow-hidden",children:d&&g&&r.jsxs("div",{className:"ymap-actions-container",ref:_,children:[r.jsx("div",{className:"ymap-actions ymap-actions-group ymap-action-right-top",children:r.jsx("button",{type:"button",onClick:()=>Cm(g,_),className:"ymap-action ymap-action-btn",children:r.jsx($h,{})})}),r.jsxs("div",{className:"ymap-actions ymap-top-right-center ymap-actions-group ymap-actions-group-join",children:[r.jsx("button",{type:"button",onClick:()=>qh(g),className:"ymap-action",children:r.jsx(Ja,{className:"stroke-black"})}),r.jsx("button",{type:"button",onClick:()=>Wh(g),className:"ymap-action",children:r.jsx(Uh,{})})]})]})})]})},COe=(t={},e="default",n=!0)=>{const[s,i]=v.useState([]);return v.useEffect(()=>{if(!n)return;(async()=>{try{const o=await Me("/api/developers/all",t);if(e==="default"){i(o.data);return}if(e==="values"){i(o.data.map(l=>({label:l.name,value:l.id,avatar:l.photo})));return}}catch{}})()},[n]),{developers:s}},SOe=(t,e="default")=>{const[n,s]=v.useState([]);return v.useEffect(()=>{if(!t)return;(async()=>{try{const a=await Ue(`/api/building/${t}/specialists`);if(e==="default"){s(a.data);return}if(e==="values"){s(a.data.map(o=>({value:o.id,label:ks(o.name,o.surname),avatar:o.avatar})));return}}catch{}})()},[]),{specialists:n}},jOe=t=>{const[e,n]=v.useState([]);return v.useEffect(()=>{if(!t)return;(async()=>{try{const i=await Ue(`/api/building/${t}/frames`),a=Object.keys(i.data).map(o=>{const l=i.data[o];return{label:l,value:l}});n(a)}catch{}})()},[]),{frames:e}},hR=(t,e,n)=>{var u;const s=AH(n,e),i={...e,attributes:s,address:e.address,city:(u=e.city)==null?void 0:u.value,photos:t.photos.map(d=>({...d,items:d.items.filter(h=>h.image)})),apartRenov:t.apartRenov.map(d=>({...d,items:d.items.filter(h=>h.image)})),ecologyParks:t.ecologyParks.map(d=>({...d,items:d.items.filter(h=>h.image)})),geo:t.geo,complex:e.complex.replace(/^ЖК\s+'|'$/g,""),tags:e.tags.map(d=>d.value),stickers:e.stickers.map(d=>d.value),advantages:e.advantages.map(d=>d.value),videos:t.videos||[],shorts:t.shorts||[],videos_gallery:t.videos_gallery||[],videos_apartRenov:t.videos_apartRenov||[],videos_ecologyParks:t.videos_ecologyParks||[]};delete i.calculations,delete i.stock;const a=d=>d.map(h=>({...h,items:h.items.map(f=>{let p;return f.file?p={...f,image:hc(),new_image:!0}:p={...f,new_image:!1},p})})),o=d=>d.map(h=>({...h,items:h.items.map(f=>({id:f.id,image:f.image,new_image:f.new_image}))})),l=(d,h)=>{for(let f in d)d[f].items.forEach(g=>{g.new_image&&h.append(g.image,g.file)})};i.photos=a(i.photos),i.apartRenov=a(i.apartRenov),i.ecologyParks=a(i.ecologyParks);const c=new FormData;return l(i.photos,c),l(i.apartRenov,c),l(i.ecologyParks,c),i.photos=o(i.photos),i.apartRenov=o(i.apartRenov),i.ecologyParks=o(i.ecologyParks),c.append("data",JSON.stringify(i)),console.log(i),c},TOe={photos:[],apartRenov:[],ecologyParks:[],address:"",complex:"",geo:[],description:"",minPrice:"",cashback:"",cashbackSubscribe:"",recommendHome:!1,cashbackHome:!1},nG=(t,e="create")=>{const{handleSubmit:n,control:s,setValue:i,watch:a,formState:{errors:o}}=en(),[l,c]=v.useState([]),u=ue(Qs),d=v.useRef(null),h=v.useRef(null),f=a("city"),p=a("address"),g=v.useRef(null),[m,_]=v.useState(!0),[y,x]=v.useState(!1),[b,w]=v.useState(e==="create"?TOe:null),[C,j]=v.useState([]),[E,T]=v.useState([]),[N,P]=v.useState([]),[I,B]=v.useState([]),{tags:U}=pl({type:"tags"}),{tags:z}=pl({type:"stickers"}),{tags:G}=pl({type:"advantages"}),{tags:V}=pl({type:"advantages",building_id:t==null?void 0:t.id}),{developers:J}=COe({city:f==null?void 0:f.value},"values",(f==null?void 0:f.value)||!1),{frames:Q}=jOe(t==null?void 0:t.id),{specialists:Y}=SOe(t==null?void 0:t.id,"values"),oe=V.filter(ne=>ne.count),[he,me]=v.useState([]),[Oe,xe]=v.useState([]),[Pe,qe]=v.useState(null),[Ie,Ve]=v.useState([]),ot=async()=>{e==="edit"&&await Yh(t.id).then(ne=>{w(ne),x(!1)})},fe=async()=>{await Ue(`/admin-api/gift_groups/building/${t.id}`).then(ne=>{Ve(ne.data)}).catch(ne=>{})},$=async()=>{x(!0),await Ue(`/api/building/${t.id}/history`).then(ne=>{xe(ne.data),x(!1)})},X=async()=>{await Ue(`/api/special-condition/building/${t.id}`).then(ne=>{c(ne.data)})};v.useEffect(()=>{if(b&&!Ye(b)){if(b.gallery){const ne=b.gallery.map((ee,ge)=>{var q;return{id:ge+1,name:ee.title,items:((q=ee.images)==null?void 0:q.map((re,ie)=>({id:ie+1,image:re})))||[]}});j(ne)}if(b.apartmentRenov){const ne=b.apartmentRenov.map((ee,ge)=>{var q;return{id:ge+1,name:ee.title,description:ee.description,price:ee.price,items:((q=ee.images)==null?void 0:q.map((re,ie)=>({id:ie+1,image:re})))||[]}});T(ne)}if(b.ecologyParks){const ne=b.ecologyParks.map((ee,ge)=>{var q;return{id:ge+1,name:ee.title,description:ee.description,distance:ee.distance,items:((q=ee.images)==null?void 0:q.map((re,ie)=>({id:ie+1,image:re})))||[]}});P(ne)}}},[b==null?void 0:b.gallery]),v.useEffect(()=>{(async()=>{await ot(),await Ue("/api/object-types").then(ee=>{var q;me(ee.data.map(re=>({label:re.name,value:re.id})));const ge=(q=ee.data.find(re=>re.name==="Новостройки"))==null?void 0:q.id;Ue(`/api/type/${ge}`).then(re=>{qe(re.data.attributeComplex)})}),e==="edit"&&(await $(),await fe(),await X()),_(!1)})()},[]),v.useEffect(()=>{m||B(b.location)},[m]),v.useEffect(()=>{w({...b,apartRenov:E,photos:C,ecologyParks:N,geo:I})},[E,C,N,I]);const W=(ne,ee={reload:!0})=>{x(!0),e==="edit"&&Me(`/admin-api/update/object/${t.id}`,hR({...b,...ee.data},ne,Pe),{"Content-Type":"multipart/form-data"}).then(ge=>{ee.reload?window.location.reload():ot(),x(!1)}),e==="create"&&Me("/admin-api/create/object",hR(b,ne,Pe),{"Content-Type":"multipart/form-data"}).then(ge=>{x(!1),window.location.href=`${ht.objects.edit}${ge.data.id}`})};return{data:b,isLoading:m,isLoadingSend:y,sendingForm:async ne=>{x(!0),n(W)({data:ne,reload:!1})},constructItems:Oe,groupsPresent:Ie,specialCondition:l,tags:U,attributes:Pe,typeBuild:he,stickers:z,advantages:G,advantagesComplex:oe,developers:J,frames:Q,specialists:Y,onSubmitHandler:W,dataGeo:I,setDataGeo:B,citiesItems:u,addressInputWrapperRef:d,addressInputRef:h,watchCity:f,watchAddress:p,buttonSubmitRef:g,handleSubmit:n,control:s,setValue:i,errors:o,fetchDataGroupsPresents:fe,fetchDataBuilding:ot,fetchSpecialCondition:X,fetchHistory:$,setData:w,dataPhotos:C,setDataPhotos:j,dataRenov:E,setDataRenov:T,dataEcologyParks:N,setDataEcologyParks:P}},EOe=()=>{const{data:t,tags:e,attributes:n,typeBuild:s,stickers:i,advantages:a,developers:o,onSubmitHandler:l,dataGeo:c,setDataGeo:u,addressInputWrapperRef:d,addressInputRef:h,watchCity:f,watchAddress:p,buttonSubmitRef:g,handleSubmit:m,control:_,setValue:y,errors:x,dataPhotos:b,setDataPhotos:w,dataRenov:C,setDataRenov:j,dataEcologyParks:E,setDataEcologyParks:T,citiesItems:N}=nG(null,"create"),P=ue(Ci);return v.useEffect(()=>{P.id&&y("city",{value:P.id,label:P.name,geo:P.geo})},[P.id]),r.jsx($o.Provider,{value:t,children:r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsx("h2",{className:"title-2",children:"Создать комплекс"})}),r.jsx("div",{className:"mt-6",children:r.jsxs("form",{onSubmit:m(l),children:[r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Адрес"}),r.jsxs("div",{className:"text-primary400",children:[r.jsx("p",{children:"Укажите кликом нужное место на карте или переместите маркер чтобы изменить местоположение объекта."}),r.jsx("p",{children:"Или добавьте адрес в ручную."})]}),r.jsx("div",{className:"grid grid-cols-3 gap-2 mt-6 mb-2",children:r.jsx(Qe,{control:_,beforeText:"Комплекс",name:"complex",requiredValue:!0,errors:x})}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[r.jsx(fn,{control:_,nameLabel:"Город",options:N.map(I=>({geo:[I.latitude,I.longitude],label:I.name,value:I.id})),name:"city",requiredValue:!0,errors:x}),r.jsx("div",{ref:d,className:"col-span-2",children:r.jsx(Qe,{control:_,beforeText:"Улица, дом, корпус",requiredValue:!0,errors:x,name:"address",refInput:h})})]}),r.jsx(tG,{value:p,setValue:I=>y("address",I),target:d.current,refInput:h,geoValue:c,setGeoValue:u,currentCity:f})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsx("div",{className:"mb-4 grid grid-cols-3",children:r.jsx(Qe,{control:_,requiredValue:!0,errors:x,beforeText:"Срок сдачи",name:"deadline"})}),r.jsx("div",{children:n?r.jsx(r.Fragment,{children:n==null?void 0:n.map((I,B)=>r.jsxs("div",{className:"[&:not(:last-child)]:mb-6",children:[r.jsx("h3",{className:"title-3",children:I.name}),r.jsx("div",{className:"grid grid-cols-3 gap-6 mt-4",children:I.items.map((U,z)=>r.jsx(mD,{className:U.type!=="flag"?"col-span-full":"",nameOptions:"available-values",defaultValues:[],data:U,control:_},z))})]},B))}):""}),!!(f&&!Ye(f))&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Теги/стикеры"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(Es,{name:"tags",control:_,nameLabel:"Теги",setValue:y,options:e.filter(I=>I.city===f.label).map(I=>({value:I.id,label:I.name})),btnsActions:!0,search:!0}),r.jsx(Es,{name:"stickers",control:_,nameLabel:"Стикеры",setValue:y,options:i.filter(I=>I.city===f.label).map(I=>({value:I.id,label:I.name})),btnsActions:!0,search:!0}),r.jsx(Es,{name:"advantages",control:_,nameLabel:"Уникальные преимущества объекта",setValue:y,options:a.filter(I=>I.city===f.label).map(I=>({value:I.id,label:I.name})),btnsActions:!0,search:!0})]})]}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Тип недвижимости/застройщик"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(fn,{name:"type-build",control:_,nameLabel:"Тип недвижимости",options:s,requiredValue:!0,errors:x}),r.jsx(fn,{name:"developer",control:_,nameLabel:"Застройщик",options:o,requiredValue:!0,errors:x,search:!0})]})]})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Описание"}),r.jsx(bi,{control:_,maxLength:4e3,name:"description",placeholder:"Расскажите о недвижимости, транспортной доступности и инфраструктуре"})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Выводить на главную"}),r.jsxs("div",{className:"flex gap-8",children:[r.jsx(ps,{control:_,option:{label:"Определенно рекомендуем"},name:"recommend-home"}),r.jsx(ps,{control:_,option:{label:"Повышенный кешбэк"},name:"cashback-home"})]})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Цена"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(Qe,{control:_,beforeText:"Цена от",afterText:"₽",name:"priceFrom",convertNumber:!0,onlyNumber:!0,disabled:!0}),r.jsx(Qe,{control:_,beforeText:"Начислим за покупку",afterText:"%",name:"cashback",onlyNumberSemicolon:!0,maxLength:4}),r.jsx(Qe,{control:_,beforeText:"С мастер подпиской",afterText:"%",name:"cashbackSubscribe",onlyNumberSemicolon:!0,maxLength:4})]})]}),r.jsx(ZW,{data:b,setData:w}),r.jsx(JW,{data:C,setData:j}),r.jsx(eG,{data:E,setData:T})]}),r.jsx(Dl,{condition:{top:50,el:g},children:r.jsx("div",{className:"container py-2.5",children:r.jsx(_e,{type:"button",onClick:m(l),className:"w-full",children:"Сохранить"})})}),r.jsx("div",{ref:g,className:"container mt-8",children:r.jsx(_e,{type:"submit",className:"w-full",children:"Сохранить"})})]})})]})})})},NOe=({data:t,frames:e,id:n,dataObject:s,specialists:i,authorDefault:a,tags:o=[],sending:l=()=>{},sendingForm:c=()=>{}})=>{const[u,d]=v.useState(!1);return r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Ход строительства"}),r.jsx(jW,{data:t,isAdmin:!0,desktopLength:4,options:{frames:e,tags:o,dataObject:s,specialists:i,authorDefault:a,onUpdate:async h=>{await c(h||{})}},sending:l}),r.jsx(_e,{type:"button",className:`w-full ${t.length>0?"mt-6":""}`,onClick:()=>d(!0),children:"Создать"}),r.jsx(Ze,{condition:u,children:r.jsx(SW,{conditionModal:u,setModal:d,options:{frames:e,tags:o,dataObject:s,specialists:i,authorDefault:a,onUpdate:async h=>{await c(h||{})}},sending:l})})]})},kOe=({dataObject:t,fetchData:e,specialists:n=[],frames:s=[],authorDefault:i})=>{const a=Mn(),[o,l]=v.useState(!1),[c,u]=v.useState(!1),[d,h]=v.useState(!1),[f,p]=v.useState(!1),[g,m]=v.useState(!1),[_,y]=v.useState(!1),x=(T,N,P,I)=>{const B={...T,building_id:a.id},U=new FormData;B.image=ts(B.image),ss(B.image,U),B.image=ns(B.image),B.image=B.image[0],B.is_banner&&(B.banner_image=ts(B.banner_image),ss(B.banner_image,U),B.banner_image=ns(B.banner_image),B.banner_image=B.banner_image[0]),U.append("data",JSON.stringify(B)),console.log(B),Me(`/admin-api/${P==="create"?`building/${a.id}/promo/create`:`promo/${I}/update`}`,U,{"Content-Type":"multipart/form-data"}).then(z=>{Me(`/admin-api/assign/promo/${z.data.id}/apartments`,{apartments_ids:B.apartments_ids}).then(G=>{N(),e(),p(!1),m(!1),y(!1),l(!1),u(!1),h(!1)})}).catch(z=>{})},b=(T,N,P,I)=>{x(T,N,P,I)},w=(T,N,P,I)=>{x({...T,is_calculation:!0},N,P,I)},C=(T,N,P,I)=>{x({...T,is_news:!0},N,P,I)},j=({data:T,editItem:N})=>{if(!(!T||T.length===0))return r.jsxs(Xs,{modules:[xi],slidesPerView:T.length>1?1.05:1,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:16,breakpoints:{799:{slidesPerView:2,spaceBetween:24},1222:{slidesPerView:3,spaceBetween:24}},className:"md1:px-4 md1:-mx-4",children:[T.map((P,I)=>r.jsx(Tn,{children:r.jsx(ww,{...P,developer:t.developer,deleteCard:e,editCard:()=>N(P),controlsAdmin:!0})},I)),r.jsx(ho,{disabled:!0,className:"slider-btn-prev !absolute top-[95px] right-4"}),r.jsx(fo,{className:"slider-btn-next !absolute top-[95px] right-4"})]})},E=[{name:"Скидки, акции",body:r.jsxs("div",{children:[r.jsx(j,{data:t.stock,editItem:l}),r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>p(!0),children:"Создать скидку"})]}),count:t.stock.length},{name:"Расчёты",body:r.jsxs("div",{children:[r.jsx(j,{data:t.calculations,editItem:u}),r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>m(!0),children:"Создать расчёт"})]}),count:t.calculations.length},{name:"Подарки",body:r.jsxs("div",{children:[r.jsx(j,{data:t.news,editItem:h}),r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>y(!0),children:"Создать новость о подарке"})]}),count:t.news.length}];return r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Скидки, подарки, расчёты"}),r.jsx(Uo,{data:E}),r.jsx(Ze,{condition:f,children:r.jsx(Hd,{conditionModal:f,setModal:p,specialists:n,dataObject:t,frames:s,options:{title:"Создать скидку",onSubmitForm:b},authorDefault:i})}),r.jsx(Ze,{condition:g,children:r.jsx(Hd,{conditionModal:g,setModal:m,specialists:n,dataObject:t,frames:s,options:{title:"Создать расчёт",onSubmitForm:w},authorDefault:i})}),r.jsx(Ze,{condition:_,children:r.jsx(Hd,{conditionModal:_,setModal:y,specialists:n,dataObject:t,frames:s,options:{title:"Создать новость о подарке",onSubmitForm:C},authorDefault:i})}),r.jsx(Ze,{condition:o,children:r.jsx(Hd,{conditionModal:o!==!1,setModal:l,specialists:n,dataObject:t,values:o,frames:s,type:"edit",options:{title:"Редактировать скидку",onSubmitForm:b},authorDefault:i})}),r.jsx(Ze,{condition:c,children:r.jsx(Hd,{conditionModal:c!==!1,setModal:u,specialists:n,dataObject:t,values:c,type:"edit",frames:s,options:{title:"Редактировать расчёт",onSubmitForm:w},authorDefault:i})}),r.jsx(Ze,{condition:d,children:r.jsx(Hd,{conditionModal:d!==!1,setModal:h,specialists:n,dataObject:t,values:d,type:"edit",frames:s,options:{title:"Редактировать новость о подарке",onSubmitForm:C},authorDefault:i})})]})},eT=[{label:"По сумме",value:"typeSum"},{label:"По Количеству",value:"typeQuantity"}],d1=({mainData:t,conditionModal:e,setModal:n,frames:s,fetchData:i,edit:a=!1,defaultValues:o=null,title:l,type:c="main"})=>{const{handleSubmit:u,control:d,setValue:h,watch:f,reset:p,formState:{errors:g}}=en(),[m,_]=v.useState(o!=null&&o.filters_info?JSON.parse(o==null?void 0:o.filters_info):Nm),[y,x]=v.useState([]),b=f("typeSum"),w=f("typeQuantity"),C=()=>r.jsx(Sr,{set:n,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:l})}),j=()=>r.jsx("div",{className:"px-14 py-6",children:r.jsx(_e,{onClick:u(E),className:"w-full",children:"Сохранить"})}),E=T=>{if(y.length===0)return;const N={building_id:t.id,filtersInfo:JSON.stringify(m)};if(c==="main"){if(N.type=T.typeSum?"sum":T.typeQuantity?"quantity":null,!N.type)return;N.type==="sum"&&(N.max_sum=T.sum.replace(/ /g,"")),N.type==="quantity"&&(N.count=T.count.replace(/ /g,""),N.sum=T.max_sum.replace(/ /g,""))}else N.is_main_group=!0;N.included_apartments=y.map(P=>P.value),a?lse(`/admin-api/gift_group/${o.id}`,N).then(P=>{i().then(()=>{p(),n(!1)})}):Me("/admin-api/gift_group",N).then(P=>{i().then(()=>{p(),n(!1)})})};return r.jsxs(gt,{set:n,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:e,style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1150px"},closeBtn:!1,ModalHeader:C,ModalFooter:j,children:[c==="main"&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"title-3",children:"Выберите тип"}),r.jsx("div",{className:"mt-4 flex items-center gap-8",children:r.jsx(km,{control:d,setValue:h,checkboxes:eT,defaultValue:a&&o?o.count?eT.find(T=>T.value==="typeQuantity"):eT.find(T=>T.value==="typeSum"):{}})}),b&&r.jsx("div",{className:"flex gap-2 mt-4",children:r.jsx(Qe,{control:d,beforeText:"Введите сумму",onlyNumber:!0,convertNumber:!0,afterText:"₽",name:"sum",requiredValue:!0,errors:g,defaultValue:a&&(o!=null&&o.max_sum)?pt(o.max_sum||0):""})}),w&&r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx(Qe,{control:d,beforeText:"Введите количество",onlyNumber:!0,afterText:"шт.",name:"count",maxLength:3,requiredValue:!0,errors:g,defaultValue:a&&(o!=null&&o.count)?o.count:""}),r.jsx(Qe,{control:d,beforeText:"Введите максимальную сумму",afterText:"₽",name:"max_sum",onlyNumber:!0,convertNumber:!0,requiredValue:!0,errors:g,defaultValue:a&&(o!=null&&o.sum)?pt(o.sum||0):""})]})]}),r.jsx(Fm,{building_id:t.id,frames:s,setData:x,defaultValue:o?o.included_apartments:[],filterFields:m,setFilterFields:_})]})},AOe=({conditionModal:t,setModal:e,groupData:n,fetchData:s,specialists:i=[],developer:a={},firstPresent:o={}})=>{const{handleSubmit:l,control:c,formState:{errors:u}}=en(),[d,h]=v.useState([]),[f,p]=v.useState([]),g=()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:"Создать подарок"})}),m=()=>r.jsx("div",{className:"px-14 py-6",children:r.jsx(_e,{onClick:l(_),className:"w-full",children:"Сохранить"})}),_=y=>{const x={name:y.name,dateStart:y.dateStart,dateEnd:y.dateEnd,descr:y.descr,details:y.details,old_price:y.old_price,new_price:y.new_price,image:d,pdf:f,group_id:n.id,building_id:n.building_id,author_id:y.author?y.author.value:null},b=new FormData;x.image.length>0?(x.image=ts(x.image),ss(x.image,b),x.image=ns(x.image),x.image=x.image[0]):x.image=null,x.pdf.length>0?(x.pdf=ts(x.pdf,"file","pdf"),ss(x.pdf,b,"file","pdf"),x.pdf=ns(x.pdf,"file","pdf"),x.pdf=x.pdf[0]):x.pdf=null,b.append("data",JSON.stringify(x)),console.log(x);for(let w of b.entries())console.log(w[0]+": "+w[1]);Me("/admin-api/gift/create",b,{"Content-Type":"multipart/form-data"}).then(w=>{s()})};return r.jsx(gt,{set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:t,style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1070px"},closeBtn:!1,ModalHeader:g,ModalFooter:m,children:r.jsxs("form",{children:[r.jsx("h3",{className:"title-3 mb-4",children:"Общая информация"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Qe,{control:c,beforeText:"Название",name:"name",requiredValue:!0,errors:u}),r.jsx(fn,{control:c,nameLabel:"Автор",defaultOption:!0,placeholderName:a?`${a.pos} ${a.name}`:"Не выбрано",options:i,name:"author",disabled:!Ye(o)}),r.jsx(Qe,{control:c,datePicker:!0,beforeText:"Начало",name:"dateStart",requiredValue:!0,errors:u,defaultValue:Ye(o)?"":ct(o.start_date).format("DD.MM.YYYY"),disabled:!Ye(o)}),r.jsx(Qe,{control:c,datePicker:!0,beforeText:"Окончание",name:"dateEnd",requiredValue:!0,errors:u,defaultValue:Ye(o)?"":ct(o.end_date).format("DD.MM.YYYY"),disabled:!Ye(o)}),r.jsx(Qe,{control:c,beforeText:"Старая цена",name:"old_price",convertNumber:!0,onlyNumber:!0,maxLength:11}),r.jsx(Qe,{control:c,beforeText:"Новая цена",name:"new_price",convertNumber:!0,onlyNumber:!0,maxLength:11,requiredValue:!0,errors:u})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Описание"}),r.jsx(bi,{control:c,maxLength:3e3,name:"descr",placeholder:"Описание"})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Дополнительная информация"}),r.jsx(bi,{control:c,maxLength:3e3,name:"details",placeholder:"Введите дополнительную информацию"})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Изображение"}),r.jsx(Bo,{items:d,deleteItem:()=>h([])}),r.jsx(ta,{addFiles:y=>h(cr([...y])),multiple:!1,className:`${d.length>0?"mt-6":""} mb-4`})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Добавить спецификацию"}),f.length>0&&r.jsx("div",{className:"grid grid-cols-4 gap-4 mb-4",children:r.jsx(qA,{src:window.URL.createObjectURL(f[0].file),deleteItem:()=>p([])})}),r.jsx(ta,{addFiles:y=>p(kA([...y])),multiple:!1,className:`${f.length>0?"mt-6":""} mb-4`,acceptType:{"application/pdf":[]},textBtn:"Выберите PDF"})]})]})})},DOe=({conditionModal:t,setModal:e,groupData:n,fetchData:s,specialists:i=[],developer:a={},defaultValues:o={}})=>{const{handleSubmit:l,control:c,formState:{errors:u}}=en(),[d,h]=v.useState(o.image?[{id:1,image:o.image}]:[]),[f,p]=v.useState(o.specs?[{id:1,pdf:o.specs}]:[]),g={"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1070px"},m=()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:"Редактировать подарок"})}),_=()=>r.jsx("div",{className:"px-14 py-6",children:r.jsx(_e,{onClick:l(y),className:"w-full",children:"Сохранить"})}),y=x=>{const b={name:x.name,dateStart:x.dateStart,dateEnd:x.dateEnd,descr:x.descr,details:x.details,old_price:x.old_price,new_price:x.new_price,image:d,pdf:f,group_id:n.id,building_id:n.building_id,author_id:x.author?x.author.value:null},w=new FormData;b.image.length>0&&(b.image=ts(b.image),ss(b.image,w),b.image=ns(b.image),b.image=b.image[0]),b.pdf.length>0?(b.pdf=ts(b.pdf,"file","pdf"),ss(b.pdf,w,"file","pdf"),b.pdf=ns(b.pdf,"file","pdf"),b.pdf=b.pdf[0]):b.pdf=null,w.append("data",JSON.stringify(b)),console.log(b);for(let C of w.entries())console.log(C[0]+": "+C[1]);Me(`/admin-api/gift/${o.id}/update`,w,{"Content-Type":"multipart/form-data"}).then(C=>{s()})};return r.jsx(gt,{set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:t,style:g,closeBtn:!1,ModalHeader:m,ModalFooter:_,children:r.jsxs("form",{children:[r.jsx("h3",{className:"title-3 mb-4",children:"Общая информация"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Qe,{control:c,beforeText:"Название",name:"name",requiredValue:!0,errors:u,defaultValue:o.name||""}),r.jsx(fn,{control:c,nameLabel:"Автор",defaultOption:!0,placeholderName:a?`${a.pos} ${a.name}`:"Не выбрано",options:i,name:"author",defaultValue:i.find(x=>x.value===o.author_id),disabled:!!i.find(x=>x.value===o.author_id)}),r.jsx(Qe,{control:c,datePicker:!0,beforeText:"Начало",name:"dateStart",requiredValue:!0,errors:u,defaultValue:o.start_date?ct(o.start_date).format("DD.MM.YYYY"):""}),r.jsx(Qe,{control:c,datePicker:!0,beforeText:"Окончание",name:"dateEnd",requiredValue:!0,errors:u,defaultValue:o.end_date?ct(o.end_date).format("DD.MM.YYYY"):""}),r.jsx(Qe,{control:c,beforeText:"Старая цена",name:"old_price",convertNumber:!0,onlyNumber:!0,maxLength:11,defaultValue:o.old_price||0}),r.jsx(Qe,{control:c,beforeText:"Новая цена",name:"new_price",convertNumber:!0,onlyNumber:!0,maxLength:11,requiredValue:!0,errors:u,defaultValue:o.new_price||0})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Описание"}),r.jsx(bi,{control:c,maxLength:3e3,name:"descr",placeholder:"Описание",defaultValue:o.description||""})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Дополнительная информация"}),r.jsx(bi,{control:c,maxLength:3e3,name:"details",placeholder:"Введите дополнительную информацию",defaultValue:o.details||""})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Изображение"}),r.jsx(Bo,{items:d,deleteItem:()=>h([])}),r.jsx(ta,{addFiles:x=>h(cr([...x])),multiple:!1,className:`${d.length>0?"mt-6":""} mb-4`})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Добавить спецификацию"}),f.length>0&&r.jsx("div",{className:"grid grid-cols-4 gap-4 mb-4",children:r.jsx(qA,{src:f[0].pdf||window.URL.createObjectURL(f[0].file),deleteItem:()=>p([])})}),r.jsx(ta,{addFiles:x=>p(kA([...x])),multiple:!1,className:`${f.length>0?"mt-6":""} mb-4`,acceptType:{"application/pdf":[]},textBtn:"Выберите PDF"})]})]})})},fR=({conditionModal:t,setModal:e,defaultValues:n=null,specialists:s=[],developer:i=[]})=>{const[a,o]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState(!1),[h,f]=v.useState(!1),p={"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1070px"};v.useEffect(()=>{Ue(`/admin-api/group/${n.id}/gifts`).then(x=>{c(x.data),o(!1)})},[]);const g=()=>r.jsx(d4,{className:"absolute inset-0 flex flex-col items-center justify-center",classNameSpinner:"!w-[60px] !h-[60px]",children:r.jsx("span",{className:"mt-8 text-bigSmall",children:"Загрузка..."})}),m=()=>r.jsx(Sr,{set:e,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:"Подарки группы"})}),_=()=>r.jsx("div",{className:"px-14 py-6 grid grid-cols-[1fr_max-content] gap-2",children:r.jsx(_e,{onClick:()=>d(!0),className:"w-full",children:"Создать подарок"})}),y=x=>{Me(`/admin-api/gift/${x}/delete`).then(b=>{Ue(`/admin-api/group/${n.id}/gifts`).then(w=>{c(w.data)})})};return r.jsxs(r.Fragment,{children:[r.jsx(gt,{set:e,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:t,style:p,closeBtn:!1,ModalHeader:m,ModalFooter:_,ModalChildren:a&&g,children:r.jsx("div",{className:"mb-6",children:l.length?r.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map((x,b)=>v.createElement(XE,{...x,deleteCard:()=>y(x.id),editCard:()=>f(x),key:b,controls:!0}))}):r.jsx("span",{className:"text-primary400",children:"Вы пока не добавили ни одного подарка"})})}),r.jsx(Ze,{condition:u,children:r.jsx(AOe,{conditionModal:u,setModal:d,groupData:n,fetchData:()=>{Ue(`/admin-api/group/${n.id}/gifts`).then(x=>{c(x.data),d(!1)})},specialists:s,developer:i,firstPresent:l[0]})}),r.jsx(Ze,{condition:h,children:r.jsx(DOe,{conditionModal:h!==!1,setModal:f,groupData:n,fetchData:()=>{Ue(`/admin-api/group/${n.id}/gifts`).then(x=>{c(x.data),f(!1)})},specialists:s,developer:i,defaultValues:h})})]})},POe=({data:t,frames:e,fetchData:n,groupsData:s=[],specialists:i=[]})=>{const[a,o]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!1),[h,f]=v.useState(!1),p=_=>{Sk(`/admin-api/gift_group/${_}`).then(()=>{n()})},g=({currentData:_})=>{if(_)return r.jsxs("div",{className:"mb-8",children:[_.length>0?r.jsx(Xs,{modules:[xi],slidesPerView:3.5,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:16,className:"md1:px-4 md1:-mx-4",children:_.map((y,x)=>r.jsx(Tn,{children:r.jsxs("article",{className:"rounded-lg bg-primary700 h-[150px] p-6 group",children:[r.jsx("div",{className:"CardLinkElement",onClick:()=>f(y)}),r.jsx("h4",{className:"title-4 mb-2",children:y.count?"По Количеству":"По сумме"}),r.jsxs("p",{children:["Максимальная сумма: ",pt(y.sum||y.max_sum||0)," ₽"]}),y.count?r.jsxs("p",{className:"mt-1",children:["Максимальное кол-во: ",pt(y.count||0)," шт."]}):"",r.jsxs("p",{className:"mt-1",children:["Количество подарков: ",pt(y.gift_count||0)]}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-4 right-14 group-hover:opacity-100 group-hover:visible`,onClick:()=>d(y),children:r.jsx(Ns,{width:15,height:15,className:"stroke-blue stroke-[1.5px]"})}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-4 right-4 group-hover:opacity-100 group-hover:visible`,onClick:()=>p(y.id),children:r.jsx(un,{width:15,height:15,className:"fill-red"})})]})},x))}):r.jsx("span",{className:"text-primary400",children:"Вы пока не добавили ни одной группы"}),r.jsx(Ze,{condition:u,children:r.jsx(d1,{conditionModal:u!==!1,setModal:d,mainData:t,frames:e,fetchData:n,edit:!0,defaultValues:u,title:"Редактировать группу подарков по типу"})}),r.jsx(Ze,{condition:h,children:r.jsx(fR,{conditionModal:h!==!1,setModal:f,mainData:t,defaultValues:h,specialists:i,developer:t.developer})})]})},m=({currentData:_})=>{if(_)return r.jsxs("div",{className:"mb-8",children:[_.length>0?r.jsx(Xs,{modules:[xi],slidesPerView:3.5,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:16,className:"md1:px-4 md1:-mx-4",children:_.map((y,x)=>r.jsx(Tn,{children:r.jsxs("article",{className:"rounded-lg bg-primary700 h-[150px] p-6 group",children:[r.jsx("div",{className:"CardLinkElement",onClick:()=>f(y)}),r.jsxs("p",{className:"mt-1",children:["Количество подарков: ",pt(y.gift_count||0)]}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-4 right-14 group-hover:opacity-100 group-hover:visible`,onClick:()=>d(y),children:r.jsx(Ns,{width:15,height:15,className:"stroke-blue stroke-[1.5px]"})}),r.jsx("button",{type:"button",className:`${wn.DragDropImageIcon} top-4 right-4 group-hover:opacity-100 group-hover:visible`,onClick:()=>p(y.id),children:r.jsx(un,{width:15,height:15,className:"fill-red"})})]})},x))}):r.jsx("span",{className:"text-primary400",children:"Вы пока не добавили ни одной группы"}),r.jsx(Ze,{condition:u,children:r.jsx(d1,{conditionModal:u!==!1,setModal:d,mainData:t,frames:e,fetchData:n,edit:!0,defaultValues:u,title:"Редактировать группу подарков",type:"second"})}),r.jsx(Ze,{condition:h,children:r.jsx(fR,{conditionModal:h!==!1,setModal:f,mainData:t,defaultValues:h,specialists:i,developer:t.developer})})]})};return r.jsxs("div",{className:"white-block mt-4",children:[r.jsxs(U7,{className:"mb-6",children:[r.jsx("h2",{className:"title-2",children:"Подарки"}),r.jsx("span",{children:"(группы подарков)"})]}),r.jsx(Uo,{data:[{name:"Основные группы подарков",body:r.jsxs(r.Fragment,{children:[r.jsx(m,{currentData:s.filter(_=>_.is_main_group)}),r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>c(!0),children:"Создать группу подарков"}),r.jsx(d1,{conditionModal:l,setModal:c,mainData:t,frames:e,fetchData:n,title:"Создать группу подарков",type:"second"})]}),count:s.filter(_=>_.is_main_group).length},{name:"Дополнительные группы подарков по типу",body:r.jsxs(r.Fragment,{children:[r.jsx(g,{currentData:s.filter(_=>!_.is_main_group)}),r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>o(!0),children:"Создать группу подарков по типу"}),r.jsx(d1,{conditionModal:a,setModal:o,mainData:t,frames:e,fetchData:n,title:"Создать группу подарков по типу"})]}),count:s.filter(_=>!_.is_main_group).length}]})]})},IOe=({dataObject:t,sendingForm:e,frames:n=[],specialists:s=[],tags:i=[],setData:a,authorDefault:o})=>{const l=Mn(),[c,u]=v.useState(!1),[d,h]=v.useState(!1),[f,p]=v.useState(!1),[g,m]=v.useState(!1),[_,y]=v.useState(!1),[x,b]=v.useState({videos:[],shorts:[]});v.useEffect(()=>{(async()=>{const T=t.videos.length?await Ue("/api/video-url",{url:t.videos}).then(P=>P.data):[],N=t.shorts.length?await Ue("/api/video-url",{url:t.shorts}).then(P=>P.data):[];b(o?{videos:T.filter(P=>P.author&&P.author.id===o),shorts:N.filter(P=>P.author&&P.author.id===o)}:{videos:T,shorts:N})})()},[t.videos,t.shorts]);const w=async E=>{E.url&&(E.is_short?await e({shorts:[E.url,...t.shorts||[]]}):await e({videos:[E.url,...t.videos||[]]}))},C=(E,T,N)=>{const P=[...T].map(B=>E.find(U=>U.id===B.id)),I={};P.forEach((B,U)=>{I[B.item]=U}),b(B=>({...B,[N]:[...x[N]].sort((U,z)=>I[U.video_url]-I[z.video_url])})),a(B=>({...B,[N]:P.map(U=>U.item)}))},j=E=>{Me(`/admin-api/building/${t.id}/unlink-video/${E.id}`).then(T=>{e({videos:t.videos.filter(N=>N!==E.url),shorts:t.shorts.filter(N=>N!==E.url),videos_apartRenov:t.videos_apartRenov.filter(N=>N!==E.url),videos_ecologyParks:t.videos_ecologyParks.filter(N=>N!==E.url),videos_gallery:t.videos_gallery.filter(N=>N!==E.url)})})};return r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Видео"}),r.jsx(Uo,{data:[{name:"Видео",body:r.jsxs("div",{children:[x.videos.length?r.jsx(x8,{items:x.videos.map((E,T)=>r.jsx($i,{data:E,developer:t.developer,controlsAdmin:!0,deleteCard:N=>j(N),edit:N=>h(N)},T+1)),className:"grid grid-cols-4 gap-4",onChange:E=>C(t.videos.map((T,N)=>({id:N+1,item:T})),E,"videos")}):r.jsx("span",{className:"text-primary400",children:"Вы пока не добавили ни одного видео"}),r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>u(!0),children:"Создать Видео"})]}),count:x.videos.length},{name:"Клипы",body:r.jsxs("div",{children:[x.shorts.length?r.jsx(x8,{items:x.shorts.map((E,T)=>r.jsx($i,{data:E,developer:t.developer,controlsAdmin:!0,deleteCard:N=>j(N),edit:N=>m(N)},T+1)),className:"grid grid-cols-4 gap-4",onChange:E=>C(t.shorts.map((T,N)=>({id:N+1,item:T})),E,"shorts")}):r.jsx("span",{className:"text-primary400",children:"Вы пока не добавили ни одного Клипа"}),r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>p(!0),children:"Создать Клип"})]}),count:x.shorts.length}]}),r.jsx(a2,{conditionModal:c,setModal:u,options:{onSubmitForm:w,frames:n,tags:i,authorDefault:o,is_short:!1,specialists:s,building_id:l.id,developer:t.developer},sending:e,sendingError:()=>{y(!0)}}),r.jsx(a2,{conditionModal:f,setModal:p,options:{onSubmitForm:w,frames:n,tags:i,authorDefault:o,is_short:!0,specialists:s,building_id:l.id,developer:t.developer},sending:e,sendingError:()=>{y(!0)}}),r.jsx(Ze,{condition:d,children:r.jsx(sm,{conditionModal:!!d,setModal:h,options:{onSubmitForm:w,frames:n,tags:i,authorDefault:o,is_short:!1,specialists:s,building_id:l.id,developer:t.developer,currentVideoData:{url:d.video_url}},sending:e,sendingError:()=>{y(!0)}})}),r.jsx(Ze,{condition:g,children:r.jsx(sm,{conditionModal:!!g,setModal:m,options:{onSubmitForm:w,frames:n,tags:i,authorDefault:o,is_short:!0,specialists:s,building_id:l.id,developer:t.developer,currentVideoData:{url:g.video_url}},sending:e,sendingError:()=>{y(!0)}})}),_&&on.createPortal(r.jsxs(yi,{show:_,set:y,onClose:()=>y(!1),classListRoot:"min-w-[300px] !pt-6",children:[r.jsx("p",{className:"font-medium text-defaultMax",children:"Произошла ошибка."}),r.jsx("p",{className:"mt-0.5",children:"Повторите попытку позже или напишите нам"})]}),document.getElementById("overlay-wrapper"))]})},MOe=({dataObject:t,specialCondition:e=[],fetchData:n})=>{const[s,i]=v.useState(!1),{handleSubmit:a,control:o,reset:l,setError:c,watch:u,formState:{errors:d}}=en(),[h,f]=v.useState([]),[p,g]=v.useState([]),m=b=>{const w={...b,image:p,pdf:h},C=new FormData;w.image.length>0&&(w.image=ts(w.image),ss(w.image,C),w.image=ns(w.image),w.image=w.image[0]),w.pdf.length>0&&(w.pdf=ts(w.pdf,"file","pdf"),ss(w.pdf,C,"file","pdf"),w.pdf=ns(w.pdf,"file","pdf"),w.pdf=w.pdf[0]),C.append("data",JSON.stringify(w)),console.log(w);for(let j of C.entries())console.log(j[0]+": "+j[1]);Me(`/admin-api/special-condition/building/${t.id}/add`,C,{"Content-Type":"multipart/form-data"}).then(j=>{i(!1),n()})},_=b=>{Me(`/admin-api/special-condition/building/${t.id}/delete/${b}`).then(w=>{n()})},y=()=>r.jsx(Sr,{set:i,className:"px-10 py-6 mb-8",children:r.jsx("h2",{className:"title-2",children:"Создать специальное условие"})}),x=()=>r.jsx("div",{className:"px-14 py-6",children:r.jsx(_e,{onClick:a(m),className:"w-full",children:"Сохранить"})});return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Специальные условия"}),r.jsx("div",{className:"mb-8",children:e.length?r.jsxs(Xs,{modules:[xi],slidesPerView:e.length>1?1.05:1,navigation:{prevEl:".slider-btn-prev",nextEl:".slider-btn-next"},spaceBetween:16,breakpoints:{799:{slidesPerView:2,spaceBetween:24},1222:{slidesPerView:3,spaceBetween:24}},className:"md1:px-4 md1:-mx-4",children:[e.map((b,w)=>r.jsx(Tn,{className:"group",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xu,{onClick:()=>{_(b.id)},variant:"absolute",className:"group-hover:opacity-100 group-hover:visible"}),r.jsx("div",{className:"bg-primary100 p-8 rounded-xl font-medium text-defaultMax",children:b.name})]})},w)),r.jsx(ho,{disabled:!0,className:"slider-btn-prev !absolute top-[95px] left-4"}),r.jsx(fo,{className:"slider-btn-next !absolute top-[95px] right-4"})]}):r.jsx("span",{className:"text-primary400",children:"Вы пока не добавили ни одного условия"})}),r.jsx(_e,{type:"button",className:"w-full mt-8",onClick:()=>i(!0),children:"Создать условие"})]}),r.jsx(Ze,{condition:s,children:r.jsx(gt,{set:i,options:{modalClassNames:"HeaderSticky",modalContentClassNames:"flex flex-col !py-0 !px-10 md1:!px-4"},condition:s,style:{"--modal-space":"40px","--modal-height":"calc(var(--vh) - 80px)","--modal-width":"1070px"},closeBtn:!1,ModalHeader:y,ModalFooter:x,children:r.jsxs("form",{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Qe,{control:o,beforeText:"Название",name:"name",requiredValue:!0,errors:d}),r.jsx(Qe,{control:o,beforeText:"Ссылка на скидку/новость",name:"link"})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Изображение"}),r.jsx(Bo,{items:p,deleteItem:()=>g([])}),r.jsx(ta,{addFiles:b=>g(cr([...b])),multiple:!1,className:`${p.length>0?"mt-6":""} mb-4`})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Добавить спецификацию"}),h.length>0&&r.jsx("div",{className:"grid grid-cols-4 gap-4 mb-4",children:r.jsx(qA,{src:h[0].pdf||window.URL.createObjectURL(h[0].file),deleteItem:()=>f([])})}),r.jsx(ta,{addFiles:b=>f(kA([...b])),multiple:!1,className:`${h.length>0?"mt-6":""} mb-4`,acceptType:{"application/pdf":[]},textBtn:"Выберите PDF"})]})]})})})]})},OOe=()=>{var Ie,Ve,ot,fe;const t=Mn(),{data:e,isLoading:n,isLoadingSend:s,sendingForm:i,constructItems:a,groupsPresent:o,specialCondition:l,tags:c,attributes:u,typeBuild:d,stickers:h,advantages:f,advantagesComplex:p,developers:g,frames:m,specialists:_,onSubmitHandler:y,dataGeo:x,setDataGeo:b,citiesItems:w,addressInputWrapperRef:C,addressInputRef:j,watchCity:E,watchAddress:T,buttonSubmitRef:N,handleSubmit:P,control:I,setValue:B,errors:U,fetchDataGroupsPresents:z,fetchDataBuilding:G,fetchSpecialCondition:V,fetchHistory:J,setData:Q,dataPhotos:Y,setDataPhotos:oe,dataRenov:he,setDataRenov:me,dataEcologyParks:Oe,setDataEcologyParks:xe}=nG(t,"edit"),[Pe,qe]=v.useState(!1);if(!n)return r.jsxs($o.Provider,{value:e,children:[r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsxs("div",{className:"container flex justify-between",children:[r.jsxs("h2",{className:"title-2",children:["Редактирование комплекса ",e.title]}),r.jsxs(h4,{className:"!px-0",onClick:()=>qe(t.id),children:[r.jsx(un,{width:16,height:16,className:"!fill-red"}),r.jsx("span",{className:"text-dark font-medium",children:"Удалить комплекс"})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("form",{onSubmit:P($=>y($)),className:s?"pointer-events-none":"",children:[r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Адрес"}),r.jsxs("div",{className:"text-primary400",children:[r.jsx("p",{children:"Укажите кликом нужное место на карте или переместите маркер чтобы изменить местоположение объекта."}),r.jsx("p",{children:"Или добавьте адрес в ручную."})]}),r.jsx("div",{className:"grid grid-cols-3 gap-2 mt-6 mb-2",children:r.jsx(Qe,{control:I,beforeText:"Комплекс",name:"complex",defaultValue:e==null?void 0:e.title})}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[r.jsx(fn,{control:I,nameLabel:"Город",options:w.map($=>({geo:[$.latitude,$.longitude],label:$.name,value:$.id})),defaultValue:w.map($=>({geo:[$.latitude,$.longitude],label:$.name,value:$.id})).find($=>$.label===e.city),name:"city",requiredValue:!0,errors:U}),r.jsx("div",{ref:C,className:"col-span-2",children:r.jsx(Qe,{control:I,beforeText:"Улица, дом, корпус",name:"address",requiredValue:!0,errors:U,defaultValue:e==null?void 0:e.address,refInput:j})})]}),r.jsx(tG,{value:T,setValue:$=>B("address",$),target:C.current,refInput:j,geoValue:x,setGeoValue:b,currentCity:E})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsx("div",{className:"mb-4 grid grid-cols-3 gap-2",children:r.jsx(Qe,{control:I,requiredValue:!0,errors:U,beforeText:"Срок сдачи",name:"deadline",defaultValue:(e==null?void 0:e.deadline)||""})}),r.jsx("div",{children:!!u&&(u==null?void 0:u.map(($,X)=>r.jsxs("div",{className:"[&:not(:last-child)]:mb-6",children:[r.jsx("h3",{className:"title-3",children:$.name}),r.jsx("div",{className:"grid grid-cols-3 gap-6 mt-4",children:$.items.map((W,ce)=>{var ne;return r.jsx(mD,{className:W.type!=="flag"?"col-span-full":"",nameOptions:"available-values",defaultValues:(ne=e.attributes.map(ee=>ee.items))==null?void 0:ne.flat(1),data:W,control:I},ce)})})]},X)))}),!!(E&&!Ye(E))&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Теги/стикеры"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(Es,{name:"tags",control:I,nameLabel:"Теги",options:c.filter($=>$.city===E.label).map($=>({value:$.id,label:$.name})),defaultValue:e.tags.map($=>({value:$.id,label:$.name})),btnsActions:!0,search:!0,onClose:()=>{i()}}),r.jsx(Es,{name:"stickers",control:I,nameLabel:"Стикеры",options:h.filter($=>$.city===E.label).map($=>({value:$.id,label:$.name})),defaultValue:e.stickers.map($=>({value:$.id,label:$.name})),btnsActions:!0,search:!0,onClose:()=>{i()}}),r.jsx(Es,{name:"advantages",control:I,nameLabel:"Уникальные преимущества объекта",options:f.filter($=>$.city===E.label).map($=>({value:$.id,label:$.name})),defaultValue:(Ie=e.advantages)==null?void 0:Ie.map($=>({value:$.id,label:$.name})),btnsActions:!0,search:!0,onClose:()=>{i()}})]})]}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"title-3 mb-4",children:"Тип недвижимости/застройщик"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(fn,{name:"type-build",control:I,nameLabel:"Тип недвижимости",options:d,requiredValue:!0,errors:U,defaultValue:e.type_id?d.find($=>$.value===e.type_id):{},onClose:()=>{i()}}),r.jsx(fn,{name:"developer",control:I,nameLabel:"Застройщик",options:g,defaultValue:{value:(Ve=e.developer)==null?void 0:Ve.id,label:(ot=e.developer)==null?void 0:ot.name},search:!0,requiredValue:!0,errors:U,onClose:()=>{i()}})]})]})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Описание"}),r.jsx(bi,{control:I,maxLength:4e3,name:"description",defaultValue:(fe=e.description)==null?void 0:fe.replace(/<[^>]+>/g,""),placeholder:"Расскажите о недвижимости, транспортной доступности и инфраструктуре"})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Выводить на главную"}),r.jsxs("div",{className:"flex gap-8",children:[r.jsx(ps,{defaultValue:e==null?void 0:e.showOnHomepage,control:I,option:{label:"Определенно рекомендуем"},name:"recommend-home"}),r.jsx(ps,{defaultValue:e==null?void 0:e.showCashbackOnHomepage,control:I,option:{label:"Повышенный кешбэк"},name:"cashback-home"})]})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Цена"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(Qe,{control:I,beforeText:"Цена от",afterText:"₽",name:"priceFrom",defaultValue:e.minPrice||"",convertNumber:!0,onlyNumber:!0,disabled:!0}),r.jsx(Qe,{control:I,beforeText:"Начислим за покупку",afterText:"%",name:"cashback",defaultValue:e.cashback||"",onlyNumberSemicolon:!0,maxLength:4}),r.jsx(Qe,{control:I,beforeText:"С мастер подпиской",afterText:"%",name:"cashbackSubscribe",defaultValue:e.cashback_with_master_subscribe||"",onlyNumberSemicolon:!0,maxLength:4})]})]}),r.jsx(POe,{data:e,frames:m,fetchData:z,groupsData:o,specialists:_}),r.jsx(kOe,{dataObject:e,fetchData:G,specialists:_,frames:m}),r.jsx(MOe,{dataObject:e,specialCondition:l,fetchData:V}),r.jsx(IOe,{dataObject:e,setData:Q,sendingForm:i,frames:m,specialists:_,tags:e.tags.map($=>({value:$.id,label:$.name}))}),r.jsx(ZW,{data:Y,setData:oe,dataVideos:e.videos_gallery,options:{specialists:_,frames:m,tags:e.tags.map($=>({value:$.id,label:$.name})),dataObject:e},sendingForm:i}),r.jsx(JW,{data:he,setData:me,dataVideos:e.videos_apartRenov,options:{specialists:_,frames:m,tags:e.tags.map($=>({value:$.id,label:$.name})),dataObject:e},sendingForm:i}),r.jsx(eG,{data:Oe,setData:xe,dataVideos:e.videos_ecologyParks,options:{specialists:_,frames:m,tags:e.tags.map($=>({value:$.id,label:$.name})),dataObject:e},sendingForm:i}),r.jsx(NOe,{data:a,id:t.id,frames:m,dataObject:e,sendingForm:i,specialists:_,tags:e.tags.map($=>({value:$.id,label:$.name})),sending:J})]}),r.jsx(Dl,{condition:{top:50,el:N},className:"!z-[999]",children:r.jsx("div",{className:"container py-2.5",children:r.jsx(_e,{type:"button",onClick:P($=>y($)),className:"w-full",disabled:s,children:s?"Сохранение...":"Сохранить"})})})]}),r.jsxs("div",{className:"container",children:[r.jsx("div",{className:"mt-4",children:r.jsx(wW,{data:e,frames:m,tags:e.tags,advantages:p,userRole:pn.name})}),r.jsx("div",{ref:N,className:"mt-8",children:r.jsx(_e,{onClick:P($=>y($)),type:"button",className:"w-full",disabled:s,children:s?"Сохранение...":"Сохранить"})})]})]})]})}),r.jsx(b4,{options:{condition:Pe,set:qe,title:e.title,redirectUrl:ke.listing}})]})},am=({control:t,name:e="",defaultValue:n=[],multiple:s=!0})=>r.jsx(Ir,{control:t,name:e,defaultValue:n,render:({field:i})=>r.jsxs(r.Fragment,{children:[r.jsx(Bo,{items:i.value,deleteItem:(a,o)=>{const l=i.value.filter(c=>c.id!==o).map((c,u)=>({...c,id:u+1}));i.onChange(l)}}),r.jsx(ta,{multiple:s,addFiles:a=>{s?i.onChange(cr([...i.value,...a])):i.onChange(cr([...a]))},className:`${i.value.length>0?"mt-6":""} mb-4`})]})}),sG=({control:t,name:e="",defaultValue:n=[],multiple:s=!1})=>r.jsx(Ir,{control:t,name:e,defaultValue:n,render:({field:i})=>{var a,o;return r.jsxs(r.Fragment,{children:[((a=i.value[0])==null?void 0:a.video)&&r.jsx("div",{className:"grid grid-cols-4 gap-4 mb-4",children:r.jsx(v4e,{src:(o=i.value[0])==null?void 0:o.video,deleteItem:()=>i.onChange([])})}),r.jsx(CW,{multiple:s,addFiles:l=>{s?i.onChange(ON([...i.value,...l])):i.onChange(ON([...l]))},className:`${i.value.length>0?"mt-6":""} mb-4`})]})}}),tT=({type:t="tag"})=>{const e=ue(Qs),n=Mr(),[s,i]=v.useState([]),{handleSubmit:a,control:o,formState:{errors:l}}=en();v.useEffect(()=>{Ue("/api/object-types").then(u=>{u.data&&i(u.data)})},[]);const c=u=>{const d={name:u.name,city:u.city.label,types:[],is_sticker:t==="sticker",is_advantage:t==="advantage",image:u.image||null,link:u.link};s.forEach(f=>{u[f.name]&&d.types.push(f.id)});const h=new FormData;d.image&&!Ye(u.image)?(d.image=ts(d.image),ss(d.image,h),d.image=ns(d.image),d.image=d.image[0]):d.image=null,h.append("data",JSON.stringify(d)),console.log(d),d.types.length!==0&&Me("/admin-api/tags/create",h,{"Content-Type":"multipart/form-data"}).then(f=>{n(`${ht.tags.list}?type=${t}s`)})};return r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Создать",r.jsx("span",{className:"ml-2",children:t==="tag"?"тег":t==="sticker"?"стикер":t==="advantage"?"уникальное преимущество объекта":""})]})}),r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:"container",children:r.jsxs("form",{onSubmit:a(c),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsx(Qe,{control:o,beforeText:"Название",name:"name",errors:l,requiredValue:!0}),r.jsx(fn,{name:"city",control:o,nameLabel:"Город",options:e.map(u=>({label:u.name,value:u.id})),search:!0,btnsActions:!0,errors:l,requiredValue:!0}),r.jsx(Qe,{control:o,beforeText:"Ссылка на скидку/новость",name:"link"})]}),r.jsx("div",{className:"mt-4 flex items-center gap-8",children:s.map(u=>r.jsx(ps,{control:o,option:{label:u.name},name:u.name},u.id))}),t==="advantage"&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Фото"}),r.jsx(am,{control:o,name:"image",multiple:!1})]})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})})})]})})},nT=({type:t="tag"})=>{const e=ue(Qs),n=Mr(),s=Mn(),[i,a]=v.useState([]),[o,l]=v.useState(null),{handleSubmit:c,control:u,formState:{errors:d}}=en();v.useEffect(()=>{Ue("/api/object-types").then(f=>{f.data&&a(f.data)}),t==="tag"&&Ue("/api/tags?type=tags").then(f=>{const p=f.data.find(g=>g.id===+s.id);p&&l(p)}),t==="sticker"&&Ue("/api/tags?type=stickers").then(f=>{const p=f.data.find(g=>g.id===+s.id);p&&l(p)}),t==="advantage"&&Ue("/api/tags?type=advantages").then(f=>{const p=f.data.find(g=>g.id===+s.id);p&&l(p)})},[]);const h=f=>{const p={name:f.name,city:f.city.label,types:[],is_sticker:t==="sticker",is_advantage:t==="advantage",image:f.image||null,link:f.link};i.forEach(m=>{f[m.name]&&p.types.push(m.id)});const g=new FormData;p.image&&!Ye(f.image)?(p.image=ts(p.image),ss(p.image,g),p.image=ns(p.image),p.image=p.image[0]):p.image=null,g.append("data",JSON.stringify(p)),p.types.length!==0&&Me(`/admin-api/tags/update/${s.id}`,g,{"Content-Type":"multipart/form-data"}).then(m=>{n(`${ht.tags.list}?type=${t}s`)})};if(e&&o)return r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Редактировать"," ",r.jsx("span",{children:t==="tag"?"тег":t==="sticker"?"стикер":t==="advantage"?"уникальное преимущество объекта":""})]})}),r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:"container",children:r.jsxs("form",{onSubmit:c(h),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsx(Qe,{defaultValue:o.name,control:u,beforeText:"Название",name:"name",errors:d,requiredValue:!0}),r.jsx(fn,{name:"city",control:u,nameLabel:"Город",options:e.map(f=>({label:f.name,value:f.id})),defaultValue:e.map(f=>({label:f.name,value:f.id})).find(f=>f.label===o.city),search:!0,btnsActions:!0,errors:d,requiredValue:!0}),r.jsx(Qe,{control:u,beforeText:"Ссылка на скидку/новость",name:"link",defaultValue:o.link||""})]}),r.jsx("div",{className:"mt-4 flex items-center gap-8",children:i.map(f=>r.jsx(ps,{control:u,option:{label:f.name},name:f.name,defaultValue:o.types.includes(f.id)},f.id))}),t==="advantage"&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Фото"}),r.jsx(am,{control:u,name:"image",multiple:!1,defaultValue:o.image?[{id:1,image:o.image}]:[]})]})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})})})]})})},ROe=()=>{const[t,e]=v.useState([]),n=async()=>{try{const s=await Ue("/api/object-types");e(s.data)}catch{}};return v.useEffect(()=>{n()},[]),{data:t,refetch:n}},LOe=()=>{const[t,e]=v.useState(!1),[n,s]=_r(),[i,a]=v.useState(null),o=vs(),l=ue(Qs),c=ue(Ci),{data:u}=ROe(),{data:d,refetch:h,isLoading:f}=AW(),p=new Map(u.map(j=>[j.id,j.name])),g=j=>(j==null?void 0:j.map(E=>({...E,types:E.types.map(T=>p.get(T))})))||[],m={tags:g(d.tags),stickers:g(d.stickers),advantages:g(d.advantages)},_=[{id:0,name:"tags"},{id:1,name:"stickers"},{id:2,name:"advantages"}],[y,x]=v.useState({city:{},search:""});v.useEffect(()=>{var j;a((j=_.find(E=>E.name===o.type))==null?void 0:j.id)},[]);const b=async()=>{Number(t)&&(await Ue(`/admin-api/tags/delete/${t}`),h(),e(!1))},w=(j=[],E,T)=>j.filter(N=>{const P=Ye(E.city)?T.name:E.city.label;if(N.city===P&&(!E.search||N.name.trim().toLowerCase().includes(E.search.trim().toLowerCase())))return!0}),C=({data:j=[],linkEdit:E="#",linkCreate:T="#",textCreate:N=""})=>r.jsxs("div",{className:"mt-6 container",children:[r.jsxs(rm,{className:"grid-cols-[150px_350px_250px_1fr_max-content]",children:[r.jsx("span",{children:"ID"}),r.jsx("span",{children:"Название"}),r.jsx("span",{children:"Категория"}),r.jsx("span",{children:"Город"}),r.jsx("span",{children:"Действие"})]}),r.jsx(im,{className:"mt-3 flex flex-col gap-3",children:f?[...new Array(8)].map((P,I)=>r.jsxs(Jy,{className:"grid-cols-[150px_350px_250px_1fr_max-content] h-[96px]",children:[r.jsx(Fe,{className:"w-[100px] h-10 rounded-lg"}),r.jsx(Fe,{className:"w-3/6 h-10 rounded-lg"}),r.jsx(Fe,{className:"w-3/6 h-10 rounded-lg"}),r.jsx(Fe,{className:"w-3/6 h-10 rounded-lg"}),r.jsx(Fe,{className:"w-[100px] h-10 rounded-lg"})]},I)):j.map((P,I)=>r.jsxs(Hp,{className:"grid-cols-[150px_350px_250px_1fr_max-content]",children:[r.jsx("span",{children:P.id}),r.jsx("span",{children:P.name}),r.jsx("span",{children:P.types.join(", ")}),r.jsx("span",{children:P.city}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Ke,{to:`${E}${P.id}`,children:r.jsx(bv,{Selector:"div"})}),r.jsx(Xu,{onClick:()=>e(P.id)})]})]},I))}),r.jsx(Ke,{to:T,className:"mt-8 w-full",children:r.jsx(_e,{Selector:"div",children:N})})]});return r.jsxs("main",{className:"main",children:[r.jsx("form",{children:r.jsxs(yd,{className:"grid-cols-[350px_500px_max-content] container",children:[r.jsx(vi,{nameLabel:"Город",options:l.map(j=>({value:j.id,label:j.name})),onChange:j=>x({...y,city:j}),value:Ye(y.city)?{value:c.id,label:c.name}:y.city}),r.jsx(kn,{onChange:j=>x({...y,search:j}),value:y.search,before:"Название"}),r.jsx(kW,{className:"mr-2",text:"Очистить",onClick:j=>{j.preventDefault(),x({city:{},search:""})}})]})}),r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsx("h2",{className:"title-2",children:"Теги/стикеры"})}),r.jsx("div",{className:"mt-4",children:r.jsx(Uo,{data:[{name:"Теги",body:r.jsx(C,{data:w(m.tags,y,c),linkEdit:ht.tags.editTag,linkCreate:ht.tags.createTag,textCreate:"Создать новый тег"}),count:w(m.tags,y,c).length},{name:"Стикеры",body:r.jsx(C,{data:w(m.stickers,y,c),linkEdit:ht.tags.editSticker,linkCreate:ht.tags.createSticker,textCreate:"Создать новый стикер"}),count:w(m.stickers,y,c).length},{name:"Уникальные преимущества объекта",body:r.jsx(C,{data:w(m.advantages,y,c),linkEdit:ht.tags.editAdvantage,linkCreate:ht.tags.createAdvantage,textCreate:"Создать новое преимущество"}),count:w(m.advantages,y,c).length}],navClassName:"container--no-padding",defaultValue:i,onChange:j=>{var E;s({type:(E=_.find(T=>T.id===j))==null?void 0:E.name})}})})]}),r.jsx(Ze,{condition:t,children:r.jsx(gt,{condition:!!t,set:e,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[700px]"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"title-2",children:"Вы действительно хотите удалить?"}),r.jsx("p",{className:"mt-2",children:"Это действие необратимо"}),r.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-2",children:[r.jsx(_e,{onClick:()=>e(!1),children:"Нет"}),r.jsx(_e,{onClick:b,children:"Да"})]})]})})})]})},nd=[{value:"text-field",label:"Текстовое поле"},{value:"list-single",label:"Список - единичный выбор"},{value:"list-multiple",label:"Список - множественный выбор"},{value:"number-field",label:"Числовое поле"},{value:"number-list",label:"Числовой список"},{value:"flag",label:"Флажок"}],BOe=()=>{const{handleSubmit:t,control:e,watch:n,reset:s,formState:{errors:i}}=en(),a=Mr(),o=Mn(),[l,c]=v.useState(!1),[u,d]=v.useState(!1),h=n("type"),f=p=>{const g={...p,type:p.type.value,typeId:o.typeId,tab_id:o.attributeId};l&&(delete g["list-multiple-value"],g["list-single-value"]=g["list-single-value"].replace(/ /g,"")),u&&(g["list-multiple-value"]=g["list-multiple-value"].replace(/ /g,""),delete g["list-single-value"]),g.type==="flag"&&(g["list-single-value"]="Да, Нет"),Me(`/admin-api/type/${o.typeId}/create/complex-attribute`,g).then(m=>{s(),a(`${ht.types.show}${o.typeId}?attribute=${o.attributeId}`)})};return v.useEffect(()=>{h&&(c(!1),d(!1),h.value==="list-single"&&c(!0),h.value==="list-multiple"&&d(!0))},[h]),r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Создать ",r.jsx("span",{children:"характеристику жилого комплекса"})]})}),r.jsx("div",{className:"mt-6 container",children:r.jsxs("form",{onSubmit:t(f),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsxs("div",{className:"grid gap-2 grid-cols-3",children:[r.jsx(Qe,{control:e,beforeText:"Название",name:"name",errors:i,requiredValue:!0}),r.jsx(fn,{control:e,nameLabel:"Тип фильтра",options:nd,defaultValue:nd[0],name:"type"}),r.jsx(Qe,{control:e,beforeText:"Постфикс (м²,₽,г)",name:"postfix"})]}),r.jsxs("div",{className:"mt-4",children:[l&&r.jsx(Qe,{control:e,beforeText:"Значение для единичного  выбора",name:"list-single-value"}),u&&r.jsx(Qe,{control:e,beforeText:"Значение для множественного выбора",name:"list-multiple-value"})]}),r.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[r.jsx(ps,{control:e,option:{label:"Обязательно для заполнения"},name:"required-field"}),r.jsx(ps,{control:e,option:{label:"Показывать в фильтре на сайте"},name:"show-filter-on-site"})]})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})})]})})},FOe=()=>{const{handleSubmit:t,control:e,reset:n,watch:s,formState:{errors:i}}=en(),a=Mr(),o=Mn(),[l,c]=v.useState(!1),[u,d]=v.useState(!1),h=s("type"),f=p=>{const g={...p,type:p.type.value,typeId:o.typeId};l&&(delete g["list-multiple-value"],g["list-single-value"]=g["list-single-value"].replace(/ /g,"")),u&&(g["list-multiple-value"]=g["list-multiple-value"].replace(/ /g,""),delete g["list-single-value"]),Me(`/admin-api/type/${o.typeId}/create/apartment-attribute`,g).then(m=>{n(),a(`${ht.types.show}${o.typeId}`)})};return v.useEffect(()=>{h&&(c(!1),d(!1),h.value==="list-single"&&c(!0),h.value==="list-multiple"&&d(!0))},[h]),r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Создать ",r.jsx("span",{children:"характеристику квартир жилого комплекса"})]})}),r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:"container",children:r.jsxs("form",{onSubmit:t(f),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsxs("div",{className:"grid gap-2 grid-cols-3",children:[r.jsx(Qe,{control:e,beforeText:"Название",name:"name",requiredValue:!0,errors:i}),r.jsx(fn,{control:e,nameLabel:"Тип фильтра",options:nd,defaultValue:nd[0],name:"type"}),r.jsx(Qe,{control:e,beforeText:"Постфикс (м²,₽,г)",name:"postfix"})]}),r.jsxs("div",{className:"mt-4",children:[l&&r.jsx(Qe,{control:e,beforeText:"Значение для единичного  выбора",name:"list-single-value"}),u&&r.jsx(Qe,{control:e,beforeText:"Значение для множественного выбора",name:"list-multiple-value"})]}),r.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[r.jsx(ps,{control:e,option:{label:"Обязательно для заполнения"},name:"required-field"}),r.jsx(ps,{control:e,option:{label:"Показывать в фильтре на сайте"},name:"show-filter-on-site"})]})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})})})]})})},$Oe=()=>{var _,y;const{handleSubmit:t,control:e,watch:n,formState:{errors:s}}=en(),i=Mn(),{old_name:a,tabId:o}=L2.parse(window.location.search.substring(1)),l=Mr(),[c,u]=v.useState({}),[d,h]=v.useState(!1),[f,p]=v.useState(!1);let g=n("type");v.useEffect(()=>{Ue(`/admin-api/type/${i.typeId}/show/attribute`,{name:a}).then(x=>{x.data&&u(x.data)})},[]);const m=x=>{const b={...x,type:x.type.value,typeId:i.typeId,old_name:a};d&&(delete b["list-multiple-value"],b["list-single-value"]=b["list-single-value"].split(",").map(w=>w.trim()).join(",")),f&&(delete b["list-single-value"],b["list-multiple-value"]=b["list-multiple-value"].split(",").map(w=>w.trim()).join(",")),b.type==="flag"&&(b["list-single-value"]="Да, Нет"),Me(`/admin-api/type/${i.typeId}/update/complex-attribute`,b).then(w=>{l(`${ht.types.show}${i.typeId}?attribute=${o}`)})};return v.useEffect(()=>{h(!1),p(!1),c.type==="list-single"&&h(!0),c.type==="list-multiple"&&p(!0)},[c]),v.useEffect(()=>{g&&(h(!1),p(!1),g.value==="list-single"&&h(!0),g.value==="list-multiple"&&p(!0))},[g]),c.name?r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Редактировать ",r.jsx("span",{children:"характеристику жилого комплекса"})]})}),r.jsx("div",{className:"mt-6 container",children:r.jsxs("form",{onSubmit:t(m),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsxs("div",{className:"grid gap-2 grid-cols-3",children:[r.jsx(Qe,{control:e,beforeText:"Название",name:"name",errors:s,defaultValue:c.name.toString()||"",requiredValue:!0}),r.jsx(fn,{control:e,nameLabel:"Тип фильтра",options:nd,defaultValue:nd.find(x=>x.value===c.type),name:"type"}),r.jsx(Qe,{control:e,beforeText:"Постфикс (м²,₽,г)",name:"postfix",defaultValue:c.postfix||""})]}),r.jsxs("div",{className:"mt-4",children:[d&&r.jsx(Qe,{control:e,beforeText:"Значение для единичного  выбора",name:"list-single-value",defaultValue:(_=c["available-values"])==null?void 0:_.join(", ")}),f&&r.jsx(Qe,{control:e,beforeText:"Значение для множественного выбора",name:"list-multiple-value",defaultValue:(y=c["available-values"])==null?void 0:y.join(", ")})]}),r.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[r.jsx(ps,{control:e,option:{label:"Обязательно для заполнения"},name:"required-field",defaultValue:c["required-field"]}),r.jsx(ps,{control:e,option:{label:"Показывать в фильтре на сайте"},name:"show-filter-on-site",defaultValue:c["show-filter-on-site"]})]})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})})]})}):""},UOe=()=>{var m,_;const{handleSubmit:t,control:e,watch:n,formState:{errors:s}}=en(),i=Mn(),a=Mr(),{old_name:o}=L2.parse(window.location.search.substring(1)),[l,c]=v.useState({}),[u,d]=v.useState(!1),[h,f]=v.useState(!1),p=n("type");v.useEffect(()=>{Ue(`/admin-api/type/${i.typeId}/show/innerattribute`,{name:o}).then(y=>{y.data&&c(y.data)})},[]);const g=y=>{const x={...y,type:y.type.value,typeId:i.typeId,old_name:o};u&&(delete x["list-multiple-value"],x["list-single-value"]=x["list-single-value"].replace(/ /g,"")),h&&(x["list-multiple-value"]=x["list-multiple-value"].replace(/ /g,""),delete x["list-single-value"]),Me(`/admin-api/type/${i.typeId}/update/apartment-attribute`,x).then(b=>{a(`${ht.types.show}${i.typeId}`)})};return v.useEffect(()=>{d(!1),f(!1),l.type==="list-single"&&d(!0),l.type==="list-multiple"&&f(!0)},[l]),v.useEffect(()=>{p&&(d(!1),f(!1),p.value==="list-single"&&d(!0),p.value==="list-multiple"&&f(!0))},[p]),l.name?r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Редактировать ",r.jsx("span",{children:"характеристику квартир жилого комплекса"})]})}),r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:"container",children:r.jsxs("form",{onSubmit:t(g),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsxs("div",{className:"grid gap-2 grid-cols-3",children:[r.jsx(Qe,{control:e,beforeText:"Название",name:"name",errors:s,defaultValue:l.name.toString()||"",requiredValue:!0}),r.jsx(fn,{control:e,nameLabel:"Тип фильтра",options:nd,defaultValue:nd.find(y=>y.value===l.type),name:"type"}),r.jsx(Qe,{control:e,beforeText:"Постфикс (м²,₽,г)",name:"postfix",defaultValue:l.postfix||""})]}),r.jsxs("div",{className:"mt-4",children:[u&&r.jsx(Qe,{control:e,beforeText:"Значение для единичного  выбора",name:"list-single-value",defaultValue:(m=l["available-values"])==null?void 0:m.join(", ")}),h&&r.jsx(Qe,{control:e,beforeText:"Значение для множественного выбора",name:"list-multiple-value",defaultValue:(_=l["available-values"])==null?void 0:_.join(", ")})]}),r.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[r.jsx(ps,{control:e,option:{label:"Обязательно для заполнения"},name:"required-field",defaultValue:l["required-field"]}),r.jsx(ps,{control:e,option:{label:"Показывать в фильтре на сайте"},name:"show-filter-on-site",defaultValue:l["show-filter-on-site"]})]})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})})})]})}):""},VOe=[{label:"Новостройки",value:"new_building"},{label:"Жилая",value:"living"}],zOe=()=>{const{handleSubmit:t,control:e,setValue:n,getValues:s,watch:i}=en(),a=Mr(),[o,l]=v.useState(null),c=d=>{const h={...d,type:void 0};return VOe.forEach(f=>{d[f.value]&&(h.type=f.value),delete h[f.value]}),h},u=d=>{let h=c(d);h={name:h.name},h.name!==""&&(console.log(h),Me("/admin-api/object-types/create",h).then(()=>{a(ht.types.list)}))};return i(d=>{const h=c(d);l(h.type)}),r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Создать ",r.jsx("span",{children:"типы объектов"})]})}),r.jsx("div",{className:"mt-6 container",children:r.jsxs("form",{onSubmit:t(u),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsx("div",{className:"max-w-[400px]",children:r.jsx(Qe,{control:e,beforeText:"Название",name:"name"})})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})})]})})},HOe=()=>{const[t,e]=v.useState([]),[n,s]=v.useState(!1),i=()=>{Number(n)&&Me(`/admin-api/types/delete/${n}`).then(a=>{window.location.reload()})};return v.useEffect(()=>{Ue("/api/object-types").then(a=>{a.data&&e(a.data)})},[]),r.jsx(r.Fragment,{children:r.jsxs("main",{className:"main",children:[r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsx("h2",{className:"title-2",children:"Типы объектов"})}),r.jsx("div",{className:"mt-6",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{children:[r.jsxs(rm,{className:"grid-cols-[200px_1fr_max-content]",children:[r.jsx("span",{children:"Порядок"}),r.jsx("span",{children:"Название"}),r.jsx("span",{children:"Действие"})]}),r.jsx(im,{className:"mt-3 flex flex-col gap-3",children:t.map((a,o)=>r.jsxs(Hp,{className:"grid-cols-[200px_1fr_max-content]",children:[r.jsx("span",{children:a.id}),r.jsx("span",{children:a.name}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Ke,{to:`${ht.types.show}${a.id}`,children:r.jsx(She,{Selector:"div"})}),r.jsx(Xu,{onClick:()=>s(a.id)})]})]},o))})]}),r.jsx(Ke,{to:ht.types.create,className:"mt-8 w-full",children:r.jsx(_e,{Selector:"div",children:"Создать тип объекта"})})]})})]}),r.jsx(Ze,{condition:n,children:r.jsx(gt,{condition:!!n,set:s,options:{overlayClassNames:"_center-max-content",modalClassNames:"!w-[700px]"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"title-2",children:"Вы действительно хотите удалить?"}),r.jsx("p",{className:"mt-2",children:"Это действие необратимо"}),r.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-2",children:[r.jsx(_e,{onClick:()=>s(!1),children:"Нет"}),r.jsx(_e,{onClick:i,children:"Да"})]})]})})})]})})},qOe={name:"",necessarily:!1,items:[]},WOe=()=>{const t=Mn(),e=Mr(),[n,s]=v.useState([]),[i,a]=v.useState([]);v.useEffect(()=>{Ue(`/api/type/${t.id}`).then(c=>{c.data&&(s(c.data.attributeComplex),a(c.data.attributeInner))})},[]);const o=c=>({id:c.id,name:c.name,necessarily:c.necessarily,body:r.jsxs("div",{children:[r.jsxs(rm,{className:"grid-cols-[120px_200px_180px_250px_1fr_max-content]",children:[r.jsx("span",{children:"Порядок"}),r.jsx("span",{children:"Название"}),r.jsx("span",{children:"Тип"}),r.jsx("span",{children:"Показывать в фильтре"}),r.jsx("span",{children:"Обязательное"}),r.jsx("span",{children:"Действие"})]}),r.jsxs(im,{className:"mt-3 flex flex-col gap-3",children:[c.items.map((u,d)=>r.jsxs(Hp,{className:"grid-cols-[120px_200px_180px_250px_1fr_max-content]",children:[r.jsx("span",{children:u.order}),r.jsx("span",{children:u.name}),r.jsx("span",{children:u.type}),r.jsx("span",{children:u.showInFilter?"Да":"Нет"}),r.jsx("span",{children:u.necessarily?"Да":"Нет"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(bv,{onClick:()=>{Me(`/admin-api/type/${t.id}`,{attributeComplex:n,attributeInner:i}).then(h=>{e(`/admin/type/${t.id}/edit/attribute?tabId=${c.id}&old_name=${u.name}`)})}}),r.jsx(Xu,{onClick:()=>{Ue(`/admin-api/type/${t.id}/delete/attribute`,{name:u.name}).then(()=>{window.location.reload()})}})]})]},d)),r.jsx(Ke,{to:`/admin/type/${t.id}/add/attribute/${c.id}`,className:"mt-8 w-full",children:r.jsx(_e,{Selector:"div",children:"Создать характеристику жилого комплекса"})})]})]})}),l=(c=null)=>{const u={attributeComplex:c||n,attributeInner:i};console.log(u),Me(`/admin-api/type/${t.id}`,u)};return r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsxs(Pl,{children:["Просмотр ",r.jsx("span",{children:"типы объектов"})]})}),r.jsx("div",{className:"mt-6",children:r.jsxs("div",{className:"container",children:[r.jsx("div",{className:"white-block",children:r.jsx(mC,{data:n,setData:s,structureTabs:o,emptyField:qOe,title:"Характеристики жилого комплекса",onChangeParams:{name:"attribute"},onSubmit:l})}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h3",{className:"title-2",children:"Характеристики квартир жилого комплекса"}),r.jsxs("div",{className:"mt-6",children:[r.jsxs(rm,{className:"grid-cols-[120px_200px_180px_250px_1fr_max-content]",children:[r.jsx("span",{children:"Порядок"}),r.jsx("span",{children:"Название"}),r.jsx("span",{children:"Тип"}),r.jsx("span",{children:"Показывать в фильтре"}),r.jsx("span",{children:"Обязательное"}),r.jsx("span",{children:"Действие"})]}),r.jsxs(im,{className:"mt-3 flex flex-col gap-3",children:[i.map((c,u)=>r.jsxs(Hp,{className:"grid-cols-[120px_200px_180px_250px_1fr_max-content]",children:[r.jsx("span",{children:c.order}),r.jsx("span",{children:c.name}),r.jsx("span",{children:c.type}),r.jsx("span",{children:c.showInFilter?"Да":"Нет"}),r.jsx("span",{children:c.necessarily?"Да":"Нет"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(bv,{onClick:()=>{Me(`/admin-api/type/${t.id}`,{attributeComplex:n,attributeInner:i}).then(d=>{e(`/admin/type/${t.id}/edit/innerattribute?old_name=${c.name}`)})}}),r.jsx(Xu,{onClick:()=>{Ue(`/admin-api/type/${t.id}/delete/innerattribute`,{name:c.name}).then(()=>{window.location.reload()})}})]})]},u)),r.jsx(Ke,{to:`/admin/type/${t.id}/add/innerattribute`,className:"mt-8 w-full",children:r.jsx(_e,{Selector:"div",children:"Создать характеристику квартир жилого комплекса"})})]})]})]})]})})]})})},pR=({edit:t=!1})=>{const e=Mn(),n=ue(Qs),[s,i]=v.useState(!1),{handleSubmit:a,control:o}=en(),[l,c]=v.useState(null);v.useEffect(()=>{t?Ue(`/api/developers/${e.id}`).then(d=>{c({...d.data,image:d.data.photoUrl?{id:1,image:d.data.photoUrl}:null,photos:d.data.photos?d.data.photos.map((h,f)=>({id:f,image:h})):[]}),i(!0)}):i(!0)},[]);const u=d=>{var p;const h={name:d.name,city:d.city.map(g=>g.value),year:d.year,building_houses:d.building_houses,ready_houses:d.ready_houses,descr:d.descr,image:d.photo,photos:d.photos,video:(p=d.video)==null?void 0:p.map(g=>g.file)},f=new FormData;h.image=ts(h.image),h.photos=ts(h.photos),ss(h.image,f),ss(h.photos,f),h.image=ns(h.image),h.photos=ns(h.photos),h.image=h.image[0]||null,f.append("data",JSON.stringify(h)),t&&f.append("_method","PUT"),console.log(h);for(let g of f.entries())console.log(g[0]+": "+g[1]);t?Me(`/admin-api/developers/${e.id}`,f,{"Content-Type":"multipart/form-data"}).then(()=>{window.location.reload()}):Me("/admin-api/developers/create",f,{"Content-Type":"multipart/form-data"}).then(()=>{window.location.href=ke.developers.list})};if(!(!s||n.length===0))return r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper--title",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"title-2",children:t?"Редактировать застройщика":"Создать застройщика"}),r.jsxs("form",{className:"mt-6",onSubmit:a(u),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsx("div",{className:"max-w-[400px] mb-2",children:r.jsx(Qe,{control:o,beforeText:"Название застройщика",name:"name",defaultValue:t?l==null?void 0:l.name:""})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Es,{name:"city",control:o,nameLabel:"Регион работы",defaultValue:t?n.map(d=>({label:d.name,value:d.id})).filter(d=>l.cities.includes(d.value)):[],options:n.map(d=>({label:d.name,value:d.id}))}),r.jsx(Qe,{control:o,beforeText:"Год основания",name:"year",maxLength:4,onlyNumber:!0,convertNumber:!0,defaultValue:t&&l.year?l.year:""}),r.jsx(_l,{children:r.jsx(Qe,{control:o,beforeText:"Строиться",afterText:"домов",name:"building_houses",maxLength:4,onlyNumber:!0,defaultValue:t&&l.building_houses?l.building_houses:""})}),r.jsx(_l,{children:r.jsx(Qe,{control:o,beforeText:"Сдано",afterText:"домов",name:"ready_houses",maxLength:4,onlyNumber:!0,defaultValue:t&&(l!=null&&l.ready_houses)?l.ready_houses:""})})]})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Описание"}),r.jsx(bi,{control:o,maxLength:3e3,name:"descr",placeholder:"Введите описание",defaultValue:t&&l.description?l.description:""})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Логотип"}),r.jsx(am,{control:o,name:"photo",multiple:!1,defaultValue:t&&l.image?[l.image]:[]})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Фото"}),r.jsx(Uo,{data:[{name:"Фото",body:r.jsx(am,{control:o,name:"photos",defaultValue:t?l.photos:[]})},{name:"Видео",body:r.jsx(sG,{control:o,name:"video"})}]})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})]})})})},mR=({edit:t=!1})=>{const e=Mn(),{handleSubmit:n,control:s,watch:i,resetField:a,formState:{errors:o},reset:l,setValue:c}=en(),u=ue(Qs),[d,h]=v.useState([]),[f,p]=v.useState([]),[g,m]=v.useState([]),[_,y]=v.useState(null),[x,b]=v.useState(!1);v.useEffect(()=>{t?Ue(`/api/specialists/${e.id}`).then(E=>{y({...E.data,phone:E.data.phone[0]==="7"?`+${E.data.phone}`:E.data.phone,image:E.data.photoUrl?{id:1,image:E.data.photoUrl}:null,photos:E.data.photos?E.data.photos.map((T,N)=>({id:N,image:T})):[]}),b(!0)}):b(!0)},[]),v.useEffect(()=>{Ue("/api/object-types").then(E=>{E.data&&m(E.data)})},[]);const w=i("city"),C=i("developer");v.useEffect(()=>{w!=null&&w.value&&Me("/api/developers/all",{city:w.value}).then(E=>{h(E.data.map(T=>({label:T.name,value:T.id,avatar:T.photo})))}).finally(()=>{c("developer",{}),c("complex",[])})},[w]),v.useEffect(()=>{C!=null&&C.value&&Me("/api/developers/complexes",{developer_ids:[C.value]}).then(E=>{p(E.data)}).catch(()=>{p([])}).finally(()=>{c("complex",[])})},[C]);const j=E=>{var P,I;const T={role:"seller",developer:(P=E.developer)==null?void 0:P.value,complex:(I=E.complex)==null?void 0:I.map(B=>B.value),city:E.city.value?[E.city.value]:[],type:E.type.map(B=>B.value),experience:E.experience,descr:E.descr,surname:E.surname,name:E.name,father_name:E.father_name,phone:E.phone.slice(1),email:E.email,password:E.password,image:E.image,photos:E.photos},N=new FormData;T.image=ts(T.image),T.photos=ts(T.photos),ss(T.image,N),ss(T.photos,N),T.image=ns(T.image),T.photos=ns(T.photos),T.image=T.image[0]||null,N.append("data",JSON.stringify(T)),t&&N.append("_method","PUT"),console.log(T);for(let B of N.entries())console.log(B[0]+": "+B[1]);t?Me(`/admin-api/specialists/${e.id}`,N,{"Content-Type":"multipart/form-data"}).then(()=>{window.location.reload()}):Me("/admin-api/specialists",N,{"Content-Type":"multipart/form-data"}).then(()=>{window.location.href=ke.specialists.list})};if(x)return r.jsx("main",{className:"main",children:r.jsxs("div",{className:"main-wrapper--title",children:[r.jsx("div",{className:"container",children:r.jsx("h2",{className:"title-2",children:t?"Редактировать менеджера":"Создать менеджера"})}),r.jsxs("form",{className:" mt-6 container",onSubmit:n(j),children:[r.jsxs("div",{className:"white-block",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Параметры"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(fn,{name:"city",control:s,nameLabel:"Регион работы",requiredValue:!0,errors:o,setValue:t?c:null,defaultValue:t?u==null?void 0:u.map(E=>({label:E.name,value:E.id})).filter(E=>_.cities.includes(E.value))[0]:[],options:u.map(E=>({label:E.name,value:E.id}))}),r.jsx(fn,{name:"developer",control:s,nameLabel:"Застройщик",options:d,defaultValue:t&&d.length?d.find(E=>E.label===_.agency):{},search:!0,requiredValue:!0,errors:o,setValue:t?c:null}),r.jsx(Es,{name:"complex",control:s,nameLabel:"Комплекс",options:f,defaultValue:t&&f.length?f.filter(E=>_.objects_ids.includes(E.value)):[],search:!0,btnsActions:!0,requiredValue:!0,errors:o,setValue:c})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(Es,{name:"type",control:s,nameLabel:"Направление",requiredValue:!0,errors:o,defaultValue:t?g.map(E=>({label:E.name,value:E.id})).filter(E=>_.types.includes(E.value)):[],options:g.map(E=>({label:E.name,value:E.id}))}),r.jsx(Qe,{control:s,beforeText:"Стаж",afterText:"лет",name:"experience",onlyNumber:!0,convertNumber:!0,maxLength:3,defaultValue:t&&_.experience?_.experience:""})]})]})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"О себе"}),r.jsx(bi,{control:s,maxLength:3e3,name:"descr",placeholder:"Введите описание",defaultValue:t&&_.description?_.description:""})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Контакты"}),r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsx(Qe,{control:s,beforeText:"Фамилия",name:"surname",requiredValue:!0,errors:o,defaultValue:t?_.surname:""}),r.jsx(Qe,{control:s,beforeText:"Имя",name:"name",requiredValue:!0,errors:o,defaultValue:t?_.name:""}),r.jsx(Qe,{control:s,beforeText:"Отчество",name:"father_name"}),r.jsx(ow,{control:s,requiredValue:!t,errors:t?null:o,defaultValue:t?_.phone:""}),r.jsx(Qe,{control:s,beforeText:"Email",name:"email",defaultValue:t&&_.email||""}),r.jsx(Qe,{control:s,beforeText:"Пароль",name:"password",type:"password",readOnly:!0,disabled:t})]})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Аватарка"}),r.jsx(am,{control:s,name:"image",defaultValue:t&&_.image?[_.image]:[],multiple:!1})]}),r.jsxs("div",{className:"white-block mt-4",children:[r.jsx("h2",{className:"title-2 mb-6",children:"Дипломы и награды"}),r.jsx(Uo,{data:[{name:"Фото",body:r.jsx(am,{control:s,name:"photos",defaultValue:t?_.photos:[]})},{name:"Видео",body:r.jsx(sG,{control:s,name:"video"})}]})]}),r.jsx(_e,{className:"mt-8 w-full",children:"Сохранить"})]})]})})},GOe=[{path:"",body:r.jsx(vOe,{})},{path:ht.types.list,body:r.jsx(HOe,{})},{path:ht.types.create,body:r.jsx(zOe,{})},{path:`${ht.types.show}:id`,body:r.jsx(WOe,{})},{path:ht.types.createChars,body:r.jsx(BOe,{})},{path:ht.types.createCharsApart,body:r.jsx(FOe,{})},{path:ht.listingFlats,body:r.jsx(zW,{isAdmin:!0}),main_layout_hidden:!0},{path:ht.objects.create,body:r.jsx(EOe,{})},{path:`${ht.objects.edit}:id`,body:r.jsx(OOe,{})},{path:ht.types.editChar,body:r.jsx($Oe,{})},{path:ht.types.editCharApart,body:r.jsx(UOe,{})},{path:`${ht.apartment.create}:objectId`,body:r.jsx(dOe,{})},{path:`${ht.apartment.edit}:id`,body:r.jsx(hOe,{})},{path:ht.cities.list,body:r.jsx(mOe,{})},{path:ht.cities.create,body:r.jsx(fOe,{})},{path:`${ht.cities.edit}:cityId`,body:r.jsx(pOe,{})},{path:ht.tags.list,body:r.jsx(LOe,{})},{path:ht.tags.createTag,body:r.jsx(tT,{type:"tag"})},{path:ht.tags.createSticker,body:r.jsx(tT,{type:"sticker"})},{path:ht.tags.createAdvantage,body:r.jsx(tT,{type:"advantage"})},{path:`${ht.tags.editTag}:id`,body:r.jsx(nT,{type:"tag"})},{path:`${ht.tags.editSticker}:id`,body:r.jsx(nT,{type:"sticker"})},{path:`${ht.tags.editAdvantage}:id`,body:r.jsx(nT,{type:"advantage"})},{path:ht.specialists.create,body:r.jsx(mR,{})},{path:`${ht.specialists.edit}:id`,body:r.jsx(mR,{edit:!0})},{path:ht.developers.create,body:r.jsx(pR,{})},{path:`${ht.developers.edit}:id`,body:r.jsx(pR,{edit:!0})}],YOe=({children:t})=>{var s;const[e]=ur(),n=ue(Ot);if(e.loggedIn){if(n&&!Ye(n)&&((s=n.role)==null?void 0:s.id)!==pn.id)return r.jsx(Xf,{to:ht.login})}else return r.jsx(Xf,{to:ht.login});return t},XOe=({children:t})=>r.jsxs("div",{className:"site-container",children:[r.jsx(Qh,{}),t]}),KOe=()=>{var o;const t=vs(),e=Xr(),n=Mr(),[s,i]=v.useState(null),a=(o=e.state)==null?void 0:o.notificationCall;return v.useEffect(()=>{a&&(i(a),n(e.pathname,{replace:!0,state:{}}))},[a]),r.jsx(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Чат"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:r.jsx("main",{className:"main !p-0",children:r.jsx(yD,{defaultDialogId:s?+s.dialog_id:+t.dialog||null,tag:t.tag||null,videoCallData:s||null})})})},QOe=()=>{const{data:t,photo:e,setPhoto:n,onSubmitHandler:s,onClickLogout:i}=v.useContext(Y9),a=ue(rt),{formState:{errors:o},handleSubmit:l,control:c}=en();return r.jsxs("form",{onSubmit:l(s),className:"white-block flex flex-col gap-8",children:[r.jsxs("div",{className:"flex items-center gap-8 md2:flex-col md2:gap-0",children:[r.jsx(IA,{defaultLayout:()=>r.jsx("img",{src:lq}),image:e==null?void 0:e.image,onChange:u=>{n(u?cr(u)[0]:null)},className:"!rounded-full",changeAvatarChildren:!a&&r.jsx("div",{className:"blue-link mt-3",children:"Изменить аватарку"})}),r.jsxs("h2",{className:"title-1 md1:mt-4",children:[t.name||t.surname?`${t.surname||""} ${t.name||""} ${t.father_name||""}`:"ФИО"," "]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-4",children:"Контактные данные"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 md3:grid-cols-1",children:[r.jsx(ow,{control:c,errors:o,size:48,defaultValue:t.phone||"",disabled:!0}),!!t.is_admin&&r.jsx(Qe,{control:c,beforeText:"Email",name:"email",size:48,defaultValue:t.email||""})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"title-3 mb-4",children:"Личные данные"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 md3:grid-cols-1",children:[r.jsx(Qe,{control:c,beforeText:"Фамилия",name:"surname",size:48,defaultValue:t.surname||""}),r.jsx(Qe,{control:c,beforeText:"Имя",name:"name",size:48,defaultValue:t.name||""}),r.jsx(Qe,{control:c,beforeText:"Отчество",name:"father_name",size:48,defaultValue:t.father_name||""}),r.jsx(Qe,{control:c,beforeText:"Дата рождения",name:"date_birth",datePicker:!0,size:48,defaultValue:t.birthday||""})]})]}),r.jsxs("div",{className:"flex gap-4 justify-end md3:flex-col",children:[r.jsx(_e,{type:"button",variant:"secondary",onClick:i,children:"Выйти из личного кабинета"}),r.jsx(_e,{className:"min-w-[200px]",children:"Сохранить"})]})]})},ZOe=()=>{ur();const[t,e]=v.useState(null),n=ue(Ot),[s,i]=v.useState(null),{logout:a}=dw();v.useEffect(()=>{Ye(n)||(e(n),n.image&&i({id:1,image:qt(n.image)}))},[n]);const o=c=>{const u={...c,photo:s?[s]:null,phone:c.phone.slice(1),email:c.email||n.email},d=new FormData;u.photo?(u.photo=ts(u.photo),ss(u.photo,d),u.photo=ns(u.photo),u.photo=u.photo[0],u.photo.new_image||(u.photo.image=u.photo.image.replace(Wi,""))):u.photo=null,d.append("data",JSON.stringify(u)),Me("/api/profile/edit",d,{"Content-Type":"multipart/form-data"}).then(h=>{window.location.reload()})},l=()=>{a().then(()=>{setTimeout(()=>{window.location.pathname!==ke.loginPhone&&(window.location.href=ke.home)},100)})};if(t)return r.jsx(Vn,{helmet:r.jsxs(dn,{children:[r.jsx("title",{children:"Личный кабинет"}),r.jsx("meta",{name:"description",content:"Добро пожаловать на сайт inrut.ru"}),";",r.jsx("meta",{name:"description",content:"На inrut.ru вы можете решить любой вопрос с недвижимостью"}),";"]}),children:r.jsxs(Y9.Provider,{value:{data:t,photo:s,setPhoto:i,onSubmitHandler:o,onClickLogout:l},children:[r.jsx(zn,{}),r.jsx("main",{className:"main",children:r.jsx("div",{className:"main-wrapper",children:r.jsx("div",{className:"container-desktop",children:t&&r.jsx(QOe,{})})})})]})})},JOe=[{path:Ji.profile.edit,body:r.jsx(ZOe,{})},{path:Ji.chat,body:r.jsx(KOe,{})}],e8e=()=>r.jsxs(Rre,{children:[_Me.map((t,e)=>r.jsx(rc,{path:t.path,element:t.body},e)),r.jsx(rc,{path:At.home,children:OMe.map((t,e)=>r.jsx(rc,{path:t.path,element:r.jsx(Jj,{role_id:Wt.id,children:t.body})},e))}),aOe.map((t,e)=>r.jsx(rc,{path:t.path,element:r.jsx(Jj,{role_id:sn.id,children:t.body})},e)),JOe.map((t,e)=>r.jsx(rc,{path:t.path,element:r.jsx(Jj,{role_id:"auth",children:t.body})},e)),r.jsxs(rc,{path:ht.dashboardAdmin,children:[r.jsx(rc,{path:ht.login,element:r.jsx(oOe,{})}),GOe.map((t,e)=>r.jsx(rc,{path:t.path,element:r.jsx(YOe,{children:t.main_layout_hidden?t.body:r.jsx(XOe,{children:t.body})})},e))]})]}),t8e=({condition:t,set:e,defaultDialogId:n=null,videoCallData:s=null})=>{const[i]=ur();return r.jsx(r.Fragment,{children:i.loggedIn?r.jsx(gt,{options:{overlayClassNames:"_full",modalClassNames:"",modalContentClassNames:"!pl-8 !pr-10 !pb-6 !pt-12 md1:!p-0 !overflow-hidden"},condition:t,set:e,children:r.jsx(yD,{onCloseModal:()=>e(!1),defaultDialogId:n,videoCallData:s})}):r.jsx(bm,{condition:t,set:e})})},n8e=()=>{const[t,e]=v.useState(localStorage.getItem("cookie_accept"));if(!t)return on.createPortal(r.jsxs(yi,{show:t,classListRoot:"max-w-[360px]",position:"bottom-right",color:"white",visibleProgressBar:!1,children:[r.jsxs("h3",{className:"font-medium text-defaultMax",children:["Мы используем cookies, чтобы сайт работал лучше. А ещё"," ",r.jsx(Ke,{to:ke.privacyPolicy,target:"_blank",className:"blue-link-hover _active inline",children:"применяем рекомендательные технологии"})]}),r.jsx(_e,{className:"mt-3",size:"Small",onClick:()=>{localStorage.setItem("cookie_accept",!0),e(!0)},children:"Принять"})]}),document.getElementById("overlay-wrapper"))},s8e=async()=>{try{return(await Ue("/api/cities")).data}catch(t){console.log(t)}},r8e=()=>{const[t,e]=v.useState([]),[n,s]=v.useState(!0);return v.useEffect(()=>{s8e().then(i=>{e(i),s(!1)})},[]),{cities:t,loading:n}};var QN={exports:{}},i8e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a8e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],rG=function(e){var n=e,s=e.indexOf("["),i=e.indexOf("]");s!=-1&&i!=-1&&(e=e.substring(0,s)+e.substring(s,i).replace(/:/g,";")+e.substring(i,e.length));for(var a=i8e.exec(e||""),o={},l=14;l--;)o[a8e[l]]=a[l]||"";return s!=-1&&i!=-1&&(o.source=n,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=o8e(o,o.path),o.queryKey=l8e(o,o.query),o};function o8e(t,e){var n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&s.splice(0,1),e.substr(e.length-1,1)=="/"&&s.splice(s.length-1,1),s}function l8e(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,a){i&&(n[i]=a)}),n}var ZN={exports:{}},JN={exports:{}},Mv=1e3,Ov=Mv*60,Rv=Ov*60,Lv=Rv*24,c8e=Lv*365.25,u8e=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return d8e(t);if(n==="number"&&isNaN(t)===!1)return e.long?f8e(t):h8e(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function d8e(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return n*c8e;case"days":case"day":case"d":return n*Lv;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Rv;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ov;case"seconds":case"second":case"secs":case"sec":case"s":return n*Mv;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function h8e(t){return t>=Lv?Math.round(t/Lv)+"d":t>=Rv?Math.round(t/Rv)+"h":t>=Ov?Math.round(t/Ov)+"m":t>=Mv?Math.round(t/Mv)+"s":t+"ms"}function f8e(t){return h1(t,Lv,"day")||h1(t,Rv,"hour")||h1(t,Ov,"minute")||h1(t,Mv,"second")||t+" ms"}function h1(t,e,n){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}(function(t,e){e=t.exports=s.debug=s.default=s,e.coerce=c,e.disable=o,e.enable=a,e.enabled=l,e.humanize=u8e,e.instances=[],e.names=[],e.skips=[],e.formatters={};function n(u){var d=0,h;for(h in u)d=(d<<5)-d+u.charCodeAt(h),d|=0;return e.colors[Math.abs(d)%e.colors.length]}function s(u){var d;function h(){if(h.enabled){var f=h,p=+new Date,g=p-(d||p);f.diff=g,f.prev=d,f.curr=p,d=p;for(var m=new Array(arguments.length),_=0;_<m.length;_++)m[_]=arguments[_];m[0]=e.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");var y=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,function(b,w){if(b==="%%")return b;y++;var C=e.formatters[w];if(typeof C=="function"){var j=m[y];b=C.call(f,j),m.splice(y,1),y--}return b}),e.formatArgs.call(f,m);var x=h.log||e.log||console.log.bind(console);x.apply(f,m)}}return h.namespace=u,h.enabled=e.enabled(u),h.useColors=e.useColors(),h.color=n(u),h.destroy=i,typeof e.init=="function"&&e.init(h),e.instances.push(h),h}function i(){var u=e.instances.indexOf(this);return u!==-1?(e.instances.splice(u,1),!0):!1}function a(u){e.save(u),e.names=[],e.skips=[];var d,h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?e.skips.push(new RegExp("^"+u.substr(1)+"$")):e.names.push(new RegExp("^"+u+"$")));for(d=0;d<e.instances.length;d++){var p=e.instances[d];p.enabled=e.enabled(p.namespace)}}function o(){e.enable("")}function l(u){if(u[u.length-1]==="*")return!0;var d,h;for(d=0,h=e.skips.length;d<h;d++)if(e.skips[d].test(u))return!1;for(d=0,h=e.names.length;d<h;d++)if(e.names[d].test(u))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}})(JN,JN.exports);var p8e=JN.exports;(function(t,e){var n={};e=t.exports=p8e,e.log=a,e.formatArgs=i,e.save=o,e.load=l,e.useColors=s,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function i(u){var d=this.useColors;if(u[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+u[0]+(d?"%c ":" ")+"+"+e.humanize(this.diff),!!d){var h="color: "+this.color;u.splice(1,0,h,"color: inherit");var f=0,p=0;u[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(f++,g==="%c"&&(p=f))}),u.splice(p,0,h)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(u){try{u==null?e.storage.removeItem("debug"):e.storage.debug=u}catch{}}function l(){var u;try{u=e.storage.debug}catch{}return!u&&typeof Tc<"u"&&"env"in Tc&&(u=n.DEBUG),u}e.enable(l());function c(){try{return window.localStorage}catch{}}})(ZN,ZN.exports);var gC=ZN.exports,m8e=rG,gR=gC("socket.io-client:url"),g8e=v8e;function v8e(t,e){var n=t;e=e||typeof location<"u"&&location,t==null&&(t=e.protocol+"//"+e.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=e.protocol+t:t=e.host+t),/^(https?|wss?):\/\//.test(t)||(gR("protocol-less url %s",t),typeof e<"u"?t=e.protocol+"//"+t:t="https://"+t),gR("parse %s",t),n=m8e(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var s=n.host.indexOf(":")!==-1,i=s?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port,n.href=n.protocol+"://"+i+(e&&e.port===n.port?"":":"+n.port),n}var vC={},e3={exports:{}},t3={exports:{}},Bv=1e3,Fv=Bv*60,$v=Fv*60,Uv=$v*24,y8e=Uv*365.25,x8e=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return b8e(t);if(n==="number"&&isNaN(t)===!1)return e.long?w8e(t):_8e(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function b8e(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return n*y8e;case"days":case"day":case"d":return n*Uv;case"hours":case"hour":case"hrs":case"hr":case"h":return n*$v;case"minutes":case"minute":case"mins":case"min":case"m":return n*Fv;case"seconds":case"second":case"secs":case"sec":case"s":return n*Bv;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function _8e(t){return t>=Uv?Math.round(t/Uv)+"d":t>=$v?Math.round(t/$v)+"h":t>=Fv?Math.round(t/Fv)+"m":t>=Bv?Math.round(t/Bv)+"s":t+"ms"}function w8e(t){return f1(t,Uv,"day")||f1(t,$v,"hour")||f1(t,Fv,"minute")||f1(t,Bv,"second")||t+" ms"}function f1(t,e,n){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}(function(t,e){e=t.exports=s.debug=s.default=s,e.coerce=c,e.disable=o,e.enable=a,e.enabled=l,e.humanize=x8e,e.instances=[],e.names=[],e.skips=[],e.formatters={};function n(u){var d=0,h;for(h in u)d=(d<<5)-d+u.charCodeAt(h),d|=0;return e.colors[Math.abs(d)%e.colors.length]}function s(u){var d;function h(){if(h.enabled){var f=h,p=+new Date,g=p-(d||p);f.diff=g,f.prev=d,f.curr=p,d=p;for(var m=new Array(arguments.length),_=0;_<m.length;_++)m[_]=arguments[_];m[0]=e.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");var y=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,function(b,w){if(b==="%%")return b;y++;var C=e.formatters[w];if(typeof C=="function"){var j=m[y];b=C.call(f,j),m.splice(y,1),y--}return b}),e.formatArgs.call(f,m);var x=h.log||e.log||console.log.bind(console);x.apply(f,m)}}return h.namespace=u,h.enabled=e.enabled(u),h.useColors=e.useColors(),h.color=n(u),h.destroy=i,typeof e.init=="function"&&e.init(h),e.instances.push(h),h}function i(){var u=e.instances.indexOf(this);return u!==-1?(e.instances.splice(u,1),!0):!1}function a(u){e.save(u),e.names=[],e.skips=[];var d,h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?e.skips.push(new RegExp("^"+u.substr(1)+"$")):e.names.push(new RegExp("^"+u+"$")));for(d=0;d<e.instances.length;d++){var p=e.instances[d];p.enabled=e.enabled(p.namespace)}}function o(){e.enable("")}function l(u){if(u[u.length-1]==="*")return!0;var d,h;for(d=0,h=e.skips.length;d<h;d++)if(e.skips[d].test(u))return!1;for(d=0,h=e.names.length;d<h;d++)if(e.names[d].test(u))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}})(t3,t3.exports);var C8e=t3.exports;(function(t,e){var n={};e=t.exports=C8e,e.log=a,e.formatArgs=i,e.save=o,e.load=l,e.useColors=s,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function i(u){var d=this.useColors;if(u[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+u[0]+(d?"%c ":" ")+"+"+e.humanize(this.diff),!!d){var h="color: "+this.color;u.splice(1,0,h,"color: inherit");var f=0,p=0;u[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(f++,g==="%c"&&(p=f))}),u.splice(p,0,h)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(u){try{u==null?e.storage.removeItem("debug"):e.storage.debug=u}catch{}}function l(){var u;try{u=e.storage.debug}catch{}return!u&&typeof Tc<"u"&&"env"in Tc&&(u=n.DEBUG),u}e.enable(l());function c(){try{return window.localStorage}catch{}}})(e3,e3.exports);var S8e=e3.exports,iG={exports:{}};(function(t){t.exports=e;function e(s){if(s)return n(s)}function n(s){for(var i in e.prototype)s[i]=e.prototype[i];return s}e.prototype.on=e.prototype.addEventListener=function(s,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(i),this},e.prototype.once=function(s,i){function a(){this.off(s,a),i.apply(this,arguments)}return a.fn=i,this.on(s,a),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(s,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+s];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var o,l=0;l<a.length;l++)if(o=a[l],o===i||o.fn===i){a.splice(l,1);break}return a.length===0&&delete this._callbacks["$"+s],this},e.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),a=this._callbacks["$"+s],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,l=a.length;o<l;++o)a[o].apply(this,i)}return this},e.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]},e.prototype.hasListeners=function(s){return!!this.listeners(s).length}})(iG);var Xm=iG.exports,yC={},j8e={}.toString,aG=Array.isArray||function(t){return j8e.call(t)=="[object Array]"},oG=k8e,T8e=typeof vl=="function"&&typeof vl.isBuffer=="function",E8e=typeof ArrayBuffer=="function",N8e=function(t){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer};function k8e(t){return T8e&&vl.isBuffer(t)||E8e&&(t instanceof ArrayBuffer||N8e(t))}var bD=aG,lG=oG,cG=Object.prototype.toString,A8e=typeof Blob=="function"||typeof Blob<"u"&&cG.call(Blob)==="[object BlobConstructor]",D8e=typeof File=="function"||typeof File<"u"&&cG.call(File)==="[object FileConstructor]";yC.deconstructPacket=function(t){var e=[],n=t.data,s=t;return s.data=n3(n,e),s.attachments=e.length,{packet:s,buffers:e}};function n3(t,e){if(!t)return t;if(lG(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}else if(bD(t)){for(var s=new Array(t.length),i=0;i<t.length;i++)s[i]=n3(t[i],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){var s={};for(var a in t)s[a]=n3(t[a],e);return s}return t}yC.reconstructPacket=function(t,e){return t.data=s3(t.data,e),t.attachments=void 0,t};function s3(t,e){if(!t)return t;if(t&&t._placeholder===!0){var n=typeof t.num=="number"&&t.num>=0&&t.num<e.length;if(n)return e[t.num];throw new Error("illegal attachments")}else if(bD(t))for(var s=0;s<t.length;s++)t[s]=s3(t[s],e);else if(typeof t=="object")for(var i in t)t[i]=s3(t[i],e);return t}yC.removeBlobs=function(t,e){function n(a,o,l){if(!a)return a;if(A8e&&a instanceof Blob||D8e&&a instanceof File){s++;var c=new FileReader;c.onload=function(){l?l[o]=this.result:i=this.result,--s||e(i)},c.readAsArrayBuffer(a)}else if(bD(a))for(var u=0;u<a.length;u++)n(a[u],u,a);else if(typeof a=="object"&&!lG(a))for(var d in a)n(a[d],d,a)}var s=0,i=t;n(i),s||e(i)};(function(t){var e=S8e("socket.io-parser"),n=Xm,s=yC,i=aG,a=oG;t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=o,t.Decoder=h;function o(){}var l=t.ERROR+'"encode error"';o.prototype.encode=function(y,x){if(e("encoding packet %j",y),t.BINARY_EVENT===y.type||t.BINARY_ACK===y.type)d(y,x);else{var b=c(y);x([b])}};function c(y){var x=""+y.type;if((t.BINARY_EVENT===y.type||t.BINARY_ACK===y.type)&&(x+=y.attachments+"-"),y.nsp&&y.nsp!=="/"&&(x+=y.nsp+","),y.id!=null&&(x+=y.id),y.data!=null){var b=u(y.data);if(b!==!1)x+=b;else return l}return e("encoded %j as %s",y,x),x}function u(y){try{return JSON.stringify(y)}catch{return!1}}function d(y,x){function b(w){var C=s.deconstructPacket(w),j=c(C.packet),E=C.buffers;E.unshift(j),x(E)}s.removeBlobs(y,b)}function h(){this.reconstructor=null}n(h.prototype),h.prototype.add=function(y){var x;if(typeof y=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");x=p(y),t.BINARY_EVENT===x.type||t.BINARY_ACK===x.type?(this.reconstructor=new m(x),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",x)):this.emit("decoded",x)}else if(a(y)||y.base64)if(this.reconstructor)x=this.reconstructor.takeBinaryData(y),x&&(this.reconstructor=null,this.emit("decoded",x));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+y)};function f(y,x){switch(y){case 0:return typeof x=="object";case 1:return x===void 0;case 4:return typeof x=="string"||typeof x=="object";case 2:case 5:return i(x)&&(typeof x[0]=="string"||typeof x[0]=="number");case 3:case 6:return i(x)}}function p(y){var x=0,b={type:Number(y.charAt(0))};if(t.types[b.type]==null)return _("unknown packet type "+b.type);if(t.BINARY_EVENT===b.type||t.BINARY_ACK===b.type){for(var w=x+1;y.charAt(++x)!=="-"&&x!=y.length;);var C=y.substring(w,x);if(C!=Number(C)||y.charAt(x)!=="-")throw new Error("Illegal attachments");b.attachments=Number(C)}if(y.charAt(x+1)==="/"){for(var w=x+1;++x;){var j=y.charAt(x);if(j===","||x===y.length)break}b.nsp=y.substring(w,x)}else b.nsp="/";var E=y.charAt(x+1);if(E!==""&&Number(E)==E){for(var w=x+1;++x;){var j=y.charAt(x);if(j==null||Number(j)!=j){--x;break}if(x===y.length)break}b.id=Number(y.substring(w,x+1))}if(y.charAt(++x)){var T=g(y.substr(x));if(f(b.type,T))b.data=T;else throw new Error("invalid payload")}return e("decoded %s as %j",y,b),b}function g(y){try{return JSON.parse(y)}catch{return!1}}h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function m(y){this.reconPack=y,this.buffers=[]}m.prototype.takeBinaryData=function(y){if(this.buffers.push(y),this.buffers.length===this.reconPack.attachments){var x=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),x}return null},m.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function _(y){return{type:t.ERROR,data:"parser error: "+y}}})(vC);var _D={exports:{}},xC={},r3={exports:{}};try{r3.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{r3.exports=!1}var P8e=r3.exports,wD=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),I8e=P8e,M8e=wD,CD=function(t){var e=t.xdomain,n=t.xscheme,s=t.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!e||I8e))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!n&&s)return new XDomainRequest}catch{}if(!e)try{return new M8e[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},SD={exports:{}},Zh={},O8e=Object.keys||function(e){var n=[],s=Object.prototype.hasOwnProperty;for(var i in e)s.call(e,i)&&n.push(i);return n},R8e={}.toString,L8e=Array.isArray||function(t){return R8e.call(t)=="[object Array]"},B8e=L8e,uG=Object.prototype.toString,F8e=typeof Blob=="function"||typeof Blob<"u"&&uG.call(Blob)==="[object BlobConstructor]",$8e=typeof File=="function"||typeof File<"u"&&uG.call(File)==="[object FileConstructor]",dG=nb;function nb(t){if(!t||typeof t!="object")return!1;if(B8e(t)){for(var e=0,n=t.length;e<n;e++)if(nb(t[e]))return!0;return!1}if(typeof vl=="function"&&vl.isBuffer&&vl.isBuffer(t)||typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||F8e&&t instanceof Blob||$8e&&t instanceof File)return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return nb(t.toJSON(),!0);for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&nb(t[s]))return!0;return!1}var U8e=function(t,e,n){var s=t.byteLength;if(e=e||0,n=n||s,t.slice)return t.slice(e,n);if(e<0&&(e+=s),n<0&&(n+=s),n>s&&(n=s),e>=s||e>=n||s===0)return new ArrayBuffer(0);for(var i=new Uint8Array(t),a=new Uint8Array(n-e),o=e,l=0;o<n;o++,l++)a[l]=i[o];return a.buffer},V8e=z8e;function z8e(t,e,n){var s=!1;return n=n||H8e,i.count=t,t===0?e():i;function i(a,o){if(i.count<=0)throw new Error("after called too many times");--i.count,a?(s=!0,e(a),e=n):i.count===0&&!s&&e(null,o)}}function H8e(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var Su=String.fromCharCode;function hG(t){for(var e=[],n=0,s=t.length,i,a;n<s;)i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<s?(a=t.charCodeAt(n++),(a&64512)==56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),n--)):e.push(i);return e}function q8e(t){for(var e=t.length,n=-1,s,i="";++n<e;)s=t[n],s>65535&&(s-=65536,i+=Su(s>>>10&1023|55296),s=56320|s&1023),i+=Su(s);return i}function fG(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function sT(t,e){return Su(t>>e&63|128)}function W8e(t,e){if(!(t&4294967168))return Su(t);var n="";return t&4294965248?t&4294901760?t&4292870144||(n=Su(t>>18&7|240),n+=sT(t,12),n+=sT(t,6)):(fG(t,e)||(t=65533),n=Su(t>>12&15|224),n+=sT(t,6)):n=Su(t>>6&31|192),n+=Su(t&63|128),n}function G8e(t,e){e=e||{};for(var n=e.strict!==!1,s=hG(t),i=s.length,a=-1,o,l="";++a<i;)o=s[a],l+=W8e(o,n);return l}function Pf(){if(Pu>=u2)throw Error("Invalid byte index");var t=c2[Pu]&255;if(Pu++,(t&192)==128)return t&63;throw Error("Invalid continuation byte")}function Y8e(t){var e,n,s,i,a;if(Pu>u2)throw Error("Invalid byte index");if(Pu==u2)return!1;if(e=c2[Pu]&255,Pu++,!(e&128))return e;if((e&224)==192){if(n=Pf(),a=(e&31)<<6|n,a>=128)return a;throw Error("Invalid continuation byte")}if((e&240)==224){if(n=Pf(),s=Pf(),a=(e&15)<<12|n<<6|s,a>=2048)return fG(a,t)?a:65533;throw Error("Invalid continuation byte")}if((e&248)==240&&(n=Pf(),s=Pf(),i=Pf(),a=(e&7)<<18|n<<12|s<<6|i,a>=65536&&a<=1114111))return a;throw Error("Invalid UTF-8 detected")}var c2,u2,Pu;function X8e(t,e){e=e||{};var n=e.strict!==!1;c2=hG(t),u2=c2.length,Pu=0;for(var s=[],i;(i=Y8e(n))!==!1;)s.push(i);return q8e(s)}var K8e={version:"2.1.2",encode:G8e,decode:X8e},p1={},vR;function Q8e(){return vR||(vR=1,function(t){p1.encode=function(e){var n=new Uint8Array(e),s,i=n.length,a="";for(s=0;s<i;s+=3)a+=t[n[s]>>2],a+=t[(n[s]&3)<<4|n[s+1]>>4],a+=t[(n[s+1]&15)<<2|n[s+2]>>6],a+=t[n[s+2]&63];return i%3===2?a=a.substring(0,a.length-1)+"=":i%3===1&&(a=a.substring(0,a.length-2)+"=="),a},p1.decode=function(e){var n=e.length*.75,s=e.length,i,a=0,o,l,c,u;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var d=new ArrayBuffer(n),h=new Uint8Array(d);for(i=0;i<s;i+=4)o=t.indexOf(e[i]),l=t.indexOf(e[i+1]),c=t.indexOf(e[i+2]),u=t.indexOf(e[i+3]),h[a++]=o<<2|l>>4,h[a++]=(l&15)<<4|c>>2,h[a++]=(c&3)<<6|u&63;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")),p1}var rT,yR;function Z8e(){if(yR)return rT;yR=1;var t=typeof t<"u"?t:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,e=function(){try{var l=new Blob(["hi"]);return l.size===2}catch{return!1}}(),n=e&&function(){try{var l=new Blob([new Uint8Array([1,2])]);return l.size===2}catch{return!1}}(),s=t&&t.prototype.append&&t.prototype.getBlob;function i(l){return l.map(function(c){if(c.buffer instanceof ArrayBuffer){var u=c.buffer;if(c.byteLength!==u.byteLength){var d=new Uint8Array(c.byteLength);d.set(new Uint8Array(u,c.byteOffset,c.byteLength)),u=d.buffer}return u}return c})}function a(l,c){c=c||{};var u=new t;return i(l).forEach(function(d){u.append(d)}),c.type?u.getBlob(c.type):u.getBlob()}function o(l,c){return new Blob(i(l),c||{})}return typeof Blob<"u"&&(a.prototype=Blob.prototype,o.prototype=Blob.prototype),rT=function(){return e?n?Blob:o:s?a:void 0}(),rT}(function(t){var e=O8e,n=dG,s=U8e,i=V8e,a=K8e,o;typeof ArrayBuffer<"u"&&(o=Q8e());var l=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),c=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),u=l||c;t.protocol=3;var d=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=e(d),f={type:"error",data:"parser error"},p=Z8e();t.encodePacket=function(w,C,j,E){typeof C=="function"&&(E=C,C=!1),typeof j=="function"&&(E=j,j=null);var T=w.data===void 0?void 0:w.data.buffer||w.data;if(typeof ArrayBuffer<"u"&&T instanceof ArrayBuffer)return m(w,C,E);if(typeof p<"u"&&T instanceof p)return y(w,C,E);if(T&&T.base64)return g(w,E);var N=d[w.type];return w.data!==void 0&&(N+=j?a.encode(String(w.data),{strict:!1}):String(w.data)),E(""+N)};function g(w,C){var j="b"+t.packets[w.type]+w.data.data;return C(j)}function m(w,C,j){if(!C)return t.encodeBase64Packet(w,j);var E=w.data,T=new Uint8Array(E),N=new Uint8Array(1+E.byteLength);N[0]=d[w.type];for(var P=0;P<T.length;P++)N[P+1]=T[P];return j(N.buffer)}function _(w,C,j){if(!C)return t.encodeBase64Packet(w,j);var E=new FileReader;return E.onload=function(){t.encodePacket({type:w.type,data:E.result},C,!0,j)},E.readAsArrayBuffer(w.data)}function y(w,C,j){if(!C)return t.encodeBase64Packet(w,j);if(u)return _(w,C,j);var E=new Uint8Array(1);E[0]=d[w.type];var T=new p([E.buffer,w.data]);return j(T)}t.encodeBase64Packet=function(w,C){var j="b"+t.packets[w.type];if(typeof p<"u"&&w.data instanceof p){var E=new FileReader;return E.onload=function(){var B=E.result.split(",")[1];C(j+B)},E.readAsDataURL(w.data)}var T;try{T=String.fromCharCode.apply(null,new Uint8Array(w.data))}catch{for(var N=new Uint8Array(w.data),P=new Array(N.length),I=0;I<N.length;I++)P[I]=N[I];T=String.fromCharCode.apply(null,P)}return j+=btoa(T),C(j)},t.decodePacket=function(w,C,j){if(w===void 0)return f;if(typeof w=="string"){if(w.charAt(0)==="b")return t.decodeBase64Packet(w.substr(1),C);if(j&&(w=x(w),w===!1))return f;var T=w.charAt(0);return Number(T)!=T||!h[T]?f:w.length>1?{type:h[T],data:w.substring(1)}:{type:h[T]}}var E=new Uint8Array(w),T=E[0],N=s(w,1);return p&&C==="blob"&&(N=new p([N])),{type:h[T],data:N}};function x(w){try{w=a.decode(w,{strict:!1})}catch{return!1}return w}t.decodeBase64Packet=function(w,C){var j=h[w.charAt(0)];if(!o)return{type:j,data:{base64:!0,data:w.substr(1)}};var E=o.decode(w.substr(1));return C==="blob"&&p&&(E=new p([E])),{type:j,data:E}},t.encodePayload=function(w,C,j){typeof C=="function"&&(j=C,C=null);var E=n(w);if(C&&E)return p&&!u?t.encodePayloadAsBlob(w,j):t.encodePayloadAsArrayBuffer(w,j);if(!w.length)return j("0:");function T(P){return P.length+":"+P}function N(P,I){t.encodePacket(P,E?C:!1,!1,function(B){I(null,T(B))})}b(w,N,function(P,I){return j(I.join(""))})};function b(w,C,j){for(var E=new Array(w.length),T=i(w.length,j),N=function(I,B,U){C(B,function(z,G){E[I]=G,U(z,E)})},P=0;P<w.length;P++)N(P,w[P],T)}t.decodePayload=function(w,C,j){if(typeof w!="string")return t.decodePayloadAsBinary(w,C,j);typeof C=="function"&&(j=C,C=null);var E;if(w==="")return j(f,0,1);for(var T="",N,P,I=0,B=w.length;I<B;I++){var U=w.charAt(I);if(U!==":"){T+=U;continue}if(T===""||T!=(N=Number(T))||(P=w.substr(I+1,N),T!=P.length))return j(f,0,1);if(P.length){if(E=t.decodePacket(P,C,!1),f.type===E.type&&f.data===E.data)return j(f,0,1);var z=j(E,I+N,B);if(z===!1)return}I+=N,T=""}if(T!=="")return j(f,0,1)},t.encodePayloadAsArrayBuffer=function(w,C){if(!w.length)return C(new ArrayBuffer(0));function j(E,T){t.encodePacket(E,!0,!0,function(N){return T(null,N)})}b(w,j,function(E,T){var N=T.reduce(function(B,U){var z;return typeof U=="string"?z=U.length:z=U.byteLength,B+z.toString().length+z+2},0),P=new Uint8Array(N),I=0;return T.forEach(function(B){var U=typeof B=="string",z=B;if(U){for(var J=new Uint8Array(B.length),G=0;G<B.length;G++)J[G]=B.charCodeAt(G);z=J.buffer}U?P[I++]=0:P[I++]=1;for(var V=z.byteLength.toString(),G=0;G<V.length;G++)P[I++]=parseInt(V[G]);P[I++]=255;for(var J=new Uint8Array(z),G=0;G<J.length;G++)P[I++]=J[G]}),C(P.buffer)})},t.encodePayloadAsBlob=function(w,C){function j(E,T){t.encodePacket(E,!0,!0,function(N){var P=new Uint8Array(1);if(P[0]=1,typeof N=="string"){for(var I=new Uint8Array(N.length),B=0;B<N.length;B++)I[B]=N.charCodeAt(B);N=I.buffer,P[0]=0}for(var U=N instanceof ArrayBuffer?N.byteLength:N.size,z=U.toString(),G=new Uint8Array(z.length+1),B=0;B<z.length;B++)G[B]=parseInt(z[B]);if(G[z.length]=255,p){var V=new p([P.buffer,G.buffer,N]);T(null,V)}})}b(w,j,function(E,T){return C(new p(T))})},t.decodePayloadAsBinary=function(w,C,j){typeof C=="function"&&(j=C,C=null);for(var E=w,T=[];E.byteLength>0;){for(var N=new Uint8Array(E),P=N[0]===0,I="",B=1;N[B]!==255;B++){if(I.length>310)return j(f,0,1);I+=N[B]}E=s(E,2+I.length),I=parseInt(I);var U=s(E,0,I);if(P)try{U=String.fromCharCode.apply(null,new Uint8Array(U))}catch{var z=new Uint8Array(U);U="";for(var B=0;B<z.length;B++)U+=String.fromCharCode(z[B])}T.push(U),E=s(E,I)}var G=T.length;T.forEach(function(V,J){j(t.decodePacket(V,C,!0),J,G)})}})(Zh);var iT,xR;function jD(){if(xR)return iT;xR=1;var t=Zh,e=Xm;iT=n;function n(s){this.path=s.path,this.hostname=s.hostname,this.port=s.port,this.secure=s.secure,this.query=s.query,this.timestampParam=s.timestampParam,this.timestampRequests=s.timestampRequests,this.readyState="",this.agent=s.agent||!1,this.socket=s.socket,this.enablesXDR=s.enablesXDR,this.withCredentials=s.withCredentials,this.pfx=s.pfx,this.key=s.key,this.passphrase=s.passphrase,this.cert=s.cert,this.ca=s.ca,this.ciphers=s.ciphers,this.rejectUnauthorized=s.rejectUnauthorized,this.forceNode=s.forceNode,this.isReactNative=s.isReactNative,this.extraHeaders=s.extraHeaders,this.localAddress=s.localAddress}return e(n.prototype),n.prototype.onError=function(s,i){var a=new Error(s);return a.type="TransportError",a.description=i,this.emit("error",a),this},n.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},n.prototype.send=function(s){if(this.readyState==="open")this.write(s);else throw new Error("Transport not open")},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(s){var i=t.decodePacket(s,this.socket.binaryType);this.onPacket(i)},n.prototype.onPacket=function(s){this.emit("packet",s)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")},iT}var Km={};Km.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e};Km.decode=function(t){for(var e={},n=t.split("&"),s=0,i=n.length;s<i;s++){var a=n[s].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e};var bC=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},pG="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),d2=64,mG={},bR=0,Iu=0,_R;function i3(t){var e="";do e=pG[t%d2]+e,t=Math.floor(t/d2);while(t>0);return e}function J8e(t){var e=0;for(Iu=0;Iu<t.length;Iu++)e=e*d2+mG[t.charAt(Iu)];return e}function TD(){var t=i3(+new Date);return t!==_R?(bR=0,_R=t):t+"."+i3(bR++)}for(;Iu<d2;Iu++)mG[pG[Iu]]=Iu;TD.encode=i3;TD.decode=J8e;var gG=TD,a3={exports:{}},o3={exports:{}},Vv=1e3,zv=Vv*60,Hv=zv*60,qv=Hv*24,eRe=qv*365.25,tRe=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return nRe(t);if(n==="number"&&isNaN(t)===!1)return e.long?rRe(t):sRe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function nRe(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return n*eRe;case"days":case"day":case"d":return n*qv;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Hv;case"minutes":case"minute":case"mins":case"min":case"m":return n*zv;case"seconds":case"second":case"secs":case"sec":case"s":return n*Vv;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function sRe(t){return t>=qv?Math.round(t/qv)+"d":t>=Hv?Math.round(t/Hv)+"h":t>=zv?Math.round(t/zv)+"m":t>=Vv?Math.round(t/Vv)+"s":t+"ms"}function rRe(t){return m1(t,qv,"day")||m1(t,Hv,"hour")||m1(t,zv,"minute")||m1(t,Vv,"second")||t+" ms"}function m1(t,e,n){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}(function(t,e){e=t.exports=s.debug=s.default=s,e.coerce=c,e.disable=o,e.enable=a,e.enabled=l,e.humanize=tRe,e.instances=[],e.names=[],e.skips=[],e.formatters={};function n(u){var d=0,h;for(h in u)d=(d<<5)-d+u.charCodeAt(h),d|=0;return e.colors[Math.abs(d)%e.colors.length]}function s(u){var d;function h(){if(h.enabled){var f=h,p=+new Date,g=p-(d||p);f.diff=g,f.prev=d,f.curr=p,d=p;for(var m=new Array(arguments.length),_=0;_<m.length;_++)m[_]=arguments[_];m[0]=e.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");var y=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,function(b,w){if(b==="%%")return b;y++;var C=e.formatters[w];if(typeof C=="function"){var j=m[y];b=C.call(f,j),m.splice(y,1),y--}return b}),e.formatArgs.call(f,m);var x=h.log||e.log||console.log.bind(console);x.apply(f,m)}}return h.namespace=u,h.enabled=e.enabled(u),h.useColors=e.useColors(),h.color=n(u),h.destroy=i,typeof e.init=="function"&&e.init(h),e.instances.push(h),h}function i(){var u=e.instances.indexOf(this);return u!==-1?(e.instances.splice(u,1),!0):!1}function a(u){e.save(u),e.names=[],e.skips=[];var d,h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?e.skips.push(new RegExp("^"+u.substr(1)+"$")):e.names.push(new RegExp("^"+u+"$")));for(d=0;d<e.instances.length;d++){var p=e.instances[d];p.enabled=e.enabled(p.namespace)}}function o(){e.enable("")}function l(u){if(u[u.length-1]==="*")return!0;var d,h;for(d=0,h=e.skips.length;d<h;d++)if(e.skips[d].test(u))return!1;for(d=0,h=e.names.length;d<h;d++)if(e.names[d].test(u))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}})(o3,o3.exports);var iRe=o3.exports;(function(t,e){var n={};e=t.exports=iRe,e.log=a,e.formatArgs=i,e.save=o,e.load=l,e.useColors=s,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function i(u){var d=this.useColors;if(u[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+u[0]+(d?"%c ":" ")+"+"+e.humanize(this.diff),!!d){var h="color: "+this.color;u.splice(1,0,h,"color: inherit");var f=0,p=0;u[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(f++,g==="%c"&&(p=f))}),u.splice(p,0,h)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(u){try{u==null?e.storage.removeItem("debug"):e.storage.debug=u}catch{}}function l(){var u;try{u=e.storage.debug}catch{}return!u&&typeof Tc<"u"&&"env"in Tc&&(u=n.DEBUG),u}e.enable(l());function c(){try{return window.localStorage}catch{}}})(a3,a3.exports);var _C=a3.exports,vG=jD(),aRe=Km,yG=Zh,oRe=bC,lRe=gG,No=_C("engine.io-client:polling"),xG=Fl,cRe=function(){var t=CD,e=new t({xdomain:!1});return e.responseType!=null}();function Fl(t){var e=t&&t.forceBase64;(!cRe||e)&&(this.supportsBinary=!1),vG.call(this,t)}oRe(Fl,vG);Fl.prototype.name="polling";Fl.prototype.doOpen=function(){this.poll()};Fl.prototype.pause=function(t){var e=this;this.readyState="pausing";function n(){No("paused"),e.readyState="paused",t()}if(this.polling||!this.writable){var s=0;this.polling&&(No("we are currently polling - waiting to pause"),s++,this.once("pollComplete",function(){No("pre-pause polling complete"),--s||n()})),this.writable||(No("we are currently writing - waiting to pause"),s++,this.once("drain",function(){No("pre-pause writing complete"),--s||n()}))}else n()};Fl.prototype.poll=function(){No("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};Fl.prototype.onData=function(t){var e=this;No("polling got data %s",t);var n=function(s,i,a){if(e.readyState==="opening"&&s.type==="open"&&e.onOpen(),s.type==="close")return e.onClose(),!1;e.onPacket(s)};yG.decodePayload(t,this.socket.binaryType,n),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():No('ignoring poll - transport state "%s"',this.readyState))};Fl.prototype.doClose=function(){var t=this;function e(){No("writing close packet"),t.write([{type:"close"}])}this.readyState==="open"?(No("transport open - closing"),e()):(No("transport not open - deferring close"),this.once("open",e))};Fl.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};yG.encodePayload(t,this.supportsBinary,function(s){e.doWrite(s,n)})};Fl.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";this.timestampRequests!==!1&&(t[this.timestampParam]=lRe()),!this.supportsBinary&&!t.sid&&(t.b64=1),t=aRe.encode(t),this.port&&(e==="https"&&Number(this.port)!==443||e==="http"&&Number(this.port)!==80)&&(n=":"+this.port),t.length&&(t="?"+t);var s=this.hostname.indexOf(":")!==-1;return e+"://"+(s?"["+this.hostname+"]":this.hostname)+n+this.path+t};var uRe=CD,bG=xG,dRe=Xm,hRe=bC,l3=_C("engine.io-client:polling-xhr"),fRe=wD;SD.exports=Qm;SD.exports.Request=or;function wR(){}function Qm(t){if(bG.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,typeof location<"u"){var e=location.protocol==="https:",n=location.port;n||(n=e?443:80),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}hRe(Qm,bG);Qm.prototype.supportsBinary=!0;Qm.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new or(t)};Qm.prototype.doWrite=function(t,e){var n=typeof t!="string"&&t!==void 0,s=this.request({method:"POST",data:t,isBinary:n}),i=this;s.on("success",e),s.on("error",function(a){i.onError("xhr post error",a)}),this.sendXhr=s};Qm.prototype.doPoll=function(){l3("xhr poll");var t=this.request(),e=this;t.on("data",function(n){e.onData(n)}),t.on("error",function(n){e.onError("xhr poll error",n)}),this.pollXhr=t};function or(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}dRe(or.prototype);or.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new uRe(t),n=this;try{l3("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(var s in this.extraHeaders)this.extraHeaders.hasOwnProperty(s)&&e.setRequestHeader(s,this.extraHeaders[s])}}catch{}if(this.method==="POST")try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{e.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(e.readyState===2)try{var i=e.getResponseHeader("Content-Type");(n.supportsBinary&&i==="application/octet-stream"||i==="application/octet-stream; charset=UTF-8")&&(e.responseType="arraybuffer")}catch{}e.readyState===4&&(e.status===200||e.status===1223?n.onLoad():setTimeout(function(){n.onError(typeof e.status=="number"?e.status:0)},0))},l3("xhr data %s",this.data),e.send(this.data)}catch(i){setTimeout(function(){n.onError(i)},0);return}typeof document<"u"&&(this.index=or.requestsCount++,or.requests[this.index]=this)};or.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};or.prototype.onData=function(t){this.emit("data",t),this.onSuccess()};or.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)};or.prototype.cleanup=function(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=wR:this.xhr.onreadystatechange=wR,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete or.requests[this.index],this.xhr=null}};or.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch{}e==="application/octet-stream"||e==="application/octet-stream; charset=UTF-8"?t=this.xhr.response||this.xhr.responseText:t=this.xhr.responseText}catch(n){this.onError(n)}t!=null&&this.onData(t)};or.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR};or.prototype.abort=function(){this.cleanup()};or.requestsCount=0;or.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",CR);else if(typeof addEventListener=="function"){var pRe="onpagehide"in fRe?"pagehide":"unload";addEventListener(pRe,CR,!1)}}function CR(){for(var t in or.requests)or.requests.hasOwnProperty(t)&&or.requests[t].abort()}var mRe=SD.exports,ED=xG,gRe=bC,SR=wD,vRe=Zm,yRe=/\n/g,xRe=/\\n/g,g1;function bRe(){}function Zm(t){ED.call(this,t),this.query=this.query||{},g1||(g1=SR.___eio=SR.___eio||[]),this.index=g1.length;var e=this;g1.push(function(n){e.onData(n)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=bRe)},!1)}gRe(Zm,ED);Zm.prototype.supportsBinary=!1;Zm.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),ED.prototype.doClose.call(this)};Zm.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(i){t.onError("jsonp poll error",i)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;var s=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);s&&setTimeout(function(){var i=document.createElement("iframe");document.body.appendChild(i),document.body.removeChild(i)},100)};Zm.prototype.doWrite=function(t,e){var n=this;if(!this.form){var s=document.createElement("form"),i=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index,o;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=a,s.method="POST",s.setAttribute("accept-charset","utf-8"),i.name="d",s.appendChild(i),document.body.appendChild(s),this.form=s,this.area=i}this.form.action=this.uri();function l(){c(),e()}function c(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(d){n.onError("jsonp polling iframe removal error",d)}try{var u='<iframe src="javascript:0" name="'+n.iframeId+'">';o=document.createElement(u)}catch{o=document.createElement("iframe"),o.name=n.iframeId,o.src="javascript:0"}o.id=n.iframeId,n.form.appendChild(o),n.iframe=o}c(),t=t.replace(xRe,`\\
`),this.area.value=t.replace(yRe,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){n.iframe.readyState==="complete"&&l()}:this.iframe.onload=l};var ND=jD(),_Re=Zh,wRe=Km,CRe=bC,SRe=gG,jRe=_C("engine.io-client:websocket"),h2,kD;typeof WebSocket<"u"?h2=WebSocket:typeof self<"u"&&(h2=self.WebSocket||self.MozWebSocket);if(typeof window>"u")try{kD=uk}catch{}var wp=h2||kD,TRe=oo;function oo(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=h2&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(wp=kD),ND.call(this,t)}CRe(oo,ND);oo.prototype.name="websocket";oo.prototype.supportsBinary=!0;oo.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new wp(t,e):new wp(t):new wp(t,e,n)}catch(s){return this.emit("error",s)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};oo.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}};oo.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,s=0,i=n;s<i;s++)(function(o){_Re.encodePacket(o,e.supportsBinary,function(l){if(!e.usingBrowserWebSocket){var c={};if(o.options&&(c.compress=o.options.compress),e.perMessageDeflate){var u=typeof l=="string"?vl.byteLength(l):l.length;u<e.perMessageDeflate.threshold&&(c.compress=!1)}}try{e.usingBrowserWebSocket?e.ws.send(l):e.ws.send(l,c)}catch{jRe("websocket closed before onclose event")}--n||a()})})(t[s]);function a(){e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0)}};oo.prototype.onClose=function(){ND.prototype.onClose.call(this)};oo.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};oo.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";this.port&&(e==="wss"&&Number(this.port)!==443||e==="ws"&&Number(this.port)!==80)&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=SRe()),this.supportsBinary||(t.b64=1),t=wRe.encode(t),t.length&&(t="?"+t);var s=this.hostname.indexOf(":")!==-1;return e+"://"+(s?"["+this.hostname+"]":this.hostname)+n+this.path+t};oo.prototype.check=function(){return!!wp&&!("__initialize"in wp&&this.name===oo.prototype.name)};var ERe=CD,NRe=mRe,kRe=vRe,ARe=TRe;xC.polling=DRe;xC.websocket=ARe;function DRe(t){var e,n=!1,s=!1,i=t.jsonp!==!1;if(typeof location<"u"){var a=location.protocol==="https:",o=location.port;o||(o=a?443:80),n=t.hostname!==location.hostname||o!==t.port,s=t.secure!==a}if(t.xdomain=n,t.xscheme=s,e=new ERe(t),"open"in e&&!t.forceJSONP)return new NRe(t);if(!i)throw new Error("JSONP disabled");return new kRe(t)}var PRe=[].indexOf,_G=function(t,e){if(PRe)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1},IRe=xC,MRe=Xm,Gs=_C("engine.io-client:socket"),ORe=_G,wG=Zh,jR=rG,RRe=Km,LRe=rn;function rn(t,e){if(!(this instanceof rn))return new rn(t,e);e=e||{},t&&typeof t=="object"&&(e=t,t=null),t?(t=jR(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=jR(e.host).host),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=e.query||{},typeof this.query=="string"&&(this.query=RRe.decode(this.query)),this.upgrade=e.upgrade!==!1,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=e.jsonp!==!1,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=e.withCredentials!==!1,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=e.perMessageDeflate!==!1?e.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||void 0,this.key=e.key||void 0,this.passphrase=e.passphrase||void 0,this.cert=e.cert||void 0,this.ca=e.ca||void 0,this.ciphers=e.ciphers||void 0,this.rejectUnauthorized=e.rejectUnauthorized===void 0?!0:e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}rn.priorWebsocketSuccess=!1;MRe(rn.prototype);rn.protocol=wG.protocol;rn.Socket=rn;rn.Transport=jD();rn.transports=xC;rn.parser=Zh;rn.prototype.createTransport=function(t){Gs('creating transport "%s"',t);var e=BRe(this.query);e.EIO=wG.protocol,e.transport=t;var n=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var s=new IRe[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative});return s};function BRe(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}rn.prototype.open=function(){var t;if(this.rememberUpgrade&&rn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){var e=this;setTimeout(function(){e.emit("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)};rn.prototype.setTransport=function(t){Gs("setting transport %s",t.name);var e=this;this.transport&&(Gs("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(n){e.onPacket(n)}).on("error",function(n){e.onError(n)}).on("close",function(){e.onClose("transport close")})};rn.prototype.probe=function(t){Gs('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,s=this;rn.priorWebsocketSuccess=!1;function i(){if(s.onlyBinaryUpgrades){var h=!this.supportsBinary&&s.transport.supportsBinary;n=n||h}n||(Gs('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(f){if(!n)if(f.type==="pong"&&f.data==="probe"){if(Gs('probe transport "%s" pong',t),s.upgrading=!0,s.emit("upgrading",e),!e)return;rn.priorWebsocketSuccess=e.name==="websocket",Gs('pausing current transport "%s"',s.transport.name),s.transport.pause(function(){n||s.readyState!=="closed"&&(Gs("changing transport and sending upgrade packet"),d(),s.setTransport(e),e.send([{type:"upgrade"}]),s.emit("upgrade",e),e=null,s.upgrading=!1,s.flush())})}else{Gs('probe transport "%s" failed',t);var p=new Error("probe error");p.transport=e.name,s.emit("upgradeError",p)}}))}function a(){n||(n=!0,d(),e.close(),e=null)}function o(h){var f=new Error("probe error: "+h);f.transport=e.name,a(),Gs('probe transport "%s" failed because of error: %s',t,h),s.emit("upgradeError",f)}function l(){o("transport closed")}function c(){o("socket closed")}function u(h){e&&h.name!==e.name&&(Gs('"%s" works - aborting "%s"',h.name,e.name),a())}function d(){e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",l),s.removeListener("close",c),s.removeListener("upgrading",u)}e.once("open",i),e.once("error",o),e.once("close",l),this.once("close",c),this.once("upgrading",u),e.open()};rn.prototype.onOpen=function(){if(Gs("socket open"),this.readyState="open",rn.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){Gs("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}};rn.prototype.onPacket=function(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Gs('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data);break}else Gs('packet received with socket readyState "%s"',this.readyState)};rn.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};rn.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){e.readyState!=="closed"&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)};rn.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){Gs("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)};rn.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})};rn.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};rn.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Gs("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};rn.prototype.write=rn.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this};rn.prototype.sendPacket=function(t,e,n,s){if(typeof e=="function"&&(s=e,e=void 0),typeof n=="function"&&(s=n,n=null),!(this.readyState==="closing"||this.readyState==="closed")){n=n||{},n.compress=n.compress!==!1;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}};rn.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?s():e()}):this.upgrading?s():e()}function e(){t.onClose("forced close"),Gs("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function s(){t.once("upgrade",n),t.once("upgradeError",n)}return this};rn.prototype.onError=function(t){Gs("socket error %j",t),rn.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)};rn.prototype.onClose=function(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){Gs('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}};rn.prototype.filterUpgrades=function(t){for(var e=[],n=0,s=t.length;n<s;n++)~ORe(this.transports,t[n])&&e.push(t[n]);return e};_D.exports=LRe;_D.exports.parser=Zh;var FRe=_D.exports,CG={exports:{}},$Re=URe;function URe(t,e){var n=[];e=e||0;for(var s=e||0;s<t.length;s++)n[s-e]=t[s];return n}var SG=VRe;function VRe(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}var TR=[].slice,jG=function(t,e){if(typeof e=="string"&&(e=t[e]),typeof e!="function")throw new Error("bind() requires a function");var n=TR.call(arguments,2);return function(){return e.apply(t,n.concat(TR.call(arguments)))}};(function(t,e){var n=vC,s=Xm,i=$Re,a=SG,o=jG,l=gC("socket.io-client:socket"),c=Km,u=dG;t.exports=f;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=s.prototype.emit;function f(p,g,m){this.io=p,this.nsp=g,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},m&&m.query&&(this.query=m.query),this.io.autoConnect&&this.open()}s(f.prototype),f.prototype.subEvents=function(){if(!this.subs){var p=this.io;this.subs=[a(p,"open",o(this,"onopen")),a(p,"packet",o(this,"onpacket")),a(p,"close",o(this,"onclose"))]}},f.prototype.open=f.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},f.prototype.send=function(){var p=i(arguments);return p.unshift("message"),this.emit.apply(this,p),this},f.prototype.emit=function(p){if(d.hasOwnProperty(p))return h.apply(this,arguments),this;var g=i(arguments),m={type:(this.flags.binary!==void 0?this.flags.binary:u(g))?n.BINARY_EVENT:n.EVENT,data:g};return m.options={},m.options.compress=!this.flags||this.flags.compress!==!1,typeof g[g.length-1]=="function"&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=g.pop(),m.id=this.ids++),this.connected?this.packet(m):this.sendBuffer.push(m),this.flags={},this},f.prototype.packet=function(p){p.nsp=this.nsp,this.io.packet(p)},f.prototype.onopen=function(){if(l("transport is open - connecting"),this.nsp!=="/")if(this.query){var p=typeof this.query=="object"?c.encode(this.query):this.query;l("sending connect packet with query %s",p),this.packet({type:n.CONNECT,query:p})}else this.packet({type:n.CONNECT})},f.prototype.onclose=function(p){l("close (%s)",p),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",p)},f.prototype.onpacket=function(p){var g=p.nsp===this.nsp,m=p.type===n.ERROR&&p.nsp==="/";if(!(!g&&!m))switch(p.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(p);break;case n.BINARY_EVENT:this.onevent(p);break;case n.ACK:this.onack(p);break;case n.BINARY_ACK:this.onack(p);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",p.data);break}},f.prototype.onevent=function(p){var g=p.data||[];l("emitting event %j",g),p.id!=null&&(l("attaching ack callback to event"),g.push(this.ack(p.id))),this.connected?h.apply(this,g):this.receiveBuffer.push(g)},f.prototype.ack=function(p){var g=this,m=!1;return function(){if(!m){m=!0;var _=i(arguments);l("sending ack %j",_),g.packet({type:u(_)?n.BINARY_ACK:n.ACK,id:p,data:_})}}},f.prototype.onack=function(p){var g=this.acks[p.id];typeof g=="function"?(l("calling ack %s with %j",p.id,p.data),g.apply(this,p.data),delete this.acks[p.id]):l("bad ack %s",p.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},f.prototype.emitBuffered=function(){var p;for(p=0;p<this.receiveBuffer.length;p++)h.apply(this,this.receiveBuffer[p]);for(this.receiveBuffer=[],p=0;p<this.sendBuffer.length;p++)this.packet(this.sendBuffer[p]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var p=0;p<this.subs.length;p++)this.subs[p].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(p){return this.flags.compress=p,this},f.prototype.binary=function(p){return this.flags.binary=p,this}})(CG);var TG=CG.exports,zRe=Jm;function Jm(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Jm.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Jm.prototype.reset=function(){this.attempts=0};Jm.prototype.setMin=function(t){this.ms=t};Jm.prototype.setMax=function(t){this.max=t};Jm.prototype.setJitter=function(t){this.jitter=t};var HRe=FRe,qRe=TG,WRe=Xm,GRe=vC,xu=SG,If=jG,Hr=gC("socket.io-client:manager"),EG=_G,YRe=zRe,NG=Object.prototype.hasOwnProperty,ER=mn;function mn(t,e){if(!(this instanceof mn))return new mn(t,e);t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new YRe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||GRe;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}mn.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)NG.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)};mn.prototype.updateSocketIds=function(){for(var t in this.nsps)NG.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))};mn.prototype.generateId=function(t){return(t==="/"?"":t+"#")+this.engine.id};WRe(mn.prototype);mn.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection};mn.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts};mn.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay};mn.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor};mn.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax};mn.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout};mn.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};mn.prototype.open=mn.prototype.connect=function(t,e){if(Hr("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Hr("opening %s",this.uri),this.engine=HRe(this.uri,this.opts);var n=this.engine,s=this;this.readyState="opening",this.skipReconnect=!1;var i=xu(n,"open",function(){s.onopen(),t&&t()}),a=xu(n,"error",function(c){if(Hr("connect_error"),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",c),t){var u=new Error("Connection error");u.data=c,t(u)}else s.maybeReconnectOnOpen()});if(this._timeout!==!1){var o=this._timeout;Hr("connect attempt will timeout after %d",o),o===0&&i.destroy();var l=setTimeout(function(){Hr("connect attempt timed out after %d",o),i.destroy(),n.close(),n.emit("error","timeout"),s.emitAll("connect_timeout",o)},o);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(i),this.subs.push(a),this};mn.prototype.onopen=function(){Hr("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(xu(t,"data",If(this,"ondata"))),this.subs.push(xu(t,"ping",If(this,"onping"))),this.subs.push(xu(t,"pong",If(this,"onpong"))),this.subs.push(xu(t,"error",If(this,"onerror"))),this.subs.push(xu(t,"close",If(this,"onclose"))),this.subs.push(xu(this.decoder,"decoded",If(this,"ondecoded")))};mn.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};mn.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};mn.prototype.ondata=function(t){this.decoder.add(t)};mn.prototype.ondecoded=function(t){this.emit("packet",t)};mn.prototype.onerror=function(t){Hr("error",t),this.emitAll("error",t)};mn.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new qRe(this,t,e),this.nsps[t]=n;var s=this;n.on("connecting",i),n.on("connect",function(){n.id=s.generateId(t)}),this.autoConnect&&i()}function i(){~EG(s.connecting,n)||s.connecting.push(n)}return n};mn.prototype.destroy=function(t){var e=EG(this.connecting,t);~e&&this.connecting.splice(e,1),!this.connecting.length&&this.close()};mn.prototype.packet=function(t){Hr("writing packet %j",t);var e=this;t.query&&t.type===0&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var s=0;s<n.length;s++)e.engine.write(n[s],t.options);e.encoding=!1,e.processPacketQueue()}))};mn.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}};mn.prototype.cleanup=function(){Hr("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};mn.prototype.close=mn.prototype.disconnect=function(){Hr("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};mn.prototype.onclose=function(t){Hr("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()};mn.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)Hr("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();Hr("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(Hr("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),!t.skipReconnect&&t.open(function(s){s?(Hr("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",s.data)):(Hr("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}};mn.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};(function(t,e){var n=g8e,s=vC,i=ER,a=gC("socket.io-client");t.exports=e=l;var o=e.managers={};function l(c,u){typeof c=="object"&&(u=c,c=void 0),u=u||{};var d=n(c),h=d.source,f=d.id,p=d.path,g=o[f]&&p in o[f].nsps,m=u.forceNew||u["force new connection"]||u.multiplex===!1||g,_;return m?(a("ignoring socket cache for %s",h),_=i(h,u)):(o[f]||(a("new io instance for %s",h),o[f]=i(h,u)),_=o[f]),d.query&&!u.query&&(u.query=d.query),_.socket(d.path,u)}e.protocol=s.protocol,e.connect=l,e.Manager=ER,e.Socket=TG})(QN,QN.exports);var XRe=QN.exports;const KRe=In(XRe),QRe=()=>{const t=Dt(),e=v.useCallback(es(()=>{const n=window.innerHeight;t($Z({width:window.innerWidth,height:n})),document.documentElement.style.setProperty("--vh",`${n}px`)},200),[]);v.useEffect(()=>(window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}),[]),v.useEffect(()=>{e()},[]),v.useEffect(()=>(window.io=KRe,()=>{delete window.io}),[])},ZRe=(t,e)=>{const[n]=ur(),[s,i]=v.useState(!1),a=Dt(),o=async c=>{const u=await Me("/api/city/get-info",{city:c.id}).then(h=>h.data),d={...c,data:u};localStorage.setItem("cityData",JSON.stringify(d)),a(oE(d))},l=async c=>{if(!(c!=null&&c.length))return;const u=c.find(d=>+d.id==3);await o({id:u.id,name:u.name,geo:[u.latitude,u.longitude]})};return v.useEffect(()=>{const c=JSON.parse(localStorage.getItem("cityData"));c&&a(oE(c))},[]),v.useEffect(()=>{if(!(t!=null&&t.length)||n.loggedIn&&Ye(e))return;a(A1(t)),(async()=>{JSON.parse(localStorage.getItem("cityData"))||await l(t),a(Wse(!0)),i(!0)})()},[t,e]),{initCities:s,setCity:o,setCityDefault:l}},JRe=t=>t.filter(e=>e.name!=="Краснодарский край"&&e.name!=="Москва"&&e.name!=="Анапа"&&e.name!=="Туапсе"&&e.name!=="Новороссийск"),eLe=(t,e)=>t.filter(n=>e.cities.includes(n.id)),tLe=()=>{const[t]=ur(),e=Dt();QRe();const{cities:n}=r8e(),s=ue(Ot),{initCities:i,setCity:a,setCityDefault:o}=ZRe(n,s),{setAuthUser:l,userConnectionEcho:c}=u4(),u=ue(Ci);return v.useEffect(()=>{if(!t.loggedIn){e(Pb({}));return}l().then(c)},[]),v.useEffect(()=>{var d,h,f;if(i){if(Ye(s)||((d=s.role)==null?void 0:d.id)===sn.id){const p=JRe(n);p.find(g=>g.id===(u==null?void 0:u.id))||o(n),e(A1(p))}else if(((h=s.role)==null?void 0:h.id)===pn.id&&e(A1(n)),((f=s.role)==null?void 0:f.id)===Wt.id){const p=eLe(n,s),g=p[0];g&&(e(A1(p)),a({id:g.id,name:g.name,geo:[g.latitude,g.longitude]}))}}},[i,s]),{userInfo:s}},nLe=()=>{const{notificationCall:t,selectAccLogModalOpen:e}=ue(t9);tLe();const[n,s]=v.useState(!1),i=ue(Ks),a=Mr(),o=Dt();return r.jsxs("div",{children:[t&&on.createPortal(r.jsxs(yi,{time:1e3*30,show:t,onClose:()=>{o(b0(!1))},classListRoot:"min-w-[300px]",children:[r.jsx("h3",{className:"title-3 !text-white mt-2",children:"Вам звонит ..."}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[r.jsx(_e,{size:"Small",variant:"red",onClick:()=>{Me("/api/video/cancel-call",{user_to_cancel:t.userToCall,dialog_id:t.dialog_id}).then(()=>{o(b0(!1))})},children:"Отменить"}),r.jsx(_e,{size:"Small",onClick:()=>{b0(!1),a(Ji.chat,{state:{notificationCall:t}})},children:"Подробнее"})]})]}),document.getElementById("overlay-wrapper")),!i&&r.jsx(bm,{condition:e,set:l=>{o(Bs(l))}}),r.jsx(Ze,{condition:n,children:r.jsx(t8e,{condition:n,set:s,defaultDialogId:t.dialog_id,videoCallData:t})}),r.jsx(n8e,{})]})},sLe=()=>{const[t,e]=v.useState(0);return v.useEffect(()=>{const n=new Set,s=yn.onChange(i=>{const a=String(i.id);i.containerId==="chat-notifications"&&(i.status==="added"?n.add(a):i.status==="removed"&&n.delete(a),e(n.size))});return()=>s()},[]),r.jsxs(r.Fragment,{children:[t>2&&r.jsx(_e,{size:"Small",variant:"secondary",className:He("fixed right-4 w-[320px] z-[10000]"),onClick:()=>{yn.dismiss({containerId:"chat-notifications"}),setTimeout(()=>{e(0)},50)},style:{bottom:`${t*91+16}px`},children:"Скрыть все"}),r.jsx(phe,{containerId:"chat-notifications",style:{bottom:6}})]})},rLe=()=>r.jsxs(r.Fragment,{children:[r.jsx(e8e,{}),r.jsx(nLe,{}),r.jsx(sLe,{})]}),iLe="modulepreload",aLe=function(t){return"/"+t},NR={},oLe=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=aLe(c),c in NR)return;NR[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":iLe,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};function lLe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=t;let l,c;const u=async(h=!0)=>{await c};async function d(){if("serviceWorker"in navigator){if(l=await oLe(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o==null||o(h)}),!l)return;l.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),l.addEventListener("installed",h=>{h.isUpdate||s==null||s()}),l.register({immediate:e}).then(h=>{a?a("/sw.js",h):i==null||i(h)}).catch(h=>{o==null||o(h)})}}return c=d(),u}lLe({immediate:!0});Cp.createRoot(document.getElementById("root")).render(r.jsx(TQ,{store:Yse,children:r.jsx(Hre,{children:r.jsx(rLe,{})})}));
